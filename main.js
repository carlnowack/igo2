import"./chunk-X6YHEMIY.js";import{a as EDe}from"./chunk-YA6ZNGOK.js";import{a as pa}from"./chunk-FK6H3RFT.js";import{a as Xe,b as li,c as LC,d as sm,e as ad,f as am,g as ld,h as YL,i as st}from"./chunk-66YHNWRR.js";var sue=ad((_Et,dN)=>{(function(r,i,e,n){"use strict";var o=["","webkit","Moz","MS","ms","o"],s=i.createElement("div"),l="function",h=Math.round,p=Math.abs,m=Date.now;function f(Ue,Ke,ft){return setTimeout($(Ue,ft),Ke)}function g(Ue,Ke,ft){return Array.isArray(Ue)?(y(Ue,ft[Ke],ft),!0):!1}function y(Ue,Ke,ft){var Gt;if(Ue)if(Ue.forEach)Ue.forEach(Ke,ft);else if(Ue.length!==n)for(Gt=0;Gt<Ue.length;)Ke.call(ft,Ue[Gt],Gt,Ue),Gt++;else for(Gt in Ue)Ue.hasOwnProperty(Gt)&&Ke.call(ft,Ue[Gt],Gt,Ue)}function _(Ue,Ke,ft){var Gt="DEPRECATED METHOD: "+Ke+`
`+ft+` AT 
`;return function(){var Ii=new Error("get-stack-trace"),sn=Ii&&Ii.stack?Ii.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",oo=r.console&&(r.console.warn||r.console.log);return oo&&oo.call(r.console,Gt,sn),Ue.apply(this,arguments)}}var w;typeof Object.assign!="function"?w=function(Ke){if(Ke===n||Ke===null)throw new TypeError("Cannot convert undefined or null to object");for(var ft=Object(Ke),Gt=1;Gt<arguments.length;Gt++){var Ii=arguments[Gt];if(Ii!==n&&Ii!==null)for(var sn in Ii)Ii.hasOwnProperty(sn)&&(ft[sn]=Ii[sn])}return ft}:w=Object.assign;var A=_(function(Ke,ft,Gt){for(var Ii=Object.keys(ft),sn=0;sn<Ii.length;)(!Gt||Gt&&Ke[Ii[sn]]===n)&&(Ke[Ii[sn]]=ft[Ii[sn]]),sn++;return Ke},"extend","Use `assign`."),k=_(function(Ke,ft){return A(Ke,ft,!0)},"merge","Use `assign`.");function R(Ue,Ke,ft){var Gt=Ke.prototype,Ii;Ii=Ue.prototype=Object.create(Gt),Ii.constructor=Ue,Ii._super=Gt,ft&&w(Ii,ft)}function $(Ue,Ke){return function(){return Ue.apply(Ke,arguments)}}function H(Ue,Ke){return typeof Ue==l?Ue.apply(Ke&&Ke[0]||n,Ke):Ue}function oe(Ue,Ke){return Ue===n?Ke:Ue}function se(Ue,Ke,ft){y(Ce(Ke),function(Gt){Ue.addEventListener(Gt,ft,!1)})}function ge(Ue,Ke,ft){y(Ce(Ke),function(Gt){Ue.removeEventListener(Gt,ft,!1)})}function ue(Ue,Ke){for(;Ue;){if(Ue==Ke)return!0;Ue=Ue.parentNode}return!1}function pe(Ue,Ke){return Ue.indexOf(Ke)>-1}function Ce(Ue){return Ue.trim().split(/\s+/g)}function _e(Ue,Ke,ft){if(Ue.indexOf&&!ft)return Ue.indexOf(Ke);for(var Gt=0;Gt<Ue.length;){if(ft&&Ue[Gt][ft]==Ke||!ft&&Ue[Gt]===Ke)return Gt;Gt++}return-1}function de(Ue){return Array.prototype.slice.call(Ue,0)}function te(Ue,Ke,ft){for(var Gt=[],Ii=[],sn=0;sn<Ue.length;){var oo=Ke?Ue[sn][Ke]:Ue[sn];_e(Ii,oo)<0&&Gt.push(Ue[sn]),Ii[sn]=oo,sn++}return ft&&(Ke?Gt=Gt.sort(function(Qs,Il){return Qs[Ke]>Il[Ke]}):Gt=Gt.sort()),Gt}function Se(Ue,Ke){for(var ft,Gt,Ii=Ke[0].toUpperCase()+Ke.slice(1),sn=0;sn<o.length;){if(ft=o[sn],Gt=ft?ft+Ii:Ke,Gt in Ue)return Gt;sn++}return n}var Te=1;function De(){return Te++}function Le(Ue){var Ke=Ue.ownerDocument||Ue;return Ke.defaultView||Ke.parentWindow||r}var Me=/mobile|tablet|ip(ad|hone|od)|android/i,ze="ontouchstart"in r,Ve=Se(r,"PointerEvent")!==n,$e=ze&&Me.test(navigator.userAgent),nt="touch",be="pen",we="mouse",ke="kinect",et=25,Qe=1,at=2,_t=4,ht=8,Zt=1,Tt=2,me=4,Ct=8,pt=16,Pe=Tt|me,ye=Ct|pt,lt=Pe|ye,Ot=["x","y"],ut=["clientX","clientY"];function ot(Ue,Ke){var ft=this;this.manager=Ue,this.callback=Ke,this.element=Ue.element,this.target=Ue.options.inputTarget,this.domHandler=function(Gt){H(Ue.options.enable,[Ue])&&ft.handler(Gt)},this.init()}ot.prototype={handler:function(){},init:function(){this.evEl&&se(this.element,this.evEl,this.domHandler),this.evTarget&&se(this.target,this.evTarget,this.domHandler),this.evWin&&se(Le(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ge(this.element,this.evEl,this.domHandler),this.evTarget&&ge(this.target,this.evTarget,this.domHandler),this.evWin&&ge(Le(this.element),this.evWin,this.domHandler)}};function Rt(Ue){var Ke,ft=Ue.options.inputClass;return ft?Ke=ft:Ve?Ke=cs:$e?Ke=Pi:ze?Ke=Zn:Ke=Mo,new Ke(Ue,Lt)}function Lt(Ue,Ke,ft){var Gt=ft.pointers.length,Ii=ft.changedPointers.length,sn=Ke&Qe&&Gt-Ii===0,oo=Ke&(_t|ht)&&Gt-Ii===0;ft.isFirst=!!sn,ft.isFinal=!!oo,sn&&(Ue.session={}),ft.eventType=Ke,Nt(Ue,ft),Ue.emit("hammer.input",ft),Ue.recognize(ft),Ue.session.prevInput=ft}function Nt(Ue,Ke){var ft=Ue.session,Gt=Ke.pointers,Ii=Gt.length;ft.firstInput||(ft.firstInput=vi(Ke)),Ii>1&&!ft.firstMultiple?ft.firstMultiple=vi(Ke):Ii===1&&(ft.firstMultiple=!1);var sn=ft.firstInput,oo=ft.firstMultiple,Es=oo?oo.center:sn.center,Qs=Ke.center=Hi(Gt);Ke.timeStamp=m(),Ke.deltaTime=Ke.timeStamp-sn.timeStamp,Ke.angle=Wt(Es,Qs),Ke.distance=$i(Es,Qs),ni(ft,Ke),Ke.offsetDirection=Li(Ke.deltaX,Ke.deltaY);var Il=Ei(Ke.deltaTime,Ke.deltaX,Ke.deltaY);Ke.overallVelocityX=Il.x,Ke.overallVelocityY=Il.y,Ke.overallVelocity=p(Il.x)>p(Il.y)?Il.x:Il.y,Ke.scale=oo?En(oo.pointers,Gt):1,Ke.rotation=oo?Sr(oo.pointers,Gt):0,Ke.maxPointers=ft.prevInput?Ke.pointers.length>ft.prevInput.maxPointers?Ke.pointers.length:ft.prevInput.maxPointers:Ke.pointers.length,wi(ft,Ke);var Ld=Ue.element;ue(Ke.srcEvent.target,Ld)&&(Ld=Ke.srcEvent.target),Ke.target=Ld}function ni(Ue,Ke){var ft=Ke.center,Gt=Ue.offsetDelta||{},Ii=Ue.prevDelta||{},sn=Ue.prevInput||{};(Ke.eventType===Qe||sn.eventType===_t)&&(Ii=Ue.prevDelta={x:sn.deltaX||0,y:sn.deltaY||0},Gt=Ue.offsetDelta={x:ft.x,y:ft.y}),Ke.deltaX=Ii.x+(ft.x-Gt.x),Ke.deltaY=Ii.y+(ft.y-Gt.y)}function wi(Ue,Ke){var ft=Ue.lastInterval||Ke,Gt=Ke.timeStamp-ft.timeStamp,Ii,sn,oo,Es;if(Ke.eventType!=ht&&(Gt>et||ft.velocity===n)){var Qs=Ke.deltaX-ft.deltaX,Il=Ke.deltaY-ft.deltaY,Ld=Ei(Gt,Qs,Il);sn=Ld.x,oo=Ld.y,Ii=p(Ld.x)>p(Ld.y)?Ld.x:Ld.y,Es=Li(Qs,Il),Ue.lastInterval=Ke}else Ii=ft.velocity,sn=ft.velocityX,oo=ft.velocityY,Es=ft.direction;Ke.velocity=Ii,Ke.velocityX=sn,Ke.velocityY=oo,Ke.direction=Es}function vi(Ue){for(var Ke=[],ft=0;ft<Ue.pointers.length;)Ke[ft]={clientX:h(Ue.pointers[ft].clientX),clientY:h(Ue.pointers[ft].clientY)},ft++;return{timeStamp:m(),pointers:Ke,center:Hi(Ke),deltaX:Ue.deltaX,deltaY:Ue.deltaY}}function Hi(Ue){var Ke=Ue.length;if(Ke===1)return{x:h(Ue[0].clientX),y:h(Ue[0].clientY)};for(var ft=0,Gt=0,Ii=0;Ii<Ke;)ft+=Ue[Ii].clientX,Gt+=Ue[Ii].clientY,Ii++;return{x:h(ft/Ke),y:h(Gt/Ke)}}function Ei(Ue,Ke,ft){return{x:Ke/Ue||0,y:ft/Ue||0}}function Li(Ue,Ke){return Ue===Ke?Zt:p(Ue)>=p(Ke)?Ue<0?Tt:me:Ke<0?Ct:pt}function $i(Ue,Ke,ft){ft||(ft=Ot);var Gt=Ke[ft[0]]-Ue[ft[0]],Ii=Ke[ft[1]]-Ue[ft[1]];return Math.sqrt(Gt*Gt+Ii*Ii)}function Wt(Ue,Ke,ft){ft||(ft=Ot);var Gt=Ke[ft[0]]-Ue[ft[0]],Ii=Ke[ft[1]]-Ue[ft[1]];return Math.atan2(Ii,Gt)*180/Math.PI}function Sr(Ue,Ke){return Wt(Ke[1],Ke[0],ut)+Wt(Ue[1],Ue[0],ut)}function En(Ue,Ke){return $i(Ke[0],Ke[1],ut)/$i(Ue[0],Ue[1],ut)}var ro={mousedown:Qe,mousemove:at,mouseup:_t},yr="mousedown",Ir="mousemove mouseup";function Mo(){this.evEl=yr,this.evWin=Ir,this.pressed=!1,ot.apply(this,arguments)}R(Mo,ot,{handler:function(Ke){var ft=ro[Ke.type];ft&Qe&&Ke.button===0&&(this.pressed=!0),ft&at&&Ke.which!==1&&(ft=_t),this.pressed&&(ft&_t&&(this.pressed=!1),this.callback(this.manager,ft,{pointers:[Ke],changedPointers:[Ke],pointerType:we,srcEvent:Ke}))}});var kn={pointerdown:Qe,pointermove:at,pointerup:_t,pointercancel:ht,pointerout:ht},Lo={2:nt,3:be,4:we,5:ke},rr="pointerdown",gr="pointermove pointerup pointercancel";r.MSPointerEvent&&!r.PointerEvent&&(rr="MSPointerDown",gr="MSPointerMove MSPointerUp MSPointerCancel");function cs(){this.evEl=rr,this.evWin=gr,ot.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}R(cs,ot,{handler:function(Ke){var ft=this.store,Gt=!1,Ii=Ke.type.toLowerCase().replace("ms",""),sn=kn[Ii],oo=Lo[Ke.pointerType]||Ke.pointerType,Es=oo==nt,Qs=_e(ft,Ke.pointerId,"pointerId");sn&Qe&&(Ke.button===0||Es)?Qs<0&&(ft.push(Ke),Qs=ft.length-1):sn&(_t|ht)&&(Gt=!0),!(Qs<0)&&(ft[Qs]=Ke,this.callback(this.manager,sn,{pointers:ft,changedPointers:[Ke],pointerType:oo,srcEvent:Ke}),Gt&&ft.splice(Qs,1))}});var Mi={touchstart:Qe,touchmove:at,touchend:_t,touchcancel:ht},pr="touchstart",_o="touchstart touchmove touchend touchcancel";function Xo(){this.evTarget=pr,this.evWin=_o,this.started=!1,ot.apply(this,arguments)}R(Xo,ot,{handler:function(Ke){var ft=Mi[Ke.type];if(ft===Qe&&(this.started=!0),!!this.started){var Gt=uo.call(this,Ke,ft);ft&(_t|ht)&&Gt[0].length-Gt[1].length===0&&(this.started=!1),this.callback(this.manager,ft,{pointers:Gt[0],changedPointers:Gt[1],pointerType:nt,srcEvent:Ke})}}});function uo(Ue,Ke){var ft=de(Ue.touches),Gt=de(Ue.changedTouches);return Ke&(_t|ht)&&(ft=te(ft.concat(Gt),"identifier",!0)),[ft,Gt]}var Rn={touchstart:Qe,touchmove:at,touchend:_t,touchcancel:ht},Ra="touchstart touchmove touchend touchcancel";function Pi(){this.evTarget=Ra,this.targetIds={},ot.apply(this,arguments)}R(Pi,ot,{handler:function(Ke){var ft=Rn[Ke.type],Gt=Vs.call(this,Ke,ft);Gt&&this.callback(this.manager,ft,{pointers:Gt[0],changedPointers:Gt[1],pointerType:nt,srcEvent:Ke})}});function Vs(Ue,Ke){var ft=de(Ue.touches),Gt=this.targetIds;if(Ke&(Qe|at)&&ft.length===1)return Gt[ft[0].identifier]=!0,[ft,ft];var Ii,sn,oo=de(Ue.changedTouches),Es=[],Qs=this.target;if(sn=ft.filter(function(Il){return ue(Il.target,Qs)}),Ke===Qe)for(Ii=0;Ii<sn.length;)Gt[sn[Ii].identifier]=!0,Ii++;for(Ii=0;Ii<oo.length;)Gt[oo[Ii].identifier]&&Es.push(oo[Ii]),Ke&(_t|ht)&&delete Gt[oo[Ii].identifier],Ii++;if(Es.length)return[te(sn.concat(Es),"identifier",!0),Es]}var wl=2500,Ur=25;function Zn(){ot.apply(this,arguments);var Ue=$(this.handler,this);this.touch=new Pi(this.manager,Ue),this.mouse=new Mo(this.manager,Ue),this.primaryTouch=null,this.lastTouches=[]}R(Zn,ot,{handler:function(Ke,ft,Gt){var Ii=Gt.pointerType==nt,sn=Gt.pointerType==we;if(!(sn&&Gt.sourceCapabilities&&Gt.sourceCapabilities.firesTouchEvents)){if(Ii)ho.call(this,ft,Gt);else if(sn&&Ks.call(this,Gt))return;this.callback(Ke,ft,Gt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function ho(Ue,Ke){Ue&Qe?(this.primaryTouch=Ke.changedPointers[0].identifier,$s.call(this,Ke)):Ue&(_t|ht)&&$s.call(this,Ke)}function $s(Ue){var Ke=Ue.changedPointers[0];if(Ke.identifier===this.primaryTouch){var ft={x:Ke.clientX,y:Ke.clientY};this.lastTouches.push(ft);var Gt=this.lastTouches,Ii=function(){var sn=Gt.indexOf(ft);sn>-1&&Gt.splice(sn,1)};setTimeout(Ii,wl)}}function Ks(Ue){for(var Ke=Ue.srcEvent.clientX,ft=Ue.srcEvent.clientY,Gt=0;Gt<this.lastTouches.length;Gt++){var Ii=this.lastTouches[Gt],sn=Math.abs(Ke-Ii.x),oo=Math.abs(ft-Ii.y);if(sn<=Ur&&oo<=Ur)return!0}return!1}var Cl=Se(s.style,"touchAction"),xl=Cl!==n,tc="compute",Nu="auto",Bu="manipulation",Xa="none",id="pan-x",Dh="pan-y",Rd=y0();function ju(Ue,Ke){this.manager=Ue,this.set(Ke)}ju.prototype={set:function(Ue){Ue==tc&&(Ue=this.compute()),xl&&this.manager.element.style&&Rd[Ue]&&(this.manager.element.style[Cl]=Ue),this.actions=Ue.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Ue=[];return y(this.manager.recognizers,function(Ke){H(Ke.options.enable,[Ke])&&(Ue=Ue.concat(Ke.getTouchAction()))}),qf(Ue.join(" "))},preventDefaults:function(Ue){var Ke=Ue.srcEvent,ft=Ue.offsetDirection;if(this.manager.session.prevented){Ke.preventDefault();return}var Gt=this.actions,Ii=pe(Gt,Xa)&&!Rd[Xa],sn=pe(Gt,Dh)&&!Rd[Dh],oo=pe(Gt,id)&&!Rd[id];if(Ii){var Es=Ue.pointers.length===1,Qs=Ue.distance<2,Il=Ue.deltaTime<250;if(Es&&Qs&&Il)return}if(!(oo&&sn)&&(Ii||sn&&ft&Pe||oo&&ft&ye))return this.preventSrc(Ke)},preventSrc:function(Ue){this.manager.session.prevented=!0,Ue.preventDefault()}};function qf(Ue){if(pe(Ue,Xa))return Xa;var Ke=pe(Ue,id),ft=pe(Ue,Dh);return Ke&&ft?Xa:Ke||ft?Ke?id:Dh:pe(Ue,Bu)?Bu:Nu}function y0(){if(!xl)return!1;var Ue={},Ke=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(ft){Ue[ft]=Ke?r.CSS.supports("touch-action",ft):!0}),Ue}var Yf=1,Fd=2,ms=4,nd=8,Vu=nd,Gm=16,rd=32;function kh(Ue){this.options=w({},this.defaults,Ue||{}),this.id=De(),this.manager=null,this.options.enable=oe(this.options.enable,!0),this.state=Yf,this.simultaneous={},this.requireFail=[]}kh.prototype={defaults:{},set:function(Ue){return w(this.options,Ue),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Ue){if(g(Ue,"recognizeWith",this))return this;var Ke=this.simultaneous;return Ue=em(Ue,this),Ke[Ue.id]||(Ke[Ue.id]=Ue,Ue.recognizeWith(this)),this},dropRecognizeWith:function(Ue){return g(Ue,"dropRecognizeWith",this)?this:(Ue=em(Ue,this),delete this.simultaneous[Ue.id],this)},requireFailure:function(Ue){if(g(Ue,"requireFailure",this))return this;var Ke=this.requireFail;return Ue=em(Ue,this),_e(Ke,Ue)===-1&&(Ke.push(Ue),Ue.requireFailure(this)),this},dropRequireFailure:function(Ue){if(g(Ue,"dropRequireFailure",this))return this;Ue=em(Ue,this);var Ke=_e(this.requireFail,Ue);return Ke>-1&&this.requireFail.splice(Ke,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Ue){return!!this.simultaneous[Ue.id]},emit:function(Ue){var Ke=this,ft=this.state;function Gt(Ii){Ke.manager.emit(Ii,Ue)}ft<nd&&Gt(Ke.options.event+dy(ft)),Gt(Ke.options.event),Ue.additionalEvent&&Gt(Ue.additionalEvent),ft>=nd&&Gt(Ke.options.event+dy(ft))},tryEmit:function(Ue){if(this.canEmit())return this.emit(Ue);this.state=rd},canEmit:function(){for(var Ue=0;Ue<this.requireFail.length;){if(!(this.requireFail[Ue].state&(rd|Yf)))return!1;Ue++}return!0},recognize:function(Ue){var Ke=w({},Ue);if(!H(this.options.enable,[this,Ke])){this.reset(),this.state=rd;return}this.state&(Vu|Gm|rd)&&(this.state=Yf),this.state=this.process(Ke),this.state&(Fd|ms|nd|Gm)&&this.tryEmit(Ke)},process:function(Ue){},getTouchAction:function(){},reset:function(){}};function dy(Ue){return Ue&Gm?"cancel":Ue&nd?"end":Ue&ms?"move":Ue&Fd?"start":""}function Sb(Ue){return Ue==pt?"down":Ue==Ct?"up":Ue==Tt?"left":Ue==me?"right":""}function em(Ue,Ke){var ft=Ke.manager;return ft?ft.get(Ue):Ue}function Jd(){kh.apply(this,arguments)}R(Jd,kh,{defaults:{pointers:1},attrTest:function(Ue){var Ke=this.options.pointers;return Ke===0||Ue.pointers.length===Ke},process:function(Ue){var Ke=this.state,ft=Ue.eventType,Gt=Ke&(Fd|ms),Ii=this.attrTest(Ue);return Gt&&(ft&ht||!Ii)?Ke|Gm:Gt||Ii?ft&_t?Ke|nd:Ke&Fd?Ke|ms:Fd:rd}});function Zs(){Jd.apply(this,arguments),this.pX=null,this.pY=null}R(Zs,Jd,{defaults:{event:"pan",threshold:10,pointers:1,direction:lt},getTouchAction:function(){var Ue=this.options.direction,Ke=[];return Ue&Pe&&Ke.push(Dh),Ue&ye&&Ke.push(id),Ke},directionTest:function(Ue){var Ke=this.options,ft=!0,Gt=Ue.distance,Ii=Ue.direction,sn=Ue.deltaX,oo=Ue.deltaY;return Ii&Ke.direction||(Ke.direction&Pe?(Ii=sn===0?Zt:sn<0?Tt:me,ft=sn!=this.pX,Gt=Math.abs(Ue.deltaX)):(Ii=oo===0?Zt:oo<0?Ct:pt,ft=oo!=this.pY,Gt=Math.abs(Ue.deltaY))),Ue.direction=Ii,ft&&Gt>Ke.threshold&&Ii&Ke.direction},attrTest:function(Ue){return Jd.prototype.attrTest.call(this,Ue)&&(this.state&Fd||!(this.state&Fd)&&this.directionTest(Ue))},emit:function(Ue){this.pX=Ue.deltaX,this.pY=Ue.deltaY;var Ke=Sb(Ue.direction);Ke&&(Ue.additionalEvent=this.options.event+Ke),this._super.emit.call(this,Ue)}});function Kf(){Jd.apply(this,arguments)}R(Kf,Jd,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Xa]},attrTest:function(Ue){return this._super.attrTest.call(this,Ue)&&(Math.abs(Ue.scale-1)>this.options.threshold||this.state&Fd)},emit:function(Ue){if(Ue.scale!==1){var Ke=Ue.scale<1?"in":"out";Ue.additionalEvent=this.options.event+Ke}this._super.emit.call(this,Ue)}});function Zf(){kh.apply(this,arguments),this._timer=null,this._input=null}R(Zf,kh,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Nu]},process:function(Ue){var Ke=this.options,ft=Ue.pointers.length===Ke.pointers,Gt=Ue.distance<Ke.threshold,Ii=Ue.deltaTime>Ke.time;if(this._input=Ue,!Gt||!ft||Ue.eventType&(_t|ht)&&!Ii)this.reset();else if(Ue.eventType&Qe)this.reset(),this._timer=f(function(){this.state=Vu,this.tryEmit()},Ke.time,this);else if(Ue.eventType&_t)return Vu;return rd},reset:function(){clearTimeout(this._timer)},emit:function(Ue){this.state===Vu&&(Ue&&Ue.eventType&_t?this.manager.emit(this.options.event+"up",Ue):(this._input.timeStamp=m(),this.manager.emit(this.options.event,this._input)))}});function v0(){Jd.apply(this,arguments)}R(v0,Jd,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Xa]},attrTest:function(Ue){return this._super.attrTest.call(this,Ue)&&(Math.abs(Ue.rotation)>this.options.threshold||this.state&Fd)}});function Qf(){Jd.apply(this,arguments)}R(Qf,Jd,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Pe|ye,pointers:1},getTouchAction:function(){return Zs.prototype.getTouchAction.call(this)},attrTest:function(Ue){var Ke=this.options.direction,ft;return Ke&(Pe|ye)?ft=Ue.overallVelocity:Ke&Pe?ft=Ue.overallVelocityX:Ke&ye&&(ft=Ue.overallVelocityY),this._super.attrTest.call(this,Ue)&&Ke&Ue.offsetDirection&&Ue.distance>this.options.threshold&&Ue.maxPointers==this.options.pointers&&p(ft)>this.options.velocity&&Ue.eventType&_t},emit:function(Ue){var Ke=Sb(Ue.offsetDirection);Ke&&this.manager.emit(this.options.event+Ke,Ue),this.manager.emit(this.options.event,Ue)}});function b0(){kh.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}R(b0,kh,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Bu]},process:function(Ue){var Ke=this.options,ft=Ue.pointers.length===Ke.pointers,Gt=Ue.distance<Ke.threshold,Ii=Ue.deltaTime<Ke.time;if(this.reset(),Ue.eventType&Qe&&this.count===0)return this.failTimeout();if(Gt&&Ii&&ft){if(Ue.eventType!=_t)return this.failTimeout();var sn=this.pTime?Ue.timeStamp-this.pTime<Ke.interval:!0,oo=!this.pCenter||$i(this.pCenter,Ue.center)<Ke.posThreshold;this.pTime=Ue.timeStamp,this.pCenter=Ue.center,!oo||!sn?this.count=1:this.count+=1,this._input=Ue;var Es=this.count%Ke.taps;if(Es===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=Vu,this.tryEmit()},Ke.interval,this),Fd):Vu}return rd},failTimeout:function(){return this._timer=f(function(){this.state=rd},this.options.interval,this),rd},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Vu&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Sl(Ue,Ke){return Ke=Ke||{},Ke.recognizers=oe(Ke.recognizers,Sl.defaults.preset),new ap(Ue,Ke)}Sl.VERSION="2.0.7",Sl.defaults={domEvents:!1,touchAction:tc,enable:!0,inputTarget:null,inputClass:null,preset:[[v0,{enable:!1}],[Kf,{enable:!1},["rotate"]],[Qf,{direction:Pe}],[Zs,{direction:Pe},["swipe"]],[b0],[b0,{event:"doubletap",taps:2},["tap"]],[Zf]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var w0=1,Ll=2;function ap(Ue,Ke){this.options=w({},Sl.defaults,Ke||{}),this.options.inputTarget=this.options.inputTarget||Ue,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Ue,this.input=Rt(this),this.touchAction=new ju(this,this.options.touchAction),C0(this,!0),y(this.options.recognizers,function(ft){var Gt=this.add(new ft[0](ft[1]));ft[2]&&Gt.recognizeWith(ft[2]),ft[3]&&Gt.requireFailure(ft[3])},this)}ap.prototype={set:function(Ue){return w(this.options,Ue),Ue.touchAction&&this.touchAction.update(),Ue.inputTarget&&(this.input.destroy(),this.input.target=Ue.inputTarget,this.input.init()),this},stop:function(Ue){this.session.stopped=Ue?Ll:w0},recognize:function(Ue){var Ke=this.session;if(!Ke.stopped){this.touchAction.preventDefaults(Ue);var ft,Gt=this.recognizers,Ii=Ke.curRecognizer;(!Ii||Ii&&Ii.state&Vu)&&(Ii=Ke.curRecognizer=null);for(var sn=0;sn<Gt.length;)ft=Gt[sn],Ke.stopped!==Ll&&(!Ii||ft==Ii||ft.canRecognizeWith(Ii))?ft.recognize(Ue):ft.reset(),!Ii&&ft.state&(Fd|ms|nd)&&(Ii=Ke.curRecognizer=ft),sn++}},get:function(Ue){if(Ue instanceof kh)return Ue;for(var Ke=this.recognizers,ft=0;ft<Ke.length;ft++)if(Ke[ft].options.event==Ue)return Ke[ft];return null},add:function(Ue){if(g(Ue,"add",this))return this;var Ke=this.get(Ue.options.event);return Ke&&this.remove(Ke),this.recognizers.push(Ue),Ue.manager=this,this.touchAction.update(),Ue},remove:function(Ue){if(g(Ue,"remove",this))return this;if(Ue=this.get(Ue),Ue){var Ke=this.recognizers,ft=_e(Ke,Ue);ft!==-1&&(Ke.splice(ft,1),this.touchAction.update())}return this},on:function(Ue,Ke){if(Ue!==n&&Ke!==n){var ft=this.handlers;return y(Ce(Ue),function(Gt){ft[Gt]=ft[Gt]||[],ft[Gt].push(Ke)}),this}},off:function(Ue,Ke){if(Ue!==n){var ft=this.handlers;return y(Ce(Ue),function(Gt){Ke?ft[Gt]&&ft[Gt].splice(_e(ft[Gt],Ke),1):delete ft[Gt]}),this}},emit:function(Ue,Ke){this.options.domEvents&&Xf(Ue,Ke);var ft=this.handlers[Ue]&&this.handlers[Ue].slice();if(!(!ft||!ft.length)){Ke.type=Ue,Ke.preventDefault=function(){Ke.srcEvent.preventDefault()};for(var Gt=0;Gt<ft.length;)ft[Gt](Ke),Gt++}},destroy:function(){this.element&&C0(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function C0(Ue,Ke){var ft=Ue.element;if(ft.style){var Gt;y(Ue.options.cssProps,function(Ii,sn){Gt=Se(ft.style,sn),Ke?(Ue.oldCssProps[Gt]=ft.style[Gt],ft.style[Gt]=Ii):ft.style[Gt]=Ue.oldCssProps[Gt]||""}),Ke||(Ue.oldCssProps={})}}function Xf(Ue,Ke){var ft=i.createEvent("Event");ft.initEvent(Ue,!0,!0),ft.gesture=Ke,Ke.target.dispatchEvent(ft)}w(Sl,{INPUT_START:Qe,INPUT_MOVE:at,INPUT_END:_t,INPUT_CANCEL:ht,STATE_POSSIBLE:Yf,STATE_BEGAN:Fd,STATE_CHANGED:ms,STATE_ENDED:nd,STATE_RECOGNIZED:Vu,STATE_CANCELLED:Gm,STATE_FAILED:rd,DIRECTION_NONE:Zt,DIRECTION_LEFT:Tt,DIRECTION_RIGHT:me,DIRECTION_UP:Ct,DIRECTION_DOWN:pt,DIRECTION_HORIZONTAL:Pe,DIRECTION_VERTICAL:ye,DIRECTION_ALL:lt,Manager:ap,Input:ot,TouchAction:ju,TouchInput:Pi,MouseInput:Mo,PointerEventInput:cs,TouchMouseInput:Zn,SingleTouchInput:Xo,Recognizer:kh,AttrRecognizer:Jd,Tap:b0,Pan:Zs,Swipe:Qf,Pinch:Kf,Rotate:v0,Press:Zf,on:se,off:ge,each:y,merge:k,extend:A,assign:w,inherit:R,bindFn:$,prefixed:Se});var $u=typeof r<"u"?r:typeof self<"u"?self:{};$u.Hammer=Sl,typeof define=="function"&&define.amd?define(function(){return Sl}):typeof dN<"u"&&dN.exports?dN.exports=Sl:r[e]=Sl})(window,document,"Hammer")});var vpe=ad((iO,pW)=>{(function(r,i){typeof iO=="object"&&typeof pW=="object"?pW.exports=i():typeof define=="function"&&define.amd?define([],i):typeof iO=="object"?iO.bowser=i():r.bowser=i()})(iO,function(){return function(r){var i={};function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return r[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=r,e.c=i,e.d=function(n,o,s){e.o(n,o)||Object.defineProperty(n,o,{enumerable:!0,get:s})},e.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,o){if(1&o&&(n=e(n)),8&o||4&o&&typeof n=="object"&&n&&n.__esModule)return n;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:n}),2&o&&typeof n!="string")for(var l in n)e.d(s,l,function(h){return n[h]}.bind(null,l));return s},e.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(o,"a",o),o},e.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},e.p="",e(e.s=90)}({17:function(r,i,e){"use strict";i.__esModule=!0,i.default=void 0;var n=e(18),o=function(){function s(){}return s.getFirstMatch=function(l,h){var p=h.match(l);return p&&p.length>0&&p[1]||""},s.getSecondMatch=function(l,h){var p=h.match(l);return p&&p.length>1&&p[2]||""},s.matchAndReturnConst=function(l,h,p){if(l.test(h))return p},s.getWindowsVersionName=function(l){switch(l){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},s.getMacOSVersionName=function(l){var h=l.split(".").splice(0,2).map(function(p){return parseInt(p,10)||0});if(h.push(0),h[0]===10)switch(h[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},s.getAndroidVersionName=function(l){var h=l.split(".").splice(0,2).map(function(p){return parseInt(p,10)||0});if(h.push(0),!(h[0]===1&&h[1]<5))return h[0]===1&&h[1]<6?"Cupcake":h[0]===1&&h[1]>=6?"Donut":h[0]===2&&h[1]<2?"Eclair":h[0]===2&&h[1]===2?"Froyo":h[0]===2&&h[1]>2?"Gingerbread":h[0]===3?"Honeycomb":h[0]===4&&h[1]<1?"Ice Cream Sandwich":h[0]===4&&h[1]<4?"Jelly Bean":h[0]===4&&h[1]>=4?"KitKat":h[0]===5?"Lollipop":h[0]===6?"Marshmallow":h[0]===7?"Nougat":h[0]===8?"Oreo":h[0]===9?"Pie":void 0},s.getVersionPrecision=function(l){return l.split(".").length},s.compareVersions=function(l,h,p){p===void 0&&(p=!1);var m=s.getVersionPrecision(l),f=s.getVersionPrecision(h),g=Math.max(m,f),y=0,_=s.map([l,h],function(w){var A=g-s.getVersionPrecision(w),k=w+new Array(A+1).join(".0");return s.map(k.split("."),function(R){return new Array(20-R.length).join("0")+R}).reverse()});for(p&&(y=g-Math.min(m,f)),g-=1;g>=y;){if(_[0][g]>_[1][g])return 1;if(_[0][g]===_[1][g]){if(g===y)return 0;g-=1}else if(_[0][g]<_[1][g])return-1}},s.map=function(l,h){var p,m=[];if(Array.prototype.map)return Array.prototype.map.call(l,h);for(p=0;p<l.length;p+=1)m.push(h(l[p]));return m},s.find=function(l,h){var p,m;if(Array.prototype.find)return Array.prototype.find.call(l,h);for(p=0,m=l.length;p<m;p+=1){var f=l[p];if(h(f,p))return f}},s.assign=function(l){for(var h,p,m=l,f=arguments.length,g=new Array(f>1?f-1:0),y=1;y<f;y++)g[y-1]=arguments[y];if(Object.assign)return Object.assign.apply(Object,[l].concat(g));var _=function(){var w=g[h];typeof w=="object"&&w!==null&&Object.keys(w).forEach(function(A){m[A]=w[A]})};for(h=0,p=g.length;h<p;h+=1)_();return l},s.getBrowserAlias=function(l){return n.BROWSER_ALIASES_MAP[l]},s.getBrowserTypeByAlias=function(l){return n.BROWSER_MAP[l]||""},s}();i.default=o,r.exports=i.default},18:function(r,i,e){"use strict";i.__esModule=!0,i.ENGINE_MAP=i.OS_MAP=i.PLATFORMS_MAP=i.BROWSER_MAP=i.BROWSER_ALIASES_MAP=void 0,i.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast","Pale Moon":"pale_moon",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},i.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",pale_moon:"Pale Moon",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},i.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv",bot:"bot"},i.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},i.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(r,i,e){"use strict";i.__esModule=!0,i.default=void 0;var n,o=(n=e(91))&&n.__esModule?n:{default:n},s=e(18);function l(p,m){for(var f=0;f<m.length;f++){var g=m[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,g.key,g)}}var h=function(){function p(){}var m,f,g;return p.getParser=function(y,_){if(_===void 0&&(_=!1),typeof y!="string")throw new Error("UserAgent should be a string");return new o.default(y,_)},p.parse=function(y){return new o.default(y).getResult()},m=p,g=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],(f=null)&&l(m.prototype,f),g&&l(m,g),p}();i.default=h,r.exports=i.default},91:function(r,i,e){"use strict";i.__esModule=!0,i.default=void 0;var n=p(e(92)),o=p(e(93)),s=p(e(94)),l=p(e(95)),h=p(e(17));function p(f){return f&&f.__esModule?f:{default:f}}var m=function(){function f(y,_){if(_===void 0&&(_=!1),y==null||y==="")throw new Error("UserAgent parameter can't be empty");this._ua=y,this.parsedResult={},_!==!0&&this.parse()}var g=f.prototype;return g.getUA=function(){return this._ua},g.test=function(y){return y.test(this._ua)},g.parseBrowser=function(){var y=this;this.parsedResult.browser={};var _=h.default.find(n.default,function(w){if(typeof w.test=="function")return w.test(y);if(Array.isArray(w.test))return w.test.some(function(A){return y.test(A)});throw new Error("Browser's test function is not valid")});return _&&(this.parsedResult.browser=_.describe(this.getUA())),this.parsedResult.browser},g.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},g.getBrowserName=function(y){return y?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},g.getBrowserVersion=function(){return this.getBrowser().version},g.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},g.parseOS=function(){var y=this;this.parsedResult.os={};var _=h.default.find(o.default,function(w){if(typeof w.test=="function")return w.test(y);if(Array.isArray(w.test))return w.test.some(function(A){return y.test(A)});throw new Error("Browser's test function is not valid")});return _&&(this.parsedResult.os=_.describe(this.getUA())),this.parsedResult.os},g.getOSName=function(y){var _=this.getOS().name;return y?String(_).toLowerCase()||"":_||""},g.getOSVersion=function(){return this.getOS().version},g.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},g.getPlatformType=function(y){y===void 0&&(y=!1);var _=this.getPlatform().type;return y?String(_).toLowerCase()||"":_||""},g.parsePlatform=function(){var y=this;this.parsedResult.platform={};var _=h.default.find(s.default,function(w){if(typeof w.test=="function")return w.test(y);if(Array.isArray(w.test))return w.test.some(function(A){return y.test(A)});throw new Error("Browser's test function is not valid")});return _&&(this.parsedResult.platform=_.describe(this.getUA())),this.parsedResult.platform},g.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},g.getEngineName=function(y){return y?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},g.parseEngine=function(){var y=this;this.parsedResult.engine={};var _=h.default.find(l.default,function(w){if(typeof w.test=="function")return w.test(y);if(Array.isArray(w.test))return w.test.some(function(A){return y.test(A)});throw new Error("Browser's test function is not valid")});return _&&(this.parsedResult.engine=_.describe(this.getUA())),this.parsedResult.engine},g.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},g.getResult=function(){return h.default.assign({},this.parsedResult)},g.satisfies=function(y){var _=this,w={},A=0,k={},R=0;if(Object.keys(y).forEach(function(Ce){var _e=y[Ce];typeof _e=="string"?(k[Ce]=_e,R+=1):typeof _e=="object"&&(w[Ce]=_e,A+=1)}),A>0){var $=Object.keys(w),H=h.default.find($,function(Ce){return _.isOS(Ce)});if(H){var oe=this.satisfies(w[H]);if(oe!==void 0)return oe}var se=h.default.find($,function(Ce){return _.isPlatform(Ce)});if(se){var ge=this.satisfies(w[se]);if(ge!==void 0)return ge}}if(R>0){var ue=Object.keys(k),pe=h.default.find(ue,function(Ce){return _.isBrowser(Ce,!0)});if(pe!==void 0)return this.compareVersion(k[pe])}},g.isBrowser=function(y,_){_===void 0&&(_=!1);var w=this.getBrowserName().toLowerCase(),A=y.toLowerCase(),k=h.default.getBrowserTypeByAlias(A);return _&&k&&(A=k.toLowerCase()),A===w},g.compareVersion=function(y){var _=[0],w=y,A=!1,k=this.getBrowserVersion();if(typeof k=="string")return y[0]===">"||y[0]==="<"?(w=y.substr(1),y[1]==="="?(A=!0,w=y.substr(2)):_=[],y[0]===">"?_.push(1):_.push(-1)):y[0]==="="?w=y.substr(1):y[0]==="~"&&(A=!0,w=y.substr(1)),_.indexOf(h.default.compareVersions(k,w,A))>-1},g.isOS=function(y){return this.getOSName(!0)===String(y).toLowerCase()},g.isPlatform=function(y){return this.getPlatformType(!0)===String(y).toLowerCase()},g.isEngine=function(y){return this.getEngineName(!0)===String(y).toLowerCase()},g.is=function(y,_){return _===void 0&&(_=!1),this.isBrowser(y,_)||this.isOS(y)||this.isPlatform(y)},g.some=function(y){var _=this;return y===void 0&&(y=[]),y.some(function(w){return _.is(w)})},f}();i.default=m,r.exports=i.default},92:function(r,i,e){"use strict";i.__esModule=!0,i.default=void 0;var n,o=(n=e(17))&&n.__esModule?n:{default:n},s=/version\/(\d+(\.?_?\d+)+)/i,l=[{test:[/googlebot/i],describe:function(h){var p={name:"Googlebot"},m=o.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,h)||o.default.getFirstMatch(s,h);return m&&(p.version=m),p}},{test:[/opera/i],describe:function(h){var p={name:"Opera"},m=o.default.getFirstMatch(s,h)||o.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/opr\/|opios/i],describe:function(h){var p={name:"Opera"},m=o.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,h)||o.default.getFirstMatch(s,h);return m&&(p.version=m),p}},{test:[/SamsungBrowser/i],describe:function(h){var p={name:"Samsung Internet for Android"},m=o.default.getFirstMatch(s,h)||o.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/Whale/i],describe:function(h){var p={name:"NAVER Whale Browser"},m=o.default.getFirstMatch(s,h)||o.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/PaleMoon/i],describe:function(h){var p={name:"Pale Moon"},m=o.default.getFirstMatch(s,h)||o.default.getFirstMatch(/(?:PaleMoon)[\s/](\d+(?:\.\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/MZBrowser/i],describe:function(h){var p={name:"MZ Browser"},m=o.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,h)||o.default.getFirstMatch(s,h);return m&&(p.version=m),p}},{test:[/focus/i],describe:function(h){var p={name:"Focus"},m=o.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,h)||o.default.getFirstMatch(s,h);return m&&(p.version=m),p}},{test:[/swing/i],describe:function(h){var p={name:"Swing"},m=o.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,h)||o.default.getFirstMatch(s,h);return m&&(p.version=m),p}},{test:[/coast/i],describe:function(h){var p={name:"Opera Coast"},m=o.default.getFirstMatch(s,h)||o.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(h){var p={name:"Opera Touch"},m=o.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,h)||o.default.getFirstMatch(s,h);return m&&(p.version=m),p}},{test:[/yabrowser/i],describe:function(h){var p={name:"Yandex Browser"},m=o.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,h)||o.default.getFirstMatch(s,h);return m&&(p.version=m),p}},{test:[/ucbrowser/i],describe:function(h){var p={name:"UC Browser"},m=o.default.getFirstMatch(s,h)||o.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/Maxthon|mxios/i],describe:function(h){var p={name:"Maxthon"},m=o.default.getFirstMatch(s,h)||o.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/epiphany/i],describe:function(h){var p={name:"Epiphany"},m=o.default.getFirstMatch(s,h)||o.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/puffin/i],describe:function(h){var p={name:"Puffin"},m=o.default.getFirstMatch(s,h)||o.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/sleipnir/i],describe:function(h){var p={name:"Sleipnir"},m=o.default.getFirstMatch(s,h)||o.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/k-meleon/i],describe:function(h){var p={name:"K-Meleon"},m=o.default.getFirstMatch(s,h)||o.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/micromessenger/i],describe:function(h){var p={name:"WeChat"},m=o.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,h)||o.default.getFirstMatch(s,h);return m&&(p.version=m),p}},{test:[/qqbrowser/i],describe:function(h){var p={name:/qqbrowserlite/i.test(h)?"QQ Browser Lite":"QQ Browser"},m=o.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,h)||o.default.getFirstMatch(s,h);return m&&(p.version=m),p}},{test:[/msie|trident/i],describe:function(h){var p={name:"Internet Explorer"},m=o.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/\sedg\//i],describe:function(h){var p={name:"Microsoft Edge"},m=o.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/edg([ea]|ios)/i],describe:function(h){var p={name:"Microsoft Edge"},m=o.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/vivaldi/i],describe:function(h){var p={name:"Vivaldi"},m=o.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/seamonkey/i],describe:function(h){var p={name:"SeaMonkey"},m=o.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/sailfish/i],describe:function(h){var p={name:"Sailfish"},m=o.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,h);return m&&(p.version=m),p}},{test:[/silk/i],describe:function(h){var p={name:"Amazon Silk"},m=o.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/phantom/i],describe:function(h){var p={name:"PhantomJS"},m=o.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/slimerjs/i],describe:function(h){var p={name:"SlimerJS"},m=o.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(h){var p={name:"BlackBerry"},m=o.default.getFirstMatch(s,h)||o.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/(web|hpw)[o0]s/i],describe:function(h){var p={name:"WebOS Browser"},m=o.default.getFirstMatch(s,h)||o.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/bada/i],describe:function(h){var p={name:"Bada"},m=o.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/tizen/i],describe:function(h){var p={name:"Tizen"},m=o.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,h)||o.default.getFirstMatch(s,h);return m&&(p.version=m),p}},{test:[/qupzilla/i],describe:function(h){var p={name:"QupZilla"},m=o.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,h)||o.default.getFirstMatch(s,h);return m&&(p.version=m),p}},{test:[/firefox|iceweasel|fxios/i],describe:function(h){var p={name:"Firefox"},m=o.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/electron/i],describe:function(h){var p={name:"Electron"},m=o.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/MiuiBrowser/i],describe:function(h){var p={name:"Miui"},m=o.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/chromium/i],describe:function(h){var p={name:"Chromium"},m=o.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,h)||o.default.getFirstMatch(s,h);return m&&(p.version=m),p}},{test:[/chrome|crios|crmo/i],describe:function(h){var p={name:"Chrome"},m=o.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/GSA/i],describe:function(h){var p={name:"Google Search"},m=o.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:function(h){var p=!h.test(/like android/i),m=h.test(/android/i);return p&&m},describe:function(h){var p={name:"Android Browser"},m=o.default.getFirstMatch(s,h);return m&&(p.version=m),p}},{test:[/playstation 4/i],describe:function(h){var p={name:"PlayStation 4"},m=o.default.getFirstMatch(s,h);return m&&(p.version=m),p}},{test:[/safari|applewebkit/i],describe:function(h){var p={name:"Safari"},m=o.default.getFirstMatch(s,h);return m&&(p.version=m),p}},{test:[/.*/i],describe:function(h){var p=h.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:o.default.getFirstMatch(p,h),version:o.default.getSecondMatch(p,h)}}}];i.default=l,r.exports=i.default},93:function(r,i,e){"use strict";i.__esModule=!0,i.default=void 0;var n,o=(n=e(17))&&n.__esModule?n:{default:n},s=e(18),l=[{test:[/Roku\/DVP/],describe:function(h){var p=o.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,h);return{name:s.OS_MAP.Roku,version:p}}},{test:[/windows phone/i],describe:function(h){var p=o.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,h);return{name:s.OS_MAP.WindowsPhone,version:p}}},{test:[/windows /i],describe:function(h){var p=o.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,h),m=o.default.getWindowsVersionName(p);return{name:s.OS_MAP.Windows,version:p,versionName:m}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(h){var p={name:s.OS_MAP.iOS},m=o.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,h);return m&&(p.version=m),p}},{test:[/macintosh/i],describe:function(h){var p=o.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,h).replace(/[_\s]/g,"."),m=o.default.getMacOSVersionName(p),f={name:s.OS_MAP.MacOS,version:p};return m&&(f.versionName=m),f}},{test:[/(ipod|iphone|ipad)/i],describe:function(h){var p=o.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,h).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:p}}},{test:function(h){var p=!h.test(/like android/i),m=h.test(/android/i);return p&&m},describe:function(h){var p=o.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,h),m=o.default.getAndroidVersionName(p),f={name:s.OS_MAP.Android,version:p};return m&&(f.versionName=m),f}},{test:[/(web|hpw)[o0]s/i],describe:function(h){var p=o.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,h),m={name:s.OS_MAP.WebOS};return p&&p.length&&(m.version=p),m}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(h){var p=o.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,h)||o.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,h)||o.default.getFirstMatch(/\bbb(\d+)/i,h);return{name:s.OS_MAP.BlackBerry,version:p}}},{test:[/bada/i],describe:function(h){var p=o.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,h);return{name:s.OS_MAP.Bada,version:p}}},{test:[/tizen/i],describe:function(h){var p=o.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,h);return{name:s.OS_MAP.Tizen,version:p}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(h){var p=o.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,h);return{name:s.OS_MAP.PlayStation4,version:p}}}];i.default=l,r.exports=i.default},94:function(r,i,e){"use strict";i.__esModule=!0,i.default=void 0;var n,o=(n=e(17))&&n.__esModule?n:{default:n},s=e(18),l=[{test:[/googlebot/i],describe:function(){return{type:s.PLATFORMS_MAP.bot,vendor:"Google"}}},{test:[/huawei/i],describe:function(h){var p=o.default.getFirstMatch(/(can-l01)/i,h)&&"Nova",m={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return p&&(m.model=p),m}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(h){var p=h.test(/ipod|iphone/i),m=h.test(/like (ipod|iphone)/i);return p&&!m},describe:function(h){var p=o.default.getFirstMatch(/(ipod|iphone)/i,h);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:p}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/Nokia/i],describe:function(h){var p=o.default.getFirstMatch(/Nokia\s+([0-9]+(\.[0-9]+)?)/i,h),m={type:s.PLATFORMS_MAP.mobile,vendor:"Nokia"};return p&&(m.model=p),m}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(h){return h.getBrowserName(!0)==="blackberry"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(h){return h.getBrowserName(!0)==="bada"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(h){return h.getBrowserName()==="windows phone"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(h){var p=Number(String(h.getOSVersion()).split(".")[0]);return h.getOSName(!0)==="android"&&p>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(h){return h.getOSName(!0)==="android"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(h){return h.getOSName(!0)==="macos"},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(h){return h.getOSName(!0)==="windows"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(h){return h.getOSName(!0)==="linux"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(h){return h.getOSName(!0)==="playstation 4"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(h){return h.getOSName(!0)==="roku"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];i.default=l,r.exports=i.default},95:function(r,i,e){"use strict";i.__esModule=!0,i.default=void 0;var n,o=(n=e(17))&&n.__esModule?n:{default:n},s=e(18),l=[{test:function(h){return h.getBrowserName(!0)==="microsoft edge"},describe:function(h){if(/\sedg\//i.test(h))return{name:s.ENGINE_MAP.Blink};var p=o.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,h);return{name:s.ENGINE_MAP.EdgeHTML,version:p}}},{test:[/trident/i],describe:function(h){var p={name:s.ENGINE_MAP.Trident},m=o.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:function(h){return h.test(/presto/i)},describe:function(h){var p={name:s.ENGINE_MAP.Presto},m=o.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:function(h){var p=h.test(/gecko/i),m=h.test(/like gecko/i);return p&&!m},describe:function(h){var p={name:s.ENGINE_MAP.Gecko},m=o.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(h){var p={name:s.ENGINE_MAP.WebKit},m=o.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,h);return m&&(p.version=m),p}}];i.default=l,r.exports=i.default}})})});var Qfe=ad((RUt,Zfe)=>{"use strict";var fY=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Z8e=function(r,i){if(i===void 0||typeof i=="string"){if(typeof r<"u"&&typeof i=="string"){var e=/[.\[\]'"]/g,n=i.split(e).filter(function(o){return o!==""});r=n.reduce(function(o,s){return o&&o[s]!=="undefined"?o[s]:void 0},r)}return r}},HB=function(r){if(Object.prototype.toString.call(r)==="[object Array]")r.forEach(function(i){return HB(i)});else if(Object.prototype.toString.call(r)==="[object Object]")Object.keys(r).forEach(function(i){return HB(r[i])});else return typeof r>"u"?"undefined":fY(r);return r},WB=function(r,i){var e=!1;if(Object.prototype.toString.call(r)==="[object Array]")if(i.length)for(var n=0;n<r.length;n+=1){if(!WB(r[n],i[n])){e=!1;break}e=!0}else return!0;else if(Object.prototype.toString.call(r)==="[object Object]")for(var o in r){if(!WB(r[o],i[o])){e=!1;break}e=!0}else return(typeof i>"u"?"undefined":fY(i))===(typeof r>"u"?"undefined":fY(r));return e},Q8e=function(r,i){var e=HB(i);return WB(r,e)?r:-1};Zfe.exports={getNestedObject:Z8e,buildSchema:HB,getSchemaMatch:WB,convertSchemaAndGetMatch:Q8e}});var tge=ad((qB,ege)=>{"use strict";Object.defineProperty(qB,"__esModule",{value:!0});var yE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},X8e=function(){function r(i,e){for(var n,o=0;o<e.length;o++)n=e[o],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}return function(i,e,n){return e&&r(i.prototype,e),n&&r(i,n),i}}(),Xfe=Qfe();function J8e(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}var Jfe=function(){function r(){var i=this;J8e(this,r),this.t=function(e,n){if(i.input=e,i.schemaCheck=null,n)if(typeof n=="string")i.input=(0,Xfe.getNestedObject)(i.input,n);else{var o=(0,Xfe.convertSchemaAndGetMatch)(i.input,n);o===-1?(i.schemaCheck=!1,i.input=e):(i.schemaCheck=!0,i.input=o)}return i}}return X8e(r,[{key:"isValid",get:function(){return this.schemaCheck!==null&&this.schemaCheck===!0&&this.input!==null&&this.input!==void 0}},{key:"isDefined",get:function(){return typeof this.input<"u"}},{key:"isUndefined",get:function(){return typeof this.input>"u"}},{key:"isNull",get:function(){return this.input===null&&yE(this.input)==="object"}},{key:"isNullOrUndefined",get:function(){return!!(this.isNull||this.isUndefined)}},{key:"isBoolean",get:function(){return yE(this.input)===yE(!0)}},{key:"isTrue",get:function(){return this.input===!0}},{key:"isFalse",get:function(){return this.input===!1}},{key:"isTruthy",get:function(){return!!this.input}},{key:"isFalsy",get:function(){return!this.input}},{key:"isObject",get:function(){return yE(this.input)==="object"&&this.input===Object(this.input)&&Object.prototype.toString.call(this.input)!=="[object Array]"&&Object.prototype.toString.call(this.input)!=="[object Date]"}},{key:"isEmptyObject",get:function(){return!!(this.isObject&&Object.keys(this.input).length===0)}},{key:"isString",get:function(){return typeof this.input=="string"}},{key:"isEmptyString",get:function(){return!!(this.isString&&this.input.length===0)}},{key:"isNumber",get:function(){return!!Number.isFinite(this.input)}},{key:"isArray",get:function(){return!!Array.isArray(this.input)}},{key:"isEmptyArray",get:function(){return!!(this.isArray&&this.input.length===0)}},{key:"isFunction",get:function(){return typeof this.input=="function"}},{key:"isDate",get:function(){return this.input instanceof Date||Object.prototype.toString.call(this.input)==="[object Date]"}},{key:"isSymbol",get:function(){return yE(this.input)==="symbol"||yE(this.input)==="object"&&Object.prototype.toString.call(this.input)==="[object Symbol]"}},{key:"safeObject",get:function(){return this.input}},{key:"safeObjectOrEmpty",get:function(){return this.input?this.input:{}}},{key:"safeString",get:function(){return this.isString?this.input:""}},{key:"safeNumber",get:function(){return this.isNumber?this.input:0}},{key:"safeBoolean",get:function(){return!!this.isBoolean&&this.input}},{key:"safeFunction",get:function(){return this.isFunction?this.input:function(){}}},{key:"safeArray",get:function(){return this.isArray?this.input:this.isNullOrUndefined?[]:[this.input]}}]),r}();Jfe.Schema={Number:1,String:"typy",Boolean:!0,Null:null,Undefined:void 0,Array:[],Function:function(){},Date:new Date,Symbol:Symbol("")},qB.default=Jfe,ege.exports=qB.default});var _Y=ad(_v=>{"use strict";Object.defineProperty(_v,"__esModule",{value:!0}),_v.addCustomTypes=_v.Schema=_v.t=void 0;var e$e=tge(),gY=t$e(e$e);function t$e(r){return r&&r.__esModule?r:{default:r}}var YB=function(r,i){return new gY.default().t(r,i)},i$e=gY.default.Schema,n$e=function(r){if(YB(r).isObject)Object.keys(r).forEach(function(i){if(YB(r[i]).isFunction)gY.default.prototype.__defineGetter__(i,function(){return r[i](this.input)});else throw new Error("validator "+i+" is not a function")});else throw new Error("validators must be key value pairs")};_v.default=YB,_v.t=YB,_v.Schema=i$e,_v.addCustomTypes=n$e});var bE=ad((bY,vE)=>{(function(r,i){typeof bY=="object"&&typeof vE<"u"?vE.exports=i():typeof define=="function"&&define.amd?define(i):r.moment=i()})(bY,function(){"use strict";var r;function i(){return r.apply(null,arguments)}function e(j){r=j}function n(j){return j instanceof Array||Object.prototype.toString.call(j)==="[object Array]"}function o(j){return j!=null&&Object.prototype.toString.call(j)==="[object Object]"}function s(j,X){return Object.prototype.hasOwnProperty.call(j,X)}function l(j){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(j).length===0;var X;for(X in j)if(s(j,X))return!1;return!0}function h(j){return j===void 0}function p(j){return typeof j=="number"||Object.prototype.toString.call(j)==="[object Number]"}function m(j){return j instanceof Date||Object.prototype.toString.call(j)==="[object Date]"}function f(j,X){var he=[],ve,Ge=j.length;for(ve=0;ve<Ge;++ve)he.push(X(j[ve],ve));return he}function g(j,X){for(var he in X)s(X,he)&&(j[he]=X[he]);return s(X,"toString")&&(j.toString=X.toString),s(X,"valueOf")&&(j.valueOf=X.valueOf),j}function y(j,X,he,ve){return Uu(j,X,he,ve,!0).utc()}function _(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function w(j){return j._pf==null&&(j._pf=_()),j._pf}var A;Array.prototype.some?A=Array.prototype.some:A=function(j){var X=Object(this),he=X.length>>>0,ve;for(ve=0;ve<he;ve++)if(ve in X&&j.call(this,X[ve],ve,X))return!0;return!1};function k(j){var X=null,he=!1,ve=j._d&&!isNaN(j._d.getTime());if(ve&&(X=w(j),he=A.call(X.parsedDateParts,function(Ge){return Ge!=null}),ve=X.overflow<0&&!X.empty&&!X.invalidEra&&!X.invalidMonth&&!X.invalidWeekday&&!X.weekdayMismatch&&!X.nullInput&&!X.invalidFormat&&!X.userInvalidated&&(!X.meridiem||X.meridiem&&he),j._strict&&(ve=ve&&X.charsLeftOver===0&&X.unusedTokens.length===0&&X.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(j))j._isValid=ve;else return ve;return j._isValid}function R(j){var X=y(NaN);return j!=null?g(w(X),j):w(X).userInvalidated=!0,X}var $=i.momentProperties=[],H=!1;function oe(j,X){var he,ve,Ge,vt=$.length;if(h(X._isAMomentObject)||(j._isAMomentObject=X._isAMomentObject),h(X._i)||(j._i=X._i),h(X._f)||(j._f=X._f),h(X._l)||(j._l=X._l),h(X._strict)||(j._strict=X._strict),h(X._tzm)||(j._tzm=X._tzm),h(X._isUTC)||(j._isUTC=X._isUTC),h(X._offset)||(j._offset=X._offset),h(X._pf)||(j._pf=w(X)),h(X._locale)||(j._locale=X._locale),vt>0)for(he=0;he<vt;he++)ve=$[he],Ge=X[ve],h(Ge)||(j[ve]=Ge);return j}function se(j){oe(this,j),this._d=new Date(j._d!=null?j._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),H===!1&&(H=!0,i.updateOffset(this),H=!1)}function ge(j){return j instanceof se||j!=null&&j._isAMomentObject!=null}function ue(j){i.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+j)}function pe(j,X){var he=!0;return g(function(){if(i.deprecationHandler!=null&&i.deprecationHandler(null,j),he){var ve=[],Ge,vt,ei,dn=arguments.length;for(vt=0;vt<dn;vt++){if(Ge="",typeof arguments[vt]=="object"){Ge+=`
[`+vt+"] ";for(ei in arguments[0])s(arguments[0],ei)&&(Ge+=ei+": "+arguments[0][ei]+", ");Ge=Ge.slice(0,-2)}else Ge=arguments[vt];ve.push(Ge)}ue(j+`
Arguments: `+Array.prototype.slice.call(ve).join("")+`
`+new Error().stack),he=!1}return X.apply(this,arguments)},X)}var Ce={};function _e(j,X){i.deprecationHandler!=null&&i.deprecationHandler(j,X),Ce[j]||(ue(X),Ce[j]=!0)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null;function de(j){return typeof Function<"u"&&j instanceof Function||Object.prototype.toString.call(j)==="[object Function]"}function te(j){var X,he;for(he in j)s(j,he)&&(X=j[he],de(X)?this[he]=X:this["_"+he]=X);this._config=j,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Se(j,X){var he=g({},j),ve;for(ve in X)s(X,ve)&&(o(j[ve])&&o(X[ve])?(he[ve]={},g(he[ve],j[ve]),g(he[ve],X[ve])):X[ve]!=null?he[ve]=X[ve]:delete he[ve]);for(ve in j)s(j,ve)&&!s(X,ve)&&o(j[ve])&&(he[ve]=g({},he[ve]));return he}function Te(j){j!=null&&this.set(j)}var De;Object.keys?De=Object.keys:De=function(j){var X,he=[];for(X in j)s(j,X)&&he.push(X);return he};var Le={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Me(j,X,he){var ve=this._calendar[j]||this._calendar.sameElse;return de(ve)?ve.call(X,he):ve}function ze(j,X,he){var ve=""+Math.abs(j),Ge=X-ve.length,vt=j>=0;return(vt?he?"+":"":"-")+Math.pow(10,Math.max(0,Ge)).toString().substr(1)+ve}var Ve=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,$e=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,nt={},be={};function we(j,X,he,ve){var Ge=ve;typeof ve=="string"&&(Ge=function(){return this[ve]()}),j&&(be[j]=Ge),X&&(be[X[0]]=function(){return ze(Ge.apply(this,arguments),X[1],X[2])}),he&&(be[he]=function(){return this.localeData().ordinal(Ge.apply(this,arguments),j)})}function ke(j){return j.match(/\[[\s\S]/)?j.replace(/^\[|\]$/g,""):j.replace(/\\/g,"")}function et(j){var X=j.match(Ve),he,ve;for(he=0,ve=X.length;he<ve;he++)be[X[he]]?X[he]=be[X[he]]:X[he]=ke(X[he]);return function(Ge){var vt="",ei;for(ei=0;ei<ve;ei++)vt+=de(X[ei])?X[ei].call(Ge,j):X[ei];return vt}}function Qe(j,X){return j.isValid()?(X=at(X,j.localeData()),nt[X]=nt[X]||et(X),nt[X](j)):j.localeData().invalidDate()}function at(j,X){var he=5;function ve(Ge){return X.longDateFormat(Ge)||Ge}for($e.lastIndex=0;he>=0&&$e.test(j);)j=j.replace($e,ve),$e.lastIndex=0,he-=1;return j}var _t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function ht(j){var X=this._longDateFormat[j],he=this._longDateFormat[j.toUpperCase()];return X||!he?X:(this._longDateFormat[j]=he.match(Ve).map(function(ve){return ve==="MMMM"||ve==="MM"||ve==="DD"||ve==="dddd"?ve.slice(1):ve}).join(""),this._longDateFormat[j])}var Zt="Invalid date";function Tt(){return this._invalidDate}var me="%d",Ct=/\d{1,2}/;function pt(j){return this._ordinal.replace("%d",j)}var Pe={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function ye(j,X,he,ve){var Ge=this._relativeTime[he];return de(Ge)?Ge(j,X,he,ve):Ge.replace(/%d/i,j)}function lt(j,X){var he=this._relativeTime[j>0?"future":"past"];return de(he)?he(X):he.replace(/%s/i,X)}var Ot={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ut(j){return typeof j=="string"?Ot[j]||Ot[j.toLowerCase()]:void 0}function ot(j){var X={},he,ve;for(ve in j)s(j,ve)&&(he=ut(ve),he&&(X[he]=j[ve]));return X}var Rt={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Lt(j){var X=[],he;for(he in j)s(j,he)&&X.push({unit:he,priority:Rt[he]});return X.sort(function(ve,Ge){return ve.priority-Ge.priority}),X}var Nt=/\d/,ni=/\d\d/,wi=/\d{3}/,vi=/\d{4}/,Hi=/[+-]?\d{6}/,Ei=/\d\d?/,Li=/\d\d\d\d?/,$i=/\d\d\d\d\d\d?/,Wt=/\d{1,3}/,Sr=/\d{1,4}/,En=/[+-]?\d{1,6}/,ro=/\d+/,yr=/[+-]?\d+/,Ir=/Z|[+-]\d\d:?\d\d/gi,Mo=/Z|[+-]\d\d(?::?\d\d)?/gi,kn=/[+-]?\d+(\.\d{1,3})?/,Lo=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,rr=/^[1-9]\d?/,gr=/^([1-9]\d|\d)/,cs;cs={};function Mi(j,X,he){cs[j]=de(X)?X:function(ve,Ge){return ve&&he?he:X}}function pr(j,X){return s(cs,j)?cs[j](X._strict,X._locale):new RegExp(_o(j))}function _o(j){return Xo(j.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(X,he,ve,Ge,vt){return he||ve||Ge||vt}))}function Xo(j){return j.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function uo(j){return j<0?Math.ceil(j)||0:Math.floor(j)}function Rn(j){var X=+j,he=0;return X!==0&&isFinite(X)&&(he=uo(X)),he}var Ra={};function Pi(j,X){var he,ve=X,Ge;for(typeof j=="string"&&(j=[j]),p(X)&&(ve=function(vt,ei){ei[X]=Rn(vt)}),Ge=j.length,he=0;he<Ge;he++)Ra[j[he]]=ve}function Vs(j,X){Pi(j,function(he,ve,Ge,vt){Ge._w=Ge._w||{},X(he,Ge._w,Ge,vt)})}function wl(j,X,he){X!=null&&s(Ra,j)&&Ra[j](X,he._a,he,j)}function Ur(j){return j%4===0&&j%100!==0||j%400===0}var Zn=0,ho=1,$s=2,Ks=3,Cl=4,xl=5,tc=6,Nu=7,Bu=8;we("Y",0,0,function(){var j=this.year();return j<=9999?ze(j,4):"+"+j}),we(0,["YY",2],0,function(){return this.year()%100}),we(0,["YYYY",4],0,"year"),we(0,["YYYYY",5],0,"year"),we(0,["YYYYYY",6,!0],0,"year"),Mi("Y",yr),Mi("YY",Ei,ni),Mi("YYYY",Sr,vi),Mi("YYYYY",En,Hi),Mi("YYYYYY",En,Hi),Pi(["YYYYY","YYYYYY"],Zn),Pi("YYYY",function(j,X){X[Zn]=j.length===2?i.parseTwoDigitYear(j):Rn(j)}),Pi("YY",function(j,X){X[Zn]=i.parseTwoDigitYear(j)}),Pi("Y",function(j,X){X[Zn]=parseInt(j,10)});function Xa(j){return Ur(j)?366:365}i.parseTwoDigitYear=function(j){return Rn(j)+(Rn(j)>68?1900:2e3)};var id=Rd("FullYear",!0);function Dh(){return Ur(this.year())}function Rd(j,X){return function(he){return he!=null?(qf(this,j,he),i.updateOffset(this,X),this):ju(this,j)}}function ju(j,X){if(!j.isValid())return NaN;var he=j._d,ve=j._isUTC;switch(X){case"Milliseconds":return ve?he.getUTCMilliseconds():he.getMilliseconds();case"Seconds":return ve?he.getUTCSeconds():he.getSeconds();case"Minutes":return ve?he.getUTCMinutes():he.getMinutes();case"Hours":return ve?he.getUTCHours():he.getHours();case"Date":return ve?he.getUTCDate():he.getDate();case"Day":return ve?he.getUTCDay():he.getDay();case"Month":return ve?he.getUTCMonth():he.getMonth();case"FullYear":return ve?he.getUTCFullYear():he.getFullYear();default:return NaN}}function qf(j,X,he){var ve,Ge,vt,ei,dn;if(!(!j.isValid()||isNaN(he))){switch(ve=j._d,Ge=j._isUTC,X){case"Milliseconds":return void(Ge?ve.setUTCMilliseconds(he):ve.setMilliseconds(he));case"Seconds":return void(Ge?ve.setUTCSeconds(he):ve.setSeconds(he));case"Minutes":return void(Ge?ve.setUTCMinutes(he):ve.setMinutes(he));case"Hours":return void(Ge?ve.setUTCHours(he):ve.setHours(he));case"Date":return void(Ge?ve.setUTCDate(he):ve.setDate(he));case"FullYear":break;default:return}vt=he,ei=j.month(),dn=j.date(),dn=dn===29&&ei===1&&!Ur(vt)?28:dn,Ge?ve.setUTCFullYear(vt,ei,dn):ve.setFullYear(vt,ei,dn)}}function y0(j){return j=ut(j),de(this[j])?this[j]():this}function Yf(j,X){if(typeof j=="object"){j=ot(j);var he=Lt(j),ve,Ge=he.length;for(ve=0;ve<Ge;ve++)this[he[ve].unit](j[he[ve].unit])}else if(j=ut(j),de(this[j]))return this[j](X);return this}function Fd(j,X){return(j%X+X)%X}var ms;Array.prototype.indexOf?ms=Array.prototype.indexOf:ms=function(j){var X;for(X=0;X<this.length;++X)if(this[X]===j)return X;return-1};function nd(j,X){if(isNaN(j)||isNaN(X))return NaN;var he=Fd(X,12);return j+=(X-he)/12,he===1?Ur(j)?29:28:31-he%7%2}we("M",["MM",2],"Mo",function(){return this.month()+1}),we("MMM",0,0,function(j){return this.localeData().monthsShort(this,j)}),we("MMMM",0,0,function(j){return this.localeData().months(this,j)}),Mi("M",Ei,rr),Mi("MM",Ei,ni),Mi("MMM",function(j,X){return X.monthsShortRegex(j)}),Mi("MMMM",function(j,X){return X.monthsRegex(j)}),Pi(["M","MM"],function(j,X){X[ho]=Rn(j)-1}),Pi(["MMM","MMMM"],function(j,X,he,ve){var Ge=he._locale.monthsParse(j,ve,he._strict);Ge!=null?X[ho]=Ge:w(he).invalidMonth=j});var Vu="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Gm="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),rd=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,kh=Lo,dy=Lo;function Sb(j,X){return j?n(this._months)?this._months[j.month()]:this._months[(this._months.isFormat||rd).test(X)?"format":"standalone"][j.month()]:n(this._months)?this._months:this._months.standalone}function em(j,X){return j?n(this._monthsShort)?this._monthsShort[j.month()]:this._monthsShort[rd.test(X)?"format":"standalone"][j.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Jd(j,X,he){var ve,Ge,vt,ei=j.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],ve=0;ve<12;++ve)vt=y([2e3,ve]),this._shortMonthsParse[ve]=this.monthsShort(vt,"").toLocaleLowerCase(),this._longMonthsParse[ve]=this.months(vt,"").toLocaleLowerCase();return he?X==="MMM"?(Ge=ms.call(this._shortMonthsParse,ei),Ge!==-1?Ge:null):(Ge=ms.call(this._longMonthsParse,ei),Ge!==-1?Ge:null):X==="MMM"?(Ge=ms.call(this._shortMonthsParse,ei),Ge!==-1?Ge:(Ge=ms.call(this._longMonthsParse,ei),Ge!==-1?Ge:null)):(Ge=ms.call(this._longMonthsParse,ei),Ge!==-1?Ge:(Ge=ms.call(this._shortMonthsParse,ei),Ge!==-1?Ge:null))}function Zs(j,X,he){var ve,Ge,vt;if(this._monthsParseExact)return Jd.call(this,j,X,he);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),ve=0;ve<12;ve++){if(Ge=y([2e3,ve]),he&&!this._longMonthsParse[ve]&&(this._longMonthsParse[ve]=new RegExp("^"+this.months(Ge,"").replace(".","")+"$","i"),this._shortMonthsParse[ve]=new RegExp("^"+this.monthsShort(Ge,"").replace(".","")+"$","i")),!he&&!this._monthsParse[ve]&&(vt="^"+this.months(Ge,"")+"|^"+this.monthsShort(Ge,""),this._monthsParse[ve]=new RegExp(vt.replace(".",""),"i")),he&&X==="MMMM"&&this._longMonthsParse[ve].test(j))return ve;if(he&&X==="MMM"&&this._shortMonthsParse[ve].test(j))return ve;if(!he&&this._monthsParse[ve].test(j))return ve}}function Kf(j,X){if(!j.isValid())return j;if(typeof X=="string"){if(/^\d+$/.test(X))X=Rn(X);else if(X=j.localeData().monthsParse(X),!p(X))return j}var he=X,ve=j.date();return ve=ve<29?ve:Math.min(ve,nd(j.year(),he)),j._isUTC?j._d.setUTCMonth(he,ve):j._d.setMonth(he,ve),j}function Zf(j){return j!=null?(Kf(this,j),i.updateOffset(this,!0),this):ju(this,"Month")}function v0(){return nd(this.year(),this.month())}function Qf(j){return this._monthsParseExact?(s(this,"_monthsRegex")||Sl.call(this),j?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=kh),this._monthsShortStrictRegex&&j?this._monthsShortStrictRegex:this._monthsShortRegex)}function b0(j){return this._monthsParseExact?(s(this,"_monthsRegex")||Sl.call(this),j?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=dy),this._monthsStrictRegex&&j?this._monthsStrictRegex:this._monthsRegex)}function Sl(){function j(_r,Uo){return Uo.length-_r.length}var X=[],he=[],ve=[],Ge,vt,ei,dn;for(Ge=0;Ge<12;Ge++)vt=y([2e3,Ge]),ei=Xo(this.monthsShort(vt,"")),dn=Xo(this.months(vt,"")),X.push(ei),he.push(dn),ve.push(dn),ve.push(ei);X.sort(j),he.sort(j),ve.sort(j),this._monthsRegex=new RegExp("^("+ve.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+he.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+X.join("|")+")","i")}function w0(j,X,he,ve,Ge,vt,ei){var dn;return j<100&&j>=0?(dn=new Date(j+400,X,he,ve,Ge,vt,ei),isFinite(dn.getFullYear())&&dn.setFullYear(j)):dn=new Date(j,X,he,ve,Ge,vt,ei),dn}function Ll(j){var X,he;return j<100&&j>=0?(he=Array.prototype.slice.call(arguments),he[0]=j+400,X=new Date(Date.UTC.apply(null,he)),isFinite(X.getUTCFullYear())&&X.setUTCFullYear(j)):X=new Date(Date.UTC.apply(null,arguments)),X}function ap(j,X,he){var ve=7+X-he,Ge=(7+Ll(j,0,ve).getUTCDay()-X)%7;return-Ge+ve-1}function C0(j,X,he,ve,Ge){var vt=(7+he-ve)%7,ei=ap(j,ve,Ge),dn=1+7*(X-1)+vt+ei,_r,Uo;return dn<=0?(_r=j-1,Uo=Xa(_r)+dn):dn>Xa(j)?(_r=j+1,Uo=dn-Xa(j)):(_r=j,Uo=dn),{year:_r,dayOfYear:Uo}}function Xf(j,X,he){var ve=ap(j.year(),X,he),Ge=Math.floor((j.dayOfYear()-ve-1)/7)+1,vt,ei;return Ge<1?(ei=j.year()-1,vt=Ge+$u(ei,X,he)):Ge>$u(j.year(),X,he)?(vt=Ge-$u(j.year(),X,he),ei=j.year()+1):(ei=j.year(),vt=Ge),{week:vt,year:ei}}function $u(j,X,he){var ve=ap(j,X,he),Ge=ap(j+1,X,he);return(Xa(j)-ve+Ge)/7}we("w",["ww",2],"wo","week"),we("W",["WW",2],"Wo","isoWeek"),Mi("w",Ei,rr),Mi("ww",Ei,ni),Mi("W",Ei,rr),Mi("WW",Ei,ni),Vs(["w","ww","W","WW"],function(j,X,he,ve){X[ve.substr(0,1)]=Rn(j)});function Ue(j){return Xf(j,this._week.dow,this._week.doy).week}var Ke={dow:0,doy:6};function ft(){return this._week.dow}function Gt(){return this._week.doy}function Ii(j){var X=this.localeData().week(this);return j==null?X:this.add((j-X)*7,"d")}function sn(j){var X=Xf(this,1,4).week;return j==null?X:this.add((j-X)*7,"d")}we("d",0,"do","day"),we("dd",0,0,function(j){return this.localeData().weekdaysMin(this,j)}),we("ddd",0,0,function(j){return this.localeData().weekdaysShort(this,j)}),we("dddd",0,0,function(j){return this.localeData().weekdays(this,j)}),we("e",0,0,"weekday"),we("E",0,0,"isoWeekday"),Mi("d",Ei),Mi("e",Ei),Mi("E",Ei),Mi("dd",function(j,X){return X.weekdaysMinRegex(j)}),Mi("ddd",function(j,X){return X.weekdaysShortRegex(j)}),Mi("dddd",function(j,X){return X.weekdaysRegex(j)}),Vs(["dd","ddd","dddd"],function(j,X,he,ve){var Ge=he._locale.weekdaysParse(j,ve,he._strict);Ge!=null?X.d=Ge:w(he).invalidWeekday=j}),Vs(["d","e","E"],function(j,X,he,ve){X[ve]=Rn(j)});function oo(j,X){return typeof j!="string"?j:isNaN(j)?(j=X.weekdaysParse(j),typeof j=="number"?j:null):parseInt(j,10)}function Es(j,X){return typeof j=="string"?X.weekdaysParse(j)%7||7:isNaN(j)?null:j}function Qs(j,X){return j.slice(X,7).concat(j.slice(0,X))}var Il="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ld="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Nd="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),uD=Lo,LI=Lo,Pr=Lo;function hD(j,X){var he=n(this._weekdays)?this._weekdays:this._weekdays[j&&j!==!0&&this._weekdays.isFormat.test(X)?"format":"standalone"];return j===!0?Qs(he,this._week.dow):j?he[j.day()]:he}function pD(j){return j===!0?Qs(this._weekdaysShort,this._week.dow):j?this._weekdaysShort[j.day()]:this._weekdaysShort}function Hm(j){return j===!0?Qs(this._weekdaysMin,this._week.dow):j?this._weekdaysMin[j.day()]:this._weekdaysMin}function NI(j,X,he){var ve,Ge,vt,ei=j.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],ve=0;ve<7;++ve)vt=y([2e3,1]).day(ve),this._minWeekdaysParse[ve]=this.weekdaysMin(vt,"").toLocaleLowerCase(),this._shortWeekdaysParse[ve]=this.weekdaysShort(vt,"").toLocaleLowerCase(),this._weekdaysParse[ve]=this.weekdays(vt,"").toLocaleLowerCase();return he?X==="dddd"?(Ge=ms.call(this._weekdaysParse,ei),Ge!==-1?Ge:null):X==="ddd"?(Ge=ms.call(this._shortWeekdaysParse,ei),Ge!==-1?Ge:null):(Ge=ms.call(this._minWeekdaysParse,ei),Ge!==-1?Ge:null):X==="dddd"?(Ge=ms.call(this._weekdaysParse,ei),Ge!==-1||(Ge=ms.call(this._shortWeekdaysParse,ei),Ge!==-1)?Ge:(Ge=ms.call(this._minWeekdaysParse,ei),Ge!==-1?Ge:null)):X==="ddd"?(Ge=ms.call(this._shortWeekdaysParse,ei),Ge!==-1||(Ge=ms.call(this._weekdaysParse,ei),Ge!==-1)?Ge:(Ge=ms.call(this._minWeekdaysParse,ei),Ge!==-1?Ge:null)):(Ge=ms.call(this._minWeekdaysParse,ei),Ge!==-1||(Ge=ms.call(this._weekdaysParse,ei),Ge!==-1)?Ge:(Ge=ms.call(this._shortWeekdaysParse,ei),Ge!==-1?Ge:null))}function BI(j,X,he){var ve,Ge,vt;if(this._weekdaysParseExact)return NI.call(this,j,X,he);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),ve=0;ve<7;ve++){if(Ge=y([2e3,1]).day(ve),he&&!this._fullWeekdaysParse[ve]&&(this._fullWeekdaysParse[ve]=new RegExp("^"+this.weekdays(Ge,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[ve]=new RegExp("^"+this.weekdaysShort(Ge,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[ve]=new RegExp("^"+this.weekdaysMin(Ge,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[ve]||(vt="^"+this.weekdays(Ge,"")+"|^"+this.weekdaysShort(Ge,"")+"|^"+this.weekdaysMin(Ge,""),this._weekdaysParse[ve]=new RegExp(vt.replace(".",""),"i")),he&&X==="dddd"&&this._fullWeekdaysParse[ve].test(j))return ve;if(he&&X==="ddd"&&this._shortWeekdaysParse[ve].test(j))return ve;if(he&&X==="dd"&&this._minWeekdaysParse[ve].test(j))return ve;if(!he&&this._weekdaysParse[ve].test(j))return ve}}function Ib(j){if(!this.isValid())return j!=null?this:NaN;var X=ju(this,"Day");return j!=null?(j=oo(j,this.localeData()),this.add(j-X,"d")):X}function _C(j){if(!this.isValid())return j!=null?this:NaN;var X=(this.day()+7-this.localeData()._week.dow)%7;return j==null?X:this.add(j-X,"d")}function mD(j){if(!this.isValid())return j!=null?this:NaN;if(j!=null){var X=Es(j,this.localeData());return this.day(this.day()%7?X:X-7)}else return this.day()||7}function fD(j){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Jf.call(this),j?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=uD),this._weekdaysStrictRegex&&j?this._weekdaysStrictRegex:this._weekdaysRegex)}function gD(j){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Jf.call(this),j?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=LI),this._weekdaysShortStrictRegex&&j?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function yC(j){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Jf.call(this),j?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Pr),this._weekdaysMinStrictRegex&&j?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Jf(){function j(ru,om){return om.length-ru.length}var X=[],he=[],ve=[],Ge=[],vt,ei,dn,_r,Uo;for(vt=0;vt<7;vt++)ei=y([2e3,1]).day(vt),dn=Xo(this.weekdaysMin(ei,"")),_r=Xo(this.weekdaysShort(ei,"")),Uo=Xo(this.weekdays(ei,"")),X.push(dn),he.push(_r),ve.push(Uo),Ge.push(dn),Ge.push(_r),Ge.push(Uo);X.sort(j),he.sort(j),ve.sort(j),Ge.sort(j),this._weekdaysRegex=new RegExp("^("+Ge.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+ve.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+he.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+X.join("|")+")","i")}function Wm(){return this.hours()%12||12}function _D(){return this.hours()||24}we("H",["HH",2],0,"hour"),we("h",["hh",2],0,Wm),we("k",["kk",2],0,_D),we("hmm",0,0,function(){return""+Wm.apply(this)+ze(this.minutes(),2)}),we("hmmss",0,0,function(){return""+Wm.apply(this)+ze(this.minutes(),2)+ze(this.seconds(),2)}),we("Hmm",0,0,function(){return""+this.hours()+ze(this.minutes(),2)}),we("Hmmss",0,0,function(){return""+this.hours()+ze(this.minutes(),2)+ze(this.seconds(),2)});function x0(j,X){we(j,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),X)})}x0("a",!0),x0("A",!1);function Tb(j,X){return X._meridiemParse}Mi("a",Tb),Mi("A",Tb),Mi("H",Ei,gr),Mi("h",Ei,rr),Mi("k",Ei,rr),Mi("HH",Ei,ni),Mi("hh",Ei,ni),Mi("kk",Ei,ni),Mi("hmm",Li),Mi("hmmss",$i),Mi("Hmm",Li),Mi("Hmmss",$i),Pi(["H","HH"],Ks),Pi(["k","kk"],function(j,X,he){var ve=Rn(j);X[Ks]=ve===24?0:ve}),Pi(["a","A"],function(j,X,he){he._isPm=he._locale.isPM(j),he._meridiem=j}),Pi(["h","hh"],function(j,X,he){X[Ks]=Rn(j),w(he).bigHour=!0}),Pi("hmm",function(j,X,he){var ve=j.length-2;X[Ks]=Rn(j.substr(0,ve)),X[Cl]=Rn(j.substr(ve)),w(he).bigHour=!0}),Pi("hmmss",function(j,X,he){var ve=j.length-4,Ge=j.length-2;X[Ks]=Rn(j.substr(0,ve)),X[Cl]=Rn(j.substr(ve,2)),X[xl]=Rn(j.substr(Ge)),w(he).bigHour=!0}),Pi("Hmm",function(j,X,he){var ve=j.length-2;X[Ks]=Rn(j.substr(0,ve)),X[Cl]=Rn(j.substr(ve))}),Pi("Hmmss",function(j,X,he){var ve=j.length-4,Ge=j.length-2;X[Ks]=Rn(j.substr(0,ve)),X[Cl]=Rn(j.substr(ve,2)),X[xl]=Rn(j.substr(Ge))});function Ab(j){return(j+"").toLowerCase().charAt(0)==="p"}var jI=/[ap]\.?m?\.?/i,VI=Rd("Hours",!0);function $I(j,X,he){return j>11?he?"pm":"PM":he?"am":"AM"}var vC={calendar:Le,longDateFormat:_t,invalidDate:Zt,ordinal:me,dayOfMonthOrdinalParse:Ct,relativeTime:Pe,months:Vu,monthsShort:Gm,week:Ke,weekdays:Il,weekdaysMin:Nd,weekdaysShort:Ld,meridiemParse:jI},Jo={},Oh={},uy;function S0(j,X){var he,ve=Math.min(j.length,X.length);for(he=0;he<ve;he+=1)if(j[he]!==X[he])return he;return ve}function lp(j){return j&&j.toLowerCase().replace("_","-")}function bC(j){for(var X=0,he,ve,Ge,vt;X<j.length;){for(vt=lp(j[X]).split("-"),he=vt.length,ve=lp(j[X+1]),ve=ve?ve.split("-"):null;he>0;){if(Ge=Eb(vt.slice(0,he).join("-")),Ge)return Ge;if(ve&&ve.length>=he&&S0(vt,ve)>=he-1)break;he--}X++}return uy}function hy(j){return!!(j&&j.match("^[^/\\\\]*$"))}function Eb(j){var X=null,he;if(Jo[j]===void 0&&typeof vE<"u"&&vE&&vE.exports&&hy(j))try{X=uy._abbr,he=LC,he("./locale/"+j),Ph(X)}catch{Jo[j]=null}return Jo[j]}function Ph(j,X){var he;return j&&(h(X)?he=Rh(j):he=wC(j,X),he?uy=he:typeof console<"u"&&console.warn&&console.warn("Locale "+j+" not found. Did you forget to load it?")),uy._abbr}function wC(j,X){if(X!==null){var he,ve=vC;if(X.abbr=j,Jo[j]!=null)_e("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),ve=Jo[j]._config;else if(X.parentLocale!=null)if(Jo[X.parentLocale]!=null)ve=Jo[X.parentLocale]._config;else if(he=Eb(X.parentLocale),he!=null)ve=he._config;else return Oh[X.parentLocale]||(Oh[X.parentLocale]=[]),Oh[X.parentLocale].push({name:j,config:X}),null;return Jo[j]=new Te(Se(ve,X)),Oh[j]&&Oh[j].forEach(function(Ge){wC(Ge.name,Ge.config)}),Ph(j),Jo[j]}else return delete Jo[j],null}function CC(j,X){if(X!=null){var he,ve,Ge=vC;Jo[j]!=null&&Jo[j].parentLocale!=null?Jo[j].set(Se(Jo[j]._config,X)):(ve=Eb(j),ve!=null&&(Ge=ve._config),X=Se(Ge,X),ve==null&&(X.abbr=j),he=new Te(X),he.parentLocale=Jo[j],Jo[j]=he),Ph(j)}else Jo[j]!=null&&(Jo[j].parentLocale!=null?(Jo[j]=Jo[j].parentLocale,j===Ph()&&Ph(j)):Jo[j]!=null&&delete Jo[j]);return Jo[j]}function Rh(j){var X;if(j&&j._locale&&j._locale._abbr&&(j=j._locale._abbr),!j)return uy;if(!n(j)){if(X=Eb(j),X)return X;j=[j]}return bC(j)}function UI(){return De(Jo)}function I0(j){var X,he=j._a;return he&&w(j).overflow===-2&&(X=he[ho]<0||he[ho]>11?ho:he[$s]<1||he[$s]>nd(he[Zn],he[ho])?$s:he[Ks]<0||he[Ks]>24||he[Ks]===24&&(he[Cl]!==0||he[xl]!==0||he[tc]!==0)?Ks:he[Cl]<0||he[Cl]>59?Cl:he[xl]<0||he[xl]>59?xl:he[tc]<0||he[tc]>999?tc:-1,w(j)._overflowDayOfYear&&(X<Zn||X>$s)&&(X=$s),w(j)._overflowWeeks&&X===-1&&(X=Nu),w(j)._overflowWeekday&&X===-1&&(X=Bu),w(j).overflow=X),j}var xC=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,SC=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,zI=/Z|[+-]\d\d(?::?\d\d)?/,Mb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],T0=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],py=/^\/?Date\((-?\d+)/i,IC=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,A0={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Db(j){var X,he,ve=j._i,Ge=xC.exec(ve)||SC.exec(ve),vt,ei,dn,_r,Uo=Mb.length,ru=T0.length;if(Ge){for(w(j).iso=!0,X=0,he=Uo;X<he;X++)if(Mb[X][1].exec(Ge[1])){ei=Mb[X][0],vt=Mb[X][2]!==!1;break}if(ei==null){j._isValid=!1;return}if(Ge[3]){for(X=0,he=ru;X<he;X++)if(T0[X][1].exec(Ge[3])){dn=(Ge[2]||" ")+T0[X][0];break}if(dn==null){j._isValid=!1;return}}if(!vt&&dn!=null){j._isValid=!1;return}if(Ge[4])if(zI.exec(Ge[4]))_r="Z";else{j._isValid=!1;return}j._f=ei+(dn||"")+(_r||""),No(j)}else j._isValid=!1}function re(j,X,he,ve,Ge,vt){var ei=[Ae(j),Gm.indexOf(X),parseInt(he,10),parseInt(ve,10),parseInt(Ge,10)];return vt&&ei.push(parseInt(vt,10)),ei}function Ae(j){var X=parseInt(j,10);return X<=49?2e3+X:X<=999?1900+X:X}function tt(j){return j.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function xt(j,X,he){if(j){var ve=Ld.indexOf(j),Ge=new Date(X[0],X[1],X[2]).getDay();if(ve!==Ge)return w(he).weekdayMismatch=!0,he._isValid=!1,!1}return!0}function Ft(j,X,he){if(j)return A0[j];if(X)return 0;var ve=parseInt(he,10),Ge=ve%100,vt=(ve-Ge)/100;return vt*60+Ge}function ii(j){var X=IC.exec(tt(j._i)),he;if(X){if(he=re(X[4],X[3],X[2],X[5],X[6],X[7]),!xt(X[1],he,j))return;j._a=he,j._tzm=Ft(X[8],X[9],X[10]),j._d=Ll.apply(null,j._a),j._d.setUTCMinutes(j._d.getUTCMinutes()-j._tzm),w(j).rfc2822=!0}else j._isValid=!1}function Ai(j){var X=py.exec(j._i);if(X!==null){j._d=new Date(+X[1]);return}if(Db(j),j._isValid===!1)delete j._isValid;else return;if(ii(j),j._isValid===!1)delete j._isValid;else return;j._strict?j._isValid=!1:i.createFromInputFallback(j)}i.createFromInputFallback=pe("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(j){j._d=new Date(j._i+(j._useUTC?" UTC":""))});function Ji(j,X,he){return j??X??he}function qn(j){var X=new Date(i.now());return j._useUTC?[X.getUTCFullYear(),X.getUTCMonth(),X.getUTCDate()]:[X.getFullYear(),X.getMonth(),X.getDate()]}function Rr(j){var X,he,ve=[],Ge,vt,ei;if(!j._d){for(Ge=qn(j),j._w&&j._a[$s]==null&&j._a[ho]==null&&Nr(j),j._dayOfYear!=null&&(ei=Ji(j._a[Zn],Ge[Zn]),(j._dayOfYear>Xa(ei)||j._dayOfYear===0)&&(w(j)._overflowDayOfYear=!0),he=Ll(ei,0,j._dayOfYear),j._a[ho]=he.getUTCMonth(),j._a[$s]=he.getUTCDate()),X=0;X<3&&j._a[X]==null;++X)j._a[X]=ve[X]=Ge[X];for(;X<7;X++)j._a[X]=ve[X]=j._a[X]==null?X===2?1:0:j._a[X];j._a[Ks]===24&&j._a[Cl]===0&&j._a[xl]===0&&j._a[tc]===0&&(j._nextDay=!0,j._a[Ks]=0),j._d=(j._useUTC?Ll:w0).apply(null,ve),vt=j._useUTC?j._d.getUTCDay():j._d.getDay(),j._tzm!=null&&j._d.setUTCMinutes(j._d.getUTCMinutes()-j._tzm),j._nextDay&&(j._a[Ks]=24),j._w&&typeof j._w.d<"u"&&j._w.d!==vt&&(w(j).weekdayMismatch=!0)}}function Nr(j){var X,he,ve,Ge,vt,ei,dn,_r,Uo;X=j._w,X.GG!=null||X.W!=null||X.E!=null?(vt=1,ei=4,he=Ji(X.GG,j._a[Zn],Xf(Ko(),1,4).year),ve=Ji(X.W,1),Ge=Ji(X.E,1),(Ge<1||Ge>7)&&(_r=!0)):(vt=j._locale._week.dow,ei=j._locale._week.doy,Uo=Xf(Ko(),vt,ei),he=Ji(X.gg,j._a[Zn],Uo.year),ve=Ji(X.w,Uo.week),X.d!=null?(Ge=X.d,(Ge<0||Ge>6)&&(_r=!0)):X.e!=null?(Ge=X.e+vt,(X.e<0||X.e>6)&&(_r=!0)):Ge=vt),ve<1||ve>$u(he,vt,ei)?w(j)._overflowWeeks=!0:_r!=null?w(j)._overflowWeekday=!0:(dn=C0(he,ve,Ge,vt,ei),j._a[Zn]=dn.year,j._dayOfYear=dn.dayOfYear)}i.ISO_8601=function(){},i.RFC_2822=function(){};function No(j){if(j._f===i.ISO_8601){Db(j);return}if(j._f===i.RFC_2822){ii(j);return}j._a=[],w(j).empty=!0;var X=""+j._i,he,ve,Ge,vt,ei,dn=X.length,_r=0,Uo,ru;for(Ge=at(j._f,j._locale).match(Ve)||[],ru=Ge.length,he=0;he<ru;he++)vt=Ge[he],ve=(X.match(pr(vt,j))||[])[0],ve&&(ei=X.substr(0,X.indexOf(ve)),ei.length>0&&w(j).unusedInput.push(ei),X=X.slice(X.indexOf(ve)+ve.length),_r+=ve.length),be[vt]?(ve?w(j).empty=!1:w(j).unusedTokens.push(vt),wl(vt,ve,j)):j._strict&&!ve&&w(j).unusedTokens.push(vt);w(j).charsLeftOver=dn-_r,X.length>0&&w(j).unusedInput.push(X),j._a[Ks]<=12&&w(j).bigHour===!0&&j._a[Ks]>0&&(w(j).bigHour=void 0),w(j).parsedDateParts=j._a.slice(0),w(j).meridiem=j._meridiem,j._a[Ks]=dl(j._locale,j._a[Ks],j._meridiem),Uo=w(j).era,Uo!==null&&(j._a[Zn]=j._locale.erasConvertYear(Uo,j._a[Zn])),Rr(j),I0(j)}function dl(j,X,he){var ve;return he==null?X:j.meridiemHour!=null?j.meridiemHour(X,he):(j.isPM!=null&&(ve=j.isPM(he),ve&&X<12&&(X+=12),!ve&&X===12&&(X=0)),X)}function Tl(j){var X,he,ve,Ge,vt,ei,dn=!1,_r=j._f.length;if(_r===0){w(j).invalidFormat=!0,j._d=new Date(NaN);return}for(Ge=0;Ge<_r;Ge++)vt=0,ei=!1,X=oe({},j),j._useUTC!=null&&(X._useUTC=j._useUTC),X._f=j._f[Ge],No(X),k(X)&&(ei=!0),vt+=w(X).charsLeftOver,vt+=w(X).unusedTokens.length*10,w(X).score=vt,dn?vt<ve&&(ve=vt,he=X):(ve==null||vt<ve||ei)&&(ve=vt,he=X,ei&&(dn=!0));g(j,he||X)}function ic(j){if(!j._d){var X=ot(j._i),he=X.day===void 0?X.date:X.day;j._a=f([X.year,X.month,he,X.hour,X.minute,X.second,X.millisecond],function(ve){return ve&&parseInt(ve,10)}),Rr(j)}}function Bd(j){var X=new se(I0(Sc(j)));return X._nextDay&&(X.add(1,"d"),X._nextDay=void 0),X}function Sc(j){var X=j._i,he=j._f;return j._locale=j._locale||Rh(j._l),X===null||he===void 0&&X===""?R({nullInput:!0}):(typeof X=="string"&&(j._i=X=j._locale.preparse(X)),ge(X)?new se(I0(X)):(m(X)?j._d=X:n(he)?Tl(j):he?No(j):tm(j),k(j)||(j._d=null),j))}function tm(j){var X=j._i;h(X)?j._d=new Date(i.now()):m(X)?j._d=new Date(X.valueOf()):typeof X=="string"?Ai(j):n(X)?(j._a=f(X.slice(0),function(he){return parseInt(he,10)}),Rr(j)):o(X)?ic(j):p(X)?j._d=new Date(X):i.createFromInputFallback(j)}function Uu(j,X,he,ve,Ge){var vt={};return(X===!0||X===!1)&&(ve=X,X=void 0),(he===!0||he===!1)&&(ve=he,he=void 0),(o(j)&&l(j)||n(j)&&j.length===0)&&(j=void 0),vt._isAMomentObject=!0,vt._useUTC=vt._isUTC=Ge,vt._l=he,vt._i=j,vt._f=X,vt._strict=ve,Bd(vt)}function Ko(j,X,he,ve){return Uu(j,X,he,ve,!1)}var GI=pe("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var j=Ko.apply(null,arguments);return this.isValid()&&j.isValid()?j<this?this:j:R()}),TC=pe("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var j=Ko.apply(null,arguments);return this.isValid()&&j.isValid()?j>this?this:j:R()});function kb(j,X){var he,ve;if(X.length===1&&n(X[0])&&(X=X[0]),!X.length)return Ko();for(he=X[0],ve=1;ve<X.length;++ve)(!X[ve].isValid()||X[ve][j](he))&&(he=X[ve]);return he}function Ob(){var j=[].slice.call(arguments,0);return kb("isBefore",j)}function AC(){var j=[].slice.call(arguments,0);return kb("isAfter",j)}var EC=function(){return Date.now?Date.now():+new Date},qm=["year","quarter","month","week","day","hour","minute","second","millisecond"];function od(j){var X,he=!1,ve,Ge=qm.length;for(X in j)if(s(j,X)&&!(ms.call(qm,X)!==-1&&(j[X]==null||!isNaN(j[X]))))return!1;for(ve=0;ve<Ge;++ve)if(j[qm[ve]]){if(he)return!1;parseFloat(j[qm[ve]])!==Rn(j[qm[ve]])&&(he=!0)}return!0}function Pb(){return this._isValid}function Rb(){return El(NaN)}function eg(j){var X=ot(j),he=X.year||0,ve=X.quarter||0,Ge=X.month||0,vt=X.week||X.isoWeek||0,ei=X.day||0,dn=X.hour||0,_r=X.minute||0,Uo=X.second||0,ru=X.millisecond||0;this._isValid=od(X),this._milliseconds=+ru+Uo*1e3+_r*6e4+dn*1e3*60*60,this._days=+ei+vt*7,this._months=+Ge+ve*3+he*12,this._data={},this._locale=Rh(),this._bubble()}function E0(j){return j instanceof eg}function jd(j){return j<0?Math.round(-1*j)*-1:Math.round(j)}function yD(j,X,he){var ve=Math.min(j.length,X.length),Ge=Math.abs(j.length-X.length),vt=0,ei;for(ei=0;ei<ve;ei++)(he&&j[ei]!==X[ei]||!he&&Rn(j[ei])!==Rn(X[ei]))&&vt++;return vt+Ge}function Fb(j,X){we(j,0,0,function(){var he=this.utcOffset(),ve="+";return he<0&&(he=-he,ve="-"),ve+ze(~~(he/60),2)+X+ze(~~he%60,2)})}Fb("Z",":"),Fb("ZZ",""),Mi("Z",Mo),Mi("ZZ",Mo),Pi(["Z","ZZ"],function(j,X,he){he._useUTC=!0,he._tzm=zu(Mo,j)});var HI=/([\+\-]|\d\d)/gi;function zu(j,X){var he=(X||"").match(j),ve,Ge,vt;return he===null?null:(ve=he[he.length-1]||[],Ge=(ve+"").match(HI)||["-",0,0],vt=+(Ge[1]*60)+Rn(Ge[2]),vt===0?0:Ge[0]==="+"?vt:-vt)}function M0(j,X){var he,ve;return X._isUTC?(he=X.clone(),ve=(ge(j)||m(j)?j.valueOf():Ko(j).valueOf())-he.valueOf(),he._d.setTime(he._d.valueOf()+ve),i.updateOffset(he,!1),he):Ko(j).local()}function Lb(j){return-Math.round(j._d.getTimezoneOffset())}i.updateOffset=function(){};function WI(j,X,he){var ve=this._offset||0,Ge;if(!this.isValid())return j!=null?this:NaN;if(j!=null){if(typeof j=="string"){if(j=zu(Mo,j),j===null)return this}else Math.abs(j)<16&&!he&&(j=j*60);return!this._isUTC&&X&&(Ge=Lb(this)),this._offset=j,this._isUTC=!0,Ge!=null&&this.add(Ge,"m"),ve!==j&&(!X||this._changeInProgress?P0(this,El(j-ve,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?ve:Lb(this)}function D0(j,X){return j!=null?(typeof j!="string"&&(j=-j),this.utcOffset(j,X),this):-this.utcOffset()}function my(j){return this.utcOffset(0,j)}function Gu(j){return this._isUTC&&(this.utcOffset(0,j),this._isUTC=!1,j&&this.subtract(Lb(this),"m")),this}function eu(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var j=zu(Ir,this._i);j!=null?this.utcOffset(j):this.utcOffset(0,!0)}return this}function k0(j){return this.isValid()?(j=j?Ko(j).utcOffset():0,(this.utcOffset()-j)%60===0):!1}function tg(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function ig(){if(!h(this._isDSTShifted))return this._isDSTShifted;var j={},X;return oe(j,this),j=Sc(j),j._a?(X=j._isUTC?y(j._a):Ko(j._a),this._isDSTShifted=this.isValid()&&yD(j._a,X.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Nb(){return this.isValid()?!this._isUTC:!1}function ng(){return this.isValid()?this._isUTC:!1}function Al(){return this.isValid()?this._isUTC&&this._offset===0:!1}var MC=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,tu=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function El(j,X){var he=j,ve=null,Ge,vt,ei;return E0(j)?he={ms:j._milliseconds,d:j._days,M:j._months}:p(j)||!isNaN(+j)?(he={},X?he[X]=+j:he.milliseconds=+j):(ve=MC.exec(j))?(Ge=ve[1]==="-"?-1:1,he={y:0,d:Rn(ve[$s])*Ge,h:Rn(ve[Ks])*Ge,m:Rn(ve[Cl])*Ge,s:Rn(ve[xl])*Ge,ms:Rn(jd(ve[tc]*1e3))*Ge}):(ve=tu.exec(j))?(Ge=ve[1]==="-"?-1:1,he={y:cp(ve[2],Ge),M:cp(ve[3],Ge),w:cp(ve[4],Ge),d:cp(ve[5],Ge),h:cp(ve[6],Ge),m:cp(ve[7],Ge),s:cp(ve[8],Ge)}):he==null?he={}:typeof he=="object"&&("from"in he||"to"in he)&&(ei=kC(Ko(he.from),Ko(he.to)),he={},he.ms=ei.milliseconds,he.M=ei.months),vt=new eg(he),E0(j)&&s(j,"_locale")&&(vt._locale=j._locale),E0(j)&&s(j,"_isValid")&&(vt._isValid=j._isValid),vt}El.fn=eg.prototype,El.invalid=Rb;function cp(j,X){var he=j&&parseFloat(j.replace(",","."));return(isNaN(he)?0:he)*X}function DC(j,X){var he={};return he.months=X.month()-j.month()+(X.year()-j.year())*12,j.clone().add(he.months,"M").isAfter(X)&&--he.months,he.milliseconds=+X-+j.clone().add(he.months,"M"),he}function kC(j,X){var he;return j.isValid()&&X.isValid()?(X=M0(X,j),j.isBefore(X)?he=DC(j,X):(he=DC(X,j),he.milliseconds=-he.milliseconds,he.months=-he.months),he):{milliseconds:0,months:0}}function O0(j,X){return function(he,ve){var Ge,vt;return ve!==null&&!isNaN(+ve)&&(_e(X,"moment()."+X+"(period, number) is deprecated. Please use moment()."+X+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),vt=he,he=ve,ve=vt),Ge=El(he,ve),P0(this,Ge,j),this}}function P0(j,X,he,ve){var Ge=X._milliseconds,vt=jd(X._days),ei=jd(X._months);j.isValid()&&(ve=ve??!0,ei&&Kf(j,ju(j,"Month")+ei*he),vt&&qf(j,"Date",ju(j,"Date")+vt*he),Ge&&j._d.setTime(j._d.valueOf()+Ge*he),ve&&i.updateOffset(j,vt||ei))}var R0=O0(1,"add"),fy=O0(-1,"subtract");function gy(j){return typeof j=="string"||j instanceof String}function _y(j){return ge(j)||m(j)||gy(j)||p(j)||OC(j)||F0(j)||j===null||j===void 0}function F0(j){var X=o(j)&&!l(j),he=!1,ve=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],Ge,vt,ei=ve.length;for(Ge=0;Ge<ei;Ge+=1)vt=ve[Ge],he=he||s(j,vt);return X&&he}function OC(j){var X=n(j),he=!1;return X&&(he=j.filter(function(ve){return!p(ve)&&gy(j)}).length===0),X&&he}function dp(j){var X=o(j)&&!l(j),he=!1,ve=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],Ge,vt;for(Ge=0;Ge<ve.length;Ge+=1)vt=ve[Ge],he=he||s(j,vt);return X&&he}function up(j,X){var he=j.diff(X,"days",!0);return he<-6?"sameElse":he<-1?"lastWeek":he<0?"lastDay":he<1?"sameDay":he<2?"nextDay":he<7?"nextWeek":"sameElse"}function Xs(j,X){arguments.length===1&&(arguments[0]?_y(arguments[0])?(j=arguments[0],X=void 0):dp(arguments[0])&&(X=arguments[0],j=void 0):(j=void 0,X=void 0));var he=j||Ko(),ve=M0(he,this).startOf("day"),Ge=i.calendarFormat(this,ve)||"sameElse",vt=X&&(de(X[Ge])?X[Ge].call(this,he):X[Ge]);return this.format(vt||this.localeData().calendar(Ge,this,Ko(he)))}function Js(){return new se(this)}function Nl(j,X){var he=ge(j)?j:Ko(j);return this.isValid()&&he.isValid()?(X=ut(X)||"millisecond",X==="millisecond"?this.valueOf()>he.valueOf():he.valueOf()<this.clone().startOf(X).valueOf()):!1}function Ic(j,X){var he=ge(j)?j:Ko(j);return this.isValid()&&he.isValid()?(X=ut(X)||"millisecond",X==="millisecond"?this.valueOf()<he.valueOf():this.clone().endOf(X).valueOf()<he.valueOf()):!1}function rg(j,X,he,ve){var Ge=ge(j)?j:Ko(j),vt=ge(X)?X:Ko(X);return this.isValid()&&Ge.isValid()&&vt.isValid()?(ve=ve||"()",(ve[0]==="("?this.isAfter(Ge,he):!this.isBefore(Ge,he))&&(ve[1]===")"?this.isBefore(vt,he):!this.isAfter(vt,he))):!1}function PC(j,X){var he=ge(j)?j:Ko(j),ve;return this.isValid()&&he.isValid()?(X=ut(X)||"millisecond",X==="millisecond"?this.valueOf()===he.valueOf():(ve=he.valueOf(),this.clone().startOf(X).valueOf()<=ve&&ve<=this.clone().endOf(X).valueOf())):!1}function Bb(j,X){return this.isSame(j,X)||this.isAfter(j,X)}function qI(j,X){return this.isSame(j,X)||this.isBefore(j,X)}function vD(j,X,he){var ve,Ge,vt;if(!this.isValid())return NaN;if(ve=M0(j,this),!ve.isValid())return NaN;switch(Ge=(ve.utcOffset()-this.utcOffset())*6e4,X=ut(X),X){case"year":vt=yy(this,ve)/12;break;case"month":vt=yy(this,ve);break;case"quarter":vt=yy(this,ve)/3;break;case"second":vt=(this-ve)/1e3;break;case"minute":vt=(this-ve)/6e4;break;case"hour":vt=(this-ve)/36e5;break;case"day":vt=(this-ve-Ge)/864e5;break;case"week":vt=(this-ve-Ge)/6048e5;break;default:vt=this-ve}return he?vt:uo(vt)}function yy(j,X){if(j.date()<X.date())return-yy(X,j);var he=(X.year()-j.year())*12+(X.month()-j.month()),ve=j.clone().add(he,"months"),Ge,vt;return X-ve<0?(Ge=j.clone().add(he-1,"months"),vt=(X-ve)/(ve-Ge)):(Ge=j.clone().add(he+1,"months"),vt=(X-ve)/(Ge-ve)),-(he+vt)||0}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Fh(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function hp(j){if(!this.isValid())return null;var X=j!==!0,he=X?this.clone().utc():this;return he.year()<0||he.year()>9999?Qe(he,X?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):de(Date.prototype.toISOString)?X?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Qe(he,"Z")):Qe(he,X?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function YI(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var j="moment",X="",he,ve,Ge,vt;return this.isLocal()||(j=this.utcOffset()===0?"moment.utc":"moment.parseZone",X="Z"),he="["+j+'("]',ve=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",Ge="-MM-DD[T]HH:mm:ss.SSS",vt=X+'[")]',this.format(he+ve+Ge+vt)}function KI(j){j||(j=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var X=Qe(this,j);return this.localeData().postformat(X)}function IL(j,X){return this.isValid()&&(ge(j)&&j.isValid()||Ko(j).isValid())?El({to:this,from:j}).locale(this.locale()).humanize(!X):this.localeData().invalidDate()}function ZI(j){return this.from(Ko(),j)}function QI(j,X){return this.isValid()&&(ge(j)&&j.isValid()||Ko(j).isValid())?El({from:this,to:j}).locale(this.locale()).humanize(!X):this.localeData().invalidDate()}function bD(j){return this.to(Ko(),j)}function wD(j){var X;return j===void 0?this._locale._abbr:(X=Rh(j),X!=null&&(this._locale=X),this)}var XI=pe("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(j){return j===void 0?this.localeData():this.locale(j)});function JI(){return this._locale}var vy=1e3,L0=60*vy,eT=60*L0,TL=(365*400+97)*24*eT;function by(j,X){return(j%X+X)%X}function AL(j,X,he){return j<100&&j>=0?new Date(j+400,X,he)-TL:new Date(j,X,he).valueOf()}function EL(j,X,he){return j<100&&j>=0?Date.UTC(j+400,X,he)-TL:Date.UTC(j,X,he)}function JU(j){var X,he;if(j=ut(j),j===void 0||j==="millisecond"||!this.isValid())return this;switch(he=this._isUTC?EL:AL,j){case"year":X=he(this.year(),0,1);break;case"quarter":X=he(this.year(),this.month()-this.month()%3,1);break;case"month":X=he(this.year(),this.month(),1);break;case"week":X=he(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":X=he(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":X=he(this.year(),this.month(),this.date());break;case"hour":X=this._d.valueOf(),X-=by(X+(this._isUTC?0:this.utcOffset()*L0),eT);break;case"minute":X=this._d.valueOf(),X-=by(X,L0);break;case"second":X=this._d.valueOf(),X-=by(X,vy);break}return this._d.setTime(X),i.updateOffset(this,!0),this}function ez(j){var X,he;if(j=ut(j),j===void 0||j==="millisecond"||!this.isValid())return this;switch(he=this._isUTC?EL:AL,j){case"year":X=he(this.year()+1,0,1)-1;break;case"quarter":X=he(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":X=he(this.year(),this.month()+1,1)-1;break;case"week":X=he(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":X=he(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":X=he(this.year(),this.month(),this.date()+1)-1;break;case"hour":X=this._d.valueOf(),X+=eT-by(X+(this._isUTC?0:this.utcOffset()*L0),eT)-1;break;case"minute":X=this._d.valueOf(),X+=L0-by(X,L0)-1;break;case"second":X=this._d.valueOf(),X+=vy-by(X,vy)-1;break}return this._d.setTime(X),i.updateOffset(this,!0),this}function tz(){return this._d.valueOf()-(this._offset||0)*6e4}function CD(){return Math.floor(this.valueOf()/1e3)}function xD(){return new Date(this.valueOf())}function RC(){var j=this;return[j.year(),j.month(),j.date(),j.hour(),j.minute(),j.second(),j.millisecond()]}function iz(){var j=this;return{years:j.year(),months:j.month(),date:j.date(),hours:j.hours(),minutes:j.minutes(),seconds:j.seconds(),milliseconds:j.milliseconds()}}function nz(){return this.isValid()?this.toISOString():null}function ML(){return k(this)}function rz(){return g({},w(this))}function oz(){return w(this).overflow}function sz(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}we("N",0,0,"eraAbbr"),we("NN",0,0,"eraAbbr"),we("NNN",0,0,"eraAbbr"),we("NNNN",0,0,"eraName"),we("NNNNN",0,0,"eraNarrow"),we("y",["y",1],"yo","eraYear"),we("y",["yy",2],0,"eraYear"),we("y",["yyy",3],0,"eraYear"),we("y",["yyyy",4],0,"eraYear"),Mi("N",tT),Mi("NN",tT),Mi("NNN",tT),Mi("NNNN",kL),Mi("NNNNN",OL),Pi(["N","NN","NNN","NNNN","NNNNN"],function(j,X,he,ve){var Ge=he._locale.erasParse(j,ve,he._strict);Ge?w(he).era=Ge:w(he).invalidEra=j}),Mi("y",ro),Mi("yy",ro),Mi("yyy",ro),Mi("yyyy",ro),Mi("yo",PL),Pi(["y","yy","yyy","yyyy"],Zn),Pi(["yo"],function(j,X,he,ve){var Ge;he._locale._eraYearOrdinalRegex&&(Ge=j.match(he._locale._eraYearOrdinalRegex)),he._locale.eraYearOrdinalParse?X[Zn]=he._locale.eraYearOrdinalParse(j,Ge):X[Zn]=parseInt(j,10)});function az(j,X){var he,ve,Ge,vt=this._eras||Rh("en")._eras;for(he=0,ve=vt.length;he<ve;++he){switch(typeof vt[he].since){case"string":Ge=i(vt[he].since).startOf("day"),vt[he].since=Ge.valueOf();break}switch(typeof vt[he].until){case"undefined":vt[he].until=1/0;break;case"string":Ge=i(vt[he].until).startOf("day").valueOf(),vt[he].until=Ge.valueOf();break}}return vt}function N0(j,X,he){var ve,Ge,vt=this.eras(),ei,dn,_r;for(j=j.toUpperCase(),ve=0,Ge=vt.length;ve<Ge;++ve)if(ei=vt[ve].name.toUpperCase(),dn=vt[ve].abbr.toUpperCase(),_r=vt[ve].narrow.toUpperCase(),he)switch(X){case"N":case"NN":case"NNN":if(dn===j)return vt[ve];break;case"NNNN":if(ei===j)return vt[ve];break;case"NNNNN":if(_r===j)return vt[ve];break}else if([ei,dn,_r].indexOf(j)>=0)return vt[ve]}function im(j,X){var he=j.since<=j.until?1:-1;return X===void 0?i(j.since).year():i(j.since).year()+(X-j.offset)*he}function og(){var j,X,he,ve=this.localeData().eras();for(j=0,X=ve.length;j<X;++j)if(he=this.clone().startOf("day").valueOf(),ve[j].since<=he&&he<=ve[j].until||ve[j].until<=he&&he<=ve[j].since)return ve[j].name;return""}function lz(){var j,X,he,ve=this.localeData().eras();for(j=0,X=ve.length;j<X;++j)if(he=this.clone().startOf("day").valueOf(),ve[j].since<=he&&he<=ve[j].until||ve[j].until<=he&&he<=ve[j].since)return ve[j].narrow;return""}function DL(){var j,X,he,ve=this.localeData().eras();for(j=0,X=ve.length;j<X;++j)if(he=this.clone().startOf("day").valueOf(),ve[j].since<=he&&he<=ve[j].until||ve[j].until<=he&&he<=ve[j].since)return ve[j].abbr;return""}function B0(){var j,X,he,ve,Ge=this.localeData().eras();for(j=0,X=Ge.length;j<X;++j)if(he=Ge[j].since<=Ge[j].until?1:-1,ve=this.clone().startOf("day").valueOf(),Ge[j].since<=ve&&ve<=Ge[j].until||Ge[j].until<=ve&&ve<=Ge[j].since)return(this.year()-i(Ge[j].since).year())*he+Ge[j].offset;return this.year()}function pp(j){return s(this,"_erasNameRegex")||SD.call(this),j?this._erasNameRegex:this._erasRegex}function cz(j){return s(this,"_erasAbbrRegex")||SD.call(this),j?this._erasAbbrRegex:this._erasRegex}function dz(j){return s(this,"_erasNarrowRegex")||SD.call(this),j?this._erasNarrowRegex:this._erasRegex}function tT(j,X){return X.erasAbbrRegex(j)}function kL(j,X){return X.erasNameRegex(j)}function OL(j,X){return X.erasNarrowRegex(j)}function PL(j,X){return X._eraYearOrdinalRegex||ro}function SD(){var j=[],X=[],he=[],ve=[],Ge,vt,ei,dn,_r,Uo=this.eras();for(Ge=0,vt=Uo.length;Ge<vt;++Ge)ei=Xo(Uo[Ge].name),dn=Xo(Uo[Ge].abbr),_r=Xo(Uo[Ge].narrow),X.push(ei),j.push(dn),he.push(_r),ve.push(ei),ve.push(dn),ve.push(_r);this._erasRegex=new RegExp("^("+ve.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+X.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+j.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+he.join("|")+")","i")}we(0,["gg",2],0,function(){return this.weekYear()%100}),we(0,["GG",2],0,function(){return this.isoWeekYear()%100});function wy(j,X){we(0,[j,j.length],0,X)}wy("gggg","weekYear"),wy("ggggg","weekYear"),wy("GGGG","isoWeekYear"),wy("GGGGG","isoWeekYear"),Mi("G",yr),Mi("g",yr),Mi("GG",Ei,ni),Mi("gg",Ei,ni),Mi("GGGG",Sr,vi),Mi("gggg",Sr,vi),Mi("GGGGG",En,Hi),Mi("ggggg",En,Hi),Vs(["gggg","ggggg","GGGG","GGGGG"],function(j,X,he,ve){X[ve.substr(0,2)]=Rn(j)}),Vs(["gg","GG"],function(j,X,he,ve){X[ve]=i.parseTwoDigitYear(j)});function iT(j){return LL.call(this,j,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function FC(j){return LL.call(this,j,this.isoWeek(),this.isoWeekday(),1,4)}function ID(){return $u(this.year(),1,4)}function RL(){return $u(this.isoWeekYear(),1,4)}function uz(){var j=this.localeData()._week;return $u(this.year(),j.dow,j.doy)}function FL(){var j=this.localeData()._week;return $u(this.weekYear(),j.dow,j.doy)}function LL(j,X,he,ve,Ge){var vt;return j==null?Xf(this,ve,Ge).year:(vt=$u(j,ve,Ge),X>vt&&(X=vt),hz.call(this,j,X,he,ve,Ge))}function hz(j,X,he,ve,Ge){var vt=C0(j,X,he,ve,Ge),ei=Ll(vt.year,0,vt.dayOfYear);return this.year(ei.getUTCFullYear()),this.month(ei.getUTCMonth()),this.date(ei.getUTCDate()),this}we("Q",0,"Qo","quarter"),Mi("Q",Nt),Pi("Q",function(j,X){X[ho]=(Rn(j)-1)*3});function pz(j){return j==null?Math.ceil((this.month()+1)/3):this.month((j-1)*3+this.month()%3)}we("D",["DD",2],"Do","date"),Mi("D",Ei,rr),Mi("DD",Ei,ni),Mi("Do",function(j,X){return j?X._dayOfMonthOrdinalParse||X._ordinalParse:X._dayOfMonthOrdinalParseLenient}),Pi(["D","DD"],$s),Pi("Do",function(j,X){X[$s]=Rn(j.match(Ei)[0])});var NL=Rd("Date",!0);we("DDD",["DDDD",3],"DDDo","dayOfYear"),Mi("DDD",Wt),Mi("DDDD",wi),Pi(["DDD","DDDD"],function(j,X,he){he._dayOfYear=Rn(j)});function mz(j){var X=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return j==null?X:this.add(j-X,"d")}we("m",["mm",2],0,"minute"),Mi("m",Ei,gr),Mi("mm",Ei,ni),Pi(["m","mm"],Cl);var fz=Rd("Minutes",!1);we("s",["ss",2],0,"second"),Mi("s",Ei,gr),Mi("ss",Ei,ni),Pi(["s","ss"],xl);var BL=Rd("Seconds",!1);we("S",0,0,function(){return~~(this.millisecond()/100)}),we(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),we(0,["SSS",3],0,"millisecond"),we(0,["SSSS",4],0,function(){return this.millisecond()*10}),we(0,["SSSSS",5],0,function(){return this.millisecond()*100}),we(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),we(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),we(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),we(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),Mi("S",Wt,Nt),Mi("SS",Wt,ni),Mi("SSS",Wt,wi);var nm,jL;for(nm="SSSS";nm.length<=9;nm+="S")Mi(nm,ro);function gz(j,X){X[tc]=Rn(("0."+j)*1e3)}for(nm="S";nm.length<=9;nm+="S")Pi(nm,gz);jL=Rd("Milliseconds",!1),we("z",0,0,"zoneAbbr"),we("zz",0,0,"zoneName");function VL(){return this._isUTC?"UTC":""}function B(){return this._isUTC?"Coordinated Universal Time":""}var z=se.prototype;z.add=R0,z.calendar=Xs,z.clone=Js,z.diff=vD,z.endOf=ez,z.format=KI,z.from=IL,z.fromNow=ZI,z.to=QI,z.toNow=bD,z.get=y0,z.invalidAt=oz,z.isAfter=Nl,z.isBefore=Ic,z.isBetween=rg,z.isSame=PC,z.isSameOrAfter=Bb,z.isSameOrBefore=qI,z.isValid=ML,z.lang=XI,z.locale=wD,z.localeData=JI,z.max=TC,z.min=GI,z.parsingFlags=rz,z.set=Yf,z.startOf=JU,z.subtract=fy,z.toArray=RC,z.toObject=iz,z.toDate=xD,z.toISOString=hp,z.inspect=YI,typeof Symbol<"u"&&Symbol.for!=null&&(z[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),z.toJSON=nz,z.toString=Fh,z.unix=CD,z.valueOf=tz,z.creationData=sz,z.eraName=og,z.eraNarrow=lz,z.eraAbbr=DL,z.eraYear=B0,z.year=id,z.isLeapYear=Dh,z.weekYear=iT,z.isoWeekYear=FC,z.quarter=z.quarters=pz,z.month=Zf,z.daysInMonth=v0,z.week=z.weeks=Ii,z.isoWeek=z.isoWeeks=sn,z.weeksInYear=uz,z.weeksInWeekYear=FL,z.isoWeeksInYear=ID,z.isoWeeksInISOWeekYear=RL,z.date=NL,z.day=z.days=Ib,z.weekday=_C,z.isoWeekday=mD,z.dayOfYear=mz,z.hour=z.hours=VI,z.minute=z.minutes=fz,z.second=z.seconds=BL,z.millisecond=z.milliseconds=jL,z.utcOffset=WI,z.utc=my,z.local=Gu,z.parseZone=eu,z.hasAlignedHourOffset=k0,z.isDST=tg,z.isLocal=Nb,z.isUtcOffset=ng,z.isUtc=Al,z.isUTC=Al,z.zoneAbbr=VL,z.zoneName=B,z.dates=pe("dates accessor is deprecated. Use date instead.",NL),z.months=pe("months accessor is deprecated. Use month instead",Zf),z.years=pe("years accessor is deprecated. Use year instead",id),z.zone=pe("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",D0),z.isDSTShifted=pe("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",ig);function le(j){return Ko(j*1e3)}function fe(){return Ko.apply(null,arguments).parseZone()}function Ie(j){return j}var Ee=Te.prototype;Ee.calendar=Me,Ee.longDateFormat=ht,Ee.invalidDate=Tt,Ee.ordinal=pt,Ee.preparse=Ie,Ee.postformat=Ie,Ee.relativeTime=ye,Ee.pastFuture=lt,Ee.set=te,Ee.eras=az,Ee.erasParse=N0,Ee.erasConvertYear=im,Ee.erasAbbrRegex=cz,Ee.erasNameRegex=pp,Ee.erasNarrowRegex=dz,Ee.months=Sb,Ee.monthsShort=em,Ee.monthsParse=Zs,Ee.monthsRegex=b0,Ee.monthsShortRegex=Qf,Ee.week=Ue,Ee.firstDayOfYear=Gt,Ee.firstDayOfWeek=ft,Ee.weekdays=hD,Ee.weekdaysMin=Hm,Ee.weekdaysShort=pD,Ee.weekdaysParse=BI,Ee.weekdaysRegex=fD,Ee.weekdaysShortRegex=gD,Ee.weekdaysMinRegex=yC,Ee.isPM=Ab,Ee.meridiem=$I;function Be(j,X,he,ve){var Ge=Rh(),vt=y().set(ve,X);return Ge[he](vt,j)}function He(j,X,he){if(p(j)&&(X=j,j=void 0),j=j||"",X!=null)return Be(j,X,he,"month");var ve,Ge=[];for(ve=0;ve<12;ve++)Ge[ve]=Be(j,ve,he,"month");return Ge}function qe(j,X,he,ve){typeof j=="boolean"?(p(X)&&(he=X,X=void 0),X=X||""):(X=j,he=X,j=!1,p(X)&&(he=X,X=void 0),X=X||"");var Ge=Rh(),vt=j?Ge._week.dow:0,ei,dn=[];if(he!=null)return Be(X,(he+vt)%7,ve,"day");for(ei=0;ei<7;ei++)dn[ei]=Be(X,(ei+vt)%7,ve,"day");return dn}function Ze(j,X){return He(j,X,"months")}function St(j,X){return He(j,X,"monthsShort")}function Bt(j,X,he){return qe(j,X,he,"weekdays")}function jt(j,X,he){return qe(j,X,he,"weekdaysShort")}function kt(j,X,he){return qe(j,X,he,"weekdaysMin")}Ph("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(j){var X=j%10,he=Rn(j%100/10)===1?"th":X===1?"st":X===2?"nd":X===3?"rd":"th";return j+he}}),i.lang=pe("moment.lang is deprecated. Use moment.locale instead.",Ph),i.langData=pe("moment.langData is deprecated. Use moment.localeData instead.",Rh);var ai=Math.abs;function Jt(){var j=this._data;return this._milliseconds=ai(this._milliseconds),this._days=ai(this._days),this._months=ai(this._months),j.milliseconds=ai(j.milliseconds),j.seconds=ai(j.seconds),j.minutes=ai(j.minutes),j.hours=ai(j.hours),j.months=ai(j.months),j.years=ai(j.years),this}function It(j,X,he,ve){var Ge=El(X,he);return j._milliseconds+=ve*Ge._milliseconds,j._days+=ve*Ge._days,j._months+=ve*Ge._months,j._bubble()}function Mt(j,X){return It(this,j,X,1)}function hi(j,X){return It(this,j,X,-1)}function Ci(j){return j<0?Math.floor(j):Math.ceil(j)}function _i(){var j=this._milliseconds,X=this._days,he=this._months,ve=this._data,Ge,vt,ei,dn,_r;return j>=0&&X>=0&&he>=0||j<=0&&X<=0&&he<=0||(j+=Ci(Ki(he)+X)*864e5,X=0,he=0),ve.milliseconds=j%1e3,Ge=uo(j/1e3),ve.seconds=Ge%60,vt=uo(Ge/60),ve.minutes=vt%60,ei=uo(vt/60),ve.hours=ei%24,X+=uo(ei/24),_r=uo(cn(X)),he+=_r,X-=Ci(Ki(_r)),dn=uo(he/12),he%=12,ve.days=X,ve.months=he,ve.years=dn,this}function cn(j){return j*4800/146097}function Ki(j){return j*146097/4800}function lr(j){if(!this.isValid())return NaN;var X,he,ve=this._milliseconds;if(j=ut(j),j==="month"||j==="quarter"||j==="year")switch(X=this._days+ve/864e5,he=this._months+cn(X),j){case"month":return he;case"quarter":return he/3;case"year":return he/12}else switch(X=this._days+Math.round(Ki(this._months)),j){case"week":return X/7+ve/6048e5;case"day":return X+ve/864e5;case"hour":return X*24+ve/36e5;case"minute":return X*1440+ve/6e4;case"second":return X*86400+ve/1e3;case"millisecond":return Math.floor(X*864e5)+ve;default:throw new Error("Unknown unit "+j)}}function Wi(j){return function(){return this.as(j)}}var rs=Wi("ms"),_s=Wi("s"),es=Wi("m"),Bo=Wi("h"),Us=Wi("d"),Ms=Wi("w"),Jr=Wi("M"),nc=Wi("Q"),Hu=Wi("y"),rc=rs;function Wu(){return El(this)}function ys(j){return j=ut(j),this.isValid()?this[j+"s"]():NaN}function Tc(j){return function(){return this.isValid()?this._data[j]:NaN}}var Lh=Tc("milliseconds"),jc=Tc("seconds"),sd=Tc("minutes"),iu=Tc("hours"),mp=Tc("days"),Ym=Tc("months"),Vc=Tc("years");function sg(){return uo(this.days()/7)}var nu=Math.round,rm={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function j0(j,X,he,ve,Ge){return Ge.relativeTime(X||1,!!he,j,ve)}function Ml(j,X,he,ve){var Ge=El(j).abs(),vt=nu(Ge.as("s")),ei=nu(Ge.as("m")),dn=nu(Ge.as("h")),_r=nu(Ge.as("d")),Uo=nu(Ge.as("M")),ru=nu(Ge.as("w")),om=nu(Ge.as("y")),ou=vt<=he.ss&&["s",vt]||vt<he.s&&["ss",vt]||ei<=1&&["m"]||ei<he.m&&["mm",ei]||dn<=1&&["h"]||dn<he.h&&["hh",dn]||_r<=1&&["d"]||_r<he.d&&["dd",_r];return he.w!=null&&(ou=ou||ru<=1&&["w"]||ru<he.w&&["ww",ru]),ou=ou||Uo<=1&&["M"]||Uo<he.M&&["MM",Uo]||om<=1&&["y"]||["yy",om],ou[2]=X,ou[3]=+j>0,ou[4]=ve,j0.apply(null,ou)}function TD(j){return j===void 0?nu:typeof j=="function"?(nu=j,!0):!1}function $L(j,X){return rm[j]===void 0?!1:X===void 0?rm[j]:(rm[j]=X,j==="s"&&(rm.ss=X-1),!0)}function UL(j,X){if(!this.isValid())return this.localeData().invalidDate();var he=!1,ve=rm,Ge,vt;return typeof j=="object"&&(X=j,j=!1),typeof j=="boolean"&&(he=j),typeof X=="object"&&(ve=Object.assign({},rm,X),X.s!=null&&X.ss==null&&(ve.ss=X.s-1)),Ge=this.localeData(),vt=Ml(this,!he,ve,Ge),he&&(vt=Ge.pastFuture(+this,vt)),Ge.postformat(vt)}var jb=Math.abs;function Km(j){return(j>0)-(j<0)||+j}function Cy(){if(!this.isValid())return this.localeData().invalidDate();var j=jb(this._milliseconds)/1e3,X=jb(this._days),he=jb(this._months),ve,Ge,vt,ei,dn=this.asSeconds(),_r,Uo,ru,om;return dn?(ve=uo(j/60),Ge=uo(ve/60),j%=60,ve%=60,vt=uo(he/12),he%=12,ei=j?j.toFixed(3).replace(/\.?0+$/,""):"",_r=dn<0?"-":"",Uo=Km(this._months)!==Km(dn)?"-":"",ru=Km(this._days)!==Km(dn)?"-":"",om=Km(this._milliseconds)!==Km(dn)?"-":"",_r+"P"+(vt?Uo+vt+"Y":"")+(he?Uo+he+"M":"")+(X?ru+X+"D":"")+(Ge||ve||j?"T":"")+(Ge?om+Ge+"H":"")+(ve?om+ve+"M":"")+(j?om+ei+"S":"")):"P0D"}var Br=eg.prototype;Br.isValid=Pb,Br.abs=Jt,Br.add=Mt,Br.subtract=hi,Br.as=lr,Br.asMilliseconds=rs,Br.asSeconds=_s,Br.asMinutes=es,Br.asHours=Bo,Br.asDays=Us,Br.asWeeks=Ms,Br.asMonths=Jr,Br.asQuarters=nc,Br.asYears=Hu,Br.valueOf=rc,Br._bubble=_i,Br.clone=Wu,Br.get=ys,Br.milliseconds=Lh,Br.seconds=jc,Br.minutes=sd,Br.hours=iu,Br.days=mp,Br.weeks=sg,Br.months=Ym,Br.years=Vc,Br.humanize=UL,Br.toISOString=Cy,Br.toString=Cy,Br.toJSON=Cy,Br.locale=wD,Br.localeData=JI,Br.toIsoString=pe("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Cy),Br.lang=XI,we("X",0,0,"unix"),we("x",0,0,"valueOf"),Mi("x",yr),Mi("X",kn),Pi("X",function(j,X,he){he._d=new Date(parseFloat(j)*1e3)}),Pi("x",function(j,X,he){he._d=new Date(Rn(j))});return i.version="2.30.1",e(Ko),i.fn=z,i.min=Ob,i.max=AC,i.now=EC,i.utc=y,i.unix=le,i.months=Ze,i.isDate=m,i.locale=Ph,i.invalid=R,i.duration=El,i.isMoment=ge,i.weekdays=Bt,i.parseZone=fe,i.localeData=Rh,i.isDuration=E0,i.monthsShort=St,i.weekdaysMin=kt,i.defineLocale=wC,i.updateLocale=CC,i.locales=UI,i.weekdaysShort=jt,i.normalizeUnits=ut,i.relativeTimeRounding=TD,i.relativeTimeThreshold=$L,i.calendarFormat=up,i.prototype=z,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i})});var q_e=ad((XK,JK)=>{(function(r,i){typeof define=="function"&&define.amd?define([],i):typeof XK<"u"?i():(i(),r.FileSaver={})})(XK,function(){"use strict";function r(h,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function i(h,p,m){var f=new XMLHttpRequest;f.open("GET",h),f.responseType="blob",f.onload=function(){l(f.response,p,m)},f.onerror=function(){console.error("could not download file")},f.send()}function e(h){var p=new XMLHttpRequest;p.open("HEAD",h,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function n(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(p)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(h,p,m){var f=o.URL||o.webkitURL,g=document.createElement("a");p=p||h.name||"download",g.download=p,g.rel="noopener",typeof h=="string"?(g.href=h,g.origin===location.origin?n(g):e(g.href)?i(h,p,m):n(g,g.target="_blank")):(g.href=f.createObjectURL(h),setTimeout(function(){f.revokeObjectURL(g.href)},4e4),setTimeout(function(){n(g)},0))}:"msSaveOrOpenBlob"in navigator?function(h,p,m){if(p=p||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(r(h,m),p);else if(e(h))i(h,p,m);else{var f=document.createElement("a");f.href=h,f.target="_blank",setTimeout(function(){n(f)})}}:function(h,p,m,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof h=="string")return i(h,p,m);var g=h.type==="application/octet-stream",y=/constructor/i.test(o.HTMLElement)||o.safari,_=/CriOS\/[\d]+/.test(navigator.userAgent);if((_||g&&y||s)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var R=w.result;R=_?R:R.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=R:location=R,f=null},w.readAsDataURL(h)}else{var A=o.URL||o.webkitURL,k=A.createObjectURL(h);f?f.location=k:location.href=k,f=null,setTimeout(function(){A.revokeObjectURL(k)},4e4)}});o.saveAs=l.saveAs=l,typeof JK<"u"&&(JK.exports=l)})});var K_e=ad((Y_e,eZ)=>{(function(r){typeof Y_e=="object"&&typeof eZ<"u"?eZ.exports=r():typeof define=="function"&&define.amd?define([],r):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=r()})(function(){return function r(i,e,n){function o(h,p){if(!e[h]){if(!i[h]){var m=typeof LC=="function"&&LC;if(!p&&m)return m(h,!0);if(s)return s(h,!0);var f=new Error("Cannot find module '"+h+"'");throw f.code="MODULE_NOT_FOUND",f}var g=e[h]={exports:{}};i[h][0].call(g.exports,function(y){var _=i[h][1][y];return o(_||y)},g,g.exports,r,i,e,n)}return e[h].exports}for(var s=typeof LC=="function"&&LC,l=0;l<n.length;l++)o(n[l]);return o}({1:[function(r,i,e){"use strict";var n=r("./utils"),o=r("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(l){for(var h,p,m,f,g,y,_,w=[],A=0,k=l.length,R=k,$=n.getTypeOf(l)!=="string";A<l.length;)R=k-A,m=$?(h=l[A++],p=A<k?l[A++]:0,A<k?l[A++]:0):(h=l.charCodeAt(A++),p=A<k?l.charCodeAt(A++):0,A<k?l.charCodeAt(A++):0),f=h>>2,g=(3&h)<<4|p>>4,y=1<R?(15&p)<<2|m>>6:64,_=2<R?63&m:64,w.push(s.charAt(f)+s.charAt(g)+s.charAt(y)+s.charAt(_));return w.join("")},e.decode=function(l){var h,p,m,f,g,y,_=0,w=0,A="data:";if(l.substr(0,A.length)===A)throw new Error("Invalid base64 input, it looks like a data url.");var k,R=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===s.charAt(64)&&R--,l.charAt(l.length-2)===s.charAt(64)&&R--,R%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=o.uint8array?new Uint8Array(0|R):new Array(0|R);_<l.length;)h=s.indexOf(l.charAt(_++))<<2|(f=s.indexOf(l.charAt(_++)))>>4,p=(15&f)<<4|(g=s.indexOf(l.charAt(_++)))>>2,m=(3&g)<<6|(y=s.indexOf(l.charAt(_++))),k[w++]=h,g!==64&&(k[w++]=p),y!==64&&(k[w++]=m);return k}},{"./support":30,"./utils":32}],2:[function(r,i,e){"use strict";var n=r("./external"),o=r("./stream/DataWorker"),s=r("./stream/Crc32Probe"),l=r("./stream/DataLengthProbe");function h(p,m,f,g,y){this.compressedSize=p,this.uncompressedSize=m,this.crc32=f,this.compression=g,this.compressedContent=y}h.prototype={getContentWorker:function(){var p=new o(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),m=this;return p.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new o(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(p,m,f){return p.pipe(new s).pipe(new l("uncompressedSize")).pipe(m.compressWorker(f)).pipe(new l("compressedSize")).withStreamInfo("compression",m)},i.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,i,e){"use strict";var n=r("./stream/GenericWorker");e.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},e.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,i,e){"use strict";var n=r("./utils"),o=function(){for(var s,l=[],h=0;h<256;h++){s=h;for(var p=0;p<8;p++)s=1&s?3988292384^s>>>1:s>>>1;l[h]=s}return l}();i.exports=function(s,l){return s!==void 0&&s.length?n.getTypeOf(s)!=="string"?function(h,p,m,f){var g=o,y=f+m;h^=-1;for(var _=f;_<y;_++)h=h>>>8^g[255&(h^p[_])];return-1^h}(0|l,s,s.length,0):function(h,p,m,f){var g=o,y=f+m;h^=-1;for(var _=f;_<y;_++)h=h>>>8^g[255&(h^p.charCodeAt(_))];return-1^h}(0|l,s,s.length,0):0}},{"./utils":32}],5:[function(r,i,e){"use strict";e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},{}],6:[function(r,i,e){"use strict";var n=null;n=typeof Promise<"u"?Promise:r("lie"),i.exports={Promise:n}},{lie:37}],7:[function(r,i,e){"use strict";var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=r("pako"),s=r("./utils"),l=r("./stream/GenericWorker"),h=n?"uint8array":"array";function p(m,f){l.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=f,this.meta={}}e.magic="\b\0",s.inherits(p,l),p.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(h,m.data),!1)},p.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(f){m.push({data:f,meta:m.meta})}},e.compressWorker=function(m){return new p("Deflate",m)},e.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,i,e){"use strict";function n(g,y){var _,w="";for(_=0;_<y;_++)w+=String.fromCharCode(255&g),g>>>=8;return w}function o(g,y,_,w,A,k){var R,$,H=g.file,oe=g.compression,se=k!==h.utf8encode,ge=s.transformTo("string",k(H.name)),ue=s.transformTo("string",h.utf8encode(H.name)),pe=H.comment,Ce=s.transformTo("string",k(pe)),_e=s.transformTo("string",h.utf8encode(pe)),de=ue.length!==H.name.length,te=_e.length!==pe.length,Se="",Te="",De="",Le=H.dir,Me=H.date,ze={crc32:0,compressedSize:0,uncompressedSize:0};y&&!_||(ze.crc32=g.crc32,ze.compressedSize=g.compressedSize,ze.uncompressedSize=g.uncompressedSize);var Ve=0;y&&(Ve|=8),se||!de&&!te||(Ve|=2048);var $e=0,nt=0;Le&&($e|=16),A==="UNIX"?(nt=798,$e|=function(we,ke){var et=we;return we||(et=ke?16893:33204),(65535&et)<<16}(H.unixPermissions,Le)):(nt=20,$e|=function(we){return 63&(we||0)}(H.dosPermissions)),R=Me.getUTCHours(),R<<=6,R|=Me.getUTCMinutes(),R<<=5,R|=Me.getUTCSeconds()/2,$=Me.getUTCFullYear()-1980,$<<=4,$|=Me.getUTCMonth()+1,$<<=5,$|=Me.getUTCDate(),de&&(Te=n(1,1)+n(p(ge),4)+ue,Se+="up"+n(Te.length,2)+Te),te&&(De=n(1,1)+n(p(Ce),4)+_e,Se+="uc"+n(De.length,2)+De);var be="";return be+=`
\0`,be+=n(Ve,2),be+=oe.magic,be+=n(R,2),be+=n($,2),be+=n(ze.crc32,4),be+=n(ze.compressedSize,4),be+=n(ze.uncompressedSize,4),be+=n(ge.length,2),be+=n(Se.length,2),{fileRecord:m.LOCAL_FILE_HEADER+be+ge+Se,dirRecord:m.CENTRAL_FILE_HEADER+n(nt,2)+be+n(Ce.length,2)+"\0\0\0\0"+n($e,4)+n(w,4)+ge+Se+Ce}}var s=r("../utils"),l=r("../stream/GenericWorker"),h=r("../utf8"),p=r("../crc32"),m=r("../signature");function f(g,y,_,w){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=_,this.encodeFileName=w,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(f,l),f.prototype.push=function(g){var y=g.meta.percent||0,_=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,l.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:_?(y+100*(_-w-1))/_:100}}))},f.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var y=this.streamFiles&&!g.file.dir;if(y){var _=o(g,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:_.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(g){this.accumulate=!1;var y=this.streamFiles&&!g.file.dir,_=o(g,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(_.dirRecord),y)this.push({data:function(w){return m.DATA_DESCRIPTOR+n(w.crc32,4)+n(w.compressedSize,4)+n(w.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:_.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var g=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var _=this.bytesWritten-g,w=function(A,k,R,$,H){var oe=s.transformTo("string",H($));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(A,2)+n(A,2)+n(k,4)+n(R,4)+n(oe.length,2)+oe}(this.dirRecords.length,_,g,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(g){this._sources.push(g);var y=this;return g.on("data",function(_){y.processChunk(_)}),g.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),g.on("error",function(_){y.error(_)}),this},f.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(g){var y=this._sources;if(!l.prototype.error.call(this,g))return!1;for(var _=0;_<y.length;_++)try{y[_].error(g)}catch{}return!0},f.prototype.lock=function(){l.prototype.lock.call(this);for(var g=this._sources,y=0;y<g.length;y++)g[y].lock()},i.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,i,e){"use strict";var n=r("../compressions"),o=r("./ZipFileWorker");e.generateWorker=function(s,l,h){var p=new o(l.streamFiles,h,l.platform,l.encodeFileName),m=0;try{s.forEach(function(f,g){m++;var y=function(k,R){var $=k||R,H=n[$];if(!H)throw new Error($+" is not a valid compression method !");return H}(g.options.compression,l.compression),_=g.options.compressionOptions||l.compressionOptions||{},w=g.dir,A=g.date;g._compressWorker(y,_).withStreamInfo("file",{name:f,dir:w,date:A,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(p)}),p.entriesCount=m}catch(f){p.error(f)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,i,e){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new n;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(n.prototype=r("./object")).loadAsync=r("./load"),n.support=r("./support"),n.defaults=r("./defaults"),n.version="3.10.1",n.loadAsync=function(o,s){return new n().loadAsync(o,s)},n.external=r("./external"),i.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,i,e){"use strict";var n=r("./utils"),o=r("./external"),s=r("./utf8"),l=r("./zipEntries"),h=r("./stream/Crc32Probe"),p=r("./nodejsUtils");function m(f){return new o.Promise(function(g,y){var _=f.decompressed.getContentWorker().pipe(new h);_.on("error",function(w){y(w)}).on("end",function(){_.streamInfo.crc32!==f.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}i.exports=function(f,g){var y=this;return g=n.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),p.isNode&&p.isStream(f)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",f,!0,g.optimizedBinaryString,g.base64).then(function(_){var w=new l(g);return w.load(_),w}).then(function(_){var w=[o.Promise.resolve(_)],A=_.files;if(g.checkCRC32)for(var k=0;k<A.length;k++)w.push(m(A[k]));return o.Promise.all(w)}).then(function(_){for(var w=_.shift(),A=w.files,k=0;k<A.length;k++){var R=A[k],$=R.fileNameStr,H=n.resolve(R.fileNameStr);y.file(H,R.decompressed,{binary:!0,optimizedBinaryString:!0,date:R.date,dir:R.dir,comment:R.fileCommentStr.length?R.fileCommentStr:null,unixPermissions:R.unixPermissions,dosPermissions:R.dosPermissions,createFolders:g.createFolders}),R.dir||(y.file(H).unsafeOriginalName=$)}return w.zipComment.length&&(y.comment=w.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,i,e){"use strict";var n=r("../utils"),o=r("../stream/GenericWorker");function s(l,h){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(h)}n.inherits(s,o),s.prototype._bindStream=function(l){var h=this;(this._stream=l).pause(),l.on("data",function(p){h.push({data:p,meta:{percent:0}})}).on("error",function(p){h.isPaused?this.generatedError=p:h.error(p)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,i,e){"use strict";var n=r("readable-stream").Readable;function o(s,l,h){n.call(this,l),this._helper=s;var p=this;s.on("data",function(m,f){p.push(m)||p._helper.pause(),h&&h(f)}).on("error",function(m){p.emit("error",m)}).on("end",function(){p.push(null)})}r("../utils").inherits(o,n),o.prototype._read=function(){this._helper.resume()},i.exports=o},{"../utils":32,"readable-stream":16}],14:[function(r,i,e){"use strict";i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,o);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,o)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var o=new Buffer(n);return o.fill(0),o},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(r,i,e){"use strict";function n(H,oe,se){var ge,ue=s.getTypeOf(oe),pe=s.extend(se||{},p);pe.date=pe.date||new Date,pe.compression!==null&&(pe.compression=pe.compression.toUpperCase()),typeof pe.unixPermissions=="string"&&(pe.unixPermissions=parseInt(pe.unixPermissions,8)),pe.unixPermissions&&16384&pe.unixPermissions&&(pe.dir=!0),pe.dosPermissions&&16&pe.dosPermissions&&(pe.dir=!0),pe.dir&&(H=A(H)),pe.createFolders&&(ge=w(H))&&k.call(this,ge,!0);var Ce=ue==="string"&&pe.binary===!1&&pe.base64===!1;se&&se.binary!==void 0||(pe.binary=!Ce),(oe instanceof m&&oe.uncompressedSize===0||pe.dir||!oe||oe.length===0)&&(pe.base64=!1,pe.binary=!0,oe="",pe.compression="STORE",ue="string");var _e=null;_e=oe instanceof m||oe instanceof l?oe:y.isNode&&y.isStream(oe)?new _(H,oe):s.prepareContent(H,oe,pe.binary,pe.optimizedBinaryString,pe.base64);var de=new f(H,_e,pe);this.files[H]=de}var o=r("./utf8"),s=r("./utils"),l=r("./stream/GenericWorker"),h=r("./stream/StreamHelper"),p=r("./defaults"),m=r("./compressedObject"),f=r("./zipObject"),g=r("./generate"),y=r("./nodejsUtils"),_=r("./nodejs/NodejsStreamInputAdapter"),w=function(H){H.slice(-1)==="/"&&(H=H.substring(0,H.length-1));var oe=H.lastIndexOf("/");return 0<oe?H.substring(0,oe):""},A=function(H){return H.slice(-1)!=="/"&&(H+="/"),H},k=function(H,oe){return oe=oe!==void 0?oe:p.createFolders,H=A(H),this.files[H]||n.call(this,H,null,{dir:!0,createFolders:oe}),this.files[H]};function R(H){return Object.prototype.toString.call(H)==="[object RegExp]"}var $={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(H){var oe,se,ge;for(oe in this.files)ge=this.files[oe],(se=oe.slice(this.root.length,oe.length))&&oe.slice(0,this.root.length)===this.root&&H(se,ge)},filter:function(H){var oe=[];return this.forEach(function(se,ge){H(se,ge)&&oe.push(ge)}),oe},file:function(H,oe,se){if(arguments.length!==1)return H=this.root+H,n.call(this,H,oe,se),this;if(R(H)){var ge=H;return this.filter(function(pe,Ce){return!Ce.dir&&ge.test(pe)})}var ue=this.files[this.root+H];return ue&&!ue.dir?ue:null},folder:function(H){if(!H)return this;if(R(H))return this.filter(function(ue,pe){return pe.dir&&H.test(ue)});var oe=this.root+H,se=k.call(this,oe),ge=this.clone();return ge.root=se.name,ge},remove:function(H){H=this.root+H;var oe=this.files[H];if(oe||(H.slice(-1)!=="/"&&(H+="/"),oe=this.files[H]),oe&&!oe.dir)delete this.files[H];else for(var se=this.filter(function(ue,pe){return pe.name.slice(0,H.length)===H}),ge=0;ge<se.length;ge++)delete this.files[se[ge].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(H){var oe,se={};try{if((se=s.extend(H||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=se.type.toLowerCase(),se.compression=se.compression.toUpperCase(),se.type==="binarystring"&&(se.type="string"),!se.type)throw new Error("No output type specified.");s.checkSupport(se.type),se.platform!=="darwin"&&se.platform!=="freebsd"&&se.platform!=="linux"&&se.platform!=="sunos"||(se.platform="UNIX"),se.platform==="win32"&&(se.platform="DOS");var ge=se.comment||this.comment||"";oe=g.generateWorker(this,se,ge)}catch(ue){(oe=new l("error")).error(ue)}return new h(oe,se.type||"string",se.mimeType)},generateAsync:function(H,oe){return this.generateInternalStream(H).accumulate(oe)},generateNodeStream:function(H,oe){return(H=H||{}).type||(H.type="nodebuffer"),this.generateInternalStream(H).toNodejsStream(oe)}};i.exports=$},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,i,e){"use strict";i.exports=r("stream")},{stream:void 0}],17:[function(r,i,e){"use strict";var n=r("./DataReader");function o(s){n.call(this,s);for(var l=0;l<this.data.length;l++)s[l]=255&s[l]}r("../utils").inherits(o,n),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var l=s.charCodeAt(0),h=s.charCodeAt(1),p=s.charCodeAt(2),m=s.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===l&&this.data[f+1]===h&&this.data[f+2]===p&&this.data[f+3]===m)return f-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var l=s.charCodeAt(0),h=s.charCodeAt(1),p=s.charCodeAt(2),m=s.charCodeAt(3),f=this.readData(4);return l===f[0]&&h===f[1]&&p===f[2]&&m===f[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},i.exports=o},{"../utils":32,"./DataReader":18}],18:[function(r,i,e){"use strict";var n=r("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var l,h=0;for(this.checkOffset(s),l=this.index+s-1;l>=this.index;l--)h=(h<<8)+this.byteAt(l);return this.index+=s,h},readString:function(s){return n.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},i.exports=o},{"../utils":32}],19:[function(r,i,e){"use strict";var n=r("./Uint8ArrayReader");function o(s){n.call(this,s)}r("../utils").inherits(o,n),o.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},i.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,i,e){"use strict";var n=r("./DataReader");function o(s){n.call(this,s)}r("../utils").inherits(o,n),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},i.exports=o},{"../utils":32,"./DataReader":18}],21:[function(r,i,e){"use strict";var n=r("./ArrayReader");function o(s){n.call(this,s)}r("../utils").inherits(o,n),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},i.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(r,i,e){"use strict";var n=r("../utils"),o=r("../support"),s=r("./ArrayReader"),l=r("./StringReader"),h=r("./NodeBufferReader"),p=r("./Uint8ArrayReader");i.exports=function(m){var f=n.getTypeOf(m);return n.checkSupport(f),f!=="string"||o.uint8array?f==="nodebuffer"?new h(m):o.uint8array?new p(n.transformTo("uint8array",m)):new s(n.transformTo("array",m)):new l(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,i,e){"use strict";e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,i,e){"use strict";var n=r("./GenericWorker"),o=r("../utils");function s(l){n.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(s,n),s.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},i.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(r,i,e){"use strict";var n=r("./GenericWorker"),o=r("../crc32");function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(s,n),s.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},i.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,i,e){"use strict";var n=r("../utils"),o=r("./GenericWorker");function s(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}n.inherits(s,o),s.prototype.processChunk=function(l){if(l){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+l.data.length}o.prototype.processChunk.call(this,l)},i.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(r,i,e){"use strict";var n=r("../utils"),o=r("./GenericWorker");function s(l){o.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(p){h.dataIsReady=!0,h.data=p,h.max=p&&p.length||0,h.type=n.getTypeOf(p),h.isPaused||h._tickAndRepeat()},function(p){h.error(p)})}n.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,h);break;case"uint8array":l=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":l=this.data.slice(this.index,h)}return this.index=h,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(r,i,e){"use strict";function n(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(l){s.processChunk(l)}),o.on("end",function(){s.end()}),o.on("error",function(l){s.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},i.exports=n},{}],29:[function(r,i,e){"use strict";var n=r("../utils"),o=r("./ConvertWorker"),s=r("./GenericWorker"),l=r("../base64"),h=r("../support"),p=r("../external"),m=null;if(h.nodestream)try{m=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(y,_){return new p.Promise(function(w,A){var k=[],R=y._internalType,$=y._outputType,H=y._mimeType;y.on("data",function(oe,se){k.push(oe),_&&_(se)}).on("error",function(oe){k=[],A(oe)}).on("end",function(){try{var oe=function(se,ge,ue){switch(se){case"blob":return n.newBlob(n.transformTo("arraybuffer",ge),ue);case"base64":return l.encode(ge);default:return n.transformTo(se,ge)}}($,function(se,ge){var ue,pe=0,Ce=null,_e=0;for(ue=0;ue<ge.length;ue++)_e+=ge[ue].length;switch(se){case"string":return ge.join("");case"array":return Array.prototype.concat.apply([],ge);case"uint8array":for(Ce=new Uint8Array(_e),ue=0;ue<ge.length;ue++)Ce.set(ge[ue],pe),pe+=ge[ue].length;return Ce;case"nodebuffer":return Buffer.concat(ge);default:throw new Error("concat : unsupported type '"+se+"'")}}(R,k),H);w(oe)}catch(se){A(se)}k=[]}).resume()})}function g(y,_,w){var A=_;switch(_){case"blob":case"arraybuffer":A="uint8array";break;case"base64":A="string"}try{this._internalType=A,this._outputType=_,this._mimeType=w,n.checkSupport(A),this._worker=y.pipe(new o(A)),y.lock()}catch(k){this._worker=new s("error"),this._worker.error(k)}}g.prototype={accumulate:function(y){return f(this,y)},on:function(y,_){var w=this;return y==="data"?this._worker.on(y,function(A){_.call(w,A.data,A.meta)}):this._worker.on(y,function(){n.delay(_,arguments,w)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},y)}},i.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,i,e){"use strict";if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",e.nodebuffer=typeof Buffer<"u",e.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")e.blob=!1;else{var n=new ArrayBuffer(0);try{e.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(n),e.blob=o.getBlob("application/zip").size===0}catch{e.blob=!1}}}try{e.nodestream=!!r("readable-stream").Readable}catch{e.nodestream=!1}},{"readable-stream":16}],31:[function(r,i,e){"use strict";for(var n=r("./utils"),o=r("./support"),s=r("./nodejsUtils"),l=r("./stream/GenericWorker"),h=new Array(256),p=0;p<256;p++)h[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;h[254]=h[254]=1;function m(){l.call(this,"utf-8 decode"),this.leftOver=null}function f(){l.call(this,"utf-8 encode")}e.utf8encode=function(g){return o.nodebuffer?s.newBufferFrom(g,"utf-8"):function(y){var _,w,A,k,R,$=y.length,H=0;for(k=0;k<$;k++)(64512&(w=y.charCodeAt(k)))==55296&&k+1<$&&(64512&(A=y.charCodeAt(k+1)))==56320&&(w=65536+(w-55296<<10)+(A-56320),k++),H+=w<128?1:w<2048?2:w<65536?3:4;for(_=o.uint8array?new Uint8Array(H):new Array(H),k=R=0;R<H;k++)(64512&(w=y.charCodeAt(k)))==55296&&k+1<$&&(64512&(A=y.charCodeAt(k+1)))==56320&&(w=65536+(w-55296<<10)+(A-56320),k++),w<128?_[R++]=w:(w<2048?_[R++]=192|w>>>6:(w<65536?_[R++]=224|w>>>12:(_[R++]=240|w>>>18,_[R++]=128|w>>>12&63),_[R++]=128|w>>>6&63),_[R++]=128|63&w);return _}(g)},e.utf8decode=function(g){return o.nodebuffer?n.transformTo("nodebuffer",g).toString("utf-8"):function(y){var _,w,A,k,R=y.length,$=new Array(2*R);for(_=w=0;_<R;)if((A=y[_++])<128)$[w++]=A;else if(4<(k=h[A]))$[w++]=65533,_+=k-1;else{for(A&=k===2?31:k===3?15:7;1<k&&_<R;)A=A<<6|63&y[_++],k--;1<k?$[w++]=65533:A<65536?$[w++]=A:(A-=65536,$[w++]=55296|A>>10&1023,$[w++]=56320|1023&A)}return $.length!==w&&($.subarray?$=$.subarray(0,w):$.length=w),n.applyFromCharCode($)}(g=n.transformTo(o.uint8array?"uint8array":"array",g))},n.inherits(m,l),m.prototype.processChunk=function(g){var y=n.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var _=y;(y=new Uint8Array(_.length+this.leftOver.length)).set(this.leftOver,0),y.set(_,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var w=function(k,R){var $;for((R=R||k.length)>k.length&&(R=k.length),$=R-1;0<=$&&(192&k[$])==128;)$--;return $<0||$===0?R:$+h[k[$]]>R?$:R}(y),A=y;w!==y.length&&(o.uint8array?(A=y.subarray(0,w),this.leftOver=y.subarray(w,y.length)):(A=y.slice(0,w),this.leftOver=y.slice(w,y.length))),this.push({data:e.utf8decode(A),meta:g.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=m,n.inherits(f,l),f.prototype.processChunk=function(g){this.push({data:e.utf8encode(g.data),meta:g.meta})},e.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,i,e){"use strict";var n=r("./support"),o=r("./base64"),s=r("./nodejsUtils"),l=r("./external");function h(_){return _}function p(_,w){for(var A=0;A<_.length;++A)w[A]=255&_.charCodeAt(A);return w}r("setimmediate"),e.newBlob=function(_,w){e.checkSupport("blob");try{return new Blob([_],{type:w})}catch{try{var A=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return A.append(_),A.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(_,w,A){var k=[],R=0,$=_.length;if($<=A)return String.fromCharCode.apply(null,_);for(;R<$;)w==="array"||w==="nodebuffer"?k.push(String.fromCharCode.apply(null,_.slice(R,Math.min(R+A,$)))):k.push(String.fromCharCode.apply(null,_.subarray(R,Math.min(R+A,$)))),R+=A;return k.join("")},stringifyByChar:function(_){for(var w="",A=0;A<_.length;A++)w+=String.fromCharCode(_[A]);return w},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function f(_){var w=65536,A=e.getTypeOf(_),k=!0;if(A==="uint8array"?k=m.applyCanBeUsed.uint8array:A==="nodebuffer"&&(k=m.applyCanBeUsed.nodebuffer),k)for(;1<w;)try{return m.stringifyByChunk(_,A,w)}catch{w=Math.floor(w/2)}return m.stringifyByChar(_)}function g(_,w){for(var A=0;A<_.length;A++)w[A]=_[A];return w}e.applyFromCharCode=f;var y={};y.string={string:h,array:function(_){return p(_,new Array(_.length))},arraybuffer:function(_){return y.string.uint8array(_).buffer},uint8array:function(_){return p(_,new Uint8Array(_.length))},nodebuffer:function(_){return p(_,s.allocBuffer(_.length))}},y.array={string:f,array:h,arraybuffer:function(_){return new Uint8Array(_).buffer},uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return s.newBufferFrom(_)}},y.arraybuffer={string:function(_){return f(new Uint8Array(_))},array:function(_){return g(new Uint8Array(_),new Array(_.byteLength))},arraybuffer:h,uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return s.newBufferFrom(new Uint8Array(_))}},y.uint8array={string:f,array:function(_){return g(_,new Array(_.length))},arraybuffer:function(_){return _.buffer},uint8array:h,nodebuffer:function(_){return s.newBufferFrom(_)}},y.nodebuffer={string:f,array:function(_){return g(_,new Array(_.length))},arraybuffer:function(_){return y.nodebuffer.uint8array(_).buffer},uint8array:function(_){return g(_,new Uint8Array(_.length))},nodebuffer:h},e.transformTo=function(_,w){if(w=w||"",!_)return w;e.checkSupport(_);var A=e.getTypeOf(w);return y[A][_](w)},e.resolve=function(_){for(var w=_.split("/"),A=[],k=0;k<w.length;k++){var R=w[k];R==="."||R===""&&k!==0&&k!==w.length-1||(R===".."?A.pop():A.push(R))}return A.join("/")},e.getTypeOf=function(_){return typeof _=="string"?"string":Object.prototype.toString.call(_)==="[object Array]"?"array":n.nodebuffer&&s.isBuffer(_)?"nodebuffer":n.uint8array&&_ instanceof Uint8Array?"uint8array":n.arraybuffer&&_ instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(_){if(!n[_.toLowerCase()])throw new Error(_+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(_){var w,A,k="";for(A=0;A<(_||"").length;A++)k+="\\x"+((w=_.charCodeAt(A))<16?"0":"")+w.toString(16).toUpperCase();return k},e.delay=function(_,w,A){setImmediate(function(){_.apply(A||null,w||[])})},e.inherits=function(_,w){function A(){}A.prototype=w.prototype,_.prototype=new A},e.extend=function(){var _,w,A={};for(_=0;_<arguments.length;_++)for(w in arguments[_])Object.prototype.hasOwnProperty.call(arguments[_],w)&&A[w]===void 0&&(A[w]=arguments[_][w]);return A},e.prepareContent=function(_,w,A,k,R){return l.Promise.resolve(w).then(function($){return n.blob&&($ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call($))!==-1)&&typeof FileReader<"u"?new l.Promise(function(H,oe){var se=new FileReader;se.onload=function(ge){H(ge.target.result)},se.onerror=function(ge){oe(ge.target.error)},se.readAsArrayBuffer($)}):$}).then(function($){var H=e.getTypeOf($);return H?(H==="arraybuffer"?$=e.transformTo("uint8array",$):H==="string"&&(R?$=o.decode($):A&&k!==!0&&($=function(oe){return p(oe,n.uint8array?new Uint8Array(oe.length):new Array(oe.length))}($))),$):l.Promise.reject(new Error("Can't read the data of '"+_+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,i,e){"use strict";var n=r("./reader/readerFor"),o=r("./utils"),s=r("./signature"),l=r("./zipEntry"),h=r("./support");function p(m){this.files=[],this.loadOptions=m}p.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(f)+", expected "+o.pretty(m)+")")}},isSignature:function(m,f){var g=this.reader.index;this.reader.setIndex(m);var y=this.reader.readString(4)===f;return this.reader.setIndex(g),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),f=h.uint8array?"uint8array":"array",g=o.transformTo(f,m);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,f,g,y=this.zip64EndOfCentralSize-44;0<y;)m=this.reader.readInt(2),f=this.reader.readInt(4),g=this.reader.readData(f),this.zip64ExtensibleData[m]={id:m,length:f,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,f;for(m=0;m<this.files.length;m++)f=this.files[m],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(m=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var f=m;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var y=f-g;if(0<y)this.isSignature(f,s.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(m){this.reader=n(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,i,e){"use strict";var n=r("./reader/readerFor"),o=r("./utils"),s=r("./compressedObject"),l=r("./crc32"),h=r("./utf8"),p=r("./compressions"),m=r("./support");function f(g,y){this.options=g,this.loadOptions=y}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var y,_;if(g.skip(22),this.fileNameLength=g.readInt(2),_=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(_),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(w){for(var A in p)if(Object.prototype.hasOwnProperty.call(p,A)&&p[A].magic===w)return p[A];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,y,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var y=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(y),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=n(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var y,_,w,A=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<A;)y=g.readInt(2),_=g.readInt(2),w=g.readData(_),this.extraFields[y]={id:y,length:_,value:w};g.setIndex(A)},handleUTF8:function(){var g=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var _=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(_)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var A=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(A)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var y=n(g.value);return y.readInt(1)!==1||l(this.fileName)!==y.readInt(4)?null:h.utf8decode(y.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var y=n(g.value);return y.readInt(1)!==1||l(this.fileComment)!==y.readInt(4)?null:h.utf8decode(y.readData(g.length-5))}return null}},i.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,i,e){"use strict";function n(y,_,w){this.name=y,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=_,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var o=r("./stream/StreamHelper"),s=r("./stream/DataWorker"),l=r("./utf8"),h=r("./compressedObject"),p=r("./stream/GenericWorker");n.prototype={internalStream:function(y){var _=null,w="string";try{if(!y)throw new Error("No output type specified.");var A=(w=y.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),_=this._decompressWorker();var k=!this._dataBinary;k&&!A&&(_=_.pipe(new l.Utf8EncodeWorker)),!k&&A&&(_=_.pipe(new l.Utf8DecodeWorker))}catch(R){(_=new p("error")).error(R)}return new o(_,w,"")},async:function(y,_){return this.internalStream(y).accumulate(_)},nodeStream:function(y,_){return this.internalStream(y||"nodebuffer").toNodejsStream(_)},_compressWorker:function(y,_){if(this._data instanceof h&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new l.Utf8EncodeWorker)),h.createWorkerFrom(w,y,_)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof p?this._data:new s(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<m.length;g++)n.prototype[m[g]]=f;i.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,i,e){(function(n){"use strict";var o,s,l=n.MutationObserver||n.WebKitMutationObserver;if(l){var h=0,p=new l(y),m=n.document.createTextNode("");p.observe(m,{characterData:!0}),o=function(){m.data=h=++h%2}}else if(n.setImmediate||n.MessageChannel===void 0)o="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var _=n.document.createElement("script");_.onreadystatechange=function(){y(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},n.document.documentElement.appendChild(_)}:function(){setTimeout(y,0)};else{var f=new n.MessageChannel;f.port1.onmessage=y,o=function(){f.port2.postMessage(0)}}var g=[];function y(){var _,w;s=!0;for(var A=g.length;A;){for(w=g,g=[],_=-1;++_<A;)w[_]();A=g.length}s=!1}i.exports=function(_){g.push(_)!==1||s||o()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,i,e){"use strict";var n=r("immediate");function o(){}var s={},l=["REJECTED"],h=["FULFILLED"],p=["PENDING"];function m(A){if(typeof A!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,A!==o&&_(this,A)}function f(A,k,R){this.promise=A,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}function g(A,k,R){n(function(){var $;try{$=k(R)}catch(H){return s.reject(A,H)}$===A?s.reject(A,new TypeError("Cannot resolve promise with itself")):s.resolve(A,$)})}function y(A){var k=A&&A.then;if(A&&(typeof A=="object"||typeof A=="function")&&typeof k=="function")return function(){k.apply(A,arguments)}}function _(A,k){var R=!1;function $(se){R||(R=!0,s.reject(A,se))}function H(se){R||(R=!0,s.resolve(A,se))}var oe=w(function(){k(H,$)});oe.status==="error"&&$(oe.value)}function w(A,k){var R={};try{R.value=A(k),R.status="success"}catch($){R.status="error",R.value=$}return R}(i.exports=m).prototype.finally=function(A){if(typeof A!="function")return this;var k=this.constructor;return this.then(function(R){return k.resolve(A()).then(function(){return R})},function(R){return k.resolve(A()).then(function(){throw R})})},m.prototype.catch=function(A){return this.then(null,A)},m.prototype.then=function(A,k){if(typeof A!="function"&&this.state===h||typeof k!="function"&&this.state===l)return this;var R=new this.constructor(o);return this.state!==p?g(R,this.state===h?A:k,this.outcome):this.queue.push(new f(R,A,k)),R},f.prototype.callFulfilled=function(A){s.resolve(this.promise,A)},f.prototype.otherCallFulfilled=function(A){g(this.promise,this.onFulfilled,A)},f.prototype.callRejected=function(A){s.reject(this.promise,A)},f.prototype.otherCallRejected=function(A){g(this.promise,this.onRejected,A)},s.resolve=function(A,k){var R=w(y,k);if(R.status==="error")return s.reject(A,R.value);var $=R.value;if($)_(A,$);else{A.state=h,A.outcome=k;for(var H=-1,oe=A.queue.length;++H<oe;)A.queue[H].callFulfilled(k)}return A},s.reject=function(A,k){A.state=l,A.outcome=k;for(var R=-1,$=A.queue.length;++R<$;)A.queue[R].callRejected(k);return A},m.resolve=function(A){return A instanceof this?A:s.resolve(new this(o),A)},m.reject=function(A){var k=new this(o);return s.reject(k,A)},m.all=function(A){var k=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=A.length,$=!1;if(!R)return this.resolve([]);for(var H=new Array(R),oe=0,se=-1,ge=new this(o);++se<R;)ue(A[se],se);return ge;function ue(pe,Ce){k.resolve(pe).then(function(_e){H[Ce]=_e,++oe!==R||$||($=!0,s.resolve(ge,H))},function(_e){$||($=!0,s.reject(ge,_e))})}},m.race=function(A){var k=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=A.length,$=!1;if(!R)return this.resolve([]);for(var H=-1,oe=new this(o);++H<R;)se=A[H],k.resolve(se).then(function(ge){$||($=!0,s.resolve(oe,ge))},function(ge){$||($=!0,s.reject(oe,ge))});var se;return oe}},{immediate:36}],38:[function(r,i,e){"use strict";var n={};(0,r("./lib/utils/common").assign)(n,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),i.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,i,e){"use strict";var n=r("./zlib/deflate"),o=r("./utils/common"),s=r("./utils/strings"),l=r("./zlib/messages"),h=r("./zlib/zstream"),p=Object.prototype.toString,m=0,f=-1,g=0,y=8;function _(A){if(!(this instanceof _))return new _(A);this.options=o.assign({level:f,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},A||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var R=n.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(R!==m)throw new Error(l[R]);if(k.header&&n.deflateSetHeader(this.strm,k.header),k.dictionary){var $;if($=typeof k.dictionary=="string"?s.string2buf(k.dictionary):p.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(R=n.deflateSetDictionary(this.strm,$))!==m)throw new Error(l[R]);this._dict_set=!0}}function w(A,k){var R=new _(k);if(R.push(A,!0),R.err)throw R.msg||l[R.err];return R.result}_.prototype.push=function(A,k){var R,$,H=this.strm,oe=this.options.chunkSize;if(this.ended)return!1;$=k===~~k?k:k===!0?4:0,typeof A=="string"?H.input=s.string2buf(A):p.call(A)==="[object ArrayBuffer]"?H.input=new Uint8Array(A):H.input=A,H.next_in=0,H.avail_in=H.input.length;do{if(H.avail_out===0&&(H.output=new o.Buf8(oe),H.next_out=0,H.avail_out=oe),(R=n.deflate(H,$))!==1&&R!==m)return this.onEnd(R),!(this.ended=!0);H.avail_out!==0&&(H.avail_in!==0||$!==4&&$!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(H.output,H.next_out))):this.onData(o.shrinkBuf(H.output,H.next_out)))}while((0<H.avail_in||H.avail_out===0)&&R!==1);return $===4?(R=n.deflateEnd(this.strm),this.onEnd(R),this.ended=!0,R===m):$!==2||(this.onEnd(m),!(H.avail_out=0))},_.prototype.onData=function(A){this.chunks.push(A)},_.prototype.onEnd=function(A){A===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg},e.Deflate=_,e.deflate=w,e.deflateRaw=function(A,k){return(k=k||{}).raw=!0,w(A,k)},e.gzip=function(A,k){return(k=k||{}).gzip=!0,w(A,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,i,e){"use strict";var n=r("./zlib/inflate"),o=r("./utils/common"),s=r("./utils/strings"),l=r("./zlib/constants"),h=r("./zlib/messages"),p=r("./zlib/zstream"),m=r("./zlib/gzheader"),f=Object.prototype.toString;function g(_){if(!(this instanceof g))return new g(_);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},_||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||_&&_.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&!(15&w.windowBits)&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var A=n.inflateInit2(this.strm,w.windowBits);if(A!==l.Z_OK)throw new Error(h[A]);this.header=new m,n.inflateGetHeader(this.strm,this.header)}function y(_,w){var A=new g(w);if(A.push(_,!0),A.err)throw A.msg||h[A.err];return A.result}g.prototype.push=function(_,w){var A,k,R,$,H,oe,se=this.strm,ge=this.options.chunkSize,ue=this.options.dictionary,pe=!1;if(this.ended)return!1;k=w===~~w?w:w===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof _=="string"?se.input=s.binstring2buf(_):f.call(_)==="[object ArrayBuffer]"?se.input=new Uint8Array(_):se.input=_,se.next_in=0,se.avail_in=se.input.length;do{if(se.avail_out===0&&(se.output=new o.Buf8(ge),se.next_out=0,se.avail_out=ge),(A=n.inflate(se,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&ue&&(oe=typeof ue=="string"?s.string2buf(ue):f.call(ue)==="[object ArrayBuffer]"?new Uint8Array(ue):ue,A=n.inflateSetDictionary(this.strm,oe)),A===l.Z_BUF_ERROR&&pe===!0&&(A=l.Z_OK,pe=!1),A!==l.Z_STREAM_END&&A!==l.Z_OK)return this.onEnd(A),!(this.ended=!0);se.next_out&&(se.avail_out!==0&&A!==l.Z_STREAM_END&&(se.avail_in!==0||k!==l.Z_FINISH&&k!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(R=s.utf8border(se.output,se.next_out),$=se.next_out-R,H=s.buf2string(se.output,R),se.next_out=$,se.avail_out=ge-$,$&&o.arraySet(se.output,se.output,R,$,0),this.onData(H)):this.onData(o.shrinkBuf(se.output,se.next_out)))),se.avail_in===0&&se.avail_out===0&&(pe=!0)}while((0<se.avail_in||se.avail_out===0)&&A!==l.Z_STREAM_END);return A===l.Z_STREAM_END&&(k=l.Z_FINISH),k===l.Z_FINISH?(A=n.inflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===l.Z_OK):k!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(se.avail_out=0))},g.prototype.onData=function(_){this.chunks.push(_)},g.prototype.onEnd=function(_){_===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},e.Inflate=g,e.inflate=y,e.inflateRaw=function(_,w){return(w=w||{}).raw=!0,y(_,w)},e.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,i,e){"use strict";var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";e.assign=function(l){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var p=h.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var m in p)p.hasOwnProperty(m)&&(l[m]=p[m])}}return l},e.shrinkBuf=function(l,h){return l.length===h?l:l.subarray?l.subarray(0,h):(l.length=h,l)};var o={arraySet:function(l,h,p,m,f){if(h.subarray&&l.subarray)l.set(h.subarray(p,p+m),f);else for(var g=0;g<m;g++)l[f+g]=h[p+g]},flattenChunks:function(l){var h,p,m,f,g,y;for(h=m=0,p=l.length;h<p;h++)m+=l[h].length;for(y=new Uint8Array(m),h=f=0,p=l.length;h<p;h++)g=l[h],y.set(g,f),f+=g.length;return y}},s={arraySet:function(l,h,p,m,f){for(var g=0;g<m;g++)l[f+g]=h[p+g]},flattenChunks:function(l){return[].concat.apply([],l)}};e.setTyped=function(l){l?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(n)},{}],42:[function(r,i,e){"use strict";var n=r("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var l=new n.Buf8(256),h=0;h<256;h++)l[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function p(m,f){if(f<65537&&(m.subarray&&s||!m.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(m,f));for(var g="",y=0;y<f;y++)g+=String.fromCharCode(m[y]);return g}l[254]=l[254]=1,e.string2buf=function(m){var f,g,y,_,w,A=m.length,k=0;for(_=0;_<A;_++)(64512&(g=m.charCodeAt(_)))==55296&&_+1<A&&(64512&(y=m.charCodeAt(_+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),_++),k+=g<128?1:g<2048?2:g<65536?3:4;for(f=new n.Buf8(k),_=w=0;w<k;_++)(64512&(g=m.charCodeAt(_)))==55296&&_+1<A&&(64512&(y=m.charCodeAt(_+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),_++),g<128?f[w++]=g:(g<2048?f[w++]=192|g>>>6:(g<65536?f[w++]=224|g>>>12:(f[w++]=240|g>>>18,f[w++]=128|g>>>12&63),f[w++]=128|g>>>6&63),f[w++]=128|63&g);return f},e.buf2binstring=function(m){return p(m,m.length)},e.binstring2buf=function(m){for(var f=new n.Buf8(m.length),g=0,y=f.length;g<y;g++)f[g]=m.charCodeAt(g);return f},e.buf2string=function(m,f){var g,y,_,w,A=f||m.length,k=new Array(2*A);for(g=y=0;g<A;)if((_=m[g++])<128)k[y++]=_;else if(4<(w=l[_]))k[y++]=65533,g+=w-1;else{for(_&=w===2?31:w===3?15:7;1<w&&g<A;)_=_<<6|63&m[g++],w--;1<w?k[y++]=65533:_<65536?k[y++]=_:(_-=65536,k[y++]=55296|_>>10&1023,k[y++]=56320|1023&_)}return p(k,y)},e.utf8border=function(m,f){var g;for((f=f||m.length)>m.length&&(f=m.length),g=f-1;0<=g&&(192&m[g])==128;)g--;return g<0||g===0?f:g+l[m[g]]>f?g:f}},{"./common":41}],43:[function(r,i,e){"use strict";i.exports=function(n,o,s,l){for(var h=65535&n|0,p=n>>>16&65535|0,m=0;s!==0;){for(s-=m=2e3<s?2e3:s;p=p+(h=h+o[l++]|0)|0,--m;);h%=65521,p%=65521}return h|p<<16|0}},{}],44:[function(r,i,e){"use strict";i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,i,e){"use strict";var n=function(){for(var o,s=[],l=0;l<256;l++){o=l;for(var h=0;h<8;h++)o=1&o?3988292384^o>>>1:o>>>1;s[l]=o}return s}();i.exports=function(o,s,l,h){var p=n,m=h+l;o^=-1;for(var f=h;f<m;f++)o=o>>>8^p[255&(o^s[f])];return-1^o}},{}],46:[function(r,i,e){"use strict";var n,o=r("../utils/common"),s=r("./trees"),l=r("./adler32"),h=r("./crc32"),p=r("./messages"),m=0,f=4,g=0,y=-2,_=-1,w=4,A=2,k=8,R=9,$=286,H=30,oe=19,se=2*$+1,ge=15,ue=3,pe=258,Ce=pe+ue+1,_e=42,de=113,te=1,Se=2,Te=3,De=4;function Le(me,Ct){return me.msg=p[Ct],Ct}function Me(me){return(me<<1)-(4<me?9:0)}function ze(me){for(var Ct=me.length;0<=--Ct;)me[Ct]=0}function Ve(me){var Ct=me.state,pt=Ct.pending;pt>me.avail_out&&(pt=me.avail_out),pt!==0&&(o.arraySet(me.output,Ct.pending_buf,Ct.pending_out,pt,me.next_out),me.next_out+=pt,Ct.pending_out+=pt,me.total_out+=pt,me.avail_out-=pt,Ct.pending-=pt,Ct.pending===0&&(Ct.pending_out=0))}function $e(me,Ct){s._tr_flush_block(me,0<=me.block_start?me.block_start:-1,me.strstart-me.block_start,Ct),me.block_start=me.strstart,Ve(me.strm)}function nt(me,Ct){me.pending_buf[me.pending++]=Ct}function be(me,Ct){me.pending_buf[me.pending++]=Ct>>>8&255,me.pending_buf[me.pending++]=255&Ct}function we(me,Ct){var pt,Pe,ye=me.max_chain_length,lt=me.strstart,Ot=me.prev_length,ut=me.nice_match,ot=me.strstart>me.w_size-Ce?me.strstart-(me.w_size-Ce):0,Rt=me.window,Lt=me.w_mask,Nt=me.prev,ni=me.strstart+pe,wi=Rt[lt+Ot-1],vi=Rt[lt+Ot];me.prev_length>=me.good_match&&(ye>>=2),ut>me.lookahead&&(ut=me.lookahead);do if(Rt[(pt=Ct)+Ot]===vi&&Rt[pt+Ot-1]===wi&&Rt[pt]===Rt[lt]&&Rt[++pt]===Rt[lt+1]){lt+=2,pt++;do;while(Rt[++lt]===Rt[++pt]&&Rt[++lt]===Rt[++pt]&&Rt[++lt]===Rt[++pt]&&Rt[++lt]===Rt[++pt]&&Rt[++lt]===Rt[++pt]&&Rt[++lt]===Rt[++pt]&&Rt[++lt]===Rt[++pt]&&Rt[++lt]===Rt[++pt]&&lt<ni);if(Pe=pe-(ni-lt),lt=ni-pe,Ot<Pe){if(me.match_start=Ct,ut<=(Ot=Pe))break;wi=Rt[lt+Ot-1],vi=Rt[lt+Ot]}}while((Ct=Nt[Ct&Lt])>ot&&--ye!=0);return Ot<=me.lookahead?Ot:me.lookahead}function ke(me){var Ct,pt,Pe,ye,lt,Ot,ut,ot,Rt,Lt,Nt=me.w_size;do{if(ye=me.window_size-me.lookahead-me.strstart,me.strstart>=Nt+(Nt-Ce)){for(o.arraySet(me.window,me.window,Nt,Nt,0),me.match_start-=Nt,me.strstart-=Nt,me.block_start-=Nt,Ct=pt=me.hash_size;Pe=me.head[--Ct],me.head[Ct]=Nt<=Pe?Pe-Nt:0,--pt;);for(Ct=pt=Nt;Pe=me.prev[--Ct],me.prev[Ct]=Nt<=Pe?Pe-Nt:0,--pt;);ye+=Nt}if(me.strm.avail_in===0)break;if(Ot=me.strm,ut=me.window,ot=me.strstart+me.lookahead,Rt=ye,Lt=void 0,Lt=Ot.avail_in,Rt<Lt&&(Lt=Rt),pt=Lt===0?0:(Ot.avail_in-=Lt,o.arraySet(ut,Ot.input,Ot.next_in,Lt,ot),Ot.state.wrap===1?Ot.adler=l(Ot.adler,ut,Lt,ot):Ot.state.wrap===2&&(Ot.adler=h(Ot.adler,ut,Lt,ot)),Ot.next_in+=Lt,Ot.total_in+=Lt,Lt),me.lookahead+=pt,me.lookahead+me.insert>=ue)for(lt=me.strstart-me.insert,me.ins_h=me.window[lt],me.ins_h=(me.ins_h<<me.hash_shift^me.window[lt+1])&me.hash_mask;me.insert&&(me.ins_h=(me.ins_h<<me.hash_shift^me.window[lt+ue-1])&me.hash_mask,me.prev[lt&me.w_mask]=me.head[me.ins_h],me.head[me.ins_h]=lt,lt++,me.insert--,!(me.lookahead+me.insert<ue)););}while(me.lookahead<Ce&&me.strm.avail_in!==0)}function et(me,Ct){for(var pt,Pe;;){if(me.lookahead<Ce){if(ke(me),me.lookahead<Ce&&Ct===m)return te;if(me.lookahead===0)break}if(pt=0,me.lookahead>=ue&&(me.ins_h=(me.ins_h<<me.hash_shift^me.window[me.strstart+ue-1])&me.hash_mask,pt=me.prev[me.strstart&me.w_mask]=me.head[me.ins_h],me.head[me.ins_h]=me.strstart),pt!==0&&me.strstart-pt<=me.w_size-Ce&&(me.match_length=we(me,pt)),me.match_length>=ue)if(Pe=s._tr_tally(me,me.strstart-me.match_start,me.match_length-ue),me.lookahead-=me.match_length,me.match_length<=me.max_lazy_match&&me.lookahead>=ue){for(me.match_length--;me.strstart++,me.ins_h=(me.ins_h<<me.hash_shift^me.window[me.strstart+ue-1])&me.hash_mask,pt=me.prev[me.strstart&me.w_mask]=me.head[me.ins_h],me.head[me.ins_h]=me.strstart,--me.match_length!=0;);me.strstart++}else me.strstart+=me.match_length,me.match_length=0,me.ins_h=me.window[me.strstart],me.ins_h=(me.ins_h<<me.hash_shift^me.window[me.strstart+1])&me.hash_mask;else Pe=s._tr_tally(me,0,me.window[me.strstart]),me.lookahead--,me.strstart++;if(Pe&&($e(me,!1),me.strm.avail_out===0))return te}return me.insert=me.strstart<ue-1?me.strstart:ue-1,Ct===f?($e(me,!0),me.strm.avail_out===0?Te:De):me.last_lit&&($e(me,!1),me.strm.avail_out===0)?te:Se}function Qe(me,Ct){for(var pt,Pe,ye;;){if(me.lookahead<Ce){if(ke(me),me.lookahead<Ce&&Ct===m)return te;if(me.lookahead===0)break}if(pt=0,me.lookahead>=ue&&(me.ins_h=(me.ins_h<<me.hash_shift^me.window[me.strstart+ue-1])&me.hash_mask,pt=me.prev[me.strstart&me.w_mask]=me.head[me.ins_h],me.head[me.ins_h]=me.strstart),me.prev_length=me.match_length,me.prev_match=me.match_start,me.match_length=ue-1,pt!==0&&me.prev_length<me.max_lazy_match&&me.strstart-pt<=me.w_size-Ce&&(me.match_length=we(me,pt),me.match_length<=5&&(me.strategy===1||me.match_length===ue&&4096<me.strstart-me.match_start)&&(me.match_length=ue-1)),me.prev_length>=ue&&me.match_length<=me.prev_length){for(ye=me.strstart+me.lookahead-ue,Pe=s._tr_tally(me,me.strstart-1-me.prev_match,me.prev_length-ue),me.lookahead-=me.prev_length-1,me.prev_length-=2;++me.strstart<=ye&&(me.ins_h=(me.ins_h<<me.hash_shift^me.window[me.strstart+ue-1])&me.hash_mask,pt=me.prev[me.strstart&me.w_mask]=me.head[me.ins_h],me.head[me.ins_h]=me.strstart),--me.prev_length!=0;);if(me.match_available=0,me.match_length=ue-1,me.strstart++,Pe&&($e(me,!1),me.strm.avail_out===0))return te}else if(me.match_available){if((Pe=s._tr_tally(me,0,me.window[me.strstart-1]))&&$e(me,!1),me.strstart++,me.lookahead--,me.strm.avail_out===0)return te}else me.match_available=1,me.strstart++,me.lookahead--}return me.match_available&&(Pe=s._tr_tally(me,0,me.window[me.strstart-1]),me.match_available=0),me.insert=me.strstart<ue-1?me.strstart:ue-1,Ct===f?($e(me,!0),me.strm.avail_out===0?Te:De):me.last_lit&&($e(me,!1),me.strm.avail_out===0)?te:Se}function at(me,Ct,pt,Pe,ye){this.good_length=me,this.max_lazy=Ct,this.nice_length=pt,this.max_chain=Pe,this.func=ye}function _t(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*se),this.dyn_dtree=new o.Buf16(2*(2*H+1)),this.bl_tree=new o.Buf16(2*(2*oe+1)),ze(this.dyn_ltree),ze(this.dyn_dtree),ze(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(ge+1),this.heap=new o.Buf16(2*$+1),ze(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*$+1),ze(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ht(me){var Ct;return me&&me.state?(me.total_in=me.total_out=0,me.data_type=A,(Ct=me.state).pending=0,Ct.pending_out=0,Ct.wrap<0&&(Ct.wrap=-Ct.wrap),Ct.status=Ct.wrap?_e:de,me.adler=Ct.wrap===2?0:1,Ct.last_flush=m,s._tr_init(Ct),g):Le(me,y)}function Zt(me){var Ct=ht(me);return Ct===g&&function(pt){pt.window_size=2*pt.w_size,ze(pt.head),pt.max_lazy_match=n[pt.level].max_lazy,pt.good_match=n[pt.level].good_length,pt.nice_match=n[pt.level].nice_length,pt.max_chain_length=n[pt.level].max_chain,pt.strstart=0,pt.block_start=0,pt.lookahead=0,pt.insert=0,pt.match_length=pt.prev_length=ue-1,pt.match_available=0,pt.ins_h=0}(me.state),Ct}function Tt(me,Ct,pt,Pe,ye,lt){if(!me)return y;var Ot=1;if(Ct===_&&(Ct=6),Pe<0?(Ot=0,Pe=-Pe):15<Pe&&(Ot=2,Pe-=16),ye<1||R<ye||pt!==k||Pe<8||15<Pe||Ct<0||9<Ct||lt<0||w<lt)return Le(me,y);Pe===8&&(Pe=9);var ut=new _t;return(me.state=ut).strm=me,ut.wrap=Ot,ut.gzhead=null,ut.w_bits=Pe,ut.w_size=1<<ut.w_bits,ut.w_mask=ut.w_size-1,ut.hash_bits=ye+7,ut.hash_size=1<<ut.hash_bits,ut.hash_mask=ut.hash_size-1,ut.hash_shift=~~((ut.hash_bits+ue-1)/ue),ut.window=new o.Buf8(2*ut.w_size),ut.head=new o.Buf16(ut.hash_size),ut.prev=new o.Buf16(ut.w_size),ut.lit_bufsize=1<<ye+6,ut.pending_buf_size=4*ut.lit_bufsize,ut.pending_buf=new o.Buf8(ut.pending_buf_size),ut.d_buf=1*ut.lit_bufsize,ut.l_buf=3*ut.lit_bufsize,ut.level=Ct,ut.strategy=lt,ut.method=pt,Zt(me)}n=[new at(0,0,0,0,function(me,Ct){var pt=65535;for(pt>me.pending_buf_size-5&&(pt=me.pending_buf_size-5);;){if(me.lookahead<=1){if(ke(me),me.lookahead===0&&Ct===m)return te;if(me.lookahead===0)break}me.strstart+=me.lookahead,me.lookahead=0;var Pe=me.block_start+pt;if((me.strstart===0||me.strstart>=Pe)&&(me.lookahead=me.strstart-Pe,me.strstart=Pe,$e(me,!1),me.strm.avail_out===0)||me.strstart-me.block_start>=me.w_size-Ce&&($e(me,!1),me.strm.avail_out===0))return te}return me.insert=0,Ct===f?($e(me,!0),me.strm.avail_out===0?Te:De):(me.strstart>me.block_start&&($e(me,!1),me.strm.avail_out),te)}),new at(4,4,8,4,et),new at(4,5,16,8,et),new at(4,6,32,32,et),new at(4,4,16,16,Qe),new at(8,16,32,32,Qe),new at(8,16,128,128,Qe),new at(8,32,128,256,Qe),new at(32,128,258,1024,Qe),new at(32,258,258,4096,Qe)],e.deflateInit=function(me,Ct){return Tt(me,Ct,k,15,8,0)},e.deflateInit2=Tt,e.deflateReset=Zt,e.deflateResetKeep=ht,e.deflateSetHeader=function(me,Ct){return me&&me.state?me.state.wrap!==2?y:(me.state.gzhead=Ct,g):y},e.deflate=function(me,Ct){var pt,Pe,ye,lt;if(!me||!me.state||5<Ct||Ct<0)return me?Le(me,y):y;if(Pe=me.state,!me.output||!me.input&&me.avail_in!==0||Pe.status===666&&Ct!==f)return Le(me,me.avail_out===0?-5:y);if(Pe.strm=me,pt=Pe.last_flush,Pe.last_flush=Ct,Pe.status===_e)if(Pe.wrap===2)me.adler=0,nt(Pe,31),nt(Pe,139),nt(Pe,8),Pe.gzhead?(nt(Pe,(Pe.gzhead.text?1:0)+(Pe.gzhead.hcrc?2:0)+(Pe.gzhead.extra?4:0)+(Pe.gzhead.name?8:0)+(Pe.gzhead.comment?16:0)),nt(Pe,255&Pe.gzhead.time),nt(Pe,Pe.gzhead.time>>8&255),nt(Pe,Pe.gzhead.time>>16&255),nt(Pe,Pe.gzhead.time>>24&255),nt(Pe,Pe.level===9?2:2<=Pe.strategy||Pe.level<2?4:0),nt(Pe,255&Pe.gzhead.os),Pe.gzhead.extra&&Pe.gzhead.extra.length&&(nt(Pe,255&Pe.gzhead.extra.length),nt(Pe,Pe.gzhead.extra.length>>8&255)),Pe.gzhead.hcrc&&(me.adler=h(me.adler,Pe.pending_buf,Pe.pending,0)),Pe.gzindex=0,Pe.status=69):(nt(Pe,0),nt(Pe,0),nt(Pe,0),nt(Pe,0),nt(Pe,0),nt(Pe,Pe.level===9?2:2<=Pe.strategy||Pe.level<2?4:0),nt(Pe,3),Pe.status=de);else{var Ot=k+(Pe.w_bits-8<<4)<<8;Ot|=(2<=Pe.strategy||Pe.level<2?0:Pe.level<6?1:Pe.level===6?2:3)<<6,Pe.strstart!==0&&(Ot|=32),Ot+=31-Ot%31,Pe.status=de,be(Pe,Ot),Pe.strstart!==0&&(be(Pe,me.adler>>>16),be(Pe,65535&me.adler)),me.adler=1}if(Pe.status===69)if(Pe.gzhead.extra){for(ye=Pe.pending;Pe.gzindex<(65535&Pe.gzhead.extra.length)&&(Pe.pending!==Pe.pending_buf_size||(Pe.gzhead.hcrc&&Pe.pending>ye&&(me.adler=h(me.adler,Pe.pending_buf,Pe.pending-ye,ye)),Ve(me),ye=Pe.pending,Pe.pending!==Pe.pending_buf_size));)nt(Pe,255&Pe.gzhead.extra[Pe.gzindex]),Pe.gzindex++;Pe.gzhead.hcrc&&Pe.pending>ye&&(me.adler=h(me.adler,Pe.pending_buf,Pe.pending-ye,ye)),Pe.gzindex===Pe.gzhead.extra.length&&(Pe.gzindex=0,Pe.status=73)}else Pe.status=73;if(Pe.status===73)if(Pe.gzhead.name){ye=Pe.pending;do{if(Pe.pending===Pe.pending_buf_size&&(Pe.gzhead.hcrc&&Pe.pending>ye&&(me.adler=h(me.adler,Pe.pending_buf,Pe.pending-ye,ye)),Ve(me),ye=Pe.pending,Pe.pending===Pe.pending_buf_size)){lt=1;break}lt=Pe.gzindex<Pe.gzhead.name.length?255&Pe.gzhead.name.charCodeAt(Pe.gzindex++):0,nt(Pe,lt)}while(lt!==0);Pe.gzhead.hcrc&&Pe.pending>ye&&(me.adler=h(me.adler,Pe.pending_buf,Pe.pending-ye,ye)),lt===0&&(Pe.gzindex=0,Pe.status=91)}else Pe.status=91;if(Pe.status===91)if(Pe.gzhead.comment){ye=Pe.pending;do{if(Pe.pending===Pe.pending_buf_size&&(Pe.gzhead.hcrc&&Pe.pending>ye&&(me.adler=h(me.adler,Pe.pending_buf,Pe.pending-ye,ye)),Ve(me),ye=Pe.pending,Pe.pending===Pe.pending_buf_size)){lt=1;break}lt=Pe.gzindex<Pe.gzhead.comment.length?255&Pe.gzhead.comment.charCodeAt(Pe.gzindex++):0,nt(Pe,lt)}while(lt!==0);Pe.gzhead.hcrc&&Pe.pending>ye&&(me.adler=h(me.adler,Pe.pending_buf,Pe.pending-ye,ye)),lt===0&&(Pe.status=103)}else Pe.status=103;if(Pe.status===103&&(Pe.gzhead.hcrc?(Pe.pending+2>Pe.pending_buf_size&&Ve(me),Pe.pending+2<=Pe.pending_buf_size&&(nt(Pe,255&me.adler),nt(Pe,me.adler>>8&255),me.adler=0,Pe.status=de)):Pe.status=de),Pe.pending!==0){if(Ve(me),me.avail_out===0)return Pe.last_flush=-1,g}else if(me.avail_in===0&&Me(Ct)<=Me(pt)&&Ct!==f)return Le(me,-5);if(Pe.status===666&&me.avail_in!==0)return Le(me,-5);if(me.avail_in!==0||Pe.lookahead!==0||Ct!==m&&Pe.status!==666){var ut=Pe.strategy===2?function(ot,Rt){for(var Lt;;){if(ot.lookahead===0&&(ke(ot),ot.lookahead===0)){if(Rt===m)return te;break}if(ot.match_length=0,Lt=s._tr_tally(ot,0,ot.window[ot.strstart]),ot.lookahead--,ot.strstart++,Lt&&($e(ot,!1),ot.strm.avail_out===0))return te}return ot.insert=0,Rt===f?($e(ot,!0),ot.strm.avail_out===0?Te:De):ot.last_lit&&($e(ot,!1),ot.strm.avail_out===0)?te:Se}(Pe,Ct):Pe.strategy===3?function(ot,Rt){for(var Lt,Nt,ni,wi,vi=ot.window;;){if(ot.lookahead<=pe){if(ke(ot),ot.lookahead<=pe&&Rt===m)return te;if(ot.lookahead===0)break}if(ot.match_length=0,ot.lookahead>=ue&&0<ot.strstart&&(Nt=vi[ni=ot.strstart-1])===vi[++ni]&&Nt===vi[++ni]&&Nt===vi[++ni]){wi=ot.strstart+pe;do;while(Nt===vi[++ni]&&Nt===vi[++ni]&&Nt===vi[++ni]&&Nt===vi[++ni]&&Nt===vi[++ni]&&Nt===vi[++ni]&&Nt===vi[++ni]&&Nt===vi[++ni]&&ni<wi);ot.match_length=pe-(wi-ni),ot.match_length>ot.lookahead&&(ot.match_length=ot.lookahead)}if(ot.match_length>=ue?(Lt=s._tr_tally(ot,1,ot.match_length-ue),ot.lookahead-=ot.match_length,ot.strstart+=ot.match_length,ot.match_length=0):(Lt=s._tr_tally(ot,0,ot.window[ot.strstart]),ot.lookahead--,ot.strstart++),Lt&&($e(ot,!1),ot.strm.avail_out===0))return te}return ot.insert=0,Rt===f?($e(ot,!0),ot.strm.avail_out===0?Te:De):ot.last_lit&&($e(ot,!1),ot.strm.avail_out===0)?te:Se}(Pe,Ct):n[Pe.level].func(Pe,Ct);if(ut!==Te&&ut!==De||(Pe.status=666),ut===te||ut===Te)return me.avail_out===0&&(Pe.last_flush=-1),g;if(ut===Se&&(Ct===1?s._tr_align(Pe):Ct!==5&&(s._tr_stored_block(Pe,0,0,!1),Ct===3&&(ze(Pe.head),Pe.lookahead===0&&(Pe.strstart=0,Pe.block_start=0,Pe.insert=0))),Ve(me),me.avail_out===0))return Pe.last_flush=-1,g}return Ct!==f?g:Pe.wrap<=0?1:(Pe.wrap===2?(nt(Pe,255&me.adler),nt(Pe,me.adler>>8&255),nt(Pe,me.adler>>16&255),nt(Pe,me.adler>>24&255),nt(Pe,255&me.total_in),nt(Pe,me.total_in>>8&255),nt(Pe,me.total_in>>16&255),nt(Pe,me.total_in>>24&255)):(be(Pe,me.adler>>>16),be(Pe,65535&me.adler)),Ve(me),0<Pe.wrap&&(Pe.wrap=-Pe.wrap),Pe.pending!==0?g:1)},e.deflateEnd=function(me){var Ct;return me&&me.state?(Ct=me.state.status)!==_e&&Ct!==69&&Ct!==73&&Ct!==91&&Ct!==103&&Ct!==de&&Ct!==666?Le(me,y):(me.state=null,Ct===de?Le(me,-3):g):y},e.deflateSetDictionary=function(me,Ct){var pt,Pe,ye,lt,Ot,ut,ot,Rt,Lt=Ct.length;if(!me||!me.state||(lt=(pt=me.state).wrap)===2||lt===1&&pt.status!==_e||pt.lookahead)return y;for(lt===1&&(me.adler=l(me.adler,Ct,Lt,0)),pt.wrap=0,Lt>=pt.w_size&&(lt===0&&(ze(pt.head),pt.strstart=0,pt.block_start=0,pt.insert=0),Rt=new o.Buf8(pt.w_size),o.arraySet(Rt,Ct,Lt-pt.w_size,pt.w_size,0),Ct=Rt,Lt=pt.w_size),Ot=me.avail_in,ut=me.next_in,ot=me.input,me.avail_in=Lt,me.next_in=0,me.input=Ct,ke(pt);pt.lookahead>=ue;){for(Pe=pt.strstart,ye=pt.lookahead-(ue-1);pt.ins_h=(pt.ins_h<<pt.hash_shift^pt.window[Pe+ue-1])&pt.hash_mask,pt.prev[Pe&pt.w_mask]=pt.head[pt.ins_h],pt.head[pt.ins_h]=Pe,Pe++,--ye;);pt.strstart=Pe,pt.lookahead=ue-1,ke(pt)}return pt.strstart+=pt.lookahead,pt.block_start=pt.strstart,pt.insert=pt.lookahead,pt.lookahead=0,pt.match_length=pt.prev_length=ue-1,pt.match_available=0,me.next_in=ut,me.input=ot,me.avail_in=Ot,pt.wrap=lt,g},e.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,i,e){"use strict";i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,i,e){"use strict";i.exports=function(n,o){var s,l,h,p,m,f,g,y,_,w,A,k,R,$,H,oe,se,ge,ue,pe,Ce,_e,de,te,Se;s=n.state,l=n.next_in,te=n.input,h=l+(n.avail_in-5),p=n.next_out,Se=n.output,m=p-(o-n.avail_out),f=p+(n.avail_out-257),g=s.dmax,y=s.wsize,_=s.whave,w=s.wnext,A=s.window,k=s.hold,R=s.bits,$=s.lencode,H=s.distcode,oe=(1<<s.lenbits)-1,se=(1<<s.distbits)-1;e:do{R<15&&(k+=te[l++]<<R,R+=8,k+=te[l++]<<R,R+=8),ge=$[k&oe];t:for(;;){if(k>>>=ue=ge>>>24,R-=ue,(ue=ge>>>16&255)===0)Se[p++]=65535&ge;else{if(!(16&ue)){if(!(64&ue)){ge=$[(65535&ge)+(k&(1<<ue)-1)];continue t}if(32&ue){s.mode=12;break e}n.msg="invalid literal/length code",s.mode=30;break e}pe=65535&ge,(ue&=15)&&(R<ue&&(k+=te[l++]<<R,R+=8),pe+=k&(1<<ue)-1,k>>>=ue,R-=ue),R<15&&(k+=te[l++]<<R,R+=8,k+=te[l++]<<R,R+=8),ge=H[k&se];i:for(;;){if(k>>>=ue=ge>>>24,R-=ue,!(16&(ue=ge>>>16&255))){if(!(64&ue)){ge=H[(65535&ge)+(k&(1<<ue)-1)];continue i}n.msg="invalid distance code",s.mode=30;break e}if(Ce=65535&ge,R<(ue&=15)&&(k+=te[l++]<<R,(R+=8)<ue&&(k+=te[l++]<<R,R+=8)),g<(Ce+=k&(1<<ue)-1)){n.msg="invalid distance too far back",s.mode=30;break e}if(k>>>=ue,R-=ue,(ue=p-m)<Ce){if(_<(ue=Ce-ue)&&s.sane){n.msg="invalid distance too far back",s.mode=30;break e}if(de=A,(_e=0)===w){if(_e+=y-ue,ue<pe){for(pe-=ue;Se[p++]=A[_e++],--ue;);_e=p-Ce,de=Se}}else if(w<ue){if(_e+=y+w-ue,(ue-=w)<pe){for(pe-=ue;Se[p++]=A[_e++],--ue;);if(_e=0,w<pe){for(pe-=ue=w;Se[p++]=A[_e++],--ue;);_e=p-Ce,de=Se}}}else if(_e+=w-ue,ue<pe){for(pe-=ue;Se[p++]=A[_e++],--ue;);_e=p-Ce,de=Se}for(;2<pe;)Se[p++]=de[_e++],Se[p++]=de[_e++],Se[p++]=de[_e++],pe-=3;pe&&(Se[p++]=de[_e++],1<pe&&(Se[p++]=de[_e++]))}else{for(_e=p-Ce;Se[p++]=Se[_e++],Se[p++]=Se[_e++],Se[p++]=Se[_e++],2<(pe-=3););pe&&(Se[p++]=Se[_e++],1<pe&&(Se[p++]=Se[_e++]))}break}}break}}while(l<h&&p<f);l-=pe=R>>3,k&=(1<<(R-=pe<<3))-1,n.next_in=l,n.next_out=p,n.avail_in=l<h?h-l+5:5-(l-h),n.avail_out=p<f?f-p+257:257-(p-f),s.hold=k,s.bits=R}},{}],49:[function(r,i,e){"use strict";var n=r("../utils/common"),o=r("./adler32"),s=r("./crc32"),l=r("./inffast"),h=r("./inftrees"),p=1,m=2,f=0,g=-2,y=1,_=852,w=592;function A(_e){return(_e>>>24&255)+(_e>>>8&65280)+((65280&_e)<<8)+((255&_e)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function R(_e){var de;return _e&&_e.state?(de=_e.state,_e.total_in=_e.total_out=de.total=0,_e.msg="",de.wrap&&(_e.adler=1&de.wrap),de.mode=y,de.last=0,de.havedict=0,de.dmax=32768,de.head=null,de.hold=0,de.bits=0,de.lencode=de.lendyn=new n.Buf32(_),de.distcode=de.distdyn=new n.Buf32(w),de.sane=1,de.back=-1,f):g}function $(_e){var de;return _e&&_e.state?((de=_e.state).wsize=0,de.whave=0,de.wnext=0,R(_e)):g}function H(_e,de){var te,Se;return _e&&_e.state?(Se=_e.state,de<0?(te=0,de=-de):(te=1+(de>>4),de<48&&(de&=15)),de&&(de<8||15<de)?g:(Se.window!==null&&Se.wbits!==de&&(Se.window=null),Se.wrap=te,Se.wbits=de,$(_e))):g}function oe(_e,de){var te,Se;return _e?(Se=new k,(_e.state=Se).window=null,(te=H(_e,de))!==f&&(_e.state=null),te):g}var se,ge,ue=!0;function pe(_e){if(ue){var de;for(se=new n.Buf32(512),ge=new n.Buf32(32),de=0;de<144;)_e.lens[de++]=8;for(;de<256;)_e.lens[de++]=9;for(;de<280;)_e.lens[de++]=7;for(;de<288;)_e.lens[de++]=8;for(h(p,_e.lens,0,288,se,0,_e.work,{bits:9}),de=0;de<32;)_e.lens[de++]=5;h(m,_e.lens,0,32,ge,0,_e.work,{bits:5}),ue=!1}_e.lencode=se,_e.lenbits=9,_e.distcode=ge,_e.distbits=5}function Ce(_e,de,te,Se){var Te,De=_e.state;return De.window===null&&(De.wsize=1<<De.wbits,De.wnext=0,De.whave=0,De.window=new n.Buf8(De.wsize)),Se>=De.wsize?(n.arraySet(De.window,de,te-De.wsize,De.wsize,0),De.wnext=0,De.whave=De.wsize):(Se<(Te=De.wsize-De.wnext)&&(Te=Se),n.arraySet(De.window,de,te-Se,Te,De.wnext),(Se-=Te)?(n.arraySet(De.window,de,te-Se,Se,0),De.wnext=Se,De.whave=De.wsize):(De.wnext+=Te,De.wnext===De.wsize&&(De.wnext=0),De.whave<De.wsize&&(De.whave+=Te))),0}e.inflateReset=$,e.inflateReset2=H,e.inflateResetKeep=R,e.inflateInit=function(_e){return oe(_e,15)},e.inflateInit2=oe,e.inflate=function(_e,de){var te,Se,Te,De,Le,Me,ze,Ve,$e,nt,be,we,ke,et,Qe,at,_t,ht,Zt,Tt,me,Ct,pt,Pe,ye=0,lt=new n.Buf8(4),Ot=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_e||!_e.state||!_e.output||!_e.input&&_e.avail_in!==0)return g;(te=_e.state).mode===12&&(te.mode=13),Le=_e.next_out,Te=_e.output,ze=_e.avail_out,De=_e.next_in,Se=_e.input,Me=_e.avail_in,Ve=te.hold,$e=te.bits,nt=Me,be=ze,Ct=f;e:for(;;)switch(te.mode){case y:if(te.wrap===0){te.mode=13;break}for(;$e<16;){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}if(2&te.wrap&&Ve===35615){lt[te.check=0]=255&Ve,lt[1]=Ve>>>8&255,te.check=s(te.check,lt,2,0),$e=Ve=0,te.mode=2;break}if(te.flags=0,te.head&&(te.head.done=!1),!(1&te.wrap)||(((255&Ve)<<8)+(Ve>>8))%31){_e.msg="incorrect header check",te.mode=30;break}if((15&Ve)!=8){_e.msg="unknown compression method",te.mode=30;break}if($e-=4,me=8+(15&(Ve>>>=4)),te.wbits===0)te.wbits=me;else if(me>te.wbits){_e.msg="invalid window size",te.mode=30;break}te.dmax=1<<me,_e.adler=te.check=1,te.mode=512&Ve?10:12,$e=Ve=0;break;case 2:for(;$e<16;){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}if(te.flags=Ve,(255&te.flags)!=8){_e.msg="unknown compression method",te.mode=30;break}if(57344&te.flags){_e.msg="unknown header flags set",te.mode=30;break}te.head&&(te.head.text=Ve>>8&1),512&te.flags&&(lt[0]=255&Ve,lt[1]=Ve>>>8&255,te.check=s(te.check,lt,2,0)),$e=Ve=0,te.mode=3;case 3:for(;$e<32;){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}te.head&&(te.head.time=Ve),512&te.flags&&(lt[0]=255&Ve,lt[1]=Ve>>>8&255,lt[2]=Ve>>>16&255,lt[3]=Ve>>>24&255,te.check=s(te.check,lt,4,0)),$e=Ve=0,te.mode=4;case 4:for(;$e<16;){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}te.head&&(te.head.xflags=255&Ve,te.head.os=Ve>>8),512&te.flags&&(lt[0]=255&Ve,lt[1]=Ve>>>8&255,te.check=s(te.check,lt,2,0)),$e=Ve=0,te.mode=5;case 5:if(1024&te.flags){for(;$e<16;){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}te.length=Ve,te.head&&(te.head.extra_len=Ve),512&te.flags&&(lt[0]=255&Ve,lt[1]=Ve>>>8&255,te.check=s(te.check,lt,2,0)),$e=Ve=0}else te.head&&(te.head.extra=null);te.mode=6;case 6:if(1024&te.flags&&(Me<(we=te.length)&&(we=Me),we&&(te.head&&(me=te.head.extra_len-te.length,te.head.extra||(te.head.extra=new Array(te.head.extra_len)),n.arraySet(te.head.extra,Se,De,we,me)),512&te.flags&&(te.check=s(te.check,Se,we,De)),Me-=we,De+=we,te.length-=we),te.length))break e;te.length=0,te.mode=7;case 7:if(2048&te.flags){if(Me===0)break e;for(we=0;me=Se[De+we++],te.head&&me&&te.length<65536&&(te.head.name+=String.fromCharCode(me)),me&&we<Me;);if(512&te.flags&&(te.check=s(te.check,Se,we,De)),Me-=we,De+=we,me)break e}else te.head&&(te.head.name=null);te.length=0,te.mode=8;case 8:if(4096&te.flags){if(Me===0)break e;for(we=0;me=Se[De+we++],te.head&&me&&te.length<65536&&(te.head.comment+=String.fromCharCode(me)),me&&we<Me;);if(512&te.flags&&(te.check=s(te.check,Se,we,De)),Me-=we,De+=we,me)break e}else te.head&&(te.head.comment=null);te.mode=9;case 9:if(512&te.flags){for(;$e<16;){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}if(Ve!==(65535&te.check)){_e.msg="header crc mismatch",te.mode=30;break}$e=Ve=0}te.head&&(te.head.hcrc=te.flags>>9&1,te.head.done=!0),_e.adler=te.check=0,te.mode=12;break;case 10:for(;$e<32;){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}_e.adler=te.check=A(Ve),$e=Ve=0,te.mode=11;case 11:if(te.havedict===0)return _e.next_out=Le,_e.avail_out=ze,_e.next_in=De,_e.avail_in=Me,te.hold=Ve,te.bits=$e,2;_e.adler=te.check=1,te.mode=12;case 12:if(de===5||de===6)break e;case 13:if(te.last){Ve>>>=7&$e,$e-=7&$e,te.mode=27;break}for(;$e<3;){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}switch(te.last=1&Ve,$e-=1,3&(Ve>>>=1)){case 0:te.mode=14;break;case 1:if(pe(te),te.mode=20,de!==6)break;Ve>>>=2,$e-=2;break e;case 2:te.mode=17;break;case 3:_e.msg="invalid block type",te.mode=30}Ve>>>=2,$e-=2;break;case 14:for(Ve>>>=7&$e,$e-=7&$e;$e<32;){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}if((65535&Ve)!=(Ve>>>16^65535)){_e.msg="invalid stored block lengths",te.mode=30;break}if(te.length=65535&Ve,$e=Ve=0,te.mode=15,de===6)break e;case 15:te.mode=16;case 16:if(we=te.length){if(Me<we&&(we=Me),ze<we&&(we=ze),we===0)break e;n.arraySet(Te,Se,De,we,Le),Me-=we,De+=we,ze-=we,Le+=we,te.length-=we;break}te.mode=12;break;case 17:for(;$e<14;){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}if(te.nlen=257+(31&Ve),Ve>>>=5,$e-=5,te.ndist=1+(31&Ve),Ve>>>=5,$e-=5,te.ncode=4+(15&Ve),Ve>>>=4,$e-=4,286<te.nlen||30<te.ndist){_e.msg="too many length or distance symbols",te.mode=30;break}te.have=0,te.mode=18;case 18:for(;te.have<te.ncode;){for(;$e<3;){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}te.lens[Ot[te.have++]]=7&Ve,Ve>>>=3,$e-=3}for(;te.have<19;)te.lens[Ot[te.have++]]=0;if(te.lencode=te.lendyn,te.lenbits=7,pt={bits:te.lenbits},Ct=h(0,te.lens,0,19,te.lencode,0,te.work,pt),te.lenbits=pt.bits,Ct){_e.msg="invalid code lengths set",te.mode=30;break}te.have=0,te.mode=19;case 19:for(;te.have<te.nlen+te.ndist;){for(;at=(ye=te.lencode[Ve&(1<<te.lenbits)-1])>>>16&255,_t=65535&ye,!((Qe=ye>>>24)<=$e);){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}if(_t<16)Ve>>>=Qe,$e-=Qe,te.lens[te.have++]=_t;else{if(_t===16){for(Pe=Qe+2;$e<Pe;){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}if(Ve>>>=Qe,$e-=Qe,te.have===0){_e.msg="invalid bit length repeat",te.mode=30;break}me=te.lens[te.have-1],we=3+(3&Ve),Ve>>>=2,$e-=2}else if(_t===17){for(Pe=Qe+3;$e<Pe;){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}$e-=Qe,me=0,we=3+(7&(Ve>>>=Qe)),Ve>>>=3,$e-=3}else{for(Pe=Qe+7;$e<Pe;){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}$e-=Qe,me=0,we=11+(127&(Ve>>>=Qe)),Ve>>>=7,$e-=7}if(te.have+we>te.nlen+te.ndist){_e.msg="invalid bit length repeat",te.mode=30;break}for(;we--;)te.lens[te.have++]=me}}if(te.mode===30)break;if(te.lens[256]===0){_e.msg="invalid code -- missing end-of-block",te.mode=30;break}if(te.lenbits=9,pt={bits:te.lenbits},Ct=h(p,te.lens,0,te.nlen,te.lencode,0,te.work,pt),te.lenbits=pt.bits,Ct){_e.msg="invalid literal/lengths set",te.mode=30;break}if(te.distbits=6,te.distcode=te.distdyn,pt={bits:te.distbits},Ct=h(m,te.lens,te.nlen,te.ndist,te.distcode,0,te.work,pt),te.distbits=pt.bits,Ct){_e.msg="invalid distances set",te.mode=30;break}if(te.mode=20,de===6)break e;case 20:te.mode=21;case 21:if(6<=Me&&258<=ze){_e.next_out=Le,_e.avail_out=ze,_e.next_in=De,_e.avail_in=Me,te.hold=Ve,te.bits=$e,l(_e,be),Le=_e.next_out,Te=_e.output,ze=_e.avail_out,De=_e.next_in,Se=_e.input,Me=_e.avail_in,Ve=te.hold,$e=te.bits,te.mode===12&&(te.back=-1);break}for(te.back=0;at=(ye=te.lencode[Ve&(1<<te.lenbits)-1])>>>16&255,_t=65535&ye,!((Qe=ye>>>24)<=$e);){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}if(at&&!(240&at)){for(ht=Qe,Zt=at,Tt=_t;at=(ye=te.lencode[Tt+((Ve&(1<<ht+Zt)-1)>>ht)])>>>16&255,_t=65535&ye,!(ht+(Qe=ye>>>24)<=$e);){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}Ve>>>=ht,$e-=ht,te.back+=ht}if(Ve>>>=Qe,$e-=Qe,te.back+=Qe,te.length=_t,at===0){te.mode=26;break}if(32&at){te.back=-1,te.mode=12;break}if(64&at){_e.msg="invalid literal/length code",te.mode=30;break}te.extra=15&at,te.mode=22;case 22:if(te.extra){for(Pe=te.extra;$e<Pe;){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}te.length+=Ve&(1<<te.extra)-1,Ve>>>=te.extra,$e-=te.extra,te.back+=te.extra}te.was=te.length,te.mode=23;case 23:for(;at=(ye=te.distcode[Ve&(1<<te.distbits)-1])>>>16&255,_t=65535&ye,!((Qe=ye>>>24)<=$e);){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}if(!(240&at)){for(ht=Qe,Zt=at,Tt=_t;at=(ye=te.distcode[Tt+((Ve&(1<<ht+Zt)-1)>>ht)])>>>16&255,_t=65535&ye,!(ht+(Qe=ye>>>24)<=$e);){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}Ve>>>=ht,$e-=ht,te.back+=ht}if(Ve>>>=Qe,$e-=Qe,te.back+=Qe,64&at){_e.msg="invalid distance code",te.mode=30;break}te.offset=_t,te.extra=15&at,te.mode=24;case 24:if(te.extra){for(Pe=te.extra;$e<Pe;){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}te.offset+=Ve&(1<<te.extra)-1,Ve>>>=te.extra,$e-=te.extra,te.back+=te.extra}if(te.offset>te.dmax){_e.msg="invalid distance too far back",te.mode=30;break}te.mode=25;case 25:if(ze===0)break e;if(we=be-ze,te.offset>we){if((we=te.offset-we)>te.whave&&te.sane){_e.msg="invalid distance too far back",te.mode=30;break}ke=we>te.wnext?(we-=te.wnext,te.wsize-we):te.wnext-we,we>te.length&&(we=te.length),et=te.window}else et=Te,ke=Le-te.offset,we=te.length;for(ze<we&&(we=ze),ze-=we,te.length-=we;Te[Le++]=et[ke++],--we;);te.length===0&&(te.mode=21);break;case 26:if(ze===0)break e;Te[Le++]=te.length,ze--,te.mode=21;break;case 27:if(te.wrap){for(;$e<32;){if(Me===0)break e;Me--,Ve|=Se[De++]<<$e,$e+=8}if(be-=ze,_e.total_out+=be,te.total+=be,be&&(_e.adler=te.check=te.flags?s(te.check,Te,be,Le-be):o(te.check,Te,be,Le-be)),be=ze,(te.flags?Ve:A(Ve))!==te.check){_e.msg="incorrect data check",te.mode=30;break}$e=Ve=0}te.mode=28;case 28:if(te.wrap&&te.flags){for(;$e<32;){if(Me===0)break e;Me--,Ve+=Se[De++]<<$e,$e+=8}if(Ve!==(4294967295&te.total)){_e.msg="incorrect length check",te.mode=30;break}$e=Ve=0}te.mode=29;case 29:Ct=1;break e;case 30:Ct=-3;break e;case 31:return-4;case 32:default:return g}return _e.next_out=Le,_e.avail_out=ze,_e.next_in=De,_e.avail_in=Me,te.hold=Ve,te.bits=$e,(te.wsize||be!==_e.avail_out&&te.mode<30&&(te.mode<27||de!==4))&&Ce(_e,_e.output,_e.next_out,be-_e.avail_out)?(te.mode=31,-4):(nt-=_e.avail_in,be-=_e.avail_out,_e.total_in+=nt,_e.total_out+=be,te.total+=be,te.wrap&&be&&(_e.adler=te.check=te.flags?s(te.check,Te,be,_e.next_out-be):o(te.check,Te,be,_e.next_out-be)),_e.data_type=te.bits+(te.last?64:0)+(te.mode===12?128:0)+(te.mode===20||te.mode===15?256:0),(nt==0&&be===0||de===4)&&Ct===f&&(Ct=-5),Ct)},e.inflateEnd=function(_e){if(!_e||!_e.state)return g;var de=_e.state;return de.window&&(de.window=null),_e.state=null,f},e.inflateGetHeader=function(_e,de){var te;return _e&&_e.state&&2&(te=_e.state).wrap?((te.head=de).done=!1,f):g},e.inflateSetDictionary=function(_e,de){var te,Se=de.length;return _e&&_e.state?(te=_e.state).wrap!==0&&te.mode!==11?g:te.mode===11&&o(1,de,Se,0)!==te.check?-3:Ce(_e,de,Se,Se)?(te.mode=31,-4):(te.havedict=1,f):g},e.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,i,e){"use strict";var n=r("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(p,m,f,g,y,_,w,A){var k,R,$,H,oe,se,ge,ue,pe,Ce=A.bits,_e=0,de=0,te=0,Se=0,Te=0,De=0,Le=0,Me=0,ze=0,Ve=0,$e=null,nt=0,be=new n.Buf16(16),we=new n.Buf16(16),ke=null,et=0;for(_e=0;_e<=15;_e++)be[_e]=0;for(de=0;de<g;de++)be[m[f+de]]++;for(Te=Ce,Se=15;1<=Se&&be[Se]===0;Se--);if(Se<Te&&(Te=Se),Se===0)return y[_++]=20971520,y[_++]=20971520,A.bits=1,0;for(te=1;te<Se&&be[te]===0;te++);for(Te<te&&(Te=te),_e=Me=1;_e<=15;_e++)if(Me<<=1,(Me-=be[_e])<0)return-1;if(0<Me&&(p===0||Se!==1))return-1;for(we[1]=0,_e=1;_e<15;_e++)we[_e+1]=we[_e]+be[_e];for(de=0;de<g;de++)m[f+de]!==0&&(w[we[m[f+de]]++]=de);if(se=p===0?($e=ke=w,19):p===1?($e=o,nt-=257,ke=s,et-=257,256):($e=l,ke=h,-1),_e=te,oe=_,Le=de=Ve=0,$=-1,H=(ze=1<<(De=Te))-1,p===1&&852<ze||p===2&&592<ze)return 1;for(;;){for(ge=_e-Le,pe=w[de]<se?(ue=0,w[de]):w[de]>se?(ue=ke[et+w[de]],$e[nt+w[de]]):(ue=96,0),k=1<<_e-Le,te=R=1<<De;y[oe+(Ve>>Le)+(R-=k)]=ge<<24|ue<<16|pe|0,R!==0;);for(k=1<<_e-1;Ve&k;)k>>=1;if(k!==0?(Ve&=k-1,Ve+=k):Ve=0,de++,--be[_e]==0){if(_e===Se)break;_e=m[f+w[de]]}if(Te<_e&&(Ve&H)!==$){for(Le===0&&(Le=Te),oe+=te,Me=1<<(De=_e-Le);De+Le<Se&&!((Me-=be[De+Le])<=0);)De++,Me<<=1;if(ze+=1<<De,p===1&&852<ze||p===2&&592<ze)return 1;y[$=Ve&H]=Te<<24|De<<16|oe-_|0}}return Ve!==0&&(y[oe+Ve]=_e-Le<<24|64<<16|0),A.bits=Te,0}},{"../utils/common":41}],51:[function(r,i,e){"use strict";i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,i,e){"use strict";var n=r("../utils/common"),o=0,s=1;function l(ye){for(var lt=ye.length;0<=--lt;)ye[lt]=0}var h=0,p=29,m=256,f=m+1+p,g=30,y=19,_=2*f+1,w=15,A=16,k=7,R=256,$=16,H=17,oe=18,se=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ge=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ue=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ce=new Array(2*(f+2));l(Ce);var _e=new Array(2*g);l(_e);var de=new Array(512);l(de);var te=new Array(256);l(te);var Se=new Array(p);l(Se);var Te,De,Le,Me=new Array(g);function ze(ye,lt,Ot,ut,ot){this.static_tree=ye,this.extra_bits=lt,this.extra_base=Ot,this.elems=ut,this.max_length=ot,this.has_stree=ye&&ye.length}function Ve(ye,lt){this.dyn_tree=ye,this.max_code=0,this.stat_desc=lt}function $e(ye){return ye<256?de[ye]:de[256+(ye>>>7)]}function nt(ye,lt){ye.pending_buf[ye.pending++]=255&lt,ye.pending_buf[ye.pending++]=lt>>>8&255}function be(ye,lt,Ot){ye.bi_valid>A-Ot?(ye.bi_buf|=lt<<ye.bi_valid&65535,nt(ye,ye.bi_buf),ye.bi_buf=lt>>A-ye.bi_valid,ye.bi_valid+=Ot-A):(ye.bi_buf|=lt<<ye.bi_valid&65535,ye.bi_valid+=Ot)}function we(ye,lt,Ot){be(ye,Ot[2*lt],Ot[2*lt+1])}function ke(ye,lt){for(var Ot=0;Ot|=1&ye,ye>>>=1,Ot<<=1,0<--lt;);return Ot>>>1}function et(ye,lt,Ot){var ut,ot,Rt=new Array(w+1),Lt=0;for(ut=1;ut<=w;ut++)Rt[ut]=Lt=Lt+Ot[ut-1]<<1;for(ot=0;ot<=lt;ot++){var Nt=ye[2*ot+1];Nt!==0&&(ye[2*ot]=ke(Rt[Nt]++,Nt))}}function Qe(ye){var lt;for(lt=0;lt<f;lt++)ye.dyn_ltree[2*lt]=0;for(lt=0;lt<g;lt++)ye.dyn_dtree[2*lt]=0;for(lt=0;lt<y;lt++)ye.bl_tree[2*lt]=0;ye.dyn_ltree[2*R]=1,ye.opt_len=ye.static_len=0,ye.last_lit=ye.matches=0}function at(ye){8<ye.bi_valid?nt(ye,ye.bi_buf):0<ye.bi_valid&&(ye.pending_buf[ye.pending++]=ye.bi_buf),ye.bi_buf=0,ye.bi_valid=0}function _t(ye,lt,Ot,ut){var ot=2*lt,Rt=2*Ot;return ye[ot]<ye[Rt]||ye[ot]===ye[Rt]&&ut[lt]<=ut[Ot]}function ht(ye,lt,Ot){for(var ut=ye.heap[Ot],ot=Ot<<1;ot<=ye.heap_len&&(ot<ye.heap_len&&_t(lt,ye.heap[ot+1],ye.heap[ot],ye.depth)&&ot++,!_t(lt,ut,ye.heap[ot],ye.depth));)ye.heap[Ot]=ye.heap[ot],Ot=ot,ot<<=1;ye.heap[Ot]=ut}function Zt(ye,lt,Ot){var ut,ot,Rt,Lt,Nt=0;if(ye.last_lit!==0)for(;ut=ye.pending_buf[ye.d_buf+2*Nt]<<8|ye.pending_buf[ye.d_buf+2*Nt+1],ot=ye.pending_buf[ye.l_buf+Nt],Nt++,ut===0?we(ye,ot,lt):(we(ye,(Rt=te[ot])+m+1,lt),(Lt=se[Rt])!==0&&be(ye,ot-=Se[Rt],Lt),we(ye,Rt=$e(--ut),Ot),(Lt=ge[Rt])!==0&&be(ye,ut-=Me[Rt],Lt)),Nt<ye.last_lit;);we(ye,R,lt)}function Tt(ye,lt){var Ot,ut,ot,Rt=lt.dyn_tree,Lt=lt.stat_desc.static_tree,Nt=lt.stat_desc.has_stree,ni=lt.stat_desc.elems,wi=-1;for(ye.heap_len=0,ye.heap_max=_,Ot=0;Ot<ni;Ot++)Rt[2*Ot]!==0?(ye.heap[++ye.heap_len]=wi=Ot,ye.depth[Ot]=0):Rt[2*Ot+1]=0;for(;ye.heap_len<2;)Rt[2*(ot=ye.heap[++ye.heap_len]=wi<2?++wi:0)]=1,ye.depth[ot]=0,ye.opt_len--,Nt&&(ye.static_len-=Lt[2*ot+1]);for(lt.max_code=wi,Ot=ye.heap_len>>1;1<=Ot;Ot--)ht(ye,Rt,Ot);for(ot=ni;Ot=ye.heap[1],ye.heap[1]=ye.heap[ye.heap_len--],ht(ye,Rt,1),ut=ye.heap[1],ye.heap[--ye.heap_max]=Ot,ye.heap[--ye.heap_max]=ut,Rt[2*ot]=Rt[2*Ot]+Rt[2*ut],ye.depth[ot]=(ye.depth[Ot]>=ye.depth[ut]?ye.depth[Ot]:ye.depth[ut])+1,Rt[2*Ot+1]=Rt[2*ut+1]=ot,ye.heap[1]=ot++,ht(ye,Rt,1),2<=ye.heap_len;);ye.heap[--ye.heap_max]=ye.heap[1],function(vi,Hi){var Ei,Li,$i,Wt,Sr,En,ro=Hi.dyn_tree,yr=Hi.max_code,Ir=Hi.stat_desc.static_tree,Mo=Hi.stat_desc.has_stree,kn=Hi.stat_desc.extra_bits,Lo=Hi.stat_desc.extra_base,rr=Hi.stat_desc.max_length,gr=0;for(Wt=0;Wt<=w;Wt++)vi.bl_count[Wt]=0;for(ro[2*vi.heap[vi.heap_max]+1]=0,Ei=vi.heap_max+1;Ei<_;Ei++)rr<(Wt=ro[2*ro[2*(Li=vi.heap[Ei])+1]+1]+1)&&(Wt=rr,gr++),ro[2*Li+1]=Wt,yr<Li||(vi.bl_count[Wt]++,Sr=0,Lo<=Li&&(Sr=kn[Li-Lo]),En=ro[2*Li],vi.opt_len+=En*(Wt+Sr),Mo&&(vi.static_len+=En*(Ir[2*Li+1]+Sr)));if(gr!==0){do{for(Wt=rr-1;vi.bl_count[Wt]===0;)Wt--;vi.bl_count[Wt]--,vi.bl_count[Wt+1]+=2,vi.bl_count[rr]--,gr-=2}while(0<gr);for(Wt=rr;Wt!==0;Wt--)for(Li=vi.bl_count[Wt];Li!==0;)yr<($i=vi.heap[--Ei])||(ro[2*$i+1]!==Wt&&(vi.opt_len+=(Wt-ro[2*$i+1])*ro[2*$i],ro[2*$i+1]=Wt),Li--)}}(ye,lt),et(Rt,wi,ye.bl_count)}function me(ye,lt,Ot){var ut,ot,Rt=-1,Lt=lt[1],Nt=0,ni=7,wi=4;for(Lt===0&&(ni=138,wi=3),lt[2*(Ot+1)+1]=65535,ut=0;ut<=Ot;ut++)ot=Lt,Lt=lt[2*(ut+1)+1],++Nt<ni&&ot===Lt||(Nt<wi?ye.bl_tree[2*ot]+=Nt:ot!==0?(ot!==Rt&&ye.bl_tree[2*ot]++,ye.bl_tree[2*$]++):Nt<=10?ye.bl_tree[2*H]++:ye.bl_tree[2*oe]++,Rt=ot,wi=(Nt=0)===Lt?(ni=138,3):ot===Lt?(ni=6,3):(ni=7,4))}function Ct(ye,lt,Ot){var ut,ot,Rt=-1,Lt=lt[1],Nt=0,ni=7,wi=4;for(Lt===0&&(ni=138,wi=3),ut=0;ut<=Ot;ut++)if(ot=Lt,Lt=lt[2*(ut+1)+1],!(++Nt<ni&&ot===Lt)){if(Nt<wi)for(;we(ye,ot,ye.bl_tree),--Nt!=0;);else ot!==0?(ot!==Rt&&(we(ye,ot,ye.bl_tree),Nt--),we(ye,$,ye.bl_tree),be(ye,Nt-3,2)):Nt<=10?(we(ye,H,ye.bl_tree),be(ye,Nt-3,3)):(we(ye,oe,ye.bl_tree),be(ye,Nt-11,7));Rt=ot,wi=(Nt=0)===Lt?(ni=138,3):ot===Lt?(ni=6,3):(ni=7,4)}}l(Me);var pt=!1;function Pe(ye,lt,Ot,ut){be(ye,(h<<1)+(ut?1:0),3),function(ot,Rt,Lt,Nt){at(ot),Nt&&(nt(ot,Lt),nt(ot,~Lt)),n.arraySet(ot.pending_buf,ot.window,Rt,Lt,ot.pending),ot.pending+=Lt}(ye,lt,Ot,!0)}e._tr_init=function(ye){pt||(function(){var lt,Ot,ut,ot,Rt,Lt=new Array(w+1);for(ot=ut=0;ot<p-1;ot++)for(Se[ot]=ut,lt=0;lt<1<<se[ot];lt++)te[ut++]=ot;for(te[ut-1]=ot,ot=Rt=0;ot<16;ot++)for(Me[ot]=Rt,lt=0;lt<1<<ge[ot];lt++)de[Rt++]=ot;for(Rt>>=7;ot<g;ot++)for(Me[ot]=Rt<<7,lt=0;lt<1<<ge[ot]-7;lt++)de[256+Rt++]=ot;for(Ot=0;Ot<=w;Ot++)Lt[Ot]=0;for(lt=0;lt<=143;)Ce[2*lt+1]=8,lt++,Lt[8]++;for(;lt<=255;)Ce[2*lt+1]=9,lt++,Lt[9]++;for(;lt<=279;)Ce[2*lt+1]=7,lt++,Lt[7]++;for(;lt<=287;)Ce[2*lt+1]=8,lt++,Lt[8]++;for(et(Ce,f+1,Lt),lt=0;lt<g;lt++)_e[2*lt+1]=5,_e[2*lt]=ke(lt,5);Te=new ze(Ce,se,m+1,f,w),De=new ze(_e,ge,0,g,w),Le=new ze(new Array(0),ue,0,y,k)}(),pt=!0),ye.l_desc=new Ve(ye.dyn_ltree,Te),ye.d_desc=new Ve(ye.dyn_dtree,De),ye.bl_desc=new Ve(ye.bl_tree,Le),ye.bi_buf=0,ye.bi_valid=0,Qe(ye)},e._tr_stored_block=Pe,e._tr_flush_block=function(ye,lt,Ot,ut){var ot,Rt,Lt=0;0<ye.level?(ye.strm.data_type===2&&(ye.strm.data_type=function(Nt){var ni,wi=4093624447;for(ni=0;ni<=31;ni++,wi>>>=1)if(1&wi&&Nt.dyn_ltree[2*ni]!==0)return o;if(Nt.dyn_ltree[18]!==0||Nt.dyn_ltree[20]!==0||Nt.dyn_ltree[26]!==0)return s;for(ni=32;ni<m;ni++)if(Nt.dyn_ltree[2*ni]!==0)return s;return o}(ye)),Tt(ye,ye.l_desc),Tt(ye,ye.d_desc),Lt=function(Nt){var ni;for(me(Nt,Nt.dyn_ltree,Nt.l_desc.max_code),me(Nt,Nt.dyn_dtree,Nt.d_desc.max_code),Tt(Nt,Nt.bl_desc),ni=y-1;3<=ni&&Nt.bl_tree[2*pe[ni]+1]===0;ni--);return Nt.opt_len+=3*(ni+1)+5+5+4,ni}(ye),ot=ye.opt_len+3+7>>>3,(Rt=ye.static_len+3+7>>>3)<=ot&&(ot=Rt)):ot=Rt=Ot+5,Ot+4<=ot&&lt!==-1?Pe(ye,lt,Ot,ut):ye.strategy===4||Rt===ot?(be(ye,2+(ut?1:0),3),Zt(ye,Ce,_e)):(be(ye,4+(ut?1:0),3),function(Nt,ni,wi,vi){var Hi;for(be(Nt,ni-257,5),be(Nt,wi-1,5),be(Nt,vi-4,4),Hi=0;Hi<vi;Hi++)be(Nt,Nt.bl_tree[2*pe[Hi]+1],3);Ct(Nt,Nt.dyn_ltree,ni-1),Ct(Nt,Nt.dyn_dtree,wi-1)}(ye,ye.l_desc.max_code+1,ye.d_desc.max_code+1,Lt+1),Zt(ye,ye.dyn_ltree,ye.dyn_dtree)),Qe(ye),ut&&at(ye)},e._tr_tally=function(ye,lt,Ot){return ye.pending_buf[ye.d_buf+2*ye.last_lit]=lt>>>8&255,ye.pending_buf[ye.d_buf+2*ye.last_lit+1]=255&lt,ye.pending_buf[ye.l_buf+ye.last_lit]=255&Ot,ye.last_lit++,lt===0?ye.dyn_ltree[2*Ot]++:(ye.matches++,lt--,ye.dyn_ltree[2*(te[Ot]+m+1)]++,ye.dyn_dtree[2*$e(lt)]++),ye.last_lit===ye.lit_bufsize-1},e._tr_align=function(ye){be(ye,2,3),we(ye,R,Ce),function(lt){lt.bi_valid===16?(nt(lt,lt.bi_buf),lt.bi_buf=0,lt.bi_valid=0):8<=lt.bi_valid&&(lt.pending_buf[lt.pending++]=255&lt.bi_buf,lt.bi_buf>>=8,lt.bi_valid-=8)}(ye)}},{"../utils/common":41}],53:[function(r,i,e){"use strict";i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,i,e){(function(n){(function(o,s){"use strict";if(!o.setImmediate){var l,h,p,m,f=1,g={},y=!1,_=o.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(o);w=w&&w.setTimeout?w:o,l={}.toString.call(o.process)==="[object process]"?function($){process.nextTick(function(){k($)})}:function(){if(o.postMessage&&!o.importScripts){var $=!0,H=o.onmessage;return o.onmessage=function(){$=!1},o.postMessage("","*"),o.onmessage=H,$}}()?(m="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",R,!1):o.attachEvent("onmessage",R),function($){o.postMessage(m+$,"*")}):o.MessageChannel?((p=new MessageChannel).port1.onmessage=function($){k($.data)},function($){p.port2.postMessage($)}):_&&"onreadystatechange"in _.createElement("script")?(h=_.documentElement,function($){var H=_.createElement("script");H.onreadystatechange=function(){k($),H.onreadystatechange=null,h.removeChild(H),H=null},h.appendChild(H)}):function($){setTimeout(k,0,$)},w.setImmediate=function($){typeof $!="function"&&($=new Function(""+$));for(var H=new Array(arguments.length-1),oe=0;oe<H.length;oe++)H[oe]=arguments[oe+1];var se={callback:$,args:H};return g[f]=se,l(f),f++},w.clearImmediate=A}function A($){delete g[$]}function k($){if(y)setTimeout(k,0,$);else{var H=g[$];if(H){y=!0;try{(function(oe){var se=oe.callback,ge=oe.args;switch(ge.length){case 0:se();break;case 1:se(ge[0]);break;case 2:se(ge[0],ge[1]);break;case 3:se(ge[0],ge[1],ge[2]);break;default:se.apply(s,ge)}})(H)}finally{A($),y=!1}}}}function R($){$.source===o&&typeof $.data=="string"&&$.data.indexOf(m)===0&&k(+$.data.slice(m.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});var Eve=ad(TQ=>{TQ.read=function(r,i,e,n,o){var s,l,h=o*8-n-1,p=(1<<h)-1,m=p>>1,f=-7,g=e?o-1:0,y=e?-1:1,_=r[i+g];for(g+=y,s=_&(1<<-f)-1,_>>=-f,f+=h;f>0;s=s*256+r[i+g],g+=y,f-=8);for(l=s&(1<<-f)-1,s>>=-f,f+=n;f>0;l=l*256+r[i+g],g+=y,f-=8);if(s===0)s=1-m;else{if(s===p)return l?NaN:(_?-1:1)*(1/0);l=l+Math.pow(2,n),s=s-m}return(_?-1:1)*l*Math.pow(2,s-n)};TQ.write=function(r,i,e,n,o,s){var l,h,p,m=s*8-o-1,f=(1<<m)-1,g=f>>1,y=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:s-1,w=n?1:-1,A=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(h=isNaN(i)?1:0,l=f):(l=Math.floor(Math.log(i)/Math.LN2),i*(p=Math.pow(2,-l))<1&&(l--,p*=2),l+g>=1?i+=y/p:i+=y*Math.pow(2,1-g),i*p>=2&&(l++,p/=2),l+g>=f?(h=0,l=f):l+g>=1?(h=(i*p-1)*Math.pow(2,o),l=l+g):(h=i*Math.pow(2,g-1)*Math.pow(2,o),l=0));o>=8;r[e+_]=h&255,_+=w,h/=256,o-=8);for(l=l<<o|h,m+=o;m>0;r[e+_]=l&255,_+=w,l/=256,m-=8);r[e+_-w]|=A*128}});var Rve=ad((Pti,Pve)=>{"use strict";Pve.exports=xs;var $6=Eve();function xs(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}xs.Varint=0;xs.Fixed64=1;xs.Bytes=2;xs.Fixed32=5;var AQ=65536*65536,Mve=1/AQ,SYe=12,Ove=typeof TextDecoder>"u"?null:new TextDecoder("utf8");xs.prototype={destroy:function(){this.buf=null},readFields:function(r,i,e){for(e=e||this.length;this.pos<e;){var n=this.readVarint(),o=n>>3,s=this.pos;this.type=n&7,r(o,i,this),this.pos===s&&this.skip(n)}return i},readMessage:function(r,i){return this.readFields(r,i,this.readVarint()+this.pos)},readFixed32:function(){var r=U6(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=kve(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=U6(this.buf,this.pos)+U6(this.buf,this.pos+4)*AQ;return this.pos+=8,r},readSFixed64:function(){var r=U6(this.buf,this.pos)+kve(this.buf,this.pos+4)*AQ;return this.pos+=8,r},readFloat:function(){var r=$6.read(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=$6.read(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var i=this.buf,e,n;return n=i[this.pos++],e=n&127,n<128||(n=i[this.pos++],e|=(n&127)<<7,n<128)||(n=i[this.pos++],e|=(n&127)<<14,n<128)||(n=i[this.pos++],e|=(n&127)<<21,n<128)?e:(n=i[this.pos],e|=(n&15)<<28,IYe(e,r,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2===1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,i=this.pos;return this.pos=r,r-i>=SYe&&Ove?jYe(this.buf,i,r):BYe(this.buf,i,r)},readBytes:function(){var r=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,r);return this.pos=r,i},readPackedVarint:function(r,i){if(this.type!==xs.Bytes)return r.push(this.readVarint(i));var e=Vv(this);for(r=r||[];this.pos<e;)r.push(this.readVarint(i));return r},readPackedSVarint:function(r){if(this.type!==xs.Bytes)return r.push(this.readSVarint());var i=Vv(this);for(r=r||[];this.pos<i;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==xs.Bytes)return r.push(this.readBoolean());var i=Vv(this);for(r=r||[];this.pos<i;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==xs.Bytes)return r.push(this.readFloat());var i=Vv(this);for(r=r||[];this.pos<i;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==xs.Bytes)return r.push(this.readDouble());var i=Vv(this);for(r=r||[];this.pos<i;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==xs.Bytes)return r.push(this.readFixed32());var i=Vv(this);for(r=r||[];this.pos<i;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==xs.Bytes)return r.push(this.readSFixed32());var i=Vv(this);for(r=r||[];this.pos<i;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==xs.Bytes)return r.push(this.readFixed64());var i=Vv(this);for(r=r||[];this.pos<i;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==xs.Bytes)return r.push(this.readSFixed64());var i=Vv(this);for(r=r||[];this.pos<i;)r.push(this.readSFixed64());return r},skip:function(r){var i=r&7;if(i===xs.Varint)for(;this.buf[this.pos++]>127;);else if(i===xs.Bytes)this.pos=this.readVarint()+this.pos;else if(i===xs.Fixed32)this.pos+=4;else if(i===xs.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+i)},writeTag:function(r,i){this.writeVarint(r<<3|i)},realloc:function(r){for(var i=this.length||16;i<this.pos+r;)i*=2;if(i!==this.length){var e=new Uint8Array(i);e.set(this.buf),this.buf=e,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),wM(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),wM(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),wM(this.buf,r&-1,this.pos),wM(this.buf,Math.floor(r*Mve),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),wM(this.buf,r&-1,this.pos),wM(this.buf,Math.floor(r*Mve),this.pos+4),this.pos+=8},writeVarint:function(r){if(r=+r||0,r>268435455||r<0){TYe(r,this);return}this.realloc(4),this.buf[this.pos++]=r&127|(r>127?128:0),!(r<=127)&&(this.buf[this.pos++]=(r>>>=7)&127|(r>127?128:0),!(r<=127)&&(this.buf[this.pos++]=(r>>>=7)&127|(r>127?128:0),!(r<=127)&&(this.buf[this.pos++]=r>>>7&127)))},writeSVarint:function(r){this.writeVarint(r<0?-r*2-1:r*2)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(r.length*4),this.pos++;var i=this.pos;this.pos=VYe(this.buf,r,this.pos);var e=this.pos-i;e>=128&&Dve(i,e,this),this.pos=i-1,this.writeVarint(e),this.pos+=e},writeFloat:function(r){this.realloc(4),$6.write(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),$6.write(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var i=r.length;this.writeVarint(i),this.realloc(i);for(var e=0;e<i;e++)this.buf[this.pos++]=r[e]},writeRawMessage:function(r,i){this.pos++;var e=this.pos;r(i,this);var n=this.pos-e;n>=128&&Dve(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeMessage:function(r,i,e){this.writeTag(r,xs.Bytes),this.writeRawMessage(i,e)},writePackedVarint:function(r,i){i.length&&this.writeMessage(r,MYe,i)},writePackedSVarint:function(r,i){i.length&&this.writeMessage(r,DYe,i)},writePackedBoolean:function(r,i){i.length&&this.writeMessage(r,PYe,i)},writePackedFloat:function(r,i){i.length&&this.writeMessage(r,kYe,i)},writePackedDouble:function(r,i){i.length&&this.writeMessage(r,OYe,i)},writePackedFixed32:function(r,i){i.length&&this.writeMessage(r,RYe,i)},writePackedSFixed32:function(r,i){i.length&&this.writeMessage(r,FYe,i)},writePackedFixed64:function(r,i){i.length&&this.writeMessage(r,LYe,i)},writePackedSFixed64:function(r,i){i.length&&this.writeMessage(r,NYe,i)},writeBytesField:function(r,i){this.writeTag(r,xs.Bytes),this.writeBytes(i)},writeFixed32Field:function(r,i){this.writeTag(r,xs.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(r,i){this.writeTag(r,xs.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(r,i){this.writeTag(r,xs.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(r,i){this.writeTag(r,xs.Fixed64),this.writeSFixed64(i)},writeVarintField:function(r,i){this.writeTag(r,xs.Varint),this.writeVarint(i)},writeSVarintField:function(r,i){this.writeTag(r,xs.Varint),this.writeSVarint(i)},writeStringField:function(r,i){this.writeTag(r,xs.Bytes),this.writeString(i)},writeFloatField:function(r,i){this.writeTag(r,xs.Fixed32),this.writeFloat(i)},writeDoubleField:function(r,i){this.writeTag(r,xs.Fixed64),this.writeDouble(i)},writeBooleanField:function(r,i){this.writeVarintField(r,!!i)}};function IYe(r,i,e){var n=e.buf,o,s;if(s=n[e.pos++],o=(s&112)>>4,s<128||(s=n[e.pos++],o|=(s&127)<<3,s<128)||(s=n[e.pos++],o|=(s&127)<<10,s<128)||(s=n[e.pos++],o|=(s&127)<<17,s<128)||(s=n[e.pos++],o|=(s&127)<<24,s<128)||(s=n[e.pos++],o|=(s&1)<<31,s<128))return bM(r,o,i);throw new Error("Expected varint not more than 10 bytes")}function Vv(r){return r.type===xs.Bytes?r.readVarint()+r.pos:r.pos+1}function bM(r,i,e){return e?i*4294967296+(r>>>0):(i>>>0)*4294967296+(r>>>0)}function TYe(r,i){var e,n;if(r>=0?(e=r%4294967296|0,n=r/4294967296|0):(e=~(-r%4294967296),n=~(-r/4294967296),e^4294967295?e=e+1|0:(e=0,n=n+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),AYe(e,n,i),EYe(n,i)}function AYe(r,i,e){e.buf[e.pos++]=r&127|128,r>>>=7,e.buf[e.pos++]=r&127|128,r>>>=7,e.buf[e.pos++]=r&127|128,r>>>=7,e.buf[e.pos++]=r&127|128,r>>>=7,e.buf[e.pos]=r&127}function EYe(r,i){var e=(r&7)<<4;i.buf[i.pos++]|=e|((r>>>=3)?128:0),r&&(i.buf[i.pos++]=r&127|((r>>>=7)?128:0),r&&(i.buf[i.pos++]=r&127|((r>>>=7)?128:0),r&&(i.buf[i.pos++]=r&127|((r>>>=7)?128:0),r&&(i.buf[i.pos++]=r&127|((r>>>=7)?128:0),r&&(i.buf[i.pos++]=r&127)))))}function Dve(r,i,e){var n=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(Math.LN2*7));e.realloc(n);for(var o=e.pos-1;o>=r;o--)e.buf[o+n]=e.buf[o]}function MYe(r,i){for(var e=0;e<r.length;e++)i.writeVarint(r[e])}function DYe(r,i){for(var e=0;e<r.length;e++)i.writeSVarint(r[e])}function kYe(r,i){for(var e=0;e<r.length;e++)i.writeFloat(r[e])}function OYe(r,i){for(var e=0;e<r.length;e++)i.writeDouble(r[e])}function PYe(r,i){for(var e=0;e<r.length;e++)i.writeBoolean(r[e])}function RYe(r,i){for(var e=0;e<r.length;e++)i.writeFixed32(r[e])}function FYe(r,i){for(var e=0;e<r.length;e++)i.writeSFixed32(r[e])}function LYe(r,i){for(var e=0;e<r.length;e++)i.writeFixed64(r[e])}function NYe(r,i){for(var e=0;e<r.length;e++)i.writeSFixed64(r[e])}function U6(r,i){return(r[i]|r[i+1]<<8|r[i+2]<<16)+r[i+3]*16777216}function wM(r,i,e){r[e]=i,r[e+1]=i>>>8,r[e+2]=i>>>16,r[e+3]=i>>>24}function kve(r,i){return(r[i]|r[i+1]<<8|r[i+2]<<16)+(r[i+3]<<24)}function BYe(r,i,e){for(var n="",o=i;o<e;){var s=r[o],l=null,h=s>239?4:s>223?3:s>191?2:1;if(o+h>e)break;var p,m,f;h===1?s<128&&(l=s):h===2?(p=r[o+1],(p&192)===128&&(l=(s&31)<<6|p&63,l<=127&&(l=null))):h===3?(p=r[o+1],m=r[o+2],(p&192)===128&&(m&192)===128&&(l=(s&15)<<12|(p&63)<<6|m&63,(l<=2047||l>=55296&&l<=57343)&&(l=null))):h===4&&(p=r[o+1],m=r[o+2],f=r[o+3],(p&192)===128&&(m&192)===128&&(f&192)===128&&(l=(s&15)<<18|(p&63)<<12|(m&63)<<6|f&63,(l<=65535||l>=1114112)&&(l=null))),l===null?(l=65533,h=1):l>65535&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|l&1023),n+=String.fromCharCode(l),o+=h}return n}function jYe(r,i,e){return Ove.decode(r.subarray(i,e))}function VYe(r,i,e){for(var n=0,o,s;n<i.length;n++){if(o=i.charCodeAt(n),o>55295&&o<57344)if(s)if(o<56320){r[e++]=239,r[e++]=191,r[e++]=189,s=o;continue}else o=s-55296<<10|o-56320|65536,s=null;else{o>56319||n+1===i.length?(r[e++]=239,r[e++]=191,r[e++]=189):s=o;continue}else s&&(r[e++]=239,r[e++]=191,r[e++]=189,s=null);o<128?r[e++]=o:(o<2048?r[e++]=o>>6|192:(o<65536?r[e++]=o>>12|224:(r[e++]=o>>18|240,r[e++]=o>>12&63|128),r[e++]=o>>6&63|128),r[e++]=o&63|128)}return e}});var iV=ad((CX,xX)=>{(function(r,i){typeof CX=="object"&&typeof xX<"u"?xX.exports=i():typeof define=="function"&&define.amd?define(i):(r=r||self).RBush=i()})(CX,function(){"use strict";function r(k,R,$,H,oe){(function se(ge,ue,pe,Ce,_e){for(;Ce>pe;){if(Ce-pe>600){var de=Ce-pe+1,te=ue-pe+1,Se=Math.log(de),Te=.5*Math.exp(2*Se/3),De=.5*Math.sqrt(Se*Te*(de-Te)/de)*(te-de/2<0?-1:1),Le=Math.max(pe,Math.floor(ue-te*Te/de+De)),Me=Math.min(Ce,Math.floor(ue+(de-te)*Te/de+De));se(ge,ue,Le,Me,_e)}var ze=ge[ue],Ve=pe,$e=Ce;for(i(ge,pe,ue),_e(ge[Ce],ze)>0&&i(ge,pe,Ce);Ve<$e;){for(i(ge,Ve,$e),Ve++,$e--;_e(ge[Ve],ze)<0;)Ve++;for(;_e(ge[$e],ze)>0;)$e--}_e(ge[pe],ze)===0?i(ge,pe,$e):i(ge,++$e,Ce),$e<=ue&&(pe=$e+1),ue<=$e&&(Ce=$e-1)}})(k,R,$||0,H||k.length-1,oe||e)}function i(k,R,$){var H=k[R];k[R]=k[$],k[$]=H}function e(k,R){return k<R?-1:k>R?1:0}var n=function(k){k===void 0&&(k=9),this._maxEntries=Math.max(4,k),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(k,R,$){if(!$)return R.indexOf(k);for(var H=0;H<R.length;H++)if($(k,R[H]))return H;return-1}function s(k,R){l(k,0,k.children.length,R,k)}function l(k,R,$,H,oe){oe||(oe=w(null)),oe.minX=1/0,oe.minY=1/0,oe.maxX=-1/0,oe.maxY=-1/0;for(var se=R;se<$;se++){var ge=k.children[se];h(oe,k.leaf?H(ge):ge)}return oe}function h(k,R){return k.minX=Math.min(k.minX,R.minX),k.minY=Math.min(k.minY,R.minY),k.maxX=Math.max(k.maxX,R.maxX),k.maxY=Math.max(k.maxY,R.maxY),k}function p(k,R){return k.minX-R.minX}function m(k,R){return k.minY-R.minY}function f(k){return(k.maxX-k.minX)*(k.maxY-k.minY)}function g(k){return k.maxX-k.minX+(k.maxY-k.minY)}function y(k,R){return k.minX<=R.minX&&k.minY<=R.minY&&R.maxX<=k.maxX&&R.maxY<=k.maxY}function _(k,R){return R.minX<=k.maxX&&R.minY<=k.maxY&&R.maxX>=k.minX&&R.maxY>=k.minY}function w(k){return{children:k,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function A(k,R,$,H,oe){for(var se=[R,$];se.length;)if(!(($=se.pop())-(R=se.pop())<=H)){var ge=R+Math.ceil(($-R)/H/2)*H;r(k,ge,R,$,oe),se.push(R,ge,ge,$)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(k){var R=this.data,$=[];if(!_(k,R))return $;for(var H=this.toBBox,oe=[];R;){for(var se=0;se<R.children.length;se++){var ge=R.children[se],ue=R.leaf?H(ge):ge;_(k,ue)&&(R.leaf?$.push(ge):y(k,ue)?this._all(ge,$):oe.push(ge))}R=oe.pop()}return $},n.prototype.collides=function(k){var R=this.data;if(!_(k,R))return!1;for(var $=[];R;){for(var H=0;H<R.children.length;H++){var oe=R.children[H],se=R.leaf?this.toBBox(oe):oe;if(_(k,se)){if(R.leaf||y(k,se))return!0;$.push(oe)}}R=$.pop()}return!1},n.prototype.load=function(k){if(!k||!k.length)return this;if(k.length<this._minEntries){for(var R=0;R<k.length;R++)this.insert(k[R]);return this}var $=this._build(k.slice(),0,k.length-1,0);if(this.data.children.length)if(this.data.height===$.height)this._splitRoot(this.data,$);else{if(this.data.height<$.height){var H=this.data;this.data=$,$=H}this._insert($,this.data.height-$.height-1,!0)}else this.data=$;return this},n.prototype.insert=function(k){return k&&this._insert(k,this.data.height-1),this},n.prototype.clear=function(){return this.data=w([]),this},n.prototype.remove=function(k,R){if(!k)return this;for(var $,H,oe,se=this.data,ge=this.toBBox(k),ue=[],pe=[];se||ue.length;){if(se||(se=ue.pop(),H=ue[ue.length-1],$=pe.pop(),oe=!0),se.leaf){var Ce=o(k,se.children,R);if(Ce!==-1)return se.children.splice(Ce,1),ue.push(se),this._condense(ue),this}oe||se.leaf||!y(se,ge)?H?($++,se=H.children[$],oe=!1):se=null:(ue.push(se),pe.push($),$=0,H=se,se=se.children[0])}return this},n.prototype.toBBox=function(k){return k},n.prototype.compareMinX=function(k,R){return k.minX-R.minX},n.prototype.compareMinY=function(k,R){return k.minY-R.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(k){return this.data=k,this},n.prototype._all=function(k,R){for(var $=[];k;)k.leaf?R.push.apply(R,k.children):$.push.apply($,k.children),k=$.pop();return R},n.prototype._build=function(k,R,$,H){var oe,se=$-R+1,ge=this._maxEntries;if(se<=ge)return s(oe=w(k.slice(R,$+1)),this.toBBox),oe;H||(H=Math.ceil(Math.log(se)/Math.log(ge)),ge=Math.ceil(se/Math.pow(ge,H-1))),(oe=w([])).leaf=!1,oe.height=H;var ue=Math.ceil(se/ge),pe=ue*Math.ceil(Math.sqrt(ge));A(k,R,$,pe,this.compareMinX);for(var Ce=R;Ce<=$;Ce+=pe){var _e=Math.min(Ce+pe-1,$);A(k,Ce,_e,ue,this.compareMinY);for(var de=Ce;de<=_e;de+=ue){var te=Math.min(de+ue-1,_e);oe.children.push(this._build(k,de,te,H-1))}}return s(oe,this.toBBox),oe},n.prototype._chooseSubtree=function(k,R,$,H){for(;H.push(R),!R.leaf&&H.length-1!==$;){for(var oe=1/0,se=1/0,ge=void 0,ue=0;ue<R.children.length;ue++){var pe=R.children[ue],Ce=f(pe),_e=(de=k,te=pe,(Math.max(te.maxX,de.maxX)-Math.min(te.minX,de.minX))*(Math.max(te.maxY,de.maxY)-Math.min(te.minY,de.minY))-Ce);_e<se?(se=_e,oe=Ce<oe?Ce:oe,ge=pe):_e===se&&Ce<oe&&(oe=Ce,ge=pe)}R=ge||R.children[0]}var de,te;return R},n.prototype._insert=function(k,R,$){var H=$?k:this.toBBox(k),oe=[],se=this._chooseSubtree(H,this.data,R,oe);for(se.children.push(k),h(se,H);R>=0&&oe[R].children.length>this._maxEntries;)this._split(oe,R),R--;this._adjustParentBBoxes(H,oe,R)},n.prototype._split=function(k,R){var $=k[R],H=$.children.length,oe=this._minEntries;this._chooseSplitAxis($,oe,H);var se=this._chooseSplitIndex($,oe,H),ge=w($.children.splice(se,$.children.length-se));ge.height=$.height,ge.leaf=$.leaf,s($,this.toBBox),s(ge,this.toBBox),R?k[R-1].children.push(ge):this._splitRoot($,ge)},n.prototype._splitRoot=function(k,R){this.data=w([k,R]),this.data.height=k.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(k,R,$){for(var H,oe,se,ge,ue,pe,Ce,_e=1/0,de=1/0,te=R;te<=$-R;te++){var Se=l(k,0,te,this.toBBox),Te=l(k,te,$,this.toBBox),De=(oe=Se,se=Te,ge=void 0,ue=void 0,pe=void 0,Ce=void 0,ge=Math.max(oe.minX,se.minX),ue=Math.max(oe.minY,se.minY),pe=Math.min(oe.maxX,se.maxX),Ce=Math.min(oe.maxY,se.maxY),Math.max(0,pe-ge)*Math.max(0,Ce-ue)),Le=f(Se)+f(Te);De<_e?(_e=De,H=te,de=Le<de?Le:de):De===_e&&Le<de&&(de=Le,H=te)}return H||$-R},n.prototype._chooseSplitAxis=function(k,R,$){var H=k.leaf?this.compareMinX:p,oe=k.leaf?this.compareMinY:m;this._allDistMargin(k,R,$,H)<this._allDistMargin(k,R,$,oe)&&k.children.sort(H)},n.prototype._allDistMargin=function(k,R,$,H){k.children.sort(H);for(var oe=this.toBBox,se=l(k,0,R,oe),ge=l(k,$-R,$,oe),ue=g(se)+g(ge),pe=R;pe<$-R;pe++){var Ce=k.children[pe];h(se,k.leaf?oe(Ce):Ce),ue+=g(se)}for(var _e=$-R-1;_e>=R;_e--){var de=k.children[_e];h(ge,k.leaf?oe(de):de),ue+=g(ge)}return ue},n.prototype._adjustParentBBoxes=function(k,R,$){for(var H=$;H>=0;H--)h(R[H],k)},n.prototype._condense=function(k){for(var R=k.length-1,$=void 0;R>=0;R--)k[R].children.length===0?R>0?($=k[R-1].children).splice($.indexOf(k[R]),1):this.clear():s(k[R],this.toBBox)},n})});var bTe=ad((BAi,vTe)=>{vTe.exports={webm:"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAVkhFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsghV17AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU1LjMzLjEwMFdBjUxhdmY1NS4zMy4xMDBzpJBlrrXf3DCDVB8KcgbMpcr+RImIQJBgAAAAAAAWVK5rAQAAAAAAD++uAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDiDgQEj44OEAmJaAOABAAAAAAAABrCBsLqBkK4BAAAAAAAPq9eBAnPFgQKcgQAitZyDdW5khohBX1ZPUkJJU4OBAuEBAAAAAAAAEZ+BArWIQOdwAAAAAABiZIEgY6JPbwIeVgF2b3JiaXMAAAAAAoC7AAAAAAAAgLUBAAAAAAC4AQN2b3JiaXMtAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAxMDExMDEgKFNjaGF1ZmVudWdnZXQpAQAAABUAAABlbmNvZGVyPUxhdmM1NS41Mi4xMDIBBXZvcmJpcyVCQ1YBAEAAACRzGCpGpXMWhBAaQlAZ4xxCzmvsGUJMEYIcMkxbyyVzkCGkoEKIWyiB0JBVAABAAACHQXgUhIpBCCGEJT1YkoMnPQghhIg5eBSEaUEIIYQQQgghhBBCCCGERTlokoMnQQgdhOMwOAyD5Tj4HIRFOVgQgydB6CCED0K4moOsOQghhCQ1SFCDBjnoHITCLCiKgsQwuBaEBDUojILkMMjUgwtCiJqDSTX4GoRnQXgWhGlBCCGEJEFIkIMGQcgYhEZBWJKDBjm4FITLQagahCo5CB+EIDRkFQCQAACgoiiKoigKEBqyCgDIAAAQQFEUx3EcyZEcybEcCwgNWQUAAAEACAAAoEiKpEiO5EiSJFmSJVmSJVmS5omqLMuyLMuyLMsyEBqyCgBIAABQUQxFcRQHCA1ZBQBkAAAIoDiKpViKpWiK54iOCISGrAIAgAAABAAAEDRDUzxHlETPVFXXtm3btm3btm3btm3btm1blmUZCA1ZBQBAAAAQ0mlmqQaIMAMZBkJDVgEACAAAgBGKMMSA0JBVAABAAACAGEoOogmtOd+c46BZDppKsTkdnEi1eZKbirk555xzzsnmnDHOOeecopxZDJoJrTnnnMSgWQqaCa0555wnsXnQmiqtOeeccc7pYJwRxjnnnCateZCajbU555wFrWmOmkuxOeecSLl5UptLtTnnnHPOOeecc84555zqxekcnBPOOeecqL25lpvQxTnnnE/G6d6cEM4555xzzjnnnHPOOeecIDRkFQAABABAEIaNYdwpCNLnaCBGEWIaMulB9+gwCRqDnELq0ehopJQ6CCWVcVJKJwgNWQUAAAIAQAghhRRSSCGFFFJIIYUUYoghhhhyyimnoIJKKqmooowyyyyzzDLLLLPMOuyssw47DDHEEEMrrcRSU2011lhr7jnnmoO0VlprrbVSSimllFIKQkNWAQAgAAAEQgYZZJBRSCGFFGKIKaeccgoqqIDQkFUAACAAgAAAAABP8hzRER3RER3RER3RER3R8RzPESVREiVREi3TMjXTU0VVdWXXlnVZt31b2IVd933d933d+HVhWJZlWZZlWZZlWZZlWZZlWZYgNGQVAAACAAAghBBCSCGFFFJIKcYYc8w56CSUEAgNWQUAAAIACAAAAHAUR3EcyZEcSbIkS9IkzdIsT/M0TxM9URRF0zRV0RVdUTdtUTZl0zVdUzZdVVZtV5ZtW7Z125dl2/d93/d93/d93/d93/d9XQdCQ1YBABIAADqSIymSIimS4ziOJElAaMgqAEAGAEAAAIriKI7jOJIkSZIlaZJneZaomZrpmZ4qqkBoyCoAABAAQAAAAAAAAIqmeIqpeIqoeI7oiJJomZaoqZoryqbsuq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq4LhIasAgAkAAB0JEdyJEdSJEVSJEdygNCQVQCADACAAAAcwzEkRXIsy9I0T/M0TxM90RM901NFV3SB0JBVAAAgAIAAAAAAAAAMybAUy9EcTRIl1VItVVMt1VJF1VNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVN0zRNEwgNWQkAkAEAkBBTLS3GmgmLJGLSaqugYwxS7KWxSCpntbfKMYUYtV4ah5RREHupJGOKQcwtpNApJq3WVEKFFKSYYyoVUg5SIDRkhQAQmgHgcBxAsixAsiwAAAAAAAAAkDQN0DwPsDQPAAAAAAAAACRNAyxPAzTPAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAA0DwP8DwR8EQRAAAAAAAAACzPAzTRAzxRBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAAsDwP8EQR0DwRAAAAAAAAACzPAzxRBDzRAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEOAAABBgIRQasiIAiBMAcEgSJAmSBM0DSJYFTYOmwTQBkmVB06BpME0AAAAAAAAAAAAAJE2DpkHTIIoASdOgadA0iCIAAAAAAAAAAAAAkqZB06BpEEWApGnQNGgaRBEAAAAAAAAAAAAAzzQhihBFmCbAM02IIkQRpgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAGHAAAAgwoQwUGrIiAIgTAHA4imUBAIDjOJYFAACO41gWAABYliWKAABgWZooAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAYcAAACDChDBQashIAiAIAcCiKZQHHsSzgOJYFJMmyAJYF0DyApgFEEQAIAAAocAAACLBBU2JxgEJDVgIAUQAABsWxLE0TRZKkaZoniiRJ0zxPFGma53meacLzPM80IYqiaJoQRVE0TZimaaoqME1VFQAAUOAAABBgg6bE4gCFhqwEAEICAByKYlma5nmeJ4qmqZokSdM8TxRF0TRNU1VJkqZ5niiKommapqqyLE3zPFEURdNUVVWFpnmeKIqiaaqq6sLzPE8URdE0VdV14XmeJ4qiaJqq6roQRVE0TdNUTVV1XSCKpmmaqqqqrgtETxRNU1Vd13WB54miaaqqq7ouEE3TVFVVdV1ZBpimaaqq68oyQFVV1XVdV5YBqqqqruu6sgxQVdd1XVmWZQCu67qyLMsCAAAOHAAAAoygk4wqi7DRhAsPQKEhKwKAKAAAwBimFFPKMCYhpBAaxiSEFEImJaXSUqogpFJSKRWEVEoqJaOUUmopVRBSKamUCkIqJZVSAADYgQMA2IGFUGjISgAgDwCAMEYpxhhzTiKkFGPOOScRUoox55yTSjHmnHPOSSkZc8w556SUzjnnnHNSSuacc845KaVzzjnnnJRSSuecc05KKSWEzkEnpZTSOeecEwAAVOAAABBgo8jmBCNBhYasBABSAQAMjmNZmuZ5omialiRpmud5niiapiZJmuZ5nieKqsnzPE8URdE0VZXneZ4oiqJpqirXFUXTNE1VVV2yLIqmaZqq6rowTdNUVdd1XZimaaqq67oubFtVVdV1ZRm2raqq6rqyDFzXdWXZloEsu67s2rIAAPAEBwCgAhtWRzgpGgssNGQlAJABAEAYg5BCCCFlEEIKIYSUUggJAAAYcAAACDChDBQashIASAUAAIyx1lprrbXWQGettdZaa62AzFprrbXWWmuttdZaa6211lJrrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmstpZRSSimllFJKKaWUUkoppZRSSgUA+lU4APg/2LA6wknRWGChISsBgHAAAMAYpRhzDEIppVQIMeacdFRai7FCiDHnJKTUWmzFc85BKCGV1mIsnnMOQikpxVZjUSmEUlJKLbZYi0qho5JSSq3VWIwxqaTWWoutxmKMSSm01FqLMRYjbE2ptdhqq7EYY2sqLbQYY4zFCF9kbC2m2moNxggjWywt1VprMMYY3VuLpbaaizE++NpSLDHWXAAAd4MDAESCjTOsJJ0VjgYXGrISAAgJACAQUooxxhhzzjnnpFKMOeaccw5CCKFUijHGnHMOQgghlIwx5pxzEEIIIYRSSsaccxBCCCGEkFLqnHMQQgghhBBKKZ1zDkIIIYQQQimlgxBCCCGEEEoopaQUQgghhBBCCKmklEIIIYRSQighlZRSCCGEEEIpJaSUUgohhFJCCKGElFJKKYUQQgillJJSSimlEkoJJYQSUikppRRKCCGUUkpKKaVUSgmhhBJKKSWllFJKIYQQSikFAAAcOAAABBhBJxlVFmGjCRcegEJDVgIAZAAAkKKUUiktRYIipRikGEtGFXNQWoqocgxSzalSziDmJJaIMYSUk1Qy5hRCDELqHHVMKQYtlRhCxhik2HJLoXMOAAAAQQCAgJAAAAMEBTMAwOAA4XMQdAIERxsAgCBEZohEw0JweFAJEBFTAUBigkIuAFRYXKRdXECXAS7o4q4DIQQhCEEsDqCABByccMMTb3jCDU7QKSp1IAAAAAAADADwAACQXAAREdHMYWRobHB0eHyAhIiMkAgAAAAAABcAfAAAJCVAREQ0cxgZGhscHR4fICEiIyQBAIAAAgAAAAAggAAEBAQAAAAAAAIAAAAEBB9DtnUBAAAAAAAEPueBAKOFggAAgACjzoEAA4BwBwCdASqwAJAAAEcIhYWIhYSIAgIABhwJ7kPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99YAD+/6tQgKOFggADgAqjhYIAD4AOo4WCACSADqOZgQArADECAAEQEAAYABhYL/QACIBDmAYAAKOFggA6gA6jhYIAT4AOo5mBAFMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAGSADqOFggB6gA6jmYEAewAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAj4AOo5mBAKMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAKSADqOFggC6gA6jmYEAywAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAz4AOo4WCAOSADqOZgQDzADECAAEQEAAYABhYL/QACIBDmAYAAKOFggD6gA6jhYIBD4AOo5iBARsAEQIAARAQFGAAYWC/0AAiAQ5gGACjhYIBJIAOo4WCATqADqOZgQFDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggFPgA6jhYIBZIAOo5mBAWsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAXqADqOFggGPgA6jmYEBkwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIBpIAOo4WCAbqADqOZgQG7ADECAAEQEAAYABhYL/QACIBDmAYAAKOFggHPgA6jmYEB4wAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIB5IAOo4WCAfqADqOZgQILADECAAEQEAAYABhYL/QACIBDmAYAAKOFggIPgA6jhYICJIAOo5mBAjMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAjqADqOFggJPgA6jmYECWwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYICZIAOo4WCAnqADqOZgQKDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggKPgA6jhYICpIAOo5mBAqsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCArqADqOFggLPgA6jmIEC0wARAgABEBAUYABhYL/QACIBDmAYAKOFggLkgA6jhYIC+oAOo5mBAvsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAw+ADqOZgQMjADECAAEQEAAYABhYL/QACIBDmAYAAKOFggMkgA6jhYIDOoAOo5mBA0sAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA0+ADqOFggNkgA6jmYEDcwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIDeoAOo4WCA4+ADqOZgQObADECAAEQEAAYABhYL/QACIBDmAYAAKOFggOkgA6jhYIDuoAOo5mBA8MAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA8+ADqOFggPkgA6jhYID+oAOo4WCBA+ADhxTu2sBAAAAAAAAEbuPs4EDt4r3gQHxghEr8IEK",mp4:"data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"}});var CTe=ad((jAi,wTe)=>{var{webm:Zst,mp4:Qst}=bTe(),Hie=()=>typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,Wie=()=>"wakeLock"in navigator,qie=class{constructor(){if(this.enabled=!1,Wie()){this._wakeLock=null;let i=()=>{this._wakeLock!==null&&document.visibilityState==="visible"&&this.enable()};document.addEventListener("visibilitychange",i),document.addEventListener("fullscreenchange",i)}else Hie()?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",Zst),this._addSourceToVideo(this.noSleepVideo,"mp4",Qst),this.noSleepVideo.addEventListener("loadedmetadata",()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())})}))}_addSourceToVideo(i,e,n){var o=document.createElement("source");o.src=n,o.type=`video/${e}`,i.appendChild(o)}get isEnabled(){return this.enabled}enable(){return Wie()?navigator.wakeLock.request("screen").then(i=>{this._wakeLock=i,this.enabled=!0,console.log("Wake Lock active."),this._wakeLock.addEventListener("release",()=>{console.log("Wake Lock released.")})}).catch(i=>{throw this.enabled=!1,console.error(`${i.name}, ${i.message}`),i}):Hie()?(this.disable(),console.warn(`
        NoSleep enabled for older iOS devices. This can interrupt
        active or long-running network requests from completing successfully.
        See https://github.com/richtr/NoSleep.js/issues/15 for more details.
      `),this.noSleepTimer=window.setInterval(()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))},15e3),this.enabled=!0,Promise.resolve()):this.noSleepVideo.play().then(e=>(this.enabled=!0,e)).catch(e=>{throw this.enabled=!1,e})}disable(){Wie()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):Hie()?this.noSleepTimer&&(console.warn(`
          NoSleep now disabled for older iOS devices.
        `),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause(),this.enabled=!1}};wTe.exports=qie});var STe=ad((xTe,b$)=>{"use strict";(function(r){if(typeof i!="function"){var i=function(_){return _};i.nonNative=!0}let e=i("plaintext"),n=i("html"),o=i("comment"),s=/<(\w*)>/g,l=/<\/?([^\s\/>]+)/;function h(_,w,A){_=_||"",w=w||[],A=A||"";let k=m(w,A);return f(_,k)}function p(_,w){_=_||[],w=w||"";let A=m(_,w);return function(R){return f(R||"",A)}}h.init_streaming_mode=p;function m(_,w){return _=g(_),{allowable_tags:_,tag_replacement:w,state:e,tag_buffer:"",depth:0,in_quote_char:""}}function f(_,w){if(typeof _!="string")throw new TypeError("'html' parameter must be a string");let A=w.allowable_tags,k=w.tag_replacement,R=w.state,$=w.tag_buffer,H=w.depth,oe=w.in_quote_char,se="";for(let ge=0,ue=_.length;ge<ue;ge++){let pe=_[ge];if(R===e)switch(pe){case"<":R=n,$+=pe;break;default:se+=pe;break}else if(R===n)switch(pe){case"<":if(oe)break;H++;break;case">":if(oe)break;if(H){H--;break}oe="",R=e,$+=">",A.has(y($))?se+=$:se+=k,$="";break;case'"':case"'":pe===oe?oe="":oe=oe||pe,$+=pe;break;case"-":$==="<!-"&&(R=o),$+=pe;break;case" ":case`
`:if($==="<"){R=e,se+="< ",$="";break}$+=pe;break;default:$+=pe;break}else if(R===o)switch(pe){case">":$.slice(-2)=="--"&&(R=e),$="";break;default:$+=pe;break}}return w.state=R,w.tag_buffer=$,w.depth=H,w.in_quote_char=oe,se}function g(_){let w=new Set;if(typeof _=="string"){let A;for(;A=s.exec(_);)w.add(A[1])}else!i.nonNative&&typeof _[i.iterator]=="function"?w=new Set(_):typeof _.forEach=="function"&&_.forEach(w.add,w);return w}function y(_){let w=l.exec(_);return w?w[1].toLowerCase():null}typeof define=="function"&&define.amd?define(function(){return h}):typeof b$=="object"&&b$.exports?b$.exports=h:r.striptags=h})(xTe)});var RTe=ad((exports,module)=>{(function _f(self){"use strict";try{module&&(self=module)}catch(r){}self._factory=_f;var t;function u(r){return typeof r<"u"?r:!0}function aa(r){let i=Array(r);for(let e=0;e<r;e++)i[e]=v();return i}function v(){return Object.create(null)}function ba(r,i){return i.length-r.length}function x(r){return typeof r=="string"}function C(r){return typeof r=="object"}function D(r){return typeof r=="function"}function ca(r,i){var e=da;if(r&&(i&&(r=E(r,i)),this.H&&(r=E(r,this.H)),this.J&&1<r.length&&(r=E(r,this.J)),e||e==="")){if(r=r.split(e),this.filter){i=this.filter,e=r.length;let n=[];for(let o=0,s=0;o<e;o++){let l=r[o];l&&!i[l]&&(n[s++]=l)}r=n}return r}return r}let da=/[\p{Z}\p{S}\p{P}\p{C}]+/u,ea=/[\u0300-\u036f]/g;function fa(r,i){let e=Object.keys(r),n=e.length,o=[],s="",l=0;for(let h=0,p,m;h<n;h++)p=e[h],(m=r[p])?(o[l++]=F(i?"(?!\\b)"+p+"(\\b|_)":p),o[l++]=m):s+=(s?"|":"")+p;return s&&(o[l++]=F(i?"(?!\\b)("+s+")(\\b|_)":"("+s+")"),o[l]=""),o}function E(r,i){for(let e=0,n=i.length;e<n&&(r=r.replace(i[e],i[e+1]),r);e+=2);return r}function F(r){return new RegExp(r,"g")}function ha(r){let i="",e="";for(let n=0,o=r.length,s;n<o;n++)(s=r[n])!==e&&(i+=e=s);return i}var ja={encode:ia,F:!1,G:""};function ia(r){return ca.call(this,(""+r).toLowerCase(),!1)}let ka={},G={};function la(r){I(r,"add"),I(r,"append"),I(r,"search"),I(r,"update"),I(r,"remove")}function I(r,i){r[i+"Async"]=function(){let e=this,n=arguments;var o=n[n.length-1];let s;return D(o)&&(s=o,delete n[n.length-1]),o=new Promise(function(l){setTimeout(function(){e.async=!0;let h=e[i].apply(e,n);e.async=!1,l(h)})}),s?(o.then(s),this):o}}function ma(r,i,e,n){let o=r.length,s=[],l,h,p=0;n&&(n=[]);for(let m=o-1;0<=m;m--){let f=r[m],g=f.length,y=v(),_=!l;for(let w=0;w<g;w++){let A=f[w],k=A.length;if(k)for(let R=0,$,H;R<k;R++)if(H=A[R],l){if(l[H]){if(!m){if(e)e--;else if(s[p++]=H,p===i)return s}(m||n)&&(y[H]=1),_=!0}if(n&&(h[H]=($=h[H])?++$:$=1,$<o)){let oe=n[$-2]||(n[$-2]=[]);oe[oe.length]=H}}else y[H]=1}if(n)l||(h=y);else if(!_)return[];l=y}if(n)for(let m=n.length-1,f,g;0<=m;m--){f=n[m],g=f.length;for(let y=0,_;y<g;y++)if(_=f[y],!l[_]){if(e)e--;else if(s[p++]=_,p===i)return s;l[_]=1}}return s}function na(r,i){let e=v(),n=v(),o=[];for(let s=0;s<r.length;s++)e[r[s]]=1;for(let s=0,l;s<i.length;s++){l=i[s];for(let h=0,p;h<l.length;h++)p=l[h],e[p]&&!n[p]&&(n[p]=1,o[o.length]=p)}return o}function J(r){this.l=r!==!0&&r,this.cache=v(),this.h=[]}function oa(r,i,e){C(r)&&(r=r.query);let n=this.cache.get(r);return n||(n=this.search(r,i,e),this.cache.set(r,n)),n}J.prototype.set=function(r,i){if(!this.cache[r]){var e=this.h.length;for(e===this.l?delete this.cache[this.h[e-1]]:e++,--e;0<e;e--)this.h[e]=this.h[e-1];this.h[0]=r}this.cache[r]=i},J.prototype.get=function(r){let i=this.cache[r];if(this.l&&i&&(r=this.h.indexOf(r))){let e=this.h[r-1];this.h[r-1]=this.h[r],this.h[r]=e}return i};let qa={memory:{charset:"latin:extra",D:3,B:4,m:!1},performance:{D:3,B:3,s:!1,context:{depth:2,D:1}},match:{charset:"latin:extra",G:"reverse"},score:{charset:"latin:advanced",D:20,B:3,context:{depth:3,D:9}},default:{}};function ra(r,i,e,n,o,s){setTimeout(function(){let l=r(e,JSON.stringify(s));l&&l.then?l.then(function(){i.export(r,i,e,n,o+1)}):i.export(r,i,e,n,o+1)})}function K(r,i){if(!(this instanceof K))return new K(r);var e;if(r){x(r)?r=qa[r]:(e=r.preset)&&(r=Object.assign({},e[e],r)),e=r.charset;var n=r.lang;x(e)&&(e.indexOf(":")===-1&&(e+=":default"),e=G[e]),x(n)&&(n=ka[n])}else r={};let o,s,l=r.context||{};if(this.encode=r.encode||e&&e.encode||ia,this.register=i||v(),this.D=o=r.resolution||9,this.G=i=e&&e.G||r.tokenize||"strict",this.depth=i==="strict"&&l.depth,this.l=u(l.bidirectional),this.s=s=u(r.optimize),this.m=u(r.fastupdate),this.B=r.minlength||1,this.C=r.boost,this.map=s?aa(o):v(),this.A=o=l.resolution||1,this.h=s?aa(o):v(),this.F=e&&e.F||r.rtl,this.H=(i=r.matcher||n&&n.H)&&fa(i,!1),this.J=(i=r.stemmer||n&&n.J)&&fa(i,!0),e=i=r.filter||n&&n.filter){e=i,n=v();for(let h=0,p=e.length;h<p;h++)n[e[h]]=1;e=n}this.filter=e,this.cache=(i=r.cache)&&new J(i)}t=K.prototype,t.append=function(r,i){return this.add(r,i,!0)},t.add=function(r,i,e,n){if(i&&(r||r===0)){if(!n&&!e&&this.register[r])return this.update(r,i);if(i=this.encode(i),n=i.length){let m=v(),f=v(),g=this.depth,y=this.D;for(let _=0;_<n;_++){let w=i[this.F?n-1-_:_];var o=w.length;if(w&&o>=this.B&&(g||!f[w])){var s=L(y,n,_),l="";switch(this.G){case"full":if(3<o){for(s=0;s<o;s++)for(var h=o;h>s;h--)if(h-s>=this.B){var p=L(y,n,_,o,s);l=w.substring(s,h),M(this,f,l,p,r,e)}break}case"reverse":if(2<o){for(h=o-1;0<h;h--)l=w[h]+l,l.length>=this.B&&M(this,f,l,L(y,n,_,o,h),r,e);l=""}case"forward":if(1<o){for(h=0;h<o;h++)l+=w[h],l.length>=this.B&&M(this,f,l,s,r,e);break}default:if(this.C&&(s=Math.min(s/this.C(i,w,_)|0,y-1)),M(this,f,w,s,r,e),g&&1<n&&_<n-1){for(o=v(),l=this.A,s=w,h=Math.min(g+1,n-_),o[s]=1,p=1;p<h;p++)if((w=i[this.F?n-1-_-p:_+p])&&w.length>=this.B&&!o[w]){o[w]=1;let A=this.l&&w>s;M(this,m,A?s:w,L(l+(n/2>l?0:1),n,_,h-1,p-1),r,e,A?w:s)}}}}}this.m||(this.register[r]=1)}}return this};function L(r,i,e,n,o){return e&&1<r?i+(n||0)<=r?e+(o||0):(r-1)/(i+(n||0))*(e+(o||0))+1|0:0}function M(r,i,e,n,o,s,l){let h=l?r.h:r.map;(!i[e]||l&&!i[e][l])&&(r.s&&(h=h[n]),l?(i=i[e]||(i[e]=v()),i[l]=1,h=h[l]||(h[l]=v())):i[e]=1,h=h[e]||(h[e]=[]),r.s||(h=h[n]||(h[n]=[])),s&&h.indexOf(o)!==-1||(h[h.length]=o,r.m&&(r=r.register[o]||(r.register[o]=[]),r[r.length]=h)))}t.search=function(r,i,e){e||(!i&&C(r)?(e=r,r=e.query):C(i)&&(e=i));let n=[],o,s,l=0;if(e){i=e.limit,l=e.offset||0;var h=e.context;s=e.suggest}if(r&&(r=this.encode(r),o=r.length,1<o)){e=v();var p=[];for(let f=0,g=0,y;f<o;f++)if((y=r[f])&&y.length>=this.B&&!e[y])if(this.s||s||this.map[y])p[g++]=y,e[y]=1;else return n;r=p,o=r.length}if(!o)return n;i||(i=100),h=this.depth&&1<o&&h!==!1,e=0;let m;h?(m=r[0],e=1):1<o&&r.sort(ba);for(let f,g;e<o;e++){if(g=r[e],h?(f=sa(this,n,s,i,l,o===2,g,m),s&&f===!1&&n.length||(m=g)):f=sa(this,n,s,i,l,o===1,g),f)return f;if(s&&e===o-1){if(p=n.length,!p){if(h){h=0,e=-1;continue}return n}if(p===1)return ta(n[0],i,l)}}return ma(n,i,l,s)};function sa(r,i,e,n,o,s,l,h){let p=[],m=h?r.h:r.map;if(r.s||(m=ua(m,l,h,r.l)),m){let f=0,g=Math.min(m.length,h?r.A:r.D);for(let y=0,_=0,w,A;y<g&&!((w=m[y])&&(r.s&&(w=ua(w,l,h,r.l)),o&&w&&s&&(A=w.length,A<=o?(o-=A,w=null):(w=w.slice(o),o=0)),w&&(p[f++]=w,s&&(_+=w.length,_>=n))));y++);if(f){if(s)return ta(p,n,0);i[i.length]=p;return}}return!e&&p}function ta(r,i,e){return r=r.length===1?r[0]:[].concat.apply([],r),e||r.length>i?r.slice(e,e+i):r}function ua(r,i,e,n){return e?(n=n&&i>e,r=(r=r[n?i:e])&&r[n?e:i]):r=r[i],r}t.contain=function(r){return!!this.register[r]},t.update=function(r,i){return this.remove(r).add(r,i)},t.remove=function(r,i){let e=this.register[r];if(e){if(this.m)for(let n=0,o;n<e.length;n++)o=e[n],o.splice(o.indexOf(r),1);else N(this.map,r,this.D,this.s),this.depth&&N(this.h,r,this.A,this.s);if(i||delete this.register[r],this.cache){i=this.cache;for(let n=0,o,s;n<i.h.length;n++)s=i.h[n],o=i.cache[s],o.indexOf(r)!==-1&&(i.h.splice(n--,1),delete i.cache[s])}}return this};function N(r,i,e,n,o){let s=0;if(r.constructor===Array)if(o)i=r.indexOf(i),i!==-1?1<r.length&&(r.splice(i,1),s++):s++;else{o=Math.min(r.length,e);for(let l=0,h;l<o;l++)(h=r[l])&&(s=N(h,i,e,n,o),n||s||delete r[l])}else for(let l in r)(s=N(r[l],i,e,n,o))||delete r[l];return s}t.searchCache=oa,t.export=function(r,i,e,n,o){let s,l;switch(o||(o=0)){case 0:if(s="reg",this.m){l=v();for(let h in this.register)l[h]=1}else l=this.register;break;case 1:s="cfg",l={doc:0,opt:this.s?1:0};break;case 2:s="map",l=this.map;break;case 3:s="ctx",l=this.h;break;default:return}return ra(r,i||this,e?e+"."+s:s,n,o,l),!0},t.import=function(r,i){if(i)switch(x(i)&&(i=JSON.parse(i)),r){case"cfg":this.s=!!i.opt;break;case"reg":this.m=!1,this.register=i;break;case"map":this.map=i;break;case"ctx":this.h=i}},la(K.prototype);function va(r){r=r.data;var i=self._index;let e=r.args;var n=r.task;switch(n){case"init":n=r.options||{},r=r.factory,i=n.encode,n.cache=!1,i&&i.indexOf("function")===0&&(n.encode=Function("return "+i)()),r?(Function("return "+r)()(self),self._index=new self.FlexSearch.Index(n),delete self.FlexSearch):self._index=new K(n);break;default:r=r.id,i=i[n].apply(i,e),postMessage(n==="search"?{id:r,msg:i}:{id:r})}}let wa=0;function O(r){if(!(this instanceof O))return new O(r);var i;r?D(i=r.encode)&&(r.encode=i.toString()):r={},(i=(self||window)._factory)&&(i=i.toString());let e=self.exports,n=this;this.o=xa(i,e,r.worker),this.h=v(),this.o&&(e?this.o.on("message",function(o){n.h[o.id](o.msg),delete n.h[o.id]}):this.o.onmessage=function(o){o=o.data,n.h[o.id](o.msg),delete n.h[o.id]},this.o.postMessage({task:"init",factory:i,options:r}))}P("add"),P("append"),P("search"),P("update"),P("remove");function P(r){O.prototype[r]=O.prototype[r+"Async"]=function(){let i=this,e=[].slice.call(arguments);var n=e[e.length-1];let o;return D(n)&&(o=n,e.splice(e.length-1,1)),n=new Promise(function(s){setTimeout(function(){i.h[++wa]=s,i.o.postMessage({task:r,id:wa,args:e})})}),o?(n.then(o),this):n}}function xa(a,b,c){let d;try{d=b?eval('new (require("worker_threads")["Worker"])("../dist/node/node.js")'):a?new Worker(URL.createObjectURL(new Blob(["onmessage="+va.toString()],{type:"text/javascript"}))):new Worker(x(c)?c:"worker/worker.js",{type:"module"})}catch(r){}return d}function Q(r){if(!(this instanceof Q))return new Q(r);var i=r.document||r.doc||r,e;this.K=[],this.h=[],this.A=[],this.register=v(),this.key=(e=i.key||i.id)&&S(e,this.A)||"id",this.m=u(r.fastupdate),this.C=(e=i.store)&&e!==!0&&[],this.store=e&&v(),this.I=(e=i.tag)&&S(e,this.A),this.l=e&&v(),this.cache=(e=r.cache)&&new J(e),r.cache=!1,this.o=r.worker,this.async=!1,e=v();let n=i.index||i.field||i;x(n)&&(n=[n]);for(let o=0,s,l;o<n.length;o++)s=n[o],x(s)||(l=s,s=s.field),l=C(l)?Object.assign({},r,l):r,this.o&&(e[s]=new O(l),e[s].o||(this.o=!1)),this.o||(e[s]=new K(l,this.register)),this.K[o]=S(s,this.A),this.h[o]=s;if(this.C)for(r=i.store,x(r)&&(r=[r]),i=0;i<r.length;i++)this.C[i]=S(r[i],this.A);this.index=e}function S(r,i){let e=r.split(":"),n=0;for(let o=0;o<e.length;o++)r=e[o],0<=r.indexOf("[]")&&(r=r.substring(0,r.length-2))&&(i[n]=!0),r&&(e[n++]=r);return n<e.length&&(e.length=n),1<n?e:e[0]}function T(r,i){if(x(i))r=r[i];else for(let e=0;r&&e<i.length;e++)r=r[i[e]];return r}function U(r,i,e,n,o){if(r=r[o],n===e.length-1)i[o]=r;else if(r)if(r.constructor===Array)for(i=i[o]=Array(r.length),o=0;o<r.length;o++)U(r,i,e,n,o);else i=i[o]||(i[o]=v()),o=e[++n],U(r,i,e,n,o)}function V(r,i,e,n,o,s,l,h){if(r=r[l])if(n===i.length-1){if(r.constructor===Array){if(e[n]){for(i=0;i<r.length;i++)o.add(s,r[i],!0,!0);return}r=r.join(" ")}o.add(s,r,h,!0)}else if(r.constructor===Array)for(l=0;l<r.length;l++)V(r,i,e,n,o,s,l,h);else l=i[++n],V(r,i,e,n,o,s,l,h)}t=Q.prototype,t.add=function(r,i,e){if(C(r)&&(i=r,r=T(i,this.key)),i&&(r||r===0)){if(!e&&this.register[r])return this.update(r,i);for(let n=0,o,s;n<this.h.length;n++)s=this.h[n],o=this.K[n],x(o)&&(o=[o]),V(i,o,this.A,0,this.index[s],r,o[0],e);if(this.I){let n=T(i,this.I),o=v();x(n)&&(n=[n]);for(let s=0,l,h;s<n.length;s++)if(l=n[s],!o[l]&&(o[l]=1,h=this.l[l]||(this.l[l]=[]),!e||h.indexOf(r)===-1)&&(h[h.length]=r,this.m)){let p=this.register[r]||(this.register[r]=[]);p[p.length]=h}}if(this.store&&(!e||!this.store[r])){let n;if(this.C){n=v();for(let o=0,s;o<this.C.length;o++)s=this.C[o],x(s)?n[s]=i[s]:U(i,n,s,0,s[0])}this.store[r]=n||i}}return this},t.append=function(r,i){return this.add(r,i,!0)},t.update=function(r,i){return this.remove(r).add(r,i)},t.remove=function(r){if(C(r)&&(r=T(r,this.key)),this.register[r]){for(var i=0;i<this.h.length&&(this.index[this.h[i]].remove(r,!this.o),!this.m);i++);if(this.I&&!this.m)for(let e in this.l){i=this.l[e];let n=i.indexOf(r);n!==-1&&(1<i.length?i.splice(n,1):delete this.l[e])}this.store&&delete this.store[r],delete this.register[r]}return this},t.search=function(r,i,e,n){e||(!i&&C(r)?(e=r,r=e.query):C(i)&&(e=i,i=0));let o=[],s=[],l,h,p,m,f,g,y=0;if(e)if(e.constructor===Array)p=e,e=null;else{if(p=(l=e.pluck)||e.index||e.field,m=e.tag,h=this.store&&e.enrich,f=e.bool==="and",i=e.limit||100,g=e.offset||0,m&&(x(m)&&(m=[m]),!r)){for(let w=0,A;w<m.length;w++)(A=ya.call(this,m[w],i,g,h))&&(o[o.length]=A,y++);return y?o:[]}x(p)&&(p=[p])}p||(p=this.h),f=f&&(1<p.length||m&&1<m.length);let _=!n&&(this.o||this.async)&&[];for(let w=0,A,k,R;w<p.length;w++){let $;if(k=p[w],x(k)||($=k,k=k.field),_)_[w]=this.index[k].searchAsync(r,i,$||e);else{if(n?A=n[w]:A=this.index[k].search(r,i,$||e),R=A&&A.length,m&&R){let H=[],oe=0;f&&(H[0]=[A]);for(let se=0,ge,ue;se<m.length;se++)ge=m[se],(R=(ue=this.l[ge])&&ue.length)&&(oe++,H[H.length]=f?[ue]:ue);oe&&(A=f?ma(H,i||100,g||0):na(A,H),R=A.length)}if(R)s[y]=k,o[y++]=A;else if(f)return[]}}if(_){let w=this;return new Promise(function(A){Promise.all(_).then(function(k){A(w.search(r,i,e,k))})})}if(!y)return[];if(l&&(!h||!this.store))return o[0];for(let w=0,A;w<s.length;w++){if(A=o[w],A.length&&h&&(A=za.call(this,A)),l)return A;o[w]={field:s[w],result:A}}return o};function ya(r,i,e,n){let o=this.l[r],s=o&&o.length-e;if(s&&0<s)return(s>i||e)&&(o=o.slice(e,e+i)),n&&(o=za.call(this,o)),{tag:r,result:o}}function za(r){let i=Array(r.length);for(let e=0,n;e<r.length;e++)n=r[e],i[e]={id:n,doc:this.store[n]};return i}t.contain=function(r){return!!this.register[r]},t.get=function(r){return this.store[r]},t.set=function(r,i){return this.store[r]=i,this},t.searchCache=oa,t.export=function(r,i,e,n,o){if(o||(o=0),n||(n=0),n<this.h.length){let s=this.h[n],l=this.index[s];i=this,setTimeout(function(){l.export(r,i,o?s.replace(":","-"):"",n,o++)||(n++,o=1,i.export(r,i,s,n,o))})}else{let s;switch(o){case 1:e="tag",s=this.l;break;case 2:e="store",s=this.store;break;default:return}ra(r,this,e,n,o,s)}},t.import=function(r,i){if(i)switch(x(i)&&(i=JSON.parse(i)),r){case"tag":this.l=i;break;case"reg":this.m=!1,this.register=i;for(let n=0,o;n<this.h.length;n++)o=this.index[this.h[n]],o.register=i,o.m=!1;break;case"store":this.store=i;break;default:r=r.split(".");let e=r[0];r=r[1],e&&r&&this.index[e].import(r,i)}},la(Q.prototype);var Ba={encode:Aa,F:!1,G:""};let Ca=[F("[\xE0\xE1\xE2\xE3\xE4\xE5]"),"a",F("[\xE8\xE9\xEA\xEB]"),"e",F("[\xEC\xED\xEE\xEF]"),"i",F("[\xF2\xF3\xF4\xF5\xF6\u0151]"),"o",F("[\xF9\xFA\xFB\xFC\u0171]"),"u",F("[\xFD\u0177\xFF]"),"y",F("\xF1"),"n",F("[\xE7c]"),"k",F("\xDF"),"s",F(" & ")," and "];function Aa(r){var i=r;return i.normalize&&(i=i.normalize("NFD").replace(ea,"")),ca.call(this,i.toLowerCase(),!r.normalize&&Ca)}var Ea={encode:Da,F:!1,G:"strict"};let Fa=/[^a-z0-9]+/,Ga={b:"p",v:"f",w:"f",z:"s",x:"s",\u00DF:"s",d:"t",n:"m",c:"k",g:"k",j:"k",q:"k",i:"e",y:"e",u:"o"};function Da(r){r=Aa.call(this,r).join(" ");let i=[];if(r){let e=r.split(Fa),n=e.length;for(let o=0,s,l=0;o<n;o++)if((r=e[o])&&(!this.filter||!this.filter[r])){s=r[0];let h=Ga[s]||s,p=h;for(let m=1;m<r.length;m++){s=r[m];let f=Ga[s]||s;f&&f!==p&&(h+=f,p=f)}i[l++]=h}}return i}var Ia={encode:Ha,F:!1,G:""};let Ja=[F("ae"),"a",F("oe"),"o",F("sh"),"s",F("th"),"t",F("ph"),"f",F("pf"),"f",F("(?![aeo])h(?![aeo])"),"",F("(?!^[aeo])h(?!^[aeo])"),""];function Ha(r,i){return r&&(r=Da.call(this,r).join(" "),2<r.length&&(r=E(r,Ja)),i||(1<r.length&&(r=ha(r)),r&&(r=r.split(" ")))),r}var La={encode:Ka,F:!1,G:""};let Ma=F("(?!\\b)[aeo]");function Ka(r){return r&&(r=Ha.call(this,r,!0),1<r.length&&(r=r.replace(Ma,"")),1<r.length&&(r=ha(r)),r&&(r=r.split(" "))),r}G["latin:default"]=ja,G["latin:simple"]=Ba,G["latin:balance"]=Ea,G["latin:advanced"]=Ia,G["latin:extra"]=La;let W=self,Y,Z={Index:K,Document:Q,Worker:O,registerCharset:function(r,i){G[r]=i},registerLanguage:function(r,i){ka[r]=i}};(Y=W.define)&&Y.amd?Y([],function(){return Z}):W.exports?W.exports=Z:W.FlexSearch=Z})(exports)});var tne=ad(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.earthRadius=63710088e-1;xr.factors={centimeters:xr.earthRadius*100,centimetres:xr.earthRadius*100,degrees:xr.earthRadius/111325,feet:xr.earthRadius*3.28084,inches:xr.earthRadius*39.37,kilometers:xr.earthRadius/1e3,kilometres:xr.earthRadius/1e3,meters:xr.earthRadius,metres:xr.earthRadius,miles:xr.earthRadius/1609.344,millimeters:xr.earthRadius*1e3,millimetres:xr.earthRadius*1e3,nauticalmiles:xr.earthRadius/1852,radians:1,yards:xr.earthRadius*1.0936};xr.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/xr.earthRadius,yards:1.0936133};xr.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function eC(r,i,e){e===void 0&&(e={});var n={type:"Feature"};return(e.id===0||e.id)&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.properties=i||{},n.geometry=r,n}xr.feature=eC;function fat(r,i,e){switch(e===void 0&&(e={}),r){case"Point":return Qie(i).geometry;case"LineString":return Jie(i).geometry;case"Polygon":return Xie(i).geometry;case"MultiPoint":return LTe(i).geometry;case"MultiLineString":return FTe(i).geometry;case"MultiPolygon":return NTe(i).geometry;default:throw new Error(r+" is invalid")}}xr.geometry=fat;function Qie(r,i,e){if(e===void 0&&(e={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!I$(r[0])||!I$(r[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:r};return eC(n,i,e)}xr.point=Qie;function gat(r,i,e){return e===void 0&&(e={}),T$(r.map(function(n){return Qie(n,i)}),e)}xr.points=gat;function Xie(r,i,e){e===void 0&&(e={});for(var n=0,o=r;n<o.length;n++){var s=o[n];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<s[s.length-1].length;l++)if(s[s.length-1][l]!==s[0][l])throw new Error("First and last Position are not equivalent.")}var h={type:"Polygon",coordinates:r};return eC(h,i,e)}xr.polygon=Xie;function _at(r,i,e){return e===void 0&&(e={}),T$(r.map(function(n){return Xie(n,i)}),e)}xr.polygons=_at;function Jie(r,i,e){if(e===void 0&&(e={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:r};return eC(n,i,e)}xr.lineString=Jie;function yat(r,i,e){return e===void 0&&(e={}),T$(r.map(function(n){return Jie(n,i)}),e)}xr.lineStrings=yat;function T$(r,i){i===void 0&&(i={});var e={type:"FeatureCollection"};return i.id&&(e.id=i.id),i.bbox&&(e.bbox=i.bbox),e.features=r,e}xr.featureCollection=T$;function FTe(r,i,e){e===void 0&&(e={});var n={type:"MultiLineString",coordinates:r};return eC(n,i,e)}xr.multiLineString=FTe;function LTe(r,i,e){e===void 0&&(e={});var n={type:"MultiPoint",coordinates:r};return eC(n,i,e)}xr.multiPoint=LTe;function NTe(r,i,e){e===void 0&&(e={});var n={type:"MultiPolygon",coordinates:r};return eC(n,i,e)}xr.multiPolygon=NTe;function vat(r,i,e){e===void 0&&(e={});var n={type:"GeometryCollection",geometries:r};return eC(n,i,e)}xr.geometryCollection=vat;function bat(r,i){if(i===void 0&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var e=Math.pow(10,i||0);return Math.round(r*e)/e}xr.round=bat;function BTe(r,i){i===void 0&&(i="kilometers");var e=xr.factors[i];if(!e)throw new Error(i+" units is invalid");return r*e}xr.radiansToLength=BTe;function ene(r,i){i===void 0&&(i="kilometers");var e=xr.factors[i];if(!e)throw new Error(i+" units is invalid");return r/e}xr.lengthToRadians=ene;function wat(r,i){return jTe(ene(r,i))}xr.lengthToDegrees=wat;function Cat(r){var i=r%360;return i<0&&(i+=360),i}xr.bearingToAzimuth=Cat;function jTe(r){var i=r%(2*Math.PI);return i*180/Math.PI}xr.radiansToDegrees=jTe;function xat(r){var i=r%360;return i*Math.PI/180}xr.degreesToRadians=xat;function Sat(r,i,e){if(i===void 0&&(i="kilometers"),e===void 0&&(e="kilometers"),!(r>=0))throw new Error("length must be a positive number");return BTe(ene(r,i),e)}xr.convertLength=Sat;function Iat(r,i,e){if(i===void 0&&(i="meters"),e===void 0&&(e="kilometers"),!(r>=0))throw new Error("area must be a positive number");var n=xr.areaFactors[i];if(!n)throw new Error("invalid original units");var o=xr.areaFactors[e];if(!o)throw new Error("invalid final units");return r/n*o}xr.convertArea=Iat;function I$(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}xr.isNumber=I$;function Tat(r){return!!r&&r.constructor===Object}xr.isObject=Tat;function Aat(r){if(!r)throw new Error("bbox is required");if(!Array.isArray(r))throw new Error("bbox must be an Array");if(r.length!==4&&r.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");r.forEach(function(i){if(!I$(i))throw new Error("bbox must only contain numbers")})}xr.validateBBox=Aat;function Eat(r){if(!r)throw new Error("id is required");if(["string","number"].indexOf(typeof r)===-1)throw new Error("id must be a number or a string")}xr.validateId=Eat});var nne=ad(kd=>{"use strict";Object.defineProperty(kd,"__esModule",{value:!0});var Ih=tne();function BF(r,i,e){if(r!==null)for(var n,o,s,l,h,p,m,f=0,g=0,y,_=r.type,w=_==="FeatureCollection",A=_==="Feature",k=w?r.features.length:1,R=0;R<k;R++){m=w?r.features[R].geometry:A?r.geometry:r,y=m?m.type==="GeometryCollection":!1,h=y?m.geometries.length:1;for(var $=0;$<h;$++){var H=0,oe=0;if(l=y?m.geometries[$]:m,l!==null){p=l.coordinates;var se=l.type;switch(f=e&&(se==="Polygon"||se==="MultiPolygon")?1:0,se){case null:break;case"Point":if(i(p,g,R,H,oe)===!1)return!1;g++,H++;break;case"LineString":case"MultiPoint":for(n=0;n<p.length;n++){if(i(p[n],g,R,H,oe)===!1)return!1;g++,se==="MultiPoint"&&H++}se==="LineString"&&H++;break;case"Polygon":case"MultiLineString":for(n=0;n<p.length;n++){for(o=0;o<p[n].length-f;o++){if(i(p[n][o],g,R,H,oe)===!1)return!1;g++}se==="MultiLineString"&&H++,se==="Polygon"&&oe++}se==="Polygon"&&H++;break;case"MultiPolygon":for(n=0;n<p.length;n++){for(oe=0,o=0;o<p[n].length;o++){for(s=0;s<p[n][o].length-f;s++){if(i(p[n][o][s],g,R,H,oe)===!1)return!1;g++}oe++}H++}break;case"GeometryCollection":for(n=0;n<l.geometries.length;n++)if(BF(l.geometries[n],i,e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Mat(r,i,e,n){var o=e;return BF(r,function(s,l,h,p,m){l===0&&e===void 0?o=s:o=i(o,s,l,h,p,m)},n),o}function VTe(r,i){var e;switch(r.type){case"FeatureCollection":for(e=0;e<r.features.length&&i(r.features[e].properties,e)!==!1;e++);break;case"Feature":i(r.properties,0);break}}function Dat(r,i,e){var n=e;return VTe(r,function(o,s){s===0&&e===void 0?n=o:n=i(n,o,s)}),n}function $Te(r,i){if(r.type==="Feature")i(r,0);else if(r.type==="FeatureCollection")for(var e=0;e<r.features.length&&i(r.features[e],e)!==!1;e++);}function kat(r,i,e){var n=e;return $Te(r,function(o,s){s===0&&e===void 0?n=o:n=i(n,o,s)}),n}function Oat(r){var i=[];return BF(r,function(e){i.push(e)}),i}function ine(r,i){var e,n,o,s,l,h,p,m,f,g,y=0,_=r.type==="FeatureCollection",w=r.type==="Feature",A=_?r.features.length:1;for(e=0;e<A;e++){for(h=_?r.features[e].geometry:w?r.geometry:r,m=_?r.features[e].properties:w?r.properties:{},f=_?r.features[e].bbox:w?r.bbox:void 0,g=_?r.features[e].id:w?r.id:void 0,p=h?h.type==="GeometryCollection":!1,l=p?h.geometries.length:1,o=0;o<l;o++){if(s=p?h.geometries[o]:h,s===null){if(i(null,y,m,f,g)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(i(s,y,m,f,g)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<s.geometries.length;n++)if(i(s.geometries[n],y,m,f,g)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}y++}}function Pat(r,i,e){var n=e;return ine(r,function(o,s,l,h,p){s===0&&e===void 0?n=o:n=i(n,o,s,l,h,p)}),n}function A$(r,i){ine(r,function(e,n,o,s,l){var h=e===null?null:e.type;switch(h){case null:case"Point":case"LineString":case"Polygon":return i(Ih.feature(e,o,{bbox:s,id:l}),n,0)===!1?!1:void 0}var p;switch(h){case"MultiPoint":p="Point";break;case"MultiLineString":p="LineString";break;case"MultiPolygon":p="Polygon";break}for(var m=0;m<e.coordinates.length;m++){var f=e.coordinates[m],g={type:p,coordinates:f};if(i(Ih.feature(g,o),n,m)===!1)return!1}})}function Rat(r,i,e){var n=e;return A$(r,function(o,s,l){s===0&&l===0&&e===void 0?n=o:n=i(n,o,s,l)}),n}function UTe(r,i){A$(r,function(e,n,o){var s=0;if(e.geometry){var l=e.geometry.type;if(!(l==="Point"||l==="MultiPoint")){var h,p=0,m=0,f=0;if(BF(e,function(g,y,_,w,A){if(h===void 0||n>p||w>m||A>f){h=g,p=n,m=w,f=A,s=0;return}var k=Ih.lineString([h,g],e.properties);if(i(k,n,o,A,s)===!1)return!1;s++,h=g})===!1)return!1}}})}function Fat(r,i,e){var n=e,o=!1;return UTe(r,function(s,l,h,p,m){o===!1&&e===void 0?n=s:n=i(n,s,l,h,p,m),o=!0}),n}function zTe(r,i){if(!r)throw new Error("geojson is required");A$(r,function(e,n,o){if(e.geometry!==null){var s=e.geometry.type,l=e.geometry.coordinates;switch(s){case"LineString":if(i(e,n,o,0,0)===!1)return!1;break;case"Polygon":for(var h=0;h<l.length;h++)if(i(Ih.lineString(l[h],e.properties),n,o,h)===!1)return!1;break}}})}function Lat(r,i,e){var n=e;return zTe(r,function(o,s,l,h){s===0&&e===void 0?n=o:n=i(n,o,s,l,h)}),n}function Nat(r,i){if(i=i||{},!Ih.isObject(i))throw new Error("options is invalid");var e=i.featureIndex||0,n=i.multiFeatureIndex||0,o=i.geometryIndex||0,s=i.segmentIndex||0,l=i.properties,h;switch(r.type){case"FeatureCollection":e<0&&(e=r.features.length+e),l=l||r.features[e].properties,h=r.features[e].geometry;break;case"Feature":l=l||r.properties,h=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":h=r;break;default:throw new Error("geojson is invalid")}if(h===null)return null;var p=h.coordinates;switch(h.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=p.length+s-1),Ih.lineString([p[s],p[s+1]],l,i);case"Polygon":return o<0&&(o=p.length+o),s<0&&(s=p[o].length+s-1),Ih.lineString([p[o][s],p[o][s+1]],l,i);case"MultiLineString":return n<0&&(n=p.length+n),s<0&&(s=p[n].length+s-1),Ih.lineString([p[n][s],p[n][s+1]],l,i);case"MultiPolygon":return n<0&&(n=p.length+n),o<0&&(o=p[n].length+o),s<0&&(s=p[n][o].length-s-1),Ih.lineString([p[n][o][s],p[n][o][s+1]],l,i)}throw new Error("geojson is invalid")}function Bat(r,i){if(i=i||{},!Ih.isObject(i))throw new Error("options is invalid");var e=i.featureIndex||0,n=i.multiFeatureIndex||0,o=i.geometryIndex||0,s=i.coordIndex||0,l=i.properties,h;switch(r.type){case"FeatureCollection":e<0&&(e=r.features.length+e),l=l||r.features[e].properties,h=r.features[e].geometry;break;case"Feature":l=l||r.properties,h=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":h=r;break;default:throw new Error("geojson is invalid")}if(h===null)return null;var p=h.coordinates;switch(h.type){case"Point":return Ih.point(p,l,i);case"MultiPoint":return n<0&&(n=p.length+n),Ih.point(p[n],l,i);case"LineString":return s<0&&(s=p.length+s),Ih.point(p[s],l,i);case"Polygon":return o<0&&(o=p.length+o),s<0&&(s=p[o].length+s),Ih.point(p[o][s],l,i);case"MultiLineString":return n<0&&(n=p.length+n),s<0&&(s=p[n].length+s),Ih.point(p[n][s],l,i);case"MultiPolygon":return n<0&&(n=p.length+n),o<0&&(o=p[n].length+o),s<0&&(s=p[n][o].length-s),Ih.point(p[n][o][s],l,i)}throw new Error("geojson is invalid")}kd.coordAll=Oat;kd.coordEach=BF;kd.coordReduce=Mat;kd.featureEach=$Te;kd.featureReduce=kat;kd.findPoint=Bat;kd.findSegment=Nat;kd.flattenEach=A$;kd.flattenReduce=Rat;kd.geomEach=ine;kd.geomReduce=Pat;kd.lineEach=zTe;kd.lineReduce=Lat;kd.propEach=VTe;kd.propReduce=Dat;kd.segmentEach=UTe;kd.segmentReduce=Fat});var GTe=ad(one=>{"use strict";Object.defineProperty(one,"__esModule",{value:!0});var jat=nne();function rne(r){var i=[1/0,1/0,-1/0,-1/0];return jat.coordEach(r,function(e){i[0]>e[0]&&(i[0]=e[0]),i[1]>e[1]&&(i[1]=e[1]),i[2]<e[0]&&(i[2]=e[0]),i[3]<e[1]&&(i[3]=e[1])}),i}rne.default=rne;one.default=rne});var KTe=ad((LEi,sne)=>{var ny=iV(),WTe=tne(),qTe=nne(),E2=GTe().default,Vat=qTe.featureEach,REi=qTe.coordEach,FEi=WTe.polygon,HTe=WTe.featureCollection;function YTe(r){var i=new ny(r);return i.insert=function(e){if(e.type!=="Feature")throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:E2(e),ny.prototype.insert.call(this,e)},i.load=function(e){var n=[];return Array.isArray(e)?e.forEach(function(o){if(o.type!=="Feature")throw new Error("invalid features");o.bbox=o.bbox?o.bbox:E2(o),n.push(o)}):Vat(e,function(o){if(o.type!=="Feature")throw new Error("invalid features");o.bbox=o.bbox?o.bbox:E2(o),n.push(o)}),ny.prototype.load.call(this,n)},i.remove=function(e,n){if(e.type!=="Feature")throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:E2(e),ny.prototype.remove.call(this,e,n)},i.clear=function(){return ny.prototype.clear.call(this)},i.search=function(e){var n=ny.prototype.search.call(this,this.toBBox(e));return HTe(n)},i.collides=function(e){return ny.prototype.collides.call(this,this.toBBox(e))},i.all=function(){var e=ny.prototype.all.call(this);return HTe(e)},i.toJSON=function(){return ny.prototype.toJSON.call(this)},i.fromJSON=function(e){return ny.prototype.fromJSON.call(this,e)},i.toBBox=function(e){var n;if(e.bbox)n=e.bbox;else if(Array.isArray(e)&&e.length===4)n=e;else if(Array.isArray(e)&&e.length===6)n=[e[0],e[1],e[3],e[4]];else if(e.type==="Feature")n=E2(e);else if(e.type==="FeatureCollection")n=E2(e);else throw new Error("invalid geojson");return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}},i}sne.exports=YTe;sne.exports.default=YTe});function $oe(r,i){return Object.is(r,i)}var cd=null,MD=!1,KL=1,Zm=Symbol("SIGNAL");function zo(r){let i=cd;return cd=r,i}function Uoe(){return cd}function MDe(){return MD}var rT={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Tz(r){if(MD)throw new Error("");if(cd===null)return;cd.consumerOnSignalRead(r);let i=cd.nextProducerIndex++;if(t5(cd),i<cd.producerNode.length&&cd.producerNode[i]!==r&&DD(cd)){let e=cd.producerNode[i];e5(e,cd.producerIndexOfThis[i])}cd.producerNode[i]!==r&&(cd.producerNode[i]=r,cd.producerIndexOfThis[i]=DD(cd)?qoe(r,cd,i):0),cd.producerLastReadVersion[i]=r.version}function DDe(){KL++}function zoe(r){if(!(DD(r)&&!r.dirty)&&!(!r.dirty&&r.lastCleanEpoch===KL)){if(!r.producerMustRecompute(r)&&!XL(r)){r.dirty=!1,r.lastCleanEpoch=KL;return}r.producerRecomputeValue(r),r.dirty=!1,r.lastCleanEpoch=KL}}function Goe(r){if(r.liveConsumerNode===void 0)return;let i=MD;MD=!0;try{for(let e of r.liveConsumerNode)e.dirty||Woe(e)}finally{MD=i}}function Hoe(){return cd?.consumerAllowSignalWrites!==!1}function Woe(r){r.dirty=!0,Goe(r),r.consumerMarkedDirty?.(r)}function kD(r){return r&&(r.nextProducerIndex=0),zo(r)}function QL(r,i){if(zo(i),!(!r||r.producerNode===void 0||r.producerIndexOfThis===void 0||r.producerLastReadVersion===void 0)){if(DD(r))for(let e=r.nextProducerIndex;e<r.producerNode.length;e++)e5(r.producerNode[e],r.producerIndexOfThis[e]);for(;r.producerNode.length>r.nextProducerIndex;)r.producerNode.pop(),r.producerLastReadVersion.pop(),r.producerIndexOfThis.pop()}}function XL(r){t5(r);for(let i=0;i<r.producerNode.length;i++){let e=r.producerNode[i],n=r.producerLastReadVersion[i];if(n!==e.version||(zoe(e),n!==e.version))return!0}return!1}function JL(r){if(t5(r),DD(r))for(let i=0;i<r.producerNode.length;i++)e5(r.producerNode[i],r.producerIndexOfThis[i]);r.producerNode.length=r.producerLastReadVersion.length=r.producerIndexOfThis.length=0,r.liveConsumerNode&&(r.liveConsumerNode.length=r.liveConsumerIndexOfThis.length=0)}function qoe(r,i,e){if(Yoe(r),r.liveConsumerNode.length===0&&Koe(r))for(let n=0;n<r.producerNode.length;n++)r.producerIndexOfThis[n]=qoe(r.producerNode[n],r,n);return r.liveConsumerIndexOfThis.push(e),r.liveConsumerNode.push(i)-1}function e5(r,i){if(Yoe(r),r.liveConsumerNode.length===1&&Koe(r))for(let n=0;n<r.producerNode.length;n++)e5(r.producerNode[n],r.producerIndexOfThis[n]);let e=r.liveConsumerNode.length-1;if(r.liveConsumerNode[i]=r.liveConsumerNode[e],r.liveConsumerIndexOfThis[i]=r.liveConsumerIndexOfThis[e],r.liveConsumerNode.length--,r.liveConsumerIndexOfThis.length--,i<r.liveConsumerNode.length){let n=r.liveConsumerIndexOfThis[i],o=r.liveConsumerNode[i];t5(o),o.producerIndexOfThis[n]=i}}function DD(r){return r.consumerIsAlwaysLive||(r?.liveConsumerNode?.length??0)>0}function t5(r){r.producerNode??=[],r.producerIndexOfThis??=[],r.producerLastReadVersion??=[]}function Yoe(r){r.liveConsumerNode??=[],r.liveConsumerIndexOfThis??=[]}function Koe(r){return r.producerNode!==void 0}function Az(r){let i=Object.create(kDe);i.computation=r;let e=()=>{if(zoe(i),Tz(i),i.value===ZL)throw i.error;return i.value};return e[Zm]=i,e}var xz=Symbol("UNSET"),Sz=Symbol("COMPUTING"),ZL=Symbol("ERRORED"),kDe=li(Xe({},rT),{value:xz,dirty:!0,error:null,equal:$oe,producerMustRecompute(r){return r.value===xz||r.value===Sz},producerRecomputeValue(r){if(r.value===Sz)throw new Error("Detected cycle in computations.");let i=r.value;r.value=Sz;let e=kD(r),n;try{n=r.computation()}catch(o){n=ZL,r.error=o}finally{QL(r,e)}if(i!==xz&&i!==ZL&&n!==ZL&&r.equal(i,n)){r.value=i;return}r.value=n,r.version++}});function ODe(){throw new Error}var Zoe=ODe;function Qoe(){Zoe()}function Xoe(r){Zoe=r}var PDe=null;function Joe(r){let i=Object.create(tse);i.value=r;let e=()=>(Tz(i),i.value);return e[Zm]=i,e}function Ez(r,i){Hoe()||Qoe(),r.equal(r.value,i)||(r.value=i,RDe(r))}function ese(r,i){Hoe()||Qoe(),Ez(r,i(r.value))}var tse=li(Xe({},rT),{equal:$oe,value:void 0});function RDe(r){r.version++,DDe(),Goe(r),PDe?.()}function ise(r,i,e){let n=Object.create(FDe);e&&(n.consumerAllowSignalWrites=!0),n.fn=r,n.schedule=i;let o=p=>{n.cleanupFn=p};function s(p){return p.fn===null&&p.schedule===null}function l(p){s(p)||(JL(p),p.cleanupFn(),p.fn=null,p.schedule=null,p.cleanupFn=Iz)}let h=()=>{if(n.fn===null)return;if(MDe())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(n.dirty=!1,n.hasRun&&!XL(n))return;n.hasRun=!0;let p=kD(n);try{n.cleanupFn(),n.cleanupFn=Iz,n.fn(o)}finally{QL(n,p)}};return n.ref={notify:()=>Woe(n),run:h,cleanup:()=>n.cleanupFn(),destroy:()=>l(n),[Zm]:n},n.ref}var Iz=()=>{},FDe=li(Xe({},rT),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:r=>{r.schedule!==null&&r.schedule(r.ref)},hasRun:!1,cleanupFn:Iz});function Yn(r){return typeof r=="function"}function zb(r){let e=r(n=>{Error.call(n),n.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var i5=zb(r=>function(e){r(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((n,o)=>`${o+1}) ${n.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function NC(r,i){if(r){let e=r.indexOf(i);0<=e&&r.splice(e,1)}}var pn=class r{constructor(i){this.initialTeardown=i,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let i;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let s of e)s.remove(this);else e.remove(this);let{initialTeardown:n}=this;if(Yn(n))try{n()}catch(s){i=s instanceof i5?s.errors:[s]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let s of o)try{nse(s)}catch(l){i=i??[],l instanceof i5?i=[...i,...l.errors]:i.push(l)}}if(i)throw new i5(i)}}add(i){var e;if(i&&i!==this)if(this.closed)nse(i);else{if(i instanceof r){if(i.closed||i._hasParent(this))return;i._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(i)}}_hasParent(i){let{_parentage:e}=this;return e===i||Array.isArray(e)&&e.includes(i)}_addParent(i){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(i),e):e?[e,i]:i}_removeParent(i){let{_parentage:e}=this;e===i?this._parentage=null:Array.isArray(e)&&NC(e,i)}remove(i){let{_finalizers:e}=this;e&&NC(e,i),i instanceof r&&i._removeParent(this)}};pn.EMPTY=(()=>{let r=new pn;return r.closed=!0,r})();var Mz=pn.EMPTY;function n5(r){return r instanceof pn||r&&"closed"in r&&Yn(r.remove)&&Yn(r.add)&&Yn(r.unsubscribe)}function nse(r){Yn(r)?r():r.unsubscribe()}var ag={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var oT={setTimeout(r,i,...e){let{delegate:n}=oT;return n?.setTimeout?n.setTimeout(r,i,...e):setTimeout(r,i,...e)},clearTimeout(r){let{delegate:i}=oT;return(i?.clearTimeout||clearTimeout)(r)},delegate:void 0};function r5(r){oT.setTimeout(()=>{let{onUnhandledError:i}=ag;if(i)i(r);else throw r})}function lg(){}var rse=Dz("C",void 0,void 0);function ose(r){return Dz("E",void 0,r)}function sse(r){return Dz("N",r,void 0)}function Dz(r,i,e){return{kind:r,value:i,error:e}}var BC=null;function sT(r){if(ag.useDeprecatedSynchronousErrorHandling){let i=!BC;if(i&&(BC={errorThrown:!1,error:null}),r(),i){let{errorThrown:e,error:n}=BC;if(BC=null,e)throw n}}else r()}function ase(r){ag.useDeprecatedSynchronousErrorHandling&&BC&&(BC.errorThrown=!0,BC.error=r)}var jC=class extends pn{constructor(i){super(),this.isStopped=!1,i?(this.destination=i,n5(i)&&i.add(this)):this.destination=BDe}static create(i,e,n){return new Sy(i,e,n)}next(i){this.isStopped?Oz(sse(i),this):this._next(i)}error(i){this.isStopped?Oz(ose(i),this):(this.isStopped=!0,this._error(i))}complete(){this.isStopped?Oz(rse,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(i){this.destination.next(i)}_error(i){try{this.destination.error(i)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},LDe=Function.prototype.bind;function kz(r,i){return LDe.call(r,i)}var Pz=class{constructor(i){this.partialObserver=i}next(i){let{partialObserver:e}=this;if(e.next)try{e.next(i)}catch(n){o5(n)}}error(i){let{partialObserver:e}=this;if(e.error)try{e.error(i)}catch(n){o5(n)}else o5(i)}complete(){let{partialObserver:i}=this;if(i.complete)try{i.complete()}catch(e){o5(e)}}},Sy=class extends jC{constructor(i,e,n){super();let o;if(Yn(i)||!i)o={next:i??void 0,error:e??void 0,complete:n??void 0};else{let s;this&&ag.useDeprecatedNextContext?(s=Object.create(i),s.unsubscribe=()=>this.unsubscribe(),o={next:i.next&&kz(i.next,s),error:i.error&&kz(i.error,s),complete:i.complete&&kz(i.complete,s)}):o=i}this.destination=new Pz(o)}};function o5(r){ag.useDeprecatedSynchronousErrorHandling?ase(r):r5(r)}function NDe(r){throw r}function Oz(r,i){let{onStoppedNotification:e}=ag;e&&oT.setTimeout(()=>e(r,i))}var BDe={closed:!0,next:lg,error:NDe,complete:lg};var aT=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Nh(r){return r}function Rz(...r){return Fz(r)}function Fz(r){return r.length===0?Nh:r.length===1?r[0]:function(e){return r.reduce((n,o)=>o(n),e)}}var si=(()=>{class r{constructor(e){e&&(this._subscribe=e)}lift(e){let n=new r;return n.source=this,n.operator=e,n}subscribe(e,n,o){let s=VDe(e)?e:new Sy(e,n,o);return sT(()=>{let{operator:l,source:h}=this;s.add(l?l.call(s,h):h?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return n=lse(n),new n((o,s)=>{let l=new Sy({next:h=>{try{e(h)}catch(p){s(p),l.unsubscribe()}},error:s,complete:o});this.subscribe(l)})}_subscribe(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)}[aT](){return this}pipe(...e){return Fz(e)(this)}toPromise(e){return e=lse(e),new e((n,o)=>{let s;this.subscribe(l=>s=l,l=>o(l),()=>n(s))})}}return r.create=i=>new r(i),r})();function lse(r){var i;return(i=r??ag.Promise)!==null&&i!==void 0?i:Promise}function jDe(r){return r&&Yn(r.next)&&Yn(r.error)&&Yn(r.complete)}function VDe(r){return r&&r instanceof jC||jDe(r)&&n5(r)}function Lz(r){return Yn(r?.lift)}function Qn(r){return i=>{if(Lz(i))return i.lift(function(e){try{return r(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Un(r,i,e,n,o){return new Nz(r,i,e,n,o)}var Nz=class extends jC{constructor(i,e,n,o,s,l){super(i),this.onFinalize=s,this.shouldUnsubscribe=l,this._next=e?function(h){try{e(h)}catch(p){i.error(p)}}:super._next,this._error=o?function(h){try{o(h)}catch(p){i.error(p)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(h){i.error(h)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var i;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((i=this.onFinalize)===null||i===void 0||i.call(this))}}};function Gb(){return Qn((r,i)=>{let e=null;r._refCount++;let n=Un(i,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount){e=null;return}let o=r._connection,s=e;e=null,o&&(!s||o===s)&&o.unsubscribe(),i.unsubscribe()});r.subscribe(n),n.closed||(e=r.connect())})}var V0=class extends si{constructor(i,e){super(),this.source=i,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Lz(i)&&(this.lift=i.lift)}_subscribe(i){return this.getSubject().subscribe(i)}getSubject(){let i=this._subject;return(!i||i.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:i}=this;this._subject=this._connection=null,i?.unsubscribe()}connect(){let i=this._connection;if(!i){i=this._connection=new pn;let e=this.getSubject();i.add(this.source.subscribe(Un(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),i.closed&&(this._connection=null,i=pn.EMPTY)}return i}refCount(){return Gb()(this)}};var lT={schedule(r){let i=requestAnimationFrame,e=cancelAnimationFrame,{delegate:n}=lT;n&&(i=n.requestAnimationFrame,e=n.cancelAnimationFrame);let o=i(s=>{e=void 0,r(s)});return new pn(()=>e?.(o))},requestAnimationFrame(...r){let{delegate:i}=lT;return(i?.requestAnimationFrame||requestAnimationFrame)(...r)},cancelAnimationFrame(...r){let{delegate:i}=lT;return(i?.cancelAnimationFrame||cancelAnimationFrame)(...r)},delegate:void 0};var cse=zb(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Dt=(()=>{class r extends si{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let n=new s5(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new cse}next(e){sT(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let n of this.currentObservers)n.next(e)}})}error(e){sT(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){sT(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:n,isStopped:o,observers:s}=this;return n||o?Mz:(this.currentObservers=null,s.push(e),new pn(()=>{this.currentObservers=null,NC(s,e)}))}_checkFinalizedStatuses(e){let{hasError:n,thrownError:o,isStopped:s}=this;n?e.error(o):s&&e.complete()}asObservable(){let e=new si;return e.source=this,e}}return r.create=(i,e)=>new s5(i,e),r})(),s5=class extends Dt{constructor(i,e){super(),this.destination=i,this.source=e}next(i){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.next)===null||n===void 0||n.call(e,i)}error(i){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.error)===null||n===void 0||n.call(e,i)}complete(){var i,e;(e=(i=this.destination)===null||i===void 0?void 0:i.complete)===null||e===void 0||e.call(i)}_subscribe(i){var e,n;return(n=(e=this.source)===null||e===void 0?void 0:e.subscribe(i))!==null&&n!==void 0?n:Mz}};var mt=class extends Dt{constructor(i){super(),this._value=i}get value(){return this.getValue()}_subscribe(i){let e=super._subscribe(i);return!e.closed&&i.next(this._value),e}getValue(){let{hasError:i,thrownError:e,_value:n}=this;if(i)throw e;return this._throwIfClosed(),n}next(i){super.next(this._value=i)}};var OD={now(){return(OD.delegate||Date).now()},delegate:void 0};var Vd=class extends Dt{constructor(i=1/0,e=1/0,n=OD){super(),this._bufferSize=i,this._windowTime=e,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,i),this._windowTime=Math.max(1,e)}next(i){let{isStopped:e,_buffer:n,_infiniteTimeWindow:o,_timestampProvider:s,_windowTime:l}=this;e||(n.push(i),!o&&n.push(s.now()+l)),this._trimBuffer(),super.next(i)}_subscribe(i){this._throwIfClosed(),this._trimBuffer();let e=this._innerSubscribe(i),{_infiniteTimeWindow:n,_buffer:o}=this,s=o.slice();for(let l=0;l<s.length&&!i.closed;l+=n?1:2)i.next(s[l]);return this._checkFinalizedStatuses(i),e}_trimBuffer(){let{_bufferSize:i,_timestampProvider:e,_buffer:n,_infiniteTimeWindow:o}=this,s=(o?1:2)*i;if(i<1/0&&s<n.length&&n.splice(0,n.length-s),!o){let l=e.now(),h=0;for(let p=1;p<n.length&&n[p]<=l;p+=2)h=p;h&&n.splice(0,h+1)}}};var a5=class extends pn{constructor(i,e){super()}schedule(i,e=0){return this}};var PD={setInterval(r,i,...e){let{delegate:n}=PD;return n?.setInterval?n.setInterval(r,i,...e):setInterval(r,i,...e)},clearInterval(r){let{delegate:i}=PD;return(i?.clearInterval||clearInterval)(r)},delegate:void 0};var Hb=class extends a5{constructor(i,e){super(i,e),this.scheduler=i,this.work=e,this.pending=!1}schedule(i,e=0){var n;if(this.closed)return this;this.state=i;let o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,e)),this.pending=!0,this.delay=e,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(s,this.id,e),this}requestAsyncId(i,e,n=0){return PD.setInterval(i.flush.bind(i,this),n)}recycleAsyncId(i,e,n=0){if(n!=null&&this.delay===n&&this.pending===!1)return e;e!=null&&PD.clearInterval(e)}execute(i,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let n=this._execute(i,e);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(i,e){let n=!1,o;try{this.work(i)}catch(s){n=!0,o=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:i,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,NC(n,this),i!=null&&(this.id=this.recycleAsyncId(e,i,null)),this.delay=null,super.unsubscribe()}}};var $De=1,Bz,jz={};function dse(r){return r in jz?(delete jz[r],!0):!1}var use={setImmediate(r){let i=$De++;return jz[i]=!0,Bz||(Bz=Promise.resolve()),Bz.then(()=>dse(i)&&r()),i},clearImmediate(r){dse(r)}};var{setImmediate:UDe,clearImmediate:zDe}=use,RD={setImmediate(...r){let{delegate:i}=RD;return(i?.setImmediate||UDe)(...r)},clearImmediate(r){let{delegate:i}=RD;return(i?.clearImmediate||zDe)(r)},delegate:void 0};var l5=class extends Hb{constructor(i,e){super(i,e),this.scheduler=i,this.work=e}requestAsyncId(i,e,n=0){return n!==null&&n>0?super.requestAsyncId(i,e,n):(i.actions.push(this),i._scheduled||(i._scheduled=RD.setImmediate(i.flush.bind(i,void 0))))}recycleAsyncId(i,e,n=0){var o;if(n!=null?n>0:this.delay>0)return super.recycleAsyncId(i,e,n);let{actions:s}=i;e!=null&&((o=s[s.length-1])===null||o===void 0?void 0:o.id)!==e&&(RD.clearImmediate(e),i._scheduled===e&&(i._scheduled=void 0))}};var cT=class r{constructor(i,e=r.now){this.schedulerActionCtor=i,this.now=e}schedule(i,e=0,n){return new this.schedulerActionCtor(this,i).schedule(n,e)}};cT.now=OD.now;var Wb=class extends cT{constructor(i,e=cT.now){super(i,e),this.actions=[],this._active=!1}flush(i){let{actions:e}=this;if(this._active){e.push(i);return}let n;this._active=!0;do if(n=i.execute(i.state,i.delay))break;while(i=e.shift());if(this._active=!1,n){for(;i=e.shift();)i.unsubscribe();throw n}}};var c5=class extends Wb{flush(i){this._active=!0;let e=this._scheduled;this._scheduled=void 0;let{actions:n}=this,o;i=i||n.shift();do if(o=i.execute(i.state,i.delay))break;while((i=n[0])&&i.id===e&&n.shift());if(this._active=!1,o){for(;(i=n[0])&&i.id===e&&n.shift();)i.unsubscribe();throw o}}};var FD=new c5(l5);var cg=new Wb(Hb),hse=cg;var d5=class extends Hb{constructor(i,e){super(i,e),this.scheduler=i,this.work=e}requestAsyncId(i,e,n=0){return n!==null&&n>0?super.requestAsyncId(i,e,n):(i.actions.push(this),i._scheduled||(i._scheduled=lT.requestAnimationFrame(()=>i.flush(void 0))))}recycleAsyncId(i,e,n=0){var o;if(n!=null?n>0:this.delay>0)return super.recycleAsyncId(i,e,n);let{actions:s}=i;e!=null&&e===i._scheduled&&((o=s[s.length-1])===null||o===void 0?void 0:o.id)!==e&&(lT.cancelAnimationFrame(e),i._scheduled=void 0)}};var u5=class extends Wb{flush(i){this._active=!0;let e;i?e=i.id:(e=this._scheduled,this._scheduled=void 0);let{actions:n}=this,o;i=i||n.shift();do if(o=i.execute(i.state,i.delay))break;while((i=n[0])&&i.id===e&&n.shift());if(this._active=!1,o){for(;(i=n[0])&&i.id===e&&n.shift();)i.unsubscribe();throw o}}};var h5=new u5(d5);var Na=new si(r=>r.complete());function Vz(r){return r?GDe(r):Na}function GDe(r){return new si(i=>r.schedule(()=>i.complete()))}function p5(r){return r&&Yn(r.schedule)}function $z(r){return r[r.length-1]}function dT(r){return Yn($z(r))?r.pop():void 0}function $0(r){return p5($z(r))?r.pop():void 0}function pse(r,i){return typeof $z(r)=="number"?r.pop():i}function po(r,i,e,n){var o=arguments.length,s=o<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,e):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,i,e,n);else for(var h=r.length-1;h>=0;h--)(l=r[h])&&(s=(o<3?l(s):o>3?l(i,e,s):l(i,e))||s);return o>3&&s&&Object.defineProperty(i,e,s),s}function xo(r,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,i)}function fse(r,i,e,n){function o(s){return s instanceof e?s:new e(function(l){l(s)})}return new(e||(e=Promise))(function(s,l){function h(f){try{m(n.next(f))}catch(g){l(g)}}function p(f){try{m(n.throw(f))}catch(g){l(g)}}function m(f){f.done?s(f.value):o(f.value).then(h,p)}m((n=n.apply(r,i||[])).next())})}function mse(r){var i=typeof Symbol=="function"&&Symbol.iterator,e=i&&r[i],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function VC(r){return this instanceof VC?(this.v=r,this):new VC(r)}function gse(r,i,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(r,i||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",l),o[Symbol.asyncIterator]=function(){return this},o;function l(_){return function(w){return Promise.resolve(w).then(_,g)}}function h(_,w){n[_]&&(o[_]=function(A){return new Promise(function(k,R){s.push([_,A,k,R])>1||p(_,A)})},w&&(o[_]=w(o[_])))}function p(_,w){try{m(n[_](w))}catch(A){y(s[0][3],A)}}function m(_){_.value instanceof VC?Promise.resolve(_.value.v).then(f,g):y(s[0][2],_)}function f(_){p("next",_)}function g(_){p("throw",_)}function y(_,w){_(w),s.shift(),s.length&&p(s[0][0],s[0][1])}}function _se(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r[Symbol.asyncIterator],e;return i?i.call(r):(r=typeof mse=="function"?mse(r):r[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=r[s]&&function(l){return new Promise(function(h,p){l=r[s](l),o(h,p,l.done,l.value)})}}function o(s,l,h,p){Promise.resolve(p).then(function(m){s({value:m,done:h})},l)}}var uT=r=>r&&typeof r.length=="number"&&typeof r!="function";function m5(r){return Yn(r?.then)}function f5(r){return Yn(r[aT])}function g5(r){return Symbol.asyncIterator&&Yn(r?.[Symbol.asyncIterator])}function _5(r){return new TypeError(`You provided ${r!==null&&typeof r=="object"?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function HDe(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var y5=HDe();function v5(r){return Yn(r?.[y5])}function b5(r){return gse(this,arguments,function*(){let e=r.getReader();try{for(;;){let{value:n,done:o}=yield VC(e.read());if(o)return yield VC(void 0);yield yield VC(n)}}finally{e.releaseLock()}})}function w5(r){return Yn(r?.getReader)}function Do(r){if(r instanceof si)return r;if(r!=null){if(f5(r))return WDe(r);if(uT(r))return qDe(r);if(m5(r))return YDe(r);if(g5(r))return yse(r);if(v5(r))return KDe(r);if(w5(r))return ZDe(r)}throw _5(r)}function WDe(r){return new si(i=>{let e=r[aT]();if(Yn(e.subscribe))return e.subscribe(i);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function qDe(r){return new si(i=>{for(let e=0;e<r.length&&!i.closed;e++)i.next(r[e]);i.complete()})}function YDe(r){return new si(i=>{r.then(e=>{i.closed||(i.next(e),i.complete())},e=>i.error(e)).then(null,r5)})}function KDe(r){return new si(i=>{for(let e of r)if(i.next(e),i.closed)return;i.complete()})}function yse(r){return new si(i=>{QDe(r,i).catch(e=>i.error(e))})}function ZDe(r){return yse(b5(r))}function QDe(r,i){var e,n,o,s;return fse(this,void 0,void 0,function*(){try{for(e=_se(r);n=yield e.next(),!n.done;){let l=n.value;if(i.next(l),i.closed)return}}catch(l){o={error:l}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(o)throw o.error}}i.complete()})}function qu(r,i,e,n=0,o=!1){let s=i.schedule(function(){e(),o?r.add(this.schedule(null,n)):this.unsubscribe()},n);if(r.add(s),!o)return s}function C5(r,i=0){return Qn((e,n)=>{e.subscribe(Un(n,o=>qu(n,r,()=>n.next(o),i),()=>qu(n,r,()=>n.complete(),i),o=>qu(n,r,()=>n.error(o),i)))})}function x5(r,i=0){return Qn((e,n)=>{n.add(r.schedule(()=>e.subscribe(n),i))})}function vse(r,i){return Do(r).pipe(x5(i),C5(i))}function bse(r,i){return Do(r).pipe(x5(i),C5(i))}function wse(r,i){return new si(e=>{let n=0;return i.schedule(function(){n===r.length?e.complete():(e.next(r[n++]),e.closed||this.schedule())})})}function Cse(r,i){return new si(e=>{let n;return qu(e,i,()=>{n=r[y5](),qu(e,i,()=>{let o,s;try{({value:o,done:s}=n.next())}catch(l){e.error(l);return}s?e.complete():e.next(o)},0,!0)}),()=>Yn(n?.return)&&n.return()})}function S5(r,i){if(!r)throw new Error("Iterable cannot be null");return new si(e=>{qu(e,i,()=>{let n=r[Symbol.asyncIterator]();qu(e,i,()=>{n.next().then(o=>{o.done?e.complete():e.next(o.value)})},0,!0)})})}function xse(r,i){return S5(b5(r),i)}function Sse(r,i){if(r!=null){if(f5(r))return vse(r,i);if(uT(r))return wse(r,i);if(m5(r))return bse(r,i);if(g5(r))return S5(r,i);if(v5(r))return Cse(r,i);if(w5(r))return xse(r,i)}throw _5(r)}function Xn(r,i){return i?Sse(r,i):Do(r)}function Vt(...r){let i=$0(r);return Xn(r,i)}function dd(r,i){let e=Yn(r)?r:()=>r,n=o=>o.error(e());return new si(i?o=>i.schedule(n,0,o):n)}function $c(r){return!!r&&(r instanceof si||Yn(r.lift)&&Yn(r.subscribe))}var dg=zb(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});function Uz(r,i){let e=typeof i=="object";return new Promise((n,o)=>{let s=!1,l;r.subscribe({next:h=>{l=h,s=!0},error:o,complete:()=>{s?n(l):e?n(i.defaultValue):o(new dg)}})})}function I5(r){return r instanceof Date&&!isNaN(r)}var XDe=zb(r=>function(e=null){r(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e});function zz(r,i){let{first:e,each:n,with:o=JDe,scheduler:s=i??cg,meta:l=null}=I5(r)?{first:r}:typeof r=="number"?{each:r}:r;if(e==null&&n==null)throw new TypeError("No timeout provided.");return Qn((h,p)=>{let m,f,g=null,y=0,_=w=>{f=qu(p,s,()=>{try{m.unsubscribe(),Do(o({meta:l,lastValue:g,seen:y})).subscribe(p)}catch(A){p.error(A)}},w)};m=h.subscribe(Un(p,w=>{f?.unsubscribe(),y++,p.next(g=w),n>0&&_(n)},void 0,void 0,()=>{f?.closed||f?.unsubscribe(),g=null})),!y&&_(e!=null?typeof e=="number"?e:+e-s.now():n)})}function JDe(r){throw new XDe(r)}function $t(r,i){return Qn((e,n)=>{let o=0;e.subscribe(Un(n,s=>{n.next(r.call(i,s,o++))}))})}var{isArray:eke}=Array;function tke(r,i){return eke(i)?r(...i):r(i)}function hT(r){return $t(i=>tke(r,i))}var{isArray:ike}=Array,{getPrototypeOf:nke,prototype:rke,keys:oke}=Object;function T5(r){if(r.length===1){let i=r[0];if(ike(i))return{args:i,keys:null};if(ske(i)){let e=oke(i);return{args:e.map(n=>i[n]),keys:e}}}return{args:r,keys:null}}function ske(r){return r&&typeof r=="object"&&nke(r)===rke}function A5(r,i){return r.reduce((e,n,o)=>(e[n]=i[o],e),{})}function ts(...r){let i=$0(r),e=dT(r),{args:n,keys:o}=T5(r);if(n.length===0)return Xn([],i);let s=new si(ake(n,i,o?l=>A5(o,l):Nh));return e?s.pipe(hT(e)):s}function ake(r,i,e=Nh){return n=>{Ise(i,()=>{let{length:o}=r,s=new Array(o),l=o,h=o;for(let p=0;p<o;p++)Ise(i,()=>{let m=Xn(r[p],i),f=!1;m.subscribe(Un(n,g=>{s[p]=g,f||(f=!0,h--),h||n.next(e(s.slice()))},()=>{--l||n.complete()}))},n)},n)}}function Ise(r,i,e){r?qu(e,r,i):i()}function Tse(r,i,e,n,o,s,l,h){let p=[],m=0,f=0,g=!1,y=()=>{g&&!p.length&&!m&&i.complete()},_=A=>m<n?w(A):p.push(A),w=A=>{s&&i.next(A),m++;let k=!1;Do(e(A,f++)).subscribe(Un(i,R=>{o?.(R),s?_(R):i.next(R)},()=>{k=!0},void 0,()=>{if(k)try{for(m--;p.length&&m<n;){let R=p.shift();l?qu(i,l,()=>w(R)):w(R)}y()}catch(R){i.error(R)}}))};return r.subscribe(Un(i,_,()=>{g=!0,y()})),()=>{h?.()}}function ga(r,i,e=1/0){return Yn(i)?ga((n,o)=>$t((s,l)=>i(n,s,o,l))(Do(r(n,o))),e):(typeof i=="number"&&(e=i),Qn((n,o)=>Tse(n,o,r,e)))}function LD(r=1/0){return ga(Nh,r)}function Ase(){return LD(1)}function Bh(...r){return Ase()(Xn(r,$0(r)))}function $d(r){return new si(i=>{Do(r()).subscribe(i)})}function Ac(...r){let i=dT(r),{args:e,keys:n}=T5(r),o=new si(s=>{let{length:l}=e;if(!l){s.complete();return}let h=new Array(l),p=l,m=l;for(let f=0;f<l;f++){let g=!1;Do(e[f]).subscribe(Un(s,y=>{g||(g=!0,m--),h[f]=y},()=>p--,void 0,()=>{(!p||!g)&&(m||s.next(n?A5(n,h):h),s.complete())}))}});return i?o.pipe(hT(i)):o}var lke=["addListener","removeListener"],cke=["addEventListener","removeEventListener"],dke=["on","off"];function Ds(r,i,e,n){if(Yn(e)&&(n=e,e=void 0),n)return Ds(r,i,e).pipe(hT(n));let[o,s]=pke(r)?cke.map(l=>h=>r[l](i,h,e)):uke(r)?lke.map(Ese(r,i)):hke(r)?dke.map(Ese(r,i)):[];if(!o&&uT(r))return ga(l=>Ds(l,i,e))(Do(r));if(!o)throw new TypeError("Invalid event target");return new si(l=>{let h=(...p)=>l.next(1<p.length?p:p[0]);return o(h),()=>s(h)})}function Ese(r,i){return e=>n=>r[e](i,n)}function uke(r){return Yn(r.addListener)&&Yn(r.removeListener)}function hke(r){return Yn(r.on)&&Yn(r.off)}function pke(r){return Yn(r.addEventListener)&&Yn(r.removeEventListener)}function lm(r=0,i,e=hse){let n=-1;return i!=null&&(p5(i)?e=i:n=i),new si(o=>{let s=I5(r)?+r-e.now():r;s<0&&(s=0);let l=0;return e.schedule(function(){o.closed||(o.next(l++),0<=n?this.schedule(void 0,n):o.complete())},s)})}function qb(r=0,i=cg){return r<0&&(r=0),lm(r,r,i)}function vr(...r){let i=$0(r),e=pse(r,1/0),n=r;return n.length?n.length===1?Do(n[0]):LD(e)(Xn(n,i)):Na}var $C=new si(lg);var{isArray:mke}=Array;function Mse(r){return r.length===1&&mke(r[0])?r[0]:r}function mn(r,i){return Qn((e,n)=>{let o=0;e.subscribe(Un(n,s=>r.call(i,s,o++)&&n.next(s)))})}function UC(...r){let i=dT(r),e=Mse(r);return e.length?new si(n=>{let o=e.map(()=>[]),s=e.map(()=>!1);n.add(()=>{o=s=null});for(let l=0;!n.closed&&l<e.length;l++)Do(e[l]).subscribe(Un(n,h=>{if(o[l].push(h),o.every(p=>p.length)){let p=o.map(m=>m.shift());n.next(i?i(...p):p),o.some((m,f)=>!m.length&&s[f])&&n.complete()}},()=>{s[l]=!0,!o[l].length&&n.complete()}));return()=>{o=s=null}}):Na}function Dse(r){return Qn((i,e)=>{let n=!1,o=null,s=null,l=!1,h=()=>{if(s?.unsubscribe(),s=null,n){n=!1;let m=o;o=null,e.next(m)}l&&e.complete()},p=()=>{s=null,l&&e.complete()};i.subscribe(Un(e,m=>{n=!0,o=m,s||Do(r(m)).subscribe(s=Un(e,h,p))},()=>{l=!0,(!n||!s||s.closed)&&e.complete()}))})}function E5(r,i=cg){return Dse(()=>lm(r,i))}function Fn(r){return Qn((i,e)=>{let n=null,o=!1,s;n=i.subscribe(Un(e,void 0,void 0,l=>{s=Do(r(l,Fn(r)(i))),n?(n.unsubscribe(),n=null,s.subscribe(e)):o=!0})),o&&(n.unsubscribe(),n=null,s.subscribe(e))})}function kse(r,i,e,n,o){return(s,l)=>{let h=e,p=i,m=0;s.subscribe(Un(l,f=>{let g=m++;p=h?r(p,f,g):(h=!0,f),n&&l.next(p)},o&&(()=>{h&&l.next(p),l.complete()})))}}function ul(r,i){return Yn(i)?ga(r,i,1):ga(r,1)}function Ose(r){return new si(i=>r.subscribe(i))}var fke={connector:()=>new Dt};function M5(r,i=fke){let{connector:e}=i;return Qn((n,o)=>{let s=e();Do(r(Ose(s))).subscribe(o),o.add(n.subscribe(s))})}function ND(r){return Qn((i,e)=>{let n=!1,o=null,s=null,l=()=>{if(s?.unsubscribe(),s=null,n){n=!1;let h=o;o=null,e.next(h)}};i.subscribe(Un(e,h=>{s?.unsubscribe(),n=!0,o=h,s=Un(e,l,lg),Do(r(h)).subscribe(s)},()=>{l(),e.complete()},void 0,()=>{o=s=null}))})}function cr(r,i=cg){return Qn((e,n)=>{let o=null,s=null,l=null,h=()=>{if(o){o.unsubscribe(),o=null;let m=s;s=null,n.next(m)}};function p(){let m=l+r,f=i.now();if(f<m){o=this.schedule(void 0,m-f),n.add(o);return}h()}e.subscribe(Un(n,m=>{s=m,l=i.now(),o||(o=i.schedule(p,r),n.add(o))},()=>{h(),n.complete()},void 0,()=>{s=o=null}))})}function Yb(r){return Qn((i,e)=>{let n=!1;i.subscribe(Un(e,o=>{n=!0,e.next(o)},()=>{n||e.next(r),e.complete()}))})}function Tn(r){return r<=0?()=>Na:Qn((i,e)=>{let n=0;i.subscribe(Un(e,o=>{++n<=r&&(e.next(o),r<=n&&e.complete())}))})}function Pse(){return Qn((r,i)=>{r.subscribe(Un(i,lg))})}function Kb(r){return $t(()=>r)}function Gz(r,i){return i?e=>Bh(i.pipe(Tn(1),Pse()),e.pipe(Gz(r))):ga((e,n)=>Do(r(e,n)).pipe(Tn(1),Kb(e)))}function jh(r,i=cg){let e=lm(r,i);return Gz(()=>e)}function cm(r,i=Nh){return r=r??gke,Qn((e,n)=>{let o,s=!0;e.subscribe(Un(n,l=>{let h=i(l);(s||!r(o,h))&&(s=!1,o=h,n.next(l))}))})}function gke(r,i){return r===i}function D5(r=_ke){return Qn((i,e)=>{let n=!1;i.subscribe(Un(e,o=>{n=!0,e.next(o)},()=>n?e.complete():e.error(r())))})}function _ke(){return new dg}function Ud(r){return Qn((i,e)=>{try{i.subscribe(e)}finally{e.add(r)}})}function So(r,i){let e=arguments.length>=2;return n=>n.pipe(r?mn((o,s)=>r(o,s,n)):Nh,Tn(1),e?Yb(i):D5(()=>new dg))}function pT(r){return r<=0?()=>Na:Qn((i,e)=>{let n=[];i.subscribe(Un(e,o=>{n.push(o),r<n.length&&n.shift()},()=>{for(let o of n)e.next(o);e.complete()},void 0,()=>{n=null}))})}function Hz(r,i){let e=arguments.length>=2;return n=>n.pipe(r?mn((o,s)=>r(o,s,n)):Nh,pT(1),e?Yb(i):D5(()=>new dg))}function k5(r,i){let e=Yn(r)?r:()=>r;return Yn(i)?M5(i,{connector:e}):n=>new V0(n,e)}function zC(){return Qn((r,i)=>{let e,n=!1;r.subscribe(Un(i,o=>{let s=e;e=o,n&&i.next([s,o]),n=!0}))})}function Wz(r){return r?i=>M5(r)(i):i=>k5(new Dt)(i)}function qz(r,i,e,n){e&&!Yn(e)&&(n=e);let o=Yn(e)?e:void 0;return s=>k5(new Vd(r,i,n),o)(s)}function Yz(r,i){return Qn(kse(r,i,arguments.length>=2,!0))}function BD(r={}){let{connector:i=()=>new Dt,resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:o=!0}=r;return s=>{let l,h,p,m=0,f=!1,g=!1,y=()=>{h?.unsubscribe(),h=void 0},_=()=>{y(),l=p=void 0,f=g=!1},w=()=>{let A=l;_(),A?.unsubscribe()};return Qn((A,k)=>{m++,!g&&!f&&y();let R=p=p??i();k.add(()=>{m--,m===0&&!g&&!f&&(h=Kz(w,o))}),R.subscribe(k),!l&&m>0&&(l=new Sy({next:$=>R.next($),error:$=>{g=!0,y(),h=Kz(_,e,$),R.error($)},complete:()=>{f=!0,y(),h=Kz(_,n),R.complete()}}),Do(A).subscribe(l))})(s)}}function Kz(r,i,...e){if(i===!0){r();return}if(i===!1)return;let n=new Sy({next:()=>{n.unsubscribe(),r()}});return Do(i(...e)).subscribe(n)}function GC(r,i,e){let n,o=!1;return r&&typeof r=="object"?{bufferSize:n=1/0,windowTime:i=1/0,refCount:o=!1,scheduler:e}=r:n=r??1/0,BD({connector:()=>new Vd(n,i,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function zd(r){return mn((i,e)=>r<=e)}function Uc(r){return Qn((i,e)=>{let n=!1,o=0;i.subscribe(Un(e,s=>(n||(n=!r(s,o++)))&&e.next(s)))})}function yo(...r){let i=$0(r);return Qn((e,n)=>{(i?Bh(r,e,i):Bh(r,e)).subscribe(n)})}function jr(r,i){return Qn((e,n)=>{let o=null,s=0,l=!1,h=()=>l&&!o&&n.complete();e.subscribe(Un(n,p=>{o?.unsubscribe();let m=0,f=s++;Do(r(p,f)).subscribe(o=Un(n,g=>n.next(i?i(p,g,f,m++):g),()=>{o=null,h()}))},()=>{l=!0,h()}))})}function rn(r){return Qn((i,e)=>{Do(r).subscribe(Un(e,()=>e.complete(),lg)),!e.closed&&i.subscribe(e)})}function Zz(r,i=!1){return Qn((e,n)=>{let o=0;e.subscribe(Un(n,s=>{let l=r(s,o++);(l||i)&&n.next(s),!l&&n.complete()}))})}function br(r,i,e){let n=Yn(r)||i||e?{next:r,error:i,complete:e}:r;return n?Qn((o,s)=>{var l;(l=n.subscribe)===null||l===void 0||l.call(n);let h=!0;o.subscribe(Un(s,p=>{var m;(m=n.next)===null||m===void 0||m.call(n,p),s.next(p)},()=>{var p;h=!1,(p=n.complete)===null||p===void 0||p.call(n),s.complete()},p=>{var m;h=!1,(m=n.error)===null||m===void 0||m.call(n,p),s.error(p)},()=>{var p,m;h&&((p=n.unsubscribe)===null||p===void 0||p.call(n)),(m=n.finalize)===null||m===void 0||m.call(n)}))}):Nh}var Iae="https://g.co/ng/security#xss",ki=class extends Error{constructor(i,e){super(v3(i,e)),this.code=i}};function v3(r,i){return`${`NG0${Math.abs(r)}`}${i?": "+i:""}`}function YD(r){return{toString:r}.toString()}var O5="__parameters__";function yke(r){return function(...e){if(r){let n=r(...e);for(let o in n)this[o]=n[o]}}}function Tae(r,i,e){return YD(()=>{let n=yke(i);function o(...s){if(this instanceof o)return n.apply(this,s),this;let l=new o(...s);return h.annotation=l,h;function h(p,m,f){let g=p.hasOwnProperty(O5)?p[O5]:Object.defineProperty(p,O5,{value:[]})[O5];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(l),p}}return e&&(o.prototype=Object.create(e.prototype)),o.prototype.ngMetadataName=r,o.annotationCls=o,o})}var Xm=globalThis;function Va(r){for(let i in r)if(r[i]===Va)return i;throw Error("Could not find renamed property on target object.")}function vke(r,i){for(let e in i)i.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(r[e]=i[e])}function $h(r){if(typeof r=="string")return r;if(Array.isArray(r))return"["+r.map($h).join(", ")+"]";if(r==null)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;let i=r.toString();if(i==null)return""+i;let e=i.indexOf(`
`);return e===-1?i:i.substring(0,e)}function d7(r,i){return r==null||r===""?i===null?"":i:i==null||i===""?r:r+" "+i}var bke=Va({__forward_ref__:Va});function Go(r){return r.__forward_ref__=Go,r.toString=function(){return $h(this())},r}function su(r){return Aae(r)?r():r}function Aae(r){return typeof r=="function"&&r.hasOwnProperty(bke)&&r.__forward_ref__===Go}function rt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Ut(r){return{providers:r.providers||[],imports:r.imports||[]}}function b3(r){return Rse(r,Mae)||Rse(r,Dae)}function Eae(r){return b3(r)!==null}function Rse(r,i){return r.hasOwnProperty(i)?r[i]:null}function wke(r){let i=r&&(r[Mae]||r[Dae]);return i||null}function Fse(r){return r&&(r.hasOwnProperty(Lse)||r.hasOwnProperty(Cke))?r[Lse]:null}var Mae=Va({\u0275prov:Va}),Lse=Va({\u0275inj:Va}),Dae=Va({ngInjectableDef:Va}),Cke=Va({ngInjectorDef:Va}),At=class{constructor(i,e){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=rt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function kae(r){return r&&!!r.\u0275providers}var xke=Va({\u0275cmp:Va}),Ske=Va({\u0275dir:Va}),Ike=Va({\u0275pipe:Va}),Tke=Va({\u0275mod:Va}),W5=Va({\u0275fac:Va}),VD=Va({__NG_ELEMENT_ID__:Va}),Nse=Va({__NG_ENV_ID__:Va});function pg(r){return typeof r=="string"?r:r==null?"":String(r)}function Ake(r){return typeof r=="function"?r.name||r.toString():typeof r=="object"&&r!=null&&typeof r.type=="function"?r.type.name||r.type.toString():pg(r)}function Eke(r,i){let e=i?`. Dependency path: ${i.join(" > ")} > ${r}`:"";throw new ki(-200,r)}function IG(r,i){throw new ki(-201,!1)}var ko=function(r){return r[r.Default=0]="Default",r[r.Host=1]="Host",r[r.Self=2]="Self",r[r.SkipSelf=4]="SkipSelf",r[r.Optional=8]="Optional",r}(ko||{}),u7;function Oae(){return u7}function fp(r){let i=u7;return u7=r,i}function Pae(r,i,e){let n=b3(r);if(n&&n.providedIn=="root")return n.value===void 0?n.value=n.factory():n.value;if(e&ko.Optional)return null;if(i!==void 0)return i;IG(r,"Injector")}var Mke={},$D=Mke,h7="__NG_DI_FLAG__",q5="ngTempTokenPath",Dke="ngTokenPath",kke=/\n/gm,Oke="\u0275",Bse="__source",_T;function Pke(){return _T}function Zb(r){let i=_T;return _T=r,i}function Rke(r,i=ko.Default){if(_T===void 0)throw new ki(-203,!1);return _T===null?Pae(r,void 0,i):_T.get(r,i&ko.Optional?null:void 0,i)}function xe(r,i=ko.Default){return(Oae()||Rke)(su(r),i)}function Et(r,i=ko.Default){return xe(r,w3(i))}function w3(r){return typeof r>"u"||typeof r=="number"?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function p7(r){let i=[];for(let e=0;e<r.length;e++){let n=su(r[e]);if(Array.isArray(n)){if(n.length===0)throw new ki(900,!1);let o,s=ko.Default;for(let l=0;l<n.length;l++){let h=n[l],p=Fke(h);typeof p=="number"?p===-1?o=h.token:s|=p:o=h}i.push(xe(o,s))}else i.push(xe(n))}return i}function Rae(r,i){return r[h7]=i,r.prototype[h7]=i,r}function Fke(r){return r[h7]}function Lke(r,i,e,n){let o=r[q5];throw i[Bse]&&o.unshift(i[Bse]),r.message=Nke(`
`+r.message,o,e,n),r[Dke]=o,r[q5]=null,r}function Nke(r,i,e,n=null){r=r&&r.charAt(0)===`
`&&r.charAt(1)==Oke?r.slice(2):r;let o=$h(i);if(Array.isArray(i))o=i.map($h).join(" -> ");else if(typeof i=="object"){let s=[];for(let l in i)if(i.hasOwnProperty(l)){let h=i[l];s.push(l+":"+(typeof h=="string"?JSON.stringify(h):$h(h)))}o=`{${s.join(", ")}}`}return`${e}${n?"("+n+")":""}[${o}]: ${r.replace(kke,`
  `)}`}var Jm=Rae(Tae("Optional"),8);var Y0=Rae(Tae("SkipSelf"),4);function WC(r,i){let e=r.hasOwnProperty(W5);return e?r[W5]:null}function Bke(r,i,e){if(r.length!==i.length)return!1;for(let n=0;n<r.length;n++){let o=r[n],s=i[n];if(e&&(o=e(o),s=e(s)),s!==o)return!1}return!0}function jke(r){return r.flat(Number.POSITIVE_INFINITY)}function TG(r,i){r.forEach(e=>Array.isArray(e)?TG(e,i):i(e))}function Fae(r,i,e){i>=r.length?r.push(e):r.splice(i,0,e)}function Y5(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function Vke(r,i){let e=[];for(let n=0;n<r;n++)e.push(i);return e}function $ke(r,i,e,n){let o=r.length;if(o==i)r.push(e,n);else if(o===1)r.push(n,r[0]),r[0]=e;else{for(o--,r.push(r[o-1],r[o]);o>i;){let s=o-2;r[o]=r[s],o--}r[i]=e,r[i+1]=n}}function C3(r,i,e){let n=KD(r,i);return n>=0?r[n|1]=e:(n=~n,$ke(r,n,i,e)),n}function Qz(r,i){let e=KD(r,i);if(e>=0)return r[e|1]}function KD(r,i){return Uke(r,i,1)}function Uke(r,i,e){let n=0,o=r.length>>e;for(;o!==n;){let s=n+(o-n>>1),l=r[s<<e];if(i===l)return s<<e;l>i?o=s:n=s+1}return~(o<<e)}var Iy={},Vh=[],vT=new At(""),Lae=new At("",-1),Nae=new At(""),K5=class{get(i,e=$D){if(e===$D){let n=new Error(`NullInjectorError: No provider for ${$h(i)}!`);throw n.name="NullInjectorError",n}return e}},Bae=function(r){return r[r.OnPush=0]="OnPush",r[r.Default=1]="Default",r}(Bae||{}),G0=function(r){return r[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",r}(G0||{}),ew=function(r){return r[r.None=0]="None",r[r.SignalBased=1]="SignalBased",r[r.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",r}(ew||{});function zke(r,i,e){let n=r.length;for(;;){let o=r.indexOf(i,e);if(o===-1)return o;if(o===0||r.charCodeAt(o-1)<=32){let s=i.length;if(o+s===n||r.charCodeAt(o+s)<=32)return o}e=o+1}}function m7(r,i,e){let n=0;for(;n<e.length;){let o=e[n];if(typeof o=="number"){if(o!==0)break;n++;let s=e[n++],l=e[n++],h=e[n++];r.setAttribute(i,l,h,s)}else{let s=o,l=e[++n];Gke(s)?r.setProperty(i,s,l):r.setAttribute(i,s,l),n++}}return n}function jae(r){return r===3||r===4||r===6}function Gke(r){return r.charCodeAt(0)===64}function UD(r,i){if(!(i===null||i.length===0))if(r===null||r.length===0)r=i.slice();else{let e=-1;for(let n=0;n<i.length;n++){let o=i[n];typeof o=="number"?e=o:e===0||(e===-1||e===2?jse(r,e,o,null,i[++n]):jse(r,e,o,null,null))}}return r}function jse(r,i,e,n,o){let s=0,l=r.length;if(i===-1)l=-1;else for(;s<r.length;){let h=r[s++];if(typeof h=="number"){if(h===i){l=-1;break}else if(h>i){l=s-1;break}}}for(;s<r.length;){let h=r[s];if(typeof h=="number")break;if(h===e){if(n===null){o!==null&&(r[s+1]=o);return}else if(n===r[s+1]){r[s+2]=o;return}}s++,n!==null&&s++,o!==null&&s++}l!==-1&&(r.splice(l,0,i),s=l+1),r.splice(s++,0,e),n!==null&&r.splice(s++,0,n),o!==null&&r.splice(s++,0,o)}var Vae="ng-template";function Hke(r,i,e,n){let o=0;if(n){for(;o<i.length&&typeof i[o]=="string";o+=2)if(i[o]==="class"&&zke(i[o+1].toLowerCase(),e,0)!==-1)return!0}else if(AG(r))return!1;if(o=i.indexOf(1,o),o>-1){let s;for(;++o<i.length&&typeof(s=i[o])=="string";)if(s.toLowerCase()===e)return!0}return!1}function AG(r){return r.type===4&&r.value!==Vae}function Wke(r,i,e){let n=r.type===4&&!e?Vae:r.value;return i===n}function qke(r,i,e){let n=4,o=r.attrs,s=o!==null?Zke(o):0,l=!1;for(let h=0;h<i.length;h++){let p=i[h];if(typeof p=="number"){if(!l&&!ug(n)&&!ug(p))return!1;if(l&&ug(p))continue;l=!1,n=p|n&1;continue}if(!l)if(n&4){if(n=2|n&1,p!==""&&!Wke(r,p,e)||p===""&&i.length===1){if(ug(n))return!1;l=!0}}else if(n&8){if(o===null||!Hke(r,o,p,e)){if(ug(n))return!1;l=!0}}else{let m=i[++h],f=Yke(p,o,AG(r),e);if(f===-1){if(ug(n))return!1;l=!0;continue}if(m!==""){let g;if(f>s?g="":g=o[f+1].toLowerCase(),n&2&&m!==g){if(ug(n))return!1;l=!0}}}}return ug(n)||l}function ug(r){return(r&1)===0}function Yke(r,i,e,n){if(i===null)return-1;let o=0;if(n||!e){let s=!1;for(;o<i.length;){let l=i[o];if(l===r)return o;if(l===3||l===6)s=!0;else if(l===1||l===2){let h=i[++o];for(;typeof h=="string";)h=i[++o];continue}else{if(l===4)break;if(l===0){o+=4;continue}}o+=s?1:2}return-1}else return Qke(i,r)}function $ae(r,i,e=!1){for(let n=0;n<i.length;n++)if(qke(r,i[n],e))return!0;return!1}function Kke(r){let i=r.attrs;if(i!=null){let e=i.indexOf(5);if(!(e&1))return i[e+1]}return null}function Zke(r){for(let i=0;i<r.length;i++){let e=r[i];if(jae(e))return i}return r.length}function Qke(r,i){let e=r.indexOf(4);if(e>-1)for(e++;e<r.length;){let n=r[e];if(typeof n=="number")return-1;if(n===i)return e;e++}return-1}function Xke(r,i){e:for(let e=0;e<i.length;e++){let n=i[e];if(r.length===n.length){for(let o=0;o<r.length;o++)if(r[o]!==n[o])continue e;return!0}}return!1}function Vse(r,i){return r?":not("+i.trim()+")":i}function Jke(r){let i=r[0],e=1,n=2,o="",s=!1;for(;e<r.length;){let l=r[e];if(typeof l=="string")if(n&2){let h=r[++e];o+="["+l+(h.length>0?'="'+h+'"':"")+"]"}else n&8?o+="."+l:n&4&&(o+=" "+l);else o!==""&&!ug(l)&&(i+=Vse(s,o),o=""),n=l,s=s||!ug(n);e++}return o!==""&&(i+=Vse(s,o)),i}function eOe(r){return r.map(Jke).join(",")}function tOe(r){let i=[],e=[],n=1,o=2;for(;n<r.length;){let s=r[n];if(typeof s=="string")o===2?s!==""&&i.push(s,r[++n]):o===8&&e.push(s);else{if(!ug(o))break;o=s}n++}return{attrs:i,classes:e}}function gt(r){return YD(()=>{let i=Hae(r),e=li(Xe({},i),{decls:r.decls,vars:r.vars,template:r.template,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,onPush:r.changeDetection===Bae.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&r.dependencies||null,getStandaloneInjector:null,signals:r.signals??!1,data:r.data||{},encapsulation:r.encapsulation||G0.Emulated,styles:r.styles||Vh,_:null,schemas:r.schemas||null,tView:null,id:""});Wae(e);let n=r.dependencies;return e.directiveDefs=Use(n,!1),e.pipeDefs=Use(n,!0),e.id=rOe(e),e})}function iOe(r){return tw(r)||EG(r)}function nOe(r){return r!==null}function zt(r){return YD(()=>({type:r.type,bootstrap:r.bootstrap||Vh,declarations:r.declarations||Vh,imports:r.imports||Vh,exports:r.exports||Vh,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function $se(r,i){if(r==null)return Iy;let e={};for(let n in r)if(r.hasOwnProperty(n)){let o=r[n],s,l,h=ew.None;Array.isArray(o)?(h=o[0],s=o[1],l=o[2]??s):(s=o,l=o),i?(e[s]=h!==ew.None?[n,h]:n,i[s]=l):e[s]=n}return e}function Pt(r){return YD(()=>{let i=Hae(r);return Wae(i),i})}function fg(r){return{type:r.type,name:r.name,factory:null,pure:r.pure!==!1,standalone:r.standalone===!0,onDestroy:r.type.prototype.ngOnDestroy||null}}function tw(r){return r[xke]||null}function EG(r){return r[Ske]||null}function Uae(r){return r[Ike]||null}function zae(r){let i=tw(r)||EG(r)||Uae(r);return i!==null?i.standalone:!1}function Gae(r,i){let e=r[Tke]||null;if(!e&&i===!0)throw new Error(`Type ${$h(r)} does not have '\u0275mod' property.`);return e}function Hae(r){let i={};return{type:r.type,providersResolver:null,factory:null,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:i,inputTransforms:null,inputConfig:r.inputs||Iy,exportAs:r.exportAs||null,standalone:r.standalone===!0,signals:r.signals===!0,selectors:r.selectors||Vh,viewQuery:r.viewQuery||null,features:r.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$se(r.inputs,i),outputs:$se(r.outputs),debugInfo:null}}function Wae(r){r.features?.forEach(i=>i(r))}function Use(r,i){if(!r)return null;let e=i?Uae:iOe;return()=>(typeof r=="function"?r():r).map(n=>e(n)).filter(nOe)}function rOe(r){let i=0,e=[r.selectors,r.ngContentSelectors,r.hostVars,r.hostAttrs,r.consts,r.vars,r.decls,r.encapsulation,r.standalone,r.signals,r.exportAs,JSON.stringify(r.inputs),JSON.stringify(r.outputs),Object.getOwnPropertyNames(r.type.prototype),!!r.contentQueries,!!r.viewQuery].join("|");for(let o of e)i=Math.imul(31,i)+o.charCodeAt(0)<<0;return i+=2147483648,"c"+i}function Bl(r){return{\u0275providers:r}}function ZD(...r){return{\u0275providers:qae(!0,r),\u0275fromNgModule:!0}}function qae(r,...i){let e=[],n=new Set,o,s=l=>{e.push(l)};return TG(i,l=>{let h=l;f7(h,s,[],n)&&(o||=[],o.push(h))}),o!==void 0&&Yae(o,s),e}function Yae(r,i){for(let e=0;e<r.length;e++){let{ngModule:n,providers:o}=r[e];MG(o,s=>{i(s,n)})}}function f7(r,i,e,n){if(r=su(r),!r)return!1;let o=null,s=Fse(r),l=!s&&tw(r);if(!s&&!l){let p=r.ngModule;if(s=Fse(p),s)o=p;else return!1}else{if(l&&!l.standalone)return!1;o=r}let h=n.has(o);if(l){if(h)return!1;if(n.add(o),l.dependencies){let p=typeof l.dependencies=="function"?l.dependencies():l.dependencies;for(let m of p)f7(m,i,e,n)}}else if(s){if(s.imports!=null&&!h){n.add(o);let m;try{TG(s.imports,f=>{f7(f,i,e,n)&&(m||=[],m.push(f))})}finally{}m!==void 0&&Yae(m,i)}if(!h){let m=WC(o)||(()=>new o);i({provide:o,useFactory:m,deps:Vh},o),i({provide:Nae,useValue:o,multi:!0},o),i({provide:vT,useValue:()=>xe(o),multi:!0},o)}let p=s.providers;if(p!=null&&!h){let m=r;MG(p,f=>{i(f,m)})}}else return!1;return o!==r&&r.providers!==void 0}function MG(r,i){for(let e of r)kae(e)&&(e=e.\u0275providers),Array.isArray(e)?MG(e,i):i(e)}var oOe=Va({provide:String,useValue:Va});function Kae(r){return r!==null&&typeof r=="object"&&oOe in r}function sOe(r){return!!(r&&r.useExisting)}function aOe(r){return!!(r&&r.useFactory)}function bT(r){return typeof r=="function"}function lOe(r){return!!r.useClass}var x3=new At(""),j5={},cOe={},Xz;function S3(){return Xz===void 0&&(Xz=new K5),Xz}var zc=class{},zD=class extends zc{get destroyed(){return this._destroyed}constructor(i,e,n,o){super(),this.parent=e,this.source=n,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_7(i,l=>this.processProvider(l)),this.records.set(Lae,mT(void 0,this)),o.has("environment")&&this.records.set(zc,mT(void 0,this));let s=this.records.get(x3);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Nae,Vh,ko.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let i=zo(null);try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),zo(i)}}onDestroy(i){return this.assertNotDestroyed(),this._onDestroyHooks.push(i),()=>this.removeOnDestroy(i)}runInContext(i){this.assertNotDestroyed();let e=Zb(this),n=fp(void 0),o;try{return i()}finally{Zb(e),fp(n)}}get(i,e=$D,n=ko.Default){if(this.assertNotDestroyed(),i.hasOwnProperty(Nse))return i[Nse](this);n=w3(n);let o,s=Zb(this),l=fp(void 0);try{if(!(n&ko.SkipSelf)){let p=this.records.get(i);if(p===void 0){let m=mOe(i)&&b3(i);m&&this.injectableDefInScope(m)?p=mT(g7(i),j5):p=null,this.records.set(i,p)}if(p!=null)return this.hydrate(i,p)}let h=n&ko.Self?S3():this.parent;return e=n&ko.Optional&&e===$D?null:e,h.get(i,e)}catch(h){if(h.name==="NullInjectorError"){if((h[q5]=h[q5]||[]).unshift($h(i)),s)throw h;return Lke(h,i,"R3InjectorError",this.source)}else throw h}finally{fp(l),Zb(s)}}resolveInjectorInitializers(){let i=zo(null),e=Zb(this),n=fp(void 0),o;try{let s=this.get(vT,Vh,ko.Self);for(let l of s)l()}finally{Zb(e),fp(n),zo(i)}}toString(){let i=[],e=this.records;for(let n of e.keys())i.push($h(n));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ki(205,!1)}processProvider(i){i=su(i);let e=bT(i)?i:su(i&&i.provide),n=uOe(i);if(!bT(i)&&i.multi===!0){let o=this.records.get(e);o||(o=mT(void 0,j5,!0),o.factory=()=>p7(o.multi),this.records.set(e,o)),e=i,o.multi.push(i)}this.records.set(e,n)}hydrate(i,e){let n=zo(null);try{return e.value===j5&&(e.value=cOe,e.value=e.factory()),typeof e.value=="object"&&e.value&&pOe(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{zo(n)}}injectableDefInScope(i){if(!i.providedIn)return!1;let e=su(i.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(i){let e=this._onDestroyHooks.indexOf(i);e!==-1&&this._onDestroyHooks.splice(e,1)}};function g7(r){let i=b3(r),e=i!==null?i.factory:WC(r);if(e!==null)return e;if(r instanceof At)throw new ki(204,!1);if(r instanceof Function)return dOe(r);throw new ki(204,!1)}function dOe(r){if(r.length>0)throw new ki(204,!1);let e=wke(r);return e!==null?()=>e.factory(r):()=>new r}function uOe(r){if(Kae(r))return mT(void 0,r.useValue);{let i=Zae(r);return mT(i,j5)}}function Zae(r,i,e){let n;if(bT(r)){let o=su(r);return WC(o)||g7(o)}else if(Kae(r))n=()=>su(r.useValue);else if(aOe(r))n=()=>r.useFactory(...p7(r.deps||[]));else if(sOe(r))n=()=>xe(su(r.useExisting));else{let o=su(r&&(r.useClass||r.provide));if(hOe(r))n=()=>new o(...p7(r.deps));else return WC(o)||g7(o)}return n}function mT(r,i,e=!1){return{factory:r,value:i,multi:e?[]:void 0}}function hOe(r){return!!r.deps}function pOe(r){return r!==null&&typeof r=="object"&&typeof r.ngOnDestroy=="function"}function mOe(r){return typeof r=="function"||typeof r=="object"&&r instanceof At}function _7(r,i){for(let e of r)Array.isArray(e)?_7(e,i):e&&kae(e)?_7(e.\u0275providers,i):i(e)}function gg(r,i){r instanceof zD&&r.assertNotDestroyed();let e,n=Zb(r),o=fp(void 0);try{return i()}finally{Zb(n),fp(o)}}function Qae(){return Oae()!==void 0||Pke()!=null}function QD(r){if(!Qae())throw new ki(-203,!1)}function fOe(r){return typeof r=="function"}var K0=0,zr=1,Dr=2,Zu=3,mg=4,yp=5,wT=6,Z5=7,Yu=8,CT=9,H0=10,hl=11,GD=12,zse=13,MT=14,dm=15,qC=16,fT=17,Ty=18,I3=19,Xae=20,Xb=21,V5=22,Qm=23,Gd=25,DG=1;var YC=7,Q5=8,xT=9,Ku=10,X5=function(r){return r[r.None=0]="None",r[r.HasTransplantedViews=2]="HasTransplantedViews",r}(X5||{});function Jb(r){return Array.isArray(r)&&typeof r[DG]=="object"}function My(r){return Array.isArray(r)&&r[DG]===!0}function kG(r){return(r.flags&4)!==0}function T3(r){return r.componentOffset>-1}function A3(r){return(r.flags&1)===1}function Ay(r){return!!r.template}function y7(r){return(r[Dr]&512)!==0}var v7=class{constructor(i,e,n){this.previousValue=i,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}};function Jae(r,i,e,n){i!==null?i.applyValueToInputSignal(i,n):r[e]=n}function Jn(){return ele}function ele(r){return r.type.prototype.ngOnChanges&&(r.setInput=_Oe),gOe}Jn.ngInherit=!0;function gOe(){let r=ile(this),i=r?.current;if(i){let e=r.previous;if(e===Iy)r.previous=i;else for(let n in i)e[n]=i[n];r.current=null,this.ngOnChanges(i)}}function _Oe(r,i,e,n,o){let s=this.declaredInputs[n],l=ile(r)||yOe(r,{previous:Iy,current:null}),h=l.current||(l.current={}),p=l.previous,m=p[s];h[s]=new v7(m&&m.currentValue,e,p===Iy),Jae(r,i,o,e)}var tle="__ngSimpleChanges__";function ile(r){return r[tle]||null}function yOe(r,i){return r[tle]=i}var Gse=null;var U0=function(r,i,e){Gse?.(r,i,e)},nle="svg",vOe="math";function W0(r){for(;Array.isArray(r);)r=r[K0];return r}function bOe(r){for(;Array.isArray(r);){if(typeof r[DG]=="object")return r;r=r[K0]}return null}function rle(r,i){return W0(i[r])}function ef(r,i){return W0(i[r.index])}function OG(r,i){return r.data[i]}function PG(r,i){return r[i]}function sw(r,i){let e=i[r];return Jb(e)?e:e[K0]}function wOe(r){return(r[Dr]&4)===4}function RG(r){return(r[Dr]&128)===128}function COe(r){return My(r[Zu])}function iw(r,i){return i==null?null:r[i]}function ole(r){r[fT]=0}function sle(r){r[Dr]&1024||(r[Dr]|=1024,RG(r)&&M3(r))}function xOe(r,i){for(;r>0;)i=i[MT],r--;return i}function E3(r){return!!(r[Dr]&9216||r[Qm]?.dirty)}function b7(r){r[H0].changeDetectionScheduler?.notify(8),r[Dr]&64&&(r[Dr]|=1024),E3(r)&&M3(r)}function M3(r){r[H0].changeDetectionScheduler?.notify(0);let i=KC(r);for(;i!==null&&!(i[Dr]&8192||(i[Dr]|=8192,!RG(i)));)i=KC(i)}function ale(r,i){if((r[Dr]&256)===256)throw new ki(911,!1);r[Xb]===null&&(r[Xb]=[]),r[Xb].push(i)}function SOe(r,i){if(r[Xb]===null)return;let e=r[Xb].indexOf(i);e!==-1&&r[Xb].splice(e,1)}function KC(r){let i=r[Zu];return My(i)?i[Zu]:i}var mo={lFrame:gle(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var lle=!1;function IOe(){return mo.lFrame.elementDepthCount}function TOe(){mo.lFrame.elementDepthCount++}function AOe(){mo.lFrame.elementDepthCount--}function cle(){return mo.bindingsEnabled}function dle(){return mo.skipHydrationRootTNode!==null}function EOe(r){return mo.skipHydrationRootTNode===r}function MOe(){mo.skipHydrationRootTNode=null}function wr(){return mo.lFrame.lView}function el(){return mo.lFrame.tView}function Re(r){return mo.lFrame.contextLView=r,r[Yu]}function Fe(r){return mo.lFrame.contextLView=null,r}function Hd(){let r=ule();for(;r!==null&&r.type===64;)r=r.parent;return r}function ule(){return mo.lFrame.currentTNode}function DOe(){let r=mo.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}function tx(r,i){let e=mo.lFrame;e.currentTNode=r,e.isParent=i}function FG(){return mo.lFrame.isParent}function LG(){mo.lFrame.isParent=!1}function kOe(){return mo.lFrame.contextLView}function hle(){return lle}function Hse(r){lle=r}function XD(){let r=mo.lFrame,i=r.bindingRootIndex;return i===-1&&(i=r.bindingRootIndex=r.tView.bindingStartIndex),i}function ple(){return mo.lFrame.bindingIndex}function OOe(r){return mo.lFrame.bindingIndex=r}function aw(){return mo.lFrame.bindingIndex++}function D3(r){let i=mo.lFrame,e=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,e}function POe(){return mo.lFrame.inI18n}function ROe(r,i){let e=mo.lFrame;e.bindingIndex=e.bindingRootIndex=r,w7(i)}function FOe(){return mo.lFrame.currentDirectiveIndex}function w7(r){mo.lFrame.currentDirectiveIndex=r}function NG(r){let i=mo.lFrame.currentDirectiveIndex;return i===-1?null:r[i]}function BG(){return mo.lFrame.currentQueryIndex}function k3(r){mo.lFrame.currentQueryIndex=r}function LOe(r){let i=r[zr];return i.type===2?i.declTNode:i.type===1?r[yp]:null}function mle(r,i,e){if(e&ko.SkipSelf){let o=i,s=r;for(;o=o.parent,o===null&&!(e&ko.Host);)if(o=LOe(s),o===null||(s=s[MT],o.type&10))break;if(o===null)return!1;i=o,r=s}let n=mo.lFrame=fle();return n.currentTNode=i,n.lView=r,!0}function jG(r){let i=fle(),e=r[zr];mo.lFrame=i,i.currentTNode=e.firstChild,i.lView=r,i.tView=e,i.contextLView=r,i.bindingIndex=e.bindingStartIndex,i.inI18n=!1}function fle(){let r=mo.lFrame,i=r===null?null:r.child;return i===null?gle(r):i}function gle(r){let i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return r!==null&&(r.child=i),i}function _le(){let r=mo.lFrame;return mo.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}var yle=_le;function VG(){let r=_le();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function NOe(r){return(mo.lFrame.contextLView=xOe(r,mo.lFrame.contextLView))[Yu]}function Z0(){return mo.lFrame.selectedIndex}function ZC(r){mo.lFrame.selectedIndex=r}function DT(){let r=mo.lFrame;return OG(r.tView,r.selectedIndex)}function jl(){mo.lFrame.currentNamespace=nle}function Q0(){BOe()}function BOe(){mo.lFrame.currentNamespace=null}function jOe(){return mo.lFrame.currentNamespace}var vle=!0;function O3(){return vle}function P3(r){vle=r}function VOe(r,i,e){let{ngOnChanges:n,ngOnInit:o,ngDoCheck:s}=i.type.prototype;if(n){let l=ele(i);(e.preOrderHooks??=[]).push(r,l),(e.preOrderCheckHooks??=[]).push(r,l)}o&&(e.preOrderHooks??=[]).push(0-r,o),s&&((e.preOrderHooks??=[]).push(r,s),(e.preOrderCheckHooks??=[]).push(r,s))}function R3(r,i){for(let e=i.directiveStart,n=i.directiveEnd;e<n;e++){let s=r.data[e].type.prototype,{ngAfterContentInit:l,ngAfterContentChecked:h,ngAfterViewInit:p,ngAfterViewChecked:m,ngOnDestroy:f}=s;l&&(r.contentHooks??=[]).push(-e,l),h&&((r.contentHooks??=[]).push(e,h),(r.contentCheckHooks??=[]).push(e,h)),p&&(r.viewHooks??=[]).push(-e,p),m&&((r.viewHooks??=[]).push(e,m),(r.viewCheckHooks??=[]).push(e,m)),f!=null&&(r.destroyHooks??=[]).push(e,f)}}function $5(r,i,e){ble(r,i,3,e)}function U5(r,i,e,n){(r[Dr]&3)===e&&ble(r,i,e,n)}function Jz(r,i){let e=r[Dr];(e&3)===i&&(e&=16383,e+=1,r[Dr]=e)}function ble(r,i,e,n){let o=n!==void 0?r[fT]&65535:0,s=n??-1,l=i.length-1,h=0;for(let p=o;p<l;p++)if(typeof i[p+1]=="number"){if(h=i[p],n!=null&&h>=n)break}else i[p]<0&&(r[fT]+=65536),(h<s||s==-1)&&($Oe(r,e,i,p),r[fT]=(r[fT]&4294901760)+p+2),p++}function Wse(r,i){U0(4,r,i);let e=zo(null);try{i.call(r)}finally{zo(e),U0(5,r,i)}}function $Oe(r,i,e,n){let o=e[n]<0,s=e[n+1],l=o?-e[n]:e[n],h=r[l];o?r[Dr]>>14<r[fT]>>16&&(r[Dr]&3)===i&&(r[Dr]+=16384,Wse(h,s)):Wse(h,s)}var yT=-1,QC=class{constructor(i,e,n){this.factory=i,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}};function UOe(r){return r instanceof QC}function zOe(r){return(r.flags&8)!==0}function GOe(r){return(r.flags&16)!==0}var e7={},C7=class{constructor(i,e){this.injector=i,this.parentInjector=e}get(i,e,n){n=w3(n);let o=this.injector.get(i,e7,n);return o!==e7||e===e7?o:this.parentInjector.get(i,e,n)}};function wle(r){return r!==yT}function J5(r){return r&32767}function HOe(r){return r>>16}function e3(r,i){let e=HOe(r),n=i;for(;e>0;)n=n[MT],e--;return n}var x7=!0;function t3(r){let i=x7;return x7=r,i}var WOe=256,Cle=WOe-1,xle=5,qOe=0,z0={};function YOe(r,i,e){let n;typeof e=="string"?n=e.charCodeAt(0)||0:e.hasOwnProperty(VD)&&(n=e[VD]),n==null&&(n=e[VD]=qOe++);let o=n&Cle,s=1<<o;i.data[r+(o>>xle)]|=s}function i3(r,i){let e=Sle(r,i);if(e!==-1)return e;let n=i[zr];n.firstCreatePass&&(r.injectorIndex=i.length,t7(n.data,r),t7(i,null),t7(n.blueprint,null));let o=$G(r,i),s=r.injectorIndex;if(wle(o)){let l=J5(o),h=e3(o,i),p=h[zr].data;for(let m=0;m<8;m++)i[s+m]=h[l+m]|p[l+m]}return i[s+8]=o,s}function t7(r,i){r.push(0,0,0,0,0,0,0,0,i)}function Sle(r,i){return r.injectorIndex===-1||r.parent&&r.parent.injectorIndex===r.injectorIndex||i[r.injectorIndex+8]===null?-1:r.injectorIndex}function $G(r,i){if(r.parent&&r.parent.injectorIndex!==-1)return r.parent.injectorIndex;let e=0,n=null,o=i;for(;o!==null;){if(n=Mle(o),n===null)return yT;if(e++,o=o[MT],n.injectorIndex!==-1)return n.injectorIndex|e<<16}return yT}function S7(r,i,e){YOe(r,i,e)}function KOe(r,i){if(i==="class")return r.classes;if(i==="style")return r.styles;let e=r.attrs;if(e){let n=e.length,o=0;for(;o<n;){let s=e[o];if(jae(s))break;if(s===0)o=o+2;else if(typeof s=="number")for(o++;o<n&&typeof e[o]=="string";)o++;else{if(s===i)return e[o+1];o=o+2}}}return null}function Ile(r,i,e){if(e&ko.Optional||r!==void 0)return r;IG(i,"NodeInjector")}function Tle(r,i,e,n){if(e&ko.Optional&&n===void 0&&(n=null),!(e&(ko.Self|ko.Host))){let o=r[CT],s=fp(void 0);try{return o?o.get(i,n,e&ko.Optional):Pae(i,n,e&ko.Optional)}finally{fp(s)}}return Ile(n,i,e)}function Ale(r,i,e,n=ko.Default,o){if(r!==null){if(i[Dr]&2048&&!(n&ko.Self)){let l=JOe(r,i,e,n,z0);if(l!==z0)return l}let s=Ele(r,i,e,n,z0);if(s!==z0)return s}return Tle(i,e,n,o)}function Ele(r,i,e,n,o){let s=QOe(e);if(typeof s=="function"){if(!mle(i,r,n))return n&ko.Host?Ile(o,e,n):Tle(i,e,n,o);try{let l;if(l=s(n),l==null&&!(n&ko.Optional))IG(e);else return l}finally{yle()}}else if(typeof s=="number"){let l=null,h=Sle(r,i),p=yT,m=n&ko.Host?i[dm][yp]:null;for((h===-1||n&ko.SkipSelf)&&(p=h===-1?$G(r,i):i[h+8],p===yT||!Yse(n,!1)?h=-1:(l=i[zr],h=J5(p),i=e3(p,i)));h!==-1;){let f=i[zr];if(qse(s,h,f.data)){let g=ZOe(h,i,e,l,n,m);if(g!==z0)return g}p=i[h+8],p!==yT&&Yse(n,i[zr].data[h+8]===m)&&qse(s,h,i)?(l=f,h=J5(p),i=e3(p,i)):h=-1}}return o}function ZOe(r,i,e,n,o,s){let l=i[zr],h=l.data[r+8],p=n==null?T3(h)&&x7:n!=l&&(h.type&3)!==0,m=o&ko.Host&&s===h,f=z5(h,l,e,p,m);return f!==null?XC(i,l,f,h):z0}function z5(r,i,e,n,o){let s=r.providerIndexes,l=i.data,h=s&1048575,p=r.directiveStart,m=r.directiveEnd,f=s>>20,g=n?h:h+f,y=o?h+f:m;for(let _=g;_<y;_++){let w=l[_];if(_<p&&e===w||_>=p&&w.type===e)return _}if(o){let _=l[p];if(_&&Ay(_)&&_.type===e)return p}return null}function XC(r,i,e,n){let o=r[e],s=i.data;if(UOe(o)){let l=o;l.resolving&&Eke(Ake(s[e]));let h=t3(l.canSeeViewProviders);l.resolving=!0;let p,m=l.injectImpl?fp(l.injectImpl):null,f=mle(r,n,ko.Default);try{o=r[e]=l.factory(void 0,s,r,n),i.firstCreatePass&&e>=n.directiveStart&&VOe(e,s[e],i)}finally{m!==null&&fp(m),t3(h),l.resolving=!1,yle()}}return o}function QOe(r){if(typeof r=="string")return r.charCodeAt(0)||0;let i=r.hasOwnProperty(VD)?r[VD]:void 0;return typeof i=="number"?i>=0?i&Cle:XOe:i}function qse(r,i,e){let n=1<<r;return!!(e[i+(r>>xle)]&n)}function Yse(r,i){return!(r&ko.Self)&&!(r&ko.Host&&i)}var HC=class{constructor(i,e){this._tNode=i,this._lView=e}get(i,e,n){return Ale(this._tNode,this._lView,i,w3(n),e)}};function XOe(){return new HC(Hd(),wr())}function Gr(r){return YD(()=>{let i=r.prototype.constructor,e=i[W5]||I7(i),n=Object.prototype,o=Object.getPrototypeOf(r.prototype).constructor;for(;o&&o!==n;){let s=o[W5]||I7(o);if(s&&s!==e)return s;o=Object.getPrototypeOf(o)}return s=>new s})}function I7(r){return Aae(r)?()=>{let i=I7(su(r));return i&&i()}:WC(r)}function JOe(r,i,e,n,o){let s=r,l=i;for(;s!==null&&l!==null&&l[Dr]&2048&&!(l[Dr]&512);){let h=Ele(s,l,e,n|ko.Self,z0);if(h!==z0)return h;let p=s.parent;if(!p){let m=l[Xae];if(m){let f=m.get(e,z0,n);if(f!==z0)return f}p=Mle(l),l=l[MT]}s=p}return o}function Mle(r){let i=r[zr],e=i.type;return e===2?i.declTNode:e===1?r[yp]:null}function oc(r){return KOe(Hd(),r)}function Kse(r,i=null,e=null,n){let o=Dle(r,i,e,n);return o.resolveInjectorInitializers(),o}function Dle(r,i=null,e=null,n,o=new Set){let s=[e||Vh,ZD(r)];return n=n||(typeof r=="object"?void 0:$h(r)),new zD(s,i||S3(),n||null,o)}var yn=class r{static{this.THROW_IF_NOT_FOUND=$D}static{this.NULL=new K5}static create(i,e){if(Array.isArray(i))return Kse({name:""},e,i,"");{let n=i.name??"";return Kse({name:n},i.parent,i.providers,n)}}static{this.\u0275prov=rt({token:r,providedIn:"any",factory:()=>xe(Lae)})}static{this.__NG_ELEMENT_ID__=-1}};var ePe=new At("");ePe.__NG_ELEMENT_ID__=r=>{let i=Hd();if(i===null)throw new ki(204,!1);if(i.type&2)return i.value;if(r&ko.Optional)return null;throw new ki(204,!1)};var tPe="ngOriginalError";function i7(r){return r[tPe]}var kle=!0,F3=(()=>{class r{static{this.__NG_ELEMENT_ID__=iPe}static{this.__NG_ENV_ID__=e=>e}}return r})(),T7=class extends F3{constructor(i){super(),this._lView=i}onDestroy(i){return ale(this._lView,i),()=>SOe(this._lView,i)}};function iPe(){return new T7(wr())}var X0=(()=>{class r{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new mt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=rt({token:r,providedIn:"root",factory:()=>new r})}}return r})();var A7=class extends Dt{constructor(i=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=i,Qae()&&(this.destroyRef=Et(F3,{optional:!0})??void 0,this.pendingTasks=Et(X0,{optional:!0})??void 0)}emit(i){let e=zo(null);try{super.next(i)}finally{zo(e)}}subscribe(i,e,n){let o=i,s=e||(()=>null),l=n;if(i&&typeof i=="object"){let p=i;o=p.next?.bind(p),s=p.error?.bind(p),l=p.complete?.bind(p)}this.__isAsync&&(s=this.wrapInTimeout(s),o&&(o=this.wrapInTimeout(o)),l&&(l=this.wrapInTimeout(l)));let h=super.subscribe({next:o,error:s,complete:l});return i instanceof pn&&i.add(h),h}wrapInTimeout(i){return e=>{let n=this.pendingTasks?.add();setTimeout(()=>{i(e),n!==void 0&&this.pendingTasks?.remove(n)})}}},it=A7;function n3(...r){}function Ole(r){let i,e;function n(){r=n3;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),i!==void 0&&clearTimeout(i)}catch{}}return i=setTimeout(()=>{r(),n()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{r(),n()})),()=>n()}function Zse(r){return queueMicrotask(()=>r()),()=>{r=n3}}var UG="isAngularZone",r3=UG+"_ID",nPe=0,ci=class r{constructor(i){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new it(!1),this.onMicrotaskEmpty=new it(!1),this.onStable=new it(!1),this.onError=new it(!1);let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:s=kle}=i;if(typeof Zone>"u")throw new ki(908,!1);Zone.assertZonePatched();let l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!o&&n,l.shouldCoalesceRunChangeDetection=o,l.callbackScheduled=!1,l.scheduleInRootZone=s,sPe(l)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(UG)===!0}static assertInAngularZone(){if(!r.isInAngularZone())throw new ki(909,!1)}static assertNotInAngularZone(){if(r.isInAngularZone())throw new ki(909,!1)}run(i,e,n){return this._inner.run(i,e,n)}runTask(i,e,n,o){let s=this._inner,l=s.scheduleEventTask("NgZoneEvent: "+o,i,rPe,n3,n3);try{return s.runTask(l,e,n)}finally{s.cancelTask(l)}}runGuarded(i,e,n){return this._inner.runGuarded(i,e,n)}runOutsideAngular(i){return this._outer.run(i)}},rPe={};function zG(r){if(r._nesting==0&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function oPe(r){if(r.isCheckStableRunning||r.callbackScheduled)return;r.callbackScheduled=!0;function i(){Ole(()=>{r.callbackScheduled=!1,E7(r),r.isCheckStableRunning=!0,zG(r),r.isCheckStableRunning=!1})}r.scheduleInRootZone?Zone.root.run(()=>{i()}):r._outer.run(()=>{i()}),E7(r)}function sPe(r){let i=()=>{oPe(r)},e=nPe++;r._inner=r._inner.fork({name:"angular",properties:{[UG]:!0,[r3]:e,[r3+e]:!0},onInvokeTask:(n,o,s,l,h,p)=>{if(aPe(p))return n.invokeTask(s,l,h,p);try{return Qse(r),n.invokeTask(s,l,h,p)}finally{(r.shouldCoalesceEventChangeDetection&&l.type==="eventTask"||r.shouldCoalesceRunChangeDetection)&&i(),Xse(r)}},onInvoke:(n,o,s,l,h,p,m)=>{try{return Qse(r),n.invoke(s,l,h,p,m)}finally{r.shouldCoalesceRunChangeDetection&&!r.callbackScheduled&&!lPe(p)&&i(),Xse(r)}},onHasTask:(n,o,s,l)=>{n.hasTask(s,l),o===s&&(l.change=="microTask"?(r._hasPendingMicrotasks=l.microTask,E7(r),zG(r)):l.change=="macroTask"&&(r.hasPendingMacrotasks=l.macroTask))},onHandleError:(n,o,s,l)=>(n.handleError(s,l),r.runOutsideAngular(()=>r.onError.emit(l)),!1)})}function E7(r){r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&r.callbackScheduled===!0?r.hasPendingMicrotasks=!0:r.hasPendingMicrotasks=!1}function Qse(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function Xse(r){r._nesting--,zG(r)}var M7=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new it,this.onMicrotaskEmpty=new it,this.onStable=new it,this.onError=new it}run(i,e,n){return i.apply(e,n)}runGuarded(i,e,n){return i.apply(e,n)}runOutsideAngular(i){return i()}runTask(i,e,n,o){return i.apply(e,n)}};function aPe(r){return Ple(r,"__ignore_ng_zone__")}function lPe(r){return Ple(r,"__scheduler_tick__")}function Ple(r,i){return!Array.isArray(r)||r.length!==1?!1:r[0]?.data?.[i]===!0}var gp=class{constructor(){this._console=console}handleError(i){let e=this._findOriginalError(i);this._console.error("ERROR",i),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(i){let e=i&&i7(i);for(;e&&i7(e);)e=i7(e);return e||null}},cPe=new At("",{providedIn:"root",factory:()=>{let r=Et(ci),i=Et(gp);return e=>r.runOutsideAngular(()=>i.handleError(e))}});function dPe(){return kT(Hd(),wr())}function kT(r,i){return new Ht(ef(r,i))}var Ht=(()=>{class r{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=dPe}}return r})();function Rle(r){return r instanceof Ht?r.nativeElement:r}function uPe(){return this._results[Symbol.iterator]()}var _p=class r{get changes(){return this._changes??=new it}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let e=r.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=uPe)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,e){return this._results.reduce(i,e)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,e){this.dirty=!1;let n=jke(i);(this._changesDetected=!Bke(this._results,n,e))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(i){this._onDirty=i}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Fle(r){return(r.flags&128)===128}var Lle=new Map,hPe=0;function pPe(){return hPe++}function mPe(r){Lle.set(r[I3],r)}function D7(r){Lle.delete(r[I3])}var Jse="__ngContext__";function nw(r,i){Jb(i)?(r[Jse]=i[I3],mPe(i)):r[Jse]=i}function Nle(r){return jle(r[GD])}function Ble(r){return jle(r[mg])}function jle(r){for(;r!==null&&!My(r);)r=r[mg];return r}var k7;function Vle(r){k7=r}function $le(){if(k7!==void 0)return k7;if(typeof document<"u")return document;throw new ki(210,!1)}var OT=new At("",{providedIn:"root",factory:()=>fPe}),fPe="ng",GG=new At(""),Qu=new At("",{providedIn:"platform",factory:()=>"unknown"});var so=new At(""),JD=new At("",{providedIn:"root",factory:()=>$le().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var gPe="h",_Pe="b";var yPe=()=>null;function HG(r,i,e=!1){return yPe(r,i,e)}var Ule=!1,vPe=new At("",{providedIn:"root",factory:()=>Ule});var P5;function bPe(){if(P5===void 0&&(P5=null,Xm.trustedTypes))try{P5=Xm.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return P5}function L3(r){return bPe()?.createHTML(r)||r}var R5;function zle(){if(R5===void 0&&(R5=null,Xm.trustedTypes))try{R5=Xm.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return R5}function eae(r){return zle()?.createHTML(r)||r}function tae(r){return zle()?.createScriptURL(r)||r}var Ey=class{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Iae})`}},O7=class extends Ey{getTypeName(){return"HTML"}},P7=class extends Ey{getTypeName(){return"Style"}},R7=class extends Ey{getTypeName(){return"Script"}},F7=class extends Ey{getTypeName(){return"URL"}},L7=class extends Ey{getTypeName(){return"ResourceURL"}};function tf(r){return r instanceof Ey?r.changingThisBreaksApplicationSecurity:r}function Dy(r,i){let e=wPe(r);if(e!=null&&e!==i){if(e==="ResourceURL"&&i==="URL")return!0;throw new Error(`Required a safe ${i}, got a ${e} (see ${Iae})`)}return e===i}function wPe(r){return r instanceof Ey&&r.getTypeName()||null}function Gle(r){return new O7(r)}function Hle(r){return new P7(r)}function Wle(r){return new R7(r)}function qle(r){return new F7(r)}function Yle(r){return new L7(r)}function CPe(r){let i=new B7(r);return xPe()?new N7(i):i}var N7=class{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{let e=new window.DOMParser().parseFromString(L3(i),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(i):(e.firstChild?.remove(),e)}catch{return null}}},B7=class{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){let e=this.inertDocument.createElement("template");return e.innerHTML=L3(i),e}};function xPe(){try{return!!new window.DOMParser().parseFromString(L3(""),"text/html")}catch{return!1}}var SPe=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function N3(r){return r=String(r),r.match(SPe)?r:"unsafe:"+r}function ky(r){let i={};for(let e of r.split(","))i[e]=!0;return i}function ek(...r){let i={};for(let e of r)for(let n in e)e.hasOwnProperty(n)&&(i[n]=!0);return i}var Kle=ky("area,br,col,hr,img,wbr"),Zle=ky("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Qle=ky("rp,rt"),IPe=ek(Qle,Zle),TPe=ek(Zle,ky("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),APe=ek(Qle,ky("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),iae=ek(Kle,TPe,APe,IPe),Xle=ky("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),EPe=ky("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),MPe=ky("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),DPe=ek(Xle,EPe,MPe),kPe=ky("script,style,template"),j7=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let e=i.firstChild,n=!0,o=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild){o.push(e),e=RPe(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let s=PPe(e);if(s){e=s;break}e=o.pop()}}return this.buf.join("")}startElement(i){let e=nae(i).toLowerCase();if(!iae.hasOwnProperty(e))return this.sanitizedSomething=!0,!kPe.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let n=i.attributes;for(let o=0;o<n.length;o++){let s=n.item(o),l=s.name,h=l.toLowerCase();if(!DPe.hasOwnProperty(h)){this.sanitizedSomething=!0;continue}let p=s.value;Xle[h]&&(p=N3(p)),this.buf.push(" ",l,'="',rae(p),'"')}return this.buf.push(">"),!0}endElement(i){let e=nae(i).toLowerCase();iae.hasOwnProperty(e)&&!Kle.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(i){this.buf.push(rae(i))}};function OPe(r,i){return(r.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function PPe(r){let i=r.nextSibling;if(i&&r!==i.previousSibling)throw Jle(i);return i}function RPe(r){let i=r.firstChild;if(i&&OPe(r,i))throw Jle(i);return i}function nae(r){let i=r.nodeName;return typeof i=="string"?i:"FORM"}function Jle(r){return new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`)}var FPe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,LPe=/([^\#-~ |!])/g;function rae(r){return r.replace(/&/g,"&amp;").replace(FPe,function(i){let e=i.charCodeAt(0),n=i.charCodeAt(1);return"&#"+((e-55296)*1024+(n-56320)+65536)+";"}).replace(LPe,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var F5;function WG(r,i){let e=null;try{F5=F5||CPe(r);let n=i?String(i):"";e=F5.getInertBodyElement(n);let o=5,s=n;do{if(o===0)throw new Error("Failed to sanitize html because the input is unstable");o--,n=s,s=e.innerHTML,e=F5.getInertBodyElement(n)}while(n!==s);let h=new j7().sanitizeChildren(oae(e)||e);return L3(h)}finally{if(e){let n=oae(e)||e;for(;n.firstChild;)n.firstChild.remove()}}}function oae(r){return"content"in r&&NPe(r)?r.content:null}function NPe(r){return r.nodeType===Node.ELEMENT_NODE&&r.nodeName==="TEMPLATE"}var ud=function(r){return r[r.NONE=0]="NONE",r[r.HTML=1]="HTML",r[r.STYLE=2]="STYLE",r[r.SCRIPT=3]="SCRIPT",r[r.URL=4]="URL",r[r.RESOURCE_URL=5]="RESOURCE_URL",r}(ud||{});function Xu(r){let i=qG();return i?eae(i.sanitize(ud.HTML,r)||""):Dy(r,"HTML")?eae(tf(r)):WG($le(),pg(r))}function pl(r){let i=qG();return i?i.sanitize(ud.URL,r)||"":Dy(r,"URL")?tf(r):N3(pg(r))}function ece(r){let i=qG();if(i)return tae(i.sanitize(ud.RESOURCE_URL,r)||"");if(Dy(r,"ResourceURL"))return tae(tf(r));throw new ki(904,!1)}function qG(){let r=wr();return r&&r[H0].sanitizer}var BPe=/^>|^->|<!--|-->|--!>|<!-$/g,jPe=/(<|>)/g,VPe="\u200B$1\u200B";function $Pe(r){return r.replace(BPe,i=>i.replace(jPe,VPe))}function _g(r){return r.ownerDocument}function tce(r){return r instanceof Function?r():r}function ice(r){return(r??Et(yn)).get(Qu)==="browser"}var q0=function(r){return r[r.Important=1]="Important",r[r.DashCase=2]="DashCase",r}(q0||{}),UPe;function YG(r,i){return UPe(r,i)}function gT(r,i,e,n,o){if(n!=null){let s,l=!1;My(n)?s=n:Jb(n)&&(l=!0,n=n[K0]);let h=W0(n);r===0&&e!==null?o==null?ace(i,e,h):o3(i,e,h,o||null,!0):r===1&&e!==null?o3(i,e,h,o||null,!0):r===2?iRe(i,h,l):r===3&&i.destroyNode(h),s!=null&&rRe(i,r,s,e,o)}}function zPe(r,i){return r.createText(i)}function GPe(r,i,e){r.setValue(i,e)}function HPe(r,i){return r.createComment($Pe(i))}function nce(r,i,e){return r.createElement(i,e)}function WPe(r,i){rce(r,i),i[K0]=null,i[yp]=null}function qPe(r,i,e,n,o,s){n[K0]=o,n[yp]=i,V3(r,n,e,1,o,s)}function rce(r,i){i[H0].changeDetectionScheduler?.notify(9),V3(r,i,i[hl],2,null,null)}function YPe(r){let i=r[GD];if(!i)return n7(r[zr],r);for(;i;){let e=null;if(Jb(i))e=i[GD];else{let n=i[Ku];n&&(e=n)}if(!e){for(;i&&!i[mg]&&i!==r;)Jb(i)&&n7(i[zr],i),i=i[Zu];i===null&&(i=r),Jb(i)&&n7(i[zr],i),e=i&&i[mg]}i=e}}function KPe(r,i,e,n){let o=Ku+n,s=e.length;n>0&&(e[o-1][mg]=i),n<s-Ku?(i[mg]=e[o],Fae(e,Ku+n,i)):(e.push(i),i[mg]=null),i[Zu]=e;let l=i[qC];l!==null&&e!==l&&oce(l,i);let h=i[Ty];h!==null&&h.insertView(r),b7(i),i[Dr]|=128}function oce(r,i){let e=r[xT],n=i[Zu];if(Jb(n))r[Dr]|=X5.HasTransplantedViews;else{let o=n[Zu][dm];i[dm]!==o&&(r[Dr]|=X5.HasTransplantedViews)}e===null?r[xT]=[i]:e.push(i)}function KG(r,i){let e=r[xT],n=e.indexOf(i);e.splice(n,1)}function HD(r,i){if(r.length<=Ku)return;let e=Ku+i,n=r[e];if(n){let o=n[qC];o!==null&&o!==r&&KG(o,n),i>0&&(r[e-1][mg]=n[mg]);let s=Y5(r,Ku+i);WPe(n[zr],n);let l=s[Ty];l!==null&&l.detachView(s[zr]),n[Zu]=null,n[mg]=null,n[Dr]&=-129}return n}function B3(r,i){if(!(i[Dr]&256)){let e=i[hl];e.destroyNode&&V3(r,i,e,3,null,null),YPe(i)}}function n7(r,i){if(i[Dr]&256)return;let e=zo(null);try{i[Dr]&=-129,i[Dr]|=256,i[Qm]&&JL(i[Qm]),QPe(r,i),ZPe(r,i),i[zr].type===1&&i[hl].destroy();let n=i[qC];if(n!==null&&My(i[Zu])){n!==i[Zu]&&KG(n,i);let o=i[Ty];o!==null&&o.detachView(r)}D7(i)}finally{zo(e)}}function ZPe(r,i){let e=r.cleanup,n=i[Z5];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let l=e[s+3];l>=0?n[l]():n[-l].unsubscribe(),s+=2}else{let l=n[e[s+1]];e[s].call(l)}n!==null&&(i[Z5]=null);let o=i[Xb];if(o!==null){i[Xb]=null;for(let s=0;s<o.length;s++){let l=o[s];l()}}}function QPe(r,i){let e;if(r!=null&&(e=r.destroyHooks)!=null)for(let n=0;n<e.length;n+=2){let o=i[e[n]];if(!(o instanceof QC)){let s=e[n+1];if(Array.isArray(s))for(let l=0;l<s.length;l+=2){let h=o[s[l]],p=s[l+1];U0(4,h,p);try{p.call(h)}finally{U0(5,h,p)}}else{U0(4,o,s);try{s.call(o)}finally{U0(5,o,s)}}}}}function sce(r,i,e){return XPe(r,i.parent,e)}function XPe(r,i,e){let n=i;for(;n!==null&&n.type&168;)i=n,n=i.parent;if(n===null)return e[K0];{let{componentOffset:o}=n;if(o>-1){let{encapsulation:s}=r.data[n.directiveStart+o];if(s===G0.None||s===G0.Emulated)return null}return ef(n,e)}}function o3(r,i,e,n,o){r.insertBefore(i,e,n,o)}function ace(r,i,e){r.appendChild(i,e)}function sae(r,i,e,n,o){n!==null?o3(r,i,e,n,o):ace(r,i,e)}function lce(r,i){return r.parentNode(i)}function JPe(r,i){return r.nextSibling(i)}function cce(r,i,e){return tRe(r,i,e)}function eRe(r,i,e){return r.type&40?ef(r,e):null}var tRe=eRe,aae;function j3(r,i,e,n){let o=sce(r,n,i),s=i[hl],l=n.parent||i[yp],h=cce(l,n,i);if(o!=null)if(Array.isArray(e))for(let p=0;p<e.length;p++)sae(s,o,e[p],h,!1);else sae(s,o,e,h,!1);aae!==void 0&&aae(s,n,i,e,o)}function jD(r,i){if(i!==null){let e=i.type;if(e&3)return ef(i,r);if(e&4)return V7(-1,r[i.index]);if(e&8){let n=i.child;if(n!==null)return jD(r,n);{let o=r[i.index];return My(o)?V7(-1,o):W0(o)}}else{if(e&128)return jD(r,i.next);if(e&32)return YG(i,r)()||W0(r[i.index]);{let n=dce(r,i);if(n!==null){if(Array.isArray(n))return n[0];let o=KC(r[dm]);return jD(o,n)}else return jD(r,i.next)}}}return null}function dce(r,i){if(i!==null){let n=r[dm][yp],o=i.projection;return n.projection[o]}return null}function V7(r,i){let e=Ku+r+1;if(e<i.length){let n=i[e],o=n[zr].firstChild;if(o!==null)return jD(n,o)}return i[YC]}function iRe(r,i,e){r.removeChild(null,i,e)}function ZG(r,i,e,n,o,s,l){for(;e!=null;){if(e.type===128){e=e.next;continue}let h=n[e.index],p=e.type;if(l&&i===0&&(h&&nw(W0(h),n),e.flags|=2),(e.flags&32)!==32)if(p&8)ZG(r,i,e.child,n,o,s,!1),gT(i,r,o,h,s);else if(p&32){let m=YG(e,n),f;for(;f=m();)gT(i,r,o,f,s);gT(i,r,o,h,s)}else p&16?uce(r,i,n,e,o,s):gT(i,r,o,h,s);e=l?e.projectionNext:e.next}}function V3(r,i,e,n,o,s){ZG(e,n,r.firstChild,i,o,s,!1)}function nRe(r,i,e){let n=i[hl],o=sce(r,e,i),s=e.parent||i[yp],l=cce(s,e,i);uce(n,0,i,e,o,l)}function uce(r,i,e,n,o,s){let l=e[dm],p=l[yp].projection[n.projection];if(Array.isArray(p))for(let m=0;m<p.length;m++){let f=p[m];gT(i,r,o,f,s)}else{let m=p,f=l[Zu];Fle(n)&&(m.flags|=128),ZG(r,i,m,f,o,s,!0)}}function rRe(r,i,e,n,o){let s=e[YC],l=W0(e);s!==l&&gT(i,r,n,s,o);for(let h=Ku;h<e.length;h++){let p=e[h];V3(p[zr],p,r,i,n,s)}}function oRe(r,i,e,n,o){if(i)o?r.addClass(e,n):r.removeClass(e,n);else{let s=n.indexOf("-")===-1?void 0:q0.DashCase;o==null?r.removeStyle(e,n,s):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),s|=q0.Important),r.setStyle(e,n,o,s))}}function sRe(r,i,e){r.setAttribute(i,"style",e)}function hce(r,i,e){e===""?r.removeAttribute(i,"class"):r.setAttribute(i,"class",e)}function pce(r,i,e){let{mergedAttrs:n,classes:o,styles:s}=e;n!==null&&m7(r,i,n),o!==null&&hce(r,i,o),s!==null&&sRe(r,i,s)}var Ju={};function q(r=1){mce(el(),wr(),Z0()+r,!1)}function mce(r,i,e,n){if(!n)if((i[Dr]&3)===3){let s=r.preOrderCheckHooks;s!==null&&$5(i,s,e)}else{let s=r.preOrderHooks;s!==null&&U5(i,s,0,e)}ZC(e)}function ie(r,i=ko.Default){let e=wr();if(e===null)return xe(r,i);let n=Hd();return Ale(n,e,su(r),i)}function tk(){let r="invalid";throw new Error(r)}function fce(r,i,e,n,o,s){let l=zo(null);try{let h=null;o&ew.SignalBased&&(h=i[n][Zm]),h!==null&&h.transformFn!==void 0&&(s=h.transformFn(s)),o&ew.HasDecoratorInputTransform&&(s=r.inputTransforms[n].call(i,s)),r.setInput!==null?r.setInput(i,h,s,e,n):Jae(i,h,n,s)}finally{zo(l)}}function aRe(r,i){let e=r.hostBindingOpCodes;if(e!==null)try{for(let n=0;n<e.length;n++){let o=e[n];if(o<0)ZC(~o);else{let s=o,l=e[++n],h=e[++n];ROe(l,s);let p=i[s];h(2,p)}}}finally{ZC(-1)}}function $3(r,i,e,n,o,s,l,h,p,m,f){let g=i.blueprint.slice();return g[K0]=o,g[Dr]=n|4|128|8|64,(m!==null||r&&r[Dr]&2048)&&(g[Dr]|=2048),ole(g),g[Zu]=g[MT]=r,g[Yu]=e,g[H0]=l||r&&r[H0],g[hl]=h||r&&r[hl],g[CT]=p||r&&r[CT]||null,g[yp]=s,g[I3]=pPe(),g[wT]=f,g[Xae]=m,g[dm]=i.type==2?r[dm]:g,g}function PT(r,i,e,n,o){let s=r.data[i];if(s===null)s=lRe(r,i,e,n,o),POe()&&(s.flags|=32);else if(s.type&64){s.type=e,s.value=n,s.attrs=o;let l=DOe();s.injectorIndex=l===null?-1:l.injectorIndex}return tx(s,!0),s}function lRe(r,i,e,n,o){let s=ule(),l=FG(),h=l?s:s&&s.parent,p=r.data[i]=mRe(r,h,e,i,n,o);return r.firstChild===null&&(r.firstChild=p),s!==null&&(l?s.child==null&&p.parent!==null&&(s.child=p):s.next===null&&(s.next=p,p.prev=s)),p}function gce(r,i,e,n){if(e===0)return-1;let o=i.length;for(let s=0;s<e;s++)i.push(n),r.blueprint.push(n),r.data.push(null);return o}function _ce(r,i,e,n,o){let s=Z0(),l=n&2;try{ZC(-1),l&&i.length>Gd&&mce(r,i,Gd,!1),U0(l?2:0,o),e(n,o)}finally{ZC(s),U0(l?3:1,o)}}function QG(r,i,e){if(kG(i)){let n=zo(null);try{let o=i.directiveStart,s=i.directiveEnd;for(let l=o;l<s;l++){let h=r.data[l];if(h.contentQueries){let p=e[l];h.contentQueries(1,p,l)}}}finally{zo(n)}}}function XG(r,i,e){cle()&&(bRe(r,i,e,ef(e,i)),(e.flags&64)===64&&bce(r,i,e))}function JG(r,i,e=ef){let n=i.localNames;if(n!==null){let o=i.index+1;for(let s=0;s<n.length;s+=2){let l=n[s+1],h=l===-1?e(i,r):r[l];r[o++]=h}}}function yce(r){let i=r.tView;return i===null||i.incompleteFirstPass?r.tView=eH(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts,r.id):i}function eH(r,i,e,n,o,s,l,h,p,m,f){let g=Gd+n,y=g+o,_=cRe(g,y),w=typeof m=="function"?m():m;return _[zr]={type:r,blueprint:_,template:e,queries:null,viewQuery:h,declTNode:i,data:_.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof l=="function"?l():l,firstChild:null,schemas:p,consts:w,incompleteFirstPass:!1,ssrId:f}}function cRe(r,i){let e=[];for(let n=0;n<i;n++)e.push(n<r?null:Ju);return e}function dRe(r,i,e,n){let s=n.get(vPe,Ule)||e===G0.ShadowDom,l=r.selectRootElement(i,s);return uRe(l),l}function uRe(r){hRe(r)}var hRe=()=>null;function pRe(r,i,e,n){let o=xce(i);o.push(e),r.firstCreatePass&&Sce(r).push(n,o.length-1)}function mRe(r,i,e,n,o,s){let l=i?i.injectorIndex:-1,h=0;return dle()&&(h|=128),{type:e,index:n,insertBeforeIndex:null,injectorIndex:l,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:h,providerIndexes:0,value:o,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function lae(r,i,e,n,o){for(let s in i){if(!i.hasOwnProperty(s))continue;let l=i[s];if(l===void 0)continue;n??={};let h,p=ew.None;Array.isArray(l)?(h=l[0],p=l[1]):h=l;let m=s;if(o!==null){if(!o.hasOwnProperty(s))continue;m=o[s]}r===0?cae(n,e,m,h,p):cae(n,e,m,h)}return n}function cae(r,i,e,n,o){let s;r.hasOwnProperty(e)?(s=r[e]).push(i,n):s=r[e]=[i,n],o!==void 0&&s.push(o)}function fRe(r,i,e){let n=i.directiveStart,o=i.directiveEnd,s=r.data,l=i.attrs,h=[],p=null,m=null;for(let f=n;f<o;f++){let g=s[f],y=e?e.get(g):null,_=y?y.inputs:null,w=y?y.outputs:null;p=lae(0,g.inputs,f,p,_),m=lae(1,g.outputs,f,m,w);let A=p!==null&&l!==null&&!AG(i)?kRe(p,f,l):null;h.push(A)}p!==null&&(p.hasOwnProperty("class")&&(i.flags|=8),p.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=h,i.inputs=p,i.outputs=m}function gRe(r){return r==="class"?"className":r==="for"?"htmlFor":r==="formaction"?"formAction":r==="innerHtml"?"innerHTML":r==="readonly"?"readOnly":r==="tabindex"?"tabIndex":r}function ik(r,i,e,n,o,s,l,h){let p=ef(i,e),m=i.inputs,f;!h&&m!=null&&(f=m[n])?(iH(r,e,f,n,o),T3(i)&&_Re(e,i.index)):i.type&3?(n=gRe(n),o=l!=null?l(o,i.value||"",n):o,s.setProperty(p,n,o)):i.type&12}function _Re(r,i){let e=sw(i,r);e[Dr]&16||(e[Dr]|=64)}function tH(r,i,e,n){if(cle()){let o=n===null?null:{"":-1},s=CRe(r,e),l,h;s===null?l=h=null:[l,h]=s,l!==null&&vce(r,i,e,l,o,h),o&&xRe(e,n,o)}e.mergedAttrs=UD(e.mergedAttrs,e.attrs)}function vce(r,i,e,n,o,s){for(let m=0;m<n.length;m++)S7(i3(e,i),r,n[m].type);IRe(e,r.data.length,n.length);for(let m=0;m<n.length;m++){let f=n[m];f.providersResolver&&f.providersResolver(f)}let l=!1,h=!1,p=gce(r,i,n.length,null);for(let m=0;m<n.length;m++){let f=n[m];e.mergedAttrs=UD(e.mergedAttrs,f.hostAttrs),TRe(r,e,i,p,f),SRe(p,f,o),f.contentQueries!==null&&(e.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(e.flags|=64);let g=f.type.prototype;!l&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((r.preOrderHooks??=[]).push(e.index),l=!0),!h&&(g.ngOnChanges||g.ngDoCheck)&&((r.preOrderCheckHooks??=[]).push(e.index),h=!0),p++}fRe(r,e,s)}function yRe(r,i,e,n,o){let s=o.hostBindings;if(s){let l=r.hostBindingOpCodes;l===null&&(l=r.hostBindingOpCodes=[]);let h=~i.index;vRe(l)!=h&&l.push(h),l.push(e,n,s)}}function vRe(r){let i=r.length;for(;i>0;){let e=r[--i];if(typeof e=="number"&&e<0)return e}return 0}function bRe(r,i,e,n){let o=e.directiveStart,s=e.directiveEnd;T3(e)&&ARe(i,e,r.data[o+e.componentOffset]),r.firstCreatePass||i3(e,i),nw(n,i);let l=e.initialInputs;for(let h=o;h<s;h++){let p=r.data[h],m=XC(i,r,h,e);if(nw(m,i),l!==null&&DRe(i,h-o,m,p,e,l),Ay(p)){let f=sw(e.index,i);f[Yu]=XC(i,r,h,e)}}}function bce(r,i,e){let n=e.directiveStart,o=e.directiveEnd,s=e.index,l=FOe();try{ZC(s);for(let h=n;h<o;h++){let p=r.data[h],m=i[h];w7(h),(p.hostBindings!==null||p.hostVars!==0||p.hostAttrs!==null)&&wRe(p,m)}}finally{ZC(-1),w7(l)}}function wRe(r,i){r.hostBindings!==null&&r.hostBindings(1,i)}function CRe(r,i){let e=r.directiveRegistry,n=null,o=null;if(e)for(let s=0;s<e.length;s++){let l=e[s];if($ae(i,l.selectors,!1))if(n||(n=[]),Ay(l))if(l.findHostDirectiveDefs!==null){let h=[];o=o||new Map,l.findHostDirectiveDefs(l,h,o),n.unshift(...h,l);let p=h.length;$7(r,i,p)}else n.unshift(l),$7(r,i,0);else o=o||new Map,l.findHostDirectiveDefs?.(l,n,o),n.push(l)}return n===null?null:[n,o]}function $7(r,i,e){i.componentOffset=e,(r.components??=[]).push(i.index)}function xRe(r,i,e){if(i){let n=r.localNames=[];for(let o=0;o<i.length;o+=2){let s=e[i[o+1]];if(s==null)throw new ki(-301,!1);n.push(i[o],s)}}}function SRe(r,i,e){if(e){if(i.exportAs)for(let n=0;n<i.exportAs.length;n++)e[i.exportAs[n]]=r;Ay(i)&&(e[""]=r)}}function IRe(r,i,e){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+e,r.providerIndexes=i}function TRe(r,i,e,n,o){r.data[n]=o;let s=o.factory||(o.factory=WC(o.type,!0)),l=new QC(s,Ay(o),ie);r.blueprint[n]=l,e[n]=l,yRe(r,i,n,gce(r,e,o.hostVars,Ju),o)}function ARe(r,i,e){let n=ef(i,r),o=yce(e),s=r[H0].rendererFactory,l=16;e.signals?l=4096:e.onPush&&(l=64);let h=U3(r,$3(r,o,null,l,n,i,null,s.createRenderer(n,e),null,null,null));r[i.index]=h}function ERe(r,i,e,n,o,s){let l=ef(r,i);MRe(i[hl],l,s,r.value,e,n,o)}function MRe(r,i,e,n,o,s,l){if(s==null)r.removeAttribute(i,o,e);else{let h=l==null?pg(s):l(s,n||"",o);r.setAttribute(i,o,h,e)}}function DRe(r,i,e,n,o,s){let l=s[i];if(l!==null)for(let h=0;h<l.length;){let p=l[h++],m=l[h++],f=l[h++],g=l[h++];fce(n,e,p,m,f,g)}}function kRe(r,i,e){let n=null,o=0;for(;o<e.length;){let s=e[o];if(s===0){o+=4;continue}else if(s===5){o+=2;continue}if(typeof s=="number")break;if(r.hasOwnProperty(s)){n===null&&(n=[]);let l=r[s];for(let h=0;h<l.length;h+=3)if(l[h]===i){n.push(s,l[h+1],l[h+2],e[o+1]);break}}o+=2}return n}function wce(r,i,e,n){return[r,!0,0,i,null,n,null,e,null,null]}function Cce(r,i){let e=r.contentQueries;if(e!==null){let n=zo(null);try{for(let o=0;o<e.length;o+=2){let s=e[o],l=e[o+1];if(l!==-1){let h=r.data[l];k3(s),h.contentQueries(2,i[l],l)}}}finally{zo(n)}}}function U3(r,i){return r[GD]?r[zse][mg]=i:r[GD]=i,r[zse]=i,i}function U7(r,i,e){k3(0);let n=zo(null);try{i(r,e)}finally{zo(n)}}function xce(r){return r[Z5]??=[]}function Sce(r){return r.cleanup??=[]}function Ice(r,i,e){return(r===null||Ay(r))&&(e=bOe(e[i.index])),e[hl]}function Tce(r,i){let e=r[CT],n=e?e.get(gp,null):null;n&&n.handleError(i)}function iH(r,i,e,n,o){for(let s=0;s<e.length;){let l=e[s++],h=e[s++],p=e[s++],m=i[l],f=r.data[l];fce(f,m,n,h,p,o)}}function nH(r,i,e){let n=rle(i,r);GPe(r[hl],n,e)}function ORe(r,i){let e=sw(i,r),n=e[zr];PRe(n,e);let o=e[K0];o!==null&&e[wT]===null&&(e[wT]=HG(o,e[CT])),rH(n,e,e[Yu])}function PRe(r,i){for(let e=i.length;e<r.blueprint.length;e++)i.push(r.blueprint[e])}function rH(r,i,e){jG(i);try{let n=r.viewQuery;n!==null&&U7(1,n,e);let o=r.template;o!==null&&_ce(r,i,o,1,e),r.firstCreatePass&&(r.firstCreatePass=!1),i[Ty]?.finishViewCreation(r),r.staticContentQueries&&Cce(r,i),r.staticViewQueries&&U7(2,r.viewQuery,e);let s=r.components;s!==null&&RRe(i,s)}catch(n){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),n}finally{i[Dr]&=-5,VG()}}function RRe(r,i){for(let e=0;e<i.length;e++)ORe(r,i[e])}function nk(r,i,e,n){let o=zo(null);try{let s=i.tView,h=r[Dr]&4096?4096:16,p=$3(r,s,e,h,null,i,null,null,n?.injector??null,n?.embeddedViewInjector??null,n?.dehydratedView??null),m=r[i.index];p[qC]=m;let f=r[Ty];return f!==null&&(p[Ty]=f.createEmbeddedView(s)),rH(s,p,e),p}finally{zo(o)}}function Ace(r,i){let e=Ku+i;if(e<r.length)return r[e]}function ST(r,i){return!i||i.firstChild===null||Fle(r)}function rk(r,i,e,n=!0){let o=i[zr];if(KPe(o,i,r,e),n){let l=V7(e,r),h=i[hl],p=lce(h,r[YC]);p!==null&&qPe(o,r[yp],h,i,p,l)}let s=i[wT];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Ece(r,i){let e=HD(r,i);return e!==void 0&&B3(e[zr],e),e}function s3(r,i,e,n,o=!1){for(;e!==null;){if(e.type===128){e=o?e.projectionNext:e.next;continue}let s=i[e.index];s!==null&&n.push(W0(s)),My(s)&&FRe(s,n);let l=e.type;if(l&8)s3(r,i,e.child,n);else if(l&32){let h=YG(e,i),p;for(;p=h();)n.push(p)}else if(l&16){let h=dce(i,e);if(Array.isArray(h))n.push(...h);else{let p=KC(i[dm]);s3(p[zr],p,h,n,!0)}}e=o?e.projectionNext:e.next}return n}function FRe(r,i){for(let e=Ku;e<r.length;e++){let n=r[e],o=n[zr].firstChild;o!==null&&s3(n[zr],n,o,i)}r[YC]!==r[K0]&&i.push(r[YC])}var Mce=[];function LRe(r){return r[Qm]??NRe(r)}function NRe(r){let i=Mce.pop()??Object.create(jRe);return i.lView=r,i}function BRe(r){r.lView[Qm]!==r&&(r.lView=null,Mce.push(r))}var jRe=li(Xe({},rT),{consumerIsAlwaysLive:!0,consumerMarkedDirty:r=>{M3(r.lView)},consumerOnSignalRead(){this.lView[Qm]=this}});function VRe(r){let i=r[Qm]??Object.create($Re);return i.lView=r,i}var $Re=li(Xe({},rT),{consumerIsAlwaysLive:!0,consumerMarkedDirty:r=>{let i=KC(r.lView);for(;i&&!Dce(i[zr]);)i=KC(i);i&&sle(i)},consumerOnSignalRead(){this.lView[Qm]=this}});function Dce(r){return r.type!==2}var URe=100;function kce(r,i=!0,e=0){let n=r[H0],o=n.rendererFactory,s=!1;s||o.begin?.();try{zRe(r,e)}catch(l){throw i&&Tce(r,l),l}finally{s||(o.end?.(),n.inlineEffectRunner?.flush())}}function zRe(r,i){let e=hle();try{Hse(!0),z7(r,i);let n=0;for(;E3(r);){if(n===URe)throw new ki(103,!1);n++,z7(r,1)}}finally{Hse(e)}}function GRe(r,i,e,n){let o=i[Dr];if((o&256)===256)return;let s=!1,l=!1;!s&&i[H0].inlineEffectRunner?.flush(),jG(i);let h=!0,p=null,m=null;s||(Dce(r)?(m=LRe(i),p=kD(m)):Uoe()===null?(h=!1,m=VRe(i),p=kD(m)):i[Qm]&&(JL(i[Qm]),i[Qm]=null));try{ole(i),OOe(r.bindingStartIndex),e!==null&&_ce(r,i,e,2,n);let f=(o&3)===3;if(!s)if(f){let _=r.preOrderCheckHooks;_!==null&&$5(i,_,null)}else{let _=r.preOrderHooks;_!==null&&U5(i,_,0,null),Jz(i,0)}if(l||HRe(i),Oce(i,0),r.contentQueries!==null&&Cce(r,i),!s)if(f){let _=r.contentCheckHooks;_!==null&&$5(i,_)}else{let _=r.contentHooks;_!==null&&U5(i,_,1),Jz(i,1)}aRe(r,i);let g=r.components;g!==null&&Rce(i,g,0);let y=r.viewQuery;if(y!==null&&U7(2,y,n),!s)if(f){let _=r.viewCheckHooks;_!==null&&$5(i,_)}else{let _=r.viewHooks;_!==null&&U5(i,_,2),Jz(i,2)}if(r.firstUpdatePass===!0&&(r.firstUpdatePass=!1),i[V5]){for(let _ of i[V5])_();i[V5]=null}s||(i[Dr]&=-73)}catch(f){throw s||M3(i),f}finally{m!==null&&(QL(m,p),h&&BRe(m)),VG()}}function Oce(r,i){for(let e=Nle(r);e!==null;e=Ble(e))for(let n=Ku;n<e.length;n++){let o=e[n];Pce(o,i)}}function HRe(r){for(let i=Nle(r);i!==null;i=Ble(i)){if(!(i[Dr]&X5.HasTransplantedViews))continue;let e=i[xT];for(let n=0;n<e.length;n++){let o=e[n];sle(o)}}}function WRe(r,i,e){let n=sw(i,r);Pce(n,e)}function Pce(r,i){RG(r)&&z7(r,i)}function z7(r,i){let n=r[zr],o=r[Dr],s=r[Qm],l=!!(i===0&&o&16);if(l||=!!(o&64&&i===0),l||=!!(o&1024),l||=!!(s?.dirty&&XL(s)),l||=!1,s&&(s.dirty=!1),r[Dr]&=-9217,l)GRe(n,r,n.template,r[Yu]);else if(o&8192){Oce(r,1);let h=n.components;h!==null&&Rce(r,h,1)}}function Rce(r,i,e){for(let n=0;n<i.length;n++)WRe(r,i[n],e)}function oH(r,i){let e=hle()?64:1088;for(r[H0].changeDetectionScheduler?.notify(i);r;){r[Dr]|=e;let n=KC(r);if(y7(r)&&!n)return r;r=n}return null}var JC=class{get rootNodes(){let i=this._lView,e=i[zr];return s3(e,i,e.firstChild,[])}constructor(i,e,n=!0){this._lView=i,this._cdRefInjectingView=e,this.notifyErrorHandler=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Yu]}set context(i){this._lView[Yu]=i}get destroyed(){return(this._lView[Dr]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let i=this._lView[Zu];if(My(i)){let e=i[Q5],n=e?e.indexOf(this):-1;n>-1&&(HD(i,n),Y5(e,n))}this._attachedToViewContainer=!1}B3(this._lView[zr],this._lView)}onDestroy(i){ale(this._lView,i)}markForCheck(){oH(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Dr]&=-129}reattach(){b7(this._lView),this._lView[Dr]|=128}detectChanges(){this._lView[Dr]|=1024,kce(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ki(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let i=y7(this._lView),e=this._lView[qC];e!==null&&!i&&KG(e,this._lView),rce(this._lView[zr],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new ki(902,!1);this._appRef=i;let e=y7(this._lView),n=this._lView[qC];n!==null&&!e&&oce(n,this._lView),b7(this._lView)}},jo=(()=>{class r{static{this.__NG_ELEMENT_ID__=KRe}}return r})(),qRe=jo,YRe=class extends qRe{constructor(i,e,n){super(),this._declarationLView=i,this._declarationTContainer=e,this.elementRef=n}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(i,e){return this.createEmbeddedViewImpl(i,e)}createEmbeddedViewImpl(i,e,n){let o=nk(this._declarationLView,this._declarationTContainer,i,{embeddedViewInjector:e,dehydratedView:n});return new JC(o)}};function KRe(){return z3(Hd(),wr())}function z3(r,i){return r.type&4?new YRe(i,r,kT(r,i)):null}var wAt=new RegExp(`^(\\d+)*(${_Pe}|${gPe})*(.*)`);var ZRe=()=>null;function IT(r,i){return ZRe(r,i)}var TT=class{},sH=new At("",{providedIn:"root",factory:()=>!1});var Fce=new At(""),Lce=new At(""),G7=class{},a3=class{};function QRe(r){let i=Error(`No component factory found for ${$h(r)}.`);return i[XRe]=r,i}var XRe="ngComponent";var H7=class{resolveComponentFactory(i){throw QRe(i)}},au=class{static{this.NULL=new H7}},rw=class{},lu=(()=>{class r{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>JRe()}}return r})();function JRe(){let r=wr(),i=Hd(),e=sw(i.index,r);return(Jb(e)?e:r)[hl]}var eFe=(()=>{class r{static{this.\u0275prov=rt({token:r,providedIn:"root",factory:()=>null})}}return r})();function l3(r,i,e){let n=e?r.styles:null,o=e?r.classes:null,s=0;if(i!==null)for(let l=0;l<i.length;l++){let h=i[l];if(typeof h=="number")s=h;else if(s==1)o=d7(o,h);else if(s==2){let p=h,m=i[++l];n=d7(n,p+": "+m+";")}}e?r.styles=n:r.stylesWithoutHost=n,e?r.classes=o:r.classesWithoutHost=o}var c3=class extends au{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){let e=tw(i);return new AT(e,this.ngModule)}};function dae(r,i){let e=[];for(let n in r){if(!r.hasOwnProperty(n))continue;let o=r[n];if(o===void 0)continue;let s=Array.isArray(o),l=s?o[0]:o,h=s?o[1]:ew.None;i?e.push({propName:l,templateName:n,isSignal:(h&ew.SignalBased)!==0}):e.push({propName:l,templateName:n})}return e}function tFe(r){let i=r.toLowerCase();return i==="svg"?nle:i==="math"?vOe:null}var AT=class extends a3{get inputs(){let i=this.componentDef,e=i.inputTransforms,n=dae(i.inputs,!0);if(e!==null)for(let o of n)e.hasOwnProperty(o.propName)&&(o.transform=e[o.propName]);return n}get outputs(){return dae(this.componentDef.outputs,!1)}constructor(i,e){super(),this.componentDef=i,this.ngModule=e,this.componentType=i.type,this.selector=eOe(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!e}create(i,e,n,o){let s=zo(null);try{o=o||this.ngModule;let l=o instanceof zc?o:o?.injector;l&&this.componentDef.getStandaloneInjector!==null&&(l=this.componentDef.getStandaloneInjector(l)||l);let h=l?new C7(i,l):i,p=h.get(rw,null);if(p===null)throw new ki(407,!1);let m=h.get(eFe,null),f=h.get(TT,null),g={rendererFactory:p,sanitizer:m,inlineEffectRunner:null,changeDetectionScheduler:f},y=p.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",w=n?dRe(y,n,this.componentDef.encapsulation,h):nce(y,_,tFe(_)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let k=null;w!==null&&(k=HG(w,h,!0));let R=eH(0,null,null,1,0,null,null,null,null,null,null),$=$3(null,R,null,A,null,null,g,y,h,null,k);jG($);let H,oe,se=null;try{let ge=this.componentDef,ue,pe=null;ge.findHostDirectiveDefs?(ue=[],pe=new Map,ge.findHostDirectiveDefs(ge,ue,pe),ue.push(ge)):ue=[ge];let Ce=iFe($,w);se=nFe(Ce,w,ge,ue,$,g,y),oe=OG(R,Gd),w&&sFe(y,ge,w,n),e!==void 0&&aFe(oe,this.ngContentSelectors,e),H=oFe(se,ge,ue,pe,$,[lFe]),rH(R,$,null)}catch(ge){throw se!==null&&D7(se),D7($),ge}finally{VG()}return new W7(this.componentType,H,kT(oe,$),$,oe)}finally{zo(s)}}},W7=class extends G7{constructor(i,e,n,o,s){super(),this.location=n,this._rootLView=o,this._tNode=s,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new JC(o,void 0,!1),this.componentType=i}setInput(i,e){let n=this._tNode.inputs,o;if(n!==null&&(o=n[i])){if(this.previousInputValues??=new Map,this.previousInputValues.has(i)&&Object.is(this.previousInputValues.get(i),e))return;let s=this._rootLView;iH(s[zr],s,o,i,e),this.previousInputValues.set(i,e);let l=sw(this._tNode.index,s);oH(l,1)}}get injector(){return new HC(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}};function iFe(r,i){let e=r[zr],n=Gd;return r[n]=i,PT(e,n,2,"#host",null)}function nFe(r,i,e,n,o,s,l){let h=o[zr];rFe(n,r,i,l);let p=null;i!==null&&(p=HG(i,o[CT]));let m=s.rendererFactory.createRenderer(i,e),f=16;e.signals?f=4096:e.onPush&&(f=64);let g=$3(o,yce(e),null,f,o[r.index],r,s,m,null,null,p);return h.firstCreatePass&&$7(h,r,n.length-1),U3(o,g),o[r.index]=g}function rFe(r,i,e,n){for(let o of r)i.mergedAttrs=UD(i.mergedAttrs,o.hostAttrs);i.mergedAttrs!==null&&(l3(i,i.mergedAttrs,!0),e!==null&&pce(n,e,i))}function oFe(r,i,e,n,o,s){let l=Hd(),h=o[zr],p=ef(l,o);vce(h,o,l,e,null,n);for(let f=0;f<e.length;f++){let g=l.directiveStart+f,y=XC(o,h,g,l);nw(y,o)}bce(h,o,l),p&&nw(p,o);let m=XC(o,h,l.directiveStart+l.componentOffset,l);if(r[Yu]=o[Yu]=m,s!==null)for(let f of s)f(m,i);return QG(h,l,o),m}function sFe(r,i,e,n){if(n)m7(r,e,["ng-version","18.2.13"]);else{let{attrs:o,classes:s}=tOe(i.selectors[0]);o&&m7(r,e,o),s&&s.length>0&&hce(r,e,s.join(" "))}}function aFe(r,i,e){let n=r.projection=[];for(let o=0;o<i.length;o++){let s=e[o];n.push(s!=null?Array.from(s):null)}}function lFe(){let r=Hd();R3(wr()[zr],r)}var Io=(()=>{class r{static{this.__NG_ELEMENT_ID__=cFe}}return r})();function cFe(){let r=Hd();return Bce(r,wr())}var dFe=Io,Nce=class extends dFe{constructor(i,e,n){super(),this._lContainer=i,this._hostTNode=e,this._hostLView=n}get element(){return kT(this._hostTNode,this._hostLView)}get injector(){return new HC(this._hostTNode,this._hostLView)}get parentInjector(){let i=$G(this._hostTNode,this._hostLView);if(wle(i)){let e=e3(i,this._hostLView),n=J5(i),o=e[zr].data[n+8];return new HC(o,e)}else return new HC(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){let e=uae(this._lContainer);return e!==null&&e[i]||null}get length(){return this._lContainer.length-Ku}createEmbeddedView(i,e,n){let o,s;typeof n=="number"?o=n:n!=null&&(o=n.index,s=n.injector);let l=IT(this._lContainer,i.ssrId),h=i.createEmbeddedViewImpl(e||{},s,l);return this.insertImpl(h,o,ST(this._hostTNode,l)),h}createComponent(i,e,n,o,s){let l=i&&!fOe(i),h;if(l)h=e;else{let w=e||{};h=w.index,n=w.injector,o=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}let p=l?i:new AT(tw(i)),m=n||this.parentInjector;if(!s&&p.ngModule==null){let A=(l?m:this.parentInjector).get(zc,null);A&&(s=A)}let f=tw(p.componentType??{}),g=IT(this._lContainer,f?.id??null),y=g?.firstChild??null,_=p.create(m,o,y,s);return this.insertImpl(_.hostView,h,ST(this._hostTNode,g)),_}insert(i,e){return this.insertImpl(i,e,!0)}insertImpl(i,e,n){let o=i._lView;if(COe(o)){let h=this.indexOf(i);if(h!==-1)this.detach(h);else{let p=o[Zu],m=new Nce(p,p[yp],p[Zu]);m.detach(m.indexOf(i))}}let s=this._adjustIndex(e),l=this._lContainer;return rk(l,o,s,n),i.attachToViewContainerRef(),Fae(r7(l),s,i),i}move(i,e){return this.insert(i,e)}indexOf(i){let e=uae(this._lContainer);return e!==null?e.indexOf(i):-1}remove(i){let e=this._adjustIndex(i,-1),n=HD(this._lContainer,e);n&&(Y5(r7(this._lContainer),e),B3(n[zr],n))}detach(i){let e=this._adjustIndex(i,-1),n=HD(this._lContainer,e);return n&&Y5(r7(this._lContainer),e)!=null?new JC(n):null}_adjustIndex(i,e=0){return i??this.length+e}};function uae(r){return r[Q5]}function r7(r){return r[Q5]||(r[Q5]=[])}function Bce(r,i){let e,n=i[r.index];return My(n)?e=n:(e=wce(n,i,null,r),i[r.index]=e,U3(i,e)),hFe(e,i,r,n),new Nce(e,r,i)}function uFe(r,i){let e=r[hl],n=e.createComment(""),o=ef(i,r),s=lce(e,o);return o3(e,s,n,JPe(e,o),!1),n}var hFe=fFe,pFe=()=>!1;function mFe(r,i,e){return pFe(r,i,e)}function fFe(r,i,e,n){if(r[YC])return;let o;e.type&8?o=W0(n):o=uFe(i,e),r[YC]=o}var q7=class r{constructor(i){this.queryList=i,this.matches=null}clone(){return new r(this.queryList)}setDirty(){this.queryList.setDirty()}},Y7=class r{constructor(i=[]){this.queries=i}createEmbeddedView(i){let e=i.queries;if(e!==null){let n=i.contentQueries!==null?i.contentQueries[0]:e.length,o=[];for(let s=0;s<n;s++){let l=e.getByIndex(s),h=this.queries[l.indexInDeclarationView];o.push(h.clone())}return new r(o)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}finishViewCreation(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let e=0;e<this.queries.length;e++)lH(i,e).matches!==null&&this.queries[e].setDirty()}},d3=class{constructor(i,e,n=null){this.flags=e,this.read=n,typeof i=="string"?this.predicate=wFe(i):this.predicate=i}},K7=class r{constructor(i=[]){this.queries=i}elementStart(i,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(i,e)}elementEnd(i){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(i)}embeddedTView(i){let e=null;for(let n=0;n<this.length;n++){let o=e!==null?e.length:0,s=this.getByIndex(n).embeddedTView(i,o);s&&(s.indexInDeclarationView=n,e!==null?e.push(s):e=[s])}return e!==null?new r(e):null}template(i,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(i,e)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}},Z7=class r{constructor(i,e=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(i,e){this.isApplyingToNode(e)&&this.matchTNode(i,e)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,e){this.elementStart(i,e)}embeddedTView(i,e){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,e),new r(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,n=i.parent;for(;n!==null&&n.type&8&&n.index!==e;)n=n.parent;return e===(n!==null?n.index:-1)}return this._appliesToNextNode}matchTNode(i,e){let n=this.metadata.predicate;if(Array.isArray(n))for(let o=0;o<n.length;o++){let s=n[o];this.matchTNodeWithReadOption(i,e,gFe(e,s)),this.matchTNodeWithReadOption(i,e,z5(e,i,s,!1,!1))}else n===jo?e.type&4&&this.matchTNodeWithReadOption(i,e,-1):this.matchTNodeWithReadOption(i,e,z5(e,i,n,!1,!1))}matchTNodeWithReadOption(i,e,n){if(n!==null){let o=this.metadata.read;if(o!==null)if(o===Ht||o===Io||o===jo&&e.type&4)this.addMatch(e.index,-2);else{let s=z5(e,i,o,!1,!1);s!==null&&this.addMatch(e.index,s)}else this.addMatch(e.index,n)}}addMatch(i,e){this.matches===null?this.matches=[i,e]:this.matches.push(i,e)}};function gFe(r,i){let e=r.localNames;if(e!==null){for(let n=0;n<e.length;n+=2)if(e[n]===i)return e[n+1]}return null}function _Fe(r,i){return r.type&11?kT(r,i):r.type&4?z3(r,i):null}function yFe(r,i,e,n){return e===-1?_Fe(i,r):e===-2?vFe(r,i,n):XC(r,r[zr],e,i)}function vFe(r,i,e){if(e===Ht)return kT(i,r);if(e===jo)return z3(i,r);if(e===Io)return Bce(i,r)}function jce(r,i,e,n){let o=i[Ty].queries[n];if(o.matches===null){let s=r.data,l=e.matches,h=[];for(let p=0;l!==null&&p<l.length;p+=2){let m=l[p];if(m<0)h.push(null);else{let f=s[m];h.push(yFe(i,f,l[p+1],e.metadata.read))}}o.matches=h}return o.matches}function Q7(r,i,e,n){let o=r.queries.getByIndex(e),s=o.matches;if(s!==null){let l=jce(r,i,o,e);for(let h=0;h<s.length;h+=2){let p=s[h];if(p>0)n.push(l[h/2]);else{let m=s[h+1],f=i[-p];for(let g=Ku;g<f.length;g++){let y=f[g];y[qC]===y[Zu]&&Q7(y[zr],y,m,n)}if(f[xT]!==null){let g=f[xT];for(let y=0;y<g.length;y++){let _=g[y];Q7(_[zr],_,m,n)}}}}}return n}function aH(r,i){return r[Ty].queries[i].queryList}function Vce(r,i,e){let n=new _p((e&4)===4);return pRe(r,i,n,n.destroy),(i[Ty]??=new Y7).queries.push(new q7(n))-1}function bFe(r,i,e){let n=el();return n.firstCreatePass&&(Uce(n,new d3(r,i,e),-1),(i&2)===2&&(n.staticViewQueries=!0)),Vce(n,wr(),i)}function $ce(r,i,e,n){let o=el();if(o.firstCreatePass){let s=Hd();Uce(o,new d3(i,e,n),s.index),CFe(o,r),(e&2)===2&&(o.staticContentQueries=!0)}return Vce(o,wr(),e)}function wFe(r){return r.split(",").map(i=>i.trim())}function Uce(r,i,e){r.queries===null&&(r.queries=new K7),r.queries.track(new Z7(i,e))}function CFe(r,i){let e=r.contentQueries||(r.contentQueries=[]),n=e.length?e[e.length-1]:-1;i!==n&&e.push(r.queries.length-1,i)}function lH(r,i){return r.queries.getByIndex(i)}function zce(r,i){let e=r[zr],n=lH(e,i);return n.crossesNgTemplate?Q7(e,r,i,[]):jce(e,r,n,i)}var hae=new Set;function nf(r){hae.has(r)||(hae.add(r),performance?.mark?.("mark_feature_usage",{detail:{feature:r}}))}function G3(r){return typeof r=="function"&&r[Zm]!==void 0}function Vl(r,i){nf("NgSignals");let e=Joe(r),n=e[Zm];return i?.equal&&(n.equal=i.equal),e.set=o=>Ez(n,o),e.update=o=>ese(n,o),e.asReadonly=xFe.bind(e),e}function xFe(){let r=this[Zm];if(r.readonlyFn===void 0){let i=()=>this();i[Zm]=r,r.readonlyFn=i}return r.readonlyFn}function Gce(r){return G3(r)&&typeof r.set=="function"}function Hce(r,i){let e,n=Az(()=>{e._dirtyCounter();let o=AFe(e,r);if(i&&o===void 0)throw new ki(-951,!1);return o});return e=n[Zm],e._dirtyCounter=Vl(0),e._flatValue=void 0,n}function SFe(){return Hce(!0,!1)}function IFe(){return Hce(!0,!0)}function TFe(r,i){let e=r[Zm];e._lView=wr(),e._queryIndex=i,e._queryList=aH(e._lView,i),e._queryList.onDirty(()=>e._dirtyCounter.update(n=>n+1))}function AFe(r,i){let e=r._lView,n=r._queryIndex;if(e===void 0||n===void 0||e[Dr]&4)return i?void 0:Vh;let o=aH(e,n),s=zce(e,n);return o.reset(s,Rle),i?o.first:o._changesDetected||r._flatValue===void 0?r._flatValue=o.toArray():r._flatValue}function pae(r,i){return SFe()}function EFe(r,i){return IFe()}var Wce=(pae.required=EFe,pae);function MFe(r){return Object.getPrototypeOf(r.prototype).constructor}function fn(r){let i=MFe(r.type),e=!0,n=[r];for(;i;){let o;if(Ay(r))o=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new ki(903,!1);o=i.\u0275dir}if(o){if(e){n.push(o);let l=r;l.inputs=L5(r.inputs),l.inputTransforms=L5(r.inputTransforms),l.declaredInputs=L5(r.declaredInputs),l.outputs=L5(r.outputs);let h=o.hostBindings;h&&RFe(r,h);let p=o.viewQuery,m=o.contentQueries;if(p&&OFe(r,p),m&&PFe(r,m),DFe(r,o),vke(r.outputs,o.outputs),Ay(o)&&o.data.animation){let f=r.data;f.animation=(f.animation||[]).concat(o.data.animation)}}let s=o.features;if(s)for(let l=0;l<s.length;l++){let h=s[l];h&&h.ngInherit&&h(r),h===fn&&(e=!1)}}i=Object.getPrototypeOf(i)}kFe(n)}function DFe(r,i){for(let e in i.inputs){if(!i.inputs.hasOwnProperty(e)||r.inputs.hasOwnProperty(e))continue;let n=i.inputs[e];if(n!==void 0&&(r.inputs[e]=n,r.declaredInputs[e]=i.declaredInputs[e],i.inputTransforms!==null)){let o=Array.isArray(n)?n[0]:n;if(!i.inputTransforms.hasOwnProperty(o))continue;r.inputTransforms??={},r.inputTransforms[o]=i.inputTransforms[o]}}}function kFe(r){let i=0,e=null;for(let n=r.length-1;n>=0;n--){let o=r[n];o.hostVars=i+=o.hostVars,o.hostAttrs=UD(o.hostAttrs,e=UD(e,o.hostAttrs))}}function L5(r){return r===Iy?{}:r===Vh?[]:r}function OFe(r,i){let e=r.viewQuery;e?r.viewQuery=(n,o)=>{i(n,o),e(n,o)}:r.viewQuery=i}function PFe(r,i){let e=r.contentQueries;e?r.contentQueries=(n,o,s)=>{i(n,o,s),e(n,o,s)}:r.contentQueries=i}function RFe(r,i){let e=r.hostBindings;e?r.hostBindings=(n,o)=>{i(n,o),e(n,o)}:r.hostBindings=i}function qce(r){let i=e=>{let n=Array.isArray(r);e.hostDirectives===null?(e.findHostDirectiveDefs=Yce,e.hostDirectives=n?r.map(X7):[r]):n?e.hostDirectives.unshift(...r.map(X7)):e.hostDirectives.unshift(r)};return i.ngInherit=!0,i}function Yce(r,i,e){if(r.hostDirectives!==null)for(let n of r.hostDirectives)if(typeof n=="function"){let o=n();for(let s of o)mae(X7(s),i,e)}else mae(n,i,e)}function mae(r,i,e){let n=EG(r.directive);FFe(n.declaredInputs,r.inputs),Yce(n,i,e),e.set(n,r),i.push(n)}function X7(r){return typeof r=="function"?{directive:su(r),inputs:Iy,outputs:Iy}:{directive:su(r.directive),inputs:fae(r.inputs),outputs:fae(r.outputs)}}function fae(r){if(r===void 0||r.length===0)return Iy;let i={};for(let e=0;e<r.length;e+=2)i[r[e]]=r[e+1];return i}function FFe(r,i){for(let e in i)if(i.hasOwnProperty(e)){let n=i[e],o=r[e];r[n]=o}}function an(r){let i=r.inputConfig,e={};for(let n in i)if(i.hasOwnProperty(n)){let o=i[n];Array.isArray(o)&&o[3]&&(e[n]=o[3])}r.inputTransforms=e}var ow=class{},WD=class{};var J7=class extends ow{constructor(i,e,n,o=!0){super(),this.ngModuleType=i,this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new c3(this);let s=Gae(i);this._bootstrapComponents=tce(s.bootstrap),this._r3Injector=Dle(i,e,[{provide:ow,useValue:this},{provide:au,useValue:this.componentFactoryResolver},...n],$h(i),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}},eG=class extends WD{constructor(i){super(),this.moduleType=i}create(i){return new J7(this.moduleType,i,[])}};var u3=class extends ow{constructor(i){super(),this.componentFactoryResolver=new c3(this),this.instance=null;let e=new zD([...i.providers,{provide:ow,useValue:this},{provide:au,useValue:this.componentFactoryResolver}],i.parent||S3(),i.debugName,new Set(["environment"]));this.injector=e,i.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}};function cH(r,i,e=null){return new u3({providers:r,parent:i,debugName:e,runEnvironmentInitializers:!0}).injector}function Kce(r){return dH(r)?Array.isArray(r)||!(r instanceof Map)&&Symbol.iterator in r:!1}function LFe(r,i){if(Array.isArray(r))for(let e=0;e<r.length;e++)i(r[e]);else{let e=r[Symbol.iterator](),n;for(;!(n=e.next()).done;)i(n.value)}}function dH(r){return r!==null&&(typeof r=="function"||typeof r=="object")}function uH(r,i,e){return r[i]=e}function NFe(r,i){return r[i]}function um(r,i,e){let n=r[i];return Object.is(n,e)?!1:(r[i]=e,!0)}function h3(r,i,e,n){let o=um(r,i,e);return um(r,i+1,n)||o}function BFe(r,i,e,n,o,s){let l=h3(r,i,e,n);return h3(r,i+2,o,s)||l}function jFe(r){return(r.flags&32)===32}function VFe(r,i,e,n,o,s,l,h,p){let m=i.consts,f=PT(i,r,4,l||null,h||null);tH(i,e,f,iw(m,p)),R3(i,f);let g=f.tView=eH(2,f,n,o,s,i.directiveRegistry,i.pipeRegistry,null,i.schemas,m,null);return i.queries!==null&&(i.queries.template(i,f),g.queries=i.queries.embeddedTView(f)),f}function p3(r,i,e,n,o,s,l,h,p,m){let f=e+Gd,g=i.firstCreatePass?VFe(f,i,r,n,o,s,l,h,p):i.data[f];tx(g,!1);let y=$Fe(i,r,g,e);O3()&&j3(i,r,y,g),nw(y,r);let _=wce(y,r,y,g);return r[f]=_,U3(r,_),mFe(_,g,r),A3(g)&&XG(i,r,g),p!=null&&JG(r,g,m),g}function We(r,i,e,n,o,s,l,h){let p=wr(),m=el(),f=iw(m.consts,s);return p3(p,m,r,i,e,n,o,f,l,h),We}var $Fe=UFe;function UFe(r,i,e,n){return P3(!0),i[hl].createComment("")}var Qb=function(r){return r[r.EarlyRead=0]="EarlyRead",r[r.Write=1]="Write",r[r.MixedReadWrite=2]="MixedReadWrite",r[r.Read=3]="Read",r}(Qb||{}),Zce=(()=>{class r{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=rt({token:r,providedIn:"root",factory:()=>new r})}}return r})(),tG=class r{constructor(){this.ngZone=Et(ci),this.scheduler=Et(TT),this.errorHandler=Et(gp,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Qb.EarlyRead,Qb.Write,Qb.MixedReadWrite,Qb.Read]}execute(){this.executing=!0;for(let i of r.PHASES)for(let e of this.sequences)if(!(e.erroredOrDestroyed||!e.hooks[i]))try{e.pipelinedValue=this.ngZone.runOutsideAngular(()=>e.hooks[i](e.pipelinedValue))}catch(n){e.erroredOrDestroyed=!0,this.errorHandler?.handleError(n)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(i){this.executing?this.deferredRegistrations.add(i):(this.sequences.add(i),this.scheduler.notify(6))}unregister(i){this.executing&&this.sequences.has(i)?(i.erroredOrDestroyed=!0,i.pipelinedValue=void 0,i.once=!0):(this.sequences.delete(i),this.deferredRegistrations.delete(i))}static{this.\u0275prov=rt({token:r,providedIn:"root",factory:()=>new r})}},iG=class{constructor(i,e,n,o){this.impl=i,this.hooks=e,this.once=n,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function ok(r,i){!i?.injector&&QD(ok);let e=i?.injector??Et(yn);return ice(e)?(nf("NgAfterRender"),Qce(r,e,i,!1)):Xce}function ks(r,i){!i?.injector&&QD(ks);let e=i?.injector??Et(yn);return ice(e)?(nf("NgAfterNextRender"),Qce(r,e,i,!0)):Xce}function zFe(r,i){if(r instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[i]=r,e}else return[r.earlyRead,r.write,r.mixedReadWrite,r.read]}function Qce(r,i,e,n){let o=i.get(Zce);o.impl??=i.get(tG);let s=e?.phase??Qb.MixedReadWrite,l=e?.manualCleanup!==!0?i.get(F3):null,h=new iG(o.impl,zFe(r,s),n,l);return o.impl.register(h),h}var Xce={destroy(){}};function yi(r,i,e,n){let o=wr(),s=aw();if(um(o,s,i)){let l=el(),h=DT();ERe(h,o,r,i,e,n)}return yi}function hH(r,i,e,n){return um(r,aw(),e)?i+pg(e)+n:Ju}function GFe(r,i,e,n,o,s){let l=ple(),h=h3(r,l,e,o);return D3(2),h?i+pg(e)+n+pg(o)+s:Ju}function HFe(r,i,e,n,o,s,l,h,p,m){let f=ple(),g=BFe(r,f,e,o,l,p);return D3(4),g?i+pg(e)+n+pg(o)+s+pg(l)+h+pg(p)+m:Ju}function N5(r,i){return r<<17|i<<2}function ex(r){return r>>17&32767}function WFe(r){return(r&2)==2}function qFe(r,i){return r&131071|i<<17}function nG(r){return r|2}function ET(r){return(r&131068)>>2}function o7(r,i){return r&-131069|i<<2}function YFe(r){return(r&1)===1}function rG(r){return r|1}function KFe(r,i,e,n,o,s){let l=s?i.classBindings:i.styleBindings,h=ex(l),p=ET(l);r[n]=e;let m=!1,f;if(Array.isArray(e)){let g=e;f=g[1],(f===null||KD(g,f)>0)&&(m=!0)}else f=e;if(o)if(p!==0){let y=ex(r[h+1]);r[n+1]=N5(y,h),y!==0&&(r[y+1]=o7(r[y+1],n)),r[h+1]=qFe(r[h+1],n)}else r[n+1]=N5(h,0),h!==0&&(r[h+1]=o7(r[h+1],n)),h=n;else r[n+1]=N5(p,0),h===0?h=n:r[p+1]=o7(r[p+1],n),p=n;m&&(r[n+1]=nG(r[n+1])),gae(r,f,n,!0),gae(r,f,n,!1),ZFe(i,f,r,n,s),l=N5(h,p),s?i.classBindings=l:i.styleBindings=l}function ZFe(r,i,e,n,o){let s=o?r.residualClasses:r.residualStyles;s!=null&&typeof i=="string"&&KD(s,i)>=0&&(e[n+1]=rG(e[n+1]))}function gae(r,i,e,n){let o=r[e+1],s=i===null,l=n?ex(o):ET(o),h=!1;for(;l!==0&&(h===!1||s);){let p=r[l],m=r[l+1];QFe(p,i)&&(h=!0,r[l+1]=n?rG(m):nG(m)),l=n?ex(m):ET(m)}h&&(r[e+1]=n?nG(o):rG(o))}function QFe(r,i){return r===null||i==null||(Array.isArray(r)?r[1]:r)===i?!0:Array.isArray(r)&&typeof i=="string"?KD(r,i)>=0:!1}var hg={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function XFe(r){return r.substring(hg.key,hg.keyEnd)}function JFe(r){return eLe(r),Jce(r,ede(r,0,hg.textEnd))}function Jce(r,i){let e=hg.textEnd;return e===i?-1:(i=hg.keyEnd=tLe(r,hg.key=i,e),ede(r,i,e))}function eLe(r){hg.key=0,hg.keyEnd=0,hg.value=0,hg.valueEnd=0,hg.textEnd=r.length}function ede(r,i,e){for(;i<e&&r.charCodeAt(i)<=32;)i++;return i}function tLe(r,i,e){for(;i<e&&r.charCodeAt(i)>32;)i++;return i}function ee(r,i,e){let n=wr(),o=aw();if(um(n,o,i)){let s=el(),l=DT();ik(s,l,n,r,i,n[hl],e,!1)}return ee}function oG(r,i,e,n,o){let s=i.inputs,l=o?"class":"style";iH(r,e,s[l],l,n)}function vo(r,i,e){return ide(r,i,e,!1),vo}function oi(r,i){return ide(r,i,null,!0),oi}function Hr(r){nde(aLe,tde,r,!0)}function tde(r,i){for(let e=JFe(i);e>=0;e=Jce(i,e))C3(r,XFe(i),!0)}function ide(r,i,e,n){let o=wr(),s=el(),l=D3(2);if(s.firstUpdatePass&&ode(s,r,l,n),i!==Ju&&um(o,l,i)){let h=s.data[Z0()];sde(s,h,o,o[hl],r,o[l+1]=cLe(i,e),n,l)}}function nde(r,i,e,n){let o=el(),s=D3(2);o.firstUpdatePass&&ode(o,null,s,n);let l=wr();if(e!==Ju&&um(l,s,e)){let h=o.data[Z0()];if(ade(h,n)&&!rde(o,s)){let p=n?h.classesWithoutHost:h.stylesWithoutHost;p!==null&&(e=d7(p,e||"")),oG(o,h,l,e,n)}else lLe(o,h,l,l[hl],l[s+1],l[s+1]=sLe(r,i,e),n,s)}}function rde(r,i){return i>=r.expandoStartIndex}function ode(r,i,e,n){let o=r.data;if(o[e+1]===null){let s=o[Z0()],l=rde(r,e);ade(s,n)&&i===null&&!l&&(i=!1),i=iLe(o,s,i,n),KFe(o,s,i,e,l,n)}}function iLe(r,i,e,n){let o=NG(r),s=n?i.residualClasses:i.residualStyles;if(o===null)(n?i.classBindings:i.styleBindings)===0&&(e=s7(null,r,i,e,n),e=qD(e,i.attrs,n),s=null);else{let l=i.directiveStylingLast;if(l===-1||r[l]!==o)if(e=s7(o,r,i,e,n),s===null){let p=nLe(r,i,n);p!==void 0&&Array.isArray(p)&&(p=s7(null,r,i,p[1],n),p=qD(p,i.attrs,n),rLe(r,i,n,p))}else s=oLe(r,i,n)}return s!==void 0&&(n?i.residualClasses=s:i.residualStyles=s),e}function nLe(r,i,e){let n=e?i.classBindings:i.styleBindings;if(ET(n)!==0)return r[ex(n)]}function rLe(r,i,e,n){let o=e?i.classBindings:i.styleBindings;r[ex(o)]=n}function oLe(r,i,e){let n,o=i.directiveEnd;for(let s=1+i.directiveStylingLast;s<o;s++){let l=r[s].hostAttrs;n=qD(n,l,e)}return qD(n,i.attrs,e)}function s7(r,i,e,n,o){let s=null,l=e.directiveEnd,h=e.directiveStylingLast;for(h===-1?h=e.directiveStart:h++;h<l&&(s=i[h],n=qD(n,s.hostAttrs,o),s!==r);)h++;return r!==null&&(e.directiveStylingLast=h),n}function qD(r,i,e){let n=e?1:2,o=-1;if(i!==null)for(let s=0;s<i.length;s++){let l=i[s];typeof l=="number"?o=l:o===n&&(Array.isArray(r)||(r=r===void 0?[]:["",r]),C3(r,l,e?!0:i[++s]))}return r===void 0?null:r}function sLe(r,i,e){if(e==null||e==="")return Vh;let n=[],o=tf(e);if(Array.isArray(o))for(let s=0;s<o.length;s++)r(n,o[s],!0);else if(typeof o=="object")for(let s in o)o.hasOwnProperty(s)&&r(n,s,o[s]);else typeof o=="string"&&i(n,o);return n}function aLe(r,i,e){let n=String(i);n!==""&&!n.includes(" ")&&C3(r,n,e)}function lLe(r,i,e,n,o,s,l,h){o===Ju&&(o=Vh);let p=0,m=0,f=0<o.length?o[0]:null,g=0<s.length?s[0]:null;for(;f!==null||g!==null;){let y=p<o.length?o[p+1]:void 0,_=m<s.length?s[m+1]:void 0,w=null,A;f===g?(p+=2,m+=2,y!==_&&(w=g,A=_)):g===null||f!==null&&f<g?(p+=2,w=f):(m+=2,w=g,A=_),w!==null&&sde(r,i,e,n,w,A,l,h),f=p<o.length?o[p]:null,g=m<s.length?s[m]:null}}function sde(r,i,e,n,o,s,l,h){if(!(i.type&3))return;let p=r.data,m=p[h+1],f=YFe(m)?_ae(p,i,e,o,ET(m),l):void 0;if(!m3(f)){m3(s)||WFe(m)&&(s=_ae(p,null,e,o,h,l));let g=rle(Z0(),e);oRe(n,l,g,o,s)}}function _ae(r,i,e,n,o,s){let l=i===null,h;for(;o>0;){let p=r[o],m=Array.isArray(p),f=m?p[1]:p,g=f===null,y=e[o+1];y===Ju&&(y=g?Vh:void 0);let _=g?Qz(y,n):f===n?y:void 0;if(m&&!m3(_)&&(_=Qz(p,n)),m3(_)&&(h=_,l))return h;let w=r[o+1];o=l?ex(w):ET(w)}if(i!==null){let p=s?i.residualClasses:i.residualStyles;p!=null&&(h=Qz(p,n))}return h}function m3(r){return r!==void 0}function cLe(r,i){return r==null||r===""||(typeof i=="string"?r=r+i:typeof r=="object"&&(r=$h(tf(r)))),r}function ade(r,i){return(r.flags&(i?8:16))!==0}function lde(r,i,e){let n=wr(),o=hH(n,r,i,e);nde(C3,tde,o,!0)}var sG=class{destroy(i){}updateValue(i,e){}swap(i,e){let n=Math.min(i,e),o=Math.max(i,e),s=this.detach(o);if(o-n>1){let l=this.detach(n);this.attach(n,s),this.attach(o,l)}else this.attach(n,s)}move(i,e){this.attach(e,this.detach(i))}};function a7(r,i,e,n,o){return r===e&&Object.is(i,n)?1:Object.is(o(r,i),o(e,n))?-1:0}function dLe(r,i,e){let n,o,s=0,l=r.length-1,h=void 0;if(Array.isArray(i)){let p=i.length-1;for(;s<=l&&s<=p;){let m=r.at(s),f=i[s],g=a7(s,m,s,f,e);if(g!==0){g<0&&r.updateValue(s,f),s++;continue}let y=r.at(l),_=i[p],w=a7(l,y,p,_,e);if(w!==0){w<0&&r.updateValue(l,_),l--,p--;continue}let A=e(s,m),k=e(l,y),R=e(s,f);if(Object.is(R,k)){let $=e(p,_);Object.is($,A)?(r.swap(s,l),r.updateValue(l,_),p--,l--):r.move(l,s),r.updateValue(s,f),s++;continue}if(n??=new f3,o??=vae(r,s,l,e),aG(r,n,s,R))r.updateValue(s,f),s++,l++;else if(o.has(R))n.set(A,r.detach(s)),l--;else{let $=r.create(s,i[s]);r.attach(s,$),s++,l++}}for(;s<=p;)yae(r,n,e,s,i[s]),s++}else if(i!=null){let p=i[Symbol.iterator](),m=p.next();for(;!m.done&&s<=l;){let f=r.at(s),g=m.value,y=a7(s,f,s,g,e);if(y!==0)y<0&&r.updateValue(s,g),s++,m=p.next();else{n??=new f3,o??=vae(r,s,l,e);let _=e(s,g);if(aG(r,n,s,_))r.updateValue(s,g),s++,l++,m=p.next();else if(!o.has(_))r.attach(s,r.create(s,g)),s++,l++,m=p.next();else{let w=e(s,f);n.set(w,r.detach(s)),l--}}}for(;!m.done;)yae(r,n,e,r.length,m.value),m=p.next()}for(;s<=l;)r.destroy(r.detach(l--));n?.forEach(p=>{r.destroy(p)})}function aG(r,i,e,n){return i!==void 0&&i.has(n)?(r.attach(e,i.get(n)),i.delete(n),!0):!1}function yae(r,i,e,n,o){if(aG(r,i,n,e(n,o)))r.updateValue(n,o);else{let s=r.create(n,o);r.attach(n,s)}}function vae(r,i,e,n){let o=new Set;for(let s=i;s<=e;s++)o.add(n(s,r.at(s)));return o}var f3=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(i){return this.kvMap.has(i)}delete(i){if(!this.has(i))return!1;let e=this.kvMap.get(i);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(i,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(i),!0}get(i){return this.kvMap.get(i)}set(i,e){if(this.kvMap.has(i)){let n=this.kvMap.get(i);this._vMap===void 0&&(this._vMap=new Map);let o=this._vMap;for(;o.has(n);)n=o.get(n);o.set(n,e)}else this.kvMap.set(i,e)}forEach(i){for(let[e,n]of this.kvMap)if(i(n,e),this._vMap!==void 0){let o=this._vMap;for(;o.has(n);)n=o.get(n),i(n,e)}}};function vn(r,i){nf("NgControlFlow");let e=wr(),n=aw(),o=e[n]!==Ju?e[n]:-1,s=o!==-1?g3(e,Gd+o):void 0,l=0;if(um(e,n,r)){let h=zo(null);try{if(s!==void 0&&Ece(s,l),r!==-1){let p=Gd+r,m=g3(e,p),f=uG(e[zr],p),g=IT(m,f.tView.ssrId),y=nk(e,f,i,{dehydratedView:g});rk(m,y,l,ST(f,g))}}finally{zo(h)}}else if(s!==void 0){let h=Ace(s,l);h!==void 0&&(h[Yu]=i)}}var lG=class{constructor(i,e,n){this.lContainer=i,this.$implicit=e,this.$index=n}get $count(){return this.lContainer.length-Ku}};function cde(r){return r}function sk(r,i){return i}var cG=class{constructor(i,e,n){this.hasEmptyBlock=i,this.trackByFn=e,this.liveCollection=n}};function yg(r,i,e,n,o,s,l,h,p,m,f,g,y){nf("NgControlFlow");let _=wr(),w=el(),A=p!==void 0,k=wr(),R=h?l.bind(k[dm][Yu]):l,$=new cG(A,R);k[Gd+r]=$,p3(_,w,r+1,i,e,n,o,iw(w.consts,s)),A&&p3(_,w,r+2,p,m,f,g,iw(w.consts,y))}var dG=class extends sG{constructor(i,e,n){super(),this.lContainer=i,this.hostLView=e,this.templateTNode=n,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Ku}at(i){return this.getLView(i)[Yu].$implicit}attach(i,e){let n=e[wT];this.needsIndexUpdate||=i!==this.length,rk(this.lContainer,e,i,ST(this.templateTNode,n))}detach(i){return this.needsIndexUpdate||=i!==this.length-1,uLe(this.lContainer,i)}create(i,e){let n=IT(this.lContainer,this.templateTNode.tView.ssrId),o=nk(this.hostLView,this.templateTNode,new lG(this.lContainer,e,i),{dehydratedView:n});return this.operationsCounter?.recordCreate(),o}destroy(i){B3(i[zr],i),this.operationsCounter?.recordDestroy()}updateValue(i,e){this.getLView(i)[Yu].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let i=0;i<this.length;i++)this.getLView(i)[Yu].$index=i}getLView(i){return hLe(this.lContainer,i)}};function vg(r){let i=zo(null),e=Z0();try{let n=wr(),o=n[zr],s=n[e],l=e+1,h=g3(n,l);if(s.liveCollection===void 0){let m=uG(o,l);s.liveCollection=new dG(h,n,m)}else s.liveCollection.reset();let p=s.liveCollection;if(dLe(p,r,s.trackByFn),p.updateIndexes(),s.hasEmptyBlock){let m=aw(),f=p.length===0;if(um(n,m,f)){let g=e+2,y=g3(n,g);if(f){let _=uG(o,g),w=IT(y,_.tView.ssrId),A=nk(n,_,void 0,{dehydratedView:w});rk(y,A,0,ST(_,w))}else Ece(y,0)}}}finally{zo(i)}}function g3(r,i){return r[i]}function uLe(r,i){return HD(r,i)}function hLe(r,i){return Ace(r,i)}function uG(r,i){return OG(r,i)}function pLe(r,i,e,n,o,s){let l=i.consts,h=iw(l,o),p=PT(i,r,2,n,h);return tH(i,e,p,iw(l,s)),p.attrs!==null&&l3(p,p.attrs,!1),p.mergedAttrs!==null&&l3(p,p.mergedAttrs,!0),i.queries!==null&&i.queries.elementStart(i,p),p}function ne(r,i,e,n){let o=wr(),s=el(),l=Gd+r,h=o[hl],p=s.firstCreatePass?pLe(l,s,o,i,e,n):s.data[l],m=mLe(s,o,p,h,i,r);o[l]=m;let f=A3(p);return tx(p,!0),pce(h,m,p),!jFe(p)&&O3()&&j3(s,o,m,p),IOe()===0&&nw(m,o),TOe(),f&&(XG(s,o,p),QG(s,p,o)),n!==null&&JG(o,p),ne}function ce(){let r=Hd();FG()?LG():(r=r.parent,tx(r,!1));let i=r;EOe(i)&&MOe(),AOe();let e=el();return e.firstCreatePass&&(R3(e,r),kG(r)&&e.queries.elementEnd(r)),i.classesWithoutHost!=null&&zOe(i)&&oG(e,i,wr(),i.classesWithoutHost,!0),i.stylesWithoutHost!=null&&GOe(i)&&oG(e,i,wr(),i.stylesWithoutHost,!1),ce}function wt(r,i,e,n){return ne(r,i,e,n),ce(),wt}var mLe=(r,i,e,n,o,s)=>(P3(!0),nce(n,o,jOe()));function fLe(r,i,e,n,o){let s=i.consts,l=iw(s,n),h=PT(i,r,8,"ng-container",l);l!==null&&l3(h,l,!0);let p=iw(s,o);return tH(i,e,h,p),i.queries!==null&&i.queries.elementStart(i,h),h}function zn(r,i,e){let n=wr(),o=el(),s=r+Gd,l=o.firstCreatePass?fLe(s,o,n,i,e):o.data[s];tx(l,!0);let h=gLe(o,n,l,r);return n[s]=h,O3()&&j3(o,n,h,l),nw(h,n),A3(l)&&(XG(o,n,l),QG(o,l,n)),e!=null&&JG(n,l),zn}function Gn(){let r=Hd(),i=el();return FG()?LG():(r=r.parent,tx(r,!1)),i.firstCreatePass&&(R3(i,r),kG(r)&&i.queries.elementEnd(r)),Gn}function _a(r,i,e){return zn(r,i,e),Gn(),_a}var gLe=(r,i,e,n)=>(P3(!0),HPe(i[hl],""));function dt(){return wr()}function hd(r,i,e){let n=wr(),o=aw();if(um(n,o,i)){let s=el(),l=DT();ik(s,l,n,r,i,n[hl],e,!0)}return hd}function ix(r,i,e){let n=wr(),o=aw();if(um(n,o,i)){let s=el(),l=DT(),h=NG(s.data),p=Ice(h,l,n);ik(s,l,n,r,i,p,e,!0)}return ix}var _3="en-US";var _Le=_3;function yLe(r){typeof r=="string"&&(_Le=r.toLowerCase().replace(/_/g,"-"))}var vLe=(r,i,e)=>{};function Oe(r,i,e,n){let o=wr(),s=el(),l=Hd();return pH(s,o,o[hl],l,r,i,n),Oe}function ak(r,i){let e=Hd(),n=wr(),o=el(),s=NG(o.data),l=Ice(s,e,n);return pH(o,n,l,e,r,i),ak}function bLe(r,i,e,n){let o=r.cleanup;if(o!=null)for(let s=0;s<o.length-1;s+=2){let l=o[s];if(l===e&&o[s+1]===n){let h=i[Z5],p=o[s+2];return h.length>p?h[p]:null}typeof l=="string"&&(s+=2)}return null}function pH(r,i,e,n,o,s,l){let h=A3(n),m=r.firstCreatePass&&Sce(r),f=i[Yu],g=xce(i),y=!0;if(n.type&3||l){let A=ef(n,i),k=l?l(A):A,R=g.length,$=l?oe=>l(W0(oe[n.index])):n.index,H=null;if(!l&&h&&(H=bLe(r,i,o,n.index)),H!==null){let oe=H.__ngLastListenerFn__||H;oe.__ngNextListenerFn__=s,H.__ngLastListenerFn__=s,y=!1}else{s=wae(n,i,f,s),vLe(A,o,s);let oe=e.listen(k,o,s);g.push(s,oe),m&&m.push(o,$,R,R+1)}}else s=wae(n,i,f,s);let _=n.outputs,w;if(y&&_!==null&&(w=_[o])){let A=w.length;if(A)for(let k=0;k<A;k+=2){let R=w[k],$=w[k+1],se=i[R][$].subscribe(s),ge=g.length;g.push(s,se),m&&m.push(o,n.index,ge,-(ge+1))}}}function bae(r,i,e,n){let o=zo(null);try{return U0(6,i,e),e(n)!==!1}catch(s){return Tce(r,s),!1}finally{U0(7,i,e),zo(o)}}function wae(r,i,e,n){return function o(s){if(s===Function)return n;let l=r.componentOffset>-1?sw(r.index,i):i;oH(l,5);let h=bae(i,e,n,s),p=o.__ngNextListenerFn__;for(;p;)h=bae(i,e,p,s)&&h,p=p.__ngNextListenerFn__;return h}}function ae(r=1){return NOe(r)}function wLe(r,i){let e=null,n=Kke(r);for(let o=0;o<i.length;o++){let s=i[o];if(s==="*"){e=o;continue}if(n===null?$ae(r,s,!0):Xke(n,s))return o}return e}function Qi(r){let i=wr()[dm][yp];if(!i.projection){let e=r?r.length:1,n=i.projection=Vke(e,null),o=n.slice(),s=i.child;for(;s!==null;){if(s.type!==128){let l=r?wLe(s,r):0;l!==null&&(o[l]?o[l].projectionNext=s:n[l]=s,o[l]=s)}s=s.next}}}function pi(r,i=0,e,n,o,s){let l=wr(),h=el(),p=n?r+1:null;p!==null&&p3(l,h,p,n,o,s,null,e);let m=PT(h,Gd+r,16,null,e||null);m.projection===null&&(m.projection=i),LG();let g=!l[wT]||dle();l[dm][yp].projection[m.projection]===null&&p!==null?CLe(l,h,p):g&&(m.flags&32)!==32&&nRe(h,l,m)}function CLe(r,i,e){let n=Gd+e,o=i.data[n],s=r[n],l=IT(s,o.tView.ssrId),h=nk(r,o,void 0,{dehydratedView:l});rk(s,h,0,ST(o,l))}function Wr(r,i,e){return dde(r,"",i,"",e),Wr}function dde(r,i,e,n,o){let s=wr(),l=hH(s,i,e,n);if(l!==Ju){let h=el(),p=DT();ik(h,p,s,r,l,s[hl],o,!1)}return dde}function Sn(r,i,e,n){$ce(r,i,e,n)}function Ni(r,i,e){bFe(r,i,e)}function Yt(r){let i=wr(),e=el(),n=BG();k3(n+1);let o=lH(e,n);if(r.dirty&&wOe(i)===((o.metadata.flags&2)===2)){if(o.matches===null)r.reset([]);else{let s=zce(i,n);r.reset(s,Rle),r.notifyOnChanges()}return!0}return!1}function Kt(){return aH(wr(),BG())}function ude(r,i,e,n,o){TFe(i,$ce(r,e,n,o))}function hde(r=1){k3(BG()+r)}function xLe(r,i,e,n){e>=r.data.length&&(r.data[e]=null,r.blueprint[e]=null),i[e]=n}function ji(r){let i=kOe();return PG(i,Gd+r)}function Ye(r,i=""){let e=wr(),n=el(),o=r+Gd,s=n.firstCreatePass?PT(n,o,1,i,null):n.data[o],l=SLe(n,e,s,i,r);e[o]=l,O3()&&j3(n,e,l,s),tx(s,!1)}var SLe=(r,i,e,n,o)=>(P3(!0),zPe(i[hl],n));function Si(r){return Qt("",r,""),Si}function Qt(r,i,e){let n=wr(),o=hH(n,r,i,e);return o!==Ju&&nH(n,Z0(),o),Qt}function rf(r,i,e,n,o){let s=wr(),l=GFe(s,r,i,e,n,o);return l!==Ju&&nH(s,Z0(),l),rf}function mH(r,i,e,n,o,s,l,h,p){let m=wr(),f=HFe(m,r,i,e,n,o,s,l,h,p);return f!==Ju&&nH(m,Z0(),f),mH}function vs(r,i,e){Gce(i)&&(i=i());let n=wr(),o=aw();if(um(n,o,i)){let s=el(),l=DT();ik(s,l,n,r,i,n[hl],e,!1)}return vs}function Os(r,i){let e=Gce(r);return e&&r.set(i),e}function bs(r,i){let e=wr(),n=el(),o=Hd();return pH(n,e,e[hl],o,r,i),bs}function ILe(r,i,e){let n=el();if(n.firstCreatePass){let o=Ay(r);hG(e,n.data,n.blueprint,o,!0),hG(i,n.data,n.blueprint,o,!1)}}function hG(r,i,e,n,o){if(r=su(r),Array.isArray(r))for(let s=0;s<r.length;s++)hG(r[s],i,e,n,o);else{let s=el(),l=wr(),h=Hd(),p=bT(r)?r:su(r.provide),m=Zae(r),f=h.providerIndexes&1048575,g=h.directiveStart,y=h.providerIndexes>>20;if(bT(r)||!r.multi){let _=new QC(m,o,ie),w=c7(p,i,o?f:f+y,g);w===-1?(S7(i3(h,l),s,p),l7(s,r,i.length),i.push(p),h.directiveStart++,h.directiveEnd++,o&&(h.providerIndexes+=1048576),e.push(_),l.push(_)):(e[w]=_,l[w]=_)}else{let _=c7(p,i,f+y,g),w=c7(p,i,f,f+y),A=_>=0&&e[_],k=w>=0&&e[w];if(o&&!k||!o&&!A){S7(i3(h,l),s,p);let R=ELe(o?ALe:TLe,e.length,o,n,m);!o&&k&&(e[w].providerFactory=R),l7(s,r,i.length,0),i.push(p),h.directiveStart++,h.directiveEnd++,o&&(h.providerIndexes+=1048576),e.push(R),l.push(R)}else{let R=pde(e[o?w:_],m,!o&&n);l7(s,r,_>-1?_:w,R)}!o&&n&&k&&e[w].componentProviders++}}}function l7(r,i,e,n){let o=bT(i),s=lOe(i);if(o||s){let p=(s?su(i.useClass):i).prototype.ngOnDestroy;if(p){let m=r.destroyHooks||(r.destroyHooks=[]);if(!o&&i.multi){let f=m.indexOf(e);f===-1?m.push(e,[n,p]):m[f+1].push(n,p)}else m.push(e,p)}}}function pde(r,i,e){return e&&r.componentProviders++,r.multi.push(i)-1}function c7(r,i,e,n){for(let o=e;o<n;o++)if(i[o]===r)return o;return-1}function TLe(r,i,e,n){return pG(this.multi,[])}function ALe(r,i,e,n){let o=this.multi,s;if(this.providerFactory){let l=this.providerFactory.componentProviders,h=XC(e,e[zr],this.providerFactory.index,n);s=h.slice(0,l),pG(o,s);for(let p=l;p<h.length;p++)s.push(h[p])}else s=[],pG(o,s);return s}function pG(r,i){for(let e=0;e<r.length;e++){let n=r[e];i.push(n())}return i}function ELe(r,i,e,n,o){let s=new QC(r,e,ie);return s.multi=[],s.index=i,s.componentProviders=0,pde(s,o,n&&!e),s}function Bi(r,i=[]){return e=>{e.providersResolver=(n,o)=>ILe(n,o?o(r):r,i)}}var MLe=(()=>{class r{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let n=qae(!1,e.type),o=n.length>0?cH([n],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,o)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=rt({token:r,providedIn:"environment",factory:()=>new r(xe(zc))})}}return r})();function yt(r){nf("NgStandalone"),r.getStandaloneInjector=i=>i.get(MLe).getOrCreateStandaloneInjector(r)}function lw(r,i,e){let n=XD()+r,o=wr();return o[n]===Ju?uH(o,n,e?i.call(e):i()):NFe(o,n)}function fo(r,i,e,n){return fde(wr(),XD(),r,i,e,n)}function Oy(r,i,e,n,o){return gde(wr(),XD(),r,i,e,n,o)}function mde(r,i){let e=r[i];return e===Ju?void 0:e}function fde(r,i,e,n,o,s){let l=i+e;return um(r,l,o)?uH(r,l+1,s?n.call(s,o):n(o)):mde(r,l+1)}function gde(r,i,e,n,o,s,l){let h=i+e;return h3(r,h,o,s)?uH(r,h+2,l?n.call(l,o,s):n(o,s)):mde(r,h+2)}function Ne(r,i){let e=el(),n,o=r+Gd;e.firstCreatePass?(n=DLe(i,e.pipeRegistry),e.data[o]=n,n.onDestroy&&(e.destroyHooks??=[]).push(o,n.onDestroy)):n=e.data[o];let s=n.factory||(n.factory=WC(n.type,!0)),l,h=fp(ie);try{let p=t3(!1),m=s();return t3(p),xLe(e,wr(),o,m),m}finally{fp(h)}}function DLe(r,i){if(i)for(let e=i.length-1;e>=0;e--){let n=i[e];if(r===n.name)return n}}function je(r,i,e){let n=r+Gd,o=wr(),s=PG(o,n);return _de(o,n)?fde(o,XD(),i,s.transform,e,s):s.transform(e)}function cw(r,i,e,n){let o=r+Gd,s=wr(),l=PG(s,o);return _de(s,o)?gde(s,XD(),i,l.transform,e,n,l):l.transform(e,n)}function _de(r,i){return r[zr].data[i].pure}function Vo(r,i){return z3(r,i)}var RT=(()=>{class r{log(e){console.log(e)}warn(e){console.warn(e)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"platform"})}}return r})();var fH=new At(""),lk=new At(""),H3=(()=>{class r{constructor(e,n,o){this._ngZone=e,this.registry=n,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,gH||(kLe(o),o.addToWindow(n)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ci.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>n.updateCb&&n.updateCb(e)?(clearTimeout(n.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,o){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(l=>l.timeoutId!==s),e()},n)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:o})}whenStable(e,n,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,o),this._runCallbacksIfReady()}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,n,o){return[]}static{this.\u0275fac=function(n){return new(n||r)(xe(ci),xe(W3),xe(lk))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})(),W3=(()=>{class r{constructor(){this._applications=new Map}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return gH?.findTestabilityInTree(this,e,n)??null}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"platform"})}}return r})();function kLe(r){gH=r}var gH;function dw(r){return!!r&&typeof r.then=="function"}function _H(r){return!!r&&typeof r.subscribe=="function"}var hm=new At(""),yde=(()=>{class r{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,n)=>{this.resolve=e,this.reject=n}),this.appInits=Et(hm,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let e=[];for(let o of this.appInits){let s=o();if(dw(s))e.push(s);else if(_H(s)){let l=new Promise((h,p)=>{s.subscribe({complete:h,error:p})});e.push(l)}}let n=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{n()}).catch(o=>{this.reject(o)}),e.length===0&&n(),this.initialized=!0}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),q3=new At("");function OLe(){Xoe(()=>{throw new ki(600,!1)})}function PLe(r){return r.isBoundToModule}var RLe=10;function FLe(r,i,e){try{let n=e();return dw(n)?n.catch(o=>{throw i.runOutsideAngular(()=>r.handleError(o)),o}):n}catch(n){throw i.runOutsideAngular(()=>r.handleError(n)),n}}var fs=(()=>{class r{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Et(cPe),this.afterRenderManager=Et(Zce),this.zonelessEnabled=Et(sH),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Dt,this.afterTick=new Dt,this.componentTypes=[],this.components=[],this.isStable=Et(X0).hasPendingTasks.pipe($t(e=>!e)),this._injector=Et(zc)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let e;return new Promise(n=>{e=this.isStable.subscribe({next:o=>{o&&n()}})}).finally(()=>{e.unsubscribe()})}get injector(){return this._injector}bootstrap(e,n){let o=e instanceof a3;if(!this._injector.get(yde).done){let y=!o&&zae(e),_=!1;throw new ki(405,_)}let l;o?l=e:l=this._injector.get(au).resolveComponentFactory(e),this.componentTypes.push(l.componentType);let h=PLe(l)?void 0:this._injector.get(ow),p=n||l.selector,m=l.create(yn.NULL,[],p,h),f=m.location.nativeElement,g=m.injector.get(fH,null);return g?.registerApplication(f),m.onDestroy(()=>{this.detachView(m.hostView),G5(this.components,m),g?.unregisterApplication(f)}),this._loadComponent(m),m}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ki(101,!1);let e=zo(null);try{this._runningTick=!0,this.synchronize()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1,zo(e),this.afterTick.next()}}synchronize(){let e=null;this._injector.destroyed||(e=this._injector.get(rw,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let n=0;for(;this.dirtyFlags!==0&&n++<RLe;)this.synchronizeOnce(e)}synchronizeOnce(e){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(n);for(let{_lView:o,notifyErrorHandler:s}of this._views)LLe(o,s,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else e?.begin?.(),e?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>E3(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){let n=e;G5(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);let n=this._injector.get(q3,[]);[...this._bootstrapListeners,...n].forEach(o=>o(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>G5(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new ki(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function G5(r,i){let e=r.indexOf(i);e>-1&&r.splice(e,1)}function LLe(r,i,e,n){if(!e&&!E3(r))return;kce(r,i,e&&!n?0:1)}var mG=class{constructor(i,e){this.ngModuleFactory=i,this.componentFactories=e}},yH=(()=>{class r{compileModuleSync(e){return new eG(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let n=this.compileModuleSync(e),o=Gae(e),s=tce(o.declarations).reduce((l,h)=>{let p=tw(h);return p&&l.push(new AT(p)),l},[]);return new mG(n,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var NLe=(()=>{class r{constructor(){this.zone=Et(ci),this.changeDetectionScheduler=Et(TT),this.applicationRef=Et(fs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function BLe({ngZoneFactory:r,ignoreChangesOutsideZone:i,scheduleInRootZone:e}){return r??=()=>new ci(li(Xe({},jLe()),{scheduleInRootZone:e})),[{provide:ci,useFactory:r},{provide:vT,multi:!0,useFactory:()=>{let n=Et(NLe,{optional:!0});return()=>n.initialize()}},{provide:vT,multi:!0,useFactory:()=>{let n=Et(VLe);return()=>{n.initialize()}}},i===!0?{provide:Fce,useValue:!0}:[],{provide:Lce,useValue:e??kle}]}function jLe(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:r?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:r?.runCoalescing??!1}}var VLe=(()=>{class r{constructor(){this.subscription=new pn,this.initialized=!1,this.zone=Et(ci),this.pendingTasks=Et(X0)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ci.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ci.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var $Le=(()=>{class r{constructor(){this.appRef=Et(fs),this.taskService=Et(X0),this.ngZone=Et(ci),this.zonelessEnabled=Et(sH),this.disableScheduling=Et(Fce,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new pn,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(r3):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Et(Lce,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof M7||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let n=this.useMicrotaskScheduler?Zse:Ole;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>n(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>n(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(r3+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(n){throw this.taskService.remove(e),n}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Zse(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function ULe(){return typeof $localize<"u"&&$localize.locale||_3}var ck=new At("",{providedIn:"root",factory:()=>Et(ck,ko.Optional|ko.SkipSelf)||ULe()});var fG=new At("");function B5(r){return!r.moduleRef}function zLe(r){let i=B5(r)?r.r3Injector:r.moduleRef.injector,e=i.get(ci);return e.run(()=>{B5(r)?r.r3Injector.resolveInjectorInitializers():r.moduleRef.resolveInjectorInitializers();let n=i.get(gp,null),o;if(e.runOutsideAngular(()=>{o=e.onError.subscribe({next:s=>{n.handleError(s)}})}),B5(r)){let s=()=>i.destroy(),l=r.platformInjector.get(fG);l.add(s),i.onDestroy(()=>{o.unsubscribe(),l.delete(s)})}else{let s=()=>r.moduleRef.destroy(),l=r.platformInjector.get(fG);l.add(s),r.moduleRef.onDestroy(()=>{G5(r.allPlatformModules,r.moduleRef),o.unsubscribe(),l.delete(s)})}return FLe(n,e,()=>{let s=i.get(yde);return s.runInitializers(),s.donePromise.then(()=>{let l=i.get(ck,_3);if(yLe(l||_3),B5(r)){let h=i.get(fs);return r.rootComponent!==void 0&&h.bootstrap(r.rootComponent),h}else return GLe(r.moduleRef,r.allPlatformModules),r.moduleRef})})})}function GLe(r,i){let e=r.injector.get(fs);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(n=>e.bootstrap(n));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(e);else throw new ki(-403,!1);i.push(r)}var H5=null;function HLe(r=[],i){return yn.create({name:i,providers:[{provide:x3,useValue:"platform"},{provide:fG,useValue:new Set([()=>H5=null])},...r]})}function WLe(r=[]){if(H5)return H5;let i=HLe(r);return H5=i,OLe(),qLe(i),i}function qLe(r){r.get(GG,null)?.forEach(e=>e())}function vde(){return!1}var Ti=(()=>{class r{static{this.__NG_ELEMENT_ID__=YLe}}return r})();function YLe(r){return KLe(Hd(),wr(),(r&16)===16)}function KLe(r,i,e){if(T3(r)&&!e){let n=sw(r.index,i);return new JC(n,n)}else if(r.type&175){let n=i[dm];return new JC(n,i)}return null}var gG=class{constructor(){}supports(i){return Kce(i)}create(i){return new _G(i)}},ZLe=(r,i)=>i,_G=class{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||ZLe}forEachItem(i){let e;for(e=this._itHead;e!==null;e=e._next)i(e)}forEachOperation(i){let e=this._itHead,n=this._removalsHead,o=0,s=null;for(;e||n;){let l=!n||e&&e.currentIndex<Cae(n,o,s)?e:n,h=Cae(l,o,s),p=l.currentIndex;if(l===n)o--,n=n._nextRemoved;else if(e=e._next,l.previousIndex==null)o++;else{s||(s=[]);let m=h-o,f=p-o;if(m!=f){for(let y=0;y<m;y++){let _=y<s.length?s[y]:s[y]=0,w=_+y;f<=w&&w<m&&(s[y]=_+1)}let g=l.previousIndex;s[g]=f-m}}h!==p&&i(l,h,p)}}forEachPreviousItem(i){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)i(e)}forEachAddedItem(i){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)i(e)}forEachMovedItem(i){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)i(e)}forEachRemovedItem(i){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)i(e)}forEachIdentityChange(i){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)i(e)}diff(i){if(i==null&&(i=[]),!Kce(i))throw new ki(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let e=this._itHead,n=!1,o,s,l;if(Array.isArray(i)){this.length=i.length;for(let h=0;h<this.length;h++)s=i[h],l=this._trackByFn(h,s),e===null||!Object.is(e.trackById,l)?(e=this._mismatch(e,s,l,h),n=!0):(n&&(e=this._verifyReinsertion(e,s,l,h)),Object.is(e.item,s)||this._addIdentityChange(e,s)),e=e._next}else o=0,LFe(i,h=>{l=this._trackByFn(o,h),e===null||!Object.is(e.trackById,l)?(e=this._mismatch(e,h,l,o),n=!0):(n&&(e=this._verifyReinsertion(e,h,l,o)),Object.is(e.item,h)||this._addIdentityChange(e,h)),e=e._next,o++}),this.length=o;return this._truncate(e),this.collection=i,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;i!==null;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;i!==null;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;i!==null;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,e,n,o){let s;return i===null?s=this._itTail:(s=i._prev,this._remove(i)),i=this._unlinkedRecords===null?null:this._unlinkedRecords.get(n,null),i!==null?(Object.is(i.item,e)||this._addIdentityChange(i,e),this._reinsertAfter(i,s,o)):(i=this._linkedRecords===null?null:this._linkedRecords.get(n,o),i!==null?(Object.is(i.item,e)||this._addIdentityChange(i,e),this._moveAfter(i,s,o)):i=this._addAfter(new yG(e,n),s,o)),i}_verifyReinsertion(i,e,n,o){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(n,null);return s!==null?i=this._reinsertAfter(s,i._prev,o):i.currentIndex!=o&&(i.currentIndex=o,this._addToMoves(i,o)),i}_truncate(i){for(;i!==null;){let e=i._next;this._addToRemovals(this._unlink(i)),i=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,e,n){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(i);let o=i._prevRemoved,s=i._nextRemoved;return o===null?this._removalsHead=s:o._nextRemoved=s,s===null?this._removalsTail=o:s._prevRemoved=o,this._insertAfter(i,e,n),this._addToMoves(i,n),i}_moveAfter(i,e,n){return this._unlink(i),this._insertAfter(i,e,n),this._addToMoves(i,n),i}_addAfter(i,e,n){return this._insertAfter(i,e,n),this._additionsTail===null?this._additionsTail=this._additionsHead=i:this._additionsTail=this._additionsTail._nextAdded=i,i}_insertAfter(i,e,n){let o=e===null?this._itHead:e._next;return i._next=o,i._prev=e,o===null?this._itTail=i:o._prev=i,e===null?this._itHead=i:e._next=i,this._linkedRecords===null&&(this._linkedRecords=new y3),this._linkedRecords.put(i),i.currentIndex=n,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){this._linkedRecords!==null&&this._linkedRecords.remove(i);let e=i._prev,n=i._next;return e===null?this._itHead=n:e._next=n,n===null?this._itTail=e:n._prev=e,i}_addToMoves(i,e){return i.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=i:this._movesTail=this._movesTail._nextMoved=i),i}_addToRemovals(i){return this._unlinkedRecords===null&&(this._unlinkedRecords=new y3),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,e){return i.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=i:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=i,i}},yG=class{constructor(i,e){this.item=i,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},vG=class{constructor(){this._head=null,this._tail=null}add(i){this._head===null?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,e){let n;for(n=this._head;n!==null;n=n._nextDup)if((e===null||e<=n.currentIndex)&&Object.is(n.trackById,i))return n;return null}remove(i){let e=i._prevDup,n=i._nextDup;return e===null?this._head=n:e._nextDup=n,n===null?this._tail=e:n._prevDup=e,this._head===null}},y3=class{constructor(){this.map=new Map}put(i){let e=i.trackById,n=this.map.get(e);n||(n=new vG,this.map.set(e,n)),n.add(i)}get(i,e){let n=i,o=this.map.get(n);return o?o.get(i,e):null}remove(i){let e=i.trackById;return this.map.get(e).remove(i)&&this.map.delete(e),i}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Cae(r,i,e){let n=r.previousIndex;if(n===null)return n;let o=0;return e&&n<e.length&&(o=e[n]),n+i+o}var bG=class{constructor(){}supports(i){return i instanceof Map||dH(i)}create(){return new wG}},wG=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(i){let e;for(e=this._mapHead;e!==null;e=e._next)i(e)}forEachPreviousItem(i){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)i(e)}forEachChangedItem(i){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)i(e)}forEachAddedItem(i){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)i(e)}forEachRemovedItem(i){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)i(e)}diff(i){if(!i)i=new Map;else if(!(i instanceof Map||dH(i)))throw new ki(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(i,(n,o)=>{if(e&&e.key===o)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{let s=this._getOrCreateRecordForKey(o,n);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;n!==null;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,e){if(i){let n=i._prev;return e._next=i,e._prev=n,i._prev=e,n&&(n._next=e),i===this._mapHead&&(this._mapHead=e),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(i,e){if(this._records.has(i)){let o=this._records.get(i);this._maybeAddToChanges(o,e);let s=o._prev,l=o._next;return s&&(s._next=l),l&&(l._prev=s),o._next=null,o._prev=null,o}let n=new CG(i);return this._records.set(i,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;i!==null;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;i!==null;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;i!=null;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,e){Object.is(e,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=e,this._addToChanges(i))}_addToAdditions(i){this._additionsHead===null?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){this._changesHead===null?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,e){i instanceof Map?i.forEach(e):Object.keys(i).forEach(n=>e(i[n],n))}},CG=class{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function xae(){return new J0([new gG])}var J0=(()=>{class r{static{this.\u0275prov=rt({token:r,providedIn:"root",factory:xae})}constructor(e){this.factories=e}static create(e,n){if(n!=null){let o=n.factories.slice();e=e.concat(o)}return new r(e)}static extend(e){return{provide:r,useFactory:n=>r.create(e,n||xae()),deps:[[r,new Y0,new Jm]]}}find(e){let n=this.factories.find(o=>o.supports(e));if(n!=null)return n;throw new ki(901,!1)}}return r})();function Sae(){return new Y3([new bG])}var Y3=(()=>{class r{static{this.\u0275prov=rt({token:r,providedIn:"root",factory:Sae})}constructor(e){this.factories=e}static create(e,n){if(n){let o=n.factories.slice();e=e.concat(o)}return new r(e)}static extend(e){return{provide:r,useFactory:n=>r.create(e,n||Sae()),deps:[[r,new Y0,new Jm]]}}find(e){let n=this.factories.find(o=>o.supports(e));if(n)return n;throw new ki(901,!1)}}return r})();var bde=(()=>{class r{constructor(e){}static{this.\u0275fac=function(n){return new(n||r)(xe(fs))}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({})}}return r})();function wde(r){try{let{rootComponent:i,appProviders:e,platformProviders:n}=r,o=WLe(n),s=[BLe({}),{provide:TT,useExisting:$Le},...e||[]],l=new u3({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return zLe({r3Injector:l.injector,platformInjector:o,rootComponent:i})}catch(i){return Promise.reject(i)}}function Xt(r){return typeof r=="boolean"?r:r!=null&&r!=="false"}function Oo(r,i=NaN){return!isNaN(parseFloat(r))&&!isNaN(Number(r))?Number(r):i}function Py(r,i){nf("NgSignals");let e=Az(r);return i?.equal&&(e[Zm].equal=i.equal),e}function vp(r){let i=zo(null);try{return r()}finally{zo(i)}}var QLe=new At("",{providedIn:"root",factory:()=>Et(XLe)}),XLe=(()=>{class r{static{this.\u0275prov=rt({token:r,providedIn:"root",factory:()=>new xG})}}return r})(),xG=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=Et(X0),this.taskId=null}scheduleEffect(i){if(this.enqueue(i),this.taskId===null){let e=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(e),this.taskId=null})}}enqueue(i){let e=i.creationZone;this.queues.has(e)||this.queues.set(e,new Set);let n=this.queues.get(e);n.has(i)||(this.queuedEffectCount++,n.add(i))}flush(){for(;this.queuedEffectCount>0;)for(let[i,e]of this.queues)i===null?this.flushQueue(e):i.run(()=>this.flushQueue(e))}flushQueue(i){for(let e of i)i.delete(e),this.queuedEffectCount--,e.run()}},SG=class{constructor(i,e,n,o,s,l){this.scheduler=i,this.effectFn=e,this.creationZone=n,this.injector=s,this.watcher=ise(h=>this.runEffect(h),()=>this.schedule(),l),this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}runEffect(i){try{this.effectFn(i)}catch(e){this.injector.get(gp,null,{optional:!0})?.handleError(e)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function dk(r,i){nf("NgSignals"),!i?.injector&&QD(dk);let e=i?.injector??Et(yn),n=i?.manualCleanup!==!0?e.get(F3):null,o=new SG(e.get(QLe),r,typeof Zone>"u"?null:Zone.current,n,e,i?.allowSignalWrites??!1),s=e.get(Ti,null,{optional:!0});return!s||!(s._lView[Dr]&8)?o.watcher.notify():(s._lView[V5]??=[]).push(o.watcher.notify),o}function K3(r,i){let e=tw(r),n=i.elementInjector||S3();return new AT(e).create(n,i.projectableNodes,i.hostElement,i.environmentInjector)}var Ede=null;function bg(){return Ede}function Mde(r){Ede??=r}var Z3=class{};var Ui=new At(""),Dde=(()=>{class r{historyGo(e){throw new Error("")}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:()=>Et(e5e),providedIn:"platform"})}}return r})();var e5e=(()=>{class r extends Dde{constructor(){super(),this._doc=Et(Ui),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return bg().getBaseHref(this._doc)}onPopState(e){let n=bg().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){let n=bg().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,n,o){this._history.pushState(e,n,o)}replaceState(e,n,o){this._history.replaceState(e,n,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:()=>new r,providedIn:"platform"})}}return r})();function kde(r,i){if(r.length==0)return i;if(i.length==0)return r;let e=0;return r.endsWith("/")&&e++,i.startsWith("/")&&e++,e==2?r+i.substring(1):e==1?r+i:r+"/"+i}function Cde(r){let i=r.match(/#|\?|$/),e=i&&i.index||r.length,n=e-(r[e-1]==="/"?1:0);return r.slice(0,n)+r.slice(e)}function nx(r){return r&&r[0]!=="?"?"?"+r:r}var X3=(()=>{class r{historyGo(e){throw new Error("")}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:()=>Et(Ode),providedIn:"root"})}}return r})(),t5e=new At(""),Ode=(()=>{class r extends X3{constructor(e,n){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??Et(Ui).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return kde(this._baseHref,e)}path(e=!1){let n=this._platformLocation.pathname+nx(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${n}${o}`:n}pushState(e,n,o,s){let l=this.prepareExternalUrl(o+nx(s));this._platformLocation.pushState(e,n,l)}replaceState(e,n,o,s){let l=this.prepareExternalUrl(o+nx(s));this._platformLocation.replaceState(e,n,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(n){return new(n||r)(xe(Dde),xe(t5e,8))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var pm=(()=>{class r{constructor(e){this._subject=new it,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;let n=this._locationStrategy.getBaseHref();this._basePath=r5e(Cde(xde(n))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+nx(n))}normalize(e){return r.stripTrailingSlash(n5e(this._basePath,xde(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",o=null){this._locationStrategy.pushState(o,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+nx(n)),o)}replaceState(e,n="",o=null){this._locationStrategy.replaceState(o,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+nx(n)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}),()=>{let n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(o=>o(e,n))}subscribe(e,n,o){return this._subject.subscribe({next:e,error:n,complete:o})}static{this.normalizeQueryParams=nx}static{this.joinWithSlash=kde}static{this.stripTrailingSlash=Cde}static{this.\u0275fac=function(n){return new(n||r)(xe(X3))}}static{this.\u0275prov=rt({token:r,factory:()=>i5e(),providedIn:"root"})}}return r})();function i5e(){return new pm(xe(X3))}function n5e(r,i){if(!r||!i.startsWith(r))return i;let e=i.substring(r.length);return e===""||["/",";","?","#"].includes(e[0])?e:i}function xde(r){return r.replace(/\/index.html$/,"")}function r5e(r){if(new RegExp("^(https?:)?//").test(r)){let[,e]=r.split(/\/\/[^\/]+/);return e}return r}function J3(r,i){i=encodeURIComponent(i);for(let e of r.split(";")){let n=e.indexOf("="),[o,s]=n==-1?[e,""]:[e.slice(0,n),e.slice(n+1)];if(o.trim()===i)return decodeURIComponent(s)}return null}var vH=/\s+/,Sde=[],qr=(()=>{class r{constructor(e,n){this._ngEl=e,this._renderer=n,this.initialClasses=Sde,this.stateMap=new Map}set klass(e){this.initialClasses=e!=null?e.trim().split(vH):Sde}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(vH):e}ngDoCheck(){for(let n of this.initialClasses)this._updateState(n,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let n of e)this._updateState(n,!0);else if(e!=null)for(let n of Object.keys(e))this._updateState(n,!!e[n]);this._applyStateDiff()}_updateState(e,n){let o=this.stateMap.get(e);o!==void 0?(o.enabled!==n&&(o.changed=!0,o.enabled=n),o.touched=!0):this.stateMap.set(e,{enabled:n,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let n=e[0],o=e[1];o.changed?(this._toggleClass(n,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(n,!1),this.stateMap.delete(n)),o.touched=!1}}_toggleClass(e,n){e=e.trim(),e.length>0&&e.split(vH).forEach(o=>{n?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(lu))}}static{this.\u0275dir=Pt({type:r,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return r})();var bH=class{constructor(i,e,n,o){this.$implicit=i,this.ngForOf=e,this.index=n,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ps=(()=>{class r{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,n,o){this._viewContainer=e,this._template=n,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;if(!this._differ&&e)if(0)try{}catch{}else this._differ=this._differs.find(e).create(this.ngForTrackBy)}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let n=this._viewContainer;e.forEachOperation((o,s,l)=>{if(o.previousIndex==null)n.createEmbeddedView(this._template,new bH(o.item,this._ngForOf,-1,-1),l===null?void 0:l);else if(l==null)n.remove(s===null?void 0:s);else if(s!==null){let h=n.get(s);n.move(h,l),Ide(h,o)}});for(let o=0,s=n.length;o<s;o++){let h=n.get(o).context;h.index=o,h.count=s,h.ngForOf=this._ngForOf}e.forEachIdentityChange(o=>{let s=n.get(o.currentIndex);Ide(s,o)})}static ngTemplateContextGuard(e,n){return!0}static{this.\u0275fac=function(n){return new(n||r)(ie(Io),ie(jo),ie(J0))}}static{this.\u0275dir=Pt({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return r})();function Ide(r,i){r.context.$implicit=i.item}var gn=(()=>{class r{constructor(e,n){this._viewContainer=e,this._context=new wH,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Tde("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Tde("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}static{this.\u0275fac=function(n){return new(n||r)(ie(Io),ie(jo))}}static{this.\u0275dir=Pt({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return r})(),wH=class{constructor(){this.$implicit=null,this.ngIf=null}};function Tde(r,i){if(!!!(!i||i.createEmbeddedView))throw new Error(`${r} must be a TemplateRef, but received '${$h(i)}'.`)}var CH=class{constructor(i,e){this._viewContainerRef=i,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(i){i&&!this._created?this.create():!i&&this._created&&this.destroy()}},IH=(()=>{class r{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){let n=e===this._ngSwitch;return this._lastCasesMatched||=n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(let n of this._defaultViews)n.enforceState(e)}}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=Pt({type:r,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}}return r})(),Pde=(()=>{class r{constructor(e,n,o){this.ngSwitch=o,o._addCase(),this._view=new CH(e,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static{this.\u0275fac=function(n){return new(n||r)(ie(Io),ie(jo),ie(IH,9))}}static{this.\u0275dir=Pt({type:r,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}}return r})();var e_=(()=>{class r{constructor(e,n,o){this._ngEl=e,this._differs=n,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,n){let[o,s]=e.split("."),l=o.indexOf("-")===-1?void 0:q0.DashCase;n!=null?this._renderer.setStyle(this._ngEl.nativeElement,o,s?`${n}${s}`:n,l):this._renderer.removeStyle(this._ngEl.nativeElement,o,l)}_applyChanges(e){e.forEachRemovedItem(n=>this._setStyle(n.key,null)),e.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),e.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(Y3),ie(lu))}}static{this.\u0275dir=Pt({type:r,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return r})(),Ry=(()=>{class r{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(this._shouldRecreateView(e)){let n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let o=this._createContextForwardProxy();this._viewRef=n.createEmbeddedView(this.ngTemplateOutlet,o,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,n,o)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,n,o):!1,get:(e,n,o)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,n,o)}})}static{this.\u0275fac=function(n){return new(n||r)(ie(Io))}}static{this.\u0275dir=Pt({type:r,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Jn]})}}return r})();function o5e(r,i){return new ki(2100,!1)}var xH=class{createSubscription(i,e){return vp(()=>i.subscribe({next:e,error:n=>{throw n}}))}dispose(i){vp(()=>i.unsubscribe())}},SH=class{createSubscription(i,e){return i.then(e,n=>{throw n})}dispose(i){}},s5e=new SH,a5e=new xH,kr=(()=>{class r{constructor(e){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,n=>this._updateLatestValue(e,n))}_selectStrategy(e){if(dw(e))return s5e;if(_H(e))return a5e;throw o5e(r,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,n){e===this._obj&&(this._latestValue=n,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(n){return new(n||r)(ie(Ti,16))}}static{this.\u0275pipe=fg({name:"async",type:r,pure:!1,standalone:!0})}}return r})();var Rde=(()=>{class r{transform(e){return JSON.stringify(e,null,2)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275pipe=fg({name:"json",type:r,pure:!1,standalone:!0})}}return r})();function l5e(r,i){return{key:r,value:i}}var eN=(()=>{class r{constructor(e){this.differs=e,this.keyValues=[],this.compareFn=Ade}transform(e,n=Ade){if(!e||!(e instanceof Map)&&typeof e!="object")return null;this.differ??=this.differs.find(e).create();let o=this.differ.diff(e),s=n!==this.compareFn;return o&&(this.keyValues=[],o.forEachItem(l=>{this.keyValues.push(l5e(l.key,l.currentValue))})),(o||s)&&(this.keyValues.sort(n),this.compareFn=n),this.keyValues}static{this.\u0275fac=function(n){return new(n||r)(ie(Y3,16))}}static{this.\u0275pipe=fg({name:"keyvalue",type:r,pure:!1,standalone:!0})}}return r})();function Ade(r,i){let e=r.key,n=i.key;if(e===n)return 0;if(e===void 0)return 1;if(n===void 0)return-1;if(e===null)return 1;if(n===null)return-1;if(typeof e=="string"&&typeof n=="string")return e<n?-1:1;if(typeof e=="number"&&typeof n=="number")return e-n;if(typeof e=="boolean"&&typeof n=="boolean")return e<n?-1:1;let o=String(e),s=String(n);return o==s?0:o<s?-1:1}var $a=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({})}}return r})(),TH="browser",c5e="server";function rx(r){return r===TH}function tN(r){return r===c5e}var FT=class{};var hk=class{},Cg=class{},Wd=class r{constructor(i){this.normalizedNames=new Map,this.lazyUpdate=null,i?typeof i=="string"?this.lazyInit=()=>{this.headers=new Map,i.split(`
`).forEach(e=>{let n=e.indexOf(":");if(n>0){let o=e.slice(0,n),s=o.toLowerCase(),l=e.slice(n+1).trim();this.maybeSetNormalizedName(o,s),this.headers.has(s)?this.headers.get(s).push(l):this.headers.set(s,[l])}})}:typeof Headers<"u"&&i instanceof Headers?(this.headers=new Map,i.forEach((e,n)=>{this.setHeaderEntries(n,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(i).forEach(([e,n])=>{this.setHeaderEntries(e,n)})}:this.headers=new Map}has(i){return this.init(),this.headers.has(i.toLowerCase())}get(i){this.init();let e=this.headers.get(i.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(i){return this.init(),this.headers.get(i.toLowerCase())||null}append(i,e){return this.clone({name:i,value:e,op:"a"})}set(i,e){return this.clone({name:i,value:e,op:"s"})}delete(i,e){return this.clone({name:i,value:e,op:"d"})}maybeSetNormalizedName(i,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,i)}init(){this.lazyInit&&(this.lazyInit instanceof r?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(i=>this.applyUpdate(i)),this.lazyUpdate=null))}copyFrom(i){i.init(),Array.from(i.headers.keys()).forEach(e=>{this.headers.set(e,i.headers.get(e)),this.normalizedNames.set(e,i.normalizedNames.get(e))})}clone(i){let e=new r;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof r?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([i]),e}applyUpdate(i){let e=i.name.toLowerCase();switch(i.op){case"a":case"s":let n=i.value;if(typeof n=="string"&&(n=[n]),n.length===0)return;this.maybeSetNormalizedName(i.name,e);let o=(i.op==="a"?this.headers.get(e):void 0)||[];o.push(...n),this.headers.set(e,o);break;case"d":let s=i.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let l=this.headers.get(e);if(!l)return;l=l.filter(h=>s.indexOf(h)===-1),l.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,l)}break}}setHeaderEntries(i,e){let n=(Array.isArray(e)?e:[e]).map(s=>s.toString()),o=i.toLowerCase();this.headers.set(o,n),this.maybeSetNormalizedName(i,o)}forEach(i){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>i(this.normalizedNames.get(e),this.headers.get(e)))}};var EH=class{encodeKey(i){return Fde(i)}encodeValue(i){return Fde(i)}decodeKey(i){return decodeURIComponent(i)}decodeValue(i){return decodeURIComponent(i)}};function d5e(r,i){let e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(o=>{let s=o.indexOf("="),[l,h]=s==-1?[i.decodeKey(o),""]:[i.decodeKey(o.slice(0,s)),i.decodeValue(o.slice(s+1))],p=e.get(l)||[];p.push(h),e.set(l,p)}),e}var u5e=/%(\d[a-f0-9])/gi,h5e={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Fde(r){return encodeURIComponent(r).replace(u5e,(i,e)=>h5e[e]??i)}function iN(r){return`${r}`}var zs=class r{constructor(i={}){if(this.updates=null,this.cloneFrom=null,this.encoder=i.encoder||new EH,i.fromString){if(i.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=d5e(i.fromString,this.encoder)}else i.fromObject?(this.map=new Map,Object.keys(i.fromObject).forEach(e=>{let n=i.fromObject[e],o=Array.isArray(n)?n.map(iN):[iN(n)];this.map.set(e,o)})):this.map=null}has(i){return this.init(),this.map.has(i)}get(i){this.init();let e=this.map.get(i);return e?e[0]:null}getAll(i){return this.init(),this.map.get(i)||null}keys(){return this.init(),Array.from(this.map.keys())}append(i,e){return this.clone({param:i,value:e,op:"a"})}appendAll(i){let e=[];return Object.keys(i).forEach(n=>{let o=i[n];Array.isArray(o)?o.forEach(s=>{e.push({param:n,value:s,op:"a"})}):e.push({param:n,value:o,op:"a"})}),this.clone(e)}set(i,e){return this.clone({param:i,value:e,op:"s"})}delete(i,e){return this.clone({param:i,value:e,op:"d"})}toString(){return this.init(),this.keys().map(i=>{let e=this.encoder.encodeKey(i);return this.map.get(i).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(i=>i!=="").join("&")}clone(i){let e=new r({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(i),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(i=>this.map.set(i,this.cloneFrom.map.get(i))),this.updates.forEach(i=>{switch(i.op){case"a":case"s":let e=(i.op==="a"?this.map.get(i.param):void 0)||[];e.push(iN(i.value)),this.map.set(i.param,e);break;case"d":if(i.value!==void 0){let n=this.map.get(i.param)||[],o=n.indexOf(iN(i.value));o!==-1&&n.splice(o,1),n.length>0?this.map.set(i.param,n):this.map.delete(i.param)}else{this.map.delete(i.param);break}}}),this.cloneFrom=this.updates=null)}};var MH=class{constructor(){this.map=new Map}set(i,e){return this.map.set(i,e),this}get(i){return this.map.has(i)||this.map.set(i,i.defaultValue()),this.map.get(i)}delete(i){return this.map.delete(i),this}has(i){return this.map.has(i)}keys(){return this.map.keys()}};function p5e(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Lde(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function Nde(r){return typeof Blob<"u"&&r instanceof Blob}function Bde(r){return typeof FormData<"u"&&r instanceof FormData}function m5e(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}var uk=class r{constructor(i,e,n,o){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=i.toUpperCase();let s;if(p5e(this.method)||o?(this.body=n!==void 0?n:null,s=o):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Wd,this.context??=new MH,!this.params)this.params=new zs,this.urlWithParams=e;else{let l=this.params.toString();if(l.length===0)this.urlWithParams=e;else{let h=e.indexOf("?"),p=h===-1?"?":h<e.length-1?"&":"";this.urlWithParams=e+p+l}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Lde(this.body)||Nde(this.body)||Bde(this.body)||m5e(this.body)?this.body:this.body instanceof zs?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Bde(this.body)?null:Nde(this.body)?this.body.type||null:Lde(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof zs?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(i={}){let e=i.method||this.method,n=i.url||this.url,o=i.responseType||this.responseType,s=i.transferCache??this.transferCache,l=i.body!==void 0?i.body:this.body,h=i.withCredentials??this.withCredentials,p=i.reportProgress??this.reportProgress,m=i.headers||this.headers,f=i.params||this.params,g=i.context??this.context;return i.setHeaders!==void 0&&(m=Object.keys(i.setHeaders).reduce((y,_)=>y.set(_,i.setHeaders[_]),m)),i.setParams&&(f=Object.keys(i.setParams).reduce((y,_)=>y.set(_,i.setParams[_]),f)),new r(e,n,l,{params:f,headers:m,context:g,reportProgress:p,responseType:o,withCredentials:h,transferCache:s})}},uw=function(r){return r[r.Sent=0]="Sent",r[r.UploadProgress=1]="UploadProgress",r[r.ResponseHeader=2]="ResponseHeader",r[r.DownloadProgress=3]="DownloadProgress",r[r.Response=4]="Response",r[r.User=5]="User",r}(uw||{}),pk=class{constructor(i,e=200,n="OK"){this.headers=i.headers||new Wd,this.status=i.status!==void 0?i.status:e,this.statusText=i.statusText||n,this.url=i.url||null,this.ok=this.status>=200&&this.status<300}},nN=class r extends pk{constructor(i={}){super(i),this.type=uw.ResponseHeader}clone(i={}){return new r({headers:i.headers||this.headers,status:i.status!==void 0?i.status:this.status,statusText:i.statusText||this.statusText,url:i.url||this.url||void 0})}},NT=class r extends pk{constructor(i={}){super(i),this.type=uw.Response,this.body=i.body!==void 0?i.body:null}clone(i={}){return new r({body:i.body!==void 0?i.body:this.body,headers:i.headers||this.headers,status:i.status!==void 0?i.status:this.status,statusText:i.statusText||this.statusText,url:i.url||this.url||void 0})}},wg=class extends pk{constructor(i){super(i,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${i.url||"(unknown url)"}`:this.message=`Http failure response for ${i.url||"(unknown url)"}: ${i.status} ${i.statusText}`,this.error=i.error||null}},zde=200,f5e=204;function AH(r,i){return{body:i,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials,transferCache:r.transferCache}}var dr=(()=>{class r{constructor(e){this.handler=e}request(e,n,o={}){let s;if(e instanceof uk)s=e;else{let p;o.headers instanceof Wd?p=o.headers:p=new Wd(o.headers);let m;o.params&&(o.params instanceof zs?m=o.params:m=new zs({fromObject:o.params})),s=new uk(e,n,o.body!==void 0?o.body:null,{headers:p,context:o.context,params:m,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let l=Vt(s).pipe(ul(p=>this.handler.handle(p)));if(e instanceof uk||o.observe==="events")return l;let h=l.pipe(mn(p=>p instanceof NT));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe($t(p=>{if(p.body!==null&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe($t(p=>{if(p.body!==null&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe($t(p=>{if(p.body!==null&&typeof p.body!="string")throw new Error("Response is not a string.");return p.body}));case"json":default:return h.pipe($t(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:new zs().append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,o={}){return this.request("PATCH",e,AH(o,n))}post(e,n,o={}){return this.request("POST",e,AH(o,n))}put(e,n,o={}){return this.request("PUT",e,AH(o,n))}static{this.\u0275fac=function(n){return new(n||r)(xe(hk))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})(),g5e=/^\)\]\}',?\n/,_5e="X-Request-URL";function jde(r){if(r.url)return r.url;let i=_5e.toLocaleLowerCase();return r.headers.get(i)}var y5e=(()=>{class r{constructor(){this.fetchImpl=Et(DH,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e)),this.ngZone=Et(ci)}handle(e){return new si(n=>{let o=new AbortController;return this.doRequest(e,o.signal,n).then(kH,s=>n.error(new wg({error:s}))),()=>o.abort()})}doRequest(e,n,o){return st(this,null,function*(){let s=this.createRequestInit(e),l;try{let _=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,Xe({signal:n},s)));v5e(_),o.next({type:uw.Sent}),l=yield _}catch(_){o.error(new wg({error:_,status:_.status??0,statusText:_.statusText,url:e.urlWithParams,headers:_.headers}));return}let h=new Wd(l.headers),p=l.statusText,m=jde(l)??e.urlWithParams,f=l.status,g=null;if(e.reportProgress&&o.next(new nN({headers:h,status:f,statusText:p,url:m})),l.body){let _=l.headers.get("content-length"),w=[],A=l.body.getReader(),k=0,R,$,H=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>st(this,null,function*(){for(;;){let{done:se,value:ge}=yield A.read();if(se)break;if(w.push(ge),k+=ge.length,e.reportProgress){$=e.responseType==="text"?($??"")+(R??=new TextDecoder).decode(ge,{stream:!0}):void 0;let ue=()=>o.next({type:uw.DownloadProgress,total:_?+_:void 0,loaded:k,partialText:$});H?H.run(ue):ue()}}}));let oe=this.concatChunks(w,k);try{let se=l.headers.get("Content-Type")??"";g=this.parseBody(e,oe,se)}catch(se){o.error(new wg({error:se,headers:new Wd(l.headers),status:l.status,statusText:l.statusText,url:jde(l)??e.urlWithParams}));return}}f===0&&(f=g?zde:0),f>=200&&f<300?(o.next(new NT({body:g,headers:h,status:f,statusText:p,url:m})),o.complete()):o.error(new wg({error:g,headers:h,status:f,statusText:p,url:m}))})}parseBody(e,n,o){switch(e.responseType){case"json":let s=new TextDecoder().decode(n).replace(g5e,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(n);case"blob":return new Blob([n],{type:o});case"arraybuffer":return n.buffer}}createRequestInit(e){let n={},o=e.withCredentials?"include":void 0;if(e.headers.forEach((s,l)=>n[s]=l.join(",")),e.headers.has("Accept")||(n.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){let s=e.detectContentTypeHeader();s!==null&&(n["Content-Type"]=s)}return{body:e.serializeBody(),method:e.method,headers:n,credentials:o}}concatChunks(e,n){let o=new Uint8Array(n),s=0;for(let l of e)o.set(l,s),s+=l.length;return o}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})(),DH=class{};function kH(){}function v5e(r){r.then(kH,kH)}function Gde(r,i){return i(r)}function b5e(r,i){return(e,n)=>i.intercept(e,{handle:o=>r(o,n)})}function w5e(r,i,e){return(n,o)=>gg(e,()=>i(n,s=>r(s,o)))}var ox=new At(""),OH=new At(""),C5e=new At(""),Hde=new At("",{providedIn:"root",factory:()=>!0});function x5e(){let r=null;return(i,e)=>{r===null&&(r=(Et(ox,{optional:!0})??[]).reduceRight(b5e,Gde));let n=Et(X0);if(Et(Hde)){let s=n.add();return r(i,e).pipe(Ud(()=>n.remove(s)))}else return r(i,e)}}var Vde=(()=>{class r extends hk{constructor(e,n){super(),this.backend=e,this.injector=n,this.chain=null,this.pendingTasks=Et(X0),this.contributeToStability=Et(Hde)}handle(e){if(this.chain===null){let n=Array.from(new Set([...this.injector.get(OH),...this.injector.get(C5e,[])]));this.chain=n.reduceRight((o,s)=>w5e(o,s,this.injector),Gde)}if(this.contributeToStability){let n=this.pendingTasks.add();return this.chain(e,o=>this.backend.handle(o)).pipe(Ud(()=>this.pendingTasks.remove(n)))}else return this.chain(e,n=>this.backend.handle(n))}static{this.\u0275fac=function(n){return new(n||r)(xe(Cg),xe(zc))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})();var S5e=/^\)\]\}',?\n/;function I5e(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}var $de=(()=>{class r{constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new ki(-2800,!1);let n=this.xhrFactory;return(n.\u0275loadImpl?Xn(n.\u0275loadImpl()):Vt(null)).pipe(jr(()=>new si(s=>{let l=n.build();if(l.open(e.method,e.urlWithParams),e.withCredentials&&(l.withCredentials=!0),e.headers.forEach((A,k)=>l.setRequestHeader(A,k.join(","))),e.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let A=e.detectContentTypeHeader();A!==null&&l.setRequestHeader("Content-Type",A)}if(e.responseType){let A=e.responseType.toLowerCase();l.responseType=A!=="json"?A:"text"}let h=e.serializeBody(),p=null,m=()=>{if(p!==null)return p;let A=l.statusText||"OK",k=new Wd(l.getAllResponseHeaders()),R=I5e(l)||e.url;return p=new nN({headers:k,status:l.status,statusText:A,url:R}),p},f=()=>{let{headers:A,status:k,statusText:R,url:$}=m(),H=null;k!==f5e&&(H=typeof l.response>"u"?l.responseText:l.response),k===0&&(k=H?zde:0);let oe=k>=200&&k<300;if(e.responseType==="json"&&typeof H=="string"){let se=H;H=H.replace(S5e,"");try{H=H!==""?JSON.parse(H):null}catch(ge){H=se,oe&&(oe=!1,H={error:ge,text:H})}}oe?(s.next(new NT({body:H,headers:A,status:k,statusText:R,url:$||void 0})),s.complete()):s.error(new wg({error:H,headers:A,status:k,statusText:R,url:$||void 0}))},g=A=>{let{url:k}=m(),R=new wg({error:A,status:l.status||0,statusText:l.statusText||"Unknown Error",url:k||void 0});s.error(R)},y=!1,_=A=>{y||(s.next(m()),y=!0);let k={type:uw.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(k.total=A.total),e.responseType==="text"&&l.responseText&&(k.partialText=l.responseText),s.next(k)},w=A=>{let k={type:uw.UploadProgress,loaded:A.loaded};A.lengthComputable&&(k.total=A.total),s.next(k)};return l.addEventListener("load",f),l.addEventListener("error",g),l.addEventListener("timeout",g),l.addEventListener("abort",g),e.reportProgress&&(l.addEventListener("progress",_),h!==null&&l.upload&&l.upload.addEventListener("progress",w)),l.send(h),s.next({type:uw.Sent}),()=>{l.removeEventListener("error",g),l.removeEventListener("abort",g),l.removeEventListener("load",f),l.removeEventListener("timeout",g),e.reportProgress&&(l.removeEventListener("progress",_),h!==null&&l.upload&&l.upload.removeEventListener("progress",w)),l.readyState!==l.DONE&&l.abort()}})))}static{this.\u0275fac=function(n){return new(n||r)(xe(FT))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})(),Wde=new At(""),T5e="XSRF-TOKEN",A5e=new At("",{providedIn:"root",factory:()=>T5e}),E5e="X-XSRF-TOKEN",M5e=new At("",{providedIn:"root",factory:()=>E5e}),rN=class{},D5e=(()=>{class r{constructor(e,n,o){this.doc=e,this.platform=n,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=J3(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(n){return new(n||r)(xe(Ui),xe(Qu),xe(A5e))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})();function k5e(r,i){let e=r.url.toLowerCase();if(!Et(Wde)||r.method==="GET"||r.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return i(r);let n=Et(rN).getToken(),o=Et(M5e);return n!=null&&!r.headers.has(o)&&(r=r.clone({headers:r.headers.set(o,n)})),i(r)}var qde=function(r){return r[r.Interceptors=0]="Interceptors",r[r.LegacyInterceptors=1]="LegacyInterceptors",r[r.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",r[r.NoXsrfProtection=3]="NoXsrfProtection",r[r.JsonpSupport=4]="JsonpSupport",r[r.RequestsMadeViaParent=5]="RequestsMadeViaParent",r[r.Fetch=6]="Fetch",r}(qde||{});function O5e(r,i){return{\u0275kind:r,\u0275providers:i}}function oN(...r){let i=[dr,$de,Vde,{provide:hk,useExisting:Vde},{provide:Cg,useFactory:()=>Et(y5e,{optional:!0})??Et($de)},{provide:OH,useValue:k5e,multi:!0},{provide:Wde,useValue:!0},{provide:rN,useClass:D5e}];for(let e of r)i.push(...e.\u0275providers);return Bl(i)}var Ude=new At("");function Yde(){return O5e(qde.LegacyInterceptors,[{provide:Ude,useFactory:x5e},{provide:OH,useExisting:Ude,multi:!0}])}var FH=class extends Z3{constructor(){super(...arguments),this.supportsDOMEvents=!0}},LH=class r extends FH{static makeCurrent(){Mde(new r)}onAndCancel(i,e,n){return i.addEventListener(e,n),()=>{i.removeEventListener(e,n)}}dispatchEvent(i,e){i.dispatchEvent(e)}remove(i){i.remove()}createElement(i,e){return e=e||this.getDefaultDocument(),e.createElement(i)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(i){return i.nodeType===Node.ELEMENT_NODE}isShadowRoot(i){return i instanceof DocumentFragment}getGlobalEventTarget(i,e){return e==="window"?window:e==="document"?i:e==="body"?i.body:null}getBaseHref(i){let e=P5e();return e==null?null:R5e(e)}resetBaseElement(){mk=null}getUserAgent(){return window.navigator.userAgent}getCookie(i){return J3(document.cookie,i)}},mk=null;function P5e(){return mk=mk||document.querySelector("base"),mk?mk.getAttribute("href"):null}function R5e(r){return new URL(r,document.baseURI).pathname}var NH=class{addToWindow(i){Xm.getAngularTestability=(n,o=!0)=>{let s=i.findTestabilityInTree(n,o);if(s==null)throw new ki(5103,!1);return s},Xm.getAllAngularTestabilities=()=>i.getAllTestabilities(),Xm.getAllAngularRootElements=()=>i.getAllRootElements();let e=n=>{let o=Xm.getAllAngularTestabilities(),s=o.length,l=function(){s--,s==0&&n()};o.forEach(h=>{h.whenStable(l)})};Xm.frameworkStabilizers||(Xm.frameworkStabilizers=[]),Xm.frameworkStabilizers.push(e)}findTestabilityInTree(i,e,n){if(e==null)return null;let o=i.getTestability(e);return o??(n?bg().isShadowRoot(e)?this.findTestabilityInTree(i,e.host,!0):this.findTestabilityInTree(i,e.parentElement,!0):null)}},F5e=(()=>{class r{build(){return new XMLHttpRequest}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})(),sN=new At(""),Qde=(()=>{class r{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(o=>{o.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,o){return this._findPluginFor(n).addEventListener(e,n,o)}getZone(){return this._zone}_findPluginFor(e){let n=this._eventNameToPlugin.get(e);if(n)return n;if(n=this._plugins.find(s=>s.supports(e)),!n)throw new ki(5101,!1);return this._eventNameToPlugin.set(e,n),n}static{this.\u0275fac=function(n){return new(n||r)(xe(sN),xe(ci))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})(),fk=class{constructor(i){this._doc=i}},PH="ng-app-id",Xde=(()=>{class r{constructor(e,n,o,s={}){this.doc=e,this.appId=n,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=tN(s),this.resetHostNodes()}addStyles(e){for(let n of e)this.changeUsageCount(n,1)===1&&this.onStyleAdded(n)}removeStyles(e){for(let n of e)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(n=>n.remove()),e.clear());for(let n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let n of this.getAllStyles())this.addStyleToHost(e,n)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let n of this.hostNodes)this.addStyleToHost(n,e)}onStyleRemoved(e){let n=this.styleRef;n.get(e)?.elements?.forEach(o=>o.remove()),n.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${PH}="${this.appId}"]`);if(e?.length){let n=new Map;return e.forEach(o=>{o.textContent!=null&&n.set(o.textContent,o)}),n}return null}changeUsageCount(e,n){let o=this.styleRef;if(o.has(e)){let s=o.get(e);return s.usage+=n,s.usage}return o.set(e,{usage:n,elements:[]}),n}getStyleElement(e,n){let o=this.styleNodesInDOM,s=o?.get(n);if(s?.parentNode===e)return o.delete(n),s.removeAttribute(PH),s;{let l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=n,this.platformIsServer&&l.setAttribute(PH,this.appId),e.appendChild(l),l}}addStyleToHost(e,n){let o=this.getStyleElement(e,n),s=this.styleRef,l=s.get(n)?.elements;l?l.push(o):s.set(n,{elements:[o],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(n){return new(n||r)(xe(Ui),xe(OT),xe(JD,8),xe(Qu))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})(),RH={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},jH=/%COMP%/g,Jde="%COMP%",L5e=`_nghost-${Jde}`,N5e=`_ngcontent-${Jde}`,B5e=!0,j5e=new At("",{providedIn:"root",factory:()=>B5e});function V5e(r){return N5e.replace(jH,r)}function $5e(r){return L5e.replace(jH,r)}function eue(r,i){return i.map(e=>e.replace(jH,r))}var aN=(()=>{class r{constructor(e,n,o,s,l,h,p,m=null){this.eventManager=e,this.sharedStylesHost=n,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=l,this.platformId=h,this.ngZone=p,this.nonce=m,this.rendererByCompId=new Map,this.platformIsServer=tN(h),this.defaultRenderer=new gk(e,l,p,this.platformIsServer)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===G0.ShadowDom&&(n=li(Xe({},n),{encapsulation:G0.Emulated}));let o=this.getOrCreateRenderer(e,n);return o instanceof lN?o.applyToHost(e):o instanceof _k&&o.applyStyles(),o}getOrCreateRenderer(e,n){let o=this.rendererByCompId,s=o.get(n.id);if(!s){let l=this.doc,h=this.ngZone,p=this.eventManager,m=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(n.encapsulation){case G0.Emulated:s=new lN(p,m,n,this.appId,f,l,h,g);break;case G0.ShadowDom:return new BH(p,m,e,n,l,h,this.nonce,g);default:s=new _k(p,m,n,f,l,h,g);break}o.set(n.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(n){return new(n||r)(xe(Qde),xe(Xde),xe(OT),xe(j5e),xe(Ui),xe(Qu),xe(ci),xe(JD))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})(),gk=class{constructor(i,e,n,o){this.eventManager=i,this.doc=e,this.ngZone=n,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(i,e){return e?this.doc.createElementNS(RH[e]||e,i):this.doc.createElement(i)}createComment(i){return this.doc.createComment(i)}createText(i){return this.doc.createTextNode(i)}appendChild(i,e){(Kde(i)?i.content:i).appendChild(e)}insertBefore(i,e,n){i&&(Kde(i)?i.content:i).insertBefore(e,n)}removeChild(i,e){e.remove()}selectRootElement(i,e){let n=typeof i=="string"?this.doc.querySelector(i):i;if(!n)throw new ki(-5104,!1);return e||(n.textContent=""),n}parentNode(i){return i.parentNode}nextSibling(i){return i.nextSibling}setAttribute(i,e,n,o){if(o){e=o+":"+e;let s=RH[o];s?i.setAttributeNS(s,e,n):i.setAttribute(e,n)}else i.setAttribute(e,n)}removeAttribute(i,e,n){if(n){let o=RH[n];o?i.removeAttributeNS(o,e):i.removeAttribute(`${n}:${e}`)}else i.removeAttribute(e)}addClass(i,e){i.classList.add(e)}removeClass(i,e){i.classList.remove(e)}setStyle(i,e,n,o){o&(q0.DashCase|q0.Important)?i.style.setProperty(e,n,o&q0.Important?"important":""):i.style[e]=n}removeStyle(i,e,n){n&q0.DashCase?i.style.removeProperty(e):i.style[e]=""}setProperty(i,e,n){i!=null&&(i[e]=n)}setValue(i,e){i.nodeValue=e}listen(i,e,n){if(typeof i=="string"&&(i=bg().getGlobalEventTarget(this.doc,i),!i))throw new Error(`Unsupported event target ${i} for event ${e}`);return this.eventManager.addEventListener(i,e,this.decoratePreventDefault(n))}decoratePreventDefault(i){return e=>{if(e==="__ngUnwrap__")return i;(this.platformIsServer?this.ngZone.runGuarded(()=>i(e)):i(e))===!1&&e.preventDefault()}}};function Kde(r){return r.tagName==="TEMPLATE"&&r.content!==void 0}var BH=class extends gk{constructor(i,e,n,o,s,l,h,p){super(i,s,l,p),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let m=eue(o.id,o.styles);for(let f of m){let g=document.createElement("style");h&&g.setAttribute("nonce",h),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(i){return i===this.hostEl?this.shadowRoot:i}appendChild(i,e){return super.appendChild(this.nodeOrShadowRoot(i),e)}insertBefore(i,e,n){return super.insertBefore(this.nodeOrShadowRoot(i),e,n)}removeChild(i,e){return super.removeChild(null,e)}parentNode(i){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(i)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},_k=class extends gk{constructor(i,e,n,o,s,l,h,p){super(i,s,l,h),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=o,this.styles=p?eue(p,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},lN=class extends _k{constructor(i,e,n,o,s,l,h,p){let m=o+"-"+n.id;super(i,e,n,s,l,h,p,m),this.contentAttr=V5e(m),this.hostAttr=$5e(m)}applyToHost(i){this.applyStyles(),this.setAttribute(i,this.hostAttr,"")}createElement(i,e){let n=super.createElement(i,e);return super.setAttribute(n,this.contentAttr,""),n}},U5e=(()=>{class r extends fk{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,o){return e.addEventListener(n,o,!1),()=>this.removeEventListener(e,n,o)}removeEventListener(e,n,o){return e.removeEventListener(n,o)}static{this.\u0275fac=function(n){return new(n||r)(xe(Ui))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})(),Zde=["alt","control","meta","shift"],z5e={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},G5e={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey},H5e=(()=>{class r extends fk{constructor(e){super(e)}supports(e){return r.parseEventName(e)!=null}addEventListener(e,n,o){let s=r.parseEventName(n),l=r.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>bg().onAndCancel(e,s.domEventName,l))}static parseEventName(e){let n=e.toLowerCase().split("."),o=n.shift();if(n.length===0||!(o==="keydown"||o==="keyup"))return null;let s=r._normalizeKey(n.pop()),l="",h=n.indexOf("code");if(h>-1&&(n.splice(h,1),l="code."),Zde.forEach(m=>{let f=n.indexOf(m);f>-1&&(n.splice(f,1),l+=m+".")}),l+=s,n.length!=0||s.length===0)return null;let p={};return p.domEventName=o,p.fullKey=l,p}static matchEventFullKeyCode(e,n){let o=z5e[e.key]||e.key,s="";return n.indexOf("code.")>-1&&(o=e.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Zde.forEach(l=>{if(l!==o){let h=G5e[l];h(e)&&(s+=l+".")}}),s+=o,s===n)}static eventCallback(e,n,o){return s=>{r.matchEventFullKeyCode(s,e)&&o.runGuarded(()=>n(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(n){return new(n||r)(xe(Ui))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})();function tue(r,i){return wde(Xe({rootComponent:r},W5e(i)))}function W5e(r){return{appProviders:[...iue,...r?.providers??[]],platformProviders:Z5e}}function q5e(){LH.makeCurrent()}function Y5e(){return new gp}function K5e(){return Vle(document),document}var Z5e=[{provide:Qu,useValue:TH},{provide:GG,useValue:q5e,multi:!0},{provide:Ui,useFactory:K5e,deps:[]}];var Q5e=new At(""),X5e=[{provide:lk,useClass:NH,deps:[]},{provide:fH,useClass:H3,deps:[ci,W3,lk]},{provide:H3,useClass:H3,deps:[ci,W3,lk]}],iue=[{provide:x3,useValue:"root"},{provide:gp,useFactory:Y5e,deps:[]},{provide:sN,useClass:U5e,multi:!0,deps:[Ui,ci,Qu]},{provide:sN,useClass:H5e,multi:!0,deps:[Ui]},aN,Xde,Qde,{provide:rw,useExisting:aN},{provide:FT,useClass:F5e,deps:[]},[]],VH=(()=>{class r{constructor(e){}static withServerTransition(e){return{ngModule:r,providers:[{provide:OT,useValue:e.appId}]}}static{this.\u0275fac=function(n){return new(n||r)(xe(Q5e,12))}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({providers:[...iue,...X5e],imports:[$a,bde]})}}return r})(),nue=(()=>{class r{constructor(e){this._doc=e,this._dom=bg()}addTag(e,n=!1){return e?this._getOrCreateElement(e,n):null}addTags(e,n=!1){return e?e.reduce((o,s)=>(s&&o.push(this._getOrCreateElement(s,n)),o),[]):[]}getTag(e){return e&&this._doc.querySelector(`meta[${e}]`)||null}getTags(e){if(!e)return[];let n=this._doc.querySelectorAll(`meta[${e}]`);return n?[].slice.call(n):[]}updateTag(e,n){if(!e)return null;n=n||this._parseSelector(e);let o=this.getTag(n);return o?this._setMetaElementAttributes(e,o):this._getOrCreateElement(e,!0)}removeTag(e){this.removeTagElement(this.getTag(e))}removeTagElement(e){e&&this._dom.remove(e)}_getOrCreateElement(e,n=!1){if(!n){let l=this._parseSelector(e),h=this.getTags(l).filter(p=>this._containsAttributes(e,p))[0];if(h!==void 0)return h}let o=this._dom.createElement("meta");return this._setMetaElementAttributes(e,o),this._doc.getElementsByTagName("head")[0].appendChild(o),o}_setMetaElementAttributes(e,n){return Object.keys(e).forEach(o=>n.setAttribute(this._getMetaKeyMap(o),e[o])),n}_parseSelector(e){let n=e.name?"name":"property";return`${n}="${e[n]}"`}_containsAttributes(e,n){return Object.keys(e).every(o=>n.getAttribute(this._getMetaKeyMap(o))===e[o])}_getMetaKeyMap(e){return J5e[e]||e}static{this.\u0275fac=function(n){return new(n||r)(xe(Ui))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),J5e={httpEquiv:"http-equiv"},cN=(()=>{class r{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(n){return new(n||r)(xe(Ui))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var e3e={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},yk=new At("HammerGestureConfig"),rue=new At("HammerLoader"),$H=(()=>{class r{constructor(){this.events=[],this.overrides={}}buildHammer(e){let n=new Hammer(e,this.options);n.get("pinch").set({enable:!0}),n.get("rotate").set({enable:!0});for(let o in this.overrides)n.get(o).set(this.overrides[o]);return n}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})(),t3e=(()=>{class r extends fk{constructor(e,n,o,s){super(e),this._config=n,this.console=o,this.loader=s,this._loaderPromise=null}supports(e){return!(!e3e.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader)}addEventListener(e,n,o){let s=this.manager.getZone();if(n=n.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||s.runOutsideAngular(()=>this.loader());let l=!1,h=()=>{l=!0};return s.runOutsideAngular(()=>this._loaderPromise.then(()=>{if(!window.Hammer){h=()=>{};return}l||(h=this.addEventListener(e,n,o))}).catch(()=>{h=()=>{}})),()=>{h()}}return s.runOutsideAngular(()=>{let l=this._config.buildHammer(e),h=function(p){s.runGuarded(function(){o(p)})};return l.on(n,h),()=>{l.off(n,h),typeof l.destroy=="function"&&l.destroy()}})}isCustomEvent(e){return this._config.events.indexOf(e)>-1}static{this.\u0275fac=function(n){return new(n||r)(xe(Ui),xe(yk),xe(RT),xe(rue,8))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})(),oue=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({providers:[{provide:sN,useClass:t3e,multi:!0,deps:[Ui,yk,RT,[new Jm,rue]]},{provide:yk,useClass:$H,deps:[]}]})}}return r})(),xg=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:function(n){let o=null;return n?o=new(n||r):o=xe(i3e),o},providedIn:"root"})}}return r})(),i3e=(()=>{class r extends xg{constructor(e){super(),this._doc=e}sanitize(e,n){if(n==null)return null;switch(e){case ud.NONE:return n;case ud.HTML:return Dy(n,"HTML")?tf(n):WG(this._doc,String(n)).toString();case ud.STYLE:return Dy(n,"Style")?tf(n):n;case ud.SCRIPT:if(Dy(n,"Script"))return tf(n);throw new ki(5200,!1);case ud.URL:return Dy(n,"URL")?tf(n):N3(String(n));case ud.RESOURCE_URL:if(Dy(n,"ResourceURL"))return tf(n);throw new ki(5201,!1);default:throw new ki(5202,!1)}}bypassSecurityTrustHtml(e){return Gle(e)}bypassSecurityTrustStyle(e){return Hle(e)}bypassSecurityTrustScript(e){return Wle(e)}bypassSecurityTrustUrl(e){return qle(e)}bypassSecurityTrustResourceUrl(e){return Yle(e)}static{this.\u0275fac=function(n){return new(n||r)(xe(Ui))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var r3i=ld(sue());var bo="primary",Rk=Symbol("RouteTitle"),WH=class{constructor(i){this.params=i||{}}has(i){return Object.prototype.hasOwnProperty.call(this.params,i)}get(i){if(this.has(i)){let e=this.params[i];return Array.isArray(e)?e[0]:e}return null}getAll(i){if(this.has(i)){let e=this.params[i];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function zT(r){return new WH(r)}function n3e(r,i,e){let n=e.path.split("/");if(n.length>r.length||e.pathMatch==="full"&&(i.hasChildren()||n.length<r.length))return null;let o={};for(let s=0;s<n.length;s++){let l=n[s],h=r[s];if(l[0]===":")o[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:r.slice(0,n.length),posParams:o}}function r3e(r,i){if(r.length!==i.length)return!1;for(let e=0;e<r.length;++e)if(!t_(r[e],i[e]))return!1;return!0}function t_(r,i){let e=r?qH(r):void 0,n=i?qH(i):void 0;if(!e||!n||e.length!=n.length)return!1;let o;for(let s=0;s<e.length;s++)if(o=e[s],!mue(r[o],i[o]))return!1;return!0}function qH(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function mue(r,i){if(Array.isArray(r)&&Array.isArray(i)){if(r.length!==i.length)return!1;let e=[...r].sort(),n=[...i].sort();return e.every((o,s)=>n[s]===o)}else return r===i}function fue(r){return r.length>0?r[r.length-1]:null}function hw(r){return $c(r)?r:dw(r)?Xn(Promise.resolve(r)):Vt(r)}var o3e={exact:_ue,subset:yue},gue={exact:s3e,subset:a3e,ignored:()=>!0};function aue(r,i,e){return o3e[e.paths](r.root,i.root,e.matrixParams)&&gue[e.queryParams](r.queryParams,i.queryParams)&&!(e.fragment==="exact"&&r.fragment!==i.fragment)}function s3e(r,i){return t_(r,i)}function _ue(r,i,e){if(!lx(r.segments,i.segments)||!pN(r.segments,i.segments,e)||r.numberOfChildren!==i.numberOfChildren)return!1;for(let n in i.children)if(!r.children[n]||!_ue(r.children[n],i.children[n],e))return!1;return!0}function a3e(r,i){return Object.keys(i).length<=Object.keys(r).length&&Object.keys(i).every(e=>mue(r[e],i[e]))}function yue(r,i,e){return vue(r,i,i.segments,e)}function vue(r,i,e,n){if(r.segments.length>e.length){let o=r.segments.slice(0,e.length);return!(!lx(o,e)||i.hasChildren()||!pN(o,e,n))}else if(r.segments.length===e.length){if(!lx(r.segments,e)||!pN(r.segments,e,n))return!1;for(let o in i.children)if(!r.children[o]||!yue(r.children[o],i.children[o],n))return!1;return!0}else{let o=e.slice(0,r.segments.length),s=e.slice(r.segments.length);return!lx(r.segments,o)||!pN(r.segments,o,n)||!r.children[bo]?!1:vue(r.children[bo],i,s,n)}}function pN(r,i,e){return i.every((n,o)=>gue[e](r[o].parameters,n.parameters))}var Ny=class{constructor(i=new Rs([],{}),e={},n=null){this.root=i,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap??=zT(this.queryParams),this._queryParamMap}toString(){return d3e.serialize(this)}},Rs=class{constructor(i,e){this.segments=i,this.children=e,this.parent=null,Object.values(e).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mN(this)}},ax=class{constructor(i,e){this.path=i,this.parameters=e}get parameterMap(){return this._parameterMap??=zT(this.parameters),this._parameterMap}toString(){return wue(this)}};function l3e(r,i){return lx(r,i)&&r.every((e,n)=>t_(e.parameters,i[n].parameters))}function lx(r,i){return r.length!==i.length?!1:r.every((e,n)=>e.path===i[n].path)}function c3e(r,i){let e=[];return Object.entries(r.children).forEach(([n,o])=>{n===bo&&(e=e.concat(i(o,n)))}),Object.entries(r.children).forEach(([n,o])=>{n!==bo&&(e=e.concat(i(o,n)))}),e}var v9=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:()=>new Ik,providedIn:"root"})}}return r})(),Ik=class{parse(i){let e=new KH(i);return new Ny(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(i){let e=`/${vk(i.root,!0)}`,n=p3e(i.queryParams),o=typeof i.fragment=="string"?`#${u3e(i.fragment)}`:"";return`${e}${n}${o}`}},d3e=new Ik;function mN(r){return r.segments.map(i=>wue(i)).join("/")}function vk(r,i){if(!r.hasChildren())return mN(r);if(i){let e=r.children[bo]?vk(r.children[bo],!1):"",n=[];return Object.entries(r.children).forEach(([o,s])=>{o!==bo&&n.push(`${o}:${vk(s,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}else{let e=c3e(r,(n,o)=>o===bo?[vk(r.children[bo],!1)]:[`${o}:${vk(n,!1)}`]);return Object.keys(r.children).length===1&&r.children[bo]!=null?`${mN(r)}/${e[0]}`:`${mN(r)}/(${e.join("//")})`}}function bue(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function uN(r){return bue(r).replace(/%3B/gi,";")}function u3e(r){return encodeURI(r)}function YH(r){return bue(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fN(r){return decodeURIComponent(r)}function lue(r){return fN(r.replace(/\+/g,"%20"))}function wue(r){return`${YH(r.path)}${h3e(r.parameters)}`}function h3e(r){return Object.entries(r).map(([i,e])=>`;${YH(i)}=${YH(e)}`).join("")}function p3e(r){let i=Object.entries(r).map(([e,n])=>Array.isArray(n)?n.map(o=>`${uN(e)}=${uN(o)}`).join("&"):`${uN(e)}=${uN(n)}`).filter(e=>e);return i.length?`?${i.join("&")}`:""}var m3e=/^[^\/()?;#]+/;function UH(r){let i=r.match(m3e);return i?i[0]:""}var f3e=/^[^\/()?;=#]+/;function g3e(r){let i=r.match(f3e);return i?i[0]:""}var _3e=/^[^=?&#]+/;function y3e(r){let i=r.match(_3e);return i?i[0]:""}var v3e=/^[^&#]+/;function b3e(r){let i=r.match(v3e);return i?i[0]:""}var KH=class{constructor(i){this.url=i,this.remaining=i}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rs([],{}):new Rs([],this.parseChildren())}parseQueryParams(){let i={};if(this.consumeOptional("?"))do this.parseQueryParam(i);while(this.consumeOptional("&"));return i}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let i=[];for(this.peekStartsWith("(")||i.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),i.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(i.length>0||Object.keys(e).length>0)&&(n[bo]=new Rs(i,e)),n}parseSegment(){let i=UH(this.remaining);if(i===""&&this.peekStartsWith(";"))throw new ki(4009,!1);return this.capture(i),new ax(fN(i),this.parseMatrixParams())}parseMatrixParams(){let i={};for(;this.consumeOptional(";");)this.parseParam(i);return i}parseParam(i){let e=g3e(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let o=UH(this.remaining);o&&(n=o,this.capture(n))}i[fN(e)]=fN(n)}parseQueryParam(i){let e=y3e(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let l=b3e(this.remaining);l&&(n=l,this.capture(n))}let o=lue(e),s=lue(n);if(i.hasOwnProperty(o)){let l=i[o];Array.isArray(l)||(l=[l],i[o]=l),l.push(s)}else i[o]=s}parseParens(i){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=UH(this.remaining),o=this.remaining[n.length];if(o!=="/"&&o!==")"&&o!==";")throw new ki(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):i&&(s=bo);let l=this.parseChildren();e[s]=Object.keys(l).length===1?l[bo]:new Rs([],l),this.consumeOptional("//")}return e}peekStartsWith(i){return this.remaining.startsWith(i)}consumeOptional(i){return this.peekStartsWith(i)?(this.remaining=this.remaining.substring(i.length),!0):!1}capture(i){if(!this.consumeOptional(i))throw new ki(4011,!1)}};function Cue(r){return r.segments.length>0?new Rs([],{[bo]:r}):r}function xue(r){let i={};for(let[n,o]of Object.entries(r.children)){let s=xue(o);if(n===bo&&s.segments.length===0&&s.hasChildren())for(let[l,h]of Object.entries(s.children))i[l]=h;else(s.segments.length>0||s.hasChildren())&&(i[n]=s)}let e=new Rs(r.segments,i);return w3e(e)}function w3e(r){if(r.numberOfChildren===1&&r.children[bo]){let i=r.children[bo];return new Rs(r.segments.concat(i.segments),i.children)}return r}function Tk(r){return r instanceof Ny}function C3e(r,i,e=null,n=null){let o=Sue(r);return Iue(o,i,e,n)}function Sue(r){let i;function e(s){let l={};for(let p of s.children){let m=e(p);l[p.outlet]=m}let h=new Rs(s.url,l);return s===r&&(i=h),h}let n=e(r.root),o=Cue(n);return i??o}function Iue(r,i,e,n){let o=r;for(;o.parent;)o=o.parent;if(i.length===0)return zH(o,o,o,e,n);let s=x3e(i);if(s.toRoot())return zH(o,o,new Rs([],{}),e,n);let l=S3e(s,o,r),h=l.processChildren?Ck(l.segmentGroup,l.index,s.commands):Aue(l.segmentGroup,l.index,s.commands);return zH(o,l.segmentGroup,h,e,n)}function gN(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function Ak(r){return typeof r=="object"&&r!=null&&r.outlets}function zH(r,i,e,n,o){let s={};n&&Object.entries(n).forEach(([p,m])=>{s[p]=Array.isArray(m)?m.map(f=>`${f}`):`${m}`});let l;r===i?l=e:l=Tue(r,i,e);let h=Cue(xue(l));return new Ny(h,s,o)}function Tue(r,i,e){let n={};return Object.entries(r.children).forEach(([o,s])=>{s===i?n[o]=e:n[o]=Tue(s,i,e)}),new Rs(r.segments,n)}var _N=class{constructor(i,e,n){if(this.isAbsolute=i,this.numberOfDoubleDots=e,this.commands=n,i&&n.length>0&&gN(n[0]))throw new ki(4003,!1);let o=n.find(Ak);if(o&&o!==fue(n))throw new ki(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function x3e(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new _N(!0,0,r);let i=0,e=!1,n=r.reduce((o,s,l)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let h={};return Object.entries(s.outlets).forEach(([p,m])=>{h[p]=typeof m=="string"?m.split("/"):m}),[...o,{outlets:h}]}if(s.segmentPath)return[...o,s.segmentPath]}return typeof s!="string"?[...o,s]:l===0?(s.split("/").forEach((h,p)=>{p==0&&h==="."||(p==0&&h===""?e=!0:h===".."?i++:h!=""&&o.push(h))}),o):[...o,s]},[]);return new _N(e,i,n)}var VT=class{constructor(i,e,n){this.segmentGroup=i,this.processChildren=e,this.index=n}};function S3e(r,i,e){if(r.isAbsolute)return new VT(i,!0,0);if(!e)return new VT(i,!1,NaN);if(e.parent===null)return new VT(e,!0,0);let n=gN(r.commands[0])?0:1,o=e.segments.length-1+n;return I3e(e,o,r.numberOfDoubleDots)}function I3e(r,i,e){let n=r,o=i,s=e;for(;s>o;){if(s-=o,n=n.parent,!n)throw new ki(4005,!1);o=n.segments.length}return new VT(n,!1,o-s)}function T3e(r){return Ak(r[0])?r[0].outlets:{[bo]:r}}function Aue(r,i,e){if(r??=new Rs([],{}),r.segments.length===0&&r.hasChildren())return Ck(r,i,e);let n=A3e(r,i,e),o=e.slice(n.commandIndex);if(n.match&&n.pathIndex<r.segments.length){let s=new Rs(r.segments.slice(0,n.pathIndex),{});return s.children[bo]=new Rs(r.segments.slice(n.pathIndex),r.children),Ck(s,0,o)}else return n.match&&o.length===0?new Rs(r.segments,{}):n.match&&!r.hasChildren()?ZH(r,i,e):n.match?Ck(r,0,o):ZH(r,i,e)}function Ck(r,i,e){if(e.length===0)return new Rs(r.segments,{});{let n=T3e(e),o={};if(Object.keys(n).some(s=>s!==bo)&&r.children[bo]&&r.numberOfChildren===1&&r.children[bo].segments.length===0){let s=Ck(r.children[bo],i,e);return new Rs(r.segments,s.children)}return Object.entries(n).forEach(([s,l])=>{typeof l=="string"&&(l=[l]),l!==null&&(o[s]=Aue(r.children[s],i,l))}),Object.entries(r.children).forEach(([s,l])=>{n[s]===void 0&&(o[s]=l)}),new Rs(r.segments,o)}}function A3e(r,i,e){let n=0,o=i,s={match:!1,pathIndex:0,commandIndex:0};for(;o<r.segments.length;){if(n>=e.length)return s;let l=r.segments[o],h=e[n];if(Ak(h))break;let p=`${h}`,m=n<e.length-1?e[n+1]:null;if(o>0&&p===void 0)break;if(p&&m&&typeof m=="object"&&m.outlets===void 0){if(!due(p,m,l))return s;n+=2}else{if(!due(p,{},l))return s;n++}o++}return{match:!0,pathIndex:o,commandIndex:n}}function ZH(r,i,e){let n=r.segments.slice(0,i),o=0;for(;o<e.length;){let s=e[o];if(Ak(s)){let p=E3e(s.outlets);return new Rs(n,p)}if(o===0&&gN(e[0])){let p=r.segments[i];n.push(new ax(p.path,cue(e[0]))),o++;continue}let l=Ak(s)?s.outlets[bo]:`${s}`,h=o<e.length-1?e[o+1]:null;l&&h&&gN(h)?(n.push(new ax(l,cue(h))),o+=2):(n.push(new ax(l,{})),o++)}return new Rs(n,{})}function E3e(r){let i={};return Object.entries(r).forEach(([e,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(i[e]=ZH(new Rs([],{}),0,n))}),i}function cue(r){let i={};return Object.entries(r).forEach(([e,n])=>i[e]=`${n}`),i}function due(r,i,e){return r==e.path&&t_(i,e.parameters)}var xk="imperative",cu=function(r){return r[r.NavigationStart=0]="NavigationStart",r[r.NavigationEnd=1]="NavigationEnd",r[r.NavigationCancel=2]="NavigationCancel",r[r.NavigationError=3]="NavigationError",r[r.RoutesRecognized=4]="RoutesRecognized",r[r.ResolveStart=5]="ResolveStart",r[r.ResolveEnd=6]="ResolveEnd",r[r.GuardsCheckStart=7]="GuardsCheckStart",r[r.GuardsCheckEnd=8]="GuardsCheckEnd",r[r.RouteConfigLoadStart=9]="RouteConfigLoadStart",r[r.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",r[r.ChildActivationStart=11]="ChildActivationStart",r[r.ChildActivationEnd=12]="ChildActivationEnd",r[r.ActivationStart=13]="ActivationStart",r[r.ActivationEnd=14]="ActivationEnd",r[r.Scroll=15]="Scroll",r[r.NavigationSkipped=16]="NavigationSkipped",r}(cu||{}),of=class{constructor(i,e){this.id=i,this.url=e}},cx=class extends of{constructor(i,e,n="imperative",o=null){super(i,e),this.type=cu.NavigationStart,this.navigationTrigger=n,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},By=class extends of{constructor(i,e,n){super(i,e),this.urlAfterRedirects=n,this.type=cu.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},fm=function(r){return r[r.Redirect=0]="Redirect",r[r.SupersededByNewNavigation=1]="SupersededByNewNavigation",r[r.NoDataFromResolver=2]="NoDataFromResolver",r[r.GuardRejected=3]="GuardRejected",r}(fm||{}),QH=function(r){return r[r.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",r[r.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",r}(QH||{}),Ly=class extends of{constructor(i,e,n,o){super(i,e),this.reason=n,this.code=o,this.type=cu.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},dx=class extends of{constructor(i,e,n,o){super(i,e),this.reason=n,this.code=o,this.type=cu.NavigationSkipped}},Ek=class extends of{constructor(i,e,n,o){super(i,e),this.error=n,this.target=o,this.type=cu.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},yN=class extends of{constructor(i,e,n,o){super(i,e),this.urlAfterRedirects=n,this.state=o,this.type=cu.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},XH=class extends of{constructor(i,e,n,o){super(i,e),this.urlAfterRedirects=n,this.state=o,this.type=cu.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},JH=class extends of{constructor(i,e,n,o,s){super(i,e),this.urlAfterRedirects=n,this.state=o,this.shouldActivate=s,this.type=cu.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},e9=class extends of{constructor(i,e,n,o){super(i,e),this.urlAfterRedirects=n,this.state=o,this.type=cu.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},t9=class extends of{constructor(i,e,n,o){super(i,e),this.urlAfterRedirects=n,this.state=o,this.type=cu.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},i9=class{constructor(i){this.route=i,this.type=cu.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},n9=class{constructor(i){this.route=i,this.type=cu.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},r9=class{constructor(i){this.snapshot=i,this.type=cu.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},o9=class{constructor(i){this.snapshot=i,this.type=cu.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},s9=class{constructor(i){this.snapshot=i,this.type=cu.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},a9=class{constructor(i){this.snapshot=i,this.type=cu.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Mk=class{},GT=class{constructor(i,e){this.url=i,this.navigationBehaviorOptions=e}};function M3e(r,i){return r.providers&&!r._injector&&(r._injector=cH(r.providers,i,`Route: ${r.path}`)),r._injector??i}function Sg(r){return r.outlet||bo}function D3e(r,i){let e=r.filter(n=>Sg(n)===i);return e.push(...r.filter(n=>Sg(n)!==i)),e}function Fk(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let i=r.parent;i;i=i.parent){let e=i.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var l9=class{get injector(){return Fk(this.route?.snapshot)??this.rootInjector}set injector(i){}constructor(i){this.rootInjector=i,this.outlet=null,this.route=null,this.children=new IN(this.rootInjector),this.attachRef=null}},IN=(()=>{class r{constructor(e){this.rootInjector=e,this.contexts=new Map}onChildOutletCreated(e,n){let o=this.getOrCreateContext(e);o.outlet=n,this.contexts.set(e,o)}onChildOutletDestroyed(e){let n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new l9(this.rootInjector),this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(n){return new(n||r)(xe(zc))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),vN=class{constructor(i){this._root=i}get root(){return this._root.value}parent(i){let e=this.pathFromRoot(i);return e.length>1?e[e.length-2]:null}children(i){let e=c9(i,this._root);return e?e.children.map(n=>n.value):[]}firstChild(i){let e=c9(i,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(i){let e=d9(i,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==i)}pathFromRoot(i){return d9(i,this._root).map(e=>e.value)}};function c9(r,i){if(r===i.value)return i;for(let e of i.children){let n=c9(r,e);if(n)return n}return null}function d9(r,i){if(r===i.value)return[i];for(let e of i.children){let n=d9(r,e);if(n.length)return n.unshift(i),n}return[]}var mm=class{constructor(i,e){this.value=i,this.children=e}toString(){return`TreeNode(${this.value})`}};function jT(r){let i={};return r&&r.children.forEach(e=>i[e.value.outlet]=e),i}var bN=class extends vN{constructor(i,e){super(i),this.snapshot=e,b9(this,i)}toString(){return this.snapshot.toString()}};function Eue(r){let i=k3e(r),e=new mt([new ax("",{})]),n=new mt({}),o=new mt({}),s=new mt({}),l=new mt(""),h=new i_(e,n,s,l,o,bo,r,i.root);return h.snapshot=i.root,new bN(new mm(h,[]),i)}function k3e(r){let i={},e={},n={},o="",s=new $T([],i,n,o,e,bo,r,null,{});return new CN("",new mm(s,[]))}var i_=class{constructor(i,e,n,o,s,l,h,p){this.urlSubject=i,this.paramsSubject=e,this.queryParamsSubject=n,this.fragmentSubject=o,this.dataSubject=s,this.outlet=l,this.component=h,this._futureSnapshot=p,this.title=this.dataSubject?.pipe($t(m=>m[Rk]))??Vt(void 0),this.url=i,this.params=e,this.queryParams=n,this.fragment=o,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe($t(i=>zT(i))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe($t(i=>zT(i))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function wN(r,i,e="emptyOnly"){let n,{routeConfig:o}=r;return i!==null&&(e==="always"||o?.path===""||!i.component&&!i.routeConfig?.loadComponent)?n={params:Xe(Xe({},i.params),r.params),data:Xe(Xe({},i.data),r.data),resolve:Xe(Xe(Xe(Xe({},r.data),i.data),o?.data),r._resolvedData)}:n={params:Xe({},r.params),data:Xe({},r.data),resolve:Xe(Xe({},r.data),r._resolvedData??{})},o&&Due(o)&&(n.resolve[Rk]=o.title),n}var $T=class{get title(){return this.data?.[Rk]}constructor(i,e,n,o,s,l,h,p,m){this.url=i,this.params=e,this.queryParams=n,this.fragment=o,this.data=s,this.outlet=l,this.component=h,this.routeConfig=p,this._resolve=m}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zT(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zT(this.queryParams),this._queryParamMap}toString(){let i=this.url.map(n=>n.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${i}', path:'${e}')`}},CN=class extends vN{constructor(i,e){super(e),this.url=i,b9(this,e)}toString(){return Mue(this._root)}};function b9(r,i){i.value._routerState=r,i.children.forEach(e=>b9(r,e))}function Mue(r){let i=r.children.length>0?` { ${r.children.map(Mue).join(", ")} } `:"";return`${r.value}${i}`}function GH(r){if(r.snapshot){let i=r.snapshot,e=r._futureSnapshot;r.snapshot=e,t_(i.queryParams,e.queryParams)||r.queryParamsSubject.next(e.queryParams),i.fragment!==e.fragment&&r.fragmentSubject.next(e.fragment),t_(i.params,e.params)||r.paramsSubject.next(e.params),r3e(i.url,e.url)||r.urlSubject.next(e.url),t_(i.data,e.data)||r.dataSubject.next(e.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function u9(r,i){let e=t_(r.params,i.params)&&l3e(r.url,i.url),n=!r.parent!=!i.parent;return e&&!n&&(!r.parent||u9(r.parent,i.parent))}function Due(r){return typeof r.title=="string"||r.title===null}var O3e=(()=>{class r{constructor(){this.activated=null,this._activatedRoute=null,this.name=bo,this.activateEvents=new it,this.deactivateEvents=new it,this.attachEvents=new it,this.detachEvents=new it,this.parentContexts=Et(IN),this.location=Et(Io),this.changeDetector=Et(Ti),this.inputBinder=Et(w9,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:n,previousValue:o}=e.name;if(n)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ki(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ki(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ki(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new ki(4013,!1);this._activatedRoute=e;let o=this.location,l=e.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new h9(e,h,o.injector);this.activated=o.createComponent(l,{index:o.length,injector:p,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=Pt({type:r,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Jn]})}}return r})(),h9=class r{__ngOutletInjector(i){return new r(this.route,this.childContexts,i)}constructor(i,e,n){this.route=i,this.childContexts=e,this.parent=n}get(i,e){return i===i_?this.route:i===IN?this.childContexts:this.parent.get(i,e)}},w9=new At("");function P3e(r,i,e){let n=Dk(r,i._root,e?e._root:void 0);return new bN(n,i)}function Dk(r,i,e){if(e&&r.shouldReuseRoute(i.value,e.value.snapshot)){let n=e.value;n._futureSnapshot=i.value;let o=R3e(r,i,e);return new mm(n,o)}else{if(r.shouldAttach(i.value)){let s=r.retrieve(i.value);if(s!==null){let l=s.route;return l.value._futureSnapshot=i.value,l.children=i.children.map(h=>Dk(r,h)),l}}let n=F3e(i.value),o=i.children.map(s=>Dk(r,s));return new mm(n,o)}}function R3e(r,i,e){return i.children.map(n=>{for(let o of e.children)if(r.shouldReuseRoute(n.value,o.value.snapshot))return Dk(r,n,o);return Dk(r,n)})}function F3e(r){return new i_(new mt(r.url),new mt(r.params),new mt(r.queryParams),new mt(r.fragment),new mt(r.data),r.outlet,r.component,r)}var kk=class{constructor(i,e){this.redirectTo=i,this.navigationBehaviorOptions=e}},kue="ngNavigationCancelingError";function xN(r,i){let{redirectTo:e,navigationBehaviorOptions:n}=Tk(i)?{redirectTo:i,navigationBehaviorOptions:void 0}:i,o=Oue(!1,fm.Redirect);return o.url=e,o.navigationBehaviorOptions=n,o}function Oue(r,i){let e=new Error(`NavigationCancelingError: ${r||""}`);return e[kue]=!0,e.cancellationCode=i,e}function L3e(r){return Pue(r)&&Tk(r.url)}function Pue(r){return!!r&&r[kue]}var N3e=(r,i,e,n)=>$t(o=>(new p9(i,o.targetRouterState,o.currentRouterState,e,n).activate(r),o)),p9=class{constructor(i,e,n,o,s){this.routeReuseStrategy=i,this.futureState=e,this.currState=n,this.forwardEvent=o,this.inputBindingEnabled=s}activate(i){let e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,i),GH(this.futureState.root),this.activateChildRoutes(e,n,i)}deactivateChildRoutes(i,e,n){let o=jT(e);i.children.forEach(s=>{let l=s.value.outlet;this.deactivateRoutes(s,o[l],n),delete o[l]}),Object.values(o).forEach(s=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(i,e,n){let o=i.value,s=e?e.value:null;if(o===s)if(o.component){let l=n.getContext(o.outlet);l&&this.deactivateChildRoutes(i,e,l.children)}else this.deactivateChildRoutes(i,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(i,e){i.value.component&&this.routeReuseStrategy.shouldDetach(i.value.snapshot)?this.detachAndStoreRouteSubtree(i,e):this.deactivateRouteAndOutlet(i,e)}detachAndStoreRouteSubtree(i,e){let n=e.getContext(i.value.outlet),o=n&&i.value.component?n.children:e,s=jT(i);for(let l of Object.values(s))this.deactivateRouteAndItsChildren(l,o);if(n&&n.outlet){let l=n.outlet.detach(),h=n.children.onOutletDeactivated();this.routeReuseStrategy.store(i.value.snapshot,{componentRef:l,route:i,contexts:h})}}deactivateRouteAndOutlet(i,e){let n=e.getContext(i.value.outlet),o=n&&i.value.component?n.children:e,s=jT(i);for(let l of Object.values(s))this.deactivateRouteAndItsChildren(l,o);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(i,e,n){let o=jT(e);i.children.forEach(s=>{this.activateRoutes(s,o[s.value.outlet],n),this.forwardEvent(new a9(s.value.snapshot))}),i.children.length&&this.forwardEvent(new o9(i.value.snapshot))}activateRoutes(i,e,n){let o=i.value,s=e?e.value:null;if(GH(o),o===s)if(o.component){let l=n.getOrCreateContext(o.outlet);this.activateChildRoutes(i,e,l.children)}else this.activateChildRoutes(i,e,n);else if(o.component){let l=n.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let h=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),GH(h.route.value),this.activateChildRoutes(i,null,l.children)}else l.attachRef=null,l.route=o,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(i,null,l.children)}else this.activateChildRoutes(i,null,n)}},SN=class{constructor(i){this.path=i,this.route=this.path[this.path.length-1]}},UT=class{constructor(i,e){this.component=i,this.route=e}};function B3e(r,i,e){let n=r._root,o=i?i._root:null;return bk(n,o,e,[n.value])}function j3e(r){let i=r.routeConfig?r.routeConfig.canActivateChild:null;return!i||i.length===0?null:{node:r,guards:i}}function WT(r,i){let e=Symbol(),n=i.get(r,e);return n===e?typeof r=="function"&&!Eae(r)?r:i.get(r):n}function bk(r,i,e,n,o={canDeactivateChecks:[],canActivateChecks:[]}){let s=jT(i);return r.children.forEach(l=>{V3e(l,s[l.value.outlet],e,n.concat([l.value]),o),delete s[l.value.outlet]}),Object.entries(s).forEach(([l,h])=>Sk(h,e.getContext(l),o)),o}function V3e(r,i,e,n,o={canDeactivateChecks:[],canActivateChecks:[]}){let s=r.value,l=i?i.value:null,h=e?e.getContext(r.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){let p=$3e(l,s,s.routeConfig.runGuardsAndResolvers);p?o.canActivateChecks.push(new SN(n)):(s.data=l.data,s._resolvedData=l._resolvedData),s.component?bk(r,i,h?h.children:null,n,o):bk(r,i,e,n,o),p&&h&&h.outlet&&h.outlet.isActivated&&o.canDeactivateChecks.push(new UT(h.outlet.component,l))}else l&&Sk(i,h,o),o.canActivateChecks.push(new SN(n)),s.component?bk(r,null,h?h.children:null,n,o):bk(r,null,e,n,o);return o}function $3e(r,i,e){if(typeof e=="function")return e(r,i);switch(e){case"pathParamsChange":return!lx(r.url,i.url);case"pathParamsOrQueryParamsChange":return!lx(r.url,i.url)||!t_(r.queryParams,i.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!u9(r,i)||!t_(r.queryParams,i.queryParams);case"paramsChange":default:return!u9(r,i)}}function Sk(r,i,e){let n=jT(r),o=r.value;Object.entries(n).forEach(([s,l])=>{o.component?i?Sk(l,i.children.getContext(s),e):Sk(l,null,e):Sk(l,i,e)}),o.component?i&&i.outlet&&i.outlet.isActivated?e.canDeactivateChecks.push(new UT(i.outlet.component,o)):e.canDeactivateChecks.push(new UT(null,o)):e.canDeactivateChecks.push(new UT(null,o))}function Lk(r){return typeof r=="function"}function U3e(r){return typeof r=="boolean"}function z3e(r){return r&&Lk(r.canLoad)}function G3e(r){return r&&Lk(r.canActivate)}function H3e(r){return r&&Lk(r.canActivateChild)}function W3e(r){return r&&Lk(r.canDeactivate)}function q3e(r){return r&&Lk(r.canMatch)}function Rue(r){return r instanceof dg||r?.name==="EmptyError"}var hN=Symbol("INITIAL_VALUE");function HT(){return jr(r=>ts(r.map(i=>i.pipe(Tn(1),yo(hN)))).pipe($t(i=>{for(let e of i)if(e!==!0){if(e===hN)return hN;if(e===!1||Y3e(e))return e}return!0}),mn(i=>i!==hN),Tn(1)))}function Y3e(r){return Tk(r)||r instanceof kk}function K3e(r,i){return ga(e=>{let{targetSnapshot:n,currentSnapshot:o,guards:{canActivateChecks:s,canDeactivateChecks:l}}=e;return l.length===0&&s.length===0?Vt(li(Xe({},e),{guardsResult:!0})):Z3e(l,n,o,r).pipe(ga(h=>h&&U3e(h)?Q3e(n,s,r,i):Vt(h)),$t(h=>li(Xe({},e),{guardsResult:h})))})}function Z3e(r,i,e,n){return Xn(r).pipe(ga(o=>iNe(o.component,o.route,e,i,n)),So(o=>o!==!0,!0))}function Q3e(r,i,e,n){return Xn(i).pipe(ul(o=>Bh(J3e(o.route.parent,n),X3e(o.route,n),tNe(r,o.path,e),eNe(r,o.route,e))),So(o=>o!==!0,!0))}function X3e(r,i){return r!==null&&i&&i(new s9(r)),Vt(!0)}function J3e(r,i){return r!==null&&i&&i(new r9(r)),Vt(!0)}function eNe(r,i,e){let n=i.routeConfig?i.routeConfig.canActivate:null;if(!n||n.length===0)return Vt(!0);let o=n.map(s=>$d(()=>{let l=Fk(i)??e,h=WT(s,l),p=G3e(h)?h.canActivate(i,r):gg(l,()=>h(i,r));return hw(p).pipe(So())}));return Vt(o).pipe(HT())}function tNe(r,i,e){let n=i[i.length-1],s=i.slice(0,i.length-1).reverse().map(l=>j3e(l)).filter(l=>l!==null).map(l=>$d(()=>{let h=l.guards.map(p=>{let m=Fk(l.node)??e,f=WT(p,m),g=H3e(f)?f.canActivateChild(n,r):gg(m,()=>f(n,r));return hw(g).pipe(So())});return Vt(h).pipe(HT())}));return Vt(s).pipe(HT())}function iNe(r,i,e,n,o){let s=i&&i.routeConfig?i.routeConfig.canDeactivate:null;if(!s||s.length===0)return Vt(!0);let l=s.map(h=>{let p=Fk(i)??o,m=WT(h,p),f=W3e(m)?m.canDeactivate(r,i,e,n):gg(p,()=>m(r,i,e,n));return hw(f).pipe(So())});return Vt(l).pipe(HT())}function nNe(r,i,e,n){let o=i.canLoad;if(o===void 0||o.length===0)return Vt(!0);let s=o.map(l=>{let h=WT(l,r),p=z3e(h)?h.canLoad(i,e):gg(r,()=>h(i,e));return hw(p)});return Vt(s).pipe(HT(),Fue(n))}function Fue(r){return Rz(br(i=>{if(typeof i!="boolean")throw xN(r,i)}),$t(i=>i===!0))}function rNe(r,i,e,n){let o=i.canMatch;if(!o||o.length===0)return Vt(!0);let s=o.map(l=>{let h=WT(l,r),p=q3e(h)?h.canMatch(i,e):gg(r,()=>h(i,e));return hw(p)});return Vt(s).pipe(HT(),Fue(n))}var Ok=class{constructor(i){this.segmentGroup=i||null}},Pk=class extends Error{constructor(i){super(),this.urlTree=i}};function BT(r){return dd(new Ok(r))}function oNe(r){return dd(new ki(4e3,!1))}function sNe(r){return dd(Oue(!1,fm.GuardRejected))}var m9=class{constructor(i,e){this.urlSerializer=i,this.urlTree=e}lineralizeSegments(i,e){let n=[],o=e.root;for(;;){if(n=n.concat(o.segments),o.numberOfChildren===0)return Vt(n);if(o.numberOfChildren>1||!o.children[bo])return oNe(`${i.redirectTo}`);o=o.children[bo]}}applyRedirectCommands(i,e,n,o,s){if(typeof e!="string"){let h=e,{queryParams:p,fragment:m,routeConfig:f,url:g,outlet:y,params:_,data:w,title:A}=o,k=gg(s,()=>h({params:_,data:w,queryParams:p,fragment:m,routeConfig:f,url:g,outlet:y,title:A}));if(k instanceof Ny)throw new Pk(k);e=k}let l=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),i,n);if(e[0]==="/")throw new Pk(l);return l}applyRedirectCreateUrlTree(i,e,n,o){let s=this.createSegmentGroup(i,e.root,n,o);return new Ny(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(i,e){let n={};return Object.entries(i).forEach(([o,s])=>{if(typeof s=="string"&&s[0]===":"){let h=s.substring(1);n[o]=e[h]}else n[o]=s}),n}createSegmentGroup(i,e,n,o){let s=this.createSegments(i,e.segments,n,o),l={};return Object.entries(e.children).forEach(([h,p])=>{l[h]=this.createSegmentGroup(i,p,n,o)}),new Rs(s,l)}createSegments(i,e,n,o){return e.map(s=>s.path[0]===":"?this.findPosParam(i,s,o):this.findOrReturn(s,n))}findPosParam(i,e,n){let o=n[e.path.substring(1)];if(!o)throw new ki(4001,!1);return o}findOrReturn(i,e){let n=0;for(let o of e){if(o.path===i.path)return e.splice(n),o;n++}return i}},f9={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function aNe(r,i,e,n,o){let s=Lue(r,i,e);return s.matched?(n=M3e(i,n),rNe(n,i,e,o).pipe($t(l=>l===!0?s:Xe({},f9)))):Vt(s)}function Lue(r,i,e){if(i.path==="**")return lNe(e);if(i.path==="")return i.pathMatch==="full"&&(r.hasChildren()||e.length>0)?Xe({},f9):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let o=(i.matcher||n3e)(e,r,i);if(!o)return Xe({},f9);let s={};Object.entries(o.posParams??{}).forEach(([h,p])=>{s[h]=p.path});let l=o.consumed.length>0?Xe(Xe({},s),o.consumed[o.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function lNe(r){return{matched:!0,parameters:r.length>0?fue(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function uue(r,i,e,n){return e.length>0&&uNe(r,e,n)?{segmentGroup:new Rs(i,dNe(n,new Rs(e,r.children))),slicedSegments:[]}:e.length===0&&hNe(r,e,n)?{segmentGroup:new Rs(r.segments,cNe(r,e,n,r.children)),slicedSegments:e}:{segmentGroup:new Rs(r.segments,r.children),slicedSegments:e}}function cNe(r,i,e,n){let o={};for(let s of e)if(TN(r,i,s)&&!n[Sg(s)]){let l=new Rs([],{});o[Sg(s)]=l}return Xe(Xe({},n),o)}function dNe(r,i){let e={};e[bo]=i;for(let n of r)if(n.path===""&&Sg(n)!==bo){let o=new Rs([],{});e[Sg(n)]=o}return e}function uNe(r,i,e){return e.some(n=>TN(r,i,n)&&Sg(n)!==bo)}function hNe(r,i,e){return e.some(n=>TN(r,i,n))}function TN(r,i,e){return(r.hasChildren()||i.length>0)&&e.pathMatch==="full"?!1:e.path===""}function pNe(r,i,e){return i.length===0&&!r.children[e]}var g9=class{};function mNe(r,i,e,n,o,s,l="emptyOnly"){return new _9(r,i,e,n,o,l,s).recognize()}var fNe=31,_9=class{constructor(i,e,n,o,s,l,h){this.injector=i,this.configLoader=e,this.rootComponentType=n,this.config=o,this.urlTree=s,this.paramsInheritanceStrategy=l,this.urlSerializer=h,this.applyRedirects=new m9(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(i){return new ki(4002,`'${i.segmentGroup}'`)}recognize(){let i=uue(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(i).pipe($t(({children:e,rootSnapshot:n})=>{let o=new mm(n,e),s=new CN("",o),l=C3e(n,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(l),{state:s,tree:l}}))}match(i){let e=new $T([],Object.freeze({}),Object.freeze(Xe({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),bo,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,i,bo,e).pipe($t(n=>({children:n,rootSnapshot:e})),Fn(n=>{if(n instanceof Pk)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof Ok?this.noMatchError(n):n}))}processSegmentGroup(i,e,n,o,s){return n.segments.length===0&&n.hasChildren()?this.processChildren(i,e,n,s):this.processSegment(i,e,n,n.segments,o,!0,s).pipe($t(l=>l instanceof mm?[l]:[]))}processChildren(i,e,n,o){let s=[];for(let l of Object.keys(n.children))l==="primary"?s.unshift(l):s.push(l);return Xn(s).pipe(ul(l=>{let h=n.children[l],p=D3e(e,l);return this.processSegmentGroup(i,p,h,l,o)}),Yz((l,h)=>(l.push(...h),l)),Yb(null),Hz(),ga(l=>{if(l===null)return BT(n);let h=Nue(l);return gNe(h),Vt(h)}))}processSegment(i,e,n,o,s,l,h){return Xn(e).pipe(ul(p=>this.processSegmentAgainstRoute(p._injector??i,e,p,n,o,s,l,h).pipe(Fn(m=>{if(m instanceof Ok)return Vt(null);throw m}))),So(p=>!!p),Fn(p=>{if(Rue(p))return pNe(n,o,s)?Vt(new g9):BT(n);throw p}))}processSegmentAgainstRoute(i,e,n,o,s,l,h,p){return Sg(n)!==l&&(l===bo||!TN(o,s,n))?BT(o):n.redirectTo===void 0?this.matchSegmentAgainstRoute(i,o,n,s,l,p):this.allowRedirects&&h?this.expandSegmentAgainstRouteUsingRedirect(i,o,e,n,s,l,p):BT(o)}expandSegmentAgainstRouteUsingRedirect(i,e,n,o,s,l,h){let{matched:p,parameters:m,consumedSegments:f,positionalParamSegments:g,remainingSegments:y}=Lue(e,o,s);if(!p)return BT(e);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>fNe&&(this.allowRedirects=!1));let _=new $T(s,m,Object.freeze(Xe({},this.urlTree.queryParams)),this.urlTree.fragment,hue(o),Sg(o),o.component??o._loadedComponent??null,o,pue(o)),w=wN(_,h,this.paramsInheritanceStrategy);_.params=Object.freeze(w.params),_.data=Object.freeze(w.data);let A=this.applyRedirects.applyRedirectCommands(f,o.redirectTo,g,_,i);return this.applyRedirects.lineralizeSegments(o,A).pipe(ga(k=>this.processSegment(i,n,e,k.concat(y),l,!1,h)))}matchSegmentAgainstRoute(i,e,n,o,s,l){let h=aNe(e,n,o,i,this.urlSerializer);return n.path==="**"&&(e.children={}),h.pipe(jr(p=>p.matched?(i=n._injector??i,this.getChildConfig(i,n,o).pipe(jr(({routes:m})=>{let f=n._loadedInjector??i,{parameters:g,consumedSegments:y,remainingSegments:_}=p,w=new $T(y,g,Object.freeze(Xe({},this.urlTree.queryParams)),this.urlTree.fragment,hue(n),Sg(n),n.component??n._loadedComponent??null,n,pue(n)),A=wN(w,l,this.paramsInheritanceStrategy);w.params=Object.freeze(A.params),w.data=Object.freeze(A.data);let{segmentGroup:k,slicedSegments:R}=uue(e,y,_,m);if(R.length===0&&k.hasChildren())return this.processChildren(f,m,k,w).pipe($t(H=>new mm(w,H)));if(m.length===0&&R.length===0)return Vt(new mm(w,[]));let $=Sg(n)===s;return this.processSegment(f,m,k,R,$?bo:s,!0,w).pipe($t(H=>new mm(w,H instanceof mm?[H]:[])))}))):BT(e)))}getChildConfig(i,e,n){return e.children?Vt({routes:e.children,injector:i}):e.loadChildren?e._loadedRoutes!==void 0?Vt({routes:e._loadedRoutes,injector:e._loadedInjector}):nNe(i,e,n,this.urlSerializer).pipe(ga(o=>o?this.configLoader.loadChildren(i,e).pipe(br(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):sNe(e))):Vt({routes:[],injector:i})}};function gNe(r){r.sort((i,e)=>i.value.outlet===bo?-1:e.value.outlet===bo?1:i.value.outlet.localeCompare(e.value.outlet))}function _Ne(r){let i=r.value.routeConfig;return i&&i.path===""}function Nue(r){let i=[],e=new Set;for(let n of r){if(!_Ne(n)){i.push(n);continue}let o=i.find(s=>n.value.routeConfig===s.value.routeConfig);o!==void 0?(o.children.push(...n.children),e.add(o)):i.push(n)}for(let n of e){let o=Nue(n.children);i.push(new mm(n.value,o))}return i.filter(n=>!e.has(n))}function hue(r){return r.data||{}}function pue(r){return r.resolve||{}}function yNe(r,i,e,n,o,s){return ga(l=>mNe(r,i,e,n,l.extractedUrl,o,s).pipe($t(({state:h,tree:p})=>li(Xe({},l),{targetSnapshot:h,urlAfterRedirects:p}))))}function vNe(r,i){return ga(e=>{let{targetSnapshot:n,guards:{canActivateChecks:o}}=e;if(!o.length)return Vt(e);let s=new Set(o.map(p=>p.route)),l=new Set;for(let p of s)if(!l.has(p))for(let m of Bue(p))l.add(m);let h=0;return Xn(l).pipe(ul(p=>s.has(p)?bNe(p,n,r,i):(p.data=wN(p,p.parent,r).resolve,Vt(void 0))),br(()=>h++),pT(1),ga(p=>h===l.size?Vt(e):Na))})}function Bue(r){let i=r.children.map(e=>Bue(e)).flat();return[r,...i]}function bNe(r,i,e,n){let o=r.routeConfig,s=r._resolve;return o?.title!==void 0&&!Due(o)&&(s[Rk]=o.title),wNe(s,r,i,n).pipe($t(l=>(r._resolvedData=l,r.data=wN(r,r.parent,e).resolve,null)))}function wNe(r,i,e,n){let o=qH(r);if(o.length===0)return Vt({});let s={};return Xn(o).pipe(ga(l=>CNe(r[l],i,e,n).pipe(So(),br(h=>{if(h instanceof kk)throw xN(new Ik,h);s[l]=h}))),pT(1),Kb(s),Fn(l=>Rue(l)?Na:dd(l)))}function CNe(r,i,e,n){let o=Fk(i)??n,s=WT(r,o),l=s.resolve?s.resolve(i,e):gg(o,()=>s(i,e));return hw(l)}function HH(r){return jr(i=>{let e=r(i);return e?Xn(e).pipe($t(()=>i)):Vt(i)})}var jue=(()=>{class r{buildTitle(e){let n,o=e.root;for(;o!==void 0;)n=this.getResolvedTitleForRoute(o)??n,o=o.children.find(s=>s.outlet===bo);return n}getResolvedTitleForRoute(e){return e.data[Rk]}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:()=>Et(xNe),providedIn:"root"})}}return r})(),xNe=(()=>{class r extends jue{constructor(e){super(),this.title=e}updateTitle(e){let n=this.buildTitle(e);n!==void 0&&this.title.setTitle(n)}static{this.\u0275fac=function(n){return new(n||r)(xe(cN))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),C9=new At("",{providedIn:"root",factory:()=>({})}),SNe=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=gt({type:r,selectors:[["ng-component"]],standalone:!0,features:[yt],decls:1,vars:0,template:function(n,o){n&1&&wt(0,"router-outlet")},dependencies:[O3e],encapsulation:2})}}return r})();function x9(r){let i=r.children&&r.children.map(x9),e=i?li(Xe({},r),{children:i}):Xe({},r);return!e.component&&!e.loadComponent&&(i||e.loadChildren)&&e.outlet&&e.outlet!==bo&&(e.component=SNe),e}var S9=new At(""),INe=(()=>{class r{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Et(yH)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Vt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let n=hw(e.loadComponent()).pipe($t(Vue),br(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),Ud(()=>{this.componentLoaders.delete(e)})),o=new V0(n,()=>new Dt).pipe(Gb());return this.componentLoaders.set(e,o),o}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return Vt({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let s=TNe(n,this.compiler,e,this.onLoadEndListener).pipe(Ud(()=>{this.childrenLoaders.delete(n)})),l=new V0(s,()=>new Dt).pipe(Gb());return this.childrenLoaders.set(n,l),l}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function TNe(r,i,e,n){return hw(r.loadChildren()).pipe($t(Vue),ga(o=>o instanceof WD||Array.isArray(o)?Vt(o):Xn(i.compileModuleAsync(o))),$t(o=>{n&&n(r);let s,l,h=!1;return Array.isArray(o)?(l=o,h=!0):(s=o.create(e).injector,l=s.get(S9,[],{optional:!0,self:!0}).flat()),{routes:l.map(x9),injector:s}}))}function ANe(r){return r&&typeof r=="object"&&"default"in r}function Vue(r){return ANe(r)?r.default:r}var I9=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:()=>Et(ENe),providedIn:"root"})}}return r})(),ENe=(()=>{class r{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),MNe=new At("");var DNe=new At(""),kNe=(()=>{class r{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Dt,this.transitionAbortSubject=new Dt,this.configLoader=Et(INe),this.environmentInjector=Et(zc),this.urlSerializer=Et(v9),this.rootContexts=Et(IN),this.location=Et(pm),this.inputBindingEnabled=Et(w9,{optional:!0})!==null,this.titleStrategy=Et(jue),this.options=Et(C9,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Et(I9),this.createViewTransition=Et(MNe,{optional:!0}),this.navigationErrorHandler=Et(DNe,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Vt(void 0),this.rootComponentType=null;let e=o=>this.events.next(new i9(o)),n=o=>this.events.next(new n9(o));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let n=++this.navigationId;this.transitions?.next(li(Xe(Xe({},this.transitions.value),e),{id:n}))}setupNavigations(e,n,o){return this.transitions=new mt({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:xk,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mn(s=>s.id!==0),$t(s=>li(Xe({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),jr(s=>{let l=!1,h=!1;return Vt(s).pipe(jr(p=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",fm.SupersededByNewNavigation),Na;this.currentTransition=s,this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,targetBrowserUrl:typeof p.extras.browserUrl=="string"?this.urlSerializer.parse(p.extras.browserUrl):p.extras.browserUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?li(Xe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let m=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=p.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!m&&f!=="reload"){let g="";return this.events.next(new dx(p.id,this.urlSerializer.serialize(p.rawUrl),g,QH.IgnoredSameUrlNavigation)),p.resolve(!1),Na}if(this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return Vt(p).pipe(jr(g=>{let y=this.transitions?.getValue();return this.events.next(new cx(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),y!==this.transitions?.getValue()?Na:Promise.resolve(g)}),yNe(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),br(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=li(Xe({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let y=new yN(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}));if(m&&this.urlHandlingStrategy.shouldProcessUrl(p.currentRawUrl)){let{id:g,extractedUrl:y,source:_,restoredState:w,extras:A}=p,k=new cx(g,this.urlSerializer.serialize(y),_,w);this.events.next(k);let R=Eue(this.rootComponentType).snapshot;return this.currentTransition=s=li(Xe({},p),{targetSnapshot:R,urlAfterRedirects:y,extras:li(Xe({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,Vt(s)}else{let g="";return this.events.next(new dx(p.id,this.urlSerializer.serialize(p.extractedUrl),g,QH.IgnoredByUrlHandlingStrategy)),p.resolve(!1),Na}}),br(p=>{let m=new XH(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}),$t(p=>(this.currentTransition=s=li(Xe({},p),{guards:B3e(p.targetSnapshot,p.currentSnapshot,this.rootContexts)}),s)),K3e(this.environmentInjector,p=>this.events.next(p)),br(p=>{if(s.guardsResult=p.guardsResult,p.guardsResult&&typeof p.guardsResult!="boolean")throw xN(this.urlSerializer,p.guardsResult);let m=new JH(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.events.next(m)}),mn(p=>p.guardsResult?!0:(this.cancelNavigationTransition(p,"",fm.GuardRejected),!1)),HH(p=>{if(p.guards.canActivateChecks.length)return Vt(p).pipe(br(m=>{let f=new e9(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(f)}),jr(m=>{let f=!1;return Vt(m).pipe(vNe(this.paramsInheritanceStrategy,this.environmentInjector),br({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(m,"",fm.NoDataFromResolver)}}))}),br(m=>{let f=new t9(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(f)}))}),HH(p=>{let m=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(br(y=>{f.component=y}),$t(()=>{})));for(let y of f.children)g.push(...m(y));return g};return ts(m(p.targetSnapshot.root)).pipe(Yb(null),Tn(1))}),HH(()=>this.afterPreactivation()),jr(()=>{let{currentSnapshot:p,targetSnapshot:m}=s,f=this.createViewTransition?.(this.environmentInjector,p.root,m.root);return f?Xn(f).pipe($t(()=>s)):Vt(s)}),$t(p=>{let m=P3e(e.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return this.currentTransition=s=li(Xe({},p),{targetRouterState:m}),this.currentNavigation.targetRouterState=m,s}),br(()=>{this.events.next(new Mk)}),N3e(this.rootContexts,e.routeReuseStrategy,p=>this.events.next(p),this.inputBindingEnabled),Tn(1),br({next:p=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new By(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects))),this.titleStrategy?.updateTitle(p.targetRouterState.snapshot),p.resolve(!0)},complete:()=>{l=!0}}),rn(this.transitionAbortSubject.pipe(br(p=>{throw p}))),Ud(()=>{!l&&!h&&this.cancelNavigationTransition(s,"",fm.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Fn(p=>{if(h=!0,Pue(p))this.events.next(new Ly(s.id,this.urlSerializer.serialize(s.extractedUrl),p.message,p.cancellationCode)),L3e(p)?this.events.next(new GT(p.url,p.navigationBehaviorOptions)):s.resolve(!1);else{let m=new Ek(s.id,this.urlSerializer.serialize(s.extractedUrl),p,s.targetSnapshot??void 0);try{let f=gg(this.environmentInjector,()=>this.navigationErrorHandler?.(m));if(f instanceof kk){let{message:g,cancellationCode:y}=xN(this.urlSerializer,f);this.events.next(new Ly(s.id,this.urlSerializer.serialize(s.extractedUrl),g,y)),this.events.next(new GT(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(m);let g=e.errorHandler(p);s.resolve(!!g)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return Na}))}))}cancelNavigationTransition(e,n,o){let s=new Ly(e.id,this.urlSerializer.serialize(e.extractedUrl),n,o);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==n?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function ONe(r){return r!==xk}var PNe=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:()=>Et(RNe),providedIn:"root"})}}return r})(),y9=class{shouldDetach(i){return!1}store(i,e){}shouldAttach(i){return!1}retrieve(i){return null}shouldReuseRoute(i,e){return i.routeConfig===e.routeConfig}},RNe=(()=>{class r extends y9{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),$ue=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:()=>Et(FNe),providedIn:"root"})}}return r})(),FNe=(()=>{class r extends $ue{constructor(){super(...arguments),this.location=Et(pm),this.urlSerializer=Et(v9),this.options=Et(C9,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Et(I9),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ny,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Eue(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(n=>{n.type==="popstate"&&e(n.url,n.state)})}handleRouterEvent(e,n){if(e instanceof cx)this.stateMemento=this.createStateMemento();else if(e instanceof dx)this.rawUrlTree=n.initialUrl;else if(e instanceof yN){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(n.targetBrowserUrl??o,n)}}else e instanceof Mk?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&!n.extras.skipLocationChange&&this.setBrowserUrl(n.targetBrowserUrl??this.rawUrlTree,n)):e instanceof Ly&&(e.code===fm.GuardRejected||e.code===fm.NoDataFromResolver)?this.restoreHistory(n):e instanceof Ek?this.restoreHistory(n,!0):e instanceof By&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,n){let o=e instanceof Ny?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(o)||n.extras.replaceUrl){let s=this.browserPageId,l=Xe(Xe({},n.extras.state),this.generateNgRouterState(n.id,s));this.location.replaceState(o,"",l)}else{let s=Xe(Xe({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(e,n=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===e.finalUrl&&s===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),wk=function(r){return r[r.COMPLETE=0]="COMPLETE",r[r.FAILED=1]="FAILED",r[r.REDIRECTING=2]="REDIRECTING",r}(wk||{});function LNe(r,i){r.events.pipe(mn(e=>e instanceof By||e instanceof Ly||e instanceof Ek||e instanceof dx),$t(e=>e instanceof By||e instanceof dx?wk.COMPLETE:(e instanceof Ly?e.code===fm.Redirect||e.code===fm.SupersededByNewNavigation:!1)?wk.REDIRECTING:wk.FAILED),mn(e=>e!==wk.REDIRECTING),Tn(1)).subscribe(()=>{i()})}function NNe(r){throw r}var BNe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jNe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},n_=(()=>{class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Et(RT),this.stateManager=Et($ue),this.options=Et(C9,{optional:!0})||{},this.pendingTasks=Et(X0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Et(kNe),this.urlSerializer=Et(v9),this.location=Et(pm),this.urlHandlingStrategy=Et(I9),this._events=new Dt,this.errorHandler=this.options.errorHandler||NNe,this.navigated=!1,this.routeReuseStrategy=Et(PNe),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Et(S9,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Et(w9,{optional:!0}),this.eventsSubscription=new pn,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(n=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(n,s),n instanceof Ly&&n.code!==fm.Redirect&&n.code!==fm.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof By)this.navigated=!0;else if(n instanceof GT){let l=n.navigationBehaviorOptions,h=this.urlHandlingStrategy.merge(n.url,o.currentRawUrl),p=Xe({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||ONe(o.source)},l);this.scheduleNavigation(h,xk,null,p,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}$Ne(n)&&this._events.next(n)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xk,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",n)},0)})}navigateToSyncWithBrowser(e,n,o){let s={replaceUrl:!0},l=o?.navigationId?o:null;if(o){let p=Xe({},o);delete p.navigationId,delete p.\u0275routerPageId,Object.keys(p).length!==0&&(s.state=p)}let h=this.parseUrl(e);this.scheduleNavigation(h,n,l,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(x9),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,n={}){let{relativeTo:o,queryParams:s,fragment:l,queryParamsHandling:h,preserveFragment:p}=n,m=p?this.currentUrlTree.fragment:l,f=null;switch(h??this.options.defaultQueryParamsHandling){case"merge":f=Xe(Xe({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let y=o?o.snapshot:this.routerState.snapshot.root;g=Sue(y)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),g=this.currentUrlTree.root}return Iue(g,e,f,m??null)}navigateByUrl(e,n={skipLocationChange:!1}){let o=Tk(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,xk,null,n)}navigate(e,n={skipLocationChange:!1}){return VNe(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,n){let o;if(n===!0?o=Xe({},BNe):n===!1?o=Xe({},jNe):o=n,Tk(e))return aue(this.currentUrlTree,e,o);let s=this.parseUrl(e);return aue(this.currentUrlTree,s,o)}removeEmptyProps(e){return Object.entries(e).reduce((n,[o,s])=>(s!=null&&(n[o]=s),n),{})}scheduleNavigation(e,n,o,s,l){if(this.disposed)return Promise.resolve(!1);let h,p,m;l?(h=l.resolve,p=l.reject,m=l.promise):m=new Promise((g,y)=>{h=g,p=y});let f=this.pendingTasks.add();return LNe(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:h,reject:p,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(g=>Promise.reject(g))}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function VNe(r){for(let i=0;i<r.length;i++)if(r[i]==null)throw new ki(4008,!1)}function $Ne(r){return!(r instanceof Mk)&&!(r instanceof GT)}var UNe=new At("");function Uue(r,...i){return Bl([{provide:S9,multi:!0,useValue:r},[],{provide:i_,useFactory:zNe,deps:[n_]},{provide:q3,multi:!0,useFactory:GNe},i.map(e=>e.\u0275providers)])}function zNe(r){return r.routerState.root}function GNe(){let r=Et(yn);return i=>{let e=r.get(fs);if(i!==e.components[0])return;let n=r.get(n_),o=r.get(HNe);r.get(WNe)===1&&n.initialNavigation(),r.get(qNe,null,ko.Optional)?.setUpPreloading(),r.get(UNe,null,ko.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var HNe=new At("",{factory:()=>new Dt}),WNe=new At("",{providedIn:"root",factory:()=>1});var qNe=new At("");var Zue=(()=>{class r{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(n){return new(n||r)(ie(lu),ie(Ht))}}static{this.\u0275dir=Pt({type:r})}}return r})(),k9=(()=>{class r extends Zue{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275dir=Pt({type:r,features:[fn]})}}return r})(),Gc=new At(""),YNe={provide:Gc,useExisting:Go(()=>O9),multi:!0},O9=(()=>{class r extends k9{writeValue(e){this.setProperty("checked",e)}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275dir=Pt({type:r,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,o){n&1&&Oe("change",function(l){return o.onChange(l.target.checked)})("blur",function(){return o.onTouched()})},features:[Bi([YNe]),fn]})}}return r})(),KNe={provide:Gc,useExisting:Go(()=>eh),multi:!0};function ZNe(){let r=bg()?bg().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}var QNe=new At(""),eh=(()=>{class r extends Zue{constructor(e,n,o){super(e,n),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!ZNe())}writeValue(e){let n=e??"";this.setProperty("value",n)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(n){return new(n||r)(ie(lu),ie(Ht),ie(QNe,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,o){n&1&&Oe("input",function(l){return o._handleInput(l.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(l){return o._compositionEnd(l.target.value)})},features:[Bi([KNe]),fn]})}}return r})();function pw(r){return r==null||(typeof r=="string"||Array.isArray(r))&&r.length===0}function Que(r){return r!=null&&typeof r.length=="number"}var bp=new At(""),Gk=new At(""),XNe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Dl=class{static min(i){return Xue(i)}static max(i){return Jue(i)}static required(i){return ehe(i)}static requiredTrue(i){return JNe(i)}static email(i){return e4e(i)}static minLength(i){return t4e(i)}static maxLength(i){return i4e(i)}static pattern(i){return n4e(i)}static nullValidator(i){return EN(i)}static compose(i){return she(i)}static composeAsync(i){return ahe(i)}};function Xue(r){return i=>{if(pw(i.value)||pw(r))return null;let e=parseFloat(i.value);return!isNaN(e)&&e<r?{min:{min:r,actual:i.value}}:null}}function Jue(r){return i=>{if(pw(i.value)||pw(r))return null;let e=parseFloat(i.value);return!isNaN(e)&&e>r?{max:{max:r,actual:i.value}}:null}}function ehe(r){return pw(r.value)?{required:!0}:null}function JNe(r){return r.value===!0?null:{required:!0}}function e4e(r){return pw(r.value)||XNe.test(r.value)?null:{email:!0}}function t4e(r){return i=>pw(i.value)||!Que(i.value)?null:i.value.length<r?{minlength:{requiredLength:r,actualLength:i.value.length}}:null}function i4e(r){return i=>Que(i.value)&&i.value.length>r?{maxlength:{requiredLength:r,actualLength:i.value.length}}:null}function n4e(r){if(!r)return EN;let i,e;return typeof r=="string"?(e="",r.charAt(0)!=="^"&&(e+="^"),e+=r,r.charAt(r.length-1)!=="$"&&(e+="$"),i=new RegExp(e)):(e=r.toString(),i=r),n=>{if(pw(n.value))return null;let o=n.value;return i.test(o)?null:{pattern:{requiredPattern:e,actualValue:o}}}}function EN(r){return null}function the(r){return r!=null}function ihe(r){return dw(r)?Xn(r):r}function nhe(r){let i={};return r.forEach(e=>{i=e!=null?Xe(Xe({},i),e):i}),Object.keys(i).length===0?null:i}function rhe(r,i){return i.map(e=>e(r))}function r4e(r){return!r.validate}function ohe(r){return r.map(i=>r4e(i)?i:e=>i.validate(e))}function she(r){if(!r)return null;let i=r.filter(the);return i.length==0?null:function(e){return nhe(rhe(e,i))}}function P9(r){return r!=null?she(ohe(r)):null}function ahe(r){if(!r)return null;let i=r.filter(the);return i.length==0?null:function(e){let n=rhe(e,i).map(ihe);return Ac(n).pipe($t(nhe))}}function R9(r){return r!=null?ahe(ohe(r)):null}function zue(r,i){return r===null?[i]:Array.isArray(r)?[...r,i]:[r,i]}function lhe(r){return r._rawValidators}function che(r){return r._rawAsyncValidators}function T9(r){return r?Array.isArray(r)?r:[r]:[]}function MN(r,i){return Array.isArray(r)?r.includes(i):r===i}function Gue(r,i){let e=T9(i);return T9(r).forEach(o=>{MN(e,o)||e.push(o)}),e}function Hue(r,i){return T9(i).filter(e=>!MN(r,e))}var DN=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(i){this._rawValidators=i||[],this._composedValidatorFn=P9(this._rawValidators)}_setAsyncValidators(i){this._rawAsyncValidators=i||[],this._composedAsyncValidatorFn=R9(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(i){this._onDestroyCallbacks.push(i)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(i=>i()),this._onDestroyCallbacks=[]}reset(i=void 0){this.control&&this.control.reset(i)}hasError(i,e){return this.control?this.control.hasError(i,e):!1}getError(i,e){return this.control?this.control.getError(i,e):null}},jy=class extends DN{get formDirective(){return null}get path(){return null}},du=class extends DN{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},kN=class{constructor(i){this._cd=i}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},o4e={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},tMt=li(Xe({},o4e),{"[class.ng-submitted]":"isSubmitted"}),sc=(()=>{class r extends kN{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||r)(ie(du,2))}}static{this.\u0275dir=Pt({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,o){n&2&&oi("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[fn]})}}return r})(),Ig=(()=>{class r extends kN{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||r)(ie(jy,10))}}static{this.\u0275dir=Pt({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,o){n&2&&oi("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[fn]})}}return r})();var Bk="VALID",AN="INVALID",qT="PENDING",jk="DISABLED",mw=class{},ON=class extends mw{constructor(i,e){super(),this.value=i,this.source=e}},$k=class extends mw{constructor(i,e){super(),this.pristine=i,this.source=e}},Uk=class extends mw{constructor(i,e){super(),this.touched=i,this.source=e}},YT=class extends mw{constructor(i,e){super(),this.status=i,this.source=e}},A9=class extends mw{constructor(i){super(),this.source=i}},E9=class extends mw{constructor(i){super(),this.source=i}};function F9(r){return(LN(r)?r.validators:r)||null}function s4e(r){return Array.isArray(r)?P9(r):r||null}function L9(r,i){return(LN(i)?i.asyncValidators:r)||null}function a4e(r){return Array.isArray(r)?R9(r):r||null}function LN(r){return r!=null&&!Array.isArray(r)&&typeof r=="object"}function dhe(r,i,e){let n=r.controls;if(!(i?Object.keys(n):n).length)throw new ki(1e3,"");if(!n[e])throw new ki(1001,"")}function uhe(r,i,e){r._forEachChild((n,o)=>{if(e[o]===void 0)throw new ki(1002,"")})}var KT=class{constructor(i,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Py(()=>this.statusReactive()),this.statusReactive=Vl(void 0),this._pristine=Py(()=>this.pristineReactive()),this.pristineReactive=Vl(!0),this._touched=Py(()=>this.touchedReactive()),this.touchedReactive=Vl(!1),this._events=new Dt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(i),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(i){this._rawValidators=this._composedValidatorFn=i}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(i){this._rawAsyncValidators=this._composedAsyncValidatorFn=i}get parent(){return this._parent}get status(){return vp(this.statusReactive)}set status(i){vp(()=>this.statusReactive.set(i))}get valid(){return this.status===Bk}get invalid(){return this.status===AN}get pending(){return this.status==qT}get disabled(){return this.status===jk}get enabled(){return this.status!==jk}get pristine(){return vp(this.pristineReactive)}set pristine(i){vp(()=>this.pristineReactive.set(i))}get dirty(){return!this.pristine}get touched(){return vp(this.touchedReactive)}set touched(i){vp(()=>this.touchedReactive.set(i))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(i){this._assignValidators(i)}setAsyncValidators(i){this._assignAsyncValidators(i)}addValidators(i){this.setValidators(Gue(i,this._rawValidators))}addAsyncValidators(i){this.setAsyncValidators(Gue(i,this._rawAsyncValidators))}removeValidators(i){this.setValidators(Hue(i,this._rawValidators))}removeAsyncValidators(i){this.setAsyncValidators(Hue(i,this._rawAsyncValidators))}hasValidator(i){return MN(this._rawValidators,i)}hasAsyncValidator(i){return MN(this._rawAsyncValidators,i)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(i={}){let e=this.touched===!1;this.touched=!0;let n=i.sourceControl??this;this._parent&&!i.onlySelf&&this._parent.markAsTouched(li(Xe({},i),{sourceControl:n})),e&&i.emitEvent!==!1&&this._events.next(new Uk(!0,n))}markAllAsTouched(i={}){this.markAsTouched({onlySelf:!0,emitEvent:i.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(i))}markAsUntouched(i={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=i.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:i.emitEvent,sourceControl:n})}),this._parent&&!i.onlySelf&&this._parent._updateTouched(i,n),e&&i.emitEvent!==!1&&this._events.next(new Uk(!1,n))}markAsDirty(i={}){let e=this.pristine===!0;this.pristine=!1;let n=i.sourceControl??this;this._parent&&!i.onlySelf&&this._parent.markAsDirty(li(Xe({},i),{sourceControl:n})),e&&i.emitEvent!==!1&&this._events.next(new $k(!1,n))}markAsPristine(i={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=i.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:i.emitEvent})}),this._parent&&!i.onlySelf&&this._parent._updatePristine(i,n),e&&i.emitEvent!==!1&&this._events.next(new $k(!0,n))}markAsPending(i={}){this.status=qT;let e=i.sourceControl??this;i.emitEvent!==!1&&(this._events.next(new YT(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.markAsPending(li(Xe({},i),{sourceControl:e}))}disable(i={}){let e=this._parentMarkedDirty(i.onlySelf);this.status=jk,this.errors=null,this._forEachChild(o=>{o.disable(li(Xe({},i),{onlySelf:!0}))}),this._updateValue();let n=i.sourceControl??this;i.emitEvent!==!1&&(this._events.next(new ON(this.value,n)),this._events.next(new YT(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(li(Xe({},i),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(i={}){let e=this._parentMarkedDirty(i.onlySelf);this.status=Bk,this._forEachChild(n=>{n.enable(li(Xe({},i),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent}),this._updateAncestors(li(Xe({},i),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(i,e){this._parent&&!i.onlySelf&&(this._parent.updateValueAndValidity(i),i.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(i){this._parent=i}getRawValue(){return this.value}updateValueAndValidity(i={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bk||this.status===qT)&&this._runAsyncValidator(n,i.emitEvent)}let e=i.sourceControl??this;i.emitEvent!==!1&&(this._events.next(new ON(this.value,e)),this._events.next(new YT(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.updateValueAndValidity(li(Xe({},i),{sourceControl:e}))}_updateTreeValidity(i={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(i)),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jk:Bk}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(i,e){if(this.asyncValidator){this.status=qT,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let n=ihe(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:e,shouldHaveEmitted:i})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let i=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,i}return!1}setErrors(i,e={}){this.errors=i,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(i){let e=i;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((n,o)=>n&&n._find(o),this)}getError(i,e){let n=e?this.get(e):this;return n&&n.errors?n.errors[i]:null}hasError(i,e){return!!this.getError(i,e)}get root(){let i=this;for(;i._parent;)i=i._parent;return i}_updateControlsErrors(i,e,n){this.status=this._calculateStatus(),i&&this.statusChanges.emit(this.status),(i||n)&&this._events.next(new YT(this.status,e)),this._parent&&this._parent._updateControlsErrors(i,e,n)}_initObservables(){this.valueChanges=new it,this.statusChanges=new it}_calculateStatus(){return this._allControlsDisabled()?jk:this.errors?AN:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qT)?qT:this._anyControlsHaveStatus(AN)?AN:Bk}_anyControlsHaveStatus(i){return this._anyControls(e=>e.status===i)}_anyControlsDirty(){return this._anyControls(i=>i.dirty)}_anyControlsTouched(){return this._anyControls(i=>i.touched)}_updatePristine(i,e){let n=!this._anyControlsDirty(),o=this.pristine!==n;this.pristine=n,this._parent&&!i.onlySelf&&this._parent._updatePristine(i,e),o&&this._events.next(new $k(this.pristine,e))}_updateTouched(i={},e){this.touched=this._anyControlsTouched(),this._events.next(new Uk(this.touched,e)),this._parent&&!i.onlySelf&&this._parent._updateTouched(i,e)}_registerOnCollectionChange(i){this._onCollectionChange=i}_setUpdateStrategy(i){LN(i)&&i.updateOn!=null&&(this._updateOn=i.updateOn)}_parentMarkedDirty(i){let e=this._parent&&this._parent.dirty;return!i&&!!e&&!this._parent._anyControlsDirty()}_find(i){return null}_assignValidators(i){this._rawValidators=Array.isArray(i)?i.slice():i,this._composedValidatorFn=s4e(this._rawValidators)}_assignAsyncValidators(i){this._rawAsyncValidators=Array.isArray(i)?i.slice():i,this._composedAsyncValidatorFn=a4e(this._rawAsyncValidators)}},hx=class extends KT{constructor(i,e,n){super(F9(e),L9(n,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(i,e){return this.controls[i]?this.controls[i]:(this.controls[i]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(i,e,n={}){this.registerControl(i,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(i,e,n={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],e&&this.registerControl(i,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(i){return this.controls.hasOwnProperty(i)&&this.controls[i].enabled}setValue(i,e={}){uhe(this,!0,i),Object.keys(i).forEach(n=>{dhe(this,!0,n),this.controls[n].setValue(i[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){i!=null&&(Object.keys(i).forEach(n=>{let o=this.controls[n];o&&o.patchValue(i[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i={},e={}){this._forEachChild((n,o)=>{n.reset(i?i[o]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(i,e,n)=>(i[n]=e.getRawValue(),i))}_syncPendingControls(){let i=this._reduceChildren(!1,(e,n)=>n._syncPendingControls()?!0:e);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){Object.keys(this.controls).forEach(e=>{let n=this.controls[e];n&&i(n,e)})}_setUpControls(){this._forEachChild(i=>{i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(i){for(let[e,n]of Object.entries(this.controls))if(this.contains(e)&&i(n))return!0;return!1}_reduceValue(){let i={};return this._reduceChildren(i,(e,n,o)=>((n.enabled||this.disabled)&&(e[o]=n.value),e))}_reduceChildren(i,e){let n=i;return this._forEachChild((o,s)=>{n=e(n,o,s)}),n}_allControlsDisabled(){for(let i of Object.keys(this.controls))if(this.controls[i].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(i){return this.controls.hasOwnProperty(i)?this.controls[i]:null}};var hhe=hx;var M9=class extends hx{};var ZT=new At("CallSetDisabledState",{providedIn:"root",factory:()=>NN}),NN="always";function phe(r,i){return[...i.path,r]}function zk(r,i,e=NN){N9(r,i),i.valueAccessor.writeValue(r.value),(r.disabled||e==="always")&&i.valueAccessor.setDisabledState?.(r.disabled),c4e(r,i),u4e(r,i),d4e(r,i),l4e(r,i)}function PN(r,i,e=!0){let n=()=>{};i.valueAccessor&&(i.valueAccessor.registerOnChange(n),i.valueAccessor.registerOnTouched(n)),FN(r,i),r&&(i._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function RN(r,i){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(i)})}function l4e(r,i){if(i.valueAccessor.setDisabledState){let e=n=>{i.valueAccessor.setDisabledState(n)};r.registerOnDisabledChange(e),i._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}function N9(r,i){let e=lhe(r);i.validator!==null?r.setValidators(zue(e,i.validator)):typeof e=="function"&&r.setValidators([e]);let n=che(r);i.asyncValidator!==null?r.setAsyncValidators(zue(n,i.asyncValidator)):typeof n=="function"&&r.setAsyncValidators([n]);let o=()=>r.updateValueAndValidity();RN(i._rawValidators,o),RN(i._rawAsyncValidators,o)}function FN(r,i){let e=!1;if(r!==null){if(i.validator!==null){let o=lhe(r);if(Array.isArray(o)&&o.length>0){let s=o.filter(l=>l!==i.validator);s.length!==o.length&&(e=!0,r.setValidators(s))}}if(i.asyncValidator!==null){let o=che(r);if(Array.isArray(o)&&o.length>0){let s=o.filter(l=>l!==i.asyncValidator);s.length!==o.length&&(e=!0,r.setAsyncValidators(s))}}}let n=()=>{};return RN(i._rawValidators,n),RN(i._rawAsyncValidators,n),e}function c4e(r,i){i.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,r.updateOn==="change"&&mhe(r,i)})}function d4e(r,i){i.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,r.updateOn==="blur"&&r._pendingChange&&mhe(r,i),r.updateOn!=="submit"&&r.markAsTouched()})}function mhe(r,i){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),i.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function u4e(r,i){let e=(n,o)=>{i.valueAccessor.writeValue(n),o&&i.viewToModelUpdate(n)};r.registerOnChange(e),i._registerOnDestroy(()=>{r._unregisterOnChange(e)})}function fhe(r,i){r==null,N9(r,i)}function h4e(r,i){return FN(r,i)}function B9(r,i){if(!r.hasOwnProperty("model"))return!1;let e=r.model;return e.isFirstChange()?!0:!Object.is(i,e.currentValue)}function p4e(r){return Object.getPrototypeOf(r.constructor)===k9}function ghe(r,i){r._syncPendingControls(),i.forEach(e=>{let n=e.control;n.updateOn==="submit"&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function j9(r,i){if(!i)return null;Array.isArray(i);let e,n,o;return i.forEach(s=>{s.constructor===eh?e=s:p4e(s)?n=s:o=s}),o||n||e||null}function m4e(r,i){let e=r.indexOf(i);e>-1&&r.splice(e,1)}var f4e={provide:jy,useExisting:Go(()=>fw)},Vk=Promise.resolve(),fw=(()=>{class r extends jy{get submitted(){return vp(this.submittedReactive)}constructor(e,n,o){super(),this.callSetDisabledState=o,this._submitted=Py(()=>this.submittedReactive()),this.submittedReactive=Vl(!1),this._directives=new Set,this.ngSubmit=new it,this.form=new hx({},P9(e),R9(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Vk.then(()=>{let n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),zk(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Vk.then(()=>{let n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Vk.then(()=>{let n=this._findContainer(e.path),o=new hx({});fhe(o,e),n.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Vk.then(()=>{let n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){Vk.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),ghe(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(n){return new(n||r)(ie(bp,10),ie(Gk,10),ie(ZT,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,o){n&1&&Oe("submit",function(l){return o.onSubmit(l)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Bi([f4e]),fn]})}}return r})();function Wue(r,i){let e=r.indexOf(i);e>-1&&r.splice(e,1)}function que(r){return typeof r=="object"&&r!==null&&Object.keys(r).length===2&&"value"in r&&"disabled"in r}var ux=class extends KT{constructor(i=null,e,n){super(F9(e),L9(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(i),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),LN(e)&&(e.nonNullable||e.initialValueIsDefault)&&(que(i)?this.defaultValue=i.value:this.defaultValue=i)}setValue(i,e={}){this.value=this._pendingValue=i,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(i,e={}){this.setValue(i,e)}reset(i=this.defaultValue,e={}){this._applyFormState(i),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(i){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(i){this._onChange.push(i)}_unregisterOnChange(i){Wue(this._onChange,i)}registerOnDisabledChange(i){this._onDisabledChange.push(i)}_unregisterOnDisabledChange(i){Wue(this._onDisabledChange,i)}_forEachChild(i){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(i){que(i)?(this.value=this._pendingValue=i.value,i.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=i}},QT=ux,g4e=r=>r instanceof ux;var _4e={provide:du,useExisting:Go(()=>gm)},Yue=Promise.resolve(),gm=(()=>{class r extends du{constructor(e,n,o,s,l,h){super(),this._changeDetectorRef=l,this.callSetDisabledState=h,this.control=new ux,this._registered=!1,this.name="",this.update=new it,this._parent=e,this._setValidators(n),this._setAsyncValidators(o),this.valueAccessor=j9(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),B9(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){zk(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){Yue.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let n=e.isDisabled.currentValue,o=n!==0&&Xt(n);Yue.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?phe(e,this._parent):[e]}static{this.\u0275fac=function(n){return new(n||r)(ie(jy,9),ie(bp,10),ie(Gk,10),ie(Gc,10),ie(Ti,8),ie(ZT,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Bi([_4e]),fn,Jn]})}}return r})(),Vy=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=Pt({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return r})(),y4e={provide:Gc,useExisting:Go(()=>BN),multi:!0},BN=(()=>{class r extends k9{writeValue(e){let n=e??"";this.setProperty("value",n)}registerOnChange(e){this.onChange=n=>{e(n==""?null:parseFloat(n))}}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275dir=Pt({type:r,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,o){n&1&&Oe("input",function(l){return o.onChange(l.target.value)})("blur",function(){return o.onTouched()})},features:[Bi([y4e]),fn]})}}return r})();var V9=new At(""),v4e={provide:du,useExisting:Go(()=>gw)},gw=(()=>{class r extends du{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,n,o,s,l){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=l,this.update=new it,this._ngModelWarningSent=!1,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=j9(this,o)}ngOnChanges(e){if(this._isControlChanged(e)){let n=e.form.previousValue;n&&PN(n,this,!1),zk(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}B9(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&PN(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}static{this.\u0275fac=function(n){return new(n||r)(ie(bp,10),ie(Gk,10),ie(Gc,10),ie(V9,8),ie(ZT,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Bi([v4e]),fn,Jn]})}}return r})(),b4e={provide:jy,useExisting:Go(()=>th)},th=(()=>{class r extends jy{get submitted(){return vp(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}constructor(e,n,o){super(),this.callSetDisabledState=o,this._submitted=Py(()=>this._submittedReactive()),this._submittedReactive=Vl(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new it,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(FN(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let n=this.form.get(e.path);return zk(n,e,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){PN(e.control||null,e,!1),m4e(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this._submittedReactive.set(!0),ghe(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new A9(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new E9(this.form))}_updateDomValue(){this.directives.forEach(e=>{let n=e.control,o=this.form.get(e.path);n!==o&&(PN(n||null,e),g4e(o)&&(zk(o,e,this.callSetDisabledState),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let n=this.form.get(e.path);fhe(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let n=this.form.get(e.path);n&&h4e(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){N9(this.form,this),this._oldForm&&FN(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(n){return new(n||r)(ie(bp,10),ie(Gk,10),ie(ZT,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["","formGroup",""]],hostBindings:function(n,o){n&1&&Oe("submit",function(l){return o.onSubmit(l)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Bi([b4e]),fn,Jn]})}}return r})();var w4e={provide:du,useExisting:Go(()=>Tg)},Tg=(()=>{class r extends du{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,n,o,s,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.name=null,this.update=new it,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(n),this._setAsyncValidators(o),this.valueAccessor=j9(this,s)}ngOnChanges(e){this._added||this._setUpControl(),B9(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return phe(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(n){return new(n||r)(ie(jy,13),ie(bp,10),ie(Gk,10),ie(Gc,10),ie(V9,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Bi([w4e]),fn,Jn]})}}return r})();function _he(r){return typeof r=="number"?r:parseFloat(r)}var $9=(()=>{class r{constructor(){this._validator=EN}ngOnChanges(e){if(this.inputName in e){let n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):EN,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=Pt({type:r,features:[Jn]})}}return r})(),C4e={provide:bp,useExisting:Go(()=>U9),multi:!0},U9=(()=>{class r extends $9{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=e=>_he(e),this.createValidator=e=>Jue(e)}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275dir=Pt({type:r,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(n,o){n&2&&yi("max",o._enabled?o.max:null)},inputs:{max:"max"},features:[Bi([C4e]),fn]})}}return r})(),x4e={provide:bp,useExisting:Go(()=>jN),multi:!0},jN=(()=>{class r extends $9{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>_he(e),this.createValidator=e=>Xue(e)}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275dir=Pt({type:r,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(n,o){n&2&&yi("min",o._enabled?o.min:null)},inputs:{min:"min"},features:[Bi([x4e]),fn]})}}return r})(),S4e={provide:bp,useExisting:Go(()=>Ag),multi:!0};var Ag=(()=>{class r extends $9{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Xt,this.createValidator=e=>ehe}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275dir=Pt({type:r,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,o){n&2&&yi("required",o._enabled?"":null)},inputs:{required:"required"},features:[Bi([S4e]),fn]})}}return r})();var yhe=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({})}}return r})(),D9=class extends KT{constructor(i,e,n){super(F9(e),L9(n,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(i){return this.controls[this._adjustIndex(i)]}push(i,e={}){this.controls.push(i),this._registerControl(i),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(i,e,n={}){this.controls.splice(i,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(i,e={}){let n=this._adjustIndex(i);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(i,e,n={}){let o=this._adjustIndex(i);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),e&&(this.controls.splice(o,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(i,e={}){uhe(this,!1,i),i.forEach((n,o)=>{dhe(this,!1,o),this.at(o).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){i!=null&&(i.forEach((n,o)=>{this.at(o)&&this.at(o).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i=[],e={}){this._forEachChild((n,o)=>{n.reset(i[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(i=>i.getRawValue())}clear(i={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:i.emitEvent}))}_adjustIndex(i){return i<0?i+this.length:i}_syncPendingControls(){let i=this.controls.reduce((e,n)=>n._syncPendingControls()?!0:e,!1);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){this.controls.forEach((e,n)=>{i(e,n)})}_updateValue(){this.value=this.controls.filter(i=>i.enabled||this.disabled).map(i=>i.value)}_anyControls(i){return this.controls.some(e=>e.enabled&&i(e))}_setUpControls(){this._forEachChild(i=>this._registerControl(i))}_allControlsDisabled(){for(let i of this.controls)if(i.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(i){i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)}_find(i){return this.at(i)??null}};function Kue(r){return!!r&&(r.asyncValidators!==void 0||r.validators!==void 0||r.updateOn!==void 0)}var I4e=(()=>{class r{constructor(){this.useNonNullable=!1}get nonNullable(){let e=new r;return e.useNonNullable=!0,e}group(e,n=null){let o=this._reduceControls(e),s={};return Kue(n)?s=n:n!==null&&(s.validators=n.validator,s.asyncValidators=n.asyncValidator),new hx(o,s)}record(e,n=null){let o=this._reduceControls(e);return new M9(o,n)}control(e,n,o){let s={};return this.useNonNullable?(Kue(n)?s=n:(s.validators=n,s.asyncValidators=o),new ux(e,li(Xe({},s),{nonNullable:!0}))):new ux(e,n,o)}array(e,n,o){let s=e.map(l=>this._createControl(l));return new D9(s,n,o)}_reduceControls(e){let n={};return Object.keys(e).forEach(o=>{n[o]=this._createControl(e[o])}),n}_createControl(e){if(e instanceof ux)return e;if(e instanceof KT)return e;if(Array.isArray(e)){let n=e[0],o=e.length>1?e[1]:null,s=e.length>2?e[2]:null;return this.control(n,o,s)}else return this.control(e)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var r_=(()=>{class r extends I4e{group(e,n=null){return super.group(e,n)}control(e,n,o){return super.control(e,n,o)}array(e,n,o){return super.array(e,n,o)}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var $l=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:ZT,useValue:e.callSetDisabledState??NN}]}}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[yhe]})}}return r})(),uu=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:V9,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:ZT,useValue:e.callSetDisabledState??NN}]}}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[yhe]})}}return r})();var G9;try{G9=typeof Intl<"u"&&Intl.v8BreakIterator}catch{G9=!1}var Hn=(()=>{class r{constructor(e){this._platformId=e,this.isBrowser=this._platformId?rx(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||G9)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(n){return new(n||r)(xe(Qu))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var XT,vhe=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function H9(){if(XT)return XT;if(typeof document!="object"||!document)return XT=new Set(vhe),XT;let r=document.createElement("input");return XT=new Set(vhe.filter(i=>(r.setAttribute("type",i),r.type===i))),XT}var Hk;function T4e(){if(Hk==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Hk=!0}))}finally{Hk=Hk||!1}return Hk}function Ul(r){return T4e()?r:!!r.capture}var Eg=function(r){return r[r.NORMAL=0]="NORMAL",r[r.NEGATED=1]="NEGATED",r[r.INVERTED=2]="INVERTED",r}(Eg||{}),VN,px;function $N(){if(px==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return px=!1,px;if("scrollBehavior"in document.documentElement.style)px=!0;else{let r=Element.prototype.scrollTo;r?px=!/\{\s*\[native code\]\s*\}/.test(r.toString()):px=!1}}return px}function JT(){if(typeof document!="object"||!document)return Eg.NORMAL;if(VN==null){let r=document.createElement("div"),i=r.style;r.dir="rtl",i.width="1px",i.overflow="auto",i.visibility="hidden",i.pointerEvents="none",i.position="absolute";let e=document.createElement("div"),n=e.style;n.width="2px",n.height="1px",r.appendChild(e),document.body.appendChild(r),VN=Eg.NORMAL,r.scrollLeft===0&&(r.scrollLeft=1,VN=r.scrollLeft===0?Eg.NEGATED:Eg.INVERTED),r.remove()}return VN}var z9;function A4e(){if(z9==null){let r=typeof document<"u"?document.head:null;z9=!!(r&&(r.createShadowRoot||r.attachShadow))}return z9}function eA(r){if(A4e()){let i=r.getRootNode?r.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&i instanceof ShadowRoot)return i}return null}function yw(){let r=typeof document<"u"&&document?document.activeElement:null;for(;r&&r.shadowRoot;){let i=r.shadowRoot.activeElement;if(i===r)break;r=i}return r}function Hc(r){return r.composedPath?r.composedPath()[0]:r.target}function Wk(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function gs(r,...i){return i.length?i.some(e=>r[e]):r.altKey||r.shiftKey||r.ctrlKey||r.metaKey}function tl(r){return r!=null&&`${r}`!="false"}function pd(r,i=0){return W9(r)?Number(r):arguments.length===2?i:0}function W9(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}function vw(r){return Array.isArray(r)?r:[r]}function Ec(r){return r==null?"":typeof r=="string"?r:`${r}px`}function ac(r){return r instanceof Ht?r.nativeElement:r}function bhe(r,i=/\s+/){let e=[];if(r!=null){let n=Array.isArray(r)?r:`${r}`.split(i);for(let o of n){let s=`${o}`.trim();s&&e.push(s)}}return e}function E4e(r){if(r.type==="characterData"&&r.target instanceof Comment)return!0;if(r.type==="childList"){for(let i=0;i<r.addedNodes.length;i++)if(!(r.addedNodes[i]instanceof Comment))return!1;for(let i=0;i<r.removedNodes.length;i++)if(!(r.removedNodes[i]instanceof Comment))return!1;return!0}return!1}var whe=(()=>{class r{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),M4e=(()=>{class r{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map,this._ngZone=Et(ci)}ngOnDestroy(){this._observedElements.forEach((e,n)=>this._cleanupObserver(n))}observe(e){let n=ac(e);return new si(o=>{let l=this._observeElement(n).pipe($t(h=>h.filter(p=>!E4e(p))),mn(h=>!!h.length)).subscribe(h=>{this._ngZone.run(()=>{o.next(h)})});return()=>{l.unsubscribe(),this._unobserveElement(n)}})}_observeElement(e){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(e))this._observedElements.get(e).count++;else{let n=new Dt,o=this._mutationObserverFactory.create(s=>n.next(s));o&&o.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:o,stream:n,count:1})}return this._observedElements.get(e).stream})}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){let{observer:n,stream:o}=this._observedElements.get(e);n&&n.disconnect(),o.complete(),this._observedElements.delete(e)}}static{this.\u0275fac=function(n){return new(n||r)(xe(whe))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),UN=(()=>{class r{get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=pd(e),this._subscribe()}constructor(e,n){this._contentObserver=e,this._elementRef=n,this.event=new it,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let e=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?e.pipe(cr(this.debounce)):e).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}static{this.\u0275fac=function(n){return new(n||r)(ie(M4e),ie(Ht))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",Xt],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"],standalone:!0,features:[an]})}}return r})(),tA=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({providers:[whe]})}}return r})();var Che=new Set,mx,D4e=(()=>{class r{constructor(e,n){this._platform=e,this._nonce=n,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):O4e}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&k4e(e,this._nonce),this._matchMedia(e)}static{this.\u0275fac=function(n){return new(n||r)(xe(Hn),xe(JD,8))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function k4e(r,i){if(!Che.has(r))try{mx||(mx=document.createElement("style"),i&&mx.setAttribute("nonce",i),mx.setAttribute("type","text/css"),document.head.appendChild(mx)),mx.sheet&&(mx.sheet.insertRule(`@media ${r} {body{ }}`,0),Che.add(r))}catch(e){console.error(e)}}function O4e(r){return{matches:r==="all"||r==="",media:r,addListener:()=>{},removeListener:()=>{}}}var iA=(()=>{class r{constructor(e,n){this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new Dt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return xhe(vw(e)).some(o=>this._registerQuery(o).mql.matches)}observe(e){let o=xhe(vw(e)).map(l=>this._registerQuery(l).observable),s=ts(o);return s=Bh(s.pipe(Tn(1)),s.pipe(zd(1),cr(0))),s.pipe($t(l=>{let h={matches:!1,breakpoints:{}};return l.forEach(({matches:p,query:m})=>{h.matches=h.matches||p,h.breakpoints[m]=p}),h}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let n=this._mediaMatcher.matchMedia(e),s={observable:new si(l=>{let h=p=>this._zone.run(()=>l.next(p));return n.addListener(h),()=>{n.removeListener(h)}}).pipe(yo(n),$t(({matches:l})=>({query:e,matches:l})),rn(this._destroySubject)),mql:n};return this._queries.set(e,s),s}static{this.\u0275fac=function(n){return new(n||r)(xe(D4e),xe(ci))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function xhe(r){return r.map(i=>i.split(",")).reduce((i,e)=>i.concat(e)).map(i=>i.trim())}var $y={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var Ehe=" ";function aA(r,i,e){let n=WN(r,i);e=e.trim(),!n.some(o=>o.trim()===e)&&(n.push(e),r.setAttribute(i,n.join(Ehe)))}function ww(r,i,e){let n=WN(r,i);e=e.trim();let o=n.filter(s=>s!==e);o.length?r.setAttribute(i,o.join(Ehe)):r.removeAttribute(i)}function WN(r,i){return r.getAttribute(i)?.match(/\S+/g)??[]}var Mhe="cdk-describedby-message",zN="cdk-describedby-host",K9=0,lA=(()=>{class r{constructor(e,n){this._platform=n,this._messageRegistry=new Map,this._messagesContainer=null,this._id=`${K9++}`,this._document=e,this._id=Et(OT)+"-"+K9++}describe(e,n,o){if(!this._canBeDescribed(e,n))return;let s=q9(n,o);typeof n!="string"?(She(n,this._id),this._messageRegistry.set(s,{messageElement:n,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(n,o),this._isElementDescribedByMessage(e,s)||this._addMessageReference(e,s)}removeDescription(e,n,o){if(!n||!this._isElementNode(e))return;let s=q9(n,o);if(this._isElementDescribedByMessage(e,s)&&this._removeMessageReference(e,s),typeof n=="string"){let l=this._messageRegistry.get(s);l&&l.referenceCount===0&&this._deleteMessageElement(s)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let e=this._document.querySelectorAll(`[${zN}="${this._id}"]`);for(let n=0;n<e.length;n++)this._removeCdkDescribedByReferenceIds(e[n]),e[n].removeAttribute(zN);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,n){let o=this._document.createElement("div");She(o,this._id),o.textContent=e,n&&o.setAttribute("role",n),this._createMessagesContainer(),this._messagesContainer.appendChild(o),this._messageRegistry.set(q9(e,n),{messageElement:o,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;let e="cdk-describedby-message-container",n=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let s=0;s<n.length;s++)n[s].remove();let o=this._document.createElement("div");o.style.visibility="hidden",o.classList.add(e),o.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&o.setAttribute("platform","server"),this._document.body.appendChild(o),this._messagesContainer=o}_removeCdkDescribedByReferenceIds(e){let n=WN(e,"aria-describedby").filter(o=>o.indexOf(Mhe)!=0);e.setAttribute("aria-describedby",n.join(" "))}_addMessageReference(e,n){let o=this._messageRegistry.get(n);aA(e,"aria-describedby",o.messageElement.id),e.setAttribute(zN,this._id),o.referenceCount++}_removeMessageReference(e,n){let o=this._messageRegistry.get(n);o.referenceCount--,ww(e,"aria-describedby",o.messageElement.id),e.removeAttribute(zN)}_isElementDescribedByMessage(e,n){let o=WN(e,"aria-describedby"),s=this._messageRegistry.get(n),l=s&&s.messageElement.id;return!!l&&o.indexOf(l)!=-1}_canBeDescribed(e,n){if(!this._isElementNode(e))return!1;if(n&&typeof n=="object")return!0;let o=n==null?"":`${n}`.trim(),s=e.getAttribute("aria-label");return o?!s||s.trim()!==o:!1}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}static{this.\u0275fac=function(n){return new(n||r)(xe(Ui),xe(Hn))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function q9(r,i){return typeof r=="string"?`${i||""}/${r}`:r}function She(r,i){r.id||(r.id=`${Mhe}-${i}-${K9++}`)}var U4e=200,Z9=class{constructor(i,e){this._letterKeyStream=new Dt,this._items=[],this._selectedItemIndex=-1,this._pressedLetters=[],this._selectedItem=new Dt,this.selectedItem=this._selectedItem;let n=typeof e?.debounceInterval=="number"?e.debounceInterval:U4e;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(i),this._setupKeyHandler(n)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(i){this._selectedItemIndex=i}setItems(i){this._items=i}handleKey(i){let e=i.keyCode;i.key&&i.key.length===1?this._letterKeyStream.next(i.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(i){this._letterKeyStream.pipe(br(e=>this._pressedLetters.push(e)),cr(i),mn(()=>this._pressedLetters.length>0),$t(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let n=1;n<this._items.length+1;n++){let o=(this._selectedItemIndex+n)%this._items.length,s=this._items[o];if(!this._skipPredicateFn?.(s)&&s.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(s);break}}this._pressedLetters=[]})}},qN=class{constructor(i,e){this._items=i,this._activeItemIndex=-1,this._activeItem=Vl(null),this._wrap=!1,this._typeaheadSubscription=pn.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=n=>n.disabled,this.tabOut=new Dt,this.change=new Dt,i instanceof _p?this._itemChangesSubscription=i.changes.subscribe(n=>this._itemsChanged(n.toArray())):G3(i)&&(this._effectRef=dk(()=>this._itemsChanged(i()),{injector:e}))}skipPredicate(i){return this._skipPredicateFn=i,this}withWrap(i=!0){return this._wrap=i,this}withVerticalOrientation(i=!0){return this._vertical=i,this}withHorizontalOrientation(i){return this._horizontal=i,this}withAllowedModifierKeys(i){return this._allowedModifierKeys=i,this}withTypeAhead(i=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new Z9(e,{debounceInterval:typeof i=="number"?i:void 0,skipPredicate:n=>this._skipPredicateFn(n)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(n=>{this.setActiveItem(n)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(i=!0){return this._homeAndEnd=i,this}withPageUpDown(i=!0,e=10){return this._pageUpAndDown={enabled:i,delta:e},this}setActiveItem(i){let e=this._activeItem();this.updateActiveItem(i),this._activeItem()!==e&&this.change.next(this._activeItemIndex)}onKeydown(i){let e=i.keyCode,o=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!i[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&o){this.setNextItemActive();break}else return;case 38:if(this._vertical&&o){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&o){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&o){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&o){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&o){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&o){let s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&o){let s=this._activeItemIndex+this._pageUpAndDown.delta,l=this._getItemsArray().length;this._setActiveItemByIndex(s<l?s:l-1,-1);break}else return;default:(o||gs(i,"shiftKey"))&&this._typeahead?.handleKey(i);return}this._typeahead?.reset(),i.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(i){let e=this._getItemsArray(),n=typeof i=="number"?i:e.indexOf(i),o=e[n];this._activeItem.set(o??null),this._activeItemIndex=n,this._typeahead?.setCurrentSelectedItemIndex(n)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(i){this._wrap?this._setActiveInWrapMode(i):this._setActiveInDefaultMode(i)}_setActiveInWrapMode(i){let e=this._getItemsArray();for(let n=1;n<=e.length;n++){let o=(this._activeItemIndex+i*n+e.length)%e.length,s=e[o];if(!this._skipPredicateFn(s)){this.setActiveItem(o);return}}}_setActiveInDefaultMode(i){this._setActiveItemByIndex(this._activeItemIndex+i,i)}_setActiveItemByIndex(i,e){let n=this._getItemsArray();if(n[i]){for(;this._skipPredicateFn(n[i]);)if(i+=e,!n[i])return;this.setActiveItem(i)}}_getItemsArray(){return G3(this._items)?this._items():this._items instanceof _p?this._items.toArray():this._items}_itemsChanged(i){this._typeahead?.setItems(i);let e=this._activeItem();if(e){let n=i.indexOf(e);n>-1&&n!==this._activeItemIndex&&(this._activeItemIndex=n,this._typeahead?.setCurrentSelectedItemIndex(n))}}},rA=class extends qN{setActiveItem(i){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(i),this.activeItem&&this.activeItem.setActiveStyles()}},bw=class extends qN{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(i){return this._origin=i,this}setActiveItem(i){super.setActiveItem(i),this.activeItem&&this.activeItem.focus(this._origin)}};var Uy=(()=>{class r{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return G4e(e)&&getComputedStyle(e).visibility==="visible"}isTabbable(e){if(!this._platform.isBrowser)return!1;let n=z4e(X4e(e));if(n&&(Ihe(n)===-1||!this.isVisible(n)))return!1;let o=e.nodeName.toLowerCase(),s=Ihe(e);return e.hasAttribute("contenteditable")?s!==-1:o==="iframe"||o==="object"||this._platform.WEBKIT&&this._platform.IOS&&!Z4e(e)?!1:o==="audio"?e.hasAttribute("controls")?s!==-1:!1:o==="video"?s===-1?!1:s!==null?!0:this._platform.FIREFOX||e.hasAttribute("controls"):e.tabIndex>=0}isFocusable(e,n){return Q4e(e)&&!this.isDisabled(e)&&(n?.ignoreVisibility||this.isVisible(e))}static{this.\u0275fac=function(n){return new(n||r)(xe(Hn))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function z4e(r){try{return r.frameElement}catch{return null}}function G4e(r){return!!(r.offsetWidth||r.offsetHeight||typeof r.getClientRects=="function"&&r.getClientRects().length)}function H4e(r){let i=r.nodeName.toLowerCase();return i==="input"||i==="select"||i==="button"||i==="textarea"}function W4e(r){return Y4e(r)&&r.type=="hidden"}function q4e(r){return K4e(r)&&r.hasAttribute("href")}function Y4e(r){return r.nodeName.toLowerCase()=="input"}function K4e(r){return r.nodeName.toLowerCase()=="a"}function Dhe(r){if(!r.hasAttribute("tabindex")||r.tabIndex===void 0)return!1;let i=r.getAttribute("tabindex");return!!(i&&!isNaN(parseInt(i,10)))}function Ihe(r){if(!Dhe(r))return null;let i=parseInt(r.getAttribute("tabindex")||"",10);return isNaN(i)?-1:i}function Z4e(r){let i=r.nodeName.toLowerCase(),e=i==="input"&&r.type;return e==="text"||e==="password"||i==="select"||i==="textarea"}function Q4e(r){return W4e(r)?!1:H4e(r)||q4e(r)||r.hasAttribute("contenteditable")||Dhe(r)}function X4e(r){return r.ownerDocument&&r.ownerDocument.defaultView||window}var Q9=class{get enabled(){return this._enabled}set enabled(i){this._enabled=i,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(i,this._startAnchor),this._toggleAnchorTabIndex(i,this._endAnchor))}constructor(i,e,n,o,s=!1,l){this._element=i,this._checker=e,this._ngZone=n,this._document=o,this._injector=l,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let i=this._startAnchor,e=this._endAnchor;i&&(i.removeEventListener("focus",this.startAnchorListener),i.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(i){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(i)))})}focusFirstTabbableElementWhenReady(i){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(i)))})}focusLastTabbableElementWhenReady(i){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(i)))})}_getRegionBoundary(i){let e=this._element.querySelectorAll(`[cdk-focus-region-${i}], [cdkFocusRegion${i}], [cdk-focus-${i}]`);return i=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(i){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let n=this._getFirstTabbableElement(e);return n?.focus(i),!!n}return e.focus(i),!0}return this.focusFirstTabbableElement(i)}focusFirstTabbableElement(i){let e=this._getRegionBoundary("start");return e&&e.focus(i),!!e}focusLastTabbableElement(i){let e=this._getRegionBoundary("end");return e&&e.focus(i),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(i){if(this._checker.isFocusable(i)&&this._checker.isTabbable(i))return i;let e=i.children;for(let n=0;n<e.length;n++){let o=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(o)return o}return null}_getLastTabbableElement(i){if(this._checker.isFocusable(i)&&this._checker.isTabbable(i))return i;let e=i.children;for(let n=e.length-1;n>=0;n--){let o=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(o)return o}return null}_createAnchor(){let i=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,i),i.classList.add("cdk-visually-hidden"),i.classList.add("cdk-focus-trap-anchor"),i.setAttribute("aria-hidden","true"),i}_toggleAnchorTabIndex(i,e){i?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(i){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(i,this._startAnchor),this._toggleAnchorTabIndex(i,this._endAnchor))}_executeOnStable(i){this._injector?ks(i,{injector:this._injector}):setTimeout(i)}},gx=(()=>{class r{constructor(e,n,o){this._checker=e,this._ngZone=n,this._injector=Et(yn),this._document=o}create(e,n=!1){return new Q9(e,this._checker,this._ngZone,this._document,n,this._injector)}static{this.\u0275fac=function(n){return new(n||r)(xe(Uy),xe(ci),xe(Ui))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),khe=(()=>{class r{get enabled(){return this.focusTrap?.enabled||!1}set enabled(e){this.focusTrap&&(this.focusTrap.enabled=e)}constructor(e,n,o){this._elementRef=e,this._focusTrapFactory=n,this._previouslyFocusedElement=null,Et(Hn).isBrowser&&(this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0))}ngOnDestroy(){this.focusTrap?.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap?.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap&&!this.focusTrap.hasAttached()&&this.focusTrap.attachAnchors()}ngOnChanges(e){let n=e.autoCapture;n&&!n.firstChange&&this.autoCapture&&this.focusTrap?.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=yw(),this.focusTrap?.focusInitialElementWhenReady()}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(gx),ie(Ui))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:[2,"cdkTrapFocus","enabled",Xt],autoCapture:[2,"cdkTrapFocusAutoCapture","autoCapture",Xt]},exportAs:["cdkTrapFocus"],standalone:!0,features:[an,Jn]})}}return r})();function _x(r){return r.buttons===0||r.detail===0}function yx(r){let i=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!!i&&i.identifier===-1&&(i.radiusX==null||i.radiusX===1)&&(i.radiusY==null||i.radiusY===1)}var J4e=new At("cdk-input-modality-detector-options"),eBe={ignoreKeys:[18,17,224,91,16]},Ohe=650,nA=Ul({passive:!0,capture:!0}),tBe=(()=>{class r{get mostRecentModality(){return this._modality.value}constructor(e,n,o,s){this._platform=e,this._mostRecentTarget=null,this._modality=new mt(null),this._lastTouchMs=0,this._onKeydown=l=>{this._options?.ignoreKeys?.some(h=>h===l.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Hc(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<Ohe||(this._modality.next(_x(l)?"keyboard":"mouse"),this._mostRecentTarget=Hc(l))},this._onTouchstart=l=>{if(yx(l)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Hc(l)},this._options=Xe(Xe({},eBe),s),this.modalityDetected=this._modality.pipe(zd(1)),this.modalityChanged=this.modalityDetected.pipe(cm()),e.isBrowser&&n.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,nA),o.addEventListener("mousedown",this._onMousedown,nA),o.addEventListener("touchstart",this._onTouchstart,nA)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,nA),document.removeEventListener("mousedown",this._onMousedown,nA),document.removeEventListener("touchstart",this._onTouchstart,nA))}static{this.\u0275fac=function(n){return new(n||r)(xe(Hn),xe(ci),xe(Ui),xe(J4e,8))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),iBe=new At("liveAnnouncerElement",{providedIn:"root",factory:nBe});function nBe(){return null}var rBe=new At("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),oBe=0,Phe=(()=>{class r{constructor(e,n,o,s){this._ngZone=n,this._defaultOptions=s,this._document=o,this._liveElement=e||this._createLiveElement()}announce(e,...n){let o=this._defaultOptions,s,l;return n.length===1&&typeof n[0]=="number"?l=n[0]:[s,l]=n,this.clear(),clearTimeout(this._previousTimeout),s||(s=o&&o.politeness?o.politeness:"polite"),l==null&&o&&(l=o.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(h=>this._currentResolve=h)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,typeof l=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),l)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let e="cdk-live-announcer-element",n=this._document.getElementsByClassName(e),o=this._document.createElement("div");for(let s=0;s<n.length;s++)n[s].remove();return o.classList.add(e),o.classList.add("cdk-visually-hidden"),o.setAttribute("aria-atomic","true"),o.setAttribute("aria-live","polite"),o.id=`cdk-live-announcer-${oBe++}`,this._document.body.appendChild(o),o}_exposeAnnouncerToModals(e){let n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<n.length;o++){let s=n[o],l=s.getAttribute("aria-owns");l?l.indexOf(e)===-1&&s.setAttribute("aria-owns",l+" "+e):s.setAttribute("aria-owns",e)}}static{this.\u0275fac=function(n){return new(n||r)(xe(iBe,8),xe(ci),xe(Ui),xe(rBe,8))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var HN=function(r){return r[r.IMMEDIATE=0]="IMMEDIATE",r[r.EVENTUAL=1]="EVENTUAL",r}(HN||{}),sBe=new At("cdk-focus-monitor-default-options"),GN=Ul({passive:!0,capture:!0}),il=(()=>{class r{constructor(e,n,o,s,l){this._ngZone=e,this._platform=n,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Dt,this._rootNodeFocusAndBlurListener=h=>{let p=Hc(h);for(let m=p;m;m=m.parentElement)h.type==="focus"?this._onFocus(h,m):this._onBlur(h,m)},this._document=s,this._detectionMode=l?.detectionMode||HN.IMMEDIATE}monitor(e,n=!1){let o=ac(e);if(!this._platform.isBrowser||o.nodeType!==1)return Vt();let s=eA(o)||this._getDocument(),l=this._elementInfo.get(o);if(l)return n&&(l.checkChildren=!0),l.subject;let h={checkChildren:n,subject:new Dt,rootNode:s};return this._elementInfo.set(o,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(e){let n=ac(e),o=this._elementInfo.get(n);o&&(o.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(o))}focusVia(e,n,o){let s=ac(e),l=this._getDocument().activeElement;s===l?this._getClosestElementsInfo(s).forEach(([h,p])=>this._originChanged(h,n,p)):(this._setOrigin(n),typeof s.focus=="function"&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===HN.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,n){e.classList.toggle("cdk-focused",!!n),e.classList.toggle("cdk-touch-focused",n==="touch"),e.classList.toggle("cdk-keyboard-focused",n==="keyboard"),e.classList.toggle("cdk-mouse-focused",n==="mouse"),e.classList.toggle("cdk-program-focused",n==="program")}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&n,this._detectionMode===HN.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?Ohe:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(e,n){let o=this._elementInfo.get(n),s=Hc(e);!o||!o.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),o)}_onBlur(e,n){let o=this._elementInfo.get(n);!o||o.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(o,null))}_emitOrigin(e,n){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let n=e.rootNode,o=this._rootNodeFocusListenerCount.get(n)||0;o||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,GN),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,GN)}),this._rootNodeFocusListenerCount.set(n,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(rn(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){let n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){let o=this._rootNodeFocusListenerCount.get(n);o>1?this._rootNodeFocusListenerCount.set(n,o-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,GN),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,GN),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,o){this._setClasses(e,n),this._emitOrigin(o,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){let n=[];return this._elementInfo.forEach((o,s)=>{(s===e||o.checkChildren&&s.contains(e))&&n.push([s,o])}),n}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:n,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!n||n===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let s=e.labels;if(s){for(let l=0;l<s.length;l++)if(s[l].contains(n))return!0}return!1}static{this.\u0275fac=function(n){return new(n||r)(xe(ci),xe(Hn),xe(tBe),xe(Ui,8),xe(sBe,8))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),YN=(()=>{class r{constructor(e,n){this._elementRef=e,this._focusMonitor=n,this._focusOrigin=null,this.cdkFocusChange=new it}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,e.nodeType===1&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(n=>{this._focusOrigin=n,this.cdkFocusChange.emit(n)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(il))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"],standalone:!0})}}return r})(),fx=function(r){return r[r.NONE=0]="NONE",r[r.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",r[r.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",r}(fx||{}),The="cdk-high-contrast-black-on-white",Ahe="cdk-high-contrast-white-on-black",Y9="cdk-high-contrast-active",eW=(()=>{class r{constructor(e,n){this._platform=e,this._document=n,this._breakpointSubscription=Et(iA).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return fx.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let n=this._document.defaultView||window,o=n&&n.getComputedStyle?n.getComputedStyle(e):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return fx.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return fx.BLACK_ON_WHITE}return fx.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(Y9,The,Ahe),this._hasCheckedHighContrastMode=!0;let n=this.getHighContrastMode();n===fx.BLACK_ON_WHITE?e.add(Y9,The):n===fx.WHITE_ON_BLACK&&e.add(Y9,Ahe)}}static{this.\u0275fac=function(n){return new(n||r)(xe(Hn),xe(Ui))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Cw=(()=>{class r{constructor(e){e._applyBodyHighContrastModeCssClasses()}static{this.\u0275fac=function(n){return new(n||r)(xe(eW))}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[tA]})}}return r})();var aBe=new At("cdk-dir-doc",{providedIn:"root",factory:lBe});function lBe(){return Et(Ui)}var cBe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function dBe(r){let i=r?.toLowerCase()||"";return i==="auto"&&typeof navigator<"u"&&navigator?.language?cBe.test(navigator.language)?"rtl":"ltr":i==="rtl"?"rtl":"ltr"}var To=(()=>{class r{constructor(e){if(this.value="ltr",this.change=new it,e){let n=e.body?e.body.dir:null,o=e.documentElement?e.documentElement.dir:null;this.value=dBe(n||o||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(n){return new(n||r)(xe(aBe,8))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var xw=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({})}}return r})();var uBe=["*",[["mat-option"],["ng-container"]]],hBe=["*","mat-option, ng-container"],pBe=["text"],mBe=[[["mat-icon"]],"*"],fBe=["mat-icon","*"];function gBe(r,i){if(r&1&&wt(0,"mat-pseudo-checkbox",1),r&2){let e=ae();ee("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function _Be(r,i){if(r&1&&wt(0,"mat-pseudo-checkbox",3),r&2){let e=ae();ee("disabled",e.disabled)}}function yBe(r,i){if(r&1&&(ne(0,"span",4),Ye(1),ce()),r&2){let e=ae();q(),Qt("(",e.group.label,")")}}var vBe=["mat-internal-form-field",""],bBe=["*"];var Uhe=(()=>{class r{static{this.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)"}static{this.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)"}static{this.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)"}static{this.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)"}}return r})(),zhe=(()=>{class r{static{this.COMPLEX="375ms"}static{this.ENTERING="225ms"}static{this.EXITING="195ms"}}return r})();function wBe(){return!0}var CBe=new At("mat-sanity-checks",{providedIn:"root",factory:wBe}),on=(()=>{class r{constructor(e,n,o){this._sanityChecks=n,this._document=o,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return Wk()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[e]}static{this.\u0275fac=function(n){return new(n||r)(xe(eW),xe(CBe,8),xe(Ui))}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[xw,xw]})}}return r})();var Sw=class{constructor(i,e,n,o,s){this._defaultMatcher=i,this.ngControl=e,this._parentFormGroup=n,this._parentForm=o,this._stateChanges=s,this.errorState=!1}updateErrorState(){let i=this.errorState,e=this._parentFormGroup||this._parentForm,n=this.matcher||this._defaultMatcher,o=this.ngControl?this.ngControl.control:null,s=n?.isErrorState(o,e)??!1;s!==i&&(this.errorState=s,this._stateChanges.next())}};var cA=new At("MAT_DATE_LOCALE",{providedIn:"root",factory:xBe});function xBe(){return Et(ck)}var zl=class{constructor(){this._localeChanges=new Dt,this.localeChanges=this._localeChanges}getValidDateOrNull(i){return this.isDateInstance(i)&&this.isValid(i)?i:null}deserialize(i){return i==null||this.isDateInstance(i)&&this.isValid(i)?i:this.invalid()}setLocale(i){this.locale=i,this._localeChanges.next()}compareDate(i,e){return this.getYear(i)-this.getYear(e)||this.getMonth(i)-this.getMonth(e)||this.getDate(i)-this.getDate(e)}sameDate(i,e){if(i&&e){let n=this.isValid(i),o=this.isValid(e);return n&&o?!this.compareDate(i,e):n==o}return i==e}clampDate(i,e,n){return e&&this.compareDate(i,e)<0?e:n&&this.compareDate(i,n)>0?n:i}},o_=new At("mat-date-formats"),SBe=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function tW(r,i){let e=Array(r);for(let n=0;n<r;n++)e[n]=i(n);return e}var IBe=(()=>{class r extends zl{constructor(e){super(),this.useUtcForDisplay=!1,this._matDateLocale=Et(cA,{optional:!0}),e!==void 0&&(this._matDateLocale=e),super.setLocale(this._matDateLocale)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){let n=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return tW(12,o=>this._format(n,new Date(2017,o,1)))}getDateNames(){let e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return tW(31,n=>this._format(e,new Date(2017,0,n+1)))}getDayOfWeekNames(e){let n=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return tW(7,o=>this._format(n,new Date(2017,0,o+1)))}getYearName(e){let n=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(n,e)}getFirstDayOfWeek(){if(typeof Intl<"u"&&Intl.Locale){let e=new Intl.Locale(this.locale),n=(e.getWeekInfo?.()||e.weekInfo)?.firstDay??0;return n===7?0:n}return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,n,o){let s=this._createDateWithOverflow(e,n,o);return s.getMonth()!=n,s}today(){return new Date}parse(e,n){return typeof e=="number"?new Date(e):e?new Date(Date.parse(e)):null}format(e,n){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");let o=new Intl.DateTimeFormat(this.locale,li(Xe({},n),{timeZone:"utc"}));return this._format(o,e)}addCalendarYears(e,n){return this.addCalendarMonths(e,n*12)}addCalendarMonths(e,n){let o=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+n,this.getDate(e));return this.getMonth(o)!=((this.getMonth(e)+n)%12+12)%12&&(o=this._createDateWithOverflow(this.getYear(o),this.getMonth(o),0)),o}addCalendarDays(e,n){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+n)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if(typeof e=="string"){if(!e)return null;if(SBe.test(e)){let n=new Date(e);if(this.isValid(n))return n}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,n,o){let s=new Date;return s.setFullYear(e,n,o),s.setHours(0,0,0,0),s}_2digit(e){return("00"+e).slice(-2)}_format(e,n){let o=new Date;return o.setUTCFullYear(n.getFullYear(),n.getMonth(),n.getDate()),o.setUTCHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e.format(o)}static{this.\u0275fac=function(n){return new(n||r)(xe(cA,8))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})(),TBe={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};var sW=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({providers:[ABe()]})}}return r})();function ABe(r=TBe){return[{provide:zl,useClass:IBe},{provide:o_,useValue:r}]}var zy=(()=>{class r{isErrorState(e,n){return!!(e&&e.invalid&&(e.touched||n&&n.submitted))}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Gh=function(r){return r[r.FADING_IN=0]="FADING_IN",r[r.VISIBLE=1]="VISIBLE",r[r.FADING_OUT=2]="FADING_OUT",r[r.HIDDEN=3]="HIDDEN",r}(Gh||{}),rW=class{constructor(i,e,n,o=!1){this._renderer=i,this.element=e,this.config=n,this._animationForciblyDisabledThroughCss=o,this.state=Gh.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},Rhe=Ul({passive:!0,capture:!0}),oW=class{constructor(){this._events=new Map,this._delegateEventHandler=i=>{let e=Hc(i);e&&this._events.get(i.type)?.forEach((n,o)=>{(o===e||o.contains(e))&&n.forEach(s=>s.handleEvent(i))})}}addHandler(i,e,n,o){let s=this._events.get(e);if(s){let l=s.get(n);l?l.add(o):s.set(n,new Set([o]))}else this._events.set(e,new Map([[n,new Set([o])]])),i.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,Rhe)})}removeHandler(i,e,n){let o=this._events.get(i);if(!o)return;let s=o.get(e);s&&(s.delete(n),s.size===0&&o.delete(e),o.size===0&&(this._events.delete(i),document.removeEventListener(i,this._delegateEventHandler,Rhe)))}},Fhe={enterDuration:225,exitDuration:150},EBe=800,Lhe=Ul({passive:!0,capture:!0}),Nhe=["mousedown","touchstart"],Bhe=["mouseup","mouseleave","touchend","touchcancel"],Kk=class r{static{this._eventManager=new oW}constructor(i,e,n,o){this._target=i,this._ngZone=e,this._platform=o,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,o.isBrowser&&(this._containerElement=ac(n))}fadeInRipple(i,e,n={}){let o=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Xe(Xe({},Fhe),n.animation);n.centered&&(i=o.left+o.width/2,e=o.top+o.height/2);let l=n.radius||MBe(i,e,o),h=i-o.left,p=e-o.top,m=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${h-l}px`,f.style.top=`${p-l}px`,f.style.height=`${l*2}px`,f.style.width=`${l*2}px`,n.color!=null&&(f.style.backgroundColor=n.color),f.style.transitionDuration=`${m}ms`,this._containerElement.appendChild(f);let g=window.getComputedStyle(f),y=g.transitionProperty,_=g.transitionDuration,w=y==="none"||_==="0s"||_==="0s, 0s"||o.width===0&&o.height===0,A=new rW(this,f,n,w);f.style.transform="scale3d(1, 1, 1)",A.state=Gh.FADING_IN,n.persistent||(this._mostRecentTransientRipple=A);let k=null;return!w&&(m||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let R=()=>{k&&(k.fallbackTimer=null),clearTimeout(H),this._finishRippleTransition(A)},$=()=>this._destroyRipple(A),H=setTimeout($,m+100);f.addEventListener("transitionend",R),f.addEventListener("transitioncancel",$),k={onTransitionEnd:R,onTransitionCancel:$,fallbackTimer:H}}),this._activeRipples.set(A,k),(w||!m)&&this._finishRippleTransition(A),A}fadeOutRipple(i){if(i.state===Gh.FADING_OUT||i.state===Gh.HIDDEN)return;let e=i.element,n=Xe(Xe({},Fhe),i.config.animation);e.style.transitionDuration=`${n.exitDuration}ms`,e.style.opacity="0",i.state=Gh.FADING_OUT,(i._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(i)}fadeOutAll(){this._getActiveRipples().forEach(i=>i.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(i=>{i.config.persistent||i.fadeOut()})}setupTriggerEvents(i){let e=ac(i);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,Nhe.forEach(n=>{r._eventManager.addHandler(this._ngZone,n,e,this)}))}handleEvent(i){i.type==="mousedown"?this._onMousedown(i):i.type==="touchstart"?this._onTouchStart(i):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Bhe.forEach(e=>{this._triggerElement.addEventListener(e,this,Lhe)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(i){i.state===Gh.FADING_IN?this._startFadeOutTransition(i):i.state===Gh.FADING_OUT&&this._destroyRipple(i)}_startFadeOutTransition(i){let e=i===this._mostRecentTransientRipple,{persistent:n}=i.config;i.state=Gh.VISIBLE,!n&&(!e||!this._isPointerDown)&&i.fadeOut()}_destroyRipple(i){let e=this._activeRipples.get(i)??null;this._activeRipples.delete(i),this._activeRipples.size||(this._containerRect=null),i===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),i.state=Gh.HIDDEN,e!==null&&(i.element.removeEventListener("transitionend",e.onTransitionEnd),i.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),i.element.remove()}_onMousedown(i){let e=_x(i),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+EBe;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(i.clientX,i.clientY,this._target.rippleConfig))}_onTouchStart(i){if(!this._target.rippleDisabled&&!yx(i)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=i.changedTouches;if(e)for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(i=>{let e=i.state===Gh.VISIBLE||i.config.terminateOnPointerUp&&i.state===Gh.FADING_IN;!i.config.persistent&&e&&i.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let i=this._triggerElement;i&&(Nhe.forEach(e=>r._eventManager.removeHandler(e,i,this)),this._pointerUpEventsRegistered&&(Bhe.forEach(e=>i.removeEventListener(e,this,Lhe)),this._pointerUpEventsRegistered=!1))}};function MBe(r,i,e){let n=Math.max(Math.abs(r-e.left),Math.abs(r-e.right)),o=Math.max(Math.abs(i-e.top),Math.abs(i-e.bottom));return Math.sqrt(n*n+o*o)}var s_=new At("mat-ripple-global-options"),fd=(()=>{class r{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,n,o,s,l){this._elementRef=e,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Kk(this,n,e,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Xe(Xe(Xe({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,o){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,n,Xe(Xe({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,Xe(Xe({},this.rippleConfig),e))}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(ci),ie(Hn),ie(s_,8),ie(so,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,o){n&2&&oi("mat-ripple-unbounded",o.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}}return r})(),Hh=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[on,on]})}}return r})(),aW=(()=>{class r{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1,this.appearance="full"}static{this.\u0275fac=function(n){return new(n||r)(ie(so,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(n,o){n&2&&oi("mat-pseudo-checkbox-indeterminate",o.state==="indeterminate")("mat-pseudo-checkbox-checked",o.state==="checked")("mat-pseudo-checkbox-disabled",o.disabled)("mat-pseudo-checkbox-minimal",o.appearance==="minimal")("mat-pseudo-checkbox-full",o.appearance==="full")("_mat-animation-noopable",o._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[yt],decls:0,vars:0,template:function(n,o){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-app-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-app-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-app-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-app-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-app-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}}return r})(),lW=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[on]})}}return r})(),dA=new At("MAT_OPTION_PARENT_COMPONENT"),DBe=0,uA=new At("MatOptgroup"),Ghe=(()=>{class r{constructor(e){this.disabled=!1,this._labelId=`mat-optgroup-label-${DBe++}`,this._inert=e?.inertGroups??!1}static{this.\u0275fac=function(n){return new(n||r)(ie(dA,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-optgroup"]],hostAttrs:[1,"mat-mdc-optgroup"],hostVars:3,hostBindings:function(n,o){n&2&&yi("role",o._inert?null:"group")("aria-disabled",o._inert?null:o.disabled.toString())("aria-labelledby",o._inert?null:o._labelId)},inputs:{label:"label",disabled:[2,"disabled","disabled",Xt]},exportAs:["matOptgroup"],standalone:!0,features:[Bi([{provide:uA,useExisting:r}]),an,yt],ngContentSelectors:hBe,decls:5,vars:4,consts:[["role","presentation",1,"mat-mdc-optgroup-label",3,"id"],[1,"mdc-list-item__primary-text"]],template:function(n,o){n&1&&(Qi(uBe),ne(0,"span",0)(1,"span",1),Ye(2),pi(3),ce()(),pi(4,1)),n&2&&(oi("mdc-list-item--disabled",o.disabled),ee("id",o._labelId),q(2),Qt("",o.label," "))},styles:[".mat-mdc-optgroup{color:var(--mat-optgroup-label-text-color, var(--mat-app-on-surface-variant));font-family:var(--mat-optgroup-label-text-font, var(--mat-app-title-small-font));line-height:var(--mat-optgroup-label-text-line-height, var(--mat-app-title-small-line-height));font-size:var(--mat-optgroup-label-text-size, var(--mat-app-title-small-size));letter-spacing:var(--mat-optgroup-label-text-tracking, var(--mat-app-title-small-tracking));font-weight:var(--mat-optgroup-label-text-weight, var(--mat-app-title-small-weight))}.mat-mdc-optgroup-label{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;outline:none}.mat-mdc-optgroup-label.mdc-list-item--disabled{opacity:.38}.mat-mdc-optgroup-label .mdc-list-item__primary-text{font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;white-space:normal}"],encapsulation:2,changeDetection:0})}}return r})(),kBe=0,Zk=class{constructor(i,e=!1){this.source=i,this.isUserInput=e}},lc=(()=>{class r{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=e}get disableRipple(){return!!(this._parent&&this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}constructor(e,n,o,s){this._element=e,this._changeDetectorRef=n,this._parent=o,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id=`mat-option-${kBe++}`,this.onSelectionChange=new it,this._stateChanges=new Dt}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,n){let o=this._getHostElement();typeof o.focus=="function"&&o.focus(n)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!gs(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new Zk(this,e))}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(Ti),ie(dA,8),ie(uA,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-option"]],viewQuery:function(n,o){if(n&1&&Ni(pBe,7),n&2){let s;Yt(s=Kt())&&(o._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(n,o){n&1&&Oe("click",function(){return o._selectViaInteraction()})("keydown",function(l){return o._handleKeydown(l)}),n&2&&(hd("id",o.id),yi("aria-selected",o.selected)("aria-disabled",o.disabled.toString()),oi("mdc-list-item--selected",o.selected)("mat-mdc-option-multiple",o.multiple)("mat-mdc-option-active",o.active)("mdc-list-item--disabled",o.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",Xt]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[an,yt],ngContentSelectors:fBe,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(n,o){n&1&&(Qi(mBe),We(0,gBe,1,2,"mat-pseudo-checkbox",1),pi(1),ne(2,"span",2,0),pi(4,1),ce(),We(5,_Be,1,1,"mat-pseudo-checkbox",3)(6,yBe,2,1,"span",4),wt(7,"div",5)),n&2&&(vn(o.multiple?0:-1),q(5),vn(!o.multiple&&o.selected&&!o.hideSingleSelectionIndicator?5:-1),q(),vn(o.group&&o.group._inert?6:-1),q(),ee("matRippleTrigger",o._getHostElement())("matRippleDisabled",o.disabled||o.disableRipple))},dependencies:[aW,fd],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-app-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-app-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-app-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-app-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-app-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color);outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-app-on-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-app-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-app-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return r})();function ZN(r,i,e){if(e.length){let n=i.toArray(),o=e.toArray(),s=0;for(let l=0;l<r+1;l++)n[l].group&&n[l].group===o[s]&&s++;return s}return 0}function QN(r,i,e,n){return r<e?r:r+i>e+n?Math.max(0,r-n+i):e}var cc=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[Hh,on,lW]})}}return r})(),jhe={capture:!0},Vhe=["focus","mousedown","mouseenter","touchstart"],iW="mat-ripple-loader-uninitialized",nW="mat-ripple-loader-class-name",$he="mat-ripple-loader-centered",KN="mat-ripple-loader-disabled",XN=(()=>{class r{constructor(){this._document=Et(Ui,{optional:!0}),this._animationMode=Et(so,{optional:!0}),this._globalRippleOptions=Et(s_,{optional:!0}),this._platform=Et(Hn),this._ngZone=Et(ci),this._hosts=new Map,this._onInteraction=e=>{let n=Hc(e);if(n instanceof HTMLElement){let o=n.closest(`[${iW}="${this._globalRippleOptions?.namespace??""}"]`);o&&this._createRipple(o)}},this._ngZone.runOutsideAngular(()=>{for(let e of Vhe)this._document?.addEventListener(e,this._onInteraction,jhe)})}ngOnDestroy(){let e=this._hosts.keys();for(let n of e)this.destroyRipple(n);for(let n of Vhe)this._document?.removeEventListener(n,this._onInteraction,jhe)}configureRipple(e,n){e.setAttribute(iW,this._globalRippleOptions?.namespace??""),(n.className||!e.hasAttribute(nW))&&e.setAttribute(nW,n.className||""),n.centered&&e.setAttribute($he,""),n.disabled&&e.setAttribute(KN,"")}getRipple(e){return this._hosts.get(e)||this._createRipple(e)}setDisabled(e,n){let o=this._hosts.get(e);if(o){o.disabled=n;return}n?e.setAttribute(KN,""):e.removeAttribute(KN)}_createRipple(e){if(!this._document)return;let n=this._hosts.get(e);if(n)return n;e.querySelector(".mat-ripple")?.remove();let o=this._document.createElement("span");o.classList.add("mat-ripple",e.getAttribute(nW)),e.append(o);let s=new fd(new Ht(o),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=e,s.centered=e.hasAttribute($he),s.disabled=e.hasAttribute(KN),this.attachRipple(e,s),s}attachRipple(e,n){e.removeAttribute(iW),this._hosts.set(e,n)}destroyRipple(e){let n=this._hosts.get(e);n&&(n.ngOnDestroy(),this._hosts.delete(e))}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),hA=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=gt({type:r,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(n,o){n&2&&oi("mdc-form-field--align-end",o.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},standalone:!0,features:[yt],attrs:vBe,ngContentSelectors:bBe,decls:1,vars:0,template:function(n,o){n&1&&(Qi(),pi(0))},styles:[".mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}"],encapsulation:2,changeDetection:0})}}return r})();var OBe=["mat-button",""],Whe=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],qhe=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var PBe=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var RBe=["mat-mini-fab",""],FBe='.mat-mdc-fab-base{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1);flex-shrink:0}.mat-mdc-fab-base .mat-mdc-button-ripple,.mat-mdc-fab-base .mat-mdc-button-persistent-ripple,.mat-mdc-fab-base .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab-base .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-fab-base .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-fab-base .mdc-button__label,.mat-mdc-fab-base .mat-icon{z-index:1;position:relative}.mat-mdc-fab-base .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab-base:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab-base._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab-base::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-fab-base[hidden]{display:none}.mat-mdc-fab-base::-moz-focus-inner{padding:0;border:0}.mat-mdc-fab-base:active,.mat-mdc-fab-base:focus{outline:none}.mat-mdc-fab-base:hover{cursor:pointer}.mat-mdc-fab-base>svg{width:100%}.mat-mdc-fab-base .mat-icon,.mat-mdc-fab-base .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab-base .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-fab-base[disabled],.mat-mdc-fab-base.mat-mdc-button-disabled{cursor:default;pointer-events:none}.mat-mdc-fab-base[disabled],.mat-mdc-fab-base[disabled]:focus,.mat-mdc-fab-base.mat-mdc-button-disabled,.mat-mdc-fab-base.mat-mdc-button-disabled:focus{box-shadow:none}.mat-mdc-fab-base.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-fab{background-color:var(--mdc-fab-container-color, var(--mat-app-primary-container));border-radius:var(--mdc-fab-container-shape, var(--mat-app-corner-large));color:var(--mat-fab-foreground-color, var(--mat-app-on-primary-container, inherit));box-shadow:var(--mdc-fab-container-elevation-shadow, var(--mat-app-level3))}.mat-mdc-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-fab-touch-target-display)}.mat-mdc-fab .mat-ripple-element{background-color:var(--mat-fab-ripple-color)}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-state-layer-color, var(--mat-app-on-primary-container))}.mat-mdc-fab.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-disabled-state-layer-color)}.mat-mdc-fab:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-fab.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-fab.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-fab.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-fab:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-fab:hover{box-shadow:var(--mdc-fab-hover-container-elevation-shadow, var(--mat-app-level4))}.mat-mdc-fab:focus{box-shadow:var(--mdc-fab-focus-container-elevation-shadow, var(--mat-app-level3))}.mat-mdc-fab:active,.mat-mdc-fab:focus:active{box-shadow:var(--mdc-fab-pressed-container-elevation-shadow, var(--mat-app-level3))}.mat-mdc-fab[disabled],.mat-mdc-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-fab-disabled-state-foreground-color);background-color:var(--mat-fab-disabled-state-container-color)}.mat-mdc-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-mini-fab{width:40px;height:40px;background-color:var(--mdc-fab-small-container-color, var(--mat-app-primary-container));border-radius:var(--mdc-fab-small-container-shape, var(--mat-app-corner-medium));color:var(--mat-fab-small-foreground-color, var(--mat-app-on-primary-container, inherit));box-shadow:var(--mdc-fab-small-container-elevation-shadow, var(--mat-app-level3))}.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-fab-small-touch-target-display)}.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-fab-small-ripple-color)}.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-small-state-layer-color, var(--mat-app-on-primary-container))}.mat-mdc-mini-fab.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-small-disabled-state-layer-color)}.mat-mdc-mini-fab:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-mini-fab.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-mini-fab:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-mini-fab:hover{box-shadow:var(--mdc-fab-small-hover-container-elevation-shadow, var(--mat-app-level4))}.mat-mdc-mini-fab:focus{box-shadow:var(--mdc-fab-small-focus-container-elevation-shadow, var(--mat-app-level3))}.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:var(--mdc-fab-small-pressed-container-elevation-shadow, var(--mat-app-level3))}.mat-mdc-mini-fab[disabled],.mat-mdc-mini-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-fab-small-disabled-state-foreground-color);background-color:var(--mat-fab-small-disabled-state-container-color)}.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-extended-fab{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;line-height:normal;box-shadow:var(--mdc-extended-fab-container-elevation-shadow, var(--mat-app-level3));height:var(--mdc-extended-fab-container-height);border-radius:var(--mdc-extended-fab-container-shape, var(--mat-app-corner-large));font-family:var(--mdc-extended-fab-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-extended-fab-label-text-size, var(--mat-app-label-large-size));font-weight:var(--mdc-extended-fab-label-text-weight, var(--mat-app-label-large-weight));letter-spacing:var(--mdc-extended-fab-label-text-tracking, var(--mat-app-label-large-tracking))}.mat-mdc-extended-fab:hover{box-shadow:var(--mdc-extended-fab-hover-container-elevation-shadow, var(--mat-app-level4))}.mat-mdc-extended-fab:focus{box-shadow:var(--mdc-extended-fab-focus-container-elevation-shadow, var(--mat-app-level3))}.mat-mdc-extended-fab:active,.mat-mdc-extended-fab:focus:active{box-shadow:var(--mdc-extended-fab-pressed-container-elevation-shadow, var(--mat-app-level3))}.mat-mdc-extended-fab[disabled],.mat-mdc-extended-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none}.mat-mdc-extended-fab[disabled],.mat-mdc-extended-fab[disabled]:focus,.mat-mdc-extended-fab.mat-mdc-button-disabled,.mat-mdc-extended-fab.mat-mdc-button-disabled:focus{box-shadow:none}.mat-mdc-extended-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:-8px;margin-right:12px}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons,[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons{margin-left:12px;margin-right:-8px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}',LBe=["mat-icon-button",""],NBe=["*"];var BBe=new At("MAT_BUTTON_CONFIG");var jBe=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],cW=(()=>{class r{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}constructor(e,n,o,s){this._elementRef=e,this._platform=n,this._ngZone=o,this._animationMode=s,this._focusMonitor=Et(il),this._rippleLoader=Et(XN),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let l=Et(BBe,{optional:!0}),h=e.nativeElement,p=h.classList;this.disabledInteractive=l?.disabledInteractive??!1,this.color=l?.color??null,this._rippleLoader?.configureRipple(h,{className:"mat-mdc-button-ripple"});for(let{attribute:m,mdcClasses:f}of jBe)h.hasAttribute(m)&&p.add(...f)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",n){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,n):this._elementRef.nativeElement.focus(n)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(n){tk()}}static{this.\u0275dir=Pt({type:r,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Xt],disabled:[2,"disabled","disabled",Xt],ariaDisabled:[2,"aria-disabled","ariaDisabled",Xt],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Xt]},features:[an]})}}return r})();var Ua=(()=>{class r extends cW{constructor(e,n,o,s){super(e,n,o,s)}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(Hn),ie(ci),ie(so,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(n,o){n&2&&(yi("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),Hr(o.color?"mat-"+o.color:""),oi("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[fn,yt],attrs:OBe,ngContentSelectors:qhe,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,o){n&1&&(Qi(Whe),wt(0,"span",0),pi(1),ne(2,"span",1),pi(3,1),ce(),pi(4,2),wt(5,"span",2)(6,"span",3)),n&2&&oi("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 8px);height:var(--mdc-text-button-container-height);font-family:var(--mdc-text-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-app-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-filled-button-horizontal-padding, 16px);height:var(--mdc-filled-button-container-height);font-family:var(--mdc-filled-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-app-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-app-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-app-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-app-level1));height:var(--mdc-protected-button-container-height);font-family:var(--mdc-protected-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-app-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-app-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-app-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-app-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-outlined-button-horizontal-padding, 15px);height:var(--mdc-outlined-button-container-height);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-app-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-app-corner-full));border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-app-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-app-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return r})();var VBe=new At("mat-mdc-fab-default-options",{providedIn:"root",factory:Yhe});function Yhe(){return{color:"accent"}}var Hhe=Yhe();var Khe=(()=>{class r extends cW{constructor(e,n,o,s,l){super(e,n,o,s),this._options=l,this._isFab=!0,this._options=this._options||Hhe,this.color=this._options.color||Hhe.color}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(Hn),ie(ci),ie(so,8),ie(VBe,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["button","mat-mini-fab",""]],hostVars:14,hostBindings:function(n,o){n&2&&(yi("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),Hr(o.color?"mat-"+o.color:""),oi("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[fn,yt],attrs:RBe,ngContentSelectors:qhe,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,o){n&1&&(Qi(Whe),wt(0,"span",0),pi(1),ne(2,"span",1),pi(3,1),ce(),pi(4,2),wt(5,"span",2)(6,"span",3)),n&2&&oi("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:[FBe],encapsulation:2,changeDetection:0})}}return r})();var Cr=(()=>{class r extends cW{constructor(e,n,o,s){super(e,n,o,s),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(Hn),ie(ci),ie(so,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(n,o){n&2&&(yi("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),Hr(o.color?"mat-"+o.color:""),oi("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[fn,yt],attrs:LBe,ngContentSelectors:NBe,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,o){n&1&&(Qi(),wt(0,"span",0),pi(1),wt(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);color:var(--mdc-icon-button-icon-color, var(--mat-app-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',PBe],encapsulation:2,changeDetection:0})}}return r})();var bn=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[on,Hh,on]})}}return r})();var dW=class{constructor(i){this._box=i,this._destroyed=new Dt,this._resizeSubject=new Dt,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(i){return this._elementObservables.has(i)||this._elementObservables.set(i,new si(e=>{let n=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(i,{box:this._box}),()=>{this._resizeObserver?.unobserve(i),n.unsubscribe(),this._elementObservables.delete(i)}}).pipe(mn(e=>e.some(n=>n.target===i)),GC({bufferSize:1,refCount:!0}),rn(this._destroyed))),this._elementObservables.get(i)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},JN=(()=>{class r{constructor(){this._observers=new Map,this._ngZone=Et(ci),typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(e,n){let o=n?.box||"content-box";return this._observers.has(o)||this._observers.set(o,new dW(o)),this._observers.get(o).observe(e)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Vr=function(r){return r[r.State=0]="State",r[r.Transition=1]="Transition",r[r.Sequence=2]="Sequence",r[r.Group=3]="Group",r[r.Animate=4]="Animate",r[r.Keyframes=5]="Keyframes",r[r.Style=6]="Style",r[r.Trigger=7]="Trigger",r[r.Reference=8]="Reference",r[r.AnimateChild=9]="AnimateChild",r[r.AnimateRef=10]="AnimateRef",r[r.Query=11]="Query",r[r.Stagger=12]="Stagger",r}(Vr||{}),a_="*";function Or(r,i){return{type:Vr.Trigger,name:r,definitions:i,options:{}}}function un(r,i=null){return{type:Vr.Animate,styles:i,timings:r}}function Zhe(r,i=null){return{type:Vr.Group,steps:r,options:i}}function Qhe(r,i=null){return{type:Vr.Sequence,steps:r,options:i}}function mi(r){return{type:Vr.Style,styles:r,offset:null}}function zi(r,i,e){return{type:Vr.State,name:r,styles:i,options:e}}function Tw(r){return{type:Vr.Keyframes,steps:r}}function ln(r,i,e=null){return{type:Vr.Transition,expr:r,animation:i,options:e}}function e4(r=null){return{type:Vr.AnimateChild,options:r}}function t4(r,i,e=null){return{type:Vr.Query,selector:r,animation:i,options:e}}var Iw=class{constructor(i=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=i+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}onStart(i){this._originalOnStartFns.push(i),this._onStartFns.push(i)}onDone(i){this._originalOnDoneFns.push(i),this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(i=>i()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(i){this._position=this.totalTime?i*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(i){let e=i=="start"?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}},Qk=class{constructor(i){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=i;let e=0,n=0,o=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++e==s&&this._onFinish()}),l.onDestroy(()=>{++n==s&&this._onDestroy()}),l.onStart(()=>{++o==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,h)=>Math.max(l,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this.players.forEach(i=>i.init())}onStart(i){this._onStartFns.push(i)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(i=>i()),this._onStartFns=[])}onDone(i){this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(i=>i.play())}pause(){this.players.forEach(i=>i.pause())}restart(){this.players.forEach(i=>i.restart())}finish(){this._onFinish(),this.players.forEach(i=>i.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(i=>i.destroy()),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}reset(){this.players.forEach(i=>i.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(i){let e=i*this.totalTime;this.players.forEach(n=>{let o=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(o)})}getPosition(){let i=this.players.reduce((e,n)=>e===null||n.totalTime>e.totalTime?n:e,null);return i!=null?i.getPosition():0}beforeDestroy(){this.players.forEach(i=>{i.beforeDestroy&&i.beforeDestroy()})}triggerCallback(i){let e=i=="start"?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}},i4="!";var $Be=["notch"],UBe=["matFormFieldNotchedOutline",""],zBe=["*"],GBe=["textField"],HBe=["iconPrefixContainer"],WBe=["textPrefixContainer"],qBe=["iconSuffixContainer"],YBe=["textSuffixContainer"],KBe=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],ZBe=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function QBe(r,i){r&1&&wt(0,"span",21)}function XBe(r,i){if(r&1&&(ne(0,"label",20),pi(1,1),We(2,QBe,1,0,"span",21),ce()),r&2){let e=ae(2);ee("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),yi("for",e._control.disableAutomaticLabeling?null:e._control.id),q(2),vn(!e.hideRequiredMarker&&e._control.required?2:-1)}}function JBe(r,i){if(r&1&&We(0,XBe,3,5,"label",20),r&2){let e=ae();vn(e._hasFloatingLabel()?0:-1)}}function eje(r,i){r&1&&wt(0,"div",7)}function tje(r,i){}function ije(r,i){if(r&1&&We(0,tje,0,0,"ng-template",13),r&2){ae(2);let e=ji(1);ee("ngTemplateOutlet",e)}}function nje(r,i){if(r&1&&(ne(0,"div",9),We(1,ije,1,1,null,13),ce()),r&2){let e=ae();ee("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),q(),vn(e._forceDisplayInfixLabel()?-1:1)}}function rje(r,i){r&1&&(ne(0,"div",10,2),pi(2,2),ce())}function oje(r,i){r&1&&(ne(0,"div",11,3),pi(2,3),ce())}function sje(r,i){}function aje(r,i){if(r&1&&We(0,sje,0,0,"ng-template",13),r&2){ae();let e=ji(1);ee("ngTemplateOutlet",e)}}function lje(r,i){r&1&&(ne(0,"div",14,4),pi(2,4),ce())}function cje(r,i){r&1&&(ne(0,"div",15,5),pi(2,5),ce())}function dje(r,i){r&1&&wt(0,"div",16)}function uje(r,i){if(r&1&&(ne(0,"div",18),pi(1,6),ce()),r&2){let e=ae();ee("@transitionMessages",e._subscriptAnimationState)}}function hje(r,i){if(r&1&&(ne(0,"mat-hint",22),Ye(1),ce()),r&2){let e=ae(2);ee("id",e._hintLabelId),q(),Si(e.hintLabel)}}function pje(r,i){if(r&1&&(ne(0,"div",19),We(1,hje,2,2,"mat-hint",22),pi(2,7),wt(3,"div",23),pi(4,8),ce()),r&2){let e=ae();ee("@transitionMessages",e._subscriptAnimationState),q(),vn(e.hintLabel?1:-1)}}var Mg=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=Pt({type:r,selectors:[["mat-label"]],standalone:!0})}}return r})(),mje=0,spe=new At("MatError"),bx=(()=>{class r{constructor(e,n){this.id=`mat-mdc-error-${mje++}`,e||n.nativeElement.setAttribute("aria-live","polite")}static{this.\u0275fac=function(n){return new(n||r)(oc("aria-live"),ie(Ht))}}static{this.\u0275dir=Pt({type:r,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(n,o){n&2&&hd("id",o.id)},inputs:{id:"id"},standalone:!0,features:[Bi([{provide:spe,useExisting:r}])]})}}return r})(),fje=0,Xhe=(()=>{class r{constructor(){this.align="start",this.id=`mat-mdc-hint-${fje++}`}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=Pt({type:r,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(n,o){n&2&&(hd("id",o.id),yi("align",null),oi("mat-mdc-form-field-hint-end",o.align==="end"))},inputs:{align:"align",id:"id"},standalone:!0})}}return r})(),ape=new At("MatPrefix"),pA=(()=>{class r{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=Pt({type:r,selectors:[["","matPrefix",""],["","matIconPrefix",""],["","matTextPrefix",""]],inputs:{_isTextSelector:[0,"matTextPrefix","_isTextSelector"]},standalone:!0,features:[Bi([{provide:ape,useExisting:r}])]})}}return r})(),lpe=new At("MatSuffix"),l_=(()=>{class r{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=Pt({type:r,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:[0,"matTextSuffix","_isTextSelector"]},standalone:!0,features:[Bi([{provide:lpe,useExisting:r}])]})}}return r})(),cpe=new At("FloatingLabelParent"),Jhe=(()=>{class r{get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(e){this._elementRef=e,this._floating=!1,this._monitorResize=!1,this._resizeObserver=Et(JN),this._ngZone=Et(ci),this._parent=Et(cpe),this._resizeSubscription=new pn}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return gje(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht))}}static{this.\u0275dir=Pt({type:r,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(n,o){n&2&&oi("mdc-floating-label--float-above",o.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0})}}return r})();function gje(r){let i=r;if(i.offsetParent!==null)return i.scrollWidth;let e=i.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);let n=e.scrollWidth;return e.remove(),n}var epe="mdc-line-ripple--active",n4="mdc-line-ripple--deactivating",tpe=(()=>{class r{constructor(e,n){this._elementRef=e,this._handleTransitionEnd=o=>{let s=this._elementRef.nativeElement.classList,l=s.contains(n4);o.propertyName==="opacity"&&l&&s.remove(epe,n4)},n.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let e=this._elementRef.nativeElement.classList;e.remove(n4),e.add(epe)}deactivate(){this._elementRef.nativeElement.classList.add(n4)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(ci))}}static{this.\u0275dir=Pt({type:r,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0})}}return r})(),ipe=(()=>{class r{constructor(e,n){this._elementRef=e,this._ngZone=n,this.open=!1}ngAfterViewInit(){let e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){!this.open||!e?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(ci))}}static{this.\u0275cmp=gt({type:r,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(n,o){if(n&1&&Ni($Be,5),n&2){let s;Yt(s=Kt())&&(o._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(n,o){n&2&&oi("mdc-notched-outline--notched",o.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[yt],attrs:UBe,ngContentSelectors:zBe,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(n,o){n&1&&(Qi(),wt(0,"div",1),ne(1,"div",2,0),pi(3),ce(),wt(4,"div",3))},encapsulation:2,changeDetection:0})}}return r})(),_je={transitionMessages:Or("transitionMessages",[zi("enter",mi({opacity:1,transform:"translateY(0%)"})),ln("void => enter",[mi({opacity:0,transform:"translateY(-5px)"}),un("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Aw=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=Pt({type:r})}}return r})();var Gy=new At("MatFormField"),uW=new At("MAT_FORM_FIELD_DEFAULT_OPTIONS"),npe=0,rpe="fill",yje="auto",ope="fixed",vje="translateY(-50%)",dc=(()=>{class r{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=tl(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||yje}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){let n=this._appearance,o=e||this._defaults?.appearance||rpe;this._appearance=o,this._appearance==="outline"&&this._appearance!==n&&(this._needsOutlineLabelOffsetUpdate=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||ope}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||ope}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,n,o,s,l,h,p,m){this._elementRef=e,this._changeDetectorRef=n,this._dir=s,this._platform=l,this._defaults=h,this._animationMode=p,this._labelChild=Wce(Mg),this._hideRequiredMarker=!1,this.color="primary",this._appearance=rpe,this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId=`mat-mdc-form-field-label-${npe++}`,this._hintLabelId=`mat-mdc-hint-${npe++}`,this._subscriptAnimationState="",this._destroyed=new Dt,this._isFocused=null,this._needsOutlineLabelOffsetUpdate=!1,this._previousControl=null,this._injector=Et(yn),this.getLabelId=Py(()=>this._hasFloatingLabel()?this._labelId:null),this._hasFloatingLabel=Py(()=>!!this._labelChild()),h&&(h.appearance&&(this.appearance=h.appearance),this._hideRequiredMarker=!!h?.hideRequiredMarker,h.color&&(this.color=h.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._previousControl=this._control)}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(e){let n=this._control,o="mat-mdc-form-field-type-";e&&this._elementRef.nativeElement.classList.remove(o+e.controlType),n.controlType&&this._elementRef.nativeElement.classList.add(o+n.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=n.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._valueChanges?.unsubscribe(),n.ngControl&&n.ngControl.valueChanges&&(this._valueChanges=n.ngControl.valueChanges.pipe(rn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),vr(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),ok(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(rn(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(e){let n=this._control?this._control.ngControl:null;return n&&n[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&e.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let n=this._hintChildren?this._hintChildren.find(s=>s.align==="start"):null,o=this._hintChildren?this._hintChildren.find(s=>s.align==="end"):null;n?e.push(n.id):this._hintLabel&&e.push(this._hintLabelId),o&&e.push(o.id)}else this._errorChildren&&e.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;let e=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){e.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdate=!0;return}let n=this._iconPrefixContainer?.nativeElement,o=this._textPrefixContainer?.nativeElement,s=this._iconSuffixContainer?.nativeElement,l=this._textSuffixContainer?.nativeElement,h=n?.getBoundingClientRect().width??0,p=o?.getBoundingClientRect().width??0,m=s?.getBoundingClientRect().width??0,f=l?.getBoundingClientRect().width??0,g=this._dir.value==="rtl"?"-1":"1",y=`${h+p}px`,w=`calc(${g} * (${y} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;e.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${vje} translateX(${w})
    )`;let A=h+p+m+f;this._elementRef.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${A}px)`)}_isAttachedToDom(){let e=this._elementRef.nativeElement;if(e.getRootNode){let n=e.getRootNode();return n&&n!==e}return document.documentElement.contains(e)}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(Ti),ie(ci),ie(To),ie(Hn),ie(uW,8),ie(so,8),ie(Ui))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-form-field"]],contentQueries:function(n,o,s){if(n&1&&(ude(s,o._labelChild,Mg,5),Sn(s,Aw,5),Sn(s,ape,5),Sn(s,lpe,5),Sn(s,spe,5),Sn(s,Xhe,5)),n&2){hde();let l;Yt(l=Kt())&&(o._formFieldControl=l.first),Yt(l=Kt())&&(o._prefixChildren=l),Yt(l=Kt())&&(o._suffixChildren=l),Yt(l=Kt())&&(o._errorChildren=l),Yt(l=Kt())&&(o._hintChildren=l)}},viewQuery:function(n,o){if(n&1&&(Ni(GBe,5),Ni(HBe,5),Ni(WBe,5),Ni(qBe,5),Ni(YBe,5),Ni(Jhe,5),Ni(ipe,5),Ni(tpe,5)),n&2){let s;Yt(s=Kt())&&(o._textField=s.first),Yt(s=Kt())&&(o._iconPrefixContainer=s.first),Yt(s=Kt())&&(o._textPrefixContainer=s.first),Yt(s=Kt())&&(o._iconSuffixContainer=s.first),Yt(s=Kt())&&(o._textSuffixContainer=s.first),Yt(s=Kt())&&(o._floatingLabel=s.first),Yt(s=Kt())&&(o._notchedOutline=s.first),Yt(s=Kt())&&(o._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(n,o){n&2&&oi("mat-mdc-form-field-label-always-float",o._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",o._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",o._hasIconSuffix)("mat-form-field-invalid",o._control.errorState)("mat-form-field-disabled",o._control.disabled)("mat-form-field-autofilled",o._control.autofilled)("mat-form-field-no-animations",o._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",o.appearance=="fill")("mat-form-field-appearance-outline",o.appearance=="outline")("mat-form-field-hide-placeholder",o._hasFloatingLabel()&&!o._shouldLabelFloat())("mat-focused",o._control.focused)("mat-primary",o.color!=="accent"&&o.color!=="warn")("mat-accent",o.color==="accent")("mat-warn",o.color==="warn")("ng-untouched",o._shouldForward("untouched"))("ng-touched",o._shouldForward("touched"))("ng-pristine",o._shouldForward("pristine"))("ng-dirty",o._shouldForward("dirty"))("ng-valid",o._shouldForward("valid"))("ng-invalid",o._shouldForward("invalid"))("ng-pending",o._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[Bi([{provide:Gy,useExisting:r},{provide:cpe,useExisting:r}]),yt],ngContentSelectors:ZBe,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(n,o){if(n&1){let s=dt();Qi(KBe),We(0,JBe,1,1,"ng-template",null,0,Vo),ne(2,"div",6,1),Oe("click",function(h){return Re(s),Fe(o._control.onContainerClick(h))}),We(4,eje,1,0,"div",7),ne(5,"div",8),We(6,nje,2,2,"div",9)(7,rje,3,0,"div",10)(8,oje,3,0,"div",11),ne(9,"div",12),We(10,aje,1,1,null,13),pi(11),ce(),We(12,lje,3,0,"div",14)(13,cje,3,0,"div",15),ce(),We(14,dje,1,0,"div",16),ce(),ne(15,"div",17),We(16,uje,2,1,"div",18)(17,pje,5,2,"div",19),ce()}if(n&2){let s;q(2),oi("mdc-text-field--filled",!o._hasOutline())("mdc-text-field--outlined",o._hasOutline())("mdc-text-field--no-label",!o._hasFloatingLabel())("mdc-text-field--disabled",o._control.disabled)("mdc-text-field--invalid",o._control.errorState),q(2),vn(!o._hasOutline()&&!o._control.disabled?4:-1),q(2),vn(o._hasOutline()?6:-1),q(),vn(o._hasIconPrefix?7:-1),q(),vn(o._hasTextPrefix?8:-1),q(2),vn(!o._hasOutline()||o._forceDisplayInfixLabel()?10:-1),q(2),vn(o._hasTextSuffix?12:-1),q(),vn(o._hasIconSuffix?13:-1),q(),vn(o._hasOutline()?-1:14),q(),oi("mat-mdc-form-field-subscript-dynamic-size",o.subscriptSizing==="dynamic"),q(),vn((s=o._getDisplayedMessages())==="error"?16:s==="hint"?17:-1)}},dependencies:[Jhe,ipe,Ry,tpe,Xhe],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--disabled .cdk-high-contrast-active .mdc-text-field__input{background-color:Window}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-app-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.cdk-high-contrast-active .mdc-text-field--disabled .mdc-floating-label{z-index:1}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-app-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-app-outline));border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-app-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-app-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))*2)}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none;--mat-form-field-notch-max-width: 100%}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-app-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-app-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-app-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-app-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-app-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-app-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-app-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-app-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-app-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-app-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-app-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-app-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-app-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-app-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-app-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-app-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-app-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-app-body-large-weight))}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-app-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-app-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-app-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[_je.transitionMessages]},changeDetection:0})}}return r})(),Wa=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[on,$a,tA,on]})}}return r})();var bje=["*"],r4;function wje(){if(r4===void 0&&(r4=null,typeof window<"u")){let r=window;r.trustedTypes!==void 0&&(r4=r.trustedTypes.createPolicy("angular#components",{createHTML:i=>i}))}return r4}function Jk(r){return wje()?.createHTML(r)||r}function dpe(r){return Error(`Unable to find icon with the name "${r}"`)}function Cje(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function upe(r){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${r}".`)}function hpe(r){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${r}".`)}var Hy=class{constructor(i,e,n){this.url=i,this.svgText=e,this.options=n}},eO=(()=>{class r{constructor(e,n,o,s){this._httpClient=e,this._sanitizer=n,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=o}addSvgIcon(e,n,o){return this.addSvgIconInNamespace("",e,n,o)}addSvgIconLiteral(e,n,o){return this.addSvgIconLiteralInNamespace("",e,n,o)}addSvgIconInNamespace(e,n,o,s){return this._addSvgIconConfig(e,n,new Hy(o,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,n,o,s){let l=this._sanitizer.sanitize(ud.HTML,o);if(!l)throw hpe(o);let h=Jk(l);return this._addSvgIconConfig(e,n,new Hy("",h,s))}addSvgIconSet(e,n){return this.addSvgIconSetInNamespace("",e,n)}addSvgIconSetLiteral(e,n){return this.addSvgIconSetLiteralInNamespace("",e,n)}addSvgIconSetInNamespace(e,n,o){return this._addSvgIconSetConfig(e,new Hy(n,null,o))}addSvgIconSetLiteralInNamespace(e,n,o){let s=this._sanitizer.sanitize(ud.HTML,n);if(!s)throw hpe(n);let l=Jk(s);return this._addSvgIconSetConfig(e,new Hy("",l,o))}registerFontClassAlias(e,n=e){return this._fontCssClassesByAlias.set(e,n),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let n=this._sanitizer.sanitize(ud.RESOURCE_URL,e);if(!n)throw upe(e);let o=this._cachedIconsByUrl.get(n);return o?Vt(o4(o)):this._loadSvgIconFromConfig(new Hy(e,null)).pipe(br(s=>this._cachedIconsByUrl.set(n,s)),$t(s=>o4(s)))}getNamedSvgIcon(e,n=""){let o=ppe(n,e),s=this._svgIconConfigs.get(o);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(n,e),s)return this._svgIconConfigs.set(o,s),this._getSvgFromConfig(s);let l=this._iconSetConfigs.get(n);return l?this._getSvgFromIconSetConfigs(e,l):dd(dpe(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Vt(o4(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe($t(n=>o4(n)))}_getSvgFromIconSetConfigs(e,n){let o=this._extractIconWithNameFromAnySet(e,n);if(o)return Vt(o);let s=n.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(Fn(h=>{let m=`Loading icon set URL: ${this._sanitizer.sanitize(ud.RESOURCE_URL,l.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(m)),Vt(null)})));return Ac(s).pipe($t(()=>{let l=this._extractIconWithNameFromAnySet(e,n);if(!l)throw dpe(e);return l}))}_extractIconWithNameFromAnySet(e,n){for(let o=n.length-1;o>=0;o--){let s=n[o];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){let l=this._svgElementFromConfig(s),h=this._extractSvgIconFromSet(l,e,s.options);if(h)return h}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(br(n=>e.svgText=n),$t(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Vt(null):this._fetchIcon(e).pipe(br(n=>e.svgText=n))}_extractSvgIconFromSet(e,n,o){let s=e.querySelector(`[id="${n}"]`);if(!s)return null;let l=s.cloneNode(!0);if(l.removeAttribute("id"),l.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(l,o);if(l.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(l),o);let h=this._svgElementFromString(Jk("<svg></svg>"));return h.appendChild(l),this._setSvgAttributes(h,o)}_svgElementFromString(e){let n=this._document.createElement("DIV");n.innerHTML=e;let o=n.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(e){let n=this._svgElementFromString(Jk("<svg></svg>")),o=e.attributes;for(let s=0;s<o.length;s++){let{name:l,value:h}=o[s];l!=="id"&&n.setAttribute(l,h)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&n.appendChild(e.childNodes[s].cloneNode(!0));return n}_setSvgAttributes(e,n){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),n&&n.viewBox&&e.setAttribute("viewBox",n.viewBox),e}_fetchIcon(e){let{url:n,options:o}=e,s=o?.withCredentials??!1;if(!this._httpClient)throw Cje();if(n==null)throw Error(`Cannot fetch icon from URL "${n}".`);let l=this._sanitizer.sanitize(ud.RESOURCE_URL,n);if(!l)throw upe(n);let h=this._inProgressUrlFetches.get(l);if(h)return h;let p=this._httpClient.get(l,{responseType:"text",withCredentials:s}).pipe($t(m=>Jk(m)),Ud(()=>this._inProgressUrlFetches.delete(l)),BD());return this._inProgressUrlFetches.set(l,p),p}_addSvgIconConfig(e,n,o){return this._svgIconConfigs.set(ppe(e,n),o),this}_addSvgIconSetConfig(e,n){let o=this._iconSetConfigs.get(e);return o?o.push(n):this._iconSetConfigs.set(e,[n]),this}_svgElementFromConfig(e){if(!e.svgElement){let n=this._svgElementFromString(e.svgText);this._setSvgAttributes(n,e.options),e.svgElement=n}return e.svgElement}_getIconConfigFromResolvers(e,n){for(let o=0;o<this._resolvers.length;o++){let s=this._resolvers[o](n,e);if(s)return xje(s)?new Hy(s.url,null,s.options):new Hy(s,null)}}static{this.\u0275fac=function(n){return new(n||r)(xe(dr,8),xe(xg),xe(Ui,8),xe(gp))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function o4(r){return r.cloneNode(!0)}function ppe(r,i){return r+":"+i}function xje(r){return!!(r.url&&r.options)}var Sje=new At("MAT_ICON_DEFAULT_OPTIONS"),Ije=new At("mat-icon-location",{providedIn:"root",factory:Tje});function Tje(){let r=Et(Ui),i=r?r.location:null;return{getPathname:()=>i?i.pathname+i.search:""}}var mpe=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Aje=mpe.map(r=>`[${r}]`).join(", "),Eje=/^url\(['"]?#(.*?)['"]?\)$/,er=(()=>{class r{get color(){return this._color||this._defaultColor}set color(e){this._color=e}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){let n=this._cleanupFontValue(e);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){let n=this._cleanupFontValue(e);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}constructor(e,n,o,s,l,h){this._elementRef=e,this._iconRegistry=n,this._location=s,this._errorHandler=l,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=pn.EMPTY,h&&(h.color&&(this.color=this._defaultColor=h.color),h.fontSet&&(this.fontSet=h.fontSet)),o||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let n=e.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,n=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){let o=e.childNodes[n];(o.nodeType!==1||o.nodeName.toLowerCase()==="svg")&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>e.classList.remove(o)),n.forEach(o=>e.classList.add(o)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let n=this._elementsWithExternalReferences;n&&n.forEach((o,s)=>{o.forEach(l=>{s.setAttribute(l.name,`url('${e}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(e){let n=e.querySelectorAll(Aje),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<n.length;s++)mpe.forEach(l=>{let h=n[s],p=h.getAttribute(l),m=p?p.match(Eje):null;if(m){let f=o.get(h);f||(f=[],o.set(h,f)),f.push({name:l,value:m[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[n,o]=this._splitIconName(e);n&&(this._svgNamespace=n),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,n).pipe(Tn(1)).subscribe(s=>this._setSvgElement(s),s=>{let l=`Error retrieving icon ${n}:${o}! ${s.message}`;this._errorHandler.handleError(new Error(l))})}}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(eO),oc("aria-hidden"),ie(Ije),ie(gp),ie(Sje,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(n,o){n&2&&(yi("data-mat-icon-type",o._usingFontIcon()?"font":"svg")("data-mat-icon-name",o._svgName||o.fontIcon)("data-mat-icon-namespace",o._svgNamespace||o.fontSet)("fontIcon",o._usingFontIcon()?o.fontIcon:null),Hr(o.color?"mat-"+o.color:""),oi("mat-icon-inline",o.inline)("mat-icon-no-color",o.color!=="primary"&&o.color!=="accent"&&o.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Xt],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[an,yt],ngContentSelectors:bje,decls:1,vars:0,template:function(n,o){n&1&&(Qi(),pi(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return r})(),jn=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[on,on]})}}return r})();var fpe=Ul({passive:!0}),gpe=(()=>{class r{constructor(e,n){this._platform=e,this._ngZone=n,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Na;let n=ac(e),o=this._monitoredElements.get(n);if(o)return o.subject;let s=new Dt,l="cdk-text-field-autofilled",h=p=>{p.animationName==="cdk-text-field-autofill-start"&&!n.classList.contains(l)?(n.classList.add(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0}))):p.animationName==="cdk-text-field-autofill-end"&&n.classList.contains(l)&&(n.classList.remove(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{n.addEventListener("animationstart",h,fpe),n.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(n,{subject:s,unlisten:()=>{n.removeEventListener("animationstart",h,fpe)}}),s}stopMonitoring(e){let n=ac(e),o=this._monitoredElements.get(n);o&&(o.unlisten(),o.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((e,n)=>this.stopMonitoring(n))}static{this.\u0275fac=function(n){return new(n||r)(xe(Hn),xe(ci))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var _pe=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({})}}return r})();var hW=new At("MAT_INPUT_VALUE_ACCESSOR"),Dje=["button","checkbox","file","hidden","image","radio","range","reset","submit"],kje=0,hu=(()=>{class r{get disabled(){return this._disabled}set disabled(e){this._disabled=tl(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Dl.required)??!1}set required(e){this._required=tl(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&H9().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._ensureWheelDefaultBehavior()}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=tl(e)}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,n,o,s,l,h,p,m,f,g){this._elementRef=e,this._platform=n,this.ngControl=o,this._autofillMonitor=m,this._ngZone=f,this._formField=g,this._uid=`mat-input-${kje++}`,this._webkitBlinkWheelListenerAttached=!1,this.focused=!1,this.stateChanges=new Dt,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(w=>H9().has(w)),this._iOSKeyupListener=w=>{let A=w.target;!A.value&&A.selectionStart===0&&A.selectionEnd===0&&(A.setSelectionRange(1,1),A.setSelectionRange(0,0))},this._webkitBlinkWheelListener=()=>{};let y=this._elementRef.nativeElement,_=y.nodeName.toLowerCase();this._inputValueAccessor=p||y,this._previousNativeValue=this.value,this.id=this.id,n.IOS&&f.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new Sw(h,o,l,s,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=_==="select",this._isTextarea=_==="textarea",this._isInFormField=!!g,this._isNativeSelect&&(this.controlType=y.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener),this._webkitBlinkWheelListenerAttached&&this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){let e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){let e=this._getPlaceholder();if(e!==this._previousPlaceholder){let n=this._elementRef.nativeElement;this._previousPlaceholder=e,e?n.setAttribute("placeholder",e):n.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Dje.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let e=this._elementRef.nativeElement,n=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&n&&n.label)}else return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}_ensureWheelDefaultBehavior(){!this._webkitBlinkWheelListenerAttached&&this._type==="number"&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("wheel",this._webkitBlinkWheelListener)}),this._webkitBlinkWheelListenerAttached=!0),this._webkitBlinkWheelListenerAttached&&this._type!=="number"&&(this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener),this._webkitBlinkWheelListenerAttached=!0)}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(Hn),ie(du,10),ie(fw,8),ie(th,8),ie(zy),ie(hW,10),ie(gpe),ie(ci),ie(Gy,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(n,o){n&1&&Oe("focus",function(){return o._focusChanged(!0)})("blur",function(){return o._focusChanged(!1)})("input",function(){return o._onInput()}),n&2&&(hd("id",o.id)("disabled",o.disabled)("required",o.required),yi("name",o.name||null)("readonly",o.readonly&&!o._isNativeSelect||null)("aria-invalid",o.empty&&o.required?null:o.errorState)("aria-required",o.required)("id",o.id),oi("mat-input-server",o._isServer)("mat-mdc-form-field-textarea-control",o._isInFormField&&o._isTextarea)("mat-mdc-form-field-input-control",o._isInFormField)("mdc-text-field__input",o._isInFormField)("mat-mdc-native-select-inline",o._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[Bi([{provide:Aw,useExisting:r}]),Jn]})}}return r})(),pu=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[on,Wa,Wa,_pe,on]})}}return r})();var Oje=["determinateSpinner"];function Pje(r,i){if(r&1&&(jl(),ne(0,"svg",11),wt(1,"circle",12),ce()),r&2){let e=ae();yi("viewBox",e._viewBox()),q(),vo("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),yi("r",e._circleRadius())}}var Rje=new At("mat-progress-spinner-default-options",{providedIn:"root",factory:Fje});function Fje(){return{diameter:ype}}var ype=100,Lje=10,s4=(()=>{class r{get color(){return this._color||this._defaultColor}set color(e){this._color=e}constructor(e,n,o){this._elementRef=e,this._defaultColor="primary",this._value=0,this._diameter=ype,this._noopAnimations=n==="NoopAnimations"&&!!o&&!o._forceAnimations,this.mode=e.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",o&&(o.color&&(this.color=this._defaultColor=o.color),o.diameter&&(this.diameter=o.diameter),o.strokeWidth&&(this.strokeWidth=o.strokeWidth))}get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_circleRadius(){return(this.diameter-Lje)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(so,8),ie(Rje))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(n,o){if(n&1&&Ni(Oje,5),n&2){let s;Yt(s=Kt())&&(o._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(n,o){n&2&&(yi("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",o.mode==="determinate"?o.value:null)("mode",o.mode),Hr("mat-"+o.color),vo("width",o.diameter,"px")("height",o.diameter,"px")("--mdc-circular-progress-size",o.diameter+"px")("--mdc-circular-progress-active-indicator-width",o.diameter+"px"),oi("_mat-animation-noopable",o._noopAnimations)("mdc-circular-progress--indeterminate",o.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",Oo],diameter:[2,"diameter","diameter",Oo],strokeWidth:[2,"strokeWidth","strokeWidth",Oo]},exportAs:["matProgressSpinner"],standalone:!0,features:[an,yt],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(n,o){if(n&1&&(We(0,Pje,2,8,"ng-template",null,0,Vo),ne(2,"div",2,1),jl(),ne(4,"svg",3),wt(5,"circle",4),ce()(),Q0(),ne(6,"div",5)(7,"div",6)(8,"div",7),_a(9,8),ce(),ne(10,"div",9),_a(11,8),ce(),ne(12,"div",10),_a(13,8),ce()()()),n&2){let s=ji(1);q(4),yi("viewBox",o._viewBox()),q(),vo("stroke-dasharray",o._strokeCircumference(),"px")("stroke-dashoffset",o._strokeDashOffset(),"px")("stroke-width",o._circleStrokeWidth(),"%"),yi("r",o._circleRadius()),q(4),ee("ngTemplateOutlet",s),q(2),ee("ngTemplateOutlet",s),q(2),ee("ngTemplateOutlet",s)}},dependencies:[Ry],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-app-primary))}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}}return r})();var bpe=ld(vpe(),1);var Nje="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wpe=(()=>{class r{static PADCHAR="=";static ALPHA=Nje;static getByte(e,n){return e.charCodeAt(n)}static getByte64(e,n){return this.ALPHA.indexOf(e.charAt(n))}static decode(e){let n=0,o,s,l=e.length,h=[];if(e=String(e),l===0)return e;for(e.charAt(l-1)===this.PADCHAR&&(n=1,e.charAt(l-2)===this.PADCHAR&&(n=2),l-=4),o=0;o<l;o+=4)s=this.getByte64(e,o)<<18|this.getByte64(e,o+1)<<12|this.getByte64(e,o+2)<<6|this.getByte64(e,o+3),h.push(String.fromCharCode(s>>16,s>>8&255,s&255));switch(n){case 1:s=this.getByte64(e,o)<<18|this.getByte64(e,o+1)<<12|this.getByte64(e,o+2)<<6,h.push(String.fromCharCode(s>>16,s>>8&255));break;case 2:s=this.getByte64(e,o)<<18|this.getByte64(e,o+1)<<12,h.push(String.fromCharCode(s>>16));break}return h.join("")}static encode(e){e=String(e);let n,o,s=[],l=e.length-e.length%3;if(e.length===0)return e;for(n=0;n<l;n+=3)o=this.getByte(e,n)<<16|this.getByte(e,n+1)<<8|this.getByte(e,n+2),s.push(this.ALPHA.charAt(o>>18)),s.push(this.ALPHA.charAt(o>>12&63)),s.push(this.ALPHA.charAt(o>>6&63)),s.push(this.ALPHA.charAt(o&63));switch(e.length-l){case 1:o=this.getByte(e,n)<<16,s.push(this.ALPHA.charAt(o>>18)+this.ALPHA.charAt(o>>12&63)+this.PADCHAR+this.PADCHAR);break;case 2:o=this.getByte(e,n)<<16|this.getByte(e,n+1)<<8,s.push(this.ALPHA.charAt(o>>18)+this.ALPHA.charAt(o>>12&63)+this.ALPHA.charAt(o>>6&63)+this.PADCHAR);break}return s.join("")}}return r})();function xx(r){return r.map(i=>i instanceof zs?i.toString():i!==void 0?JSON.parse(JSON.stringify(i)):i)}var c_=bpe.default.getParser(window.navigator.userAgent),wx=class r{static copy(i){let e=!1;if(typeof i=="string"){let n=r.createTextArea(i);r.selectText(n),e=r.copyTextToClipboard(),r.destroyTextArea(n)}else r.selectText(i),e=r.copyTextToClipboard();return e}static createTextArea(i){let e=document.createElement("textArea");return e.value=i,document.body.appendChild(e),e}static destroyTextArea(i){document.body.removeChild(i)}static selectText(i){if(c_.getOSName()==="iOS"){let e=i.contentEditable,n=i.readOnly,o=document.createRange(),s=window.getSelection();i.contenteditable=!0,i.readonly=!1,o.selectNodeContents(i),s.removeAllRanges(),s.addRange(o),i.setSelectionRange(0,999999),i.contentEditable=e,i.readOnly=n}else i.select()}static copyTextToClipboard(){return c_.getOSName()==="iOS"&&c_.compareVersion("<10")?!1:document.execCommand("copy")}};function mW(r,i,e){let n=(1<<e)-1;return r>>i&n}var l4=class{base64Index=new Map;indexBase64=new Map;constructor(){this.generateBase64Index()}generateBase64Index(){for(let i=0;i<26;i++)this.base64Index.set(String.fromCharCode(65+i),i),this.indexBase64.set(i,String.fromCharCode(65+i));for(let i=0;i<26;i++)this.base64Index.set(String.fromCharCode(97+i),i+26),this.indexBase64.set(i+26,String.fromCharCode(97+i));for(let i=0;i<10;i++)this.base64Index.set(String.fromCharCode(48+i),i+52),this.indexBase64.set(i+52,String.fromCharCode(48+i));this.base64Index.set("+",62),this.base64Index.set("/",63),this.indexBase64.set(62,"+"),this.indexBase64.set(63,"/")}compressBlob(i){return i?new si(n=>{let o=new FileReader;o.readAsDataURL(i),o.onload=()=>{let s=o.result.valueOf(),l=s.substr(s.indexOf(",")+1),h=this.compressStringBase64(l),p={length:l.length,type:i.type,object:h};n.next(p)}}):void 0}decompressBlob(i){let e=i.object,n=i.length,o=this.decompressStringBase64(e,n),s=atob(o),l=new Array(s.length);for(let m=0;m<s.length;m++)l[m]=s.charCodeAt(m);let h=new Uint8Array(l);return new Blob([h],{type:i.type})}compressStringBase64(i){let e="",n=16,o=0,s=0;for(let l of i){let h=this.base64Index.get(l);n>6?(n-=6,o+=h<<n):(s=6-n,o+=h>>s,e+=String.fromCharCode(o),o=h<<16-s,n=16-s)}return i.length%8!==0&&(e+=String.fromCharCode(o)),"\u2603"+e}decompressStringBase64(i,e){if(!i)return;if(i.charCodeAt(0)!==9731)return i;let n=0,o=0,s=16,l="",h=1,p=i.charCodeAt(h);for(let m=0;m<e;m++)s>6?(s-=6,n=mW(p,s,6),l+=this.indexBase64.get(n)):(o=6-s,n=mW(p,0,s)<<o,p=i.charCodeAt(++h),n+=mW(p,16-o,o),l+=this.indexBase64.get(n),s=16-o);return l}},a4=function(r){return r.ADDED="added",r.DELETED="deleted",r.MODIFIED="modified",r}(a4||{}),d_=class r{static diff(i,e,n=4){if(!i&&!e)return"";if(!i)return'<span class="inserted">'+e+"</span>";if(!e)return'<span class="deleted">'+i+"</span>";i=i.toString(),e=e.toString();let o=r.getChanges(i,e,"",n),s=e.slice(o.mtc.length+o.ins.length+o.sbs.length),l=i.slice(o.mtc.length+o.del.length+o.sbs.length),h="";return o.del.length>0&&(o.del='<span class="deleted">'+o.del+"</span>"),o.ins.length>0&&(o.ins='<span class="inserted">'+o.ins+"</span>"),h=o.mtc+o.del+o.ins+o.sbs,h+=l!==""||s!==""?r.diff(l,s,n):"",h}static getMatchingSubstring(i,e,n){let o=0,s=!1,l=i.length,h={fis:l,mtc:n,sbs:""};for(;o<l;)e[o]===i[o]?s?h.sbs+=i[o]:(s=!0,h.fis=o,h.sbs=i[o]):s?o=l:o=o,++o;return h}static getChanges(i,e,n,o){let s=i.length>=i.length,[l,h]=s?[i,e]:[e,i],p=0;for(;h[p]===l[p]&&p<h.length;)++p;l=l.split("").slice(p),h=h.slice(p);let m=l.length,f={fis:h.length,fil:m,sbs:"",mtc:n+e.slice(0,p)},g={sbs:""};if(h!=="")for(let y=0;y<m&&g.sbs.length<o;y++)g=r.getMatchingSubstring(h,r.rotateArray(l,y),f.mtc),g.fil=y<m-g.fis?g.fis+y:g.fis-m+y,g.sbs.length>f.sbs.length&&(f=g);return[f.del,f.ins]=s?[l.slice(0,f.fil).join(""),h.slice(0,f.fis)]:[h.slice(0,f.fis),l.slice(0,f.fil).join("")],f.del.indexOf(" ")===-1||f.ins.indexOf(" ")===-1||f.del===""||f.ins===""||f.sbs===""?f:r.getChanges(f.del,f.ins,f.mtc,o)}static rotateArray(i,e){let n=i.length,o=new Array(i.length);if(e%n===0)return i.slice();for(let s=0;s<n;s++)o[s]=i[(s+(n+e%n))%n];return o}static isValidNumber(i){return!isNaN(Number(i))}static isOctalNumber(i){return r.isValidNumber(i)&&i.startsWith("0")&&i.length>1}},c4=class r{static findChanges(i,e,n=[]){let o={added:[],deleted:[],modified:[]};if(!i||!e)return o;let s=[...i],l=[...e];for(let h of s){let p=l.findIndex(_=>_.id===h.id);if(p===-1){o.deleted.push({change:{type:a4.DELETED},value:h});continue}let m=l.splice(p,1)[0],f=JSON.parse(JSON.stringify(h)),g=JSON.parse(JSON.stringify(m)),y=r.compareObject(f,g,void 0,n);y.length&&o.modified.push({change:{type:a4.MODIFIED,keysChanged:y},value:f,oldValue:h,newValue:m})}return o.added=l.map(h=>({change:{type:a4.ADDED},value:h})),o}static compareObject(i,e,n,o=[]){let s=JSON.parse(JSON.stringify(i)),l=JSON.parse(JSON.stringify(e)),h=new Set([...Object.keys(i),...Object.keys(e)]),p=[];return h.forEach(m=>{let f=n?`${n}.${m}`:m;o.indexOf(f)===-1&&(Array.isArray(i[m])&&(i[m]=i[m].join(",<br>")),Array.isArray(e[m])&&(e[m]=e[m].join(",<br>")),typeof i[m]=="object"&&typeof e[m]=="object"&&i[m]!==null&&e[m]!==null?p=p.concat(this.compareObject(i[m],e[m],f)):i[m]!==e[m]&&(p.push({key:f,oldValue:s[m],newValue:l[m]}),i[m]=d_.diff(i[m],e[m])))}),p}},Bje=new RegExp("(d{4}-[01]d-[0-3]dT[0-2]d:[0-5]d:[0-5]d.d+)|(d{4}-[01]d-[0-3]dT[0-2]d:[0-5]d:[0-5]d)|(d{4}-[01]d-[0-3]dT[0-2]d:[0-5]d)"),jje=new RegExp("(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\\.[0-9]+)?(Z)?");function Cpe(r){if(!Bje.test(r)&&!jje.test(r))return!1;let i=new Date(r);return i instanceof Date&&!isNaN(i.getTime())}var mA=class{static create(i,e,n){let o=i.createElement(e);for(let s in n)o[s]=n[s];return o}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}};function xpe(r,i){return st(this,null,function*(){let{utils:e}=yield import("./chunk-5JEDXYVS.js");return e.book_new(r,i)})}function Spe(r,i,e,n){return st(this,null,function*(){let{utils:o}=yield import("./chunk-5JEDXYVS.js"),s=o.json_to_sheet(i,n?.json2SheetOpts);i?.length&&(s["!cols"]=Vje(i));let l=31,h=r.length>=l?r.substring(0,l):r;e.SheetNames.includes(h)&&(h=`${h.substring(0,l-3)}_${e.SheetNames.length}`),o.book_append_sheet(e,s,h,n?.bookAppendSheetOpts?.roll)})}function Ipe(r,i,e){return st(this,null,function*(){let n=i.toLowerCase().endsWith(".xlsx")?i.slice(0,-5):i,{writeFile:o}=yield import("./chunk-5JEDXYVS.js");o(r,`${n}.xlsx`,e)})}function Vje(r){return Object.keys(r[0]).map(e=>({wch:$je(e,r)}))}function $je(r,i){return i.reduce((e,n)=>Math.max(e,n[r]?.toString().length??0),r.length)}function fW(r,i,e){let n=`data:${i},${encodeURIComponent(r)}`;Ape(n,e)}function Tpe(r,i){let e=window.URL.createObjectURL(r);Ape(e,i)}function Ape(r,i){let e=document.createElement("a");e.setAttribute("href",r),e.setAttribute("download",i),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}function Epe(r){try{return JSON.parse(r)&&!!r}catch{return!1}}var Ln=class r{static resolve(i,e){let n=e.replace(/\[/g,".").replace(/\]/g,"").split("."),o=i;for(;n.length;){if(typeof o!="object")return;o=o[n.shift()]}return o}static isObject(i){return i&&typeof i=="object"&&!Array.isArray(i)&&i!==null&&!(i instanceof Date)}static mergeDeep(i,e,n=!1){let o=Object.assign({},i);return r.isObject(i)&&r.isObject(e)&&Object.keys(e).filter(s=>!n||e[s]!==void 0).forEach(s=>{r.isObject(e[s])?s in i?o[s]=r.mergeDeep(i[s],e[s],n):Object.assign(o,{[s]:e[s]}):Object.assign(o,{[s]:e[s]})}),o}static copyDeep(i){let e=Array.isArray(i)?[]:{};for(let n in i)if(i.hasOwnProperty(n)){let o=i[n];o&&typeof o=="object"?e[n]=this.copyDeep(o):e[n]=o}return e}static removeDuplicateCaseInsensitive(i){let e={},n={},o=[];for(let s in i)if(i.hasOwnProperty(s)){let l=s.toUpperCase();e.hasOwnProperty(l)?e[l].push({[s]:i[s]}):e[l]=[{[s]:i[s]}],o.push({key:s,count:s.replace(/[^A-Z]/g,"").length})}for(let s in e)if(e.hasOwnProperty(s)&&e.hasOwnProperty(s)){let l=e[s];if(l.length===1){let h=l[0];n[s]=h[Object.keys(h)[0]]}else if(l.length>1){let h=o.filter(p=>p.key.toLowerCase()===s.toLowerCase()).reduce((p,m)=>p.y<m.y?p:m);n[h.key.toUpperCase()]=i[h.key]}}for(let s in i)i.hasOwnProperty(s)&&delete i[s];for(let s in n)n.hasOwnProperty(s)&&(i[s]=n[s])}static removeUndefined(i){let e={};return r.isObject(i)?(Object.keys(i).filter(n=>i[n]!==void 0).forEach(n=>{r.isObject(i[n])||Array.isArray(i[n])?e[n]=r.removeUndefined(i[n]):e[n]=i[n]}),e):Array.isArray(i)?i.map(n=>r.removeUndefined(n)):i}static removeNull(i){let e={};return r.isObject(i)?(Object.keys(i).filter(n=>i[n]!==null).forEach(n=>{r.isObject(i[n])||Array.isArray(i[n])?e[n]=r.removeNull(i[n]):e[n]=i[n]}),e):Array.isArray(i)?i.map(n=>r.removeNull(n)):i}static naturalCompare(i,e,n="asc",o){if(n==="desc"&&(e=[i,i=e][0]),i===null||i===""||i===void 0||e===null||e===""||e===void 0){let h=i===e?0:i===void 0?3:e===void 0?-3:i===null?2:e===null?-2:i===""?1:-1;return n==="desc"?o!==!1?h:h*-1:o===!0?h*-1:h}let s=[],l=[];for(i=""+i,e=""+e,i.replace(/(\d+)|(\D+)/g,(h,p,m)=>{s.push([p||1/0,m||""])}),e.replace(/(\d+)|(\D+)/g,(h,p,m)=>{l.push([p||1/0,m||""])});s.length&&l.length;){let h=s.shift(),p=l.shift(),m=h[0]-p[0]||h[1].localeCompare(p[1]);if(m)return m}return s.length-l.length}static objectsAreEquivalent(i,e){if(i===e)return!0;let n=Object.getOwnPropertyNames(i),o=Object.getOwnPropertyNames(e);if(n.length!==o.length)return!1;for(let s of n)if(i[s]!==e[s])return!1;return!0}static removeKeys(i,e){return Object.keys(i).filter(o=>e.indexOf(o)<0).reduce((o,s)=>(o[s]=i[s],o),{})}static isEmpty(i){return Object.keys(i).length===0}},fA=class{static roundToNDecimal(i,e=3){let n=Math.pow(10,e);return Math.round(i*n)/n}};function gA(r){return r.reduce((i,e)=>(i[e]=e,i),Object.create(null))}var Uje="assets/igo2/core/theming/prebuilt-themes",Mpe="theme-styles";function Dpe(r,i,e=Uje){let n=`${e}/${i}.css`,o=r.getElementsByTagName("head")[0],s=r.getElementById(Mpe);s?s.href=n:zje(r,n,o)}function zje(r,i,e){let n=mA.create(r,"link",{id:Mpe,rel:"stylesheet",href:i});e.appendChild(n)}var kpe=".",d4=class{config;_data;getChildren;getId;getLevel;constructor(i,e){this.config=e,this.getChildren=e.getChildren,this.getId=e.getId,this.getLevel=e.getLevel,this._data=this.sortDeep(i)}get data(){return this._data}get flattened(){return this.flatten([...this.data])}add(...i){return this.sortDeep(i),this._data.unshift(...i),i}addBefore(i,...e){this.sortDeep(e),this._addBefore(i,this._data,...e)}remove(...i){return this._remove(...i)}clear(){this._data=[]}exist(i){let e=this.getId(i);return this.flattened.some(n=>this.getId(n)===e)}moveTo(i,...e){let n=[...i],o=n.pop(),s=this.getAncestorAtPosition(n),l=o===-1||o>=s.length?null:this.getId(s[o]),h=e.filter(p=>l!==this.getId(p));return this.move(l,s,...h)}getPosition(i){let e=this.getId(i);return this._getPosition(e)}_addBefore(i,e=this._data,...n){if(!i)return e.push(...n),n;let o=this.getIndex(i,e);return e.splice(o,0,...n),n}_remove(...i){return i.reduce((e,n)=>{let o=this.getNodeAncestor(n);if(!o)return;let s=this.getIndex(this.getId(n),o);if(s!==-1)return o.splice(s,1),e.concat(n)},[])}move(i,e,...n){return this._remove(...n),this._addBefore(i,e,...n)}_getPosition(i,e=[],n=this._data){let o;return n.some((s,l)=>{if(this.getId(s)===i)return o=e.concat(l),!0;let h=this.getChildren(s);if(h){let p=this._getPosition(i,e.concat(l),h);if(p)return o=p,!0}return!1}),o}getAncestorAtPosition(i){if(!i.length)return this._data;let e=this.getNodeByPosition(i);return this.getChildren(e)}sortDeep(i=this._data){return i.forEach(e=>{let n=this.getChildren(e);n&&this.sortDeep(n)}),this.sort(i)}sort(i){let e=i.sort((n,o)=>this.getLevel(n)-this.getLevel(o));return this.config.reverse?e.reverse():e}_getNodeById(i,e=this._data){let n;return e.some(o=>{if(this.getId(o)===i)return n=o,!0;let s=this.getChildren(o);return!!(s&&(n=this._getNodeById(i,s),n))}),n}getNodeByPosition(i){return i.length>1?i.reduce((e,n)=>{let o=e?this.getChildren(e):this._data;return this._getByIndex(n,o)},null):this._getByIndex(i[0])}_getByIndex(i,e=this._data){return e[i]}getNodeAncestor(i){let e=this.getId(i);return this.getAncestorById(e)}getAncestorById(i,e=this._data){let n;return e.some(o=>{if(this.getId(o)===i)return n=e,!0;let s=this.getChildren(o);return!!(s&&(n=this.getAncestorById(i,s),n))}),n}flatten(i){return i.reduce((e,n)=>{let o=this.getChildren(n);if(o){let s=this.flatten(o);e.push(n,...s)}else e.push(n);return e},[])}getIndex(i,e){return e.findIndex(n=>this.getId(n)===i)}};function Ew(){return((1+Math.random())*65536|0).toString(16).substring(1)}function Gs(){return`${Ew()}${Ew()}-${Ew()}-${Ew()}-${Ew()}-${Ew()}${Ew()}${Ew()}`.toLowerCase()}var Ho=function(r){return r[r.Error=0]="Error",r[r.Done=1]="Done",r[r.Working=2]="Working",r[r.Waiting=3]="Waiting",r}(Ho||{}),Cx=class{status$=new Dt;status$$;get status(){return this._status}set status(i){this._status=i,this.status$.next(i)}_status;subscribe(i,e){this.watch(),this.status$$=this.status$.pipe(cm()).subscribe(()=>{i.call(e,this)})}unsubscribe(){this.unwatch(),this.status$$!==void 0&&(this.status$$.unsubscribe(),this.status$$=void 0),this.status=Ho.Waiting}};var Ppe={showMenuButton:{alternativeKey:"menu.button.visible",mayBeRemoveIn:new Date("2024-06-06")},menuButtonReverseColor:{alternativeKey:"menu.button.useThemeColor",mayBeRemoveIn:new Date("2024-06-06")},importWithStyle:{alternativeKey:"importExport.importWithStyle",mayBeRemoveIn:new Date("2024-06-06")},hasGeolocateButton:{alternativeKey:"geolocate.button.visible",mayBeRemoveIn:new Date("2024-06-06")}},Gje=new Map(Object.entries(Ppe).filter(([r,i])=>i.alternativeKey).map(([r,i])=>[i.alternativeKey,{deprecatedKey:r}])),gW={lib:"18.0.2",releaseDate:1755521264168},Ri=(()=>{class r{config;httpClient;configDeprecated=new Map(Object.entries(Ppe));_isLoaded$=new mt(null);isLoaded$=this._isLoaded$.asObservable();constructor(e){this.httpClient=new dr(e)}getConfigs(){return Array.from(this.configDeprecated.keys()).map(e=>{Ln.resolve(this.config,e)!==void 0&&this.handleDeprecatedConfig(e)}),this.config}getConfig(e,n){let o=Ln.resolve(this.config,e);return this.configDeprecated.get(e)&&o!==void 0?this.handleDeprecatedConfig(e):o===void 0&&(o=this.handleDeprecationPossibility(e)),o??n}handleDeprecatedConfig(e){let n=this.configDeprecated.get(e),o=`This config (${e}) is deprecated and will be removed shortly`;n.alternativeKey&&(o+=` You should use this key (${n.alternativeKey}) as an alternate solution`),new Date>=n.mayBeRemoveIn?console.error(o):console.warn(o)}handleDeprecationPossibility(e){let n=Gje.get(e);if(n)return this.getConfig(n.deprecatedKey)}load(e){let n=e.default;return e.path?new Promise(o=>{this.httpClient.get(e.path).pipe(Fn(s=>(console.log(`Configuration file ${e.path} could not be read`),this._isLoaded$.next(!1),o(!0),dd(s.error||"Server error")))).subscribe(s=>{this.config=Ln.mergeDeep(Ln.mergeDeep({version:gW},n),s),this._isLoaded$.next(!0),o(!0)})}):(this.config=n,this._isLoaded$.next(!0),!0)}static \u0275fac=function(n){return new(n||r)(xe(Cg))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Ope=new At("configOptions");function u4(r){return Bl([{provide:Ope,useValue:r},{provide:hm,useFactory:Hje,multi:!0,deps:[Ri,Ope]}])}function Hje(r,i){return()=>r.load(i)}var kl=function(r){return r.SESSION="Session",r.LOCAL="Local",r}(kl||{}),Wy=function(r){return r.ADDED="Added",r.MODIFIED="Modified",r.REMOVED="Removed",r.CLEARED="Cleared",r}(Wy||{}),nO=class{options;storageChange$=new mt(void 0);constructor(i){this.options=i.getConfig("storage")||{key:"igo"}}get(i,e){let n;if((!e||e===kl.SESSION)&&(n=sessionStorage.getItem(`${this.options.key}.${i}`)),(e===kl.LOCAL||!n&&!e)&&(n=localStorage.getItem(`${this.options.key}.${i}`)),n)try{return JSON.parse(n)}catch{return n}return n}set(i,e,n=kl.LOCAL){let o=this.get(i,n);n===kl.SESSION?sessionStorage.setItem(`${this.options.key}.${i}`,JSON.stringify(e)):localStorage.setItem(`${this.options.key}.${i}`,JSON.stringify(e));let s=this.get(i,n);s!==o&&this.storageChange$.next({key:i,scope:n,event:o!==void 0?Wy.MODIFIED:Wy.ADDED,previousValue:o,currentValue:s})}remove(i,e=kl.LOCAL){let n=this.get(i,e);e===kl.SESSION?sessionStorage.removeItem(`${this.options.key}.${i}`):localStorage.removeItem(`${this.options.key}.${i}`),this.storageChange$.next({key:i,scope:e,event:Wy.REMOVED,previousValue:n})}clear(i=kl.LOCAL){i===kl.SESSION?sessionStorage.clear():localStorage.clear(),this.storageChange$.next({scope:i,event:Wy.CLEARED})}},wo=(()=>{class r extends nO{config;constructor(e){super(e),this.config=e}static \u0275fac=function(n){return new(n||r)(xe(Ri))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Sx=class extends Error{};Sx.prototype.name="InvalidTokenError";function Wje(r){return decodeURIComponent(atob(r).replace(/(.)/g,(i,e)=>{let n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function qje(r){let i=r.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Wje(i)}catch{return atob(i)}}function Rpe(r,i){if(typeof r!="string")throw new Sx("Invalid token specified: must be a string");i||(i={});let e=i.header===!0?0:1,n=r.split(".")[e];if(typeof n!="string")throw new Sx(`Invalid token specified: missing part #${e+1}`);let o;try{o=qje(n)}catch(s){throw new Sx(`Invalid token specified: invalid base64 for part #${e+1} (${s.message})`)}try{return JSON.parse(o)}catch(s){throw new Sx(`Invalid token specified: invalid json for part #${e+1} (${s.message})`)}}var qy=class{},yW=(()=>{class r extends qy{getTranslation(e){return Vt({})}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})();static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),Ix=class{},Fpe=(()=>{class r{handle(e){return e.key}static \u0275fac=function(n){return new(n||r)};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})();function h4(r,i){if(r===i)return!0;if(r===null||i===null)return!1;if(r!==r&&i!==i)return!0;let e=typeof r,n=typeof i,o,s,l;if(e==n&&e=="object")if(Array.isArray(r)){if(!Array.isArray(i))return!1;if((o=r.length)==i.length){for(s=0;s<o;s++)if(!h4(r[s],i[s]))return!1;return!0}}else{if(Array.isArray(i))return!1;l=Object.create(null);for(s in r){if(!h4(r[s],i[s]))return!1;l[s]=!0}for(s in i)if(!(s in l)&&typeof i[s]<"u")return!1;return!0}return!1}function Mw(r){return typeof r<"u"&&r!==null}function _W(r){return r&&typeof r=="object"&&!Array.isArray(r)}function Bpe(r,i){let e=Object.assign({},r);return _W(r)&&_W(i)&&Object.keys(i).forEach(n=>{_W(i[n])?n in r?e[n]=Bpe(r[n],i[n]):Object.assign(e,{[n]:i[n]}):Object.assign(e,{[n]:i[n]})}),e}var _A=class{},Lpe=(()=>{class r extends _A{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(e,n){let o;return typeof e=="string"?o=this.interpolateString(e,n):typeof e=="function"?o=this.interpolateFunction(e,n):o=e,o}getValue(e,n){let o=typeof n=="string"?n.split("."):[n];n="";do n+=o.shift(),Mw(e)&&Mw(e[n])&&(typeof e[n]=="object"||!o.length)?(e=e[n],n=""):o.length?n+=".":e=void 0;while(o.length);return e}interpolateFunction(e,n){return e(n)}interpolateString(e,n){return n?e.replace(this.templateMatcher,(o,s)=>{let l=this.getValue(n,s);return Mw(l)?l:o}):e}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})();static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),yA=class{},Npe=(()=>{class r extends yA{compile(e,n){return e}compileTranslations(e,n){return e}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})();static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),p4=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new it;onLangChange=new it;onDefaultLangChange=new it},vW=new At("USE_STORE"),bW=new At("USE_DEFAULT_LANG"),wW=new At("DEFAULT_LANGUAGE"),CW=new At("USE_EXTEND"),oO=(()=>{class r{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new it;_onLangChange=new it;_onDefaultLangChange=new it;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(e){this.isolate?this._defaultLang=e:this.store.defaultLang=e}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(e){this.isolate?this._currentLang=e:this.store.currentLang=e}get langs(){return this.isolate?this._langs:this.store.langs}set langs(e){this.isolate?this._langs=e:this.store.langs=e}get translations(){return this.isolate?this._translations:this.store.translations}set translations(e){this.isolate?this._translations=e:this.store.translations=e}constructor(e,n,o,s,l,h=!0,p=!1,m=!1,f){this.store=e,this.currentLoader=n,this.compiler=o,this.parser=s,this.missingTranslationHandler=l,this.useDefaultLang=h,this.isolate=p,this.extend=m,f&&this.setDefaultLang(f)}setDefaultLang(e){if(e===this.defaultLang)return;let n=this.retrieveTranslations(e);typeof n<"u"?(this.defaultLang==null&&(this.defaultLang=e),n.pipe(Tn(1)).subscribe(o=>{this.changeDefaultLang(e)})):this.changeDefaultLang(e)}getDefaultLang(){return this.defaultLang}use(e){if(e===this.currentLang)return Vt(this.translations[e]);let n=this.retrieveTranslations(e);return typeof n<"u"?(this.currentLang||(this.currentLang=e),n.pipe(Tn(1)).subscribe(o=>{this.changeLang(e)}),n):(this.changeLang(e),Vt(this.translations[e]))}retrieveTranslations(e){let n;return(typeof this.translations[e]>"u"||this.extend)&&(this._translationRequests[e]=this._translationRequests[e]||this.getTranslation(e),n=this._translationRequests[e]),n}getTranslation(e){this.pending=!0;let n=this.currentLoader.getTranslation(e).pipe(GC(1),Tn(1));return this.loadingTranslations=n.pipe($t(o=>this.compiler.compileTranslations(o,e)),GC(1),Tn(1)),this.loadingTranslations.subscribe({next:o=>{this.translations[e]=this.extend&&this.translations[e]?Xe(Xe({},o),this.translations[e]):o,this.updateLangs(),this.pending=!1},error:o=>{this.pending=!1}}),n}setTranslation(e,n,o=!1){n=this.compiler.compileTranslations(n,e),(o||this.extend)&&this.translations[e]?this.translations[e]=Bpe(this.translations[e],n):this.translations[e]=n,this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})}getLangs(){return this.langs}addLangs(e){e.forEach(n=>{this.langs.indexOf(n)===-1&&this.langs.push(n)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(e,n,o){let s;if(n instanceof Array){let l={},h=!1;for(let p of n)l[p]=this.getParsedResult(e,p,o),$c(l[p])&&(h=!0);if(h){let p=n.map(m=>$c(l[m])?l[m]:Vt(l[m]));return Ac(p).pipe($t(m=>{let f={};return m.forEach((g,y)=>{f[n[y]]=g}),f}))}return l}if(e&&(s=this.parser.interpolate(this.parser.getValue(e,n),o)),typeof s>"u"&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(s=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],n),o)),typeof s>"u"){let l={key:n,translateService:this};typeof o<"u"&&(l.interpolateParams=o),s=this.missingTranslationHandler.handle(l)}return typeof s<"u"?s:n}get(e,n){if(!Mw(e)||!e.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(ul(o=>(o=this.getParsedResult(o,e,n),$c(o)?o:Vt(o))));{let o=this.getParsedResult(this.translations[this.currentLang],e,n);return $c(o)?o:Vt(o)}}getStreamOnTranslationChange(e,n){if(!Mw(e)||!e.length)throw new Error('Parameter "key" required');return Bh($d(()=>this.get(e,n)),this.onTranslationChange.pipe(jr(o=>{let s=this.getParsedResult(o.translations,e,n);return typeof s.subscribe=="function"?s:Vt(s)})))}stream(e,n){if(!Mw(e)||!e.length)throw new Error('Parameter "key" required');return Bh($d(()=>this.get(e,n)),this.onLangChange.pipe(jr(o=>{let s=this.getParsedResult(o.translations,e,n);return $c(s)?s:Vt(s)})))}instant(e,n){if(!Mw(e)||!e.length)throw new Error('Parameter "key" required');let o=this.getParsedResult(this.translations[this.currentLang],e,n);if($c(o)){if(e instanceof Array){let s={};return e.forEach((l,h)=>{s[e[h]]=e[h]}),s}return e}else return o}set(e,n,o=this.currentLang){this.translations[o][e]=this.compiler.compile(n,o),this.updateLangs(),this.onTranslationChange.emit({lang:o,translations:this.translations[o]})}changeLang(e){this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),this.defaultLang==null&&this.changeDefaultLang(e)}changeDefaultLang(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}reloadLang(e){return this.resetLang(e),this.getTranslation(e)}resetLang(e){this._translationRequests[e]=void 0,this.translations[e]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let e=window.navigator.languages?window.navigator.languages[0]:null;if(e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,!(typeof e>"u"))return e.indexOf("-")!==-1&&(e=e.split("-")[0]),e.indexOf("_")!==-1&&(e=e.split("_")[0]),e}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let e=window.navigator.languages?window.navigator.languages[0]:null;return e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,e}static \u0275fac=function(n){return new(n||r)(xe(p4),xe(qy),xe(yA),xe(_A),xe(Ix),xe(bW),xe(vW),xe(CW),xe(wW))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})();var hn=(()=>{class r{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(e,n){this.translate=e,this._ref=n}updateValue(e,n,o){let s=l=>{this.value=l!==void 0?l:e,this.lastKey=e,this._ref.markForCheck()};if(o){let l=this.translate.getParsedResult(o,e,n);$c(l.subscribe)?l.subscribe(s):s(l)}this.translate.get(e,n).subscribe(s)}transform(e,...n){if(!e||!e.length)return e;if(h4(e,this.lastKey)&&h4(n,this.lastParams))return this.value;let o;if(Mw(n[0])&&n.length)if(typeof n[0]=="string"&&n[0].length){let s=n[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{o=JSON.parse(s)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${n[0]}`)}}else typeof n[0]=="object"&&!Array.isArray(n[0])&&(o=n[0]);return this.lastKey=e,this.lastParams=n,this.updateValue(e,o),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(s=>{this.lastKey&&s.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(e,o,s.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(s=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,o,s.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,o))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(n){return new(n||r)(ie(oO,16),ie(Ti,16))};static \u0275pipe=fg({name:"translate",type:r,pure:!1});static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),Wh=(()=>{class r{static forRoot(e={}){return{ngModule:r,providers:[e.loader||{provide:qy,useClass:yW},e.compiler||{provide:yA,useClass:Npe},e.parser||{provide:_A,useClass:Lpe},e.missingTranslationHandler||{provide:Ix,useClass:Fpe},p4,{provide:vW,useValue:e.isolate},{provide:bW,useValue:e.useDefaultLang},{provide:CW,useValue:e.extend},{provide:wW,useValue:e.defaultLanguage},oO]}}static forChild(e={}){return{ngModule:r,providers:[e.loader||{provide:qy,useClass:yW},e.compiler||{provide:yA,useClass:Npe},e.parser||{provide:_A,useClass:Lpe},e.missingTranslationHandler||{provide:Ix,useClass:Fpe},{provide:vW,useValue:e.isolate},{provide:bW,useValue:e.useDefaultLang},{provide:CW,useValue:e.extend},{provide:wW,useValue:e.defaultLanguage},oO]}}static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({})}return r})();var On=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({imports:[Wh]})}return r})();var xW=class{httpClient;_isLoaded$=new mt(null);isLoaded$=this._isLoaded$.asObservable();suffix=".json";prefix;options;constructor(i,e){this.httpClient=new dr(i),this.options=e}getTranslation(i){let e=this.httpClient.get(`locale/libs_locale/${i}.json`);if(!this.prefix){let s=this.options.prefix;this.prefix=!s||Array.isArray(s)?s:[s]}if(!this.prefix||this.prefix.length===0)return this._isLoaded$.next(!0),this.options.ignoreLibsLocale?Vt(void 0):e;let o=[...this.prefix.map(s=>this.httpClient.get(`${s}${i}${this.suffix}`))];return this.options.ignoreLibsLocale||o.unshift(e),Ac(o).pipe($t(s=>s.reduce((l,h)=>Ln.mergeDeep(l,h),{})),br(()=>{this._isLoaded$.next(!0)}))}},SW=class extends xW{configService;constructor(i,e,n,o=".json"){super(i,void 0),this.configService=e,this.prefix=n,this.suffix=o}getTranslation(i){return this.configService.isLoaded$.pipe(So(e=>e),jr(()=>(this.options=this.configService.getConfig("language"),super.getTranslation(i))))}},wn=(()=>{class r{translate;language;language$=new mt(void 0);constructor(e){this.translate=e,(!this.translate.defaultLang||!this.matchLanguage(this.translate.defaultLang))&&this.setBrowserLanguage()}setBrowserLanguage(){this.language=this.translate.getBrowserLang();let e=this.getLanguage();this.translate.setDefaultLang(e),this.language$.next(e)}getLanguage(){return this.matchLanguage(this.language)?this.language:"en"}matchLanguage(e){return!!e.match(/en|fr/)}setLanguage(e){this.language=this.matchLanguage(e)?e:"en",ts([this.translate.use(this.language),this.translate.reloadLang(this.language)]).subscribe(()=>{this.language$.next(this.language)})}static \u0275fac=function(n){return new(n||r)(xe(oO))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),IW=class{handle(i){if(!i.translateService.langs.length){let e="Translations are not yet loaded.          Check that the LanguageService is injected.";throw new Error(e)}if(i.key.substr(0,4)==="igo.")throw new Error(`The Key "${i.key}" is missing in locale file.`);return i.key}},jpe=5e3,Vpe=function(r){return r[r.Translation=0]="Translation",r}(Vpe||{});function m4(r){return Bl([...r.providers,{provide:hm,useFactory:i=>()=>i.translate.currentLoader.isLoaded$?.pipe(zz(jpe),So(e=>e===!0),Fn(e=>{throw e.message+=` - Request timed out for language loader after: ${jpe}`,e})),deps:[wn],multi:!0}])}function f4(r){let i={provide:qy,useFactory:$pe,deps:[Cg,Ri]};return{kind:Vpe.Translation,providers:[ZD(Wh.forRoot(Yje(i,r)))]}}var Yje=(r,i)=>({defaultLanguage:i,loader:r??Kje,missingTranslationHandler:{provide:Ix,useClass:IW}});function $pe(r,i){return new SW(r,i,void 0,void 0)}var Kje={provide:qy,useFactory:$pe,deps:[Cg,Ri]};var Upe=["toast-component",""];function Zje(r,i){if(r&1){let e=dt();ne(0,"button",5),Oe("click",function(){Re(e);let o=ae();return Fe(o.remove())}),ne(1,"span",6),Ye(2,"\xD7"),ce()()}}function Qje(r,i){if(r&1&&(zn(0),Ye(1),Gn()),r&2){let e=ae(2);q(),Qt("[",e.duplicatesCount+1,"]")}}function Xje(r,i){if(r&1&&(ne(0,"div"),Ye(1),We(2,Qje,2,1,"ng-container",4),ce()),r&2){let e=ae();Hr(e.options.titleClass),yi("aria-label",e.title),q(),Qt(" ",e.title," "),q(),ee("ngIf",e.duplicatesCount)}}function Jje(r,i){if(r&1&&wt(0,"div",7),r&2){let e=ae();Hr(e.options.messageClass),ee("innerHTML",e.message,Xu)}}function e6e(r,i){if(r&1&&(ne(0,"div",8),Ye(1),ce()),r&2){let e=ae();Hr(e.options.messageClass),yi("aria-label",e.message),q(),Qt(" ",e.message," ")}}function t6e(r,i){if(r&1&&(ne(0,"div"),wt(1,"div",9),ce()),r&2){let e=ae();q(),vo("width",e.width()+"%")}}function i6e(r,i){if(r&1){let e=dt();ne(0,"button",5),Oe("click",function(){Re(e);let o=ae();return Fe(o.remove())}),ne(1,"span",6),Ye(2,"\xD7"),ce()()}}function n6e(r,i){if(r&1&&(zn(0),Ye(1),Gn()),r&2){let e=ae(2);q(),Qt("[",e.duplicatesCount+1,"]")}}function r6e(r,i){if(r&1&&(ne(0,"div"),Ye(1),We(2,n6e,2,1,"ng-container",4),ce()),r&2){let e=ae();Hr(e.options.titleClass),yi("aria-label",e.title),q(),Qt(" ",e.title," "),q(),ee("ngIf",e.duplicatesCount)}}function o6e(r,i){if(r&1&&wt(0,"div",7),r&2){let e=ae();Hr(e.options.messageClass),ee("innerHTML",e.message,Xu)}}function s6e(r,i){if(r&1&&(ne(0,"div",8),Ye(1),ce()),r&2){let e=ae();Hr(e.options.messageClass),yi("aria-label",e.message),q(),Qt(" ",e.message," ")}}function a6e(r,i){if(r&1&&(ne(0,"div"),wt(1,"div",9),ce()),r&2){let e=ae();q(),vo("width",e.width()+"%")}}var TW=class{_attachedHost;component;viewContainerRef;injector;constructor(i,e){this.component=i,this.injector=e}attach(i,e){return this._attachedHost=i,i.attach(this,e)}detach(){let i=this._attachedHost;if(i)return this._attachedHost=void 0,i.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(i){this._attachedHost=i}},AW=class{_attachedPortal;_disposeFn;attach(i,e){return this._attachedPortal=i,this.attachComponentPortal(i,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(i){this._disposeFn=i}},EW=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new Dt;_activate=new Dt;_manualClose=new Dt;_resetTimeout=new Dt;_countDuplicate=new Dt;constructor(i){this._overlayRef=i}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(i,e){i&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}},vA=class{toastId;config;message;title;toastType;toastRef;_onTap=new Dt;_onAction=new Dt;constructor(i,e,n,o,s,l){this.toastId=i,this.config=e,this.message=n,this.title=o,this.toastType=s,this.toastRef=l,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(i){this._onAction.next(i)}onAction(){return this._onAction.asObservable()}},zpe={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},Gpe=new At("ToastConfig"),MW=class extends AW{_hostDomElement;_componentFactoryResolver;_appRef;constructor(i,e,n){super(),this._hostDomElement=i,this._componentFactoryResolver=e,this._appRef=n}attachComponentPortal(i,e){let n=this._componentFactoryResolver.resolveComponentFactory(i.component),o;return o=n.create(i.injector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(o),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(o)),o}_getComponentRootNode(i){return i.hostView.rootNodes[0]}},l6e=(()=>{class r{_document=Et(Ui);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e=this._document.createElement("div");e.classList.add("overlay-container"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),this._containerElement=e}static \u0275fac=function(n){return new(n||r)};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),DW=class{_portalHost;constructor(i){this._portalHost=i}attach(i,e=!0){return this._portalHost.attach(i,e)}detach(){return this._portalHost.detach()}},c6e=(()=>{class r{_overlayContainer=Et(l6e);_componentFactoryResolver=Et(au);_appRef=Et(fs);_document=Et(Ui);_paneElements=new Map;create(e,n){return this._createOverlayRef(this.getPaneElement(e,n))}getPaneElement(e="",n){return this._paneElements.get(n)||this._paneElements.set(n,{}),this._paneElements.get(n)[e]||(this._paneElements.get(n)[e]=this._createPaneElement(e,n)),this._paneElements.get(n)[e]}_createPaneElement(e,n){let o=this._document.createElement("div");return o.id="toast-container",o.classList.add(e),o.classList.add("toast-container"),n?n.getContainerElement().appendChild(o):this._overlayContainer.getContainerElement().appendChild(o),o}_createPortalHost(e){return new MW(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new DW(this._createPortalHost(e))}static \u0275fac=function(n){return new(n||r)};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),g4=(()=>{class r{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(e,n,o,s,l){this.overlay=n,this._injector=o,this.sanitizer=s,this.ngZone=l,this.toastrConfig=Xe(Xe({},e.default),e.config),e.config.iconClasses&&(this.toastrConfig.iconClasses=Xe(Xe({},e.default.iconClasses),e.config.iconClasses))}show(e,n,o={},s=""){return this._preBuildNotification(s,e,n,this.applyConfig(o))}success(e,n,o={}){let s=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(s,e,n,this.applyConfig(o))}error(e,n,o={}){let s=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(s,e,n,this.applyConfig(o))}info(e,n,o={}){let s=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(s,e,n,this.applyConfig(o))}warning(e,n,o={}){let s=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(s,e,n,this.applyConfig(o))}clear(e){for(let n of this.toasts)if(e!==void 0){if(n.toastId===e){n.toastRef.manualClose();return}}else n.toastRef.manualClose()}remove(e){let n=this._findToast(e);if(!n||(n.activeToast.toastRef.close(),this.toasts.splice(n.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let o=this.toasts[this.currentlyActive].toastRef;o.isInactive()||(this.currentlyActive=this.currentlyActive+1,o.activate())}return!0}findDuplicate(e="",n="",o,s){let{includeTitleDuplicates:l}=this.toastrConfig;for(let h of this.toasts){let p=l&&h.title===e;if((!l||p)&&h.message===n)return h.toastRef.onDuplicate(o,s),h}return null}applyConfig(e={}){return Xe(Xe({},this.toastrConfig),e)}_findToast(e){for(let n=0;n<this.toasts.length;n++)if(this.toasts[n].toastId===e)return{index:n,activeToast:this.toasts[n]};return null}_preBuildNotification(e,n,o,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,n,o,s)):this._buildNotification(e,n,o,s)}_buildNotification(e,n,o,s){if(!s.toastComponent)throw new Error("toastComponent required");let l=this.findDuplicate(o,n,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&o||n)&&this.toastrConfig.preventDuplicates&&l!==null)return l;this.previousToastMessage=n;let h=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(h=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let p=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let m=n;n&&s.enableHtml&&(m=this.sanitizer.sanitize(ud.HTML,n));let f=new EW(p),g=new vA(this.index,s,m,o,e,f),y=[{provide:vA,useValue:g}],_=yn.create({providers:y,parent:this._injector}),w=new TW(s.toastComponent,_),A=p.attach(w,s.newestOnTop);f.componentInstance=A.instance;let k={toastId:this.index,title:o||"",message:n||"",toastRef:f,onShown:f.afterActivate(),onHidden:f.afterClosed(),onTap:g.onTap(),onAction:g.onAction(),portal:A};return h||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{k.toastRef.activate()})),this.toasts.push(k),k}static \u0275fac=function(n){return new(n||r)(xe(Gpe),xe(c6e),xe(yn),xe(xg),xe(ci))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),d6e=(()=>{class r{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=Vl(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if(this.state().value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,n,o){this.toastrService=e,this.toastPackage=n,this.ngZone=o,this.message=n.message,this.title=n.title,this.options=n.config,this.originalTimeout=n.config.timeOut,this.toastClasses=`${n.toastType} ${n.config.toastClass}`,this.sub=n.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=n.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=n.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=n.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state=Vl({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(e=>li(Xe({},e),{value:"active"})),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let e=new Date().getTime(),n=this.hideTime-e;this.width.set(n/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(o=>100-o),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(e=>li(Xe({},e),{value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state().value!=="removed"&&(clearTimeout(this.timeout),this.state.update(e=>li(Xe({},e),{value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state().value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state().value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state().value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,n){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),n)):this.timeout=setTimeout(()=>e(),n)}outsideInterval(e,n){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),n)):this.intervalId=setInterval(()=>e(),n)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}static \u0275fac=function(n){return new(n||r)(ie(g4),ie(vA),ie(ci))};static \u0275cmp=gt({type:r,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(n,o){n&1&&Oe("click",function(){return o.tapToast()})("mouseenter",function(){return o.stickAround()})("mouseleave",function(){return o.delayedHideToast()}),n&2&&(ix("@flyInOut",o._state),Hr(o.toastClasses),vo("display",o.displayStyle))},standalone:!0,features:[yt],attrs:Upe,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(n,o){n&1&&We(0,Zje,3,0,"button",0)(1,Xje,3,5,"div",1)(2,Jje,1,3,"div",2)(3,e6e,2,4,"div",3)(4,t6e,2,2,"div",4),n&2&&(ee("ngIf",o.options.closeButton),q(),ee("ngIf",o.title),q(),ee("ngIf",o.message&&o.options.enableHtml),q(),ee("ngIf",o.message&&!o.options.enableHtml),q(),ee("ngIf",o.options.progressBar))},dependencies:[gn],encapsulation:2,data:{animation:[Or("flyInOut",[zi("inactive",mi({opacity:0})),zi("active",mi({opacity:1})),zi("removed",mi({opacity:0})),ln("inactive => active",un("{{ easeTime }}ms {{ easing }}")),ln("active => removed",un("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return r})(),u6e=li(Xe({},zpe),{toastComponent:d6e}),Hpe=(r={})=>Bl([{provide:Gpe,useValue:{default:u6e,config:r}}]);var h6e=(()=>{class r{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=Vl(-1);toastClasses="";get displayStyle(){return this.state()==="inactive"?"none":null}state=Vl("inactive");timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,n,o){this.toastrService=e,this.toastPackage=n,this.appRef=o,this.message=n.message,this.title=n.title,this.options=n.config,this.originalTimeout=n.config.timeOut,this.toastClasses=`${n.toastType} ${n.config.toastClass}`,this.sub=n.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=n.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=n.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=n.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.set("active"),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let e=new Date().getTime(),n=this.hideTime-e;this.width.set(n/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(o=>100-o),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.set("active"),this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.state.set("removed"),this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state()!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state()==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(n){return new(n||r)(ie(g4),ie(vA),ie(fs))};static \u0275cmp=gt({type:r,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(n,o){n&1&&Oe("click",function(){return o.tapToast()})("mouseenter",function(){return o.stickAround()})("mouseleave",function(){return o.delayedHideToast()}),n&2&&(Hr(o.toastClasses),vo("display",o.displayStyle))},standalone:!0,features:[yt],attrs:Upe,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(n,o){n&1&&We(0,i6e,3,0,"button",0)(1,r6e,3,5,"div",1)(2,o6e,1,3,"div",2)(3,s6e,2,4,"div",3)(4,a6e,2,2,"div",4),n&2&&(ee("ngIf",o.options.closeButton),q(),ee("ngIf",o.title),q(),ee("ngIf",o.message&&o.options.enableHtml),q(),ee("ngIf",o.message&&!o.options.enableHtml),q(),ee("ngIf",o.options.progressBar))},dependencies:[gn],encapsulation:2,changeDetection:0})}return r})(),Bkt=li(Xe({},zpe),{toastComponent:h6e});var p6e={positionClass:"toast-bottom-right",timeOut:1e4,extendedTimeOut:1e4,titleClass:"mat-subtitle-2",messageClass:"toast-message",closeButton:!0,progressBar:!0,enableHtml:!0,tapToDismiss:!0,maxOpened:4,preventDuplicates:!0,resetTimeoutOnDuplicate:!0,countDuplicates:!1,includeTitleDuplicates:!0};function kW(){return Bl([Hpe(p6e)])}var _4=(()=>{class r{static forRoot(){return{ngModule:r,providers:[]}}static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({providers:[kW()]})}return r})(),Dw=function(r){return r.ERROR="error",r.ALERT="warning",r.WARNING="warning",r.INFO="info",r.SUCCESS="success",r.SHOW="show",r}(Dw||{}),nl=(()=>{class r{injector;configService;languageService;messages$=new mt([]);options;activeMessageTranslations=[];constructor(e,n,o){this.injector=e,this.configService=n,this.languageService=o,this.options=this.configService.getConfig("message"),this.languageService.language$.pipe(cr(500)).subscribe(()=>{this.toastr.toasts.length===0&&(this.activeMessageTranslations=[]),this.toastr.toasts.map(s=>{let l=this.activeMessageTranslations.find(h=>h.id===s.toastId);if(l){let h=Xe({},l.textInterpolateParams),p=Xe({},l.titleInterpolateParams);l.textInterpolateParams&&Object.keys(l.textInterpolateParams).map(m=>{m&&(h[m]=this.languageService.translate.instant(l.textInterpolateParams[m]))}),l.titleInterpolateParams&&Object.keys(l.titleInterpolateParams).map(m=>{m&&(p[m]=this.languageService.translate.instant(l.titleInterpolateParams[m]))}),Ac([this.languageService.translate.get(l.textKey,h),this.languageService.translate.get(l.titleKey,p)]).pipe(So()).subscribe(m=>{s.toastRef.componentInstance.message=m[0],s.toastRef.componentInstance.title=m[1]})}})})}get toastr(){return this.injector.get(g4)}showError(e){return e.error.caught=!0,this.error(e.error.message,e.error.title)}message(e){let n=e.type;this.toastr.toastrConfig.iconClasses[n]=`toast-${n}`,this.messages$.next(this.messages$.value.concat([e])),e.options=e.options||{};let o=new Date;if(e.options.from=e.options.from?e.options.from:new Date("1 jan 1900"),e.options.to=e.options.to?e.options.to:new Date("1 jan 3000"),typeof e.options.from=="string"&&(e.options.from=new Date(Date.parse(e.options.from.replace(/-/g," ")))),typeof e.options.to=="string"&&(e.options.to=new Date(Date.parse(e.options.to.replace(/-/g," ")))),o>e.options.from&&o<e.options.to&&(e.showIcon===!1&&(this.toastr.toastrConfig.iconClasses[n]=`toast-${n} toast-no-icon`),e=this.handleTemplate(e),e.text)){let s;switch(e.type){case Dw.SUCCESS:s=this.success(e.text,e.title,e.options,e.textInterpolateParams,e.titleInterpolateParams);break;case Dw.ERROR:s=this.error(e.text,e.title,e.options,e.textInterpolateParams,e.titleInterpolateParams);break;case Dw.INFO:s=this.info(e.text,e.title,e.options,e.textInterpolateParams,e.titleInterpolateParams);break;case Dw.SHOW:s=this.show(e.text,e.title,e.options,e.textInterpolateParams,e.titleInterpolateParams);break;case Dw.ALERT:case Dw.WARNING:s=this.alert(e.text,e.title,e.options,e.textInterpolateParams,e.titleInterpolateParams);break;default:s=this.info(e.text,e.title,e.options,e.textInterpolateParams,e.titleInterpolateParams);break}e.options.id=s.toastId}}success(e,n="igo.core.message.success",o={},s,l){return this.handleNgxToastr("success",e,n,o,s,l)}error(e,n="igo.core.message.error",o={},s,l){return this.handleNgxToastr("error",e,n,o,s,l)}info(e,n="igo.core.message.info",o={},s,l){return this.handleNgxToastr("info",e,n,o,s,l)}alert(e,n="igo.core.message.alert",o={},s,l){return this.handleNgxToastr("alert",e,n,o,s,l)}show(e,n="igo.core.message.info",o={},s,l){return this.handleNgxToastr("show",e,n,o,s,l)}handleNgxToastr(e,n,o,s={},l,h){let p=Xe({},l),m=Xe({},h);l&&Object.keys(l).map(_=>{let w=l[_];w&&(p[_]=typeof w=="string"?this.languageService.translate.instant(w):w)}),h&&Object.keys(h).map(_=>{if(_){let w=h[_];m[_]=typeof w=="string"?this.languageService.translate.instant(w):w}});let f=this.languageService.translate.instant(n,p),g=this.languageService.translate.instant(o,m),y;switch(e){case"success":y=this.toastr.success(f,g,s);break;case"error":y=this.toastr.error(f,g,s);break;case"show":case"info":y=this.toastr.info(f,g,s);break;case"alert":y=this.toastr.warning(f,g,s);break}return this.activeMessageTranslations.push({id:y.toastId,titleKey:o,textKey:n,textInterpolateParams:l,titleInterpolateParams:h}),y}remove(e){this.toastr.remove(e)}removeAllAreNotError(){for(let e of this.messages$.value)e.type!==Dw.ERROR&&this.remove(e.options.id)}handleTemplate(e){if(!this.options?.template||e.html)return e;let n=this.options?.template;return n=n.replace("${text}",e.text),n=n.replace("${title}",e.title),e.html=void 0,e.text=n,e.title=void 0,e}static \u0275fac=function(n){return new(n||r)(xe(yn),xe(Ri),xe(wn))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var y4=class{};var v4=class extends y4{constructor(){super(...arguments),this.cachePairs=[]}add(i,e,n){this.cachePairs.push(i)}addMany(i){this.cachePairs=i}updateAtIndex(i,e){let n=this.cachePairs[i];Object.assign(n,e)}update(i,e){let n=this.cachePairs[i];Object.assign(n,e)}getAll(){return this.cachePairs}removeAtIndex(i){this.cachePairs.splice(i,1)}remove(i){this.cachePairs.splice(i,1)}removeAll(){this.cachePairs.length=0}};var Wpe=(r,i)=>JSON.stringify(r)===JSON.stringify(i),qpe=r=>r.map(i=>i!==void 0?JSON.parse(JSON.stringify(i)):i),lf={storageStrategy:v4,globalCacheKey:"CACHE_STORAGE",promiseImplementation:Promise};var OW=new Dt;function Cp(r={}){return function(i,e,n){let o=r.cacheKey||i.constructor.name+"#"+e,s=n.value;if(n&&n.value){let l=r.storageStrategy?new r.storageStrategy:new lf.storageStrategy,h=[];r.cacheModifier&&r.cacheModifier.subscribe(f=>l.addMany(f(l.getAll(o,this)),o,this)),vr(OW.asObservable(),r.cacheBusterObserver?r.cacheBusterObserver:Vz()).subscribe(f=>{l.removeAll(o,this),h.length=0});let p=r.cacheResolver||lf.cacheResolver;r.cacheResolver=p||Wpe;let m=r.cacheHasher||lf.cacheHasher;r.cacheHasher=m||qpe,n.value=function(...f){let g=l.getAll(o,this),y=r.cacheHasher(f),_=g.find(A=>r.cacheResolver(A.parameters,y)),w=h.find(A=>r.cacheResolver(A.parameters,y));if((r.maxAge||lf.maxAge)&&_&&_.created&&(new Date().getTime()-new Date(_.created).getTime()>(r.maxAge||lf.maxAge)?(l.remove?l.remove(g.indexOf(_),_,o,this):l.removeAtIndex(g.indexOf(_),o,this),_=null):(r.slidingExpiration||lf.slidingExpiration)&&(_.created=new Date,l.update?l.update(g.indexOf(_),_,o,this):l.updateAtIndex(g.indexOf(_),_,o,this))),_){let A=Vt(_.response);return r.async?A.pipe(jh(0)):A}else{if(w)return w.response;{let A=s.call(this,...f).pipe(Ud(()=>{let k=h.find(R=>r.cacheResolver(R.parameters,y));h.splice(h.indexOf(k),1)}),br(k=>{(!r.shouldCacheDecider||r.shouldCacheDecider(k))&&((!(r.maxCacheCount||lf.maxCacheCount)||(r.maxCacheCount||lf.maxCacheCount)===1||(r.maxCacheCount||lf.maxCacheCount)&&(r.maxCacheCount||lf.maxCacheCount)<g.length+1)&&(l.remove?l.remove(0,g[0],o,this):l.removeAtIndex(0,o,this)),l.add({parameters:y,response:k,created:r.maxAge||lf.maxAge?new Date:null},o,this))}),qz(1),Gb());return h.push({parameters:y,response:A,created:new Date}),A}}}}return n}}var Hl=class r{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(i,e=!1){return this.onePassHasher.start().appendStr(i).end(e)}static hashAsciiStr(i,e=!1){return this.onePassHasher.start().appendAsciiStr(i).end(e)}static _hex(i){let e=r.hexChars,n=r.hexOut,o,s,l,h;for(h=0;h<4;h+=1)for(s=h*8,o=i[h],l=0;l<8;l+=2)n[s+1+l]=e.charAt(o&15),o>>>=4,n[s+0+l]=e.charAt(o&15),o>>>=4;return n.join("")}static _md5cycle(i,e){let n=i[0],o=i[1],s=i[2],l=i[3];n+=(o&s|~o&l)+e[0]-680876936|0,n=(n<<7|n>>>25)+o|0,l+=(n&o|~n&s)+e[1]-389564586|0,l=(l<<12|l>>>20)+n|0,s+=(l&n|~l&o)+e[2]+606105819|0,s=(s<<17|s>>>15)+l|0,o+=(s&l|~s&n)+e[3]-1044525330|0,o=(o<<22|o>>>10)+s|0,n+=(o&s|~o&l)+e[4]-176418897|0,n=(n<<7|n>>>25)+o|0,l+=(n&o|~n&s)+e[5]+1200080426|0,l=(l<<12|l>>>20)+n|0,s+=(l&n|~l&o)+e[6]-1473231341|0,s=(s<<17|s>>>15)+l|0,o+=(s&l|~s&n)+e[7]-45705983|0,o=(o<<22|o>>>10)+s|0,n+=(o&s|~o&l)+e[8]+1770035416|0,n=(n<<7|n>>>25)+o|0,l+=(n&o|~n&s)+e[9]-1958414417|0,l=(l<<12|l>>>20)+n|0,s+=(l&n|~l&o)+e[10]-42063|0,s=(s<<17|s>>>15)+l|0,o+=(s&l|~s&n)+e[11]-1990404162|0,o=(o<<22|o>>>10)+s|0,n+=(o&s|~o&l)+e[12]+1804603682|0,n=(n<<7|n>>>25)+o|0,l+=(n&o|~n&s)+e[13]-40341101|0,l=(l<<12|l>>>20)+n|0,s+=(l&n|~l&o)+e[14]-1502002290|0,s=(s<<17|s>>>15)+l|0,o+=(s&l|~s&n)+e[15]+1236535329|0,o=(o<<22|o>>>10)+s|0,n+=(o&l|s&~l)+e[1]-165796510|0,n=(n<<5|n>>>27)+o|0,l+=(n&s|o&~s)+e[6]-1069501632|0,l=(l<<9|l>>>23)+n|0,s+=(l&o|n&~o)+e[11]+643717713|0,s=(s<<14|s>>>18)+l|0,o+=(s&n|l&~n)+e[0]-373897302|0,o=(o<<20|o>>>12)+s|0,n+=(o&l|s&~l)+e[5]-701558691|0,n=(n<<5|n>>>27)+o|0,l+=(n&s|o&~s)+e[10]+38016083|0,l=(l<<9|l>>>23)+n|0,s+=(l&o|n&~o)+e[15]-660478335|0,s=(s<<14|s>>>18)+l|0,o+=(s&n|l&~n)+e[4]-405537848|0,o=(o<<20|o>>>12)+s|0,n+=(o&l|s&~l)+e[9]+568446438|0,n=(n<<5|n>>>27)+o|0,l+=(n&s|o&~s)+e[14]-1019803690|0,l=(l<<9|l>>>23)+n|0,s+=(l&o|n&~o)+e[3]-187363961|0,s=(s<<14|s>>>18)+l|0,o+=(s&n|l&~n)+e[8]+1163531501|0,o=(o<<20|o>>>12)+s|0,n+=(o&l|s&~l)+e[13]-1444681467|0,n=(n<<5|n>>>27)+o|0,l+=(n&s|o&~s)+e[2]-51403784|0,l=(l<<9|l>>>23)+n|0,s+=(l&o|n&~o)+e[7]+1735328473|0,s=(s<<14|s>>>18)+l|0,o+=(s&n|l&~n)+e[12]-1926607734|0,o=(o<<20|o>>>12)+s|0,n+=(o^s^l)+e[5]-378558|0,n=(n<<4|n>>>28)+o|0,l+=(n^o^s)+e[8]-2022574463|0,l=(l<<11|l>>>21)+n|0,s+=(l^n^o)+e[11]+1839030562|0,s=(s<<16|s>>>16)+l|0,o+=(s^l^n)+e[14]-35309556|0,o=(o<<23|o>>>9)+s|0,n+=(o^s^l)+e[1]-1530992060|0,n=(n<<4|n>>>28)+o|0,l+=(n^o^s)+e[4]+1272893353|0,l=(l<<11|l>>>21)+n|0,s+=(l^n^o)+e[7]-155497632|0,s=(s<<16|s>>>16)+l|0,o+=(s^l^n)+e[10]-1094730640|0,o=(o<<23|o>>>9)+s|0,n+=(o^s^l)+e[13]+681279174|0,n=(n<<4|n>>>28)+o|0,l+=(n^o^s)+e[0]-358537222|0,l=(l<<11|l>>>21)+n|0,s+=(l^n^o)+e[3]-722521979|0,s=(s<<16|s>>>16)+l|0,o+=(s^l^n)+e[6]+76029189|0,o=(o<<23|o>>>9)+s|0,n+=(o^s^l)+e[9]-640364487|0,n=(n<<4|n>>>28)+o|0,l+=(n^o^s)+e[12]-421815835|0,l=(l<<11|l>>>21)+n|0,s+=(l^n^o)+e[15]+530742520|0,s=(s<<16|s>>>16)+l|0,o+=(s^l^n)+e[2]-995338651|0,o=(o<<23|o>>>9)+s|0,n+=(s^(o|~l))+e[0]-198630844|0,n=(n<<6|n>>>26)+o|0,l+=(o^(n|~s))+e[7]+1126891415|0,l=(l<<10|l>>>22)+n|0,s+=(n^(l|~o))+e[14]-1416354905|0,s=(s<<15|s>>>17)+l|0,o+=(l^(s|~n))+e[5]-57434055|0,o=(o<<21|o>>>11)+s|0,n+=(s^(o|~l))+e[12]+1700485571|0,n=(n<<6|n>>>26)+o|0,l+=(o^(n|~s))+e[3]-1894986606|0,l=(l<<10|l>>>22)+n|0,s+=(n^(l|~o))+e[10]-1051523|0,s=(s<<15|s>>>17)+l|0,o+=(l^(s|~n))+e[1]-2054922799|0,o=(o<<21|o>>>11)+s|0,n+=(s^(o|~l))+e[8]+1873313359|0,n=(n<<6|n>>>26)+o|0,l+=(o^(n|~s))+e[15]-30611744|0,l=(l<<10|l>>>22)+n|0,s+=(n^(l|~o))+e[6]-1560198380|0,s=(s<<15|s>>>17)+l|0,o+=(l^(s|~n))+e[13]+1309151649|0,o=(o<<21|o>>>11)+s|0,n+=(s^(o|~l))+e[4]-145523070|0,n=(n<<6|n>>>26)+o|0,l+=(o^(n|~s))+e[11]-1120210379|0,l=(l<<10|l>>>22)+n|0,s+=(n^(l|~o))+e[2]+718787259|0,s=(s<<15|s>>>17)+l|0,o+=(l^(s|~n))+e[9]-343485551|0,o=(o<<21|o>>>11)+s|0,i[0]=n+i[0]|0,i[1]=o+i[1]|0,i[2]=s+i[2]|0,i[3]=l+i[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(r.stateIdentity),this}appendStr(i){let e=this._buffer8,n=this._buffer32,o=this._bufferLength,s,l;for(l=0;l<i.length;l+=1){if(s=i.charCodeAt(l),s<128)e[o++]=s;else if(s<2048)e[o++]=(s>>>6)+192,e[o++]=s&63|128;else if(s<55296||s>56319)e[o++]=(s>>>12)+224,e[o++]=s>>>6&63|128,e[o++]=s&63|128;else{if(s=(s-55296)*1024+(i.charCodeAt(++l)-56320)+65536,s>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");e[o++]=(s>>>18)+240,e[o++]=s>>>12&63|128,e[o++]=s>>>6&63|128,e[o++]=s&63|128}o>=64&&(this._dataLength+=64,r._md5cycle(this._state,n),o-=64,n[0]=n[16])}return this._bufferLength=o,this}appendAsciiStr(i){let e=this._buffer8,n=this._buffer32,o=this._bufferLength,s,l=0;for(;;){for(s=Math.min(i.length-l,64-o);s--;)e[o++]=i.charCodeAt(l++);if(o<64)break;this._dataLength+=64,r._md5cycle(this._state,n),o=0}return this._bufferLength=o,this}appendByteArray(i){let e=this._buffer8,n=this._buffer32,o=this._bufferLength,s,l=0;for(;;){for(s=Math.min(i.length-l,64-o);s--;)e[o++]=i[l++];if(o<64)break;this._dataLength+=64,r._md5cycle(this._state,n),o=0}return this._bufferLength=o,this}getState(){let i=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[i[0],i[1],i[2],i[3]]}}setState(i){let e=i.buffer,n=i.state,o=this._state,s;for(this._dataLength=i.length,this._bufferLength=i.buflen,o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],s=0;s<e.length;s+=1)this._buffer8[s]=e.charCodeAt(s)}end(i=!1){let e=this._bufferLength,n=this._buffer8,o=this._buffer32,s=(e>>2)+1;this._dataLength+=e;let l=this._dataLength*8;if(n[e]=128,n[e+1]=n[e+2]=n[e+3]=0,o.set(r.buffer32Identity.subarray(s),s),e>55&&(r._md5cycle(this._state,o),o.set(r.buffer32Identity)),l<=4294967295)o[14]=l;else{let h=l.toString(16).match(/(.*?)(.{0,8})$/);if(h===null)return;let p=parseInt(h[2],16),m=parseInt(h[1],16)||0;o[14]=p,o[15]=m}return r._md5cycle(this._state,o),i?this._state:r._hex(this._state)}};Hl.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]);Hl.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);Hl.hexChars="0123456789abcdef";Hl.hexOut=[];Hl.onePassHasher=new Hl;if(Hl.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592")throw new Error("Md5 self test failed.");var PW=(()=>{class r{injector;options;tokenKey;constructor(e){this.injector=e;let n=this.injector.get(Ri);this.options=n.getConfig("auth"),this.tokenKey=this.options?.tokenKey}set(e){localStorage.setItem(this.tokenKey,e)}remove(){localStorage.removeItem(this.tokenKey)}get(){return localStorage.getItem(this.tokenKey)}decode(){let e=this.get();if(e)return Rpe(e)}isExpired(){let e=this.decode(),n=new Date().getTime()/1e3;return!(e&&n<e.exp)}static \u0275fac=function(n){return new(n||r)(xe(yn))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),ml=(()=>{class r{http;tokenService;config;languageService;messageService;router;authenticate$=new mt(void 0);logged$=new mt(void 0);redirectUrl;languageForce=!1;anonymous=!1;authOptions;get hasAuthService(){return this.authOptions?.url!==void 0}get user(){let e=this.decodeToken();return e?.user?e.user:null}constructor(e,n,o,s,l,h){this.http=e,this.tokenService=n,this.config=o,this.languageService=s,this.messageService=l,this.router=h,this.authOptions=this.config.getConfig("auth"),this.authenticate$.next(this.authenticated),this.authenticate$.subscribe(p=>{this.logged$.next(p),OW.next()})}login(e,n){let o=new Wd({"Content-Type":"application/json"}),s={username:e,password:this.encodePassword(n)};return this.loginCall(s,o)}loginWithToken(e,n,o){let s=new Wd({"Content-Type":"application/json"}),l={token:e,typeConnection:n,infosUser:o};return this.loginCall(l,s)}loginAnonymous(){return this.anonymous=!0,this.logged$.next(!0),Vt(!0)}refresh(){return this.http.post(`${this.authOptions?.url}/refresh`,{}).pipe(br(e=>{this.tokenService.set(e.token)}),Fn(e=>{throw e.error.caught=!0,e}))}logout(){return this.anonymous=!1,this.tokenService.remove(),this.authenticate$.next(!1),Vt(!0)}isAuthenticated(){return!this.tokenService.isExpired()}getToken(){return this.tokenService.get()}decodeToken(){if(this.isAuthenticated())return this.tokenService.decode()}goToRedirectUrl(){if(!this.router)return;let e=this.redirectUrl||this.router.url;if(e===this.authOptions.loginRoute){let n=this.authOptions.homeRoute||"/";this.router.navigateByUrl(n)}else e&&this.router.navigateByUrl(e)}getUserInfo(){let e=this.authOptions?.url+"/info";return this.http.get(e)}getProfils(){return this.http.get(`${this.authOptions?.url}/profils`)}updateUser(e){return this.http.patch(this.authOptions?.url,e)}encodePassword(e){return wpe.encode(e)}get logged(){return this.authenticated||this.isAnonymous}get isAnonymous(){return this.anonymous}get authenticated(){return this.isAuthenticated()}get isAdmin(){return!!this.decodeToken()?.user?.isAdmin}loginCall(e,n){return this.http.post(`${this.authOptions?.url}/login`,e,{headers:n}).pipe(br(o=>{this.tokenService.set(o.token);let s=this.decodeToken();s?.user&&(s.user.locale&&!this.languageForce&&this.languageService.setLanguage(s.user.locale),s.user.isExpired&&this.messageService.alert("igo.auth.error.Password expired")),this.authenticate$.next(!0)}),Fn(o=>{throw o.error.caught=!0,o}))}static \u0275fac=function(n){return new(n||r)(xe(dr),xe(PW),xe(Ri),xe(wn),xe(nl),xe(n_,8))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),m6e=(()=>{class r extends nO{http;authService;tokenService;constructor(e,n,o,s){super(e),this.http=n,this.authService=o,this.tokenService=s,this.authService.authenticate$.subscribe(l=>{l&&this.options.url&&this.http.get(this.options.url).subscribe(h=>{if(h&&h.preference)for(let p of Object.keys(h.preference)){let m=h.preference[p];super.set(p,m)}})})}set(e,n,o=kl.LOCAL){if(o===kl.LOCAL&&this.authService.authenticated&&this.options.url){let s={};s[e]=n,this.http.patch(this.options.url,{preference:s}).subscribe()}super.set(e,n,o)}remove(e,n=kl.LOCAL){if(n===kl.LOCAL&&this.authService.authenticated&&this.options.url){let o={};o[e]=void 0,this.http.patch(this.options.url,{preference:o}).subscribe()}super.remove(e,n)}clear(e=kl.LOCAL){e===kl.LOCAL&&this.authService.authenticated&&this.options.url&&this.http.patch(this.options.url,{preference:{}},{params:{mergePreference:"false"}}).subscribe();let n;e===kl.LOCAL&&(n=this.tokenService.get()),super.clear(e),n&&this.tokenService.set(n),e===kl.LOCAL&&this.authService.authenticated&&this.options.url&&this.http.get(this.options.url).subscribe(o=>{if(o&&o.preference)for(let s of Object.keys(o.preference)){let l=o.preference[s];super.set(s,l)}})}static \u0275fac=function(n){return new(n||r)(xe(Ri),xe(dr),xe(ml),xe(PW))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),b4=function(r){return r[r.Microsoft=0]="Microsoft",r}(b4||{}),sO=(()=>{class r{config;tokenService;http;authOptions;refreshInProgress=!1;trustHosts;hostsWithCredentials;hostsWithAuthByKey;constructor(e,n,o){this.config=e,this.tokenService=n,this.http=o,this.authOptions=this.config.getConfig("auth"),this.trustHosts=this.authOptions?.trustHosts||[],this.trustHosts.push(window.location.hostname),this.hostsWithCredentials=this.authOptions?.hostsWithCredentials||[],this.hostsWithAuthByKey=this.authOptions?.hostsByKey||[]}intercept(e,n){let o=this.handleHostsWithCredentials(e.url),s=e.clone(),l=this.handleHostsAuthByKey(e.url);if(l&&(s=s.clone({params:s.params.set(l.key,l.value)})),o)return s=e.clone({withCredentials:o}),n.handle(s);this.refreshToken();let h=this.tokenService.get(),p=document.createElement("a");if(p.href=s.url,!h||this.trustHosts.indexOf(p.hostname)===-1)return n.handle(s);let m=`Bearer ${h}`,f=s.clone({headers:s.headers.set("Authorization",m)}),g=this.tokenService.decode();if(f.params.get("_i")==="true"&&g?.user?.sourceId){let y=Hl.hashStr(g.user.sourceId);f=f.clone({params:f.params.set("_i",y)})}else f.params.get("_i")==="true"&&(f=f.clone({params:f.params.delete("_i")}));return n.handle(f)}interceptXhr(e,n){let o=this.handleHostsWithCredentials(n);if(o)return e.withCredentials=o,!0;this.refreshToken();let s=document.createElement("a");s.href=n;let l=this.tokenService.get();return!l||this.trustHosts.indexOf(s.hostname)===-1?!1:(e.setRequestHeader("Authorization","Bearer "+l),!0)}alterUrlWithKeyAuth(e){let n=this.handleHostsAuthByKey(e),o=e;if(n){let s=o.split(/[?&]/),l=s.shift(),h=s.filter(p=>p.length!==0);return h.push(`${n.key}=${n.value}`),h.length&&(l+="?"+h.join("&")),l}}handleHostsWithCredentials(e){let n=!1;for(let o of this.hostsWithCredentials)if(new RegExp(o.domainRegFilters).test(e)){n=o.withCredentials!==void 0?o.withCredentials:void 0;break}return n}handleHostsAuthByKey(e){let n;for(let o of this.hostsWithAuthByKey)if(new RegExp(o.domainRegFilters).test(e)){let l=`${o.keyProperty}=${o.keyValue}`;if(!new RegExp(l,"gm").test(e)){n={key:o.keyProperty,value:o.keyValue};break}}return n}refreshToken(){let e=this.tokenService.decode(),n=new Date().getTime()/1e3;if(!this.refreshInProgress&&e&&n<e.exp&&n>e.exp-1800){this.refreshInProgress=!0;let o=this.authOptions?.url;return this.http.post(`${o}/refresh`,{}).subscribe(s=>{this.tokenService.set(s.token),this.refreshInProgress=!1},s=>(s.error.caught=!0,s))}}static \u0275fac=function(n){return new(n||r)(xe(Ri),xe(PW),xe(dr))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Ype(...r){let i=[{provide:ox,useClass:sO,multi:!0},{provide:wo,useClass:m6e}];for(let e of r)i.push(...e.providers);return Bl(i)}var Kpe=(()=>{class r{authService;config;appRef;options;login=new it;constructor(e,n,o){this.authService=e,this.config=n,this.appRef=o,this.options=this.config.getConfig("auth.facebook"),this.options?.appId?this.loadSDKFacebook():console.warn('Facebook authentification needs "appId" option')}subscribeEvents(){window.FB.Event.subscribe("auth.statusChange",e=>{this.statusChangeCallback(e)})}statusChangeCallback(e){if(e.status==="connected"){let n=e.authResponse.accessToken;this.loginFacebook(n)}}loginFacebook(e){this.authService.loginWithToken(e,"facebook").subscribe(()=>{this.appRef.tick(),this.login.emit(!0)})}loadSDKFacebook(){if(document.getElementById("facebook-jssdk"))return;let e="https://connect.facebook.net/fr_CA/sdk.js#xfbml=1&version=v2.9",n=document.getElementsByTagName("script")[0],o=document.createElement("script");o.id="facebook-jssdk",o.src=`${e}&appId=${this.options?.appId}`,o.onload=()=>{this.subscribeEvents()},n.parentNode.insertBefore(o,n)}static \u0275fac=function(n){return new(n||r)(ie(ml),ie(Ri),ie(fs))};static \u0275cmp=gt({type:r,selectors:[["igo-auth-facebook"]],outputs:{login:"login"},standalone:!0,features:[yt],decls:1,vars:0,consts:[["data-max-rows","1","data-size","large","data-button-type","login_with","data-show-faces","false","data-auto-logout-link","false","data-use-continue-as","false",1,"fb-login-button"]],template:function(n,o){n&1&&wt(0,"div",0)},styles:["[_nghost-%COMP%]{padding:10px 10px 10px 0;display:inline-block;position:relative;top:-3px}"],changeDetection:0})}return r})();var Zpe=(()=>{class r{authService;config;languageService;appRef;options;login=new it;constructor(e,n,o,s){this.authService=e,this.config=n,this.languageService=o,this.appRef=s,this.options=this.config.getConfig("auth.google"),this.options?.apiKey&&this.options?.clientId?(this.loadSDKGoogle(),this.loadPlatform()):console.warn('Google authentification needs "apiKey" and "clientId" options')}handleSignInClick(){window.gapi.auth2.getAuthInstance().signIn()}handleSignOutClick(){window.gapi.auth2.getAuthInstance().signOut()}handleClientLoad(){window.gapi.load("client:auth2",()=>this.initClient())}initClient(){window.gapi.client.init({apiKey:this.options?.apiKey,clientId:this.options?.clientId,discoveryDocs:["https://people.googleapis.com/$discovery/rest?version=v1"],scope:"profile"}).then(()=>{this.handleSignOutClick(),this.updateTextButton(),window.gapi.auth2.getAuthInstance().isSignedIn.listen(e=>{this.updateSigninStatus(e)})})}updateSigninStatus(e){this.updateTextButton(),e&&this.loginGoogle(window.gapi.client.getToken().access_token)}updateTextButton(){let e=document.querySelector('span[id^="not_signed_"]');e&&this.languageService.getLanguage()!=="en"&&(e.innerHTML==="Sign in with Google"?e.innerHTML=this.languageService.translate.instant("igo.auth.google.login"):e.innerHTML==="Signed in with Google"&&(e.innerHTML=this.languageService.translate.instant("igo.auth.google.logged")))}loginGoogle(e){this.authService.loginWithToken(e,"google").subscribe(()=>{this.appRef.tick(),this.login.emit(!0)})}loadSDKGoogle(){let e=document.getElementsByTagName("script")[0],n=document.createElement("script");n.id="google-jssdk",n.src="https://apis.google.com/js/api.js",n.onload=()=>{this.handleClientLoad()},e.parentNode.insertBefore(n,e)}loadPlatform(){let e=document.getElementsByTagName("script")[0],n=document.createElement("script");n.id="google-platform",n.src="https://apis.google.com/js/platform.js",e.parentNode.insertBefore(n,e)}static \u0275fac=function(n){return new(n||r)(ie(ml),ie(Ri),ie(wn),ie(fs))};static \u0275cmp=gt({type:r,selectors:[["igo-auth-google"]],outputs:{login:"login"},standalone:!0,features:[yt],decls:1,vars:0,consts:[["data-height","40","data-width","265","data-longtitle","true",1,"g-signin2","google-login-button"]],template:function(n,o){n&1&&wt(0,"div",0)},styles:["[_nghost-%COMP%]{padding:10px 10px 10px 0;display:inline-block}.google-login-button[_ngcontent-%COMP%]     .abcRioButton{color:#000000de}"],changeDetection:0})}return r})();function f6e(r,i){if(r&1){let e=dt();ne(0,"button",8),Oe("click",function(){Re(e);let o=ae();return Fe(o.loginAnonymous())}),Ye(1),Ne(2,"translate"),ce()}r&2&&(q(),Qt(" ",je(2,1,"igo.auth.accessAnonymous")," "))}function g6e(r,i){if(r&1&&(ne(0,"div"),wt(1,"br"),ne(2,"font",9),Ye(3),ce()()),r&2){let e=ae();q(3),Si(e.error)}}function _6e(r,i){r&1&&(ne(0,"div",10),wt(1,"mat-spinner",11),ce()),r&2&&(q(),ee("diameter",40))}var Qpe=(()=>{class r{auth;languageService;get allowAnonymous(){return this._allowAnonymous}set allowAnonymous(e){this._allowAnonymous=e}_allowAnonymous=!0;error="";form;loading=!1;login=new it;constructor(e,n,o){this.auth=e,this.languageService=n,this.form=o.group({username:["",Dl.required],password:["",Dl.required]})}loginUser(e){return this.loading=!0,this.auth.login(e.username,e.password).subscribe(()=>{this.login.emit(!0),this.loading=!1},n=>{try{this.languageService.translate.get("igo.auth.error."+n.error.message).subscribe(o=>this.error=o)}catch{this.error=n.error.message}this.loading=!1}),!1}loginAnonymous(){this.auth.loginAnonymous().subscribe(()=>{this.login.emit(!0)})}static \u0275fac=function(n){return new(n||r)(ie(ml),ie(wn),ie(r_))};static \u0275cmp=gt({type:r,selectors:[["igo-auth-intern"]],inputs:{allowAnonymous:"allowAnonymous"},outputs:{login:"login"},standalone:!0,features:[yt],decls:21,vars:19,consts:[["role","form",3,"ngSubmit","formGroup"],[1,"full-width"],["matInput","","required","","formControlName","username",3,"placeholder"],["matInput","","required","","type","password","formControlName","password",3,"placeholder"],["mat-raised-button","","type","submit"],["mat-raised-button","","class","anonymous","type","button",3,"click",4,"ngIf"],[4,"ngIf"],["class","loading-container",4,"ngIf"],["mat-raised-button","","type","button",1,"anonymous",3,"click"],["size","3","color","red"],[1,"loading-container"],[3,"diameter"]],template:function(n,o){n&1&&(ne(0,"form",0),Oe("ngSubmit",function(){return o.loginUser(o.form.value)}),ne(1,"div")(2,"mat-form-field",1)(3,"mat-label"),Ye(4),Ne(5,"translate"),ce(),wt(6,"input",2),Ne(7,"translate"),ce()(),ne(8,"div")(9,"mat-form-field",1)(10,"mat-label"),Ye(11),Ne(12,"translate"),ce(),wt(13,"input",3),Ne(14,"translate"),ce()(),ne(15,"button",4),Ye(16),Ne(17,"translate"),ce(),We(18,f6e,3,3,"button",5)(19,g6e,4,1,"div",6),ce(),We(20,_6e,2,1,"div",7)),n&2&&(ee("formGroup",o.form),q(4),Si(je(5,9,"igo.auth.user")),q(2),Wr("placeholder",je(7,11,"igo.auth.user")),q(5),Si(je(12,13,"igo.auth.password")),q(2),Wr("placeholder",je(14,15,"igo.auth.password")),q(3),Qt(" ",je(17,17,"igo.auth.login")," "),q(2),ee("ngIf",o.allowAnonymous),q(),ee("ngIf",o.error),q(),ee("ngIf",o.loading))},dependencies:[$l,Vy,eh,sc,Ig,Ag,uu,th,Tg,Wa,dc,Mg,pu,hu,bn,Ua,s4,gn,On,hn],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.anonymous[_ngcontent-%COMP%]{margin-left:10px}.loading-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center;z-index:1000;top:0;left:0;padding:24px;box-sizing:border-box}"]})}return r})();var qt={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},bA={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},ym=[qt.OPENID_SCOPE,qt.PROFILE_SCOPE,qt.OFFLINE_ACCESS_SCOPE],RW=[...ym,qt.EMAIL_SCOPE],Mc={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Dc={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Dg={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},wA={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},fl={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},w4={PLAIN:"plain",S256:"S256"},kg={QUERY:"query",FRAGMENT:"fragment"},FW=li(Xe({},kg),{FORM_POST:"form_post"}),aO={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},CA={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},hc={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Tr={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var lO="appmetadata",Xpe="client_info",kw="1",xA={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},qh={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},_d={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Po={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Ky={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},C4={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},x4={username:"username",password:"password"},cO={httpSuccess:200,httpBadRequest:400},Ax={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},S4={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Og={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},I4={Jwt:"JWT",Jwk:"JWK",Pop:"pop"};var LW=300;var Ex={};am(Ex,{postRequestFailed:()=>uO,unexpectedError:()=>dO});var dO="unexpected_error",uO="post_request_failed";var T4={[dO]:"Unexpected error in authentication.",[uO]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},Jpe={unexpectedError:{code:dO,desc:T4[dO]},postRequestFailed:{code:uO,desc:T4[uO]}},eo=class r extends Error{constructor(i,e,n){let o=e?`${i}: ${e}`:i;super(o),Object.setPrototypeOf(this,r.prototype),this.errorCode=i||qt.EMPTY_STRING,this.errorMessage=e||qt.EMPTY_STRING,this.subError=n||qt.EMPTY_STRING,this.name="AuthError"}setCorrelationId(i){this.correlationId=i}};function hO(r,i){return new eo(r,i?`${T4[r]} ${i}`:T4[r])}var yd={};am(yd,{authTimeNotFound:()=>Zy,authorizationCodeMissingFromServerResponse:()=>zx,bindingKeyNotRemoved:()=>xO,cannotAppendScopeSet:()=>Vx,cannotRemoveEmptyScope:()=>jx,clientInfoDecodingError:()=>Ow,clientInfoEmptyError:()=>Mx,deviceCodeExpired:()=>gO,deviceCodePollingCancelled:()=>fO,deviceCodeUnknownError:()=>_O,emptyInputScopeSet:()=>Fw,endSessionEndpointNotSupported:()=>Gx,endpointResolutionError:()=>Yh,hashNotDeserialized:()=>Px,invalidAssertion:()=>bO,invalidCacheEnvironment:()=>Xy,invalidCacheRecord:()=>$x,invalidClientCredential:()=>wO,invalidState:()=>Pg,keyIdMissing:()=>Hx,maxAgeTranspired:()=>Lx,methodNotImplemented:()=>Yr,missingTenantIdError:()=>TO,multipleMatchingAccounts:()=>mO,multipleMatchingAppMetadata:()=>Nx,multipleMatchingTokens:()=>pO,nestedAppAuthBridgeDisabled:()=>AO,networkError:()=>kx,noAccountFound:()=>yO,noAccountInSilentRequest:()=>Qy,noCryptoObject:()=>Lw,noNetworkConnectivity:()=>SO,nonceMismatch:()=>Fx,nullOrEmptyToken:()=>Dx,openIdConfigError:()=>Ox,requestCannotBeMade:()=>Bx,stateMismatch:()=>Rx,stateNotFound:()=>Rw,tokenClaimsCnfRequiredForSignedJwt:()=>Ux,tokenParsingError:()=>Pw,tokenRefreshRequired:()=>u_,unexpectedCredentialType:()=>vO,userCanceled:()=>IO,userTimeoutReached:()=>CO});var Ow="client_info_decoding_error",Mx="client_info_empty_error",Pw="token_parsing_error",Dx="null_or_empty_token",Yh="endpoints_resolution_error",kx="network_error",Ox="openid_config_error",Px="hash_not_deserialized",Pg="invalid_state",Rx="state_mismatch",Rw="state_not_found",Fx="nonce_mismatch",Zy="auth_time_not_found",Lx="max_age_transpired",pO="multiple_matching_tokens",mO="multiple_matching_accounts",Nx="multiple_matching_appMetadata",Bx="request_cannot_be_made",jx="cannot_remove_empty_scope",Vx="cannot_append_scopeset",Fw="empty_input_scopeset",fO="device_code_polling_cancelled",gO="device_code_expired",_O="device_code_unknown_error",Qy="no_account_in_silent_request",$x="invalid_cache_record",Xy="invalid_cache_environment",yO="no_account_found",Lw="no_crypto_object",vO="unexpected_credential_type",bO="invalid_assertion",wO="invalid_client_credential",u_="token_refresh_required",CO="user_timeout_reached",Ux="token_claims_cnf_required_for_signedjwt",zx="authorization_code_missing_from_server_response",xO="binding_key_not_removed",Gx="end_session_endpoint_not_supported",Hx="key_id_missing",SO="no_network_connectivity",IO="user_canceled",TO="missing_tenant_id_error",Yr="method_not_implemented",AO="nested_app_auth_bridge_disabled";var Kr={[Ow]:"The client info could not be parsed/decoded correctly",[Mx]:"The client info was empty",[Pw]:"Token cannot be parsed",[Dx]:"The token is null or empty",[Yh]:"Endpoints cannot be resolved",[kx]:"Network request failed",[Ox]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Px]:"The hash parameters could not be deserialized",[Pg]:"State was not the expected format",[Rx]:"State mismatch error",[Rw]:"State not found",[Fx]:"Nonce mismatch error",[Zy]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Lx]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[pO]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[mO]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Nx]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Bx]:"Token request cannot be made without authorization code or refresh token.",[jx]:"Cannot remove null or empty scope from ScopeSet",[Vx]:"Cannot append ScopeSet",[Fw]:"Empty input ScopeSet cannot be processed",[fO]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[gO]:"Device code is expired.",[_O]:"Device code stopped polling for unknown reasons.",[Qy]:"Please pass an account object, silent flow is not supported without account information",[$x]:"Cache record object was null or undefined.",[Xy]:"Invalid environment when attempting to create cache entry",[yO]:"No account found in cache for given key.",[Lw]:"No crypto object detected.",[vO]:"Unexpected credential type.",[bO]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[wO]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[u_]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[CO]:"User defined timeout for device code polling reached",[Ux]:"Cannot generate a POP jwt if the token_claims are not populated",[zx]:"Server response does not contain an authorization code to proceed",[xO]:"Could not remove the credential's binding key from storage.",[Gx]:"The provided authority does not support logout",[Hx]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[SO]:"No network connectivity. Check your internet connection.",[IO]:"User cancelled the flow.",[TO]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Yr]:"This method has not been implemented",[AO]:"The nested app auth bridge is disabled"},eme={clientInfoDecodingError:{code:Ow,desc:Kr[Ow]},clientInfoEmptyError:{code:Mx,desc:Kr[Mx]},tokenParsingError:{code:Pw,desc:Kr[Pw]},nullOrEmptyToken:{code:Dx,desc:Kr[Dx]},endpointResolutionError:{code:Yh,desc:Kr[Yh]},networkError:{code:kx,desc:Kr[kx]},unableToGetOpenidConfigError:{code:Ox,desc:Kr[Ox]},hashNotDeserialized:{code:Px,desc:Kr[Px]},invalidStateError:{code:Pg,desc:Kr[Pg]},stateMismatchError:{code:Rx,desc:Kr[Rx]},stateNotFoundError:{code:Rw,desc:Kr[Rw]},nonceMismatchError:{code:Fx,desc:Kr[Fx]},authTimeNotFoundError:{code:Zy,desc:Kr[Zy]},maxAgeTranspired:{code:Lx,desc:Kr[Lx]},multipleMatchingTokens:{code:pO,desc:Kr[pO]},multipleMatchingAccounts:{code:mO,desc:Kr[mO]},multipleMatchingAppMetadata:{code:Nx,desc:Kr[Nx]},tokenRequestCannotBeMade:{code:Bx,desc:Kr[Bx]},removeEmptyScopeError:{code:jx,desc:Kr[jx]},appendScopeSetError:{code:Vx,desc:Kr[Vx]},emptyInputScopeSetError:{code:Fw,desc:Kr[Fw]},DeviceCodePollingCancelled:{code:fO,desc:Kr[fO]},DeviceCodeExpired:{code:gO,desc:Kr[gO]},DeviceCodeUnknownError:{code:_O,desc:Kr[_O]},NoAccountInSilentRequest:{code:Qy,desc:Kr[Qy]},invalidCacheRecord:{code:$x,desc:Kr[$x]},invalidCacheEnvironment:{code:Xy,desc:Kr[Xy]},noAccountFound:{code:yO,desc:Kr[yO]},noCryptoObj:{code:Lw,desc:Kr[Lw]},unexpectedCredentialType:{code:vO,desc:Kr[vO]},invalidAssertion:{code:bO,desc:Kr[bO]},invalidClientCredential:{code:wO,desc:Kr[wO]},tokenRefreshRequired:{code:u_,desc:Kr[u_]},userTimeoutReached:{code:CO,desc:Kr[CO]},tokenClaimsRequired:{code:Ux,desc:Kr[Ux]},noAuthorizationCodeFromServer:{code:zx,desc:Kr[zx]},bindingKeyNotRemovedError:{code:xO,desc:Kr[xO]},logoutNotSupported:{code:Gx,desc:Kr[Gx]},keyIdMissing:{code:Hx,desc:Kr[Hx]},noNetworkConnectivity:{code:SO,desc:Kr[SO]},userCanceledError:{code:IO,desc:Kr[IO]},missingTenantIdError:{code:TO,desc:Kr[TO]},nestedAppAuthBridgeDisabled:{code:AO,desc:Kr[AO]}},Wx=class r extends eo{constructor(i,e){super(i,e?`${Kr[i]}: ${e}`:Kr[i]),this.name="ClientAuthError",Object.setPrototypeOf(this,r.prototype)}};function di(r,i){return new Wx(r,i)}var Nw={createNewGuid:()=>{throw di(Yr)},base64Decode:()=>{throw di(Yr)},base64Encode:()=>{throw di(Yr)},base64UrlEncode:()=>{throw di(Yr)},encodeKid:()=>{throw di(Yr)},getPublicKeyThumbprint(){return st(this,null,function*(){throw di(Yr)})},removeTokenBindingKey(){return st(this,null,function*(){throw di(Yr)})},clearKeystore(){return st(this,null,function*(){throw di(Yr)})},signJwt(){return st(this,null,function*(){throw di(Yr)})},hashString(){return st(this,null,function*(){throw di(Yr)})}};var Sa=function(r){return r[r.Error=0]="Error",r[r.Warning=1]="Warning",r[r.Info=2]="Info",r[r.Verbose=3]="Verbose",r[r.Trace=4]="Trace",r}(Sa||{}),xp=class r{constructor(i,e,n){this.level=Sa.Info;let o=()=>{},s=i||r.createDefaultLoggerOptions();this.localCallback=s.loggerCallback||o,this.piiLoggingEnabled=s.piiLoggingEnabled||!1,this.level=typeof s.logLevel=="number"?s.logLevel:Sa.Info,this.correlationId=s.correlationId||qt.EMPTY_STRING,this.packageName=e||qt.EMPTY_STRING,this.packageVersion=n||qt.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Sa.Info}}clone(i,e,n){return new r({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},i,e)}logMessage(i,e){if(e.logLevel>this.level||!this.piiLoggingEnabled&&e.containsPii)return;let s=`${`[${new Date().toUTCString()}] : [${e.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Sa[e.logLevel]} - ${i}`;this.executeCallback(e.logLevel,s,e.containsPii||!1)}executeCallback(i,e,n){this.localCallback&&this.localCallback(i,e,n)}error(i,e){this.logMessage(i,{logLevel:Sa.Error,containsPii:!1,correlationId:e||qt.EMPTY_STRING})}errorPii(i,e){this.logMessage(i,{logLevel:Sa.Error,containsPii:!0,correlationId:e||qt.EMPTY_STRING})}warning(i,e){this.logMessage(i,{logLevel:Sa.Warning,containsPii:!1,correlationId:e||qt.EMPTY_STRING})}warningPii(i,e){this.logMessage(i,{logLevel:Sa.Warning,containsPii:!0,correlationId:e||qt.EMPTY_STRING})}info(i,e){this.logMessage(i,{logLevel:Sa.Info,containsPii:!1,correlationId:e||qt.EMPTY_STRING})}infoPii(i,e){this.logMessage(i,{logLevel:Sa.Info,containsPii:!0,correlationId:e||qt.EMPTY_STRING})}verbose(i,e){this.logMessage(i,{logLevel:Sa.Verbose,containsPii:!1,correlationId:e||qt.EMPTY_STRING})}verbosePii(i,e){this.logMessage(i,{logLevel:Sa.Verbose,containsPii:!0,correlationId:e||qt.EMPTY_STRING})}trace(i,e){this.logMessage(i,{logLevel:Sa.Trace,containsPii:!1,correlationId:e||qt.EMPTY_STRING})}tracePii(i,e){this.logMessage(i,{logLevel:Sa.Trace,containsPii:!0,correlationId:e||qt.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};var A4="@azure/msal-common",SA="14.16.1";var Bw={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};var Ya={};am(Ya,{createAccessTokenEntity:()=>jW,createIdTokenEntity:()=>BW,createRefreshTokenEntity:()=>VW,generateAppMetadataKey:()=>M6e,generateAuthorityMetadataExpiresAt:()=>M4,generateCredentialKey:()=>DO,isAccessTokenEntity:()=>v6e,isAppMetadataEntity:()=>D6e,isAuthorityMetadataEntity:()=>k6e,isAuthorityMetadataExpired:()=>D4,isCredentialEntity:()=>E4,isIdTokenEntity:()=>b6e,isRefreshTokenEntity:()=>w6e,isServerTelemetryEntity:()=>A6e,isThrottlingEntity:()=>E6e,updateAuthorityEndpointMetadata:()=>TA,updateCloudDiscoveryMetadata:()=>kO});var jw={};am(jw,{checkMaxAge:()=>EO,extractTokenClaims:()=>Jy,getJWSPayload:()=>tme});function Jy(r,i){let e=tme(r);try{let n=i(e);return JSON.parse(n)}catch{throw di(Pw)}}function tme(r){if(!r)throw di(Dx);let e=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(r);if(!e||e.length<4)throw di(Pw);return e[2]}function EO(r,i){if(i===0||Date.now()-3e5>r+i)throw di(Lx)}var MO={};am(MO,{delay:()=>y6e,isTokenExpired:()=>IA,nowSeconds:()=>vm,wasClockTurnedBack:()=>NW});function vm(){return Math.round(new Date().getTime()/1e3)}function IA(r,i){let e=Number(r)||0;return vm()+i>e}function NW(r){return Number(r)>vm()}function y6e(r,i){return new Promise(e=>setTimeout(()=>e(i),r))}function DO(r){return[C6e(r),x6e(r),S6e(r),I6e(r),T6e(r)].join(hc.CACHE_KEY_SEPARATOR).toLowerCase()}function BW(r,i,e,n,o){return{credentialType:Tr.ID_TOKEN,homeAccountId:r,environment:i,clientId:n,secret:e,realm:o}}function jW(r,i,e,n,o,s,l,h,p,m,f,g,y,_,w){let A={homeAccountId:r,credentialType:Tr.ACCESS_TOKEN,secret:e,cachedAt:vm().toString(),expiresOn:l.toString(),extendedExpiresOn:h.toString(),environment:i,clientId:n,realm:o,target:s,tokenType:f||Po.BEARER};if(g&&(A.userAssertionHash=g),m&&(A.refreshOn=m.toString()),_&&(A.requestedClaims=_,A.requestedClaimsHash=w),A.tokenType?.toLowerCase()!==Po.BEARER.toLowerCase())switch(A.credentialType=Tr.ACCESS_TOKEN_WITH_AUTH_SCHEME,A.tokenType){case Po.POP:let k=Jy(e,p);if(!k?.cnf?.kid)throw di(Ux);A.keyId=k.cnf.kid;break;case Po.SSH:A.keyId=y}return A}function VW(r,i,e,n,o,s,l){let h={credentialType:Tr.REFRESH_TOKEN,homeAccountId:r,environment:i,clientId:n,secret:e};return s&&(h.userAssertionHash=s),o&&(h.familyId=o),l&&(h.expiresOn=l.toString()),h}function E4(r){return r.hasOwnProperty("homeAccountId")&&r.hasOwnProperty("environment")&&r.hasOwnProperty("credentialType")&&r.hasOwnProperty("clientId")&&r.hasOwnProperty("secret")}function v6e(r){return r?E4(r)&&r.hasOwnProperty("realm")&&r.hasOwnProperty("target")&&(r.credentialType===Tr.ACCESS_TOKEN||r.credentialType===Tr.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function b6e(r){return r?E4(r)&&r.hasOwnProperty("realm")&&r.credentialType===Tr.ID_TOKEN:!1}function w6e(r){return r?E4(r)&&r.credentialType===Tr.REFRESH_TOKEN:!1}function C6e(r){return[r.homeAccountId,r.environment].join(hc.CACHE_KEY_SEPARATOR).toLowerCase()}function x6e(r){let i=r.credentialType===Tr.REFRESH_TOKEN&&r.familyId||r.clientId;return[r.credentialType,i,r.realm||""].join(hc.CACHE_KEY_SEPARATOR).toLowerCase()}function S6e(r){return(r.target||"").toLowerCase()}function I6e(r){return(r.requestedClaimsHash||"").toLowerCase()}function T6e(r){return r.tokenType&&r.tokenType.toLowerCase()!==Po.BEARER.toLowerCase()?r.tokenType.toLowerCase():""}function A6e(r,i){let e=r.indexOf(_d.CACHE_KEY)===0,n=!0;return i&&(n=i.hasOwnProperty("failedRequests")&&i.hasOwnProperty("errors")&&i.hasOwnProperty("cacheHits")),e&&n}function E6e(r,i){let e=!1;r&&(e=r.indexOf(Ky.THROTTLING_PREFIX)===0);let n=!0;return i&&(n=i.hasOwnProperty("throttleTime")),e&&n}function M6e({environment:r,clientId:i}){return[lO,r,i].join(hc.CACHE_KEY_SEPARATOR).toLowerCase()}function D6e(r,i){return i?r.indexOf(lO)===0&&i.hasOwnProperty("clientId")&&i.hasOwnProperty("environment"):!1}function k6e(r,i){return i?r.indexOf(xA.CACHE_KEY)===0&&i.hasOwnProperty("aliases")&&i.hasOwnProperty("preferred_cache")&&i.hasOwnProperty("preferred_network")&&i.hasOwnProperty("canonical_authority")&&i.hasOwnProperty("authorization_endpoint")&&i.hasOwnProperty("token_endpoint")&&i.hasOwnProperty("issuer")&&i.hasOwnProperty("aliasesFromNetwork")&&i.hasOwnProperty("endpointsFromNetwork")&&i.hasOwnProperty("expiresAt")&&i.hasOwnProperty("jwks_uri"):!1}function M4(){return vm()+xA.REFRESH_TIME_SECONDS}function TA(r,i,e){r.authorization_endpoint=i.authorization_endpoint,r.token_endpoint=i.token_endpoint,r.end_session_endpoint=i.end_session_endpoint,r.issuer=i.issuer,r.endpointsFromNetwork=e,r.jwks_uri=i.jwks_uri}function kO(r,i,e){r.aliases=i.aliases,r.preferred_cache=i.preferred_cache,r.preferred_network=i.preferred_network,r.aliasesFromNetwork=e}function D4(r){return r.expiresAt<=vm()}var Rg={};am(Rg,{authorityMismatch:()=>BO,authorityUriInsecure:()=>Yx,cannotAllowNativeBroker:()=>NO,cannotSetOIDCOptions:()=>LO,claimsRequestParsingError:()=>OO,emptyInputScopesError:()=>Zx,invalidAuthenticationHeader:()=>FO,invalidAuthorityMetadata:()=>tS,invalidClaims:()=>ev,invalidCloudDiscoveryMetadata:()=>Vw,invalidCodeChallengeMethod:()=>eS,invalidPromptValue:()=>Qx,logoutRequestEmpty:()=>Jx,missingNonceAuthenticationHeader:()=>RO,missingSshJwk:()=>iv,missingSshKid:()=>PO,pkceParamsMissing:()=>tv,redirectUriEmpty:()=>qx,tokenRequestEmpty:()=>Xx,untrustedAuthority:()=>iS,urlEmptyError:()=>Kx,urlParseError:()=>h_});var qx="redirect_uri_empty",OO="claims_request_parsing_error",Yx="authority_uri_insecure",h_="url_parse_error",Kx="empty_url_error",Zx="empty_input_scopes_error",Qx="invalid_prompt_value",ev="invalid_claims",Xx="token_request_empty",Jx="logout_request_empty",eS="invalid_code_challenge_method",tv="pkce_params_missing",Vw="invalid_cloud_discovery_metadata",tS="invalid_authority_metadata",iS="untrusted_authority",iv="missing_ssh_jwk",PO="missing_ssh_kid",RO="missing_nonce_authentication_header",FO="invalid_authentication_header",LO="cannot_set_OIDCOptions",NO="cannot_allow_native_broker",BO="authority_mismatch";var Wl={[qx]:"A redirect URI is required for all calls, and none has been set.",[OO]:"Could not parse the given claims request object.",[Yx]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[h_]:"URL could not be parsed into appropriate segments.",[Kx]:"URL was empty or null.",[Zx]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Qx]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[ev]:"Given claims parameter must be a stringified JSON object.",[Xx]:"Token request was empty and not found in cache.",[Jx]:"The logout request was null or undefined.",[eS]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[tv]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Vw]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[tS]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[iS]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[iv]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[PO]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[RO]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[FO]:"Invalid authentication header provided",[LO]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[NO]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[BO]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},ime={redirectUriNotSet:{code:qx,desc:Wl[qx]},claimsRequestParsingError:{code:OO,desc:Wl[OO]},authorityUriInsecure:{code:Yx,desc:Wl[Yx]},urlParseError:{code:h_,desc:Wl[h_]},urlEmptyError:{code:Kx,desc:Wl[Kx]},emptyScopesError:{code:Zx,desc:Wl[Zx]},invalidPrompt:{code:Qx,desc:Wl[Qx]},invalidClaimsRequest:{code:ev,desc:Wl[ev]},tokenRequestEmptyError:{code:Xx,desc:Wl[Xx]},logoutRequestEmptyError:{code:Jx,desc:Wl[Jx]},invalidCodeChallengeMethod:{code:eS,desc:Wl[eS]},invalidCodeChallengeParams:{code:tv,desc:Wl[tv]},invalidCloudDiscoveryMetadata:{code:Vw,desc:Wl[Vw]},invalidAuthorityMetadata:{code:tS,desc:Wl[tS]},untrustedAuthority:{code:iS,desc:Wl[iS]},missingSshJwk:{code:iv,desc:Wl[iv]},missingSshKid:{code:PO,desc:Wl[PO]},missingNonceAuthenticationHeader:{code:RO,desc:Wl[RO]},invalidAuthenticationHeader:{code:FO,desc:Wl[FO]},cannotSetOIDCOptions:{code:LO,desc:Wl[LO]},cannotAllowNativeBroker:{code:NO,desc:Wl[NO]},authorityMismatch:{code:BO,desc:Wl[BO]}},jO=class r extends eo{constructor(i){super(i,Wl[i]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,r.prototype)}};function $o(r){return new jO(r)}var ql=class{static isEmptyObj(i){if(i)try{let e=JSON.parse(i);return Object.keys(e).length===0}catch{}return!0}static startsWith(i,e){return i.indexOf(e)===0}static endsWith(i,e){return i.length>=e.length&&i.lastIndexOf(e)===i.length-e.length}static queryStringToObject(i){let e={},n=i.split("&"),o=s=>decodeURIComponent(s.replace(/\+/g," "));return n.forEach(s=>{if(s.trim()){let[l,h]=s.split(/=(.+)/g,2);l&&h&&(e[o(l)]=o(h))}}),e}static trimArrayEntries(i){return i.map(e=>e.trim())}static removeEmptyStringsFromArray(i){return i.filter(e=>!!e)}static jsonParseHelper(i){try{return JSON.parse(i)}catch{return null}}static matchPattern(i,e){return new RegExp(i.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(e)}};var gl=class r{constructor(i){let e=i?ql.trimArrayEntries([...i]):[],n=e?ql.removeEmptyStringsFromArray(e):[];this.validateInputScopes(n),this.scopes=new Set,n.forEach(o=>this.scopes.add(o))}static fromString(i){let n=(i||qt.EMPTY_STRING).split(" ");return new r(n)}static createSearchScopes(i){let e=new r(i);return e.containsOnlyOIDCScopes()?e.removeScope(qt.OFFLINE_ACCESS_SCOPE):e.removeOIDCScopes(),e}validateInputScopes(i){if(!i||i.length<1)throw $o(Zx)}containsScope(i){let e=this.printScopesLowerCase().split(" "),n=new r(e);return i?n.scopes.has(i.toLowerCase()):!1}containsScopeSet(i){return!i||i.scopes.size<=0?!1:this.scopes.size>=i.scopes.size&&i.asArray().every(e=>this.containsScope(e))}containsOnlyOIDCScopes(){let i=0;return RW.forEach(e=>{this.containsScope(e)&&(i+=1)}),this.scopes.size===i}appendScope(i){i&&this.scopes.add(i.trim())}appendScopes(i){try{i.forEach(e=>this.appendScope(e))}catch{throw di(Vx)}}removeScope(i){if(!i)throw di(jx);this.scopes.delete(i.trim())}removeOIDCScopes(){RW.forEach(i=>{this.scopes.delete(i)})}unionScopeSets(i){if(!i)throw di(Fw);let e=new Set;return i.scopes.forEach(n=>e.add(n.toLowerCase())),this.scopes.forEach(n=>e.add(n.toLowerCase())),e}intersectingScopeSets(i){if(!i)throw di(Fw);i.containsOnlyOIDCScopes()||i.removeOIDCScopes();let e=this.unionScopeSets(i),n=i.getScopeCount(),o=this.getScopeCount();return e.size<o+n}getScopeCount(){return this.scopes.size}asArray(){let i=[];return this.scopes.forEach(e=>i.push(e)),i}printScopes(){return this.scopes?this.asArray().join(" "):qt.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};function AA(r,i){if(!r)throw di(Mx);try{let e=i(r);return JSON.parse(e)}catch{throw di(Ow)}}function nv(r){if(!r)throw di(Ow);let i=r.split(hc.CLIENT_INFO_SEPARATOR,2);return{uid:i[0],utid:i.length<2?qt.EMPTY_STRING:i[1]}}function EA(r,i){return!!r&&!!i&&r===i.split(".")[1]}function MA(r,i,e,n){if(n){let{oid:o,sub:s,tid:l,name:h,tfp:p,acr:m}=n,f=l||p||m||"";return{tenantId:f,localAccountId:o||s||"",name:h,isHomeTenant:EA(f,r)}}else return{tenantId:e,localAccountId:i,isHomeTenant:EA(e,r)}}function nS(r,i,e,n){let o=r;if(i){let s=i,{isHomeTenant:h}=s,p=sm(s,["isHomeTenant"]);o=Xe(Xe({},r),p)}if(e){let l=MA(r.homeAccountId,r.localAccountId,r.tenantId,e),{isHomeTenant:h}=l,p=sm(l,["isHomeTenant"]);return o=li(Xe(Xe({},o),p),{idTokenClaims:e,idToken:n}),o}return o}var Kh={Default:0,Adfs:1,Dsts:2,Ciam:3};function k4(r){return r&&(r.tid||r.tfp||r.acr)||null}var mu={AAD:"AAD",OIDC:"OIDC"};var rl=class r{generateAccountId(){return[this.homeAccountId,this.environment].join(hc.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return r.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(i=>[i.tenantId,i]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(i){let e=i.homeAccountId.split(".")[1];return[i.homeAccountId,i.environment||"",e||i.tenantId||""].join(hc.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(i,e,n){let o=new r;e.authorityType===Kh.Adfs?o.authorityType=CA.ADFS_ACCOUNT_TYPE:e.protocolMode===mu.AAD?o.authorityType=CA.MSSTS_ACCOUNT_TYPE:o.authorityType=CA.GENERIC_ACCOUNT_TYPE;let s;i.clientInfo&&n&&(s=AA(i.clientInfo,n)),o.clientInfo=i.clientInfo,o.homeAccountId=i.homeAccountId,o.nativeAccountId=i.nativeAccountId;let l=i.environment||e&&e.getPreferredCache();if(!l)throw di(Xy);o.environment=l,o.realm=s?.utid||k4(i.idTokenClaims)||"",o.localAccountId=s?.uid||i.idTokenClaims?.oid||i.idTokenClaims?.sub||"";let h=i.idTokenClaims?.preferred_username||i.idTokenClaims?.upn,p=i.idTokenClaims?.emails?i.idTokenClaims.emails[0]:null;if(o.username=h||p||"",o.name=i.idTokenClaims?.name||"",o.cloudGraphHostName=i.cloudGraphHostName,o.msGraphHost=i.msGraphHost,i.tenantProfiles)o.tenantProfiles=i.tenantProfiles;else{let m=MA(i.homeAccountId,o.localAccountId,o.realm,i.idTokenClaims);o.tenantProfiles=[m]}return o}static createFromAccountInfo(i,e,n){let o=new r;return o.authorityType=i.authorityType||CA.GENERIC_ACCOUNT_TYPE,o.homeAccountId=i.homeAccountId,o.localAccountId=i.localAccountId,o.nativeAccountId=i.nativeAccountId,o.realm=i.tenantId,o.environment=i.environment,o.username=i.username,o.name=i.name,o.cloudGraphHostName=e,o.msGraphHost=n,o.tenantProfiles=Array.from(i.tenantProfiles?.values()||[]),o}static generateHomeAccountId(i,e,n,o,s){if(!(e===Kh.Adfs||e===Kh.Dsts)){if(i)try{let l=AA(i,o.base64Decode);if(l.uid&&l.utid)return`${l.uid}.${l.utid}`}catch{}n.warning("No client info in response")}return s?.sub||""}static isAccountEntity(i){return i?i.hasOwnProperty("homeAccountId")&&i.hasOwnProperty("environment")&&i.hasOwnProperty("realm")&&i.hasOwnProperty("localAccountId")&&i.hasOwnProperty("username")&&i.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(i,e,n){if(!i||!e)return!1;let o=!0;if(n){let s=i.idTokenClaims||{},l=e.idTokenClaims||{};o=s.iat===l.iat&&s.nonce===l.nonce}return i.homeAccountId===e.homeAccountId&&i.localAccountId===e.localAccountId&&i.username===e.username&&i.tenantId===e.tenantId&&i.environment===e.environment&&i.nativeAccountId===e.nativeAccountId&&o}};var $w={};am($w,{getDeserializedResponse:()=>$W,stripLeadingHashOrQuery:()=>nme});function nme(r){return r.startsWith("#/")?r.substring(2):r.startsWith("#")||r.startsWith("?")?r.substring(1):r}function $W(r){if(!r||r.indexOf("=")<0)return null;try{let i=nme(r),e=Object.fromEntries(new URLSearchParams(i));if(e.code||e.error||e.error_description||e.state)return e}catch{throw di(Px)}return null}var to=class r{get urlString(){return this._urlString}constructor(i){if(this._urlString=i,!this._urlString)throw $o(Kx);i.includes("#")||(this._urlString=r.canonicalizeUri(i))}static canonicalizeUri(i){if(i){let e=i.toLowerCase();return ql.endsWith(e,"?")?e=e.slice(0,-1):ql.endsWith(e,"?/")&&(e=e.slice(0,-2)),ql.endsWith(e,"/")||(e+="/"),e}return i}validateAsUri(){let i;try{i=this.getUrlComponents()}catch{throw $o(h_)}if(!i.HostNameAndPort||!i.PathSegments)throw $o(h_);if(!i.Protocol||i.Protocol.toLowerCase()!=="https:")throw $o(Yx)}static appendQueryString(i,e){return e?i.indexOf("?")<0?`${i}?${e}`:`${i}&${e}`:i}static removeHashFromUrl(i){return r.canonicalizeUri(i.split("#")[0])}replaceTenantPath(i){let e=this.getUrlComponents(),n=e.PathSegments;return i&&n.length!==0&&(n[0]===Dg.COMMON||n[0]===Dg.ORGANIZATIONS)&&(n[0]=i),r.constructAuthorityUriFromObject(e)}getUrlComponents(){let i=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),e=this.urlString.match(i);if(!e)throw $o(h_);let n={Protocol:e[1],HostNameAndPort:e[4],AbsolutePath:e[5],QueryString:e[7]},o=n.AbsolutePath.split("/");return o=o.filter(s=>s&&s.length>0),n.PathSegments=o,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(i){let e=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=i.match(e);if(!n)throw $o(h_);return n[2]}static getAbsoluteUrl(i,e){if(i[0]===qt.FORWARD_SLASH){let o=new r(e).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+i}return i}static constructAuthorityUriFromObject(i){return new r(i.Protocol+"//"+i.HostNameAndPort+"/"+i.PathSegments.join("/"))}static hashContainsKnownProperties(i){return!!$W(i)}};var ome={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},UW=ome.endpointMetadata,zW=ome.instanceDiscoveryMetadata,GW=new Set;zW.metadata.forEach(r=>{r.aliases.forEach(i=>{GW.add(i)})});function sme(r,i){let e,n=r.canonicalAuthority;if(n){let o=new to(n).getUrlComponents().HostNameAndPort;e=rme(o,r.cloudDiscoveryMetadata?.metadata,qh.CONFIG,i)||rme(o,zW.metadata,qh.HARDCODED_VALUES,i)||r.knownAuthorities}return e||[]}function rme(r,i,e,n){if(n?.trace(`getAliasesFromMetadata called with source: ${e}`),r&&i){let o=VO(i,r);if(o)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${e}, returning aliases`),o.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${e}`)}return null}function ame(r){return VO(zW.metadata,r)}function VO(r,i){for(let e=0;e<r.length;e++){let n=r[e];if(n.aliases.includes(i))return n}return null}var P4={};am(P4,{cacheErrorUnknown:()=>$O,cacheQuotaExceeded:()=>O4});var O4="cache_quota_exceeded",$O="cache_error_unknown";var HW={[O4]:"Exceeded cache storage capacity.",[$O]:"Unexpected error occurred when using cache storage."},Uw=class r extends Error{constructor(i,e){let n=e||(HW[i]?HW[i]:HW[$O]);super(`${i}: ${n}`),Object.setPrototypeOf(this,r.prototype),this.name="CacheError",this.errorCode=i,this.errorMessage=n}};function UO(r){return r instanceof Error?r.name==="QuotaExceededError"||r.name==="NS_ERROR_DOM_QUOTA_REACHED"||r.message.includes("exceeded the quota")?new Uw(O4):new Uw(r.name,r.message):new Uw($O)}var rv=class r{constructor(i,e,n,o){this.clientId=i,this.cryptoImpl=e,this.commonLogger=n.clone(A4,SA),this.staticAuthorityOptions=o}getAllAccounts(i,e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{},i),i,e)}getAccountInfoFilteredBy(i,e){let n=this.getAllAccounts(e,i);return n.length>1?n.sort(s=>s.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(i,e){let n=this.getAccountsFilteredBy(i,e);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(i,e,n){return i.flatMap(o=>this.getTenantProfilesFromAccountEntity(o,e,n?.tenantId,n))}getTenantedAccountInfoByFilter(i,e,n,o,s){let l=null,h;if(s&&!this.tenantProfileMatchesFilter(n,s))return null;let p=this.getIdToken(i,o,e,n.tenantId);return p&&(h=Jy(p.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(h,s))?null:(l=nS(i,n,h,p?.secret),l)}getTenantProfilesFromAccountEntity(i,e,n,o){let s=i.getAccountInfo(),l=s.tenantProfiles||new Map,h=this.getTokenKeys();if(n){let m=l.get(n);if(m)l=new Map([[n,m]]);else return[]}let p=[];return l.forEach(m=>{let f=this.getTenantedAccountInfoByFilter(s,h,m,e,o);f&&p.push(f)}),p}tenantProfileMatchesFilter(i,e){return!(e.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(i,e.localAccountId)||e.name&&i.name!==e.name||e.isHomeTenant!==void 0&&i.isHomeTenant!==e.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(i,e){return!(e&&(e.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(i,e.localAccountId)||e.loginHint&&!this.matchLoginHintFromTokenClaims(i,e.loginHint)||e.username&&!this.matchUsername(i.preferred_username,e.username)||e.name&&!this.matchName(i,e.name)||e.sid&&!this.matchSid(i,e.sid)))}saveCacheRecord(i,e,n){return st(this,null,function*(){if(!i)throw di($x);try{i.account&&this.setAccount(i.account,e),i.idToken&&n?.idToken!==!1&&this.setIdTokenCredential(i.idToken,e),i.accessToken&&n?.accessToken!==!1&&(yield this.saveAccessToken(i.accessToken,e)),i.refreshToken&&n?.refreshToken!==!1&&this.setRefreshTokenCredential(i.refreshToken,e),i.appMetadata&&this.setAppMetadata(i.appMetadata,e)}catch(o){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),o instanceof eo?o:UO(o)}})}saveAccessToken(i,e){return st(this,null,function*(){let n={clientId:i.clientId,credentialType:i.credentialType,environment:i.environment,homeAccountId:i.homeAccountId,realm:i.realm,tokenType:i.tokenType,requestedClaimsHash:i.requestedClaimsHash},o=this.getTokenKeys(),s=gl.fromString(i.target);o.accessToken.forEach(l=>{if(!this.accessTokenKeyMatchesFilter(l,n,!1))return;let h=this.getAccessTokenCredential(l,e);h&&this.credentialMatchesFilter(h,n)&&gl.fromString(h.target).intersectingScopeSets(s)&&this.removeAccessToken(l,e)}),this.setAccessTokenCredential(i,e)})}getAccountsFilteredBy(i,e){let n=this.getAccountKeys(),o=[];return n.forEach(s=>{if(!this.isAccountKey(s,i.homeAccountId))return;let l=this.getAccount(s,e,this.commonLogger);if(!l||i.homeAccountId&&!this.matchHomeAccountId(l,i.homeAccountId)||i.username&&!this.matchUsername(l.username,i.username)||i.environment&&!this.matchEnvironment(l,i.environment)||i.realm&&!this.matchRealm(l,i.realm)||i.nativeAccountId&&!this.matchNativeAccountId(l,i.nativeAccountId)||i.authorityType&&!this.matchAuthorityType(l,i.authorityType))return;let h={localAccountId:i?.localAccountId,name:i?.name},p=l.tenantProfiles?.filter(m=>this.tenantProfileMatchesFilter(m,h));p&&p.length===0||o.push(l)}),o}isAccountKey(i,e,n){return!(i.split(hc.CACHE_KEY_SEPARATOR).length<3||e&&!i.toLowerCase().includes(e.toLowerCase())||n&&!i.toLowerCase().includes(n.toLowerCase()))}isCredentialKey(i){if(i.split(hc.CACHE_KEY_SEPARATOR).length<6)return!1;let e=i.toLowerCase();if(e.indexOf(Tr.ID_TOKEN.toLowerCase())===-1&&e.indexOf(Tr.ACCESS_TOKEN.toLowerCase())===-1&&e.indexOf(Tr.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&e.indexOf(Tr.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(e.indexOf(Tr.REFRESH_TOKEN.toLowerCase())>-1){let n=`${Tr.REFRESH_TOKEN}${hc.CACHE_KEY_SEPARATOR}${this.clientId}${hc.CACHE_KEY_SEPARATOR}`,o=`${Tr.REFRESH_TOKEN}${hc.CACHE_KEY_SEPARATOR}${kw}${hc.CACHE_KEY_SEPARATOR}`;if(e.indexOf(n.toLowerCase())===-1&&e.indexOf(o.toLowerCase())===-1)return!1}else if(e.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(i,e){return!(e.clientId&&!this.matchClientId(i,e.clientId)||e.userAssertionHash&&!this.matchUserAssertionHash(i,e.userAssertionHash)||typeof e.homeAccountId=="string"&&!this.matchHomeAccountId(i,e.homeAccountId)||e.environment&&!this.matchEnvironment(i,e.environment)||e.realm&&!this.matchRealm(i,e.realm)||e.credentialType&&!this.matchCredentialType(i,e.credentialType)||e.familyId&&!this.matchFamilyId(i,e.familyId)||e.target&&!this.matchTarget(i,e.target)||(e.requestedClaimsHash||i.requestedClaimsHash)&&i.requestedClaimsHash!==e.requestedClaimsHash||i.credentialType===Tr.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(e.tokenType&&!this.matchTokenType(i,e.tokenType)||e.tokenType===Po.SSH&&e.keyId&&!this.matchKeyId(i,e.keyId)))}getAppMetadataFilteredBy(i){let e=this.getKeys(),n={};return e.forEach(o=>{if(!this.isAppMetadata(o))return;let s=this.getAppMetadata(o);s&&(i.environment&&!this.matchEnvironment(s,i.environment)||i.clientId&&!this.matchClientId(s,i.clientId)||(n[o]=s))}),n}getAuthorityMetadataByAlias(i){let e=this.getAuthorityMetadataKeys(),n=null;return e.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;let s=this.getAuthorityMetadata(o);s&&s.aliases.indexOf(i)!==-1&&(n=s)}),n}removeAllAccounts(i){return st(this,null,function*(){let e=this.getAccountKeys(),n=[];e.forEach(o=>{n.push(this.removeAccount(o,i))}),yield Promise.all(n)})}removeAccount(i,e){return st(this,null,function*(){let n=this.getAccount(i,e,this.commonLogger);n&&(yield this.removeAccountContext(n,e),this.removeItem(i,e))})}removeAccountContext(i,e){return st(this,null,function*(){let n=this.getTokenKeys(),o=i.generateAccountId();n.idToken.forEach(s=>{s.indexOf(o)===0&&this.removeIdToken(s,e)}),n.accessToken.forEach(s=>{s.indexOf(o)===0&&this.removeAccessToken(s,e)}),n.refreshToken.forEach(s=>{s.indexOf(o)===0&&this.removeRefreshToken(s,e)}),this.getKeys().forEach(s=>{s.includes(o)&&this.removeItem(s,e)})})}updateOutdatedCachedAccount(i,e,n,o){if(e&&e.isSingleTenant()){this.commonLogger?.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");let s=this.getAccountKeys().filter(f=>f.startsWith(e.homeAccountId)),l=[];s.forEach(f=>{let g=this.getCachedAccountEntity(f,n);g&&l.push(g)});let h=l.find(f=>EA(f.realm,f.homeAccountId))||l[0];h.tenantProfiles=l.map(f=>({tenantId:f.realm,localAccountId:f.localAccountId,name:f.name,isHomeTenant:EA(f.realm,f.homeAccountId)}));let p=r.toObject(new rl,Xe({},h)),m=p.generateAccountKey();return s.forEach(f=>{f!==m&&this.removeOutdatedAccount(i,n)}),this.setAccount(p,n),o?.verbose("Updated an outdated account entity in the cache"),p}return e}removeAccessToken(i,e){let n=this.getAccessTokenCredential(i,e);if(this.removeItem(i,e),!n||n.credentialType.toLowerCase()!==Tr.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||n.tokenType!==Po.POP)return;let o=n.keyId;o&&this.cryptoImpl.removeTokenBindingKey(o).catch(()=>{this.commonLogger.error("Binding key could not be removed")})}removeAppMetadata(i){return this.getKeys().forEach(n=>{this.isAppMetadata(n)&&this.removeItem(n,i)}),!0}readAccountFromCache(i,e){let n=rl.generateAccountCacheKey(i);return this.getAccount(n,e,this.commonLogger)}getIdToken(i,e,n,o,s){this.commonLogger.trace("CacheManager - getIdToken called");let l={homeAccountId:i.homeAccountId,environment:i.environment,credentialType:Tr.ID_TOKEN,clientId:this.clientId,realm:o},h=this.getIdTokensByFilter(l,e,n),p=h.size;if(p<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(p>1){let m=h;if(!o){let f=new Map;h.forEach((y,_)=>{y.realm===i.tenantId&&f.set(_,y)});let g=f.size;if(g<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),h.values().next().value;if(g===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),f.values().next().value;m=f}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),m.forEach((f,g)=>{this.removeIdToken(g,e)}),s&&e&&s.addFields({multiMatchedID:h.size},e),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),h.values().next().value}getIdTokensByFilter(i,e,n){let o=n&&n.idToken||this.getTokenKeys().idToken,s=new Map;return o.forEach(l=>{if(!this.idTokenKeyMatchesFilter(l,Xe({clientId:this.clientId},i)))return;let h=this.getIdTokenCredential(l,e);h&&this.credentialMatchesFilter(h,i)&&s.set(l,h)}),s}idTokenKeyMatchesFilter(i,e){let n=i.toLowerCase();return!(e.clientId&&n.indexOf(e.clientId.toLowerCase())===-1||e.homeAccountId&&n.indexOf(e.homeAccountId.toLowerCase())===-1)}removeIdToken(i,e){this.removeItem(i,e)}removeRefreshToken(i,e){this.removeItem(i,e)}getAccessToken(i,e,n,o,s){this.commonLogger.trace("CacheManager - getAccessToken called");let l=gl.createSearchScopes(e.scopes),h=e.authenticationScheme||Po.BEARER,p=h&&h.toLowerCase()!==Po.BEARER.toLowerCase()?Tr.ACCESS_TOKEN_WITH_AUTH_SCHEME:Tr.ACCESS_TOKEN,m={homeAccountId:i.homeAccountId,environment:i.environment,credentialType:p,clientId:this.clientId,realm:o||i.tenantId,target:l,tokenType:h,keyId:e.sshKid,requestedClaimsHash:e.requestedClaimsHash},f=n&&n.accessToken||this.getTokenKeys().accessToken,g=[];f.forEach(_=>{if(this.accessTokenKeyMatchesFilter(_,m,!0)){let w=this.getAccessTokenCredential(_,e.correlationId);w&&this.credentialMatchesFilter(w,m)&&g.push(w)}});let y=g.length;return y<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):y>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),g.forEach(_=>{this.removeAccessToken(DO(_),e.correlationId)}),s&&e.correlationId&&s.addFields({multiMatchedAT:g.length},e.correlationId),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),g[0])}accessTokenKeyMatchesFilter(i,e,n){let o=i.toLowerCase();if(e.clientId&&o.indexOf(e.clientId.toLowerCase())===-1||e.homeAccountId&&o.indexOf(e.homeAccountId.toLowerCase())===-1||e.realm&&o.indexOf(e.realm.toLowerCase())===-1||e.requestedClaimsHash&&o.indexOf(e.requestedClaimsHash.toLowerCase())===-1)return!1;if(e.target){let s=e.target.asArray();for(let l=0;l<s.length;l++){if(n&&!o.includes(s[l].toLowerCase()))return!1;if(!n&&o.includes(s[l].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(i,e){let n=this.getTokenKeys(),o=[];return n.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,i,!0))return;let l=this.getAccessTokenCredential(s,e);l&&this.credentialMatchesFilter(l,i)&&o.push(l)}),o}getRefreshToken(i,e,n,o,s){this.commonLogger.trace("CacheManager - getRefreshToken called");let l=e?kw:void 0,h={homeAccountId:i.homeAccountId,environment:i.environment,credentialType:Tr.REFRESH_TOKEN,clientId:this.clientId,familyId:l},p=o&&o.refreshToken||this.getTokenKeys().refreshToken,m=[];p.forEach(g=>{if(this.refreshTokenKeyMatchesFilter(g,h)){let y=this.getRefreshTokenCredential(g,n);y&&this.credentialMatchesFilter(y,h)&&m.push(y)}});let f=m.length;return f<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(f>1&&s&&n&&s.addFields({multiMatchedRT:f},n),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),m[0])}refreshTokenKeyMatchesFilter(i,e){let n=i.toLowerCase();return!(e.familyId&&n.indexOf(e.familyId.toLowerCase())===-1||!e.familyId&&e.clientId&&n.indexOf(e.clientId.toLowerCase())===-1||e.homeAccountId&&n.indexOf(e.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(i){let e={environment:i,clientId:this.clientId},n=this.getAppMetadataFilteredBy(e),o=Object.keys(n).map(l=>n[l]),s=o.length;if(s<1)return null;if(s>1)throw di(Nx);return o[0]}isAppMetadataFOCI(i){let e=this.readAppMetadataFromCache(i);return!!(e&&e.familyId===kw)}matchHomeAccountId(i,e){return typeof i.homeAccountId=="string"&&e===i.homeAccountId}matchLocalAccountIdFromTokenClaims(i,e){let n=i.oid||i.sub;return e===n}matchLocalAccountIdFromTenantProfile(i,e){return i.localAccountId===e}matchName(i,e){return e.toLowerCase()===i.name?.toLowerCase()}matchUsername(i,e){return!!(i&&typeof i=="string"&&e?.toLowerCase()===i.toLowerCase())}matchUserAssertionHash(i,e){return!!(i.userAssertionHash&&e===i.userAssertionHash)}matchEnvironment(i,e){if(this.staticAuthorityOptions){let o=sme(this.staticAuthorityOptions,this.commonLogger);if(o.includes(e)&&o.includes(i.environment))return!0}let n=this.getAuthorityMetadataByAlias(e);return!!(n&&n.aliases.indexOf(i.environment)>-1)}matchCredentialType(i,e){return i.credentialType&&e.toLowerCase()===i.credentialType.toLowerCase()}matchClientId(i,e){return!!(i.clientId&&e===i.clientId)}matchFamilyId(i,e){return!!(i.familyId&&e===i.familyId)}matchRealm(i,e){return i.realm?.toLowerCase()===e.toLowerCase()}matchNativeAccountId(i,e){return!!(i.nativeAccountId&&e===i.nativeAccountId)}matchLoginHintFromTokenClaims(i,e){return i.login_hint===e||i.preferred_username===e||i.upn===e}matchSid(i,e){return i.sid===e}matchAuthorityType(i,e){return!!(i.authorityType&&e.toLowerCase()===i.authorityType.toLowerCase())}matchTarget(i,e){return i.credentialType!==Tr.ACCESS_TOKEN&&i.credentialType!==Tr.ACCESS_TOKEN_WITH_AUTH_SCHEME||!i.target?!1:gl.fromString(i.target).containsScopeSet(e)}matchTokenType(i,e){return!!(i.tokenType&&i.tokenType===e)}matchKeyId(i,e){return!!(i.keyId&&i.keyId===e)}isAppMetadata(i){return i.indexOf(lO)!==-1}isAuthorityMetadata(i){return i.indexOf(xA.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(i){return`${xA.CACHE_KEY}-${this.clientId}-${i}`}static toObject(i,e){for(let n in e)i[n]=e[n];return i}},zO=class extends rv{setAccount(){throw di(Yr)}getAccount(){throw di(Yr)}getCachedAccountEntity(){throw di(Yr)}setIdTokenCredential(){throw di(Yr)}getIdTokenCredential(){throw di(Yr)}setAccessTokenCredential(){throw di(Yr)}getAccessTokenCredential(){throw di(Yr)}setRefreshTokenCredential(){throw di(Yr)}getRefreshTokenCredential(){throw di(Yr)}setAppMetadata(){throw di(Yr)}getAppMetadata(){throw di(Yr)}setServerTelemetry(){throw di(Yr)}getServerTelemetry(){throw di(Yr)}setAuthorityMetadata(){throw di(Yr)}getAuthorityMetadata(){throw di(Yr)}getAuthorityMetadataKeys(){throw di(Yr)}setThrottlingCache(){throw di(Yr)}getThrottlingCache(){throw di(Yr)}removeItem(){throw di(Yr)}getKeys(){throw di(Yr)}getAccountKeys(){throw di(Yr)}getTokenKeys(){throw di(Yr)}updateCredentialCacheKey(){throw di(Yr)}removeOutdatedAccount(){throw di(Yr)}};var R4={tokenRenewalOffsetSeconds:LW,preventCorsPreflight:!1},O6e={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Sa.Info,correlationId:qt.EMPTY_STRING},P6e={claimsBasedCachingEnabled:!1},R6e={sendGetRequestAsync(){return st(this,null,function*(){throw di(Yr)})},sendPostRequestAsync(){return st(this,null,function*(){throw di(Yr)})}},F6e={sku:qt.SKU,version:SA,cpu:qt.EMPTY_STRING,os:qt.EMPTY_STRING},L6e={clientSecret:qt.EMPTY_STRING,clientAssertion:void 0},N6e={azureCloudInstance:Bw.None,tenant:`${qt.DEFAULT_COMMON_TENANT}`},B6e={application:{appName:"",appVersion:""}};function lme({authOptions:r,systemOptions:i,loggerOptions:e,cacheOptions:n,storageInterface:o,networkInterface:s,cryptoInterface:l,clientCredentials:h,libraryInfo:p,telemetry:m,serverTelemetryManager:f,persistencePlugin:g,serializableCache:y}){let _=Xe(Xe({},O6e),e);return{authOptions:j6e(r),systemOptions:Xe(Xe({},R4),i),loggerOptions:_,cacheOptions:Xe(Xe({},P6e),n),storageInterface:o||new zO(r.clientId,Nw,new xp(_)),networkInterface:s||R6e,cryptoInterface:l||Nw,clientCredentials:h||L6e,libraryInfo:Xe(Xe({},F6e),p),telemetry:Xe(Xe({},B6e),m),serverTelemetryManager:f||null,persistencePlugin:g||null,serializableCache:y||null}}function j6e(r){return Xe({clientCapabilities:[],azureCloudOptions:N6e,skipAuthorityMetadataCache:!1,instanceAware:!1},r)}function GO(r){return r.authOptions.authority.options.protocolMode===mu.OIDC}var vd={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var sv={};am(sv,{ACCESS_TOKEN:()=>U6e,BROKER_CLIENT_ID:()=>V4,BROKER_REDIRECT_URI:()=>Aq,CCS_HEADER:()=>Z6e,CLAIMS:()=>YW,CLIENT_ASSERTION:()=>yq,CLIENT_ASSERTION_TYPE:()=>vq,CLIENT_ID:()=>ov,CLIENT_INFO:()=>q6e,CLIENT_REQUEST_ID:()=>rq,CLIENT_SECRET:()=>_q,CODE:()=>eq,CODE_CHALLENGE:()=>tq,CODE_CHALLENGE_METHOD:()=>iq,CODE_VERIFIER:()=>nq,DEVICE_CODE:()=>gq,DOMAIN_HINT:()=>Tq,ERROR:()=>V6e,ERROR_DESCRIPTION:()=>$6e,EXPIRES_IN:()=>G6e,FOCI:()=>K6e,GRANT_TYPE:()=>qW,ID_TOKEN:()=>z6e,ID_TOKEN_HINT:()=>fq,LOGIN_HINT:()=>Iq,LOGOUT_HINT:()=>xq,NATIVE_BROKER:()=>Cq,NONCE:()=>XW,OBO_ASSERTION:()=>bq,ON_BEHALF_OF:()=>Y6e,POST_LOGOUT_URI:()=>mq,PROMPT:()=>JW,REDIRECT_URI:()=>F4,REFRESH_TOKEN:()=>ZW,REFRESH_TOKEN_EXPIRES_IN:()=>H6e,REQUESTED_TOKEN_USE:()=>wq,REQ_CNF:()=>B4,RESPONSE_MODE:()=>WW,RESPONSE_TYPE:()=>L4,RETURN_SPA_CODE:()=>j4,SCOPE:()=>KW,SESSION_STATE:()=>W6e,SID:()=>Sq,STATE:()=>QW,TOKEN_TYPE:()=>N4,X_APP_NAME:()=>hq,X_APP_VER:()=>pq,X_CLIENT_CPU:()=>lq,X_CLIENT_CURR_TELEM:()=>cq,X_CLIENT_EXTRA_SKU:()=>Q6e,X_CLIENT_LAST_TELEM:()=>dq,X_CLIENT_OS:()=>aq,X_CLIENT_SKU:()=>oq,X_CLIENT_VER:()=>sq,X_MS_LIB_CAPABILITY:()=>uq});var ov="client_id",F4="redirect_uri",L4="response_type",WW="response_mode",qW="grant_type",YW="claims",KW="scope",V6e="error",$6e="error_description",U6e="access_token",z6e="id_token",ZW="refresh_token",G6e="expires_in",H6e="refresh_token_expires_in",QW="state",XW="nonce",JW="prompt",W6e="session_state",q6e="client_info",eq="code",tq="code_challenge",iq="code_challenge_method",nq="code_verifier",rq="client-request-id",oq="x-client-SKU",sq="x-client-VER",aq="x-client-OS",lq="x-client-CPU",cq="x-client-current-telemetry",dq="x-client-last-telemetry",uq="x-ms-lib-capability",hq="x-app-name",pq="x-app-ver",mq="post_logout_redirect_uri",fq="id_token_hint",gq="device_code",_q="client_secret",yq="client_assertion",vq="client_assertion_type",N4="token_type",B4="req_cnf",bq="assertion",wq="requested_token_use",Y6e="on_behalf_of",K6e="foci",Z6e="X-AnchorMailbox",j4="return_spa_code",Cq="nativebroker",xq="logout_hint",Sq="sid",Iq="login_hint",Tq="domain_hint",Q6e="x-client-xtra-sku",V4="brk_client_id",Aq="brk_redirect_uri";var p_=class{static validateRedirectUri(i){if(!i)throw $o(qx)}static validatePrompt(i){let e=[];for(let n in fl)e.push(fl[n]);if(e.indexOf(i)<0)throw $o(Qx)}static validateClaims(i){try{JSON.parse(i)}catch{throw $o(ev)}}static validateCodeChallengeParams(i,e){if(!i||!e)throw $o(tv);this.validateCodeChallengeMethod(e)}static validateCodeChallengeMethod(i){if([w4.PLAIN,w4.S256].indexOf(i)<0)throw $o(eS)}};function X6e(r,i,e){if(!i)return;let n=r.get(ov);n&&r.has(V4)&&e?.addFields({embeddedClientId:n,embeddedRedirectUri:r.get(F4)},i)}var m_=class{constructor(i,e){this.parameters=new Map,this.performanceClient=e,this.correlationId=i}addResponseTypeCode(){this.parameters.set(L4,encodeURIComponent(qt.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(L4,encodeURIComponent(`${qt.TOKEN_RESPONSE_TYPE} ${qt.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(i){this.parameters.set(WW,encodeURIComponent(i||FW.QUERY))}addNativeBroker(){this.parameters.set(Cq,encodeURIComponent("1"))}addScopes(i,e=!0,n=ym){e&&!n.includes("openid")&&!i.includes("openid")&&n.push("openid");let o=e?[...i||[],...n]:i||[],s=new gl(o);this.parameters.set(KW,encodeURIComponent(s.printScopes()))}addClientId(i){this.parameters.set(ov,encodeURIComponent(i))}addRedirectUri(i){p_.validateRedirectUri(i),this.parameters.set(F4,encodeURIComponent(i))}addPostLogoutRedirectUri(i){p_.validateRedirectUri(i),this.parameters.set(mq,encodeURIComponent(i))}addIdTokenHint(i){this.parameters.set(fq,encodeURIComponent(i))}addDomainHint(i){this.parameters.set(Tq,encodeURIComponent(i))}addLoginHint(i){this.parameters.set(Iq,encodeURIComponent(i))}addCcsUpn(i){this.parameters.set(Mc.CCS_HEADER,encodeURIComponent(`UPN:${i}`))}addCcsOid(i){this.parameters.set(Mc.CCS_HEADER,encodeURIComponent(`Oid:${i.uid}@${i.utid}`))}addSid(i){this.parameters.set(Sq,encodeURIComponent(i))}addClaims(i,e){let n=this.addClientCapabilitiesToClaims(i,e);p_.validateClaims(n),this.parameters.set(YW,encodeURIComponent(n))}addCorrelationId(i){this.parameters.set(rq,encodeURIComponent(i))}addLibraryInfo(i){this.parameters.set(oq,i.sku),this.parameters.set(sq,i.version),i.os&&this.parameters.set(aq,i.os),i.cpu&&this.parameters.set(lq,i.cpu)}addApplicationTelemetry(i){i?.appName&&this.parameters.set(hq,i.appName),i?.appVersion&&this.parameters.set(pq,i.appVersion)}addPrompt(i){p_.validatePrompt(i),this.parameters.set(`${JW}`,encodeURIComponent(i))}addState(i){i&&this.parameters.set(QW,encodeURIComponent(i))}addNonce(i){this.parameters.set(XW,encodeURIComponent(i))}addCodeChallengeParams(i,e){if(p_.validateCodeChallengeParams(i,e),i&&e)this.parameters.set(tq,encodeURIComponent(i)),this.parameters.set(iq,encodeURIComponent(e));else throw $o(tv)}addAuthorizationCode(i){this.parameters.set(eq,encodeURIComponent(i))}addDeviceCode(i){this.parameters.set(gq,encodeURIComponent(i))}addRefreshToken(i){this.parameters.set(ZW,encodeURIComponent(i))}addCodeVerifier(i){this.parameters.set(nq,encodeURIComponent(i))}addClientSecret(i){this.parameters.set(_q,encodeURIComponent(i))}addClientAssertion(i){i&&this.parameters.set(yq,encodeURIComponent(i))}addClientAssertionType(i){i&&this.parameters.set(vq,encodeURIComponent(i))}addOboAssertion(i){this.parameters.set(bq,encodeURIComponent(i))}addRequestTokenUse(i){this.parameters.set(wq,encodeURIComponent(i))}addGrantType(i){this.parameters.set(qW,encodeURIComponent(i))}addClientInfo(){this.parameters.set(Xpe,"1")}addExtraQueryParameters(i){Object.entries(i).forEach(([e,n])=>{!this.parameters.has(e)&&n&&this.parameters.set(e,n)})}addClientCapabilitiesToClaims(i,e){let n;if(!i)n={};else try{n=JSON.parse(i)}catch{throw $o(ev)}return e&&e.length>0&&(n.hasOwnProperty(wA.ACCESS_TOKEN)||(n[wA.ACCESS_TOKEN]={}),n[wA.ACCESS_TOKEN][wA.XMS_CC]={values:e}),JSON.stringify(n)}addUsername(i){this.parameters.set(x4.username,encodeURIComponent(i))}addPassword(i){this.parameters.set(x4.password,encodeURIComponent(i))}addPopToken(i){i&&(this.parameters.set(N4,Po.POP),this.parameters.set(B4,encodeURIComponent(i)))}addSshJwk(i){i&&(this.parameters.set(N4,Po.SSH),this.parameters.set(B4,encodeURIComponent(i)))}addServerTelemetry(i){this.parameters.set(cq,i.generateCurrentRequestHeaderValue()),this.parameters.set(dq,i.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(uq,Ky.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(i){this.parameters.set(xq,encodeURIComponent(i))}addBrokerParameters(i){let e={};e[V4]=i.brokerClientId,e[Aq]=i.brokerRedirectUri,this.addExtraQueryParameters(e)}createQueryString(){let i=new Array;return this.parameters.forEach((e,n)=>{i.push(`${n}=${e}`)}),X6e(this.parameters,this.correlationId,this.performanceClient),i.join("&")}};var U4={};am(U4,{createDiscoveredInstance:()=>Dq});function cme(r){return r.hasOwnProperty("authorization_endpoint")&&r.hasOwnProperty("token_endpoint")&&r.hasOwnProperty("issuer")&&r.hasOwnProperty("jwks_uri")}function dme(r){return r.hasOwnProperty("tenant_discovery_endpoint")&&r.hasOwnProperty("metadata")}function ume(r){return r.hasOwnProperty("error")&&r.hasOwnProperty("error_description")}var Je={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},WRt=new Map([[Je.AcquireTokenByCode,"ATByCode"],[Je.AcquireTokenByRefreshToken,"ATByRT"],[Je.AcquireTokenSilent,"ATS"],[Je.AcquireTokenSilentAsync,"ATSAsync"],[Je.AcquireTokenPopup,"ATPopup"],[Je.AcquireTokenRedirect,"ATRedirect"],[Je.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[Je.CryptoOptsSignJwt,"CryptoSignJwt"],[Je.SilentCacheClientAcquireToken,"SltCacheClientAT"],[Je.SilentIframeClientAcquireToken,"SltIframeClientAT"],[Je.SilentRefreshClientAcquireToken,"SltRClientAT"],[Je.SsoSilent,"SsoSlt"],[Je.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[Je.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[Je.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[Je.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[Je.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[Je.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[Je.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[Je.BrokerHandhshake,"BrokerHandshake"],[Je.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[Je.AcquireTokenByBroker,"ATByBroker"],[Je.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[Je.RefreshTokenClientAcquireToken,"RTClientAT"],[Je.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[Je.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[Je.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[Je.AcquireTokenFromCache,"ATFromCache"],[Je.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[Je.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[Je.AcquireTokenBySilentIframe,"ATBySltIframe"],[Je.InitializeBaseRequest,"InitBaseReq"],[Je.InitializeSilentRequest,"InitSltReq"],[Je.InitializeClientApplication,"InitClientApplication"],[Je.SilentIframeClientTokenHelper,"SIClientTHelper"],[Je.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[Je.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[Je.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[Je.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[Je.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[Je.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[Je.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[Je.StandardInteractionClientInitializeAuthorizationCodeRequest,"StdIntClientInitAuthCodeReq"],[Je.GetAuthCodeUrl,"GetAuthCodeUrl"],[Je.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[Je.HandleCodeResponse,"HandleCodeResp"],[Je.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[Je.AuthClientAcquireToken,"AuthClientAT"],[Je.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[Je.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[Je.AuthClientCreateQueryString,"AuthClientCreateQueryStr"],[Je.PopTokenGenerateCnf,"PopTGenCnf"],[Je.PopTokenGenerateKid,"PopTGenKid"],[Je.HandleServerTokenResponse,"HandleServerTRes"],[Je.DeserializeResponse,"DeserializeRes"],[Je.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[Je.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[Je.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[Je.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[Je.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[Je.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[Je.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[Je.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[Je.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[Je.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[Je.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[Je.AcquireTokenByCodeAsync,"ATByCodeAsync"],[Je.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[Je.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[Je.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[Je.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[Je.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[Je.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[Je.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[Je.NativeGenerateAuthResult,"NtvGenAuthRes"],[Je.RemoveHiddenIframe,"RemoveHiddenIframe"],[Je.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[Je.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[Je.GeneratePkceCodes,"GenPkceCodes"],[Je.GenerateCodeVerifier,"GenCodeVerifier"],[Je.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[Je.Sha256Digest,"Sha256Digest"],[Je.GetRandomValues,"GetRandomValues"]]),Eq={NotStarted:0,InProgress:1,Completed:2};var bm=(r,i,e,n,o)=>(...s)=>{e.trace(`Executing function ${i}`);let l=n?.startMeasurement(i,o);if(o){let h=i+"CallCount";n?.incrementFields({[h]:1},o)}try{let h=r(...s);return l?.end({success:!0}),e.trace(`Returning result from ${i}`),h}catch(h){e.trace(`Error occurred in ${i}`);try{e.trace(JSON.stringify(h))}catch{e.trace("Unable to print error message.")}throw l?.end({success:!1},h),h}},xi=(r,i,e,n,o)=>(...s)=>{e.trace(`Executing function ${i}`);let l=n?.startMeasurement(i,o);if(o){let h=i+"CallCount";n?.incrementFields({[h]:1},o)}return n?.setPreQueueTime(i,o),r(...s).then(h=>(e.trace(`Returning result from ${i}`),l?.end({success:!0}),h)).catch(h=>{e.trace(`Error occurred in ${i}`);try{e.trace(JSON.stringify(h))}catch{e.trace("Unable to print error message.")}throw l?.end({success:!1},h),h})};var hme=(()=>{class r{constructor(e,n,o,s){this.networkInterface=e,this.logger=n,this.performanceClient=o,this.correlationId=s}detectRegion(e,n){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.RegionDiscoveryDetectRegion,this.correlationId);let o=e;if(o)n.region_source=Ax.ENVIRONMENT_VARIABLE;else{let s=r.IMDS_OPTIONS;try{let l=yield xi(this.getRegionFromIMDS.bind(this),Je.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(qt.IMDS_VERSION,s);if(l.status===cO.httpSuccess&&(o=l.body,n.region_source=Ax.IMDS),l.status===cO.httpBadRequest){let h=yield xi(this.getCurrentVersion.bind(this),Je.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(s);if(!h)return n.region_source=Ax.FAILED_AUTO_DETECTION,null;let p=yield xi(this.getRegionFromIMDS.bind(this),Je.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(h,s);p.status===cO.httpSuccess&&(o=p.body,n.region_source=Ax.IMDS)}}catch{return n.region_source=Ax.FAILED_AUTO_DETECTION,null}}return o||(n.region_source=Ax.FAILED_AUTO_DETECTION),o||null})}getRegionFromIMDS(e,n){return st(this,null,function*(){return this.performanceClient?.addQueueMeasurement(Je.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${qt.IMDS_ENDPOINT}?api-version=${e}&format=text`,n,qt.IMDS_TIMEOUT)})}getCurrentVersion(e){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let n=yield this.networkInterface.sendGetRequestAsync(`${qt.IMDS_ENDPOINT}?format=json`,e);return n.status===cO.httpBadRequest&&n.body&&n.body["newest-versions"]&&n.body["newest-versions"].length>0?n.body["newest-versions"][0]:null}catch{return null}})}}return r.IMDS_OPTIONS={headers:{Metadata:"true"}},r})();var cf=class r{constructor(i,e,n,o,s,l,h,p){this.canonicalAuthority=i,this._canonicalAuthority.validateAsUri(),this.networkInterface=e,this.cacheManager=n,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=s,this.performanceClient=h,this.correlationId=l,this.managedIdentity=p||!1,this.regionDiscovery=new hme(e,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(i){if(i.HostNameAndPort.endsWith(qt.CIAM_AUTH_URL))return Kh.Ciam;let e=i.PathSegments;if(e.length)switch(e[0].toLowerCase()){case qt.ADFS:return Kh.Adfs;case qt.DSTS:return Kh.Dsts}return Kh.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(i){this._canonicalAuthority=new to(i),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw di(Yh)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw di(Yh)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw di(Yh)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw di(Gx);return this.replacePath(this.metadata.end_session_endpoint)}else throw di(Yh)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw di(Yh)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw di(Yh)}canReplaceTenant(i){return i.PathSegments.length===1&&!r.reservedTenantDomains.has(i.PathSegments[0])&&this.getAuthorityType(i)===Kh.Default&&this.protocolMode===mu.AAD}replaceTenant(i){return i.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(i){let e=i,o=new to(this.metadata.canonical_authority).getUrlComponents(),s=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((h,p)=>{let m=s[p];if(p===0&&this.canReplaceTenant(o)){let f=new to(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];m!==f&&(this.logger.verbose(`Replacing tenant domain name ${m} with id ${f}`),m=f)}h!==m&&(e=e.replace(`/${m}/`,`/${h}/`))}),this.replaceTenant(e)}get defaultOpenIdConfigurationEndpoint(){let i=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Kh.Adfs||this.protocolMode!==mu.AAD&&!this.isAliasOfKnownMicrosoftAuthority(i)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.AuthorityResolveEndpointsAsync,this.correlationId);let i=this.getCurrentMetadataEntity(),e=yield xi(this.updateCloudDiscoveryMetadata.bind(this),Je.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(i);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,i.preferred_network);let n=yield xi(this.updateEndpointMetadata.bind(this),Je.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(i);this.updateCachedMetadata(i,e,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:e,authorityEndpointSource:n},this.correlationId)})}getCurrentMetadataEntity(){let i=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return i||(i={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:M4(),jwks_uri:""}),i}updateCachedMetadata(i,e,n){e!==qh.CACHE&&n?.source!==qh.CACHE&&(i.expiresAt=M4(),i.canonical_authority=this.canonicalAuthority);let o=this.cacheManager.generateAuthorityMetadataCacheKey(i.preferred_cache);this.cacheManager.setAuthorityMetadata(o,i),this.metadata=i}updateEndpointMetadata(i){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.AuthorityUpdateEndpointMetadata,this.correlationId);let e=this.updateEndpointMetadataFromLocalSources(i);if(e){if(e.source===qh.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&e.metadata){let o=yield xi(this.updateMetadataWithRegionalInformation.bind(this),Je.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(e.metadata);TA(i,o,!1),i.canonical_authority=this.canonicalAuthority}return e.source}let n=yield xi(this.getEndpointMetadataFromNetwork.bind(this),Je.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=yield xi(this.updateMetadataWithRegionalInformation.bind(this),Je.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),TA(i,n,!0),qh.NETWORK;throw di(Ox,this.defaultOpenIdConfigurationEndpoint)})}updateEndpointMetadataFromLocalSources(i){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let e=this.getEndpointMetadataFromConfig();if(e)return this.logger.verbose("Found endpoint metadata in authority configuration"),TA(i,e,!1),{source:qh.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let o=this.getEndpointMetadataFromHardcodedValues();if(o)return TA(i,o,!1),{source:qh.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let n=D4(i);return this.isAuthoritySameType(i)&&i.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:qh.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(i){return new to(i.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw $o(tS)}return null}getEndpointMetadataFromNetwork(){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let i={},e=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${e}`);try{let n=yield this.networkInterface.sendGetRequestAsync(e,i);return cme(n.body)?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}})}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in UW?UW[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(i){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let e=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(e){if(e!==qt.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=S4.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=e,r.replaceWithRegionalInformation(i,e);let n=yield xi(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),Je.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=S4.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=n,r.replaceWithRegionalInformation(i,n);this.regionDiscoveryMetadata.region_outcome=S4.AUTO_DETECTION_REQUESTED_FAILED}return i})}updateCloudDiscoveryMetadata(i){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let e=this.updateCloudDiscoveryMetadataFromLocalSources(i);if(e)return e;let n=yield xi(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Je.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return kO(i,n,!0),qh.NETWORK;throw $o(iS)})}updateCloudDiscoveryMetadataFromLocalSources(i){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||qt.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||qt.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${i.canonical_authority||qt.NOT_APPLICABLE}`);let e=this.getCloudDiscoveryMetadataFromConfig();if(e)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),kO(i,e,!1),qh.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let o=ame(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),kO(i,o,!1),qh.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=D4(i);return this.isAuthoritySameType(i)&&i.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),qh.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Kh.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),r.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let i=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),e=VO(i.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),$o(Vw)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),r.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let i=`${qt.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,e={},n=null;try{let o=yield this.networkInterface.sendGetRequestAsync(i,e),s,l;if(dme(o.body))s=o.body,l=s.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else if(ume(o.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${o.status}`),s=o.body,s.error===qt.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),l=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=VO(l,this.hostnameAndPort)}catch(o){if(o instanceof eo)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${o.errorCode}
Error Description: ${o.errorMessage}`);else{let s=o;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${s.name}
Error Description: ${s.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=r.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n})}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(e=>e&&to.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(i,e){let n;if(e&&e.azureCloudInstance!==Bw.None){let o=e.tenant?e.tenant:qt.DEFAULT_COMMON_TENANT;n=`${e.azureCloudInstance}/${o}/`}return n||i}static createCloudDiscoveryMetadataFromHost(i){return{preferred_network:i,preferred_cache:i,aliases:[i]}}getPreferredCache(){if(this.managedIdentity)return qt.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw di(Yh)}isAlias(i){return this.metadata.aliases.indexOf(i)>-1}isAliasOfKnownMicrosoftAuthority(i){return GW.has(i)}static isPublicCloudAuthority(i){return qt.KNOWN_PUBLIC_CLOUDS.indexOf(i)>=0}static buildRegionalAuthorityString(i,e,n){let o=new to(i);o.validateAsUri();let s=o.getUrlComponents(),l=`${e}.${s.HostNameAndPort}`;this.isPublicCloudAuthority(s.HostNameAndPort)&&(l=`${e}.${qt.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let h=to.constructAuthorityUriFromObject(li(Xe({},o.getUrlComponents()),{HostNameAndPort:l})).urlString;return n?`${h}?${n}`:h}static replaceWithRegionalInformation(i,e){let n=Xe({},i);return n.authorization_endpoint=r.buildRegionalAuthorityString(n.authorization_endpoint,e),n.token_endpoint=r.buildRegionalAuthorityString(n.token_endpoint,e),n.end_session_endpoint&&(n.end_session_endpoint=r.buildRegionalAuthorityString(n.end_session_endpoint,e)),n}static transformCIAMAuthority(i){let e=i,o=new to(i).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(qt.CIAM_AUTH_URL)){let s=o.HostNameAndPort.split(".")[0];e=`${e}${s}${qt.AAD_TENANT_DOMAIN_SUFFIX}`}return e}};cf.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Dg.COMMON,Dg.CONSUMERS,Dg.ORGANIZATIONS]);function pme(r){let n=new to(r).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case Dg.COMMON:case Dg.ORGANIZATIONS:case Dg.CONSUMERS:return;default:return n}}function $4(r){return r.endsWith(qt.FORWARD_SLASH)?r:`${r}${qt.FORWARD_SLASH}`}function Mq(r){let i=r.cloudDiscoveryMetadata,e;if(i)try{e=JSON.parse(i)}catch{throw $o(Vw)}return{canonicalAuthority:r.authority?$4(r.authority):void 0,knownAuthorities:r.knownAuthorities,cloudDiscoveryMetadata:e}}function Dq(r,i,e,n,o,s,l){return st(this,null,function*(){l?.addQueueMeasurement(Je.AuthorityFactoryCreateDiscoveredInstance,s);let h=cf.transformCIAMAuthority($4(r)),p=new cf(h,i,e,n,o,s,l);try{return yield xi(p.resolveEndpointsAsync.bind(p),Je.AuthorityResolveEndpointsAsync,o,l,s)(),p}catch{throw di(Yh)}})}var Zh=class r extends eo{constructor(i,e,n,o,s){super(i,e,n),this.name="ServerError",this.errorNo=o,this.status=s,Object.setPrototypeOf(this,r.prototype)}};var f_=class r{static generateThrottlingStorageKey(i){return`${Ky.THROTTLING_PREFIX}.${JSON.stringify(i)}`}static preProcess(i,e,n){let o=r.generateThrottlingStorageKey(e),s=i.getThrottlingCache(o);if(s){if(s.throttleTime<Date.now()){i.removeItem(o,n);return}throw new Zh(s.errorCodes?.join(" ")||qt.EMPTY_STRING,s.errorMessage,s.subError)}}static postProcess(i,e,n,o){if(r.checkResponseStatus(n)||r.checkResponseForRetryAfter(n)){let s={throttleTime:r.calculateThrottleTime(parseInt(n.headers[Mc.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};i.setThrottlingCache(r.generateThrottlingStorageKey(e),s,o)}}static checkResponseStatus(i){return i.status===429||i.status>=500&&i.status<600}static checkResponseForRetryAfter(i){return i.headers?i.headers.hasOwnProperty(Mc.RETRY_AFTER)&&(i.status<200||i.status>=300):!1}static calculateThrottleTime(i){let e=i<=0?0:i,n=Date.now()/1e3;return Math.floor(Math.min(n+(e||Ky.DEFAULT_THROTTLE_TIME_SECONDS),n+Ky.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(i,e,n,o){let s={clientId:e,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:o,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid},l=this.generateThrottlingStorageKey(s);i.removeItem(l,n.correlationId)}};var DA=class r extends eo{constructor(i,e,n){super(i.errorCode,i.errorMessage,i.subError),Object.setPrototypeOf(this,r.prototype),this.name="NetworkError",this.error=i,this.httpStatus=e,this.responseHeaders=n}};function z4(r,i,e){return new DA(r,i,e)}var zw=class{constructor(i,e){this.config=lme(i),this.logger=new xp(this.config.loggerOptions,A4,SA),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=e}createTokenRequestHeaders(i){let e={};if(e[Mc.CONTENT_TYPE]=qt.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&i)switch(i.type){case vd.HOME_ACCOUNT_ID:try{let n=nv(i.credential);e[Mc.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case vd.UPN:e[Mc.CCS_HEADER]=`UPN: ${i.credential}`;break}return e}executePostToTokenEndpoint(i,e,n,o,s,l){return st(this,null,function*(){l&&this.performanceClient?.addQueueMeasurement(l,s);let h=yield this.sendPostRequest(o,i,{body:e,headers:n},s);return this.config.serverTelemetryManager&&h.status<500&&h.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),h})}sendPostRequest(i,e,n,o){return st(this,null,function*(){f_.preProcess(this.cacheManager,i,o);let s;try{s=yield xi(this.networkClient.sendPostRequestAsync.bind(this.networkClient),Je.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,o)(e,n);let l=s.headers||{};this.performanceClient?.addFields({refreshTokenSize:s.body.refresh_token?.length||0,httpVerToken:l[Mc.X_MS_HTTP_VERSION]||"",requestId:l[Mc.X_MS_REQUEST_ID]||""},o)}catch(l){if(l instanceof DA){let h=l.responseHeaders;throw h&&this.performanceClient?.addFields({httpVerToken:h[Mc.X_MS_HTTP_VERSION]||"",requestId:h[Mc.X_MS_REQUEST_ID]||"",contentTypeHeader:h[Mc.CONTENT_TYPE]||void 0,contentLengthHeader:h[Mc.CONTENT_LENGTH]||void 0,httpStatus:l.httpStatus},o),l.error}throw l instanceof eo?l:di(kx)}return f_.postProcess(this.cacheManager,i,s,o),s})}updateAuthority(i,e){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.UpdateTokenEndpointAuthority,e);let n=`https://${i}/${this.authority.tenant}/`,o=yield Dq(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,e,this.performanceClient);this.authority=o})}createTokenQueryParameters(i){let e=new m_(i.correlationId,this.performanceClient);return i.embeddedClientId&&e.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),i.tokenQueryParameters&&e.addExtraQueryParameters(i.tokenQueryParameters),e.addCorrelationId(i.correlationId),e.createQueryString()}};var av={};am(av,{badToken:()=>Hw,consentRequired:()=>Oq,interactionRequired:()=>kq,loginRequired:()=>Pq,nativeAccountUnavailable:()=>HO,noTokensFound:()=>Gw,refreshTokenExpired:()=>WO});var Gw="no_tokens_found",HO="native_account_unavailable",WO="refresh_token_expired",kq="interaction_required",Oq="consent_required",Pq="login_required",Hw="bad_token";var mme=[kq,Oq,Pq,Hw],J6e=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],G4={[Gw]:"No refresh token found in the cache. Please sign-in.",[HO]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[WO]:"Refresh token has expired.",[Hw]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."},fme={noTokensFoundError:{code:Gw,desc:G4[Gw]},native_account_unavailable:{code:HO,desc:G4[HO]},bad_token:{code:Hw,desc:G4[Hw]}},Wc=class r extends eo{constructor(i,e,n,o,s,l,h,p){super(i,e,n),Object.setPrototypeOf(this,r.prototype),this.timestamp=o||qt.EMPTY_STRING,this.traceId=s||qt.EMPTY_STRING,this.correlationId=l||qt.EMPTY_STRING,this.claims=h||qt.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=p}};function Rq(r,i,e){let n=!!r&&mme.indexOf(r)>-1,o=!!e&&J6e.indexOf(e)>-1,s=!!i&&mme.some(l=>i.indexOf(l)>-1);return n||s||o}function kA(r){return new Wc(r,G4[r])}var bd=class r{static setRequestState(i,e,n){let o=r.generateLibraryState(i,n);return e?`${o}${qt.RESOURCE_DELIM}${e}`:o}static generateLibraryState(i,e){if(!i)throw di(Lw);let n={id:i.createNewGuid()};e&&(n.meta=e);let o=JSON.stringify(n);return i.base64Encode(o)}static parseRequestState(i,e){if(!i)throw di(Lw);if(!e)throw di(Pg);try{let n=e.split(qt.RESOURCE_DELIM),o=n[0],s=n.length>1?n.slice(1).join(qt.RESOURCE_DELIM):qt.EMPTY_STRING,l=i.base64Decode(o),h=JSON.parse(l);return{userRequestState:s||qt.EMPTY_STRING,libraryState:h}}catch{throw di(Pg)}}};var eVe={SW:"sw",UHW:"uhw"},wm=class{constructor(i,e){this.cryptoUtils=i,this.performanceClient=e}generateCnf(i,e){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.PopTokenGenerateCnf,i.correlationId);let n=yield xi(this.generateKid.bind(this),Je.PopTokenGenerateCnf,e,this.performanceClient,i.correlationId)(i),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:o}})}generateKid(i){return st(this,null,function*(){return this.performanceClient?.addQueueMeasurement(Je.PopTokenGenerateKid,i.correlationId),{kid:yield this.cryptoUtils.getPublicKeyThumbprint(i),xms_ksl:eVe.SW}})}signPopToken(i,e,n){return st(this,null,function*(){return this.signPayload(i,e,n)})}signPayload(i,e,n,o){return st(this,null,function*(){let{resourceRequestMethod:s,resourceRequestUri:l,shrClaims:h,shrNonce:p,shrOptions:m}=n,g=(l?new to(l):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt(Xe({at:i,ts:vm(),m:s?.toUpperCase(),u:g?.HostNameAndPort,nonce:p||this.cryptoUtils.createNewGuid(),p:g?.AbsolutePath,q:g?.QueryString?[[],g.QueryString]:void 0,client_claims:h||void 0},o),e,m,n.correlationId)})}};var H4=class{constructor(i,e){this.cache=i,this.hasChanged=e}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};function tVe(r){let i="code=",e=r.error_uri?.lastIndexOf(i);return e&&e>=0?r.error_uri?.substring(e+i.length):void 0}var g_=class r{constructor(i,e,n,o,s,l,h){this.clientId=i,this.cacheStorage=e,this.cryptoObj=n,this.logger=o,this.serializableCache=s,this.persistencePlugin=l,this.performanceClient=h}validateServerAuthorizationCodeResponse(i,e){if(!i.state||!e)throw i.state?di(Rw,"Cached State"):di(Rw,"Server State");let n,o;try{n=decodeURIComponent(i.state)}catch{throw di(Pg,i.state)}try{o=decodeURIComponent(e)}catch{throw di(Pg,i.state)}if(n!==o)throw di(Rx);if(i.error||i.error_description||i.suberror){let s=tVe(i);throw Rq(i.error,i.error_description,i.suberror)?new Wc(i.error||"",i.error_description,i.suberror,i.timestamp||"",i.trace_id||"",i.correlation_id||"",i.claims||"",s):new Zh(i.error||"",i.error_description,i.suberror,s)}}validateTokenResponse(i,e){if(i.error||i.error_description||i.suberror){let n=`Error(s): ${i.error_codes||qt.NOT_AVAILABLE} - Timestamp: ${i.timestamp||qt.NOT_AVAILABLE} - Description: ${i.error_description||qt.NOT_AVAILABLE} - Correlation ID: ${i.correlation_id||qt.NOT_AVAILABLE} - Trace ID: ${i.trace_id||qt.NOT_AVAILABLE}`,o=i.error_codes?.length?i.error_codes[0]:void 0,s=new Zh(i.error,n,i.suberror,o,i.status);if(e&&i.status&&i.status>=bA.SERVER_ERROR_RANGE_START&&i.status<=bA.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${s}`);return}else if(e&&i.status&&i.status>=bA.CLIENT_ERROR_RANGE_START&&i.status<=bA.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${s}`);return}throw Rq(i.error,i.error_description,i.suberror)?new Wc(i.error,i.error_description,i.suberror,i.timestamp||qt.EMPTY_STRING,i.trace_id||qt.EMPTY_STRING,i.correlation_id||qt.EMPTY_STRING,i.claims||qt.EMPTY_STRING,o):s}}handleServerTokenResponse(i,e,n,o,s,l,h,p,m){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.HandleServerTokenResponse,i.correlation_id);let f;if(i.id_token){if(f=Jy(i.id_token||qt.EMPTY_STRING,this.cryptoObj.base64Decode),s&&s.nonce&&f.nonce!==s.nonce)throw di(Fx);if(o.maxAge||o.maxAge===0){let w=f.auth_time;if(!w)throw di(Zy);EO(w,o.maxAge)}}this.homeAccountIdentifier=rl.generateHomeAccountId(i.client_info||qt.EMPTY_STRING,e.authorityType,this.logger,this.cryptoObj,f);let g;s&&s.state&&(g=bd.parseRequestState(this.cryptoObj,s.state)),i.key_id=i.key_id||o.sshKid||void 0;let y=this.generateCacheRecord(i,e,n,o,f,l,s),_;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),_=new H4(this.serializableCache,!0),yield this.persistencePlugin.beforeCacheAccess(_)),h&&!p&&y.account){let w=y.account.generateAccountKey();if(!this.cacheStorage.getAccount(w,o.correlationId,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield r.generateAuthenticationResult(this.cryptoObj,e,y,!1,o,f,g,void 0,m)}yield this.cacheStorage.saveCacheRecord(y,o.correlationId,o.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&_&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield this.persistencePlugin.afterCacheAccess(_))}return r.generateAuthenticationResult(this.cryptoObj,e,y,!1,o,f,g,i,m)})}generateCacheRecord(i,e,n,o,s,l,h){let p=e.getPreferredCache();if(!p)throw di(Xy);let m=k4(s),f,g;i.id_token&&s&&(f=BW(this.homeAccountIdentifier,p,i.id_token,this.clientId,m||""),g=OA(this.cacheStorage,e,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o.correlationId,s,i.client_info,p,m,h,void 0,this.logger));let y=null;if(i.access_token){let A=i.scope?gl.fromString(i.scope):new gl(o.scopes||[]),k=(typeof i.expires_in=="string"?parseInt(i.expires_in,10):i.expires_in)||0,R=(typeof i.ext_expires_in=="string"?parseInt(i.ext_expires_in,10):i.ext_expires_in)||0,$=(typeof i.refresh_in=="string"?parseInt(i.refresh_in,10):i.refresh_in)||void 0,H=n+k,oe=H+R,se=$&&$>0?n+$:void 0;y=jW(this.homeAccountIdentifier,p,i.access_token,this.clientId,m||e.tenant||"",A.printScopes(),H,oe,this.cryptoObj.base64Decode,se,i.token_type,l,i.key_id,o.claims,o.requestedClaimsHash)}let _=null;if(i.refresh_token){let A;if(i.refresh_token_expires_in){let k=typeof i.refresh_token_expires_in=="string"?parseInt(i.refresh_token_expires_in,10):i.refresh_token_expires_in;A=n+k}_=VW(this.homeAccountIdentifier,p,i.refresh_token,this.clientId,i.foci,l,A)}let w=null;return i.foci&&(w={clientId:this.clientId,environment:p,familyId:i.foci}),{account:g,idToken:f,accessToken:y,refreshToken:_,appMetadata:w}}static generateAuthenticationResult(i,e,n,o,s,l,h,p,m){return st(this,null,function*(){let f=qt.EMPTY_STRING,g=[],y=null,_,w,A=qt.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===Po.POP&&!s.popKid){let H=new wm(i),{secret:oe,keyId:se}=n.accessToken;if(!se)throw di(Hx);f=yield H.signPopToken(oe,se,s)}else f=n.accessToken.secret;g=gl.fromString(n.accessToken.target).asArray(),y=new Date(Number(n.accessToken.expiresOn)*1e3),_=new Date(Number(n.accessToken.extendedExpiresOn)*1e3),n.accessToken.refreshOn&&(w=new Date(Number(n.accessToken.refreshOn)*1e3))}n.appMetadata&&(A=n.appMetadata.familyId===kw?kw:"");let k=l?.oid||l?.sub||"",R=l?.tid||"";p?.spa_accountid&&n.account&&(n.account.nativeAccountId=p?.spa_accountid);let $=n.account?nS(n.account.getAccountInfo(),void 0,l,n.idToken?.secret):null;return{authority:e.canonicalAuthority,uniqueId:k,tenantId:R,scopes:g,account:$,idToken:n?.idToken?.secret||"",idTokenClaims:l||{},accessToken:f,fromCache:o,expiresOn:y,extExpiresOn:_,refreshOn:w,correlationId:s.correlationId,requestId:m||qt.EMPTY_STRING,familyId:A,tokenType:n.accessToken?.tokenType||qt.EMPTY_STRING,state:h?h.userRequestState:qt.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||qt.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||qt.EMPTY_STRING,code:p?.spa_code,fromNativeBroker:!1}})}};function OA(r,i,e,n,o,s,l,h,p,m,f,g){g?.verbose("setCachedAccount called");let _=r.getAccountKeys().find($=>$.startsWith(e)),w=null;_&&(w=r.getAccount(_,o,g));let A=w||rl.createAccount({homeAccountId:e,idTokenClaims:s,clientInfo:l,environment:h,cloudGraphHostName:m?.cloud_graph_host_name,msGraphHost:m?.msgraph_host,nativeAccountId:f},i,n),k=A.tenantProfiles||[],R=p||A.realm;if(R&&!k.find($=>$.tenantId===R)){let $=MA(e,A.localAccountId,R,s);k.push($)}return A.tenantProfiles=k,A}function W4(r,i,e){return st(this,null,function*(){return typeof r=="string"?r:r({clientId:i,tokenEndpoint:e})})}var rS=class extends zw{constructor(i,e){super(i,e),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}getAuthCodeUrl(i){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.GetAuthCodeUrl,i.correlationId);let e=yield xi(this.createAuthCodeUrlQueryString.bind(this),Je.AuthClientCreateQueryString,this.logger,this.performanceClient,i.correlationId)(i);return to.appendQueryString(this.authority.authorizationEndpoint,e)})}acquireToken(i,e){return st(this,null,function*(){if(this.performanceClient?.addQueueMeasurement(Je.AuthClientAcquireToken,i.correlationId),!i.code)throw di(Bx);let n=vm(),o=yield xi(this.executeTokenRequest.bind(this),Je.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,i.correlationId)(this.authority,i),s=o.headers?.[Mc.X_MS_REQUEST_ID],l=new g_(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return l.validateTokenResponse(o.body),xi(l.handleServerTokenResponse.bind(l),Je.HandleServerTokenResponse,this.logger,this.performanceClient,i.correlationId)(o.body,this.authority,n,i,e,void 0,void 0,void 0,s)})}handleFragmentResponse(i,e){if(new g_(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(i,e),!i.code)throw di(zx);return i}getLogoutUri(i){if(!i)throw $o(Jx);let e=this.createLogoutUrlQueryString(i);return to.appendQueryString(this.authority.endSessionEndpoint,e)}executeTokenRequest(i,e){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.AuthClientExecuteTokenRequest,e.correlationId);let n=this.createTokenQueryParameters(e),o=to.appendQueryString(i.tokenEndpoint,n),s=yield xi(this.createTokenRequestBody.bind(this),Je.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),l;if(e.clientInfo)try{let m=AA(e.clientInfo,this.cryptoUtils.base64Decode);l={credential:`${m.uid}${hc.CLIENT_INFO_SEPARATOR}${m.utid}`,type:vd.HOME_ACCOUNT_ID}}catch(m){this.logger.verbose("Could not parse client info for CCS Header: "+m)}let h=this.createTokenRequestHeaders(l||e.ccsCredential),p={clientId:e.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:i.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return xi(this.executePostToTokenEndpoint.bind(this),Je.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,s,h,p,e.correlationId,Je.AuthorizationCodeClientExecutePostToTokenEndpoint)})}createTokenRequestBody(i){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.AuthClientCreateTokenRequestBody,i.correlationId);let e=new m_(i.correlationId,this.performanceClient);if(e.addClientId(i.embeddedClientId||i.tokenBodyParameters?.[ov]||this.config.authOptions.clientId),this.includeRedirectUri?e.addRedirectUri(i.redirectUri):p_.validateRedirectUri(i.redirectUri),e.addScopes(i.scopes,!0,this.oidcDefaultScopes),e.addAuthorizationCode(i.code),e.addLibraryInfo(this.config.libraryInfo),e.addApplicationTelemetry(this.config.telemetry.application),e.addThrottling(),this.serverTelemetryManager&&!GO(this.config)&&e.addServerTelemetry(this.serverTelemetryManager),i.codeVerifier&&e.addCodeVerifier(i.codeVerifier),this.config.clientCredentials.clientSecret&&e.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let o=this.config.clientCredentials.clientAssertion;e.addClientAssertion(yield W4(o.assertion,this.config.authOptions.clientId,i.resourceRequestUri)),e.addClientAssertionType(o.assertionType)}if(e.addGrantType(aO.AUTHORIZATION_CODE_GRANT),e.addClientInfo(),i.authenticationScheme===Po.POP){let o=new wm(this.cryptoUtils,this.performanceClient),s;i.popKid?s=this.cryptoUtils.encodeKid(i.popKid):s=(yield xi(o.generateCnf.bind(o),Je.PopTokenGenerateCnf,this.logger,this.performanceClient,i.correlationId)(i,this.logger)).reqCnfString,e.addPopToken(s)}else if(i.authenticationScheme===Po.SSH)if(i.sshJwk)e.addSshJwk(i.sshJwk);else throw $o(iv);(!ql.isEmptyObj(i.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&e.addClaims(i.claims,this.config.authOptions.clientCapabilities);let n;if(i.clientInfo)try{let o=AA(i.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${o.uid}${hc.CLIENT_INFO_SEPARATOR}${o.utid}`,type:vd.HOME_ACCOUNT_ID}}catch(o){this.logger.verbose("Could not parse client info for CCS Header: "+o)}else n=i.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case vd.HOME_ACCOUNT_ID:try{let o=nv(n.credential);e.addCcsOid(o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case vd.UPN:e.addCcsUpn(n.credential);break}return i.embeddedClientId&&e.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),i.tokenBodyParameters&&e.addExtraQueryParameters(i.tokenBodyParameters),i.enableSpaAuthorizationCode&&(!i.tokenBodyParameters||!i.tokenBodyParameters[j4])&&e.addExtraQueryParameters({[j4]:"1"}),e.createQueryString()})}createAuthCodeUrlQueryString(i){return st(this,null,function*(){let e=i.correlationId||this.config.cryptoInterface.createNewGuid();this.performanceClient?.addQueueMeasurement(Je.AuthClientCreateQueryString,e);let n=new m_(e,this.performanceClient);n.addClientId(i.embeddedClientId||i.extraQueryParameters?.[ov]||this.config.authOptions.clientId);let o=[...i.scopes||[],...i.extraScopesToConsent||[]];if(n.addScopes(o,!0,this.oidcDefaultScopes),n.addRedirectUri(i.redirectUri),n.addCorrelationId(e),n.addResponseMode(i.responseMode),n.addResponseTypeCode(),n.addLibraryInfo(this.config.libraryInfo),GO(this.config)||n.addApplicationTelemetry(this.config.telemetry.application),n.addClientInfo(),i.codeChallenge&&i.codeChallengeMethod&&n.addCodeChallengeParams(i.codeChallenge,i.codeChallengeMethod),i.prompt&&n.addPrompt(i.prompt),i.domainHint&&n.addDomainHint(i.domainHint),i.prompt!==fl.SELECT_ACCOUNT)if(i.sid&&i.prompt===fl.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),n.addSid(i.sid);else if(i.account){let s=this.extractAccountSid(i.account),l=this.extractLoginHint(i.account);if(l&&i.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),l=null),l){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),n.addLoginHint(l);try{let h=nv(i.account.homeAccountId);n.addCcsOid(h)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(s&&i.prompt===fl.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),n.addSid(s);try{let h=nv(i.account.homeAccountId);n.addCcsOid(h)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(i.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),n.addLoginHint(i.loginHint),n.addCcsUpn(i.loginHint);else if(i.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),n.addLoginHint(i.account.username);try{let h=nv(i.account.homeAccountId);n.addCcsOid(h)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else i.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),n.addLoginHint(i.loginHint),n.addCcsUpn(i.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(i.nonce&&n.addNonce(i.nonce),i.state&&n.addState(i.state),(i.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(i.claims,this.config.authOptions.clientCapabilities),i.embeddedClientId&&n.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),this.addExtraQueryParams(i,n),i.nativeBroker&&(n.addNativeBroker(),i.authenticationScheme===Po.POP)){let s=new wm(this.cryptoUtils),l;i.popKid?l=this.cryptoUtils.encodeKid(i.popKid):l=(yield xi(s.generateCnf.bind(s),Je.PopTokenGenerateCnf,this.logger,this.performanceClient,i.correlationId)(i,this.logger)).reqCnfString,n.addPopToken(l)}return n.createQueryString()})}createLogoutUrlQueryString(i){let e=new m_(i.correlationId,this.performanceClient);return i.postLogoutRedirectUri&&e.addPostLogoutRedirectUri(i.postLogoutRedirectUri),i.correlationId&&e.addCorrelationId(i.correlationId),i.idTokenHint&&e.addIdTokenHint(i.idTokenHint),i.state&&e.addState(i.state),i.logoutHint&&e.addLogoutHint(i.logoutHint),this.addExtraQueryParams(i,e),e.createQueryString()}addExtraQueryParams(i,e){!(i.extraQueryParameters&&i.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(i.extraQueryParameters=i.extraQueryParameters||{},i.extraQueryParameters.instance_aware="true"),i.extraQueryParameters&&e.addExtraQueryParameters(i.extraQueryParameters)}extractAccountSid(i){return i.idTokenClaims?.sid||null}extractLoginHint(i){return i.idTokenClaims?.login_hint||null}};var iVe=300,Ww=class extends zw{constructor(i,e){super(i,e)}acquireToken(i){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.RefreshTokenClientAcquireToken,i.correlationId);let e=vm(),n=yield xi(this.executeTokenRequest.bind(this),Je.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,i.correlationId)(i,this.authority),o=n.headers?.[Mc.X_MS_REQUEST_ID],s=new g_(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return s.validateTokenResponse(n.body),xi(s.handleServerTokenResponse.bind(s),Je.HandleServerTokenResponse,this.logger,this.performanceClient,i.correlationId)(n.body,this.authority,e,i,void 0,void 0,!0,i.forceCache,o)})}acquireTokenByRefreshToken(i){return st(this,null,function*(){if(!i)throw $o(Xx);if(this.performanceClient?.addQueueMeasurement(Je.RefreshTokenClientAcquireTokenByRefreshToken,i.correlationId),!i.account)throw di(Qy);if(this.cacheManager.isAppMetadataFOCI(i.account.environment))try{return yield xi(this.acquireTokenWithCachedRefreshToken.bind(this),Je.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,i.correlationId)(i,!0)}catch(n){let o=n instanceof Wc&&n.errorCode===Gw,s=n instanceof Zh&&n.errorCode===C4.INVALID_GRANT_ERROR&&n.subError===C4.CLIENT_MISMATCH_ERROR;if(o||s)return xi(this.acquireTokenWithCachedRefreshToken.bind(this),Je.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,i.correlationId)(i,!1);throw n}return xi(this.acquireTokenWithCachedRefreshToken.bind(this),Je.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,i.correlationId)(i,!1)})}acquireTokenWithCachedRefreshToken(i,e){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.RefreshTokenClientAcquireTokenWithCachedRefreshToken,i.correlationId);let n=bm(this.cacheManager.getRefreshToken.bind(this.cacheManager),Je.CacheManagerGetRefreshToken,this.logger,this.performanceClient,i.correlationId)(i.account,e,i.correlationId,void 0,this.performanceClient);if(!n)throw kA(Gw);if(n.expiresOn&&IA(n.expiresOn,i.refreshTokenExpirationOffsetSeconds||iVe))throw kA(WO);let o=li(Xe({},i),{refreshToken:n.secret,authenticationScheme:i.authenticationScheme||Po.BEARER,ccsCredential:{credential:i.account.homeAccountId,type:vd.HOME_ACCOUNT_ID}});try{return yield xi(this.acquireToken.bind(this),Je.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,i.correlationId)(o)}catch(s){if(s instanceof Wc&&s.subError===Hw){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let l=DO(n);this.cacheManager.removeRefreshToken(l,i.correlationId)}throw s}})}executeTokenRequest(i,e){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.RefreshTokenClientExecuteTokenRequest,i.correlationId);let n=this.createTokenQueryParameters(i),o=to.appendQueryString(e.tokenEndpoint,n),s=yield xi(this.createTokenRequestBody.bind(this),Je.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,i.correlationId)(i),l=this.createTokenRequestHeaders(i.ccsCredential),h={clientId:i.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:i.scopes,claims:i.claims,authenticationScheme:i.authenticationScheme,resourceRequestMethod:i.resourceRequestMethod,resourceRequestUri:i.resourceRequestUri,shrClaims:i.shrClaims,sshKid:i.sshKid};return xi(this.executePostToTokenEndpoint.bind(this),Je.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,i.correlationId)(o,s,l,h,i.correlationId,Je.RefreshTokenClientExecutePostToTokenEndpoint)})}createTokenRequestBody(i){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.RefreshTokenClientCreateTokenRequestBody,i.correlationId);let e=i.correlationId,n=new m_(e,this.performanceClient);if(n.addClientId(i.embeddedClientId||i.tokenBodyParameters?.[ov]||this.config.authOptions.clientId),i.redirectUri&&n.addRedirectUri(i.redirectUri),n.addScopes(i.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),n.addGrantType(aO.REFRESH_TOKEN_GRANT),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&!GO(this.config)&&n.addServerTelemetry(this.serverTelemetryManager),n.addRefreshToken(i.refreshToken),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let o=this.config.clientCredentials.clientAssertion;n.addClientAssertion(yield W4(o.assertion,this.config.authOptions.clientId,i.resourceRequestUri)),n.addClientAssertionType(o.assertionType)}if(i.authenticationScheme===Po.POP){let o=new wm(this.cryptoUtils,this.performanceClient),s;i.popKid?s=this.cryptoUtils.encodeKid(i.popKid):s=(yield xi(o.generateCnf.bind(o),Je.PopTokenGenerateCnf,this.logger,this.performanceClient,i.correlationId)(i,this.logger)).reqCnfString,n.addPopToken(s)}else if(i.authenticationScheme===Po.SSH)if(i.sshJwk)n.addSshJwk(i.sshJwk);else throw $o(iv);if((!ql.isEmptyObj(i.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(i.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&i.ccsCredential)switch(i.ccsCredential.type){case vd.HOME_ACCOUNT_ID:try{let o=nv(i.ccsCredential.credential);n.addCcsOid(o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case vd.UPN:n.addCcsUpn(i.ccsCredential.credential);break}return i.embeddedClientId&&n.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),i.tokenBodyParameters&&n.addExtraQueryParameters(i.tokenBodyParameters),n.createQueryString()})}};var qO=class extends zw{constructor(i,e){super(i,e)}acquireToken(i){return st(this,null,function*(){try{let[e,n]=yield this.acquireCachedToken(li(Xe({},i),{scopes:i.scopes?.length?i.scopes:[...ym]}));return n===Og.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new Ww(this.config,this.performanceClient).acquireTokenByRefreshToken(i).catch(()=>{})),e}catch(e){if(e instanceof Wx&&e.errorCode===u_)return new Ww(this.config,this.performanceClient).acquireTokenByRefreshToken(i);throw e}})}acquireCachedToken(i){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.SilentFlowClientAcquireCachedToken,i.correlationId);let e=Og.NOT_APPLICABLE;if(i.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!ql.isEmptyObj(i.claims))throw this.setCacheOutcome(Og.FORCE_REFRESH_OR_CLAIMS,i.correlationId),di(u_);if(!i.account)throw di(Qy);let n=i.account.tenantId||pme(i.authority),o=this.cacheManager.getTokenKeys(),s=this.cacheManager.getAccessToken(i.account,i,o,n,this.performanceClient);if(s){if(NW(s.cachedAt)||IA(s.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Og.CACHED_ACCESS_TOKEN_EXPIRED,i.correlationId),di(u_);s.refreshOn&&IA(s.refreshOn,0)&&(e=Og.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Og.NO_CACHED_ACCESS_TOKEN,i.correlationId),di(u_);let l=i.authority||this.authority.getPreferredCache(),h={account:this.cacheManager.readAccountFromCache(i.account,i.correlationId),accessToken:s,idToken:this.cacheManager.getIdToken(i.account,i.correlationId,o,n,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(l)};return this.setCacheOutcome(e,i.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[yield xi(this.generateResultFromCacheRecord.bind(this),Je.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,i.correlationId)(h,i),e]})}setCacheOutcome(i,e){this.serverTelemetryManager?.setCacheOutcome(i),this.performanceClient?.addFields({cacheOutcome:i},e),i!==Og.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${i}`)}generateResultFromCacheRecord(i,e){return st(this,null,function*(){this.performanceClient?.addQueueMeasurement(Je.SilentFlowClientGenerateResultFromCacheRecord,e.correlationId);let n;if(i.idToken&&(n=Jy(i.idToken.secret,this.config.cryptoInterface.base64Decode)),e.maxAge||e.maxAge===0){let o=n?.auth_time;if(!o)throw di(Zy);EO(o,e.maxAge)}return g_.generateAuthenticationResult(this.cryptoUtils,this.authority,i,!0,e,n)})}};var Fq={sendGetRequestAsync:()=>Promise.reject(di(Yr)),sendPostRequestAsync:()=>Promise.reject(di(Yr))};var gme=",",_me="|";function nVe(r){let{skus:i,libraryName:e,libraryVersion:n,extensionName:o,extensionVersion:s}=r,l=new Map([[0,[e,n]],[2,[o,s]]]),h=[];if(i?.length){if(h=i.split(gme),h.length<4)return i}else h=Array.from({length:4},()=>_me);return l.forEach((p,m)=>{p.length===2&&p[0]?.length&&p[1]?.length&&rVe({skuArr:h,index:m,skuName:p[0],skuVersion:p[1]})}),h.join(gme)}function rVe(r){let{skuArr:i,index:e,skuName:n,skuVersion:o}=r;e>=i.length||(i[e]=[n,o].join(_me))}var oS=class r{constructor(i,e){this.cacheOutcome=Og.NOT_APPLICABLE,this.cacheManager=e,this.apiId=i.apiId,this.correlationId=i.correlationId,this.wrapperSKU=i.wrapperSKU||qt.EMPTY_STRING,this.wrapperVer=i.wrapperVer||qt.EMPTY_STRING,this.telemetryCacheKey=_d.CACHE_KEY+hc.CACHE_KEY_SEPARATOR+i.clientId}generateCurrentRequestHeaderValue(){let i=`${this.apiId}${_d.VALUE_SEPARATOR}${this.cacheOutcome}`,e=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&e.push(`broker_error=${n}`);let o=e.join(_d.VALUE_SEPARATOR),s=this.getRegionDiscoveryFields(),l=[i,s].join(_d.VALUE_SEPARATOR);return[_d.SCHEMA_VERSION,l,o].join(_d.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let i=this.getLastRequests(),e=r.maxErrorsToSend(i),n=i.failedRequests.slice(0,2*e).join(_d.VALUE_SEPARATOR),o=i.errors.slice(0,e).join(_d.VALUE_SEPARATOR),s=i.errors.length,l=e<s?_d.OVERFLOW_TRUE:_d.OVERFLOW_FALSE,h=[s,l].join(_d.VALUE_SEPARATOR);return[_d.SCHEMA_VERSION,i.cacheHits,n,o,h].join(_d.CATEGORY_SEPARATOR)}cacheFailedRequest(i){let e=this.getLastRequests();e.errors.length>=_d.MAX_CACHED_ERRORS&&(e.failedRequests.shift(),e.failedRequests.shift(),e.errors.shift()),e.failedRequests.push(this.apiId,this.correlationId),i instanceof Error&&i&&i.toString()?i instanceof eo?i.subError?e.errors.push(i.subError):i.errorCode?e.errors.push(i.errorCode):e.errors.push(i.toString()):e.errors.push(i.toString()):e.errors.push(_d.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}incrementCacheHits(){let i=this.getLastRequests();return i.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId),i.cacheHits}getLastRequests(){let i={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||i}clearTelemetryCache(){let i=this.getLastRequests(),e=r.maxErrorsToSend(i),n=i.errors.length;if(e===n)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let o={failedRequests:i.failedRequests.slice(e*2),errors:i.errors.slice(e),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o,this.correlationId)}}static maxErrorsToSend(i){let e,n=0,o=0,s=i.errors.length;for(e=0;e<s;e++){let l=i.failedRequests[2*e]||qt.EMPTY_STRING,h=i.failedRequests[2*e+1]||qt.EMPTY_STRING,p=i.errors[e]||qt.EMPTY_STRING;if(o+=l.toString().length+h.toString().length+p.length+3,o<_d.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){let i=[];return i.push(this.regionUsed||qt.EMPTY_STRING),i.push(this.regionSource||qt.EMPTY_STRING),i.push(this.regionOutcome||qt.EMPTY_STRING),i.join(",")}updateRegionDiscoveryMetadata(i){this.regionUsed=i.region_used,this.regionSource=i.region_source,this.regionOutcome=i.region_outcome}setCacheOutcome(i){this.cacheOutcome=i}setNativeBrokerErrorCode(i){let e=this.getLastRequests();e.nativeBrokerErrorCode=i,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let i=this.getLastRequests();delete i.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}static makeExtraSkuString(i){return nVe(i)}};var q4="missing_kid_error",Y4="missing_alg_error";var oVe={[q4]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Y4]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."},Lq=class r extends eo{constructor(i,e){super(i,e),this.name="JoseHeaderError",Object.setPrototypeOf(this,r.prototype)}};function Nq(r){return new Lq(r,oVe[r])}var YO=class r{constructor(i){this.typ=i.typ,this.alg=i.alg,this.kid=i.kid}static getShrHeaderString(i){if(!i.kid)throw Nq(q4);if(!i.alg)throw Nq(Y4);let e=new r({typ:i.typ||I4.Pop,kid:i.kid,alg:i.alg});return JSON.stringify(e)}};var K4=class{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},PA=class{generateId(){return"callback-id"}startMeasurement(i,e){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:Eq.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:i,startTimeMs:Date.now(),correlationId:e||""},measurement:new K4}}startPerformanceMeasurement(){return new K4}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var sS="pkce_not_created",aS="crypto_nonexistent",__="empty_navigate_uri",RA="hash_empty_error",qw="no_state_in_hash",FA="hash_does_not_contain_known_properties",LA="unable_to_parse_state",NA="state_interaction_type_mismatch",BA="interaction_in_progress",jA="popup_window_error",VA="empty_window_error",Sp="user_cancelled",Z4="monitor_popup_timeout",$A="monitor_window_timeout",UA="redirect_in_iframe",zA="block_iframe_reload",GA="block_nested_popups",Q4="iframe_closed_prematurely",y_="silent_logout_unsupported",HA="no_account_error",X4="silent_prompt_value_error",WA="no_token_request_cache_error",qA="unable_to_parse_token_request_cache_error",Yw="no_cached_authority_error",J4="auth_request_not_set_error",eB="invalid_cache_type",v_="non_browser_environment",b_="database_not_open",lv="no_network_connectivity",YA="post_request_failed",KA="get_request_failed",lS="failed_to_parse_response",ZA="unable_to_load_token",Kw="crypto_key_not_found",QA="auth_code_required",XA="auth_code_or_nativeAccountId_required",JA="spa_code_and_nativeAccountId_present",Zw="database_unavailable",eE="unable_to_acquire_token_from_native_platform",tE="native_handshake_timeout",iE="native_extension_not_installed",df="native_connection_not_established",nE="uninitialized_public_client_application",rE="native_prompt_not_supported",oE="invalid_base64_string",sE="invalid_pop_token_request",tB="failed_to_build_headers",iB="failed_to_parse_headers";var cv="For more visit: aka.ms/msaljs/browser-errors",Fr={[sS]:"The PKCE code challenge and verifier could not be generated.",[aS]:"The crypto object or function is not available.",[__]:"Navigation URI is empty. Please check stack trace for more info.",[RA]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${cv}`,[qw]:"Hash does not contain state. Please verify that the request originated from msal.",[FA]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${cv}`,[LA]:"Unable to parse state. Please verify that the request originated from msal.",[NA]:"Hash contains state but the interaction type does not match the caller.",[BA]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${cv}`,[jA]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[VA]:"window.open returned null or undefined window object.",[Sp]:"User cancelled the flow.",[Z4]:`Token acquisition in popup failed due to timeout.  ${cv}`,[$A]:`Token acquisition in iframe failed due to timeout.  ${cv}`,[UA]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[zA]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${cv}`,[GA]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[Q4]:"The iframe being monitored was closed prematurely.",[y_]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[HA]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[X4]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[WA]:"No token request found in cache.",[qA]:"The cached token request could not be parsed.",[Yw]:"No cached authority found.",[J4]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[eB]:"Invalid cache type",[v_]:"Login and token requests are not supported in non-browser environments.",[b_]:"Database is not open!",[lv]:"No network connectivity. Check your internet connection.",[YA]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[KA]:"Network request failed. Please check the network trace to determine root cause.",[lS]:"Failed to parse network response. Check network trace.",[ZA]:"Error loading token to cache.",[Kw]:"Cryptographic Key or Keypair not found in browser storage.",[QA]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[XA]:"An authorization code or nativeAccountId must be provided to this flow.",[JA]:"Request cannot contain both spa code and native account id.",[Zw]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[eE]:`Unable to acquire token from native platform.  ${cv}`,[tE]:"Timed out while attempting to establish connection to browser extension",[iE]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[df]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${cv}`,[nE]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${cv}`,[rE]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[oE]:"Invalid base64 encoded string.",[sE]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[tB]:"Failed to build request headers object.",[iB]:"Failed to parse response headers"},$3t={pkceNotGenerated:{code:sS,desc:Fr[sS]},cryptoDoesNotExist:{code:aS,desc:Fr[aS]},emptyNavigateUriError:{code:__,desc:Fr[__]},hashEmptyError:{code:RA,desc:Fr[RA]},hashDoesNotContainStateError:{code:qw,desc:Fr[qw]},hashDoesNotContainKnownPropertiesError:{code:FA,desc:Fr[FA]},unableToParseStateError:{code:LA,desc:Fr[LA]},stateInteractionTypeMismatchError:{code:NA,desc:Fr[NA]},interactionInProgress:{code:BA,desc:Fr[BA]},popupWindowError:{code:jA,desc:Fr[jA]},emptyWindowError:{code:VA,desc:Fr[VA]},userCancelledError:{code:Sp,desc:Fr[Sp]},monitorPopupTimeoutError:{code:Z4,desc:Fr[Z4]},monitorIframeTimeoutError:{code:$A,desc:Fr[$A]},redirectInIframeError:{code:UA,desc:Fr[UA]},blockTokenRequestsInHiddenIframeError:{code:zA,desc:Fr[zA]},blockAcquireTokenInPopupsError:{code:GA,desc:Fr[GA]},iframeClosedPrematurelyError:{code:Q4,desc:Fr[Q4]},silentLogoutUnsupportedError:{code:y_,desc:Fr[y_]},noAccountError:{code:HA,desc:Fr[HA]},silentPromptValueError:{code:X4,desc:Fr[X4]},noTokenRequestCacheError:{code:WA,desc:Fr[WA]},unableToParseTokenRequestCacheError:{code:qA,desc:Fr[qA]},noCachedAuthorityError:{code:Yw,desc:Fr[Yw]},authRequestNotSet:{code:J4,desc:Fr[J4]},invalidCacheType:{code:eB,desc:Fr[eB]},notInBrowserEnvironment:{code:v_,desc:Fr[v_]},databaseNotOpen:{code:b_,desc:Fr[b_]},noNetworkConnectivity:{code:lv,desc:Fr[lv]},postRequestFailed:{code:YA,desc:Fr[YA]},getRequestFailed:{code:KA,desc:Fr[KA]},failedToParseNetworkResponse:{code:lS,desc:Fr[lS]},unableToLoadTokenError:{code:ZA,desc:Fr[ZA]},signingKeyNotFoundInStorage:{code:Kw,desc:Fr[Kw]},authCodeRequired:{code:QA,desc:Fr[QA]},authCodeOrNativeAccountRequired:{code:XA,desc:Fr[XA]},spaCodeAndNativeAccountPresent:{code:JA,desc:Fr[JA]},databaseUnavailable:{code:Zw,desc:Fr[Zw]},unableToAcquireTokenFromNativePlatform:{code:eE,desc:Fr[eE]},nativeHandshakeTimeout:{code:tE,desc:Fr[tE]},nativeExtensionNotInstalled:{code:iE,desc:Fr[iE]},nativeConnectionNotEstablished:{code:df,desc:Fr[df]},uninitializedPublicClientApplication:{code:nE,desc:Fr[nE]},nativePromptNotSupported:{code:rE,desc:Fr[rE]},invalidBase64StringError:{code:oE,desc:Fr[oE]},invalidPopTokenRequest:{code:sE,desc:Fr[sE]}},cS=class r extends eo{constructor(i,e){super(i,Fr[i],e),Object.setPrototypeOf(this,r.prototype),this.name="BrowserAuthError"}};function qi(r,i){return new cS(r,i)}var kc={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Qw={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},dv={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},qc={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},Bq={GET:"GET",POST:"POST"},os={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},Cm={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys",VERSION:"msal.version"},KO={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},ds={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962},Cn=function(r){return r.Redirect="redirect",r.Popup="popup",r.Silent="silent",r.None="none",r}(Cn||{}),pc={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},jq={scopes:ym},Vq="jwk",ZO={React:"@azure/msal-react",Angular:"@azure/msal-angular"},nB="msal.db",yme=1,vme=`${nB}.keys`,Qh={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},bme=[Qh.Default,Qh.Skip,Qh.RefreshTokenAndNetwork],wme="msal.browser.log.level",Cme="msal.browser.log.pii";function QO(r){return encodeURIComponent(XO(r).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function dS(r){return xme(r).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function XO(r){return xme(new TextEncoder().encode(r))}function xme(r){let i=Array.from(r,e=>String.fromCodePoint(e)).join("");return btoa(i)}var sVe="RSASSA-PKCS1-v1_5",Tme="SHA-256",aVe=2048,lVe=new Uint8Array([1,0,1]),Sme="0123456789abcdef",Ime=new Uint32Array(1),cVe="crypto_subtle_undefined",Uq={name:sVe,hash:Tme,modulusLength:aVe,publicExponent:lVe};function Ame(r){if(!window)throw qi(v_);if(!window.crypto)throw qi(aS);if(!r&&!window.crypto.subtle)throw qi(aS,cVe)}function zq(r,i,e){return st(this,null,function*(){i?.addQueueMeasurement(Je.Sha256Digest,e);let o=new TextEncoder().encode(r);return window.crypto.subtle.digest(Tme,o)})}function Eme(r){return window.crypto.getRandomValues(r)}function $q(){return window.crypto.getRandomValues(Ime),Ime[0]}function fu(){let r=Date.now(),i=$q()*1024+($q()&1023),e=new Uint8Array(16),n=Math.trunc(i/2**30),o=i&2**30-1,s=$q();e[0]=r/2**40,e[1]=r/2**32,e[2]=r/2**24,e[3]=r/2**16,e[4]=r/2**8,e[5]=r,e[6]=112|n>>>8,e[7]=n,e[8]=128|o>>>24,e[9]=o>>>16,e[10]=o>>>8,e[11]=o,e[12]=s>>>24,e[13]=s>>>16,e[14]=s>>>8,e[15]=s;let l="";for(let h=0;h<e.length;h++)l+=Sme.charAt(e[h]>>>4),l+=Sme.charAt(e[h]&15),(h===3||h===5||h===7||h===9)&&(l+="-");return l}function Mme(r,i){return st(this,null,function*(){return window.crypto.subtle.generateKey(Uq,r,i)})}function rB(r){return st(this,null,function*(){return window.crypto.subtle.exportKey(Vq,r)})}function Dme(r,i,e){return st(this,null,function*(){return window.crypto.subtle.importKey(Vq,r,Uq,i,e)})}function kme(r,i){return st(this,null,function*(){return window.crypto.subtle.sign(Uq,r,i)})}function oB(r){return st(this,null,function*(){let i=yield zq(r),e=new Uint8Array(i);return dS(e)})}var Xw="storage_not_supported",sB="stubbed_public_client_application_called",aE="in_mem_redirect_unavailable";var aB={[Xw]:"Given storage configuration option was not supported.",[sB]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[aE]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."},iNt={storageNotSupportedError:{code:Xw,desc:aB[Xw]},stubPcaInstanceCalled:{code:sB,desc:aB[sB]},inMemRedirectUnavailable:{code:aE,desc:aB[aE]}},lB=class r extends eo{constructor(i,e){super(i,e),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,r.prototype)}};function lE(r){return new lB(r,aB[r])}function Ome(r){r.location.hash="",typeof r.history.replaceState=="function"&&r.history.replaceState(null,"",`${r.location.origin}${r.location.pathname}${r.location.search}`)}function Pme(r){let i=r.split("#");i.shift(),window.location.hash=i.length>0?i.join("#"):""}function cB(){return window.parent!==window}function dVe(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${kc.POPUP_NAME_PREFIX}.`)===0}function Ip(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function Rme(){let i=new to(window.location.href).getUrlComponents();return`${i.Protocol}//${i.HostNameAndPort}/`}function uVe(){if(to.hashContainsKnownProperties(window.location.hash)&&cB())throw qi(zA)}function hVe(r){if(cB()&&!r)throw qi(UA)}function pVe(){if(dVe())throw qi(GA)}function Gq(){if(typeof window>"u")throw qi(v_)}function Hq(r){if(!r)throw qi(nE)}function dB(r){Gq(),uVe(),pVe(),Hq(r)}function Wq(r,i){if(dB(r),hVe(i.system.allowRedirectInIframe),i.cache.cacheLocation===qc.MemoryStorage&&!i.cache.storeAuthStateInCookie)throw lE(aE)}function uB(r){let i=document.createElement("link");i.rel="preconnect",i.href=new URL(r).origin,i.crossOrigin="anonymous",document.head.appendChild(i),window.setTimeout(()=>{try{document.head.removeChild(i)}catch{}},1e4)}function Fme(){return fu()}var JO=class r{navigateInternal(i,e){return r.defaultNavigateWindow(i,e)}navigateExternal(i,e){return r.defaultNavigateWindow(i,e)}static defaultNavigateWindow(i,e){return e.noHistory?window.location.replace(i):window.location.assign(i),new Promise(n=>{setTimeout(()=>{n(!0)},e.timeout)})}};var hB=class{sendGetRequestAsync(i,e){return st(this,null,function*(){let n,o={},s=0,l=Lme(e);try{n=yield fetch(i,{method:Bq.GET,headers:l})}catch{throw qi(window.navigator.onLine?KA:lv)}o=Nme(n.headers);try{return s=n.status,{headers:o,body:yield n.json(),status:s}}catch{throw z4(qi(lS),s,o)}})}sendPostRequestAsync(i,e){return st(this,null,function*(){let n=e&&e.body||"",o=Lme(e),s,l=0,h={};try{s=yield fetch(i,{method:Bq.POST,headers:o,body:n})}catch{throw qi(window.navigator.onLine?YA:lv)}h=Nme(s.headers);try{return l=s.status,{headers:h,body:yield s.json(),status:l}}catch{throw z4(qi(lS),l,h)}})}};function Lme(r){try{let i=new Headers;if(!(r&&r.headers))return i;let e=r.headers;return Object.entries(e).forEach(([n,o])=>{i.append(n,o)}),i}catch{throw qi(tB)}}function Nme(r){try{let i={};return r.forEach((e,n)=>{i[n]=e}),i}catch{throw qi(iB)}}var fVe=6e4,pB=1e4,gVe=3e4,_Ve=2e3;function Bme({auth:r,cache:i,system:e,telemetry:n},o){let s={clientId:qt.EMPTY_STRING,authority:`${qt.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:qt.EMPTY_STRING,authorityMetadata:qt.EMPTY_STRING,redirectUri:typeof window<"u"?Ip():"",postLogoutRedirectUri:qt.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:mu.AAD,OIDCOptions:{serverResponseType:kg.FRAGMENT,defaultScopes:[qt.OPENID_SCOPE,qt.PROFILE_SCOPE,qt.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Bw.None,tenant:qt.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},l={cacheLocation:qc.SessionStorage,temporaryCacheLocation:qc.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(i&&i.cacheLocation===qc.LocalStorage),claimsBasedCachingEnabled:!1},h={loggerCallback:()=>{},logLevel:Sa.Info,piiLoggingEnabled:!1},p=li(Xe({},R4),{loggerOptions:h,networkClient:o?new hB:Fq,navigationClient:new JO,loadFrameTimeout:0,windowHashTimeout:e?.loadFrameTimeout||fVe,iframeHashTimeout:e?.loadFrameTimeout||pB,navigateFrameWait:0,redirectNavigationTimeout:gVe,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:e?.nativeBrokerHandshakeTimeout||_Ve,pollIntervalMilliseconds:kc.DEFAULT_POLL_INTERVAL_MS}),m=li(Xe(Xe({},p),e),{loggerOptions:e?.loggerOptions||h}),f={application:{appName:qt.EMPTY_STRING,appVersion:qt.EMPTY_STRING},client:new PA};if(r?.protocolMode!==mu.OIDC&&r?.OIDCOptions&&new xp(m.loggerOptions).warning(JSON.stringify($o(Rg.cannotSetOIDCOptions))),r?.protocolMode&&r.protocolMode!==mu.AAD&&m?.allowNativeBroker)throw $o(Rg.cannotAllowNativeBroker);return{auth:li(Xe(Xe({},s),r),{OIDCOptions:Xe(Xe({},s.OIDCOptions),r?.OIDCOptions)}),cache:Xe(Xe({},l),i),system:m,telemetry:Xe(Xe({},f),n)}}var jme="@azure/msal-browser",Fg="3.30.0";var mB=class r{static loggerCallback(i,e){switch(i){case Sa.Error:console.error(e);return;case Sa.Info:console.info(e);return;case Sa.Verbose:console.debug(e);return;case Sa.Warning:console.warn(e);return;default:console.log(e);return}}constructor(i){this.browserEnvironment=typeof window<"u",this.config=Bme(i,this.browserEnvironment);let e;try{e=window[qc.SessionStorage]}catch{}let n=e?.getItem(wme),o=e?.getItem(Cme)?.toLowerCase(),s=o==="true"?!0:o==="false"?!1:void 0,l=Xe({},this.config.system.loggerOptions),h=n&&Object.keys(Sa).includes(n)?Sa[n]:void 0;h&&(l.loggerCallback=r.loggerCallback,l.logLevel=h),s!==void 0&&(l.piiLoggingEnabled=s),this.logger=new xp(l,jme,Fg),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}};var fB=(()=>{class r extends mB{getModuleName(){return r.MODULE_NAME}getId(){return r.ID}initialize(){return st(this,null,function*(){return this.available=typeof window<"u",this.available})}}return r.MODULE_NAME="",r.ID="StandardOperatingContext",r})();function Tp(r){return new TextDecoder().decode(yVe(r))}function yVe(r){let i=r.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw qi(oE)}let e=atob(i);return Uint8Array.from(e,n=>n.codePointAt(0)||0)}var gB=class{constructor(){this.dbName=nB,this.version=yme,this.tableName=vme,this.dbOpen=!1}open(){return st(this,null,function*(){return new Promise((i,e)=>{let n=window.indexedDB.open(this.dbName,this.version);n.addEventListener("upgradeneeded",o=>{o.target.result.createObjectStore(this.tableName)}),n.addEventListener("success",o=>{let s=o;this.db=s.target.result,this.dbOpen=!0,i()}),n.addEventListener("error",()=>e(qi(Zw)))})})}closeConnection(){let i=this.db;i&&this.dbOpen&&(i.close(),this.dbOpen=!1)}validateDbIsOpen(){return st(this,null,function*(){if(!this.dbOpen)return this.open()})}getItem(i){return st(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((e,n)=>{if(!this.db)return n(qi(b_));let l=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(i);l.addEventListener("success",h=>{let p=h;this.closeConnection(),e(p.target.result)}),l.addEventListener("error",h=>{this.closeConnection(),n(h)})})})}setItem(i,e){return st(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((n,o)=>{if(!this.db)return o(qi(b_));let h=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(e,i);h.addEventListener("success",()=>{this.closeConnection(),n()}),h.addEventListener("error",p=>{this.closeConnection(),o(p)})})})}removeItem(i){return st(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((e,n)=>{if(!this.db)return n(qi(b_));let l=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(i);l.addEventListener("success",()=>{this.closeConnection(),e()}),l.addEventListener("error",h=>{this.closeConnection(),n(h)})})})}getKeys(){return st(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((i,e)=>{if(!this.db)return e(qi(b_));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();s.addEventListener("success",l=>{let h=l;this.closeConnection(),i(h.target.result)}),s.addEventListener("error",l=>{this.closeConnection(),e(l)})})})}containsKey(i){return st(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((e,n)=>{if(!this.db)return n(qi(b_));let l=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(i);l.addEventListener("success",h=>{let p=h;this.closeConnection(),e(p.target.result===1)}),l.addEventListener("error",h=>{this.closeConnection(),n(h)})})})}deleteDatabase(){return st(this,null,function*(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((i,e)=>{let n=window.indexedDB.deleteDatabase(nB),o=setTimeout(()=>e(!1),200);n.addEventListener("success",()=>(clearTimeout(o),i(!0))),n.addEventListener("blocked",()=>(clearTimeout(o),i(!0))),n.addEventListener("error",()=>(clearTimeout(o),e(!1)))})})}};var uS=class{constructor(){this.cache=new Map}getItem(i){return this.cache.get(i)||null}setItem(i,e){this.cache.set(i,e)}removeItem(i){this.cache.delete(i)}getKeys(){let i=[];return this.cache.forEach((e,n)=>{i.push(n)}),i}containsKey(i){return this.cache.has(i)}clear(){this.cache.clear()}};var _B=class{constructor(i){this.inMemoryCache=new uS,this.indexedDBCache=new gB,this.logger=i}handleDatabaseAccessError(i){if(i instanceof cS&&i.errorCode===Zw)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw i}getItem(i){return st(this,null,function*(){let e=this.inMemoryCache.getItem(i);if(!e)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.getItem(i)}catch(n){this.handleDatabaseAccessError(n)}return e})}setItem(i,e){return st(this,null,function*(){this.inMemoryCache.setItem(i,e);try{yield this.indexedDBCache.setItem(i,e)}catch(n){this.handleDatabaseAccessError(n)}})}removeItem(i){return st(this,null,function*(){this.inMemoryCache.removeItem(i);try{yield this.indexedDBCache.removeItem(i)}catch(e){this.handleDatabaseAccessError(e)}})}getKeys(){return st(this,null,function*(){let i=this.inMemoryCache.getKeys();if(i.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield this.indexedDBCache.getKeys()}catch(e){this.handleDatabaseAccessError(e)}return i})}containsKey(i){return st(this,null,function*(){let e=this.inMemoryCache.containsKey(i);if(!e)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.containsKey(i)}catch(n){this.handleDatabaseAccessError(n)}return e})}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){return st(this,null,function*(){try{this.logger.verbose("Deleting persistent keystore");let i=yield this.indexedDBCache.deleteDatabase();return i&&this.logger.verbose("Persistent keystore deleted"),i}catch(i){return this.handleDatabaseAccessError(i),!1}})}};var $me=(()=>{class r{constructor(e,n,o){this.logger=e,Ame(o??!1),this.cache=new _B(this.logger),this.performanceClient=n}createNewGuid(){return fu()}base64Encode(e){return XO(e)}base64Decode(e){return Tp(e)}base64UrlEncode(e){return QO(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}getPublicKeyThumbprint(e){return st(this,null,function*(){let n=this.performanceClient?.startMeasurement(Je.CryptoOptsGetPublicKeyThumbprint,e.correlationId),o=yield Mme(r.EXTRACTABLE,r.POP_KEY_USAGES),s=yield rB(o.publicKey),l={e:s.e,kty:s.kty,n:s.n},h=Vme(l),p=yield this.hashString(h),m=yield rB(o.privateKey),f=yield Dme(m,!1,["sign"]);return yield this.cache.setItem(p,{privateKey:f,publicKey:o.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),p})}removeTokenBindingKey(e){return st(this,null,function*(){return yield this.cache.removeItem(e),!(yield this.cache.containsKey(e))})}clearKeystore(){return st(this,null,function*(){this.cache.clearInMemory();try{return yield this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}})}signJwt(e,n,o,s){return st(this,null,function*(){let l=this.performanceClient?.startMeasurement(Je.CryptoOptsSignJwt,s),h=yield this.cache.getItem(n);if(!h)throw qi(Kw);let p=yield rB(h.publicKey),m=Vme(p),f=QO(JSON.stringify({kid:n})),g=YO.getShrHeaderString(li(Xe({},o?.header),{alg:p.alg,kid:f})),y=QO(g);e.cnf={jwk:JSON.parse(m)};let _=QO(JSON.stringify(e)),w=`${y}.${_}`,k=new TextEncoder().encode(w),R=yield kme(h.privateKey,k),$=dS(new Uint8Array(R)),H=`${w}.${$}`;return l&&l.end({success:!0}),H})}hashString(e){return st(this,null,function*(){return oB(e)})}}return r.POP_KEY_USAGES=["sign","verify"],r.EXTRACTABLE=!0,r})();function Vme(r){return JSON.stringify(r,Object.keys(r).sort())}var yB=class{constructor(){if(!window.localStorage)throw lE(Xw)}getItem(i){return window.localStorage.getItem(i)}setItem(i,e){window.localStorage.setItem(i,e)}removeItem(i){window.localStorage.removeItem(i)}getKeys(){return Object.keys(window.localStorage)}containsKey(i){return window.localStorage.hasOwnProperty(i)}};var vB=class{constructor(){if(!window.sessionStorage)throw lE(Xw)}getItem(i){return window.sessionStorage.getItem(i)}setItem(i,e){window.sessionStorage.setItem(i,e)}removeItem(i){window.sessionStorage.removeItem(i)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(i){return window.sessionStorage.hasOwnProperty(i)}};function bB(r,i){if(!i)return null;try{return bd.parseRequestState(r,i).libraryState.meta}catch{throw di(yd.invalidState)}}var wB=class{getItem(i){let e=`${encodeURIComponent(i)}`,n=document.cookie.split(";");for(let o=0;o<n.length;o++){let s=n[o],[l,...h]=decodeURIComponent(s).trim().split("="),p=h.join("=");if(l===e)return p}return""}setItem(i,e,n,o=!0){let s=`${encodeURIComponent(i)}=${encodeURIComponent(e)};path=/;SameSite=Lax;`;if(n){let l=vVe(n);s+=`expires=${l};`}o&&(s+="Secure;"),document.cookie=s}removeItem(i){this.setItem(i,"",-1)}getKeys(){let i=document.cookie.split(";"),e=[];return i.forEach(n=>{let o=decodeURIComponent(n).trim().split("=");e.push(o[0])}),e}containsKey(i){return this.getKeys().includes(i)}};function vVe(r){let i=new Date;return new Date(i.getTime()+r*864e5).toUTCString()}var cE=class r extends rv{constructor(i,e,n,o,s,l){super(i,n,o,s),this.cacheConfig=e,this.logger=o,this.internalStorage=new uS,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupBrowserStorage(this.cacheConfig.temporaryCacheLocation),this.cookieStorage=new wB,e.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=l}setupBrowserStorage(i){try{switch(i){case qc.LocalStorage:return new yB;case qc.SessionStorage:return new vB;case qc.MemoryStorage:default:break}}catch(e){this.logger.error(e)}return this.cacheConfig.cacheLocation=qc.MemoryStorage,new uS}migrateCacheEntries(){let i=this.browserStorage.getItem(Cm.VERSION);i&&this.logger.info(`MSAL.js was last initialized with version ${i}`),i!==Fg&&this.browserStorage.setItem(Cm.VERSION,Fg);let e=`${qt.CACHE_PREFIX}.${Dc.ID_TOKEN}`,n=`${qt.CACHE_PREFIX}.${Dc.CLIENT_INFO}`,o=`${qt.CACHE_PREFIX}.${Dc.ERROR}`,s=`${qt.CACHE_PREFIX}.${Dc.ERROR_DESC}`,l=this.browserStorage.getItem(e),h=this.browserStorage.getItem(n),p=this.browserStorage.getItem(o),m=this.browserStorage.getItem(s),f=[l,h,p,m];[Dc.ID_TOKEN,Dc.CLIENT_INFO,Dc.ERROR,Dc.ERROR_DESC].forEach((y,_)=>{let w=f[_];w&&this.setTemporaryCache(y,w,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");let i=this.cryptoImpl.createNewGuid(),e=this.getItem(Cm.ACCOUNT_KEYS),n=this.getItem(`${Cm.TOKEN_KEYS}.${this.clientId}`);if(e&&n){this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");return}this.browserStorage.getKeys().forEach(s=>{if(this.isCredentialKey(s)){let l=this.getItem(s);if(l){let h=this.validateAndParseJson(l);if(h&&h.hasOwnProperty("credentialType"))switch(h.credentialType){case Tr.ID_TOKEN:if(Ya.isIdTokenEntity(h)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${s} found, saving key to token key map`);let p=h,m=this.updateCredentialCacheKey(s,p,i);this.addTokenKey(m,Tr.ID_TOKEN,i);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${s}`);break;case Tr.ACCESS_TOKEN:case Tr.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(Ya.isAccessTokenEntity(h)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${s} found, saving key to token key map`);let p=h,m=this.updateCredentialCacheKey(s,p,i);this.addTokenKey(m,Tr.ACCESS_TOKEN,i);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${s}`);break;case Tr.REFRESH_TOKEN:if(Ya.isRefreshTokenEntity(h)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${s} found, saving key to token key map`);let p=h,m=this.updateCredentialCacheKey(s,p,i);this.addTokenKey(m,Tr.REFRESH_TOKEN,i);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${s}`);break}}}if(this.isAccountKey(s)){let l=this.getItem(s);if(l){let h=this.validateAndParseJson(l);h&&rl.isAccountEntity(h)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${s} found, saving key to account key map`),this.addAccountKeyToMap(s,i))}}})}validateAndParseJson(i){try{let e=JSON.parse(i);return e&&typeof e=="object"?e:null}catch{return null}}getItem(i){return this.browserStorage.getItem(i)}setItem(i,e,n){let o=[];for(let l=0;l<=20;l++)try{this.browserStorage.setItem(i,e),l>0&&this.removeAccessTokenKeys(o.slice(0,l),n);break}catch(h){let p=UO(h);if(p.errorCode===P4.cacheQuotaExceeded&&l<20){if(o.length||(i===`${Cm.TOKEN_KEYS}.${this.clientId}`?o=JSON.parse(e).accessToken:o=this.getTokenKeys().accessToken),o.length<=l)throw p;this.removeAccessToken(o[l],n,!1)}else throw p}}getAccount(i,e,n){this.logger.trace("BrowserCacheManager.getAccount called");let o=this.getCachedAccountEntity(i,e);return this.updateOutdatedCachedAccount(i,o,e,n)}getCachedAccountEntity(i,e){let n=this.getItem(i);if(!n)return this.removeAccountKeyFromMap(i,e),null;let o=this.validateAndParseJson(n);return!o||!rl.isAccountEntity(o)?null:rv.toObject(new rl,o)}setAccount(i,e){this.logger.trace("BrowserCacheManager.setAccount called");let n=i.generateAccountKey();i.lastUpdatedAt=Date.now().toString(),this.setItem(n,JSON.stringify(i),e),this.addAccountKeyToMap(n,e)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");let i=this.getItem(Cm.ACCOUNT_KEYS);return i?JSON.parse(i):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(i,e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${i}`);let n=this.getAccountKeys();n.indexOf(i)===-1?(n.push(i),this.setItem(Cm.ACCOUNT_KEYS,JSON.stringify(n),e),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(i,e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${i}`);let n=this.getAccountKeys(),o=n.indexOf(i);if(o>-1){if(n.splice(o,1),n.length===0){this.removeItem(Cm.ACCOUNT_KEYS);return}else this.setItem(Cm.ACCOUNT_KEYS,JSON.stringify(n),e);this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(i,e){return st(this,null,function*(){YL(r.prototype,this,"removeAccount").call(this,i,e),this.removeAccountKeyFromMap(i,e)})}removeOutdatedAccount(i,e){this.removeItem(i),this.removeAccountKeyFromMap(i,e)}removeIdToken(i,e){super.removeIdToken(i,e),this.removeTokenKey(i,Tr.ID_TOKEN,e)}removeAccessToken(i,e,n=!0){super.removeAccessToken(i,e),this.performanceClient?.incrementFields({accessTokensRemoved:1},e),n&&this.removeTokenKey(i,Tr.ACCESS_TOKEN,e)}removeAccessTokenKeys(i,e){this.logger.trace("removeAccessTokenKey called");let n=this.getTokenKeys(),o=0;if(i.forEach(s=>{let l=n.accessToken.indexOf(s);l>-1&&(n.accessToken.splice(l,1),o++)}),o>0){this.logger.info(`removed ${o} accessToken keys from tokenKeys map`),this.setTokenKeys(n,e);return}}removeRefreshToken(i,e){super.removeRefreshToken(i,e),this.removeTokenKey(i,Tr.REFRESH_TOKEN,e)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");let i=this.getItem(`${Cm.TOKEN_KEYS}.${this.clientId}`);if(i){let e=this.validateAndParseJson(i);if(e&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("accessToken")&&e.hasOwnProperty("refreshToken"))return e;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}setTokenKeys(i,e){if(i.idToken.length===0&&i.accessToken.length===0&&i.refreshToken.length===0){this.removeItem(`${Cm.TOKEN_KEYS}.${this.clientId}`);return}else this.setItem(`${Cm.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(i),e)}addTokenKey(i,e,n){this.logger.trace("BrowserCacheManager addTokenKey called");let o=this.getTokenKeys();switch(e){case Tr.ID_TOKEN:o.idToken.indexOf(i)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),o.idToken.push(i));break;case Tr.ACCESS_TOKEN:let s=o.accessToken.indexOf(i);s!==-1&&o.accessToken.splice(s,1),this.logger.trace(`access token ${s===-1?"added to":"updated in"} map`),o.accessToken.push(i);break;case Tr.REFRESH_TOKEN:o.refreshToken.indexOf(i)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),o.refreshToken.push(i));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${e}`),di(yd.unexpectedCredentialType)}this.setTokenKeys(o,n)}removeTokenKey(i,e,n,o=this.getTokenKeys()){switch(this.logger.trace("BrowserCacheManager removeTokenKey called"),e){case Tr.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${i} from map`);let s=o.idToken.indexOf(i);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),o.idToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case Tr.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${i} from map`);let l=o.accessToken.indexOf(i);l>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),o.accessToken.splice(l,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case Tr.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${i} from map`);let h=o.refreshToken.indexOf(i);h>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),o.refreshToken.splice(h,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${e}`),di(yd.unexpectedCredentialType)}this.setTokenKeys(o,n)}getIdTokenCredential(i,e){let n=this.getItem(i);if(!n)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(i,e),null;let o=this.validateAndParseJson(n);return!o||!Ya.isIdTokenEntity(o)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),o)}setIdTokenCredential(i,e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");let n=Ya.generateCredentialKey(i);i.lastUpdatedAt=Date.now().toString(),this.setItem(n,JSON.stringify(i),e),this.addTokenKey(n,Tr.ID_TOKEN,e)}getAccessTokenCredential(i,e){let n=this.getItem(i);if(!n)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(i,Tr.ACCESS_TOKEN,e),null;let o=this.validateAndParseJson(n);return!o||!Ya.isAccessTokenEntity(o)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),o)}setAccessTokenCredential(i,e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");let n=Ya.generateCredentialKey(i);i.lastUpdatedAt=Date.now().toString(),this.setItem(n,JSON.stringify(i),e),this.addTokenKey(n,Tr.ACCESS_TOKEN,e)}getRefreshTokenCredential(i,e){let n=this.getItem(i);if(!n)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(i,Tr.REFRESH_TOKEN,e),null;let o=this.validateAndParseJson(n);return!o||!Ya.isRefreshTokenEntity(o)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),o)}setRefreshTokenCredential(i,e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");let n=Ya.generateCredentialKey(i);i.lastUpdatedAt=Date.now().toString(),this.setItem(n,JSON.stringify(i),e),this.addTokenKey(n,Tr.REFRESH_TOKEN,e)}getAppMetadata(i){let e=this.getItem(i);if(!e)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;let n=this.validateAndParseJson(e);return!n||!Ya.isAppMetadataEntity(i,n)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),n)}setAppMetadata(i,e){this.logger.trace("BrowserCacheManager.setAppMetadata called");let n=Ya.generateAppMetadataKey(i);this.setItem(n,JSON.stringify(i),e)}getServerTelemetry(i){let e=this.getItem(i);if(!e)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;let n=this.validateAndParseJson(e);return!n||!Ya.isServerTelemetryEntity(i,n)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),n)}setServerTelemetry(i,e,n){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(i,JSON.stringify(e),n)}getAuthorityMetadata(i){let e=this.internalStorage.getItem(i);if(!e)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;let n=this.validateAndParseJson(e);return n&&Ya.isAuthorityMetadataEntity(i,n)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),n):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(e=>this.isAuthorityMetadata(e))}setWrapperMetadata(i,e){this.internalStorage.setItem(KO.WRAPPER_SKU,i),this.internalStorage.setItem(KO.WRAPPER_VER,e)}getWrapperMetadata(){let i=this.internalStorage.getItem(KO.WRAPPER_SKU)||qt.EMPTY_STRING,e=this.internalStorage.getItem(KO.WRAPPER_VER)||qt.EMPTY_STRING;return[i,e]}setAuthorityMetadata(i,e){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(i,JSON.stringify(e))}getActiveAccount(i){let e=this.generateCacheKey(Dc.ACTIVE_ACCOUNT_FILTERS),n=this.getItem(e);if(!n){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");let s=this.generateCacheKey(Dc.ACTIVE_ACCOUNT),l=this.getItem(s);if(!l)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;let h=this.getAccountInfoFilteredBy({localAccountId:l},i);return h?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(h,i),h):null}let o=this.validateAndParseJson(n);return o?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:o.homeAccountId,localAccountId:o.localAccountId,tenantId:o.tenantId},i)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(i,e){let n=this.generateCacheKey(Dc.ACTIVE_ACCOUNT_FILTERS),o=this.generateCacheKey(Dc.ACTIVE_ACCOUNT);if(i){this.logger.verbose("setActiveAccount: Active account set");let s={homeAccountId:i.homeAccountId,localAccountId:i.localAccountId,tenantId:i.tenantId,lastUpdatedAt:Date.now().toString()};this.setItem(n,JSON.stringify(s),e),this.setItem(o,i.localAccountId,e)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(n),this.browserStorage.removeItem(o)}getThrottlingCache(i){let e=this.getItem(i);if(!e)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;let n=this.validateAndParseJson(e);return!n||!Ya.isThrottlingEntity(i,n)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),n)}setThrottlingCache(i,e,n){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(i,JSON.stringify(e),n)}getTemporaryCache(i,e){let n=e?this.generateCacheKey(i):i;if(this.cacheConfig.storeAuthStateInCookie){let s=this.cookieStorage.getItem(n);if(s)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),s}let o=this.temporaryCacheStorage.getItem(n);if(!o){if(this.cacheConfig.cacheLocation===qc.LocalStorage){let s=this.browserStorage.getItem(n);if(s)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),s}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(i,e,n){let o=n?this.generateCacheKey(i):i;this.temporaryCacheStorage.setItem(o,e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,e,void 0,this.cacheConfig.secureCookies))}removeItem(i){this.browserStorage.removeItem(i)}removeTemporaryItem(i){this.temporaryCacheStorage.removeItem(i),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(i))}getKeys(){return this.browserStorage.getKeys()}clear(i){return st(this,null,function*(){yield this.removeAllAccounts(i),this.removeAppMetadata(i),this.temporaryCacheStorage.getKeys().forEach(e=>{(e.indexOf(qt.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{(e.indexOf(qt.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(e)}),this.internalStorage.clear()})}clearTokensAndKeysWithClaims(i,e){return st(this,null,function*(){i.addQueueMeasurement(Je.ClearTokensAndKeysWithClaims,e);let n=this.getTokenKeys(),o=0;n.accessToken.forEach(s=>{let l=this.getAccessTokenCredential(s,e);l?.requestedClaimsHash&&s.includes(l.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(s,e),o++)}),o>0&&this.logger.warning(`${o} access tokens with claims in the cache keys have been removed from the cache.`)})}generateCacheKey(i){return this.validateAndParseJson(i)?JSON.stringify(i):ql.startsWith(i,qt.CACHE_PREFIX)||ql.startsWith(i,Dc.ADAL_ID_TOKEN)?i:`${qt.CACHE_PREFIX}.${this.clientId}.${i}`}generateAuthorityKey(i){let{libraryState:{id:e}}=bd.parseRequestState(this.cryptoImpl,i);return this.generateCacheKey(`${os.AUTHORITY}.${e}`)}generateNonceKey(i){let{libraryState:{id:e}}=bd.parseRequestState(this.cryptoImpl,i);return this.generateCacheKey(`${os.NONCE_IDTOKEN}.${e}`)}generateStateKey(i){let{libraryState:{id:e}}=bd.parseRequestState(this.cryptoImpl,i);return this.generateCacheKey(`${os.REQUEST_STATE}.${e}`)}getCachedAuthority(i){let e=this.generateStateKey(i),n=this.getTemporaryCache(e);if(!n)return null;let o=this.generateAuthorityKey(n);return this.getTemporaryCache(o)}updateCacheEntries(i,e,n,o,s){this.logger.trace("BrowserCacheManager.updateCacheEntries called");let l=this.generateStateKey(i);this.setTemporaryCache(l,i,!1);let h=this.generateNonceKey(i);this.setTemporaryCache(h,e,!1);let p=this.generateAuthorityKey(i);if(this.setTemporaryCache(p,n,!1),s){let m={credential:s.homeAccountId,type:vd.HOME_ACCOUNT_ID};this.setTemporaryCache(os.CCS_CREDENTIAL,JSON.stringify(m),!0)}else if(o){let m={credential:o,type:vd.UPN};this.setTemporaryCache(os.CCS_CREDENTIAL,JSON.stringify(m),!0)}}resetRequestCache(i){this.logger.trace("BrowserCacheManager.resetRequestCache called"),i&&(this.temporaryCacheStorage.getKeys().forEach(e=>{e.indexOf(i)!==-1&&this.removeTemporaryItem(e)}),this.removeTemporaryItem(this.generateStateKey(i)),this.removeTemporaryItem(this.generateNonceKey(i)),this.removeTemporaryItem(this.generateAuthorityKey(i))),this.removeTemporaryItem(this.generateCacheKey(os.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(os.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(os.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(os.CORRELATION_ID)),this.removeTemporaryItem(this.generateCacheKey(os.CCS_CREDENTIAL)),this.removeTemporaryItem(this.generateCacheKey(os.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(i){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),i){let e=this.generateStateKey(i),n=this.temporaryCacheStorage.getItem(e);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${n}`),this.resetRequestCache(n||qt.EMPTY_STRING)}}cleanRequestByInteractionType(i){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(e=>{if(e.indexOf(os.REQUEST_STATE)===-1)return;let n=this.temporaryCacheStorage.getItem(e);if(!n)return;let o=bB(this.cryptoImpl,n);o&&o.interactionType===i&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${n}`),this.resetRequestCache(n))}),this.setInteractionInProgress(!1)}cacheCodeRequest(i){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");let e=XO(JSON.stringify(i));this.setTemporaryCache(os.REQUEST_PARAMS,e,!0)}getCachedRequest(i){this.logger.trace("BrowserCacheManager.getCachedRequest called");let e=this.getTemporaryCache(os.REQUEST_PARAMS,!0);if(!e)throw qi(WA);let n;try{n=JSON.parse(Tp(e))}catch(o){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${o}`),qi(qA)}if(this.removeTemporaryItem(this.generateCacheKey(os.REQUEST_PARAMS)),!n.authority){let o=this.generateAuthorityKey(i),s=this.getTemporaryCache(o);if(!s)throw qi(Yw);n.authority=s}return n}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");let i=this.getTemporaryCache(os.NATIVE_REQUEST,!0);if(!i)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;let e=this.validateAndParseJson(i);return e||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(i){let e=this.getInteractionInProgress();return i?e===this.clientId:!!e}getInteractionInProgress(){let i=`${qt.CACHE_PREFIX}.${os.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(i,!1)}setInteractionInProgress(i){let e=`${qt.CACHE_PREFIX}.${os.INTERACTION_STATUS_KEY}`;if(i){if(this.getInteractionInProgress())throw qi(BA);this.setTemporaryCache(e,this.clientId,!1)}else!i&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(e)}getLegacyLoginHint(){let i=this.getTemporaryCache(Dc.ADAL_ID_TOKEN);i&&(this.browserStorage.removeItem(Dc.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));let e=this.getTemporaryCache(Dc.ID_TOKEN,!0);e&&(this.browserStorage.removeItem(this.generateCacheKey(Dc.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));let n=e||i;if(n){let o=jw.extractTokenClaims(n,Tp);if(o.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),o.preferred_username;if(o.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),o.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(i,e,n){let o=Ya.generateCredentialKey(e);if(i!==o){let s=this.getItem(i);if(s)return this.browserStorage.removeItem(i),this.setItem(o,s,n),this.logger.verbose(`Updated an outdated ${e.credentialType} cache key`),o;this.logger.error(`Attempted to update an outdated ${e.credentialType} cache key but no item matching the outdated key was found in storage`)}return i}hydrateCache(i,e){return st(this,null,function*(){let n=Ya.createIdTokenEntity(i.account?.homeAccountId,i.account?.environment,i.idToken,this.clientId,i.tenantId),o;e.claims&&(o=yield this.cryptoImpl.hashString(e.claims));let s=Ya.createAccessTokenEntity(i.account?.homeAccountId,i.account.environment,i.accessToken,this.clientId,i.tenantId,i.scopes.join(" "),i.expiresOn?i.expiresOn.getTime()/1e3:0,i.extExpiresOn?i.extExpiresOn.getTime()/1e3:0,Tp,void 0,i.tokenType,void 0,e.sshKid,e.claims,o),l={idToken:n,accessToken:s};return this.saveCacheRecord(l,i.correlationId)})}saveCacheRecord(i,e,n){return st(this,null,function*(){try{yield YL(r.prototype,this,"saveCacheRecord").call(this,i,e,n)}catch(o){if(o instanceof Uw&&this.performanceClient&&e)try{let s=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:s.refreshToken.length,cacheIdCount:s.idToken.length,cacheAtCount:s.accessToken.length},e)}catch{}throw o}})}},Ume=(r,i)=>{let e={cacheLocation:qc.MemoryStorage,temporaryCacheLocation:qc.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new cE(r,e,Nw,i)};function zme(r,i,e,n,o){return r.verbose("getAllAccounts called"),e?i.getAllAccounts(n,o):[]}function Gme(r,i,e,n){if(i.trace("getAccount called"),Object.keys(r).length===0)return i.warning("getAccount: No accountFilter provided"),null;let o=e.getAccountInfoFilteredBy(r,n);return o?(i.verbose("getAccount: Account matching provided filter found, returning"),o):(i.verbose("getAccount: No matching account found, returning null"),null)}function Hme(r,i,e,n){if(i.trace("getAccountByUsername called"),!r)return i.warning("getAccountByUsername: No username provided"),null;let o=e.getAccountInfoFilteredBy({username:r},n);return o?(i.verbose("getAccountByUsername: Account matching username found, returning"),i.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${r}`),o):(i.verbose("getAccountByUsername: No matching account found, returning null"),null)}function Wme(r,i,e,n){if(i.trace("getAccountByHomeId called"),!r)return i.warning("getAccountByHomeId: No homeAccountId provided"),null;let o=e.getAccountInfoFilteredBy({homeAccountId:r},n);return o?(i.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),i.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${r}`),o):(i.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function qme(r,i,e,n){if(i.trace("getAccountByLocalId called"),!r)return i.warning("getAccountByLocalId: No localAccountId provided"),null;let o=e.getAccountInfoFilteredBy({localAccountId:r},n);return o?(i.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),i.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${r}`),o):(i.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function Yme(r,i,e){i.setActiveAccount(r,e)}function Kme(r,i){return r.getActiveAccount(i)}var In={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};var CB=class{constructor(i){this.eventCallbacks=new Map,this.logger=i||new xp({})}addEventCallback(i,e,n){if(typeof window<"u"){let o=n||Fme();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[i,e||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(i){this.eventCallbacks.delete(i),this.logger.verbose(`Event callback ${i} removed.`)}emitEvent(i,e,n,o){if(typeof window<"u"){let s={eventType:i,interactionType:e||null,payload:n||null,error:o||null,timestamp:Date.now()};this.eventCallbacks.forEach(([l,h],p)=>{(h.length===0||h.includes(i))&&(this.logger.verbose(`Emitting event to callback ${p}: ${i}`),l.apply(null,[s]))})}}};var dE=class{constructor(i,e,n,o,s,l,h,p,m){this.config=i,this.browserStorage=e,this.browserCrypto=n,this.networkClient=this.config.system.networkClient,this.eventHandler=s,this.navigationClient=l,this.nativeMessageHandler=p,this.correlationId=m||fu(),this.logger=o.clone(kc.MSAL_SKU,Fg,this.correlationId),this.performanceClient=h}clearCacheOnLogout(i){return st(this,null,function*(){if(i){rl.accountInfoIsEqual(i,this.browserStorage.getActiveAccount(this.correlationId),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null,this.correlationId));try{yield this.browserStorage.removeAccount(rl.generateAccountCacheKey(i),this.correlationId),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),yield this.browserStorage.clear(this.correlationId),yield this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})}getRedirectUri(i){this.logger.verbose("getRedirectUri called");let e=i||this.config.auth.redirectUri;return to.getAbsoluteUrl(e,Ip())}initializeServerTelemetryManager(i,e){this.logger.verbose("initializeServerTelemetryManager called");let n={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:i,forceRefresh:e||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new oS(n,this.browserStorage)}getDiscoveredAuthority(i){return st(this,null,function*(){let{account:e}=i,n=i.requestExtraQueryParameters&&i.requestExtraQueryParameters.hasOwnProperty("instance_aware")?i.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(Je.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);let o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},s=i.requestAuthority||this.config.auth.authority,l=n?.length?n==="true":this.config.auth.instanceAware,h=e&&l?this.config.auth.authority.replace(to.getDomainFromUrl(s),e.environment):s,p=cf.generateAuthority(h,i.requestAzureCloudOptions||this.config.auth.azureCloudOptions),m=yield xi(U4.createDiscoveredInstance,Je.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(p,this.config.system.networkClient,this.browserStorage,o,this.logger,this.correlationId,this.performanceClient);if(e&&!m.isAlias(e.environment))throw $o(Rg.authorityMismatch);return m})}};var bVe=32;function Zme(r,i,e){return st(this,null,function*(){r.addQueueMeasurement(Je.GeneratePkceCodes,e);let n=bm(wVe,Je.GenerateCodeVerifier,i,r,e)(r,i,e),o=yield xi(CVe,Je.GenerateCodeChallengeFromVerifier,i,r,e)(n,r,i,e);return{verifier:n,challenge:o}})}function wVe(r,i,e){try{let n=new Uint8Array(bVe);return bm(Eme,Je.GetRandomValues,i,r,e)(n),dS(n)}catch{throw qi(sS)}}function CVe(r,i,e,n){return st(this,null,function*(){i.addQueueMeasurement(Je.GenerateCodeChallengeFromVerifier,n);try{let o=yield xi(zq,Je.Sha256Digest,e,i,n)(r,i,n);return dS(new Uint8Array(o))}catch{throw qi(sS)}})}function eP(r,i,e,n){return st(this,null,function*(){e.addQueueMeasurement(Je.InitializeBaseRequest,r.correlationId);let o=r.authority||i.auth.authority,s=[...r&&r.scopes||[]],l=li(Xe({},r),{correlationId:r.correlationId,authority:o,scopes:s});if(!l.authenticationScheme)l.authenticationScheme=Po.BEARER,n.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(l.authenticationScheme===Po.SSH){if(!r.sshJwk)throw $o(Rg.missingSshJwk);if(!r.sshKid)throw $o(Rg.missingSshKid)}n.verbose(`Authentication Scheme set to "${l.authenticationScheme}" as configured in Auth request`)}return i.cache.claimsBasedCachingEnabled&&r.claims&&!ql.isEmptyObj(r.claims)&&(l.requestedClaimsHash=yield oB(r.claims)),l})}function Qme(r,i,e,n,o){return st(this,null,function*(){n.addQueueMeasurement(Je.InitializeSilentRequest,r.correlationId);let s=yield xi(eP,Je.InitializeBaseRequest,o,n,r.correlationId)(r,e,n,o);return li(Xe(Xe({},r),s),{account:i,forceRefresh:r.forceRefresh||!1})})}var Ap=class extends dE{initializeAuthorizationCodeRequest(i){return st(this,null,function*(){this.performanceClient.addQueueMeasurement(Je.StandardInteractionClientInitializeAuthorizationCodeRequest,this.correlationId);let e=yield xi(Zme,Je.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),n=li(Xe({},i),{redirectUri:i.redirectUri,code:qt.EMPTY_STRING,codeVerifier:e.verifier});return i.codeChallenge=e.challenge,i.codeChallengeMethod=qt.S256_CODE_CHALLENGE_METHOD,n})}initializeLogoutRequest(i){this.logger.verbose("initializeLogoutRequest called",i?.correlationId);let e=Xe({correlationId:this.correlationId||fu()},i);if(i)if(i.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(i.account){let n=this.getLogoutHintFromIdTokenClaims(i.account);n&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),e.logoutHint=n)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!i||i.postLogoutRedirectUri!==null?i&&i.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",e.correlationId),e.postLogoutRedirectUri=to.getAbsoluteUrl(i.postLogoutRedirectUri,Ip())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",e.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",e.correlationId),e.postLogoutRedirectUri=to.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Ip())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",e.correlationId),e.postLogoutRedirectUri=to.getAbsoluteUrl(Ip(),Ip())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",e.correlationId),e}getLogoutHintFromIdTokenClaims(i){let e=i.idTokenClaims;if(e){if(e.login_hint)return e.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(i){return st(this,null,function*(){this.performanceClient.addQueueMeasurement(Je.StandardInteractionClientCreateAuthCodeClient,this.correlationId);let e=yield xi(this.getClientConfiguration.bind(this),Je.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(i);return new rS(e,this.performanceClient)})}getClientConfiguration(i){return st(this,null,function*(){let{serverTelemetryManager:e,requestAuthority:n,requestAzureCloudOptions:o,requestExtraQueryParameters:s,account:l}=i;this.performanceClient.addQueueMeasurement(Je.StandardInteractionClientGetClientConfiguration,this.correlationId);let h=yield xi(this.getDiscoveredAuthority.bind(this),Je.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:n,requestAzureCloudOptions:o,requestExtraQueryParameters:s,account:l}),p=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:h,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:p.loggerCallback,piiLoggingEnabled:p.piiLoggingEnabled,logLevel:p.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:e,libraryInfo:{sku:kc.MSAL_SKU,version:Fg,cpu:qt.EMPTY_STRING,os:qt.EMPTY_STRING},telemetry:this.config.telemetry}})}initializeAuthorizationRequest(i,e){return st(this,null,function*(){this.performanceClient.addQueueMeasurement(Je.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);let n=this.getRedirectUri(i.redirectUri),o={interactionType:e},s=bd.setRequestState(this.browserCrypto,i&&i.state||qt.EMPTY_STRING,o),l=yield xi(eP,Je.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(li(Xe({},i),{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),h=li(Xe({},l),{redirectUri:n,state:s,nonce:i.nonce||fu(),responseMode:this.config.auth.OIDCOptions.serverResponseType});if(i.loginHint||i.sid)return h;let p=i.account||this.browserStorage.getActiveAccount(this.correlationId);if(p&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${p.homeAccountId}`,this.correlationId),h.account=p),!h.loginHint&&!p){let m=this.browserStorage.getLegacyLoginHint();m&&(h.loginHint=m)}return h})}};var Xme="ContentError",xB="user_switch";var Jme="USER_INTERACTION_REQUIRED",efe="USER_CANCEL",tfe="NO_NETWORK",ife="PERSISTENT_ERROR",nfe="DISABLED",rfe="ACCOUNT_UNAVAILABLE";var xVe=-2147186943,SVe={[xB]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."},uf=class r extends eo{constructor(i,e,n){super(i,e),Object.setPrototypeOf(this,r.prototype),this.name="NativeAuthError",this.ext=n}};function Jw(r){if(r.ext&&r.ext.status&&(r.ext.status===ife||r.ext.status===nfe)||r.ext&&r.ext.error&&r.ext.error===xVe)return!0;switch(r.errorCode){case Xme:return!0;default:return!1}}function tP(r,i,e){if(e&&e.status)switch(e.status){case rfe:return kA(av.nativeAccountUnavailable);case Jme:return new Wc(r,i);case efe:return qi(Sp);case tfe:return qi(lv)}return new uf(r,SVe[r]||i,e)}var uE=class extends Ap{acquireToken(i){return st(this,null,function*(){this.performanceClient.addQueueMeasurement(Je.SilentCacheClientAcquireToken,i.correlationId);let e=this.initializeServerTelemetryManager(ds.acquireTokenSilent_silentFlow),n=yield xi(this.getClientConfiguration.bind(this),Je.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,account:i.account}),o=new qO(n,this.performanceClient);this.logger.verbose("Silent auth client created");try{let l=(yield xi(o.acquireCachedToken.bind(o),Je.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,i.correlationId)(i))[0];return this.performanceClient.addFields({fromCache:!0},i.correlationId),l}catch(s){throw s instanceof cS&&s.errorCode===Kw&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),s}})}logout(i){this.logger.verbose("logoutRedirect called");let e=this.initializeLogoutRequest(i);return this.clearCacheOnLogout(e?.account)}};var hf=class extends dE{constructor(i,e,n,o,s,l,h,p,m,f,g,y){super(i,e,n,o,s,l,p,m,y),this.apiId=h,this.accountId=f,this.nativeMessageHandler=m,this.nativeStorageManager=g,this.silentCacheClient=new uE(i,this.nativeStorageManager,n,o,s,l,p,m,y),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);let _=this.nativeMessageHandler.getExtensionId()===Qw.PREFERRED_EXTENSION_ID?"chrome":this.nativeMessageHandler.getExtensionId()?.length?"unknown":void 0;this.skus=oS.makeExtraSkuString({libraryName:kc.MSAL_SKU,libraryVersion:Fg,extensionName:_,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(i){i.extraParameters=li(Xe({},i.extraParameters),{[sv.X_CLIENT_EXTRA_SKU]:this.skus})}acquireToken(i){return st(this,null,function*(){this.performanceClient.addQueueMeasurement(Je.NativeInteractionClientAcquireToken,i.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");let e=this.performanceClient.startMeasurement(Je.NativeInteractionClientAcquireToken,i.correlationId),n=MO.nowSeconds();try{let o=yield this.initializeNativeRequest(i);try{let m=yield this.acquireTokensFromCache(this.accountId,o);return e.end({success:!0,isNativeBroker:!1,fromCache:!0}),m}catch{this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}let s=sm(o,[]),l={method:dv.GetToken,request:s},h=yield this.nativeMessageHandler.sendMessage(l),p=this.validateNativeResponse(h);return yield this.handleNativeResponse(p,o,n).then(m=>(e.end({success:!0,isNativeBroker:!0,requestId:m.requestId}),this.serverTelemetryManager.clearNativeBrokerErrorCode(),m)).catch(m=>{throw e.end({success:!1,errorCode:m.errorCode,subErrorCode:m.subError,isNativeBroker:!0}),m})}catch(o){throw o instanceof uf&&this.serverTelemetryManager.setNativeBrokerErrorCode(o.errorCode),o}})}createSilentCacheRequest(i,e){return{authority:i.authority,correlationId:this.correlationId,scopes:gl.fromString(i.scope).asArray(),account:e,forceRefresh:!1}}acquireTokensFromCache(i,e){return st(this,null,function*(){if(!i)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),di(yd.noAccountFound);let n=this.browserStorage.getBaseAccountInfo({nativeAccountId:i},e.correlationId);if(!n)throw di(yd.noAccountFound);try{let o=this.createSilentCacheRequest(e,n),s=yield this.silentCacheClient.acquireToken(o),l=li(Xe({},n),{idTokenClaims:s?.idTokenClaims,idToken:s?.idToken});return li(Xe({},s),{account:l})}catch(o){throw o}})}acquireTokenRedirect(i,e){return st(this,null,function*(){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");let n=sm(i,[]);delete n.onRedirectNavigate;let o=yield this.initializeNativeRequest(n),s={method:dv.GetToken,request:o};try{let p=yield this.nativeMessageHandler.sendMessage(s);this.validateNativeResponse(p)}catch(p){if(p instanceof uf&&(this.serverTelemetryManager.setNativeBrokerErrorCode(p.errorCode),Jw(p)))throw p}this.browserStorage.setTemporaryCache(os.NATIVE_REQUEST,JSON.stringify(o),!0);let l={apiId:ds.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},h=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(i.redirectUri);e.end({success:!0}),yield this.navigationClient.navigateExternal(h,l)})}handleRedirectPromise(i,e){return st(this,null,function*(){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let n=this.browserStorage.getCachedNativeRequest();if(!n)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),i&&e&&i?.addFields({errorCode:"no_cached_request"},e),null;let p=n,{prompt:o}=p,s=sm(p,["prompt"]);o&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(os.NATIVE_REQUEST));let l={method:dv.GetToken,request:s},h=MO.nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");let m=yield this.nativeMessageHandler.sendMessage(l);this.validateNativeResponse(m);let f=this.handleNativeResponse(m,s,h);this.browserStorage.setInteractionInProgress(!1);let g=yield f;return this.serverTelemetryManager.clearNativeBrokerErrorCode(),g}catch(m){throw this.browserStorage.setInteractionInProgress(!1),m}})}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(i,e,n){return st(this,null,function*(){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");let o=jw.extractTokenClaims(i.id_token,Tp),s=this.createHomeAccountIdentifier(i,o),l=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:e.accountId},this.correlationId)?.homeAccountId;if(s!==l&&i.account.id!==e.accountId)throw tP(xB);let h=yield this.getDiscoveredAuthority({requestAuthority:e.authority}),p=OA(this.browserStorage,h,s,Tp,this.correlationId,o,i.client_info,void 0,o.tid,void 0,i.account.id,this.logger),m=yield this.generateAuthenticationResult(i,e,o,p,h.canonicalAuthority,n);return this.cacheAccount(p),this.cacheNativeTokens(i,e,s,o,i.access_token,m.tenantId,n),m})}createHomeAccountIdentifier(i,e){return rl.generateHomeAccountId(i.client_info||qt.EMPTY_STRING,Kh.Default,this.logger,this.browserCrypto,e)}generateScopes(i,e){return i.scope?gl.fromString(i.scope):gl.fromString(e.scope)}generatePopAccessToken(i,e){return st(this,null,function*(){if(e.tokenType===Po.POP&&e.signPopToken){if(i.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),i.shr;let n=new wm(this.browserCrypto),o={resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,shrNonce:e.shrNonce};if(!e.keyId)throw di(yd.keyIdMissing);return n.signPopToken(i.access_token,e.keyId,o)}else return i.access_token})}generateAuthenticationResult(i,e,n,o,s,l){return st(this,null,function*(){let h=this.addTelemetryFromNativeResponse(i),p=i.scope?gl.fromString(i.scope):gl.fromString(e.scope),m=i.account.properties||{},f=m.UID||n.oid||n.sub||qt.EMPTY_STRING,g=m.TenantId||n.tid||qt.EMPTY_STRING,y=nS(o.getAccountInfo(),void 0,n,i.id_token);y.nativeAccountId!==i.account.id&&(y.nativeAccountId=i.account.id);let _=yield this.generatePopAccessToken(i,e),w=e.tokenType===Po.POP?Po.POP:Po.BEARER;return{authority:s,uniqueId:f,tenantId:g,scopes:p.asArray(),account:y,idToken:i.id_token,idTokenClaims:n,accessToken:_,fromCache:h?this.isResponseFromCache(h):!1,expiresOn:new Date(Number(l+i.expires_in)*1e3),tokenType:w,correlationId:this.correlationId,state:i.state,fromNativeBroker:!0}})}cacheAccount(i){this.browserStorage.setAccount(i,this.correlationId),this.browserStorage.removeAccountContext(i,this.correlationId).catch(e=>{this.logger.error(`Error occurred while removing account context from browser storage. ${e}`)})}cacheNativeTokens(i,e,n,o,s,l,h){let p=Ya.createIdTokenEntity(n,e.authority,i.id_token||"",e.clientId,o.tid||""),m=e.tokenType===Po.POP?qt.SHR_NONCE_VALIDITY:(typeof i.expires_in=="string"?parseInt(i.expires_in,10):i.expires_in)||0,f=h+m,g=this.generateScopes(i,e),y=Ya.createAccessTokenEntity(n,e.authority,s,e.clientId,o.tid||l,g.printScopes(),f,0,Tp,void 0,e.tokenType,void 0,e.keyId),_={idToken:p,accessToken:y};this.nativeStorageManager.saveCacheRecord(_,e.correlationId,e.storeInCache)}addTelemetryFromNativeResponse(i){let e=this.getMATSFromResponse(i);return e?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:e.broker_version,matsAccountJoinOnStart:e.account_join_on_start,matsAccountJoinOnEnd:e.account_join_on_end,matsDeviceJoin:e.device_join,matsPromptBehavior:e.prompt_behavior,matsApiErrorCode:e.api_error_code,matsUiVisible:e.ui_visible,matsSilentCode:e.silent_code,matsSilentBiSubCode:e.silent_bi_sub_code,matsSilentMessage:e.silent_message,matsSilentStatus:e.silent_status,matsHttpStatus:e.http_status,matsHttpEventCount:e.http_event_count},this.correlationId),e):null}validateNativeResponse(i){if(i.hasOwnProperty("access_token")&&i.hasOwnProperty("id_token")&&i.hasOwnProperty("client_info")&&i.hasOwnProperty("account")&&i.hasOwnProperty("scope")&&i.hasOwnProperty("expires_in"))return i;throw hO(Ex.unexpectedError,"Response missing expected properties.")}getMATSFromResponse(i){if(i.properties.MATS)try{return JSON.parse(i.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(i){return typeof i.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!i.is_cached}initializeNativeRequest(i){return st(this,null,function*(){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");let e=i.authority||this.config.auth.authority;i.account&&(yield this.getDiscoveredAuthority({requestAuthority:e,requestAzureCloudOptions:i.azureCloudOptions,account:i.account}));let n=new to(e);n.validateAsUri();let m=i,{scopes:o}=m,s=sm(m,["scopes"]),l=new gl(o||[]);l.appendScopes(ym);let h=()=>{switch(this.apiId){case ds.ssoSilent:case ds.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),fl.NONE}if(!i.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(i.prompt){case fl.NONE:case fl.CONSENT:case fl.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),i.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${i.prompt} is not compatible with native flow`),qi(rE)}},p=li(Xe({},s),{accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:l.printScopes(),redirectUri:this.getRedirectUri(i.redirectUri),prompt:h(),correlationId:this.correlationId,tokenType:i.authenticationScheme,windowTitleSubstring:document.title,extraParameters:Xe(Xe({},i.extraQueryParameters),i.tokenQueryParameters),extendedExpiryToken:!1,keyId:i.popKid});if(p.signPopToken&&i.popKid)throw qi(sE);if(this.handleExtraBrokerParams(p),p.extraParameters=p.extraParameters||{},p.extraParameters.telemetry=Qw.MATS_TELEMETRY,i.authenticationScheme===Po.POP){let f={resourceRequestUri:i.resourceRequestUri,resourceRequestMethod:i.resourceRequestMethod,shrClaims:i.shrClaims,shrNonce:i.shrNonce},g=new wm(this.browserCrypto),y;if(p.keyId)y=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:p.keyId})),p.signPopToken=!1;else{let _=yield xi(g.generateCnf.bind(g),Je.PopTokenGenerateCnf,this.logger,this.performanceClient,i.correlationId)(f,this.logger);y=_.reqCnfString,p.keyId=_.kid,p.signPopToken=!0}p.reqCnf=y}return this.addRequestSKUs(p),p})}handleExtraBrokerParams(i){let e=i.extraParameters&&i.extraParameters.hasOwnProperty(sv.BROKER_CLIENT_ID)&&i.extraParameters.hasOwnProperty(sv.BROKER_REDIRECT_URI)&&i.extraParameters.hasOwnProperty(sv.CLIENT_ID);if(!i.embeddedClientId&&!e)return;let n="",o=i.redirectUri;i.embeddedClientId?(i.redirectUri=this.config.auth.redirectUri,n=i.embeddedClientId):i.extraParameters&&(i.redirectUri=i.extraParameters[sv.BROKER_REDIRECT_URI],n=i.extraParameters[sv.CLIENT_ID]),i.extraParameters={child_client_id:n,child_redirect_uri:o},this.performanceClient?.addFields({embeddedClientId:n,embeddedRedirectUri:o},i.correlationId)}};var xm=class r{constructor(i,e,n,o){this.logger=i,this.handshakeTimeoutMs=e,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=n,this.handshakeEvent=n.startMeasurement(Je.NativeMessageHandlerHandshake)}sendMessage(i){return st(this,null,function*(){this.logger.trace("NativeMessageHandler - sendMessage called.");let e={channel:Qw.CHANNEL_ID,extensionId:this.extensionId,responseId:fu(),body:i};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(e)}`),this.messageChannel.port1.postMessage(e),new Promise((n,o)=>{this.resolvers.set(e.responseId,{resolve:n,reject:o})})})}static createProvider(i,e,n){return st(this,null,function*(){i.trace("NativeMessageHandler - createProvider called.");try{let o=new r(i,e,n,Qw.PREFERRED_EXTENSION_ID);return yield o.sendHandshakeRequest(),o}catch{let s=new r(i,e,n);return yield s.sendHandshakeRequest(),s}})}sendHandshakeRequest(){return st(this,null,function*(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);let i={channel:Qw.CHANNEL_ID,extensionId:this.extensionId,responseId:fu(),body:{method:dv.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=e=>{this.onChannelMessage(e)},window.postMessage(i,window.origin,[this.messageChannel.port2]),new Promise((e,n)=>{this.handshakeResolvers.set(i.responseId,{resolve:e,reject:n}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),n(qi(tE)),this.handshakeResolvers.delete(i.responseId)},this.handshakeTimeoutMs)})})}onWindowMessage(i){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),i.source!==window)return;let e=i.data;if(!(!e.channel||e.channel!==Qw.CHANNEL_ID)&&!(e.extensionId&&e.extensionId!==this.extensionId)&&e.body.method===dv.HandshakeRequest){let n=this.handshakeResolvers.get(e.responseId);if(!n){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${e.responseId}`);return}this.logger.verbose(e.extensionId?`Extension with id: ${e.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),n.reject(qi(iE))}}onChannelMessage(i){this.logger.trace("NativeMessageHandler - onChannelMessage called.");let e=i.data,n=this.resolvers.get(e.responseId),o=this.handshakeResolvers.get(e.responseId);try{let s=e.body.method;if(s===dv.Response){if(!n)return;let l=e.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(l)}`),l.status!=="Success")n.reject(tP(l.code,l.description,l.ext));else if(l.result)l.result.code&&l.result.description?n.reject(tP(l.result.code,l.result.description,l.result.ext)):n.resolve(l.result);else throw hO(Ex.unexpectedError,"Event does not contain result.");this.resolvers.delete(e.responseId)}else if(s===dv.HandshakeResponse){if(!o){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${e.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=e.extensionId,this.extensionVersion=e.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(e.responseId)}}catch(s){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${s}`),this.logger.errorPii(`Unable to parse ${i}`),n?n.reject(s):o&&o.reject(s)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(i,e,n,o){if(e.trace("isNativeAvailable called"),!i.system.allowNativeBroker)return e.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!n)return e.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(o)switch(o){case Po.BEARER:case Po.POP:return e.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return e.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}};var e1=class{constructor(i,e,n,o,s){this.authModule=i,this.browserStorage=e,this.authCodeRequest=n,this.logger=o,this.performanceClient=s}handleCodeResponse(i,e){return st(this,null,function*(){this.performanceClient.addQueueMeasurement(Je.HandleCodeResponse,e.correlationId);let n;try{n=this.authModule.handleFragmentResponse(i,e.state)}catch(o){throw o instanceof Zh&&o.subError===Sp?qi(Sp):o}return xi(this.handleCodeResponseFromServer.bind(this),Je.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)(n,e)})}handleCodeResponseFromServer(i,e,n=!0){return st(this,null,function*(){if(this.performanceClient.addQueueMeasurement(Je.HandleCodeResponseFromServer,e.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=i.code,i.cloud_instance_host_name&&(yield xi(this.authModule.updateAuthority.bind(this.authModule),Je.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,e.correlationId)(i.cloud_instance_host_name,e.correlationId)),n&&(i.nonce=e.nonce||void 0),i.state=e.state,i.client_info)this.authCodeRequest.clientInfo=i.client_info;else{let s=this.createCcsCredentials(e);s&&(this.authCodeRequest.ccsCredential=s)}return yield xi(this.authModule.acquireToken.bind(this.authModule),Je.AuthClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(this.authCodeRequest,i)})}createCcsCredentials(i){return i.account?{credential:i.account.homeAccountId,type:vd.HOME_ACCOUNT_ID}:i.loginHint?{credential:i.loginHint,type:vd.UPN}:null}};function SB(r,i,e){let n=$w.getDeserializedResponse(r);if(!n)throw $w.stripLeadingHashOrQuery(r)?(e.error(`A ${i} is present in the iframe but it does not contain known properties. It's likely that the ${i} has been replaced by code running on the redirectUri page.`),e.errorPii(`The ${i} detected is: ${r}`),qi(FA)):(e.error(`The request has returned to the redirectUri but a ${i} is not present. It's likely that the ${i} has been removed or the page has been redirected by code running on the redirectUri page.`),qi(RA));return n}function ofe(r,i,e){if(!r.state)throw qi(qw);let n=bB(i,r.state);if(!n)throw qi(LA);if(n.interactionType!==e)throw qi(NA)}var IB=class extends Ap{constructor(i,e,n,o,s,l,h,p,m,f){super(i,e,n,o,s,l,h,m,f),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=p}acquireToken(i){try{let n={popupName:this.generatePopupName(i.scopes||ym,i.authority||this.config.auth.authority),popupWindowAttributes:i.popupWindowAttributes||{},popupWindowParent:i.popupWindowParent??window};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(i,n)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),n.popup=this.openSizedPopup("about:blank",n),this.acquireTokenPopupAsync(i,n))}catch(e){return Promise.reject(e)}}logout(i){try{this.logger.verbose("logoutPopup called");let e=this.initializeLogoutRequest(i),n={popupName:this.generateLogoutPopupName(e),popupWindowAttributes:i?.popupWindowAttributes||{},popupWindowParent:i?.popupWindowParent??window},o=i&&i.authority,s=i&&i.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(e,n,o,s)):(this.logger.verbose("asyncPopup set to false, opening popup"),n.popup=this.openSizedPopup("about:blank",n),this.logoutPopupAsync(e,n,o,s))}catch(e){return Promise.reject(e)}}acquireTokenPopupAsync(i,e){return st(this,null,function*(){this.logger.verbose("acquireTokenPopupAsync called");let n=this.initializeServerTelemetryManager(ds.acquireTokenPopup),o=yield xi(this.initializeAuthorizationRequest.bind(this),Je.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(i,Cn.Popup);uB(o.authority);try{let s=yield xi(this.initializeAuthorizationCodeRequest.bind(this),Je.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(o),l=yield xi(this.createAuthCodeClient.bind(this),Je.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),h=xm.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,i.authenticationScheme),p;h&&(p=this.performanceClient.startMeasurement(Je.FetchAccountIdWithNativeBroker,i.correlationId));let m=yield l.getAuthCodeUrl(li(Xe({},o),{nativeBroker:h})),f=new e1(l,this.browserStorage,s,this.logger,this.performanceClient),g=this.initiateAuthRequest(m,e);this.eventHandler.emitEvent(In.POPUP_OPENED,Cn.Popup,{popupWindow:g},null);let y=yield this.monitorPopupForHash(g,e.popupWindowParent),_=bm(SB,Je.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(y,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(f_.removeThrottle(this.browserStorage,this.config.auth.clientId,s),_.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),p&&p.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw qi(df);let A=new hf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ds.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,_.accountId,this.nativeStorage,o.correlationId),{userRequestState:k}=bd.parseRequestState(this.browserCrypto,o.state);return yield A.acquireToken(li(Xe({},o),{state:k,prompt:void 0}))}return yield f.handleCodeResponse(_,o)}catch(s){throw e.popup?.close(),s instanceof eo&&(s.setCorrelationId(this.correlationId),n.cacheFailedRequest(s)),s}})}logoutPopupAsync(i,e,n,o){return st(this,null,function*(){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(In.LOGOUT_START,Cn.Popup,i);let s=this.initializeServerTelemetryManager(ds.logoutPopup);try{yield this.clearCacheOnLogout(i.account);let l=yield xi(this.createAuthCodeClient.bind(this),Je.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:s,requestAuthority:n,account:i.account||void 0});try{l.authority.endSessionEndpoint}catch{if(i.account?.homeAccountId&&i.postLogoutRedirectUri&&l.authority.protocolMode===mu.OIDC){if(this.browserStorage.removeAccount(i.account?.homeAccountId,this.correlationId),this.eventHandler.emitEvent(In.LOGOUT_SUCCESS,Cn.Popup,i),o){let m={apiId:ds.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},f=to.getAbsoluteUrl(o,Ip());yield this.navigationClient.navigateInternal(f,m)}e.popup?.close();return}}let h=l.getLogoutUri(i);this.eventHandler.emitEvent(In.LOGOUT_SUCCESS,Cn.Popup,i);let p=this.openPopup(h,e);if(this.eventHandler.emitEvent(In.POPUP_OPENED,Cn.Popup,{popupWindow:p},null),yield this.monitorPopupForHash(p,e.popupWindowParent).catch(()=>{}),o){let m={apiId:ds.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},f=to.getAbsoluteUrl(o,Ip());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${f}`),yield this.navigationClient.navigateInternal(f,m)}else this.logger.verbose("No main window navigation requested")}catch(l){throw e.popup?.close(),l instanceof eo&&(l.setCorrelationId(this.correlationId),s.cacheFailedRequest(l)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(In.LOGOUT_FAILURE,Cn.Popup,null,l),this.eventHandler.emitEvent(In.LOGOUT_END,Cn.Popup),l}this.eventHandler.emitEvent(In.LOGOUT_END,Cn.Popup)})}initiateAuthRequest(i,e){if(i)return this.logger.infoPii(`Navigate to: ${i}`),this.openPopup(i,e);throw this.logger.error("Navigate url is empty"),qi(__)}monitorPopupForHash(i,e){return new Promise((n,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");let s=setInterval(()=>{if(i.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(s),o(qi(Sp));return}let l="";try{l=i.location.href}catch{}if(!l||l==="about:blank")return;clearInterval(s);let h="",p=this.config.auth.OIDCOptions.serverResponseType;i&&(p===kg.QUERY?h=i.location.search:h=i.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),n(h)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(i,e)})}openPopup(i,e){try{let n;if(e.popup?(n=e.popup,this.logger.verbosePii(`Navigating popup window to: ${i}`),n.location.assign(i)):typeof e.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${i}`),n=this.openSizedPopup(i,e)),!n)throw qi(VA);return n.focus&&n.focus(),this.currentWindow=n,e.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),n}catch(n){throw this.logger.error("error opening popup "+n.message),this.browserStorage.setInteractionInProgress(!1),qi(jA)}}openSizedPopup(i,{popupName:e,popupWindowAttributes:n,popupWindowParent:o}){let s=o.screenLeft?o.screenLeft:o.screenX,l=o.screenTop?o.screenTop:o.screenY,h=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,p=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,m=n.popupSize?.width,f=n.popupSize?.height,g=n.popupPosition?.top,y=n.popupPosition?.left;return(!m||m<0||m>h)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),m=kc.POPUP_WIDTH),(!f||f<0||f>p)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),f=kc.POPUP_HEIGHT),(!g||g<0||g>p)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),g=Math.max(0,p/2-kc.POPUP_HEIGHT/2+l)),(!y||y<0||y>h)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),y=Math.max(0,h/2-kc.POPUP_WIDTH/2+s)),o.open(i,e,`width=${m}, height=${f}, top=${g}, left=${y}, scrollbars=yes`)}unloadWindow(i){this.browserStorage.cleanRequestByInteractionType(Cn.Popup),this.currentWindow&&this.currentWindow.close(),i.preventDefault()}cleanPopup(i,e){i.close(),e.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(i,e){return`${kc.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${i.join("-")}.${e}.${this.correlationId}`}generateLogoutPopupName(i){let e=i.account&&i.account.homeAccountId;return`${kc.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e}.${this.correlationId}`}};var iP=class{constructor(i,e,n,o,s){this.authModule=i,this.browserStorage=e,this.authCodeRequest=n,this.logger=o,this.performanceClient=s}initiateAuthRequest(i,e){return st(this,null,function*(){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),i){e.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(os.ORIGIN_URI,e.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(os.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${i}`);let n={apiId:ds.acquireTokenRedirect,timeout:e.redirectTimeout,noHistory:!1};if(typeof e.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),e.onRedirectNavigate(i)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),yield e.navigationClient.navigateExternal(i,n);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),yield e.navigationClient.navigateExternal(i,n);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),qi(__)})}handleCodeResponse(i,e){return st(this,null,function*(){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);let n=this.browserStorage.generateStateKey(e),o=this.browserStorage.getTemporaryCache(n);if(!o)throw di(yd.stateNotFound,"Cached State");let s;try{s=this.authModule.handleFragmentResponse(i,o)}catch(m){throw m instanceof Zh&&m.subError===Sp?qi(Sp):m}let l=this.browserStorage.generateNonceKey(o),h=this.browserStorage.getTemporaryCache(l);if(this.authCodeRequest.code=s.code,s.cloud_instance_host_name&&(yield xi(this.authModule.updateAuthority.bind(this.authModule),Je.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(s.cloud_instance_host_name,this.authCodeRequest.correlationId)),s.nonce=h||void 0,s.state=o,s.client_info)this.authCodeRequest.clientInfo=s.client_info;else{let m=this.checkCcsCredentials();m&&(this.authCodeRequest.ccsCredential=m)}let p=yield this.authModule.acquireToken(this.authCodeRequest,s);return this.browserStorage.cleanRequestByState(e),p})}checkCcsCredentials(){let i=this.browserStorage.getTemporaryCache(os.CCS_CREDENTIAL,!0);if(i)try{return JSON.parse(i)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${i}`)}return null}};function IVe(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;let r=window.performance.getEntriesByType("navigation");return(r.length?r[0]:void 0)?.type}var TB=class extends Ap{constructor(i,e,n,o,s,l,h,p,m,f){super(i,e,n,o,s,l,h,m,f),this.nativeStorage=p}acquireToken(i){return st(this,null,function*(){let e=yield xi(this.initializeAuthorizationRequest.bind(this),Je.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(i,Cn.Redirect);this.browserStorage.updateCacheEntries(e.state,e.nonce,e.authority,e.loginHint||"",e.account||null);let n=this.initializeServerTelemetryManager(ds.acquireTokenRedirect),o=s=>{s.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(e.state),this.eventHandler.emitEvent(In.RESTORE_FROM_BFCACHE,Cn.Redirect))};try{let s=yield xi(this.initializeAuthorizationCodeRequest.bind(this),Je.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(e),l=yield xi(this.createAuthCodeClient.bind(this),Je.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),h=new iP(l,this.browserStorage,s,this.logger,this.performanceClient),p=yield l.getAuthCodeUrl(li(Xe({},e),{nativeBroker:xm.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,i.authenticationScheme)})),m=this.getRedirectStartPage(i.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${m}`),window.addEventListener("pageshow",o),yield h.initiateAuthRequest(p,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:m,onRedirectNavigate:i.onRedirectNavigate||this.config.auth.onRedirectNavigate})}catch(s){throw s instanceof eo&&(s.setCorrelationId(this.correlationId),n.cacheFailedRequest(s)),window.removeEventListener("pageshow",o),this.browserStorage.cleanRequestByState(e.state),s}})}handleRedirectPromise(i="",e){return st(this,null,function*(){let n=this.initializeServerTelemetryManager(ds.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let[o,s]=this.getRedirectResponse(i||"");if(!o)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(Cn.Redirect),IVe()!=="back_forward"?e.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;let l=this.browserStorage.getTemporaryCache(os.ORIGIN_URI,!0)||qt.EMPTY_STRING,h=to.removeHashFromUrl(l),p=to.removeHashFromUrl(window.location.href);if(h===p&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),l.indexOf("#")>-1&&Pme(l),yield this.handleResponse(o,n);if(this.config.auth.navigateToLoginRequestUrl){if(!cB()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(os.URL_HASH,s,!0);let m={apiId:ds.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0},f=!0;if(!l||l==="null"){let g=Rme();this.browserStorage.setTemporaryCache(os.ORIGIN_URI,g,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),f=yield this.navigationClient.navigateInternal(g,m)}else this.logger.verbose(`Navigating to loginRequestUrl: ${l}`),f=yield this.navigationClient.navigateInternal(l,m);if(!f)return yield this.handleResponse(o,n)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield this.handleResponse(o,n);return null}catch(o){throw o instanceof eo&&(o.setCorrelationId(this.correlationId),n.cacheFailedRequest(o)),this.browserStorage.cleanRequestByInteractionType(Cn.Redirect),o}})}getRedirectResponse(i){this.logger.verbose("getRedirectResponseHash called");let e=i;e||(this.config.auth.OIDCOptions.serverResponseType===kg.QUERY?e=window.location.search:e=window.location.hash);let n=$w.getDeserializedResponse(e);if(n){try{ofe(n,this.browserCrypto,Cn.Redirect)}catch(s){return s instanceof eo&&this.logger.error(`Interaction type validation failed due to ${s.errorCode}: ${s.errorMessage}`),[null,""]}return Ome(window),this.logger.verbose("Hash contains known properties, returning response hash"),[n,e]}let o=this.browserStorage.getTemporaryCache(os.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(os.URL_HASH)),o&&(n=$w.getDeserializedResponse(o),n)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[n,o]):[null,""]}handleResponse(i,e){return st(this,null,function*(){let n=i.state;if(!n)throw qi(qw);let o=this.browserStorage.getCachedRequest(n);if(this.logger.verbose("handleResponse called, retrieved cached request"),i.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw qi(df);let p=new hf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ds.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,i.accountId,this.nativeStorage,o.correlationId),{userRequestState:m}=bd.parseRequestState(this.browserCrypto,n);return p.acquireToken(li(Xe({},o),{state:m,prompt:void 0})).finally(()=>{this.browserStorage.cleanRequestByState(n)})}let s=this.browserStorage.getCachedAuthority(n);if(!s)throw qi(Yw);let l=yield xi(this.createAuthCodeClient.bind(this),Je.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e,requestAuthority:s});return f_.removeThrottle(this.browserStorage,this.config.auth.clientId,o),new iP(l,this.browserStorage,o,this.logger,this.performanceClient).handleCodeResponse(i,n)})}logout(i){return st(this,null,function*(){this.logger.verbose("logoutRedirect called");let e=this.initializeLogoutRequest(i),n=this.initializeServerTelemetryManager(ds.logout);try{this.eventHandler.emitEvent(In.LOGOUT_START,Cn.Redirect,i),yield this.clearCacheOnLogout(e.account);let o={apiId:ds.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},s=yield xi(this.createAuthCodeClient.bind(this),Je.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:i&&i.authority,requestExtraQueryParameters:i?.extraQueryParameters,account:i&&i.account||void 0});if(s.authority.protocolMode===mu.OIDC)try{s.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId){this.browserStorage.removeAccount(e.account?.homeAccountId,this.correlationId),this.eventHandler.emitEvent(In.LOGOUT_SUCCESS,Cn.Redirect,e);return}}let l=s.getLogoutUri(e);if(this.eventHandler.emitEvent(In.LOGOUT_SUCCESS,Cn.Redirect,e),i&&typeof i.onRedirectNavigate=="function")if(i.onRedirectNavigate(l)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),yield this.navigationClient.navigateExternal(l,o);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),yield this.navigationClient.navigateExternal(l,o);return}}catch(o){throw o instanceof eo&&(o.setCorrelationId(this.correlationId),n.cacheFailedRequest(o)),this.eventHandler.emitEvent(In.LOGOUT_FAILURE,Cn.Redirect,null,o),this.eventHandler.emitEvent(In.LOGOUT_END,Cn.Redirect),o}this.eventHandler.emitEvent(In.LOGOUT_END,Cn.Redirect)})}getRedirectStartPage(i){let e=i||window.location.href;return to.getAbsoluteUrl(e,Ip())}};function sfe(r,i,e,n,o){return st(this,null,function*(){if(i.addQueueMeasurement(Je.SilentHandlerInitiateAuthRequest,n),!r)throw e.info("Navigate url is empty"),qi(__);return o?xi(TVe,Je.SilentHandlerLoadFrame,e,i,n)(r,o,i,n):bm(AVe,Je.SilentHandlerLoadFrameSync,e,i,n)(r)})}function afe(r,i,e,n,o,s,l){return st(this,null,function*(){return n.addQueueMeasurement(Je.SilentHandlerMonitorIframeForHash,s),new Promise((h,p)=>{i<pB&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${i}ms) than the default (${pB}ms). This may result in timeouts.`);let m=window.setTimeout(()=>{window.clearInterval(f),p(qi($A))},i),f=window.setInterval(()=>{let g="",y=r.contentWindow;try{g=y?y.location.href:""}catch{}if(!g||g==="about:blank")return;let _="";y&&(l===kg.QUERY?_=y.location.search:_=y.location.hash),window.clearTimeout(m),window.clearInterval(f),h(_)},e)}).finally(()=>{bm(EVe,Je.RemoveHiddenIframe,o,n,s)(r)})})}function TVe(r,i,e,n){return e.addQueueMeasurement(Je.SilentHandlerLoadFrame,n),new Promise((o,s)=>{let l=lfe();window.setTimeout(()=>{if(!l){s("Unable to load iframe");return}l.src=r,o(l)},i)})}function AVe(r){let i=lfe();return i.src=r,i}function lfe(){let r=document.createElement("iframe");return r.className="msalSilentIframe",r.style.visibility="hidden",r.style.position="absolute",r.style.width=r.style.height="0",r.style.border="0",r.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(r),r}function EVe(r){document.body===r.parentNode&&document.body.removeChild(r)}var AB=class extends Ap{constructor(i,e,n,o,s,l,h,p,m,f,g){super(i,e,n,o,s,l,p,f,g),this.apiId=h,this.nativeStorage=m}acquireToken(i){return st(this,null,function*(){this.performanceClient.addQueueMeasurement(Je.SilentIframeClientAcquireToken,i.correlationId),!i.loginHint&&!i.sid&&(!i.account||!i.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");let e=Xe({},i);e.prompt?e.prompt!==fl.NONE&&e.prompt!==fl.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${e.prompt} with ${fl.NONE}`),e.prompt=fl.NONE):e.prompt=fl.NONE;let n=yield xi(this.initializeAuthorizationRequest.bind(this),Je.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,i.correlationId)(e,Cn.Silent);uB(n.authority);let o=this.initializeServerTelemetryManager(this.apiId),s;try{return s=yield xi(this.createAuthCodeClient.bind(this),Je.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,i.correlationId)({serverTelemetryManager:o,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),yield xi(this.silentTokenHelper.bind(this),Je.SilentIframeClientTokenHelper,this.logger,this.performanceClient,i.correlationId)(s,n)}catch(l){if(l instanceof eo&&(l.setCorrelationId(this.correlationId),o.cacheFailedRequest(l)),!s||!(l instanceof eo)||l.errorCode!==kc.INVALID_GRANT_ERROR)throw l;this.performanceClient.addFields({retryError:l.errorCode},this.correlationId);let h=yield xi(this.initializeAuthorizationRequest.bind(this),Je.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,i.correlationId)(e,Cn.Silent);return yield xi(this.silentTokenHelper.bind(this),Je.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(s,h)}})}logout(){return Promise.reject(qi(y_))}silentTokenHelper(i,e){return st(this,null,function*(){let n=e.correlationId;this.performanceClient.addQueueMeasurement(Je.SilentIframeClientTokenHelper,n);let o=yield xi(this.initializeAuthorizationCodeRequest.bind(this),Je.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,n)(e),s=yield xi(i.getAuthCodeUrl.bind(i),Je.GetAuthCodeUrl,this.logger,this.performanceClient,n)(li(Xe({},e),{nativeBroker:xm.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)})),l=new e1(i,this.browserStorage,o,this.logger,this.performanceClient),h=yield xi(sfe,Je.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,n)(s,this.performanceClient,this.logger,n,this.config.system.navigateFrameWait),p=this.config.auth.OIDCOptions.serverResponseType,m=yield xi(afe,Je.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,n)(h,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,p),f=bm(SB,Je.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(m,p,this.logger);if(f.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw qi(df);let g=new hf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,f.accountId,this.browserStorage,n),{userRequestState:y}=bd.parseRequestState(this.browserCrypto,e.state);return xi(g.acquireToken.bind(g),Je.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,n)(li(Xe({},e),{state:y,prompt:e.prompt||fl.NONE}))}return xi(l.handleCodeResponse.bind(l),Je.HandleCodeResponse,this.logger,this.performanceClient,n)(f,e)})}};var EB=class extends Ap{acquireToken(i){return st(this,null,function*(){this.performanceClient.addQueueMeasurement(Je.SilentRefreshClientAcquireToken,i.correlationId);let e=yield xi(eP,Je.InitializeBaseRequest,this.logger,this.performanceClient,i.correlationId)(i,this.config,this.performanceClient,this.logger),n=Xe(Xe({},i),e);i.redirectUri&&(n.redirectUri=this.getRedirectUri(i.redirectUri));let o=this.initializeServerTelemetryManager(ds.acquireTokenSilent_silentFlow),s=yield this.createRefreshTokenClient({serverTelemetryManager:o,authorityUrl:n.authority,azureCloudOptions:n.azureCloudOptions,account:n.account});return xi(s.acquireTokenByRefreshToken.bind(s),Je.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,i.correlationId)(n).catch(l=>{throw l.setCorrelationId(this.correlationId),o.cacheFailedRequest(l),l})})}logout(){return Promise.reject(qi(y_))}createRefreshTokenClient(i){return st(this,null,function*(){let e=yield xi(this.getClientConfiguration.bind(this),Je.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i.serverTelemetryManager,requestAuthority:i.authorityUrl,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account});return new Ww(e,this.performanceClient)})}};var MB=class{constructor(i,e,n,o){this.isBrowserEnvironment=typeof window<"u",this.config=i,this.storage=e,this.logger=n,this.cryptoObj=o}loadExternalTokens(i,e,n){if(!this.isBrowserEnvironment)throw qi(v_);let o=i.correlationId||fu(),s=e.id_token?jw.extractTokenClaims(e.id_token,Tp):void 0,l={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},h=i.authority?new cf(cf.generateAuthority(i.authority,i.azureCloudOptions),this.config.system.networkClient,this.storage,l,this.logger,i.correlationId||fu()):void 0,p=this.loadAccount(i,n.clientInfo||e.client_info||"",o,s,h),m=this.loadIdToken(e,p.homeAccountId,p.environment,p.realm,o),f=this.loadAccessToken(i,e,p.homeAccountId,p.environment,p.realm,n,o),g=this.loadRefreshToken(e,p.homeAccountId,p.environment,o);return this.generateAuthenticationResult(i,{account:p,idToken:m,accessToken:f,refreshToken:g},s,h)}loadAccount(i,e,n,o,s){if(this.logger.verbose("TokenCache - loading account"),i.account){let m=rl.createFromAccountInfo(i.account);return this.storage.setAccount(m,n),m}else if(!s||!e&&!o)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),qi(ZA);let l=rl.generateHomeAccountId(e,s.authorityType,this.logger,this.cryptoObj,o),h=o?.tid,p=OA(this.storage,s,l,Tp,n,o,e,s.hostnameAndPort,h,void 0,void 0,this.logger);return this.storage.setAccount(p,n),p}loadIdToken(i,e,n,o,s){if(!i.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");let l=Ya.createIdTokenEntity(e,n,i.id_token,this.config.auth.clientId,o);return this.storage.setIdTokenCredential(l,s),l}loadAccessToken(i,e,n,o,s,l,h){if(e.access_token)if(e.expires_in){if(!e.scope&&(!i.scopes||!i.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");let p=e.scope?gl.fromString(e.scope):new gl(i.scopes),m=l.expiresOn||e.expires_in+new Date().getTime()/1e3,f=l.extendedExpiresOn||(e.ext_expires_in||e.expires_in)+new Date().getTime()/1e3,g=Ya.createAccessTokenEntity(n,o,e.access_token,this.config.auth.clientId,s,p.printScopes(),m,f,Tp);return this.storage.setAccessTokenCredential(g,h),g}loadRefreshToken(i,e,n,o){if(!i.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");let s=Ya.createRefreshTokenEntity(e,n,i.refresh_token,this.config.auth.clientId,i.foci,void 0,i.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(s,o),s}generateAuthenticationResult(i,e,n,o){let s="",l=[],h=null,p;e?.accessToken&&(s=e.accessToken.secret,l=gl.fromString(e.accessToken.target).asArray(),h=new Date(Number(e.accessToken.expiresOn)*1e3),p=new Date(Number(e.accessToken.extendedExpiresOn)*1e3));let m=e.account;return{authority:o?o.canonicalAuthority:"",uniqueId:e.account.localAccountId,tenantId:e.account.realm,scopes:l,account:m.getAccountInfo(),idToken:e.idToken?.secret||"",idTokenClaims:n||{},accessToken:s,fromCache:!0,expiresOn:h,correlationId:i.correlationId||"",requestId:"",extExpiresOn:p,familyId:e.refreshToken?.familyId||"",tokenType:e?.accessToken?.tokenType||"",state:i.state||"",cloudGraphHostName:m.cloudGraphHostName||"",msGraphHost:m.msGraphHost||"",fromNativeBroker:!1}}};var DB=class extends rS{constructor(i){super(i),this.includeRedirectUri=!1}};var kB=class extends Ap{constructor(i,e,n,o,s,l,h,p,m,f){super(i,e,n,o,s,l,p,m,f),this.apiId=h}acquireToken(i){return st(this,null,function*(){if(!i.code)throw qi(QA);let e=yield xi(this.initializeAuthorizationRequest.bind(this),Je.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,i.correlationId)(i,Cn.Silent),n=this.initializeServerTelemetryManager(this.apiId);try{let o=li(Xe({},e),{code:i.code}),s=yield xi(this.getClientConfiguration.bind(this),Je.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,i.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),l=new DB(s);this.logger.verbose("Auth code client created");let h=new e1(l,this.browserStorage,o,this.logger,this.performanceClient);return yield xi(h.handleCodeResponseFromServer.bind(h),Je.HandleCodeResponseFromServer,this.logger,this.performanceClient,i.correlationId)({code:i.code,msgraph_host:i.msGraphHost,cloud_graph_host_name:i.cloudGraphHostName,cloud_instance_host_name:i.cloudInstanceHostName},e,!1)}catch(o){throw o instanceof eo&&(o.setCorrelationId(this.correlationId),n.cacheFailedRequest(o)),o}})}logout(){return Promise.reject(qi(y_))}};function w_(r){let i=r?.idTokenClaims;if(i?.tfp||i?.acr)return"B2C";if(i?.tid){if(i?.tid==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function OB(r,i){try{dB(r)}catch(e){throw i.end({success:!1},e),e}}var hE=class r{constructor(i){this.operatingContext=i,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=i.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new $me(this.logger,this.performanceClient):Nw,this.eventHandler=new CB(this.logger),this.browserStorage=this.isBrowserEnvironment?new cE(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,Mq(this.config.auth),this.performanceClient):Ume(this.config.auth.clientId,this.logger);let e={cacheLocation:qc.MemoryStorage,temporaryCacheLocation:qc.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new cE(this.config.auth.clientId,e,this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new MB(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this),this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}static createController(i,e){return st(this,null,function*(){let n=new r(i);return yield n.initialize(e),n})}trackPageVisibility(i){i&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},i))}initialize(i){return st(this,null,function*(){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(In.INITIALIZE_END);return}let e=i?.correlationId||this.getRequestCorrelationId(),n=this.config.system.allowNativeBroker,o=this.performanceClient.startMeasurement(Je.InitializeClientApplication,e);if(this.eventHandler.emitEvent(In.INITIALIZE_START),n)try{this.nativeExtensionProvider=yield xm.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(s){this.logger.verbose(s)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),yield xi(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),Je.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,e)(this.performanceClient,e)),this.initialized=!0,this.eventHandler.emitEvent(In.INITIALIZE_END),o.end({allowNativeBroker:n,success:!0})})}handleRedirectPromise(i){return st(this,null,function*(){if(this.logger.verbose("handleRedirectPromise called"),Hq(this.initialized),this.isBrowserEnvironment){let e=i||"",n=this.redirectResponse.get(e);return typeof n>"u"?(n=this.handleRedirectPromiseInternal(i),this.redirectResponse.set(e,n),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),n}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})}handleRedirectPromiseInternal(i){return st(this,null,function*(){let e=this.getAllAccounts(),n=this.browserStorage.getCachedNativeRequest(),o=n&&xm.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!i,s=o?n?.correlationId:this.browserStorage.getTemporaryCache(os.CORRELATION_ID,!0)||"",l=this.performanceClient.startMeasurement(Je.AcquireTokenRedirect,s);this.eventHandler.emitEvent(In.HANDLE_REDIRECT_START,Cn.Redirect);let h;if(o&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");let p=new hf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ds.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,n.accountId,this.nativeInternalStorage,n.correlationId);h=xi(p.handleRedirectPromise.bind(p),Je.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,l.event.correlationId)(this.performanceClient,l.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");let p=this.createRedirectClient(s);h=xi(p.handleRedirectPromise.bind(p),Je.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,l.event.correlationId)(i,l)}return h.then(p=>(p?(e.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(In.LOGIN_SUCCESS,Cn.Redirect,p),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(In.ACQUIRE_TOKEN_SUCCESS,Cn.Redirect,p),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),l.end({success:!0,accountType:w_(p.account)})):l.event.errorCode?l.end({success:!1}):l.discard(),this.eventHandler.emitEvent(In.HANDLE_REDIRECT_END,Cn.Redirect),p)).catch(p=>{let m=p;throw e.length>0?this.eventHandler.emitEvent(In.ACQUIRE_TOKEN_FAILURE,Cn.Redirect,null,m):this.eventHandler.emitEvent(In.LOGIN_FAILURE,Cn.Redirect,null,m),this.eventHandler.emitEvent(In.HANDLE_REDIRECT_END,Cn.Redirect),l.end({success:!1},m),p})})}acquireTokenRedirect(i){return st(this,null,function*(){let e=this.getRequestCorrelationId(i);this.logger.verbose("acquireTokenRedirect called",e);let n=this.performanceClient.startMeasurement(Je.AcquireTokenPreRedirect,e);n.add({accountType:w_(i.account),scenarioId:i.scenarioId});let o=i.onRedirectNavigate;if(o)i.onRedirectNavigate=l=>{let h=typeof o=="function"?o(l):void 0;return h!==!1?n.end({success:!0}):n.discard(),h};else{let l=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=h=>{let p=typeof l=="function"?l(h):void 0;return p!==!1?n.end({success:!0}):n.discard(),p}}let s=this.getAllAccounts().length>0;try{Wq(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),s?this.eventHandler.emitEvent(In.ACQUIRE_TOKEN_START,Cn.Redirect,i):this.eventHandler.emitEvent(In.LOGIN_START,Cn.Redirect,i);let l;return this.nativeExtensionProvider&&this.canUseNative(i)?l=new hf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ds.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(i),this.nativeInternalStorage,e).acquireTokenRedirect(i,n).catch(p=>{if(p instanceof uf&&Jw(p))return this.nativeExtensionProvider=void 0,this.createRedirectClient(e).acquireToken(i);if(p instanceof Wc)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(e).acquireToken(i);throw this.browserStorage.setInteractionInProgress(!1),p}):l=this.createRedirectClient(e).acquireToken(i),yield l}catch(l){throw n.end({success:!1},l),s?this.eventHandler.emitEvent(In.ACQUIRE_TOKEN_FAILURE,Cn.Redirect,null,l):this.eventHandler.emitEvent(In.LOGIN_FAILURE,Cn.Redirect,null,l),l}})}acquireTokenPopup(i){let e=this.getRequestCorrelationId(i),n=this.performanceClient.startMeasurement(Je.AcquireTokenPopup,e);n.add({scenarioId:i.scenarioId,accountType:w_(i.account)});try{this.logger.verbose("acquireTokenPopup called",e),OB(this.initialized,n),this.browserStorage.setInteractionInProgress(!0)}catch(l){return Promise.reject(l)}let o=this.getAllAccounts();o.length>0?this.eventHandler.emitEvent(In.ACQUIRE_TOKEN_START,Cn.Popup,i):this.eventHandler.emitEvent(In.LOGIN_START,Cn.Popup,i);let s;return this.canUseNative(i)?s=this.acquireTokenNative(li(Xe({},i),{correlationId:e}),ds.acquireTokenPopup).then(l=>(this.browserStorage.setInteractionInProgress(!1),n.end({success:!0,isNativeBroker:!0,accountType:w_(l.account)}),l)).catch(l=>{if(l instanceof uf&&Jw(l))return this.nativeExtensionProvider=void 0,this.createPopupClient(e).acquireToken(i);if(l instanceof Wc)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(e).acquireToken(i);throw this.browserStorage.setInteractionInProgress(!1),l}):s=this.createPopupClient(e).acquireToken(i),s.then(l=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(In.LOGIN_SUCCESS,Cn.Popup,l):this.eventHandler.emitEvent(In.ACQUIRE_TOKEN_SUCCESS,Cn.Popup,l),n.end({success:!0,accessTokenSize:l.accessToken.length,idTokenSize:l.idToken.length,accountType:w_(l.account)}),l)).catch(l=>(o.length>0?this.eventHandler.emitEvent(In.ACQUIRE_TOKEN_FAILURE,Cn.Popup,null,l):this.eventHandler.emitEvent(In.LOGIN_FAILURE,Cn.Popup,null,l),n.end({success:!1},l),Promise.reject(l)))}trackPageVisibilityWithMeasurement(){let i=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;i&&(this.logger.info("Perf: Visibility change detected in ",i.event.name),i.increment({visibilityChangeCount:1}))}ssoSilent(i){return st(this,null,function*(){let e=this.getRequestCorrelationId(i),n=li(Xe({},i),{prompt:i.prompt,correlationId:e});this.ssoSilentMeasurement=this.performanceClient.startMeasurement(Je.SsoSilent,e),this.ssoSilentMeasurement?.add({scenarioId:i.scenarioId,accountType:w_(i.account)}),OB(this.initialized,this.ssoSilentMeasurement),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",e),this.eventHandler.emitEvent(In.SSO_SILENT_START,Cn.Silent,n);let o;return this.canUseNative(n)?o=this.acquireTokenNative(n,ds.ssoSilent).catch(s=>{if(s instanceof uf&&Jw(s))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(n.correlationId).acquireToken(n);throw s}):o=this.createSilentIframeClient(n.correlationId).acquireToken(n),o.then(s=>(this.eventHandler.emitEvent(In.SSO_SILENT_SUCCESS,Cn.Silent,s),this.ssoSilentMeasurement?.end({success:!0,isNativeBroker:s.fromNativeBroker,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:w_(s.account)}),s)).catch(s=>{throw this.eventHandler.emitEvent(In.SSO_SILENT_FAILURE,Cn.Silent,null,s),this.ssoSilentMeasurement?.end({success:!1},s),s}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenByCode(i){return st(this,null,function*(){let e=this.getRequestCorrelationId(i);this.logger.trace("acquireTokenByCode called",e);let n=this.performanceClient.startMeasurement(Je.AcquireTokenByCode,e);OB(this.initialized,n),this.eventHandler.emitEvent(In.ACQUIRE_TOKEN_BY_CODE_START,Cn.Silent,i),n.add({scenarioId:i.scenarioId});try{if(i.code&&i.nativeAccountId)throw qi(JA);if(i.code){let o=i.code,s=this.hybridAuthCodeResponses.get(o);return s?(this.logger.verbose("Existing acquireTokenByCode request found",e),n.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",e),s=this.acquireTokenByCodeAsync(li(Xe({},i),{correlationId:e})).then(l=>(this.eventHandler.emitEvent(In.ACQUIRE_TOKEN_BY_CODE_SUCCESS,Cn.Silent,l),this.hybridAuthCodeResponses.delete(o),n.end({success:!0,isNativeBroker:l.fromNativeBroker,accessTokenSize:l.accessToken.length,idTokenSize:l.idToken.length,accountType:w_(l.account)}),l)).catch(l=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(In.ACQUIRE_TOKEN_BY_CODE_FAILURE,Cn.Silent,null,l),n.end({success:!1},l),l}),this.hybridAuthCodeResponses.set(o,s)),yield s}else if(i.nativeAccountId)if(this.canUseNative(i,i.nativeAccountId)){let o=yield this.acquireTokenNative(li(Xe({},i),{correlationId:e}),ds.acquireTokenByCode,i.nativeAccountId).catch(s=>{throw s instanceof uf&&Jw(s)&&(this.nativeExtensionProvider=void 0),s});return n.end({accountType:w_(o.account),success:!0}),o}else throw qi(eE);else throw qi(XA)}catch(o){throw this.eventHandler.emitEvent(In.ACQUIRE_TOKEN_BY_CODE_FAILURE,Cn.Silent,null,o),n.end({success:!1},o),o}})}acquireTokenByCodeAsync(i){return st(this,null,function*(){return this.logger.trace("acquireTokenByCodeAsync called",i.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(Je.AcquireTokenByCodeAsync,i.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),yield this.createSilentAuthCodeClient(i.correlationId).acquireToken(i).then(o=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:o.fromCache,isNativeBroker:o.fromNativeBroker}),o)).catch(o=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},o),o}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenFromCache(i,e){return st(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(Je.AcquireTokenFromCache,i.correlationId),e){case Qh.Default:case Qh.AccessToken:case Qh.AccessTokenAndRefreshToken:let n=this.createSilentCacheClient(i.correlationId);return xi(n.acquireToken.bind(n),Je.SilentCacheClientAcquireToken,this.logger,this.performanceClient,i.correlationId)(i);default:throw di(yd.tokenRefreshRequired)}})}acquireTokenByRefreshToken(i,e){return st(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(Je.AcquireTokenByRefreshToken,i.correlationId),e){case Qh.Default:case Qh.AccessTokenAndRefreshToken:case Qh.RefreshToken:case Qh.RefreshTokenAndNetwork:let n=this.createSilentRefreshClient(i.correlationId);return xi(n.acquireToken.bind(n),Je.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,i.correlationId)(i);default:throw di(yd.tokenRefreshRequired)}})}acquireTokenBySilentIframe(i){return st(this,null,function*(){this.performanceClient.addQueueMeasurement(Je.AcquireTokenBySilentIframe,i.correlationId);let e=this.createSilentIframeClient(i.correlationId);return xi(e.acquireToken.bind(e),Je.SilentIframeClientAcquireToken,this.logger,this.performanceClient,i.correlationId)(i)})}logout(i){return st(this,null,function*(){let e=this.getRequestCorrelationId(i);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",e),this.logoutRedirect(Xe({correlationId:e},i))})}logoutRedirect(i){return st(this,null,function*(){let e=this.getRequestCorrelationId(i);return Wq(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),this.createRedirectClient(e).logout(i)})}logoutPopup(i){try{let e=this.getRequestCorrelationId(i);return dB(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(e).logout(i)}catch(e){return Promise.reject(e)}}clearCache(i){return st(this,null,function*(){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}let e=this.getRequestCorrelationId(i);return this.createSilentCacheClient(e).logout(i)})}getAllAccounts(i){let e=this.getRequestCorrelationId();return zme(this.logger,this.browserStorage,this.isBrowserEnvironment,e,i)}getAccount(i){let e=this.getRequestCorrelationId();return Gme(i,this.logger,this.browserStorage,e)}getAccountByUsername(i){let e=this.getRequestCorrelationId();return Hme(i,this.logger,this.browserStorage,e)}getAccountByHomeId(i){let e=this.getRequestCorrelationId();return Wme(i,this.logger,this.browserStorage,e)}getAccountByLocalId(i){let e=this.getRequestCorrelationId();return qme(i,this.logger,this.browserStorage,e)}setActiveAccount(i){let e=this.getRequestCorrelationId();Yme(i,this.browserStorage,e)}getActiveAccount(){let i=this.getRequestCorrelationId();return Kme(this.browserStorage,i)}hydrateCache(i,e){return st(this,null,function*(){this.logger.verbose("hydrateCache called");let n=rl.createFromAccountInfo(i.account,i.cloudGraphHostName,i.msGraphHost);return this.browserStorage.setAccount(n,i.correlationId),i.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(i,e)):this.browserStorage.hydrateCache(i,e)})}acquireTokenNative(i,e,n){return st(this,null,function*(){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw qi(df);return new hf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,e,this.performanceClient,this.nativeExtensionProvider,n||this.getNativeAccountId(i),this.nativeInternalStorage,i.correlationId).acquireToken(i)})}canUseNative(i,e){if(this.logger.trace("canUseNative called"),!xm.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,i.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(i.prompt)switch(i.prompt){case fl.NONE:case fl.CONSENT:case fl.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${i.prompt} is not compatible with native flow, returning false`),!1}return!e&&!this.getNativeAccountId(i)?(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(i){let e=i.account||this.getAccount({loginHint:i.loginHint,sid:i.sid})||this.getActiveAccount();return e&&e.nativeAccountId||""}createPopupClient(i){return new IB(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,i)}createRedirectClient(i){return new TB(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,i)}createSilentIframeClient(i){return new AB(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ds.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,i)}createSilentCacheClient(i){return new uE(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,i)}createSilentRefreshClient(i){return new EB(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,i)}createSilentAuthCodeClient(i){return new kB(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ds.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,i)}addEventCallback(i,e){return this.eventHandler.addEventCallback(i,e)}removeEventCallback(i){this.eventHandler.removeEventCallback(i)}addPerformanceCallback(i){return Gq(),this.performanceClient.addPerformanceCallback(i)}removePerformanceCallback(i){return this.performanceClient.removePerformanceCallback(i)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}handleAccountCacheChange(i){try{i.key?.includes(Dc.ACTIVE_ACCOUNT_FILTERS)&&this.eventHandler.emitEvent(In.ACTIVE_ACCOUNT_CHANGED);let e=i.newValue||i.oldValue;if(!e)return;let n=JSON.parse(e);if(typeof n!="object"||!rl.isAccountEntity(n))return;let s=rv.toObject(new rl,n).getAccountInfo();!i.oldValue&&i.newValue?(this.logger.info("Account was added to cache in a different window"),this.eventHandler.emitEvent(In.ACCOUNT_ADDED,void 0,s)):!i.newValue&&i.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.eventHandler.emitEvent(In.ACCOUNT_REMOVED,void 0,s))}catch{return}}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(i){this.logger=i}initializeWrapperLibrary(i,e){this.browserStorage.setWrapperMetadata(i,e)}setNavigationClient(i){this.navigationClient=i}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(i){return i?.correlationId?i.correlationId:this.isBrowserEnvironment?fu():qt.EMPTY_STRING}loginRedirect(i){return st(this,null,function*(){let e=this.getRequestCorrelationId(i);return this.logger.verbose("loginRedirect called",e),this.acquireTokenRedirect(Xe({correlationId:e},i||jq))})}loginPopup(i){let e=this.getRequestCorrelationId(i);return this.logger.verbose("loginPopup called",e),this.acquireTokenPopup(Xe({correlationId:e},i||jq))}acquireTokenSilent(i){return st(this,null,function*(){let e=this.getRequestCorrelationId(i),n=this.performanceClient.startMeasurement(Je.AcquireTokenSilent,e);n.add({cacheLookupPolicy:i.cacheLookupPolicy,scenarioId:i.scenarioId}),OB(this.initialized,n),this.logger.verbose("acquireTokenSilent called",e);let o=i.account||this.getActiveAccount();if(!o)throw qi(HA);n.add({accountType:w_(o)});let s={clientId:this.config.auth.clientId,authority:i.authority||qt.EMPTY_STRING,scopes:i.scopes,homeAccountIdentifier:o.homeAccountId,claims:i.claims,authenticationScheme:i.authenticationScheme,resourceRequestMethod:i.resourceRequestMethod,resourceRequestUri:i.resourceRequestUri,shrClaims:i.shrClaims,sshKid:i.sshKid,shrOptions:i.shrOptions},l=JSON.stringify(s),h=this.activeSilentTokenRequests.get(l);if(typeof h>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",e);let p=xi(this.acquireTokenSilentAsync.bind(this),Je.AcquireTokenSilentAsync,this.logger,this.performanceClient,e)(li(Xe({},i),{correlationId:e}),o).then(m=>(this.activeSilentTokenRequests.delete(l),n.end({success:!0,fromCache:m.fromCache,isNativeBroker:m.fromNativeBroker,cacheLookupPolicy:i.cacheLookupPolicy,accessTokenSize:m.accessToken.length,idTokenSize:m.idToken.length}),m)).catch(m=>{throw this.activeSilentTokenRequests.delete(l),n.end({success:!1},m),m});return this.activeSilentTokenRequests.set(l,p),li(Xe({},yield p),{state:i.state})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",e),n.discard(),li(Xe({},yield h),{state:i.state})})}acquireTokenSilentAsync(i,e){return st(this,null,function*(){let n=()=>this.trackPageVisibility(i.correlationId);this.performanceClient.addQueueMeasurement(Je.AcquireTokenSilentAsync,i.correlationId),this.eventHandler.emitEvent(In.ACQUIRE_TOKEN_START,Cn.Silent,i),i.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},i.correlationId),document.addEventListener("visibilitychange",n);let o=yield xi(Qme,Je.InitializeSilentRequest,this.logger,this.performanceClient,i.correlationId)(i,e,this.config,this.performanceClient,this.logger),s=i.cacheLookupPolicy||Qh.Default;return this.acquireTokenSilentNoIframe(o,s).catch(h=>st(this,null,function*(){if(MVe(h,s))if(this.activeIframeRequest)if(s!==Qh.Skip){let[m,f]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${f}`,o.correlationId);let g=this.performanceClient.startMeasurement(Je.AwaitConcurrentIframe,o.correlationId);g.add({awaitIframeCorrelationId:f});let y=yield m;if(g.end({success:y}),y)return this.logger.verbose(`Parallel iframe request with correlationId: ${f} succeeded. Retrying cache and/or RT redemption`,o.correlationId),this.acquireTokenSilentNoIframe(o,s);throw this.logger.info(`Iframe request with correlationId: ${f} failed. Interaction is required.`),h}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",o.correlationId),xi(this.acquireTokenBySilentIframe.bind(this),Je.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o);else{let m;return this.activeIframeRequest=[new Promise(f=>{m=f}),o.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",o.correlationId),xi(this.acquireTokenBySilentIframe.bind(this),Je.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o).then(f=>(m(!0),f)).catch(f=>{throw m(!1),f}).finally(()=>{this.activeIframeRequest=void 0})}else throw h})).then(h=>(this.eventHandler.emitEvent(In.ACQUIRE_TOKEN_SUCCESS,Cn.Silent,h),i.correlationId&&this.performanceClient.addFields({fromCache:h.fromCache,isNativeBroker:h.fromNativeBroker},i.correlationId),h)).catch(h=>{throw this.eventHandler.emitEvent(In.ACQUIRE_TOKEN_FAILURE,Cn.Silent,null,h),h}).finally(()=>{document.removeEventListener("visibilitychange",n)})})}acquireTokenSilentNoIframe(i,e){return st(this,null,function*(){return xm.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,i.authenticationScheme)&&i.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(i,ds.acquireTokenSilent_silentFlow).catch(n=>st(this,null,function*(){throw n instanceof uf&&Jw(n)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,di(yd.tokenRefreshRequired)):n}))):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),xi(this.acquireTokenFromCache.bind(this),Je.AcquireTokenFromCache,this.logger,this.performanceClient,i.correlationId)(i,e).catch(n=>{if(e===Qh.AccessToken)throw n;return this.eventHandler.emitEvent(In.ACQUIRE_TOKEN_NETWORK_START,Cn.Silent,i),xi(this.acquireTokenByRefreshToken.bind(this),Je.AcquireTokenByRefreshToken,this.logger,this.performanceClient,i.correlationId)(i,e)}))})}};function MVe(r,i){let e=!(r instanceof Wc&&r.subError!==av.badToken),n=r.errorCode===kc.INVALID_GRANT_ERROR||r.errorCode===yd.tokenRefreshRequired,o=e&&n||r.errorCode===av.noTokensFound||r.errorCode===av.refreshTokenExpired,s=bme.includes(i);return o&&s}function cfe(r,i){return st(this,null,function*(){let e=new fB(r);return yield e.initialize(),hE.createController(e,i)})}var t1=class r{static createPublicClientApplication(i){return st(this,null,function*(){let e=yield cfe(i);return new r(i,e)})}constructor(i,e){this.controller=e||new hE(new fB(i))}initialize(i){return st(this,null,function*(){return this.controller.initialize(i)})}acquireTokenPopup(i){return st(this,null,function*(){return this.controller.acquireTokenPopup(i)})}acquireTokenRedirect(i){return this.controller.acquireTokenRedirect(i)}acquireTokenSilent(i){return this.controller.acquireTokenSilent(i)}acquireTokenByCode(i){return this.controller.acquireTokenByCode(i)}addEventCallback(i,e){return this.controller.addEventCallback(i,e)}removeEventCallback(i){return this.controller.removeEventCallback(i)}addPerformanceCallback(i){return this.controller.addPerformanceCallback(i)}removePerformanceCallback(i){return this.controller.removePerformanceCallback(i)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(i){return this.controller.getAccount(i)}getAccountByHomeId(i){return this.controller.getAccountByHomeId(i)}getAccountByLocalId(i){return this.controller.getAccountByLocalId(i)}getAccountByUsername(i){return this.controller.getAccountByUsername(i)}getAllAccounts(i){return this.controller.getAllAccounts(i)}handleRedirectPromise(i){return this.controller.handleRedirectPromise(i)}loginPopup(i){return this.controller.loginPopup(i)}loginRedirect(i){return this.controller.loginRedirect(i)}logout(i){return this.controller.logout(i)}logoutRedirect(i){return this.controller.logoutRedirect(i)}logoutPopup(i){return this.controller.logoutPopup(i)}ssoSilent(i){return this.controller.ssoSilent(i)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(i){this.controller.setLogger(i)}setActiveAccount(i){this.controller.setActiveAccount(i)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(i,e){return this.controller.initializeWrapperLibrary(i,e)}setNavigationClient(i){this.controller.setNavigationClient(i)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(i,e){return st(this,null,function*(){return this.controller.hydrateCache(i,e)})}clearCache(i){return this.controller.clearCache(i)}};var hS=class{static getInteractionStatusFromEvent(i,e){switch(i.eventType){case In.LOGIN_START:return pc.Login;case In.SSO_SILENT_START:return pc.SsoSilent;case In.ACQUIRE_TOKEN_START:if(i.interactionType===Cn.Redirect||i.interactionType===Cn.Popup)return pc.AcquireToken;break;case In.HANDLE_REDIRECT_START:return pc.HandleRedirect;case In.LOGOUT_START:return pc.Logout;case In.SSO_SILENT_SUCCESS:case In.SSO_SILENT_FAILURE:if(e&&e!==pc.SsoSilent)break;return pc.None;case In.LOGOUT_END:if(e&&e!==pc.Logout)break;return pc.None;case In.HANDLE_REDIRECT_END:if(e&&e!==pc.HandleRedirect)break;return pc.None;case In.LOGIN_SUCCESS:case In.LOGIN_FAILURE:case In.ACQUIRE_TOKEN_SUCCESS:case In.ACQUIRE_TOKEN_FAILURE:case In.RESTORE_FROM_BFCACHE:if(i.interactionType===Cn.Redirect||i.interactionType===Cn.Popup){if(e&&e!==pc.Login&&e!==pc.AcquireToken)break;return pc.None}break}return null}};var dfe="@azure/msal-angular",qq="3.1.0",pS=new At("MSAL_INSTANCE"),nP=new At("MSAL_GUARD_CONFIG"),yVt=new At("MSAL_INTERCEPTOR_CONFIG"),DVe=new At("MSAL_BROADCAST_CONFIG"),rP=(()=>{class r{constructor(e,n){this.instance=e,this.location=n;let o=this.location.path(!0).split("#").pop();o&&(this.redirectHash=`#${o}`),this.instance.initializeWrapperLibrary(ZO.Angular,qq)}initialize(){return Xn(this.instance.initialize())}acquireTokenPopup(e){return Xn(this.instance.acquireTokenPopup(e))}acquireTokenRedirect(e){return Xn(this.instance.acquireTokenRedirect(e))}acquireTokenSilent(e){return Xn(this.instance.acquireTokenSilent(e))}handleRedirectObservable(e){return Xn(this.instance.initialize().then(()=>this.instance.handleRedirectPromise(e||this.redirectHash)))}loginPopup(e){return Xn(this.instance.loginPopup(e))}loginRedirect(e){return Xn(this.instance.loginRedirect(e))}logout(e){return Xn(this.instance.logout(e))}logoutRedirect(e){return Xn(this.instance.logoutRedirect(e))}logoutPopup(e){return Xn(this.instance.logoutPopup(e))}ssoSilent(e){return Xn(this.instance.ssoSilent(e))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(dfe,qq)),this.logger}setLogger(e){this.logger=e.clone(dfe,qq),this.instance.setLogger(e)}}return r.\u0275fac=function(e){return new(e||r)(xe(pS),xe(pm))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})(),ufe=(()=>{class r{constructor(e,n,o){this.msalInstance=e,this.authService=n,this.msalBroadcastConfig=o,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.authService.getLogger().verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new Vd(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new Dt,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new mt(pc.Startup),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(s=>{this._msalSubject.next(s);let l=hS.getInteractionStatusFromEvent(s,this._inProgress.value);l!==null&&(this.authService.getLogger().verbose(`BroadcastService - ${s.eventType} results in setting inProgress from ${this._inProgress.value} to ${l}`),this._inProgress.next(l))})}}return r.\u0275fac=function(e){return new(e||r)(xe(pS),xe(rP),xe(DVe,8))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();function OVe(r,i){if(r&1&&wt(0,"mat-icon",0),r&2){let e=ae();ee("svgIcon",e.icon.name)}}function PVe(r,i){if(r&1&&(ne(0,"mat-icon"),Ye(1),ce()),r&2){let e=ae();q(),Si(e.icon)}}var Yq={name:"microsoft",svg:`
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>microsoft</title><path d="M2,3H11V12H2V3M11,22H2V13H11V22M21,3V12H12V3H21M21,22H12V13H21V22Z" /></svg>
`};var hfe={name:"engine",svg:`
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>engine</title><path d="M7,4V6H10V8H7L5,10V13H3V10H1V18H3V15H5V18H8L10,20H18V16H20V19H23V9H20V12H18V8H12V6H15V4H7Z" /></svg>
`};var pfe={name:"presentation-play",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>presentation-play</title><path d="M2,3H10A2,2 0 0,1 12,1A2,2 0 0,1 14,3H22V5H21V16H15.25L17,22H15L13.25,16H10.75L9,22H7L8.75,16H3V5H2V3M5,5V14H19V5H5M11.85,11.85C11.76,11.94 11.64,12 11.5,12A0.5,0.5 0 0,1 11,11.5V7.5A0.5,0.5 0 0,1 11.5,7C11.64,7 11.76,7.06 11.85,7.15L13.25,8.54C13.57,8.86 13.89,9.18 13.89,9.5C13.89,9.82 13.57,10.14 13.25,10.46L11.85,11.85Z" /></svg>'};var Kq=(()=>{class r{iconRegistry;sanitizer;constructor(e,n){this.iconRegistry=e,this.sanitizer=n}registerSvg(e){this.iconRegistry.addSvgIconLiteral(e.name,this.sanitizer.bypassSecurityTrustHtml(e.svg))}static \u0275fac=function(n){return new(n||r)(xe(eO),xe(xg))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function mfe(r="outlined"){return Bl([jn,{provide:hm,useFactory:i=>()=>i.setDefaultFontSetClass(`material-symbols-${r}`),deps:[eO],multi:!0}])}var i1=(()=>{class r{iconService;set icon(e){this.isSvg(e)&&this.registerSvg(e),this._icon=e}get icon(){return this._icon}_icon;constructor(e){this.iconService=e}registerSvg(e){this.iconService.registerSvg(e)}isSvg(e){return typeof e!="string"}static \u0275fac=function(n){return new(n||r)(ie(Kq))};static \u0275cmp=gt({type:r,selectors:[["igo-icon"]],inputs:{icon:"icon"},standalone:!0,features:[yt],decls:2,vars:1,consts:[[3,"svgIcon"]],template:function(n,o){n&1&&We(0,OVe,1,1,"mat-icon",0)(1,PVe,2,1,"mat-icon"),n&2&&vn(o.isSvg(o.icon)?0:1)},dependencies:[jn,er],encapsulation:2})}return r})();var FVe="[_nghost-%COMP%]{padding:10px 10px 10px 0;display:inline-block;position:relative;top:-15px}[_nghost-%COMP%] > button[_ngcontent-%COMP%]{font-size:15px;height:40px;width:265px}mat-icon[_ngcontent-%COMP%]{margin-right:10px}",ffe=(()=>{class r{authService;config;appRef;msalService;msalGuardConfig;options;_destroying$=new Dt;login=new it;broadcastService;svgIcon=Yq;constructor(e,n,o,s,l){this.authService=e,this.config=n,this.appRef=o,this.msalService=s,this.msalGuardConfig=l,this.options=this.config.getConfig("auth.microsoft"),this.msalService.instance=new t1({auth:this.options,cache:{cacheLocation:"sessionStorage"}}),this.broadcastService=new ufe(this.msalService.instance,this.msalService),this.options?.clientId?this.broadcastService.inProgress$.pipe(mn(h=>h===pc.None),rn(this._destroying$)).subscribe(()=>{this.checkAccount()}):console.warn('Microsoft authentification needs "clientId" option')}loginMicrosoft(){this.msalService.loginPopup(Xe({},this.getConf().authRequest)).subscribe(e=>{this.msalService.instance.setActiveAccount(e.account),this.checkAccount()})}checkAccount(){this.msalService.instance.acquireTokenSilent(this.getConf().authRequest).then(e=>{let n=e.accessToken,o=e.idToken;this.authService.loginWithToken(n,"microsoft",{tokenId:o}).subscribe(()=>{this.appRef.tick(),this.login.emit(!0)})}).catch(e=>st(this,null,function*(){if(e instanceof Wc)return this.msalService.acquireTokenPopup(this.getConf().authRequest);console.log(e)})).catch(()=>{console.log("Silent token fails")})}getConf(){return this.msalGuardConfig.filter(e=>e.type==="add")[0]}static \u0275fac=function(n){return new(n||r)(ie(ml),ie(Ri),ie(fs),ie(rP),ie(nP))};static \u0275cmp=gt({type:r,selectors:[["igo-auth-microsoft"]],outputs:{login:"login"},standalone:!0,features:[yt],decls:4,vars:4,consts:[["mat-raised-button","",1,"microsoft-login-button",3,"click"],[3,"icon"]],template:function(n,o){n&1&&(ne(0,"button",0),Oe("click",function(){return o.loginMicrosoft()}),wt(1,"igo-icon",1),Ye(2),Ne(3,"translate"),ce()),n&2&&(q(),ee("icon",o.svgIcon),q(),Qt(" ",je(3,2,"igo.auth.microsoft.login"),`
`))},dependencies:[bn,Ua,On,hn,i1],styles:["[_nghost-%COMP%]{padding:10px 10px 10px 0;display:inline-block;position:relative;top:-15px}[_nghost-%COMP%] > button[_ngcontent-%COMP%]{font-size:15px;height:40px;width:265px}mat-icon[_ngcontent-%COMP%]{margin-right:10px}"],changeDetection:0})}return r})(),PB=(()=>{class r{instance;location;redirectHash;logger;name="@azure/msal-angular";version="2.0.0-beta.2";constructor(e,n){this.instance=e,this.location=n;let o=this.location.path(!0).split("#").pop();o&&(this.redirectHash=`#${o}`),this.instance.initializeWrapperLibrary(ZO.Angular,this.version)}initialize(){return Xn(this.instance.initialize())}acquireTokenPopup(e){return Xn(this.instance.acquireTokenPopup(e))}acquireTokenRedirect(e){return Xn(this.instance.acquireTokenRedirect(e))}acquireTokenSilent(e){return Xn(this.instance.acquireTokenSilent(e))}handleRedirectObservable(e){return Xn(this.instance.handleRedirectPromise(e||this.redirectHash))}loginPopup(e){return Xn(this.instance.loginPopup(e))}loginRedirect(e){return Xn(this.instance.loginRedirect(e))}logout(e){return Xn(this.instance.logout(e))}logoutRedirect(e){return Xn(this.instance.logoutRedirect(e))}logoutPopup(e){return Xn(this.instance.logoutPopup(e))}ssoSilent(e){return Xn(this.instance.ssoSilent(e))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(this.name,this.version)),this.logger}setLogger(e){this.logger=e.clone(this.name,this.version),this.instance.setLogger(e)}static \u0275fac=function(n){return new(n||r)(xe(pS),xe(pm))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),LVe=(()=>{class r{msalInstance;authService;_msalSubject;msalSubject$;_inProgress;inProgress$;constructor(e,n){this.msalInstance=e,this.authService=n,this._msalSubject=new Dt,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new mt(pc.Startup),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(o=>{this._msalSubject.next(o);let s=hS.getInteractionStatusFromEvent(o);s!==null&&(this.authService.getLogger().verbose(`BroadcastService - ${o.eventType} results in setting inProgress to ${s}`),this._inProgress.next(s))})}static \u0275fac=function(n){return new(n||r)(xe(pS),xe(PB))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),gfe=(()=>{class r{authService;config;appRef;msalService;msalGuardConfig;options;_destroying$=new Dt;login=new it;broadcastService;svgIcon=Yq;constructor(e,n,o,s,l){this.authService=e,this.config=n,this.appRef=o,this.msalService=s,this.msalGuardConfig=l,this.options=this.config.getConfig("auth.microsoftb2c")||{},this.msalService.instance=new t1({auth:this.options.browserAuthOptions,cache:{cacheLocation:"sessionStorage"}}),this.broadcastService=new LVe(this.msalService.instance,this.msalService),this.options.browserAuthOptions.clientId?this.broadcastService.inProgress$.pipe(mn(h=>h===pc.None),rn(this._destroying$)).subscribe(()=>{this.checkAccount()}):console.warn('Microsoft authentification needs "clientId" option')}loginMicrosoftb2c(){this.msalService.loginPopup(Xe({},this.getConf().authRequest)).subscribe(e=>{this.msalService.instance.setActiveAccount(e.account),this.checkAccount()})}checkAccount(){this.msalService.instance.acquireTokenSilent(this.getConf().authRequest).then(e=>{let n=e.idToken;this.authService.loginWithToken(n,"microsoftb2c").subscribe(()=>{this.appRef.tick(),this.login.emit(!0)})}).catch(e=>st(this,null,function*(){if(e instanceof Wc)return this.msalService.acquireTokenPopup(this.getConf().authRequest)})).catch(()=>{console.log("Silent token fails")})}getConf(){return this.msalGuardConfig.filter(e=>e.type==="b2c")[0]}static \u0275fac=function(n){return new(n||r)(ie(ml),ie(Ri),ie(fs),ie(PB),ie(nP))};static \u0275cmp=gt({type:r,selectors:[["igo-auth-microsoftb2c"]],outputs:{login:"login"},standalone:!0,features:[Bi([PB]),yt],decls:4,vars:4,consts:[["mat-raised-button","",1,"microsoft-login-button",3,"click"],[3,"icon"]],template:function(n,o){n&1&&(ne(0,"button",0),Oe("click",function(){return o.loginMicrosoftb2c()}),wt(1,"igo-icon",1),Ye(2),Ne(3,"translate"),ce()),n&2&&(q(),ee("icon",o.svgIcon),q(),Qt(" ",je(3,2,"igo.auth.microsoftb2c.login"),`
`))},dependencies:[bn,Ua,On,hn,i1],styles:[FVe],changeDetection:0})}return r})();function NVe(r){let i=r.getConfig("auth.microsoft");return i?(i.redirectUri=i?.redirectUri||window.location.href,i.authority=i?.authority||"https://login.microsoftonline.com/organizations",new t1({auth:i,cache:{cacheLocation:"sessionStorage"}})):void 0}function BVe(r){let i=r.getConfig("auth.microsoftb2c.browserAuthOptions");return i?(i.redirectUri=i?.redirectUri||window.location.href,i.authority=i?.authority||"https://login.microsoftonline.com/organizations",new t1({auth:i,cache:{cacheLocation:"sessionStorage"}})):void 0}function jVe(){return{interactionType:Cn.Popup,authRequest:{scopes:["user.read"],loginHint:"todo"},type:"add"}}function VVe(r){let i=r.getConfig("auth.microsoftb2c.browserAuthOptions");return{interactionType:Cn.Popup,authRequest:{scopes:[i?.clientId]},type:"b2c"}}function Zq(r){return r==="b2c"?{kind:b4.Microsoft,providers:[{provide:pS,useFactory:BVe,deps:[Ri]},{provide:nP,useFactory:VVe,deps:[Ri],multi:!0},PB]}:{kind:b4.Microsoft,providers:[{provide:pS,useFactory:NVe,deps:[Ri]},{provide:nP,useFactory:jVe,deps:[Ri],multi:!0},rP]}}function $Ve(r,i){r&1&&wt(0,"div",3)}function UVe(r,i){if(r&1){let e=dt();ne(0,"igo-auth-google",7),Oe("login",function(){Re(e);let o=ae(3);return Fe(o.onLogin())}),ce()}}function zVe(r,i){if(r&1){let e=dt();ne(0,"igo-auth-microsoft",7),Oe("login",function(){Re(e);let o=ae(3);return Fe(o.onLogin())}),ce()}}function GVe(r,i){if(r&1){let e=dt();ne(0,"igo-auth-microsoftb2c",7),Oe("login",function(){Re(e);let o=ae(3);return Fe(o.onLogin())}),ce()}}function HVe(r,i){if(r&1){let e=dt();ne(0,"igo-auth-facebook",7),Oe("login",function(){Re(e);let o=ae(3);return Fe(o.onLogin())}),ce()}}function WVe(r,i){if(r&1){let e=dt();ne(0,"igo-auth-intern",8),Oe("login",function(){Re(e);let o=ae(3);return Fe(o.onLogin())}),ce()}if(r&2){let e=ae(3);ee("allowAnonymous",e.options.allowAnonymous)}}function qVe(r,i){if(r&1&&(ne(0,"div",4)(1,"h1"),Ye(2),Ne(3,"translate"),ce(),We(4,UVe,1,0,"igo-auth-google",5)(5,zVe,1,0,"igo-auth-microsoft",5)(6,GVe,1,0,"igo-auth-microsoftb2c",5)(7,HVe,1,0,"igo-auth-facebook",5)(8,WVe,1,1,"igo-auth-intern",6),ce()),r&2){let e=ae(2);q(2),Si(je(3,6,"igo.auth.connection")),q(2),ee("ngIf",e.options.google&&e.options.google.enabled!==!1),q(),ee("ngIf",e.options.microsoft&&e.options.microsoft.enabled!==!1),q(),ee("ngIf",e.options.microsoftb2c&&e.options.microsoftb2c.enabled!==!1),q(),ee("ngIf",e.options.facebook&&e.options.facebook.enabled!==!1),q(),ee("ngIf",!e.options.intern||e.options.intern.enabled!==!1)}}function YVe(r,i){if(r&1){let e=dt();ne(0,"div",4)(1,"p"),Ye(2),Ne(3,"translate"),ce(),ne(4,"button",9),Oe("click",function(){Re(e);let o=ae(2);return Fe(o.logout())}),Ye(5),Ne(6,"translate"),ce()()}if(r&2){let e=ae(2);q(2),Si(cw(3,2,"igo.auth.welcome",e.user)),q(3),Qt(" ",je(6,5,"igo.auth.signOut")," ")}}function KVe(r,i){if(r&1){let e=dt();ne(0,"button",9),Oe("click",function(){Re(e);let o=ae(3);return Fe(o.home())}),Ye(1),Ne(2,"translate"),ce()}r&2&&(q(),Qt(" ",je(2,1,"igo.auth.home")," "))}function ZVe(r,i){if(r&1&&(ne(0,"div",4)(1,"p"),Ye(2),Ne(3,"translate"),ce(),We(4,KVe,3,3,"button",10),ce()),r&2){let e=ae(2);q(2),Si(je(3,2,"igo.auth.deconnection")),q(2),ee("ngIf",e.options.homeRoute)}}function QVe(r,i){if(r&1&&(ne(0,"div"),We(1,$Ve,1,0,"div",1)(2,qVe,9,8,"div",2)(3,YVe,7,7,"div",2)(4,ZVe,5,4,"div",2),ce()),r&2){let e=ae();q(),ee("ngIf",!e.auth.logged&&e.backgroundDisable),q(),ee("ngIf",!e.auth.logged&&e.showLoginDiv),q(),ee("ngIf",e.auth.logged&&e.showAlreadyConnectedDiv),q(),ee("ngIf",e.showLogoutDiv)}}var _fe=(()=>{class r{auth;config;router;get backgroundDisable(){return this.isLogoutRoute||this.isLogoutRoute?!1:this._backgroundDisable}set backgroundDisable(e){this._backgroundDisable=e.toString()==="true"}_backgroundDisable=!0;get hasAlreadyConnectedDiv(){return this._hasAlreadyConnectedDiv}set hasAlreadyConnectedDiv(e){this._hasAlreadyConnectedDiv=e.toString()==="true"}_hasAlreadyConnectedDiv=!0;get hasLogoutDiv(){return this._hasLogoutDiv}set hasLogoutDiv(e){this._hasLogoutDiv=e.toString()==="true"}_hasLogoutDiv=!0;get showAlreadyConnectedDiv(){return this.isLogoutRoute?this.hasAlreadyConnectedDiv:this._showAlreadyConnectedDiv}set showAlreadyConnectedDiv(e){this._showAlreadyConnectedDiv=e.toString()==="true"}_showAlreadyConnectedDiv=!1;get showLogoutDiv(){return this.isLogoutRoute?this.hasLogoutDiv:this._showLogoutDiv}set showLogoutDiv(e){this._showLogoutDiv=e.toString()==="true"}_showLogoutDiv=!1;get showLoginDiv(){if(!this.isLogoutRoute)return!0}login=new it;options;user;visible=!0;isLogoutRoute;constructor(e,n,o){this.auth=e,this.config=n,this.router=o,this.options=this.config.getConfig("auth"),this.visible=Object.getOwnPropertyNames(this.options).length!==0}ngOnInit(){this.analyzeRoute(),this.getName()}onLogin(){this.auth.goToRedirectUrl(),this.getName(),this.login.emit(!0)}logout(){this.auth.logout().subscribe(()=>{this.user=void 0,this.router&&(this.options?.logoutRoute?this.router.navigate([this.options?.logoutRoute]):this.options?.homeRoute&&this.router.navigate([this.options?.homeRoute]))})}home(){this.router&&this.options?.homeRoute&&this.router.navigate([this.options?.homeRoute])}getName(){let e=this.auth.decodeToken();e&&(this.user={name:e.user.firstName||e.user.sourceId})}analyzeRoute(){this.router&&this.router.events.pipe(mn(e=>e instanceof cx)).subscribe(e=>{if(e.url){let n=e.url,o=this.options?.logoutRoute;this.isLogoutRoute=n===o,this.isLogoutRoute&&this.auth.logout()}})}static \u0275fac=function(n){return new(n||r)(ie(ml),ie(Ri),ie(n_,8))};static \u0275cmp=gt({type:r,selectors:[["igo-auth-form"]],inputs:{backgroundDisable:"backgroundDisable",hasAlreadyConnectedDiv:"hasAlreadyConnectedDiv",hasLogoutDiv:"hasLogoutDiv",showAlreadyConnectedDiv:"showAlreadyConnectedDiv",showLogoutDiv:"showLogoutDiv"},outputs:{login:"login"},standalone:!0,features:[yt],decls:1,vars:1,consts:[[4,"ngIf"],["class","backgroundDisable",4,"ngIf"],["class","login center-block",4,"ngIf"],[1,"backgroundDisable"],[1,"login","center-block"],[3,"login",4,"ngIf"],[3,"allowAnonymous","login",4,"ngIf"],[3,"login"],[3,"login","allowAnonymous"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","type","button",3,"click",4,"ngIf"]],template:function(n,o){n&1&&We(0,QVe,5,4,"div",0),n&2&&ee("ngIf",o.visible)},dependencies:[gn,Zpe,ffe,gfe,Kpe,Qpe,bn,Ua,On,hn],styles:["[_nghost-%COMP%]{z-index:999}div.login[_ngcontent-%COMP%]{z-index:200;width:90%;min-width:360px;max-width:600px;padding:25px 50px;border:1px solid;background-color:#fff;border-color:#888}.center-block[_ngcontent-%COMP%]{position:fixed;top:20%;left:50%;transform:translate(-50%)}.backgroundDisable[_ngcontent-%COMP%]{position:fixed;top:0;left:0;background:#000;opacity:.8;z-index:100;height:100%;width:100%}"]})}return r})();var mS=(()=>{class r{counter$=new mt(0);ids=[];register(){let e=Gs();return this.ids.push(e),this.counter$.next(this.ids.length),e}unregister(e){let n=this.ids.indexOf(e);n!==-1&&(this.ids.splice(n,1),this.counter$.next(this.ids.length))}static \u0275fac=function(n){return new(n||r)};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),XVe=(()=>{class r{activityService;constructor(e){this.activityService=e}intercept(e,n){let o=e.headers.get("activityInterceptor");if(o){let l=e.clone({headers:e.headers.delete("activityInterceptor")});if(o==="false")return n.handle(l)}let s=this.activityService.register();return n.handle(e).pipe(Ud(()=>{this.activityService.unregister(s)}))}static \u0275fac=function(n){return new(n||r)(xe(mS))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),Qq=(()=>{class r{static forRoot(){return{ngModule:r,providers:[{provide:ox,useClass:XVe,multi:!0}]}}static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({})}return r})();var JVe=r=>({"igo-spinner-container":!0,"igo-spinner-shown":r}),Xq=(()=>{class r{shown$=new mt(!1);set shown(e){this.shown$.next(e)}get shown(){return this.shown$.value}show(){this.shown=!0}hide(){this.shown=!1}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-spinner"]],inputs:{shown:"shown"},standalone:!0,features:[yt],decls:4,vars:5,consts:[[3,"ngClass"],[1,"igo-spinner-background"],["diameter","40","mode","indeterminate"]],template:function(n,o){n&1&&(ne(0,"div",0),Ne(1,"async"),wt(2,"div",1)(3,"mat-progress-spinner",2),ce()),n&2&&ee("ngClass",fo(3,JVe,je(1,1,o.shown$)))},dependencies:[qr,s4,kr],styles:["[_nghost-%COMP%]   .igo-spinner-container[_ngcontent-%COMP%]{display:none;position:relative;pointer-events:none}[_nghost-%COMP%]   .igo-spinner-container.igo-spinner-shown[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:50%}[_nghost-%COMP%]   .igo-spinner-background[_ngcontent-%COMP%]{height:36px;width:36px;border-radius:50%;border:4px solid #ffffff;position:absolute;top:2px;left:2px}"]})}return r})(),vfe=(()=>{class r{spinner;activityService;counter$$;constructor(e,n){this.spinner=e,this.activityService=n}ngOnInit(){this.counter$$=this.activityService.counter$.pipe(cr(50)).subscribe(e=>{e>0?this.spinner.show():this.spinner.hide()})}ngOnDestroy(){this.counter$$.unsubscribe()}static \u0275fac=function(n){return new(n||r)(ie(Xq,2),ie(mS))};static \u0275dir=Pt({type:r,selectors:[["","igoSpinnerActivity",""]],standalone:!0})}return r})();var uv=(()=>{class r{onClick(e){e.stopPropagation()}static \u0275fac=function(n){return new(n||r)};static \u0275dir=Pt({type:r,selectors:[["","igoStopPropagation",""]],hostBindings:function(n,o){n&1&&Oe("click",function(l){return o.onClick(l)})},standalone:!0})}return r})();var bfe=(()=>{class r{languageService;constructor(e){this.languageService=e}static \u0275fac=function(n){return new(n||r)(ie(wn))};static \u0275cmp=gt({type:r,selectors:[["app-footer"]],standalone:!0,features:[yt],decls:21,vars:18,consts:[["id","footer-id",1,"footer-right"],[1,"order2"],[1,"footer-text"],["rel","noopener noreferrer","alt","('externallinks' | translate)","target","_blank",3,"href"]],template:function(n,o){n&1&&(ne(0,"div",0)(1,"span",1)(2,"span",2)(3,"a",3),Ne(4,"translate"),Ye(5),Ne(6,"translate"),ce()(),ne(7,"span",2),Ye(8," | "),ce(),ne(9,"span",2)(10,"a",3),Ne(11,"translate"),Ye(12),Ne(13,"translate"),ce()(),ne(14,"span",2),Ye(15," | "),ce(),ne(16,"span",2)(17,"a",3),Ne(18,"translate"),Ye(19),Ne(20,"translate"),ce()()()()),n&2&&(q(3),Wr("href",je(4,6,"footer.url-conditions"),pl),q(2),Si(je(6,8,"footer.conditions")),q(5),Wr("href",je(11,10,"footer.url-ministry"),pl),q(2),Si(je(13,12,"footer.ministry")),q(5),Wr("href",je(18,14,"footer.url-gov"),pl),q(2),Si(je(20,16,"footer.gov")))},dependencies:[Wh,hn],styles:[".order2[_ngcontent-%COMP%]{order:2;margin-right:.5%;display:block;right:0;margin-left:140px;text-align:right!important;width:100%}.footer-right[_ngcontent-%COMP%]{z-index:666;background:#ffffffa3;font-size:.7rem;display:flex;align-items:center;height:29px}span.footer-text[_ngcontent-%COMP%]{color:#095797;align-self:center;margin-left:.5rem}span.footer-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#095797;text-decoration:none}  div.ol-scale-line{position:fixed!important;display:flex;flex-direction:row;margin-left:.5%;left:70px!important;bottom:3px!important}  .ol-scale-line-inner{border:1px solid black;color:#000;border-top:none;order:1}"]})}return r})();var e8e=["*",[["mat-toolbar-row"]]],t8e=["*","mat-toolbar-row"],i8e=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=Pt({type:r,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}}return r})(),RB=(()=>{class r{constructor(e,n,o){this._elementRef=e,this._platform=n,this._document=o}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(Hn),ie(Ui))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-toolbar"]],contentQueries:function(n,o,s){if(n&1&&Sn(s,i8e,5),n&2){let l;Yt(l=Kt())&&(o._toolbarRows=l)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(n,o){n&2&&(Hr(o.color?"mat-"+o.color:""),oi("mat-toolbar-multiple-rows",o._toolbarRows.length>0)("mat-toolbar-single-row",o._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[yt],ngContentSelectors:t8e,decls:2,vars:0,template:function(n,o){n&1&&(Qi(e8e),pi(0),pi(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-app-surface));color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-app-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-app-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-app-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-app-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-app-title-large-tracking));margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}}return r})();var FB=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[on,on]})}}return r})();var Cfe=(()=>{class r{configService;languageService;headerLogo;headerLogoPrint;constructor(e,n){this.configService=e,this.languageService=n,this.computeHeader()}computeHeader(){this.headerLogo=this.configService.getConfig("header.logo"),this.headerLogoPrint=this.configService.getConfig("header.logoPrint")}static \u0275fac=function(n){return new(n||r)(ie(Ri),ie(wn))};static \u0275cmp=gt({type:r,selectors:[["app-header"]],standalone:!0,features:[yt],decls:21,vars:14,consts:[["role","banner","color","primary",1,"banner"],[1,"container"],[1,"row"],[1,"col-6","col-md-10","d-flex","flex-wrap","align-items-center","zone-logo-title"],["tabindex","5","routerLink","",1,"logo"],["id","header-logo","alt","Logo",3,"src"],["id","header-logo-print","alt","Logo","width","199","height","60",3,"src"],["lang","fr","id","title-desktop",1,"zone-title","d-none","d-md-block"],[1,"col-6","col-md-2","d-flex","justify-content-end","zone-links"],[1,"nav","flex-column"],["rel","noopener noreferrer","alt","('header.contactUsUrl' | translate)","target","_blank",3,"href"],["lang","fr","id","title-mobile",1,"zone-title","d-md-none","col-12"]],template:function(n,o){n&1&&(ne(0,"mat-toolbar",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),wt(5,"img",5),ce(),wt(6,"img",6),ne(7,"p",7),Ye(8),Ne(9,"translate"),ce()(),ne(10,"div",8)(11,"ul",9)(12,"li")(13,"a",10),Ne(14,"translate"),Ye(15),Ne(16,"translate"),ce()()()(),ne(17,"p",11)(18,"a"),Ye(19),Ne(20,"translate"),ce()()()()()),n&2&&(q(5),Wr("src",o.headerLogo,pl),q(),Wr("src",o.headerLogoPrint,pl),q(2),Qt(" ",je(9,6,"header.title")," "),q(5),Wr("href",je(14,8,"header.contactUsUrl"),pl),q(2),Si(je(16,10,"header.contactUs")),q(4),Si(je(20,12,"header.title")))},dependencies:[FB,RB,Wh,hn],styles:[".portal-with-header{height:calc(100% - 72px)!important}@media screen and (min-width: 824px){  .portal-with-header{height:calc(100% - 72px)!important}}[_ngcontent-%COMP%]:root{--breakpoint-pgu-sm: 403px;--breakpoint-sm: 576px;--breakpoint-md: 768px;--breakpoint-lg: 992px;--breakpoint-xl: 1200px}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0!important;width:100%;font-size:16px;font-family:Open sans,sans-serif}@media (min-width: 1280px) and (orientation: landscape){body[_ngcontent-%COMP%]{margin:0!important}}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%], div[_ngcontent-%COMP%], span[_ngcontent-%COMP%], a[_ngcontent-%COMP%], header[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]{margin:0;padding:0;border:0;vertical-align:baseline}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{font-family:Open sans,sans-serif}.col-6[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%]{position:relative;width:100%}.col-12[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}.container[_ngcontent-%COMP%]{width:100%;margin-right:auto;margin-left:auto}.row[_ngcontent-%COMP%]{-ms-display:flex;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;width:98%;align-content:center;margin:auto}.col-6[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:700;color:#095797!important}a[_ngcontent-%COMP%]{word-break:break-word;overflow-wrap:break-word}img[_ngcontent-%COMP%]{vertical-align:middle;border-style:none}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}.d-none[_ngcontent-%COMP%]{display:none}.flex-column[_ngcontent-%COMP%]{display:flex;flex-direction:column!important}.flex-wrap[_ngcontent-%COMP%]{flex-wrap:wrap!important}.d-flex[_ngcontent-%COMP%]{display:-ms-flexbox!important;display:flex!important}.align-items-center[_ngcontent-%COMP%]{-ms-flex-align:center!important;align-items:center!important}.justify-content-end[_ngcontent-%COMP%]{-ms-flex-pack:end!important;justify-content:flex-end!important}d-md-none[_ngcontent-%COMP%]{display:none}.align-self-end[_ngcontent-%COMP%]{align-self:flex-end!important}.banner[_ngcontent-%COMP%]{display:flex;width:100%;height:72px;box-sizing:border-box;font-family:Roboto,sans-serif;margin:0;padding:0;border:0;font-size:100%;vertical-align:baseline}a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.zone-logo-title[_ngcontent-%COMP%]{padding:.5rem 1.1rem .5rem 0}.zone-title[_ngcontent-%COMP%]{font-size:1rem}.zone-links[_ngcontent-%COMP%]{padding-left:1.1rem;max-width:100%;margin:auto;list-style:none;display:block;color:#fff}#header-logo[_ngcontent-%COMP%]{width:100%;min-width:7rem;max-height:28px}#header-logo-print[_ngcontent-%COMP%]{display:none}.zone-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font: .8rem/1.2rem roboto,sans-serif;-webkit-font-smoothing:antialiased;text-align:left;flex-wrap:wrap;list-style:none;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{padding:0}.zone-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .zone-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{text-decoration:underline;cursor:pointer}.buttonLanguage[_ngcontent-%COMP%]{background:none;border-style:none;padding:0;font: .8rem/1rem roboto,sans-serif;color:unset}#title-mobile[_ngcontent-%COMP%]{margin:auto 0;display:block}#title-desktop[_ngcontent-%COMP%]{display:none;color:#fff;margin:auto 0;padding:0}  igo-spinner{position:absolute;top:76px!important;right:4px;z-index:100}@media screen and (min-width: 576px){.zone-logo-title[_ngcontent-%COMP%], .zone-links[_ngcontent-%COMP%]{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}}@media screen and (min-width: 768px){.col-md-10[_ngcontent-%COMP%]{flex:0 0 83.33333%;max-width:83.33333%}.zone-links[_ngcontent-%COMP%]{-ms-flex:0 0 16.66667%;flex:0 0 16.66667%;max-width:16.66667%}#header-logo[_ngcontent-%COMP%]{max-height:39px;padding-right:3.75rem}.banner[_ngcontent-%COMP%]{height:72px}.d-md-block[_ngcontent-%COMP%]{display:block!important}.d-md-none[_ngcontent-%COMP%]{display:none!important}.zone-logo-title[_ngcontent-%COMP%]{-ms-flex:0 0 83.33333%;flex:0 0 83.33333%;max-width:83.33333%}  igo-spinner{top:76px!important;right:4px;z-index:100}}"]})}return r})();var LB=class{};function NB(r){return r&&typeof r.connect=="function"&&!(r instanceof V0)}var pE=function(r){return r[r.REPLACED=0]="REPLACED",r[r.INSERTED=1]="INSERTED",r[r.MOVED=2]="MOVED",r[r.REMOVED=3]="REMOVED",r}(pE||{}),oP=new At("_ViewRepeater"),mE=class{applyChanges(i,e,n,o,s){i.forEachOperation((l,h,p)=>{let m,f;if(l.previousIndex==null){let g=n(l,h,p);m=e.createEmbeddedView(g.templateRef,g.context,g.index),f=pE.INSERTED}else p==null?(e.remove(h),f=pE.REMOVED):(m=e.get(h),e.move(m,p),f=pE.MOVED);s&&s({context:m?.context,operation:f,record:l})})}detach(){}};var hv=class{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(i=!1,e,n=!0,o){this._multiple=i,this._emitChanges=n,this.compareWith=o,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Dt,e&&e.length&&(i?e.forEach(s=>this._markSelected(s)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...i){this._verifyValueAssignment(i),i.forEach(n=>this._markSelected(n));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...i){this._verifyValueAssignment(i),i.forEach(n=>this._unmarkSelected(n));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...i){this._verifyValueAssignment(i);let e=this.selected,n=new Set(i);i.forEach(s=>this._markSelected(s)),e.filter(s=>!n.has(this._getConcreteValue(s,n))).forEach(s=>this._unmarkSelected(s));let o=this._hasQueuedChanges();return this._emitChangeEvent(),o}toggle(i){return this.isSelected(i)?this.deselect(i):this.select(i)}clear(i=!0){this._unmarkAll();let e=this._hasQueuedChanges();return i&&this._emitChangeEvent(),e}isSelected(i){return this._selection.has(this._getConcreteValue(i))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(i){this._multiple&&this.selected&&this._selected.sort(i)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(i){i=this._getConcreteValue(i),this.isSelected(i)||(this._multiple||this._unmarkAll(),this.isSelected(i)||this._selection.add(i),this._emitChanges&&this._selectedToEmit.push(i))}_unmarkSelected(i){i=this._getConcreteValue(i),this.isSelected(i)&&(this._selection.delete(i),this._emitChanges&&this._deselectedToEmit.push(i))}_unmarkAll(){this.isEmpty()||this._selection.forEach(i=>this._unmarkSelected(i))}_verifyValueAssignment(i){i.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(i,e){if(this.compareWith){e=e??this._selection;for(let n of e)if(this.compareWith(i,n))return n;return i}else return i}};var xfe=(()=>{class r{constructor(){this._listeners=[]}notify(e,n){for(let o of this._listeners)o(e,n)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(n=>e!==n)}}ngOnDestroy(){this._listeners=[]}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var r8e=20,Lg=(()=>{class r{constructor(e,n,o){this._ngZone=e,this._platform=n,this._scrolled=new Dt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=r8e){return this._platform.isBrowser?new si(n=>{this._globalSubscription||this._addGlobalListener();let o=e>0?this._scrolled.pipe(E5(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Vt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){let o=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(mn(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(e){let n=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,e)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let o=ac(n),s=e.getElementRef().nativeElement;do if(o==s)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return Ds(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(n){return new(n||r)(xe(ci),xe(Hn),xe(Ui,8))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Ng=(()=>{class r{constructor(e,n,o,s){this.elementRef=e,this.scrollDispatcher=n,this.ngZone=o,this.dir=s,this._destroyed=new Dt,this._elementScrolled=new si(l=>this.ngZone.runOutsideAngular(()=>Ds(this.elementRef.nativeElement,"scroll").pipe(rn(this._destroyed)).subscribe(l)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){let n=this.elementRef.nativeElement,o=this.dir&&this.dir.value=="rtl";e.left==null&&(e.left=o?e.end:e.start),e.right==null&&(e.right=o?e.start:e.end),e.bottom!=null&&(e.top=n.scrollHeight-n.clientHeight-e.bottom),o&&JT()!=Eg.NORMAL?(e.left!=null&&(e.right=n.scrollWidth-n.clientWidth-e.left),JT()==Eg.INVERTED?e.left=e.right:JT()==Eg.NEGATED&&(e.left=e.right?-e.right:e.right)):e.right!=null&&(e.left=n.scrollWidth-n.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){let n=this.elementRef.nativeElement;$N()?n.scrollTo(e):(e.top!=null&&(n.scrollTop=e.top),e.left!=null&&(n.scrollLeft=e.left))}measureScrollOffset(e){let n="left",o="right",s=this.elementRef.nativeElement;if(e=="top")return s.scrollTop;if(e=="bottom")return s.scrollHeight-s.clientHeight-s.scrollTop;let l=this.dir&&this.dir.value=="rtl";return e=="start"?e=l?o:n:e=="end"&&(e=l?n:o),l&&JT()==Eg.INVERTED?e==n?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:l&&JT()==Eg.NEGATED?e==n?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==n?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(Lg),ie(ci),ie(To,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}}return r})(),o8e=20,gu=(()=>{class r{constructor(e,n,o){this._platform=e,this._change=new Dt,this._changeListener=s=>{this._change.next(s)},this._document=o,n.runOutsideAngular(()=>{if(e.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:n,height:o}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+o,right:e.left+n,height:o,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,n=this._getWindow(),o=e.documentElement,s=o.getBoundingClientRect(),l=-s.top||e.body.scrollTop||n.scrollY||o.scrollTop||0,h=-s.left||e.body.scrollLeft||n.scrollX||o.scrollLeft||0;return{top:l,left:h}}change(e=o8e){return e>0?this._change.pipe(E5(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(n){return new(n||r)(xe(Hn),xe(ci),xe(Ui,8))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Xh=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({})}}return r})(),sP=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[xw,Xh,xw,Xh]})}}return r})();var aP=class{attach(i){return this._attachedHost=i,i.attach(this)}detach(){let i=this._attachedHost;i!=null&&(this._attachedHost=null,i.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(i){this._attachedHost=i}},Bg=class extends aP{constructor(i,e,n,o,s){super(),this.component=i,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=o,this.projectableNodes=s}},_u=class extends aP{constructor(i,e,n,o){super(),this.templateRef=i,this.viewContainerRef=e,this.context=n,this.injector=o}get origin(){return this.templateRef.elementRef}attach(i,e=this.context){return this.context=e,super.attach(i)}detach(){return this.context=void 0,super.detach()}},Jq=class extends aP{constructor(i){super(),this.element=i instanceof Ht?i.nativeElement:i}},fE=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(i){if(i instanceof Bg)return this._attachedPortal=i,this.attachComponentPortal(i);if(i instanceof _u)return this._attachedPortal=i,this.attachTemplatePortal(i);if(this.attachDomPortal&&i instanceof Jq)return this._attachedPortal=i,this.attachDomPortal(i)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(i){this._disposeFn=i}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var lP=class extends fE{constructor(i,e,n,o,s){super(),this.outletElement=i,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=o,this.attachDomPortal=l=>{this._document;let h=l.element;h.parentNode;let p=this._document.createComment("dom-portal");h.parentNode.insertBefore(p,h),this.outletElement.appendChild(h),this._attachedPortal=l,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(h,p)})},this._document=s}attachComponentPortal(i){let n=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),o;return i.viewContainerRef?(o=i.viewContainerRef.createComponent(n,i.viewContainerRef.length,i.injector||i.viewContainerRef.injector,i.projectableNodes||void 0),this.setDisposeFn(()=>o.destroy())):(o=n.create(i.injector||this._defaultInjector||yn.NULL),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(o.hostView),o.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(o)),this._attachedPortal=i,o}attachTemplatePortal(i){let e=i.viewContainerRef,n=e.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return n.rootNodes.forEach(o=>this.outletElement.appendChild(o)),n.detectChanges(),this.setDisposeFn(()=>{let o=e.indexOf(n);o!==-1&&e.remove(o)}),this._attachedPortal=i,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(i){return i.hostView.rootNodes[0]}};var Sfe=(()=>{class r extends _u{constructor(e,n){super(e,n)}static{this.\u0275fac=function(n){return new(n||r)(ie(jo),ie(Io))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],standalone:!0,features:[fn]})}}return r})();var pf=(()=>{class r extends fE{constructor(e,n,o){super(),this._componentFactoryResolver=e,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new it,this.attachDomPortal=s=>{this._document;let l=s.element;l.parentNode;let h=this._document.createComment("dom-portal");s.setAttachedHost(this),l.parentNode.insertBefore(h,l),this._getRootNode().appendChild(l),this._attachedPortal=s,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(l,h)})},this._document=o}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let n=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),l=n.createComponent(s,n.length,e.injector||n.injector,e.projectableNodes||void 0);return n!==this._viewContainerRef&&this._getRootNode().appendChild(l.hostView.rootNodes[0]),super.setDisposeFn(()=>l.destroy()),this._attachedPortal=e,this._attachedRef=l,this.attached.emit(l),l}attachTemplatePortal(e){e.setAttachedHost(this);let n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static{this.\u0275fac=function(n){return new(n||r)(ie(au),ie(Io),ie(Ui))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[fn]})}}return r})();var pv=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({})}}return r})();var Ife=$N(),eY=class{constructor(i,e){this._viewportRuler=i,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let i=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=i.style.left||"",this._previousHTMLStyles.top=i.style.top||"",i.style.left=Ec(-this._previousScrollPosition.left),i.style.top=Ec(-this._previousScrollPosition.top),i.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let i=this._document.documentElement,e=this._document.body,n=i.style,o=e.style,s=n.scrollBehavior||"",l=o.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,i.classList.remove("cdk-global-scrollblock"),Ife&&(n.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Ife&&(n.scrollBehavior=s,o.scrollBehavior=l)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}};var tY=class{constructor(i,e,n,o){this._scrollDispatcher=i,this._ngZone=e,this._viewportRuler=n,this._config=o,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(i){this._overlayRef,this._overlayRef=i}enable(){if(this._scrollSubscription)return;let i=this._scrollDispatcher.scrolled(0).pipe(mn(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=i.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=i.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},BB=class{enable(){}disable(){}attach(){}};function iY(r,i){return i.some(e=>{let n=r.bottom<e.top,o=r.top>e.bottom,s=r.right<e.left,l=r.left>e.right;return n||o||s||l})}function Tfe(r,i){return i.some(e=>{let n=r.top<e.top,o=r.bottom>e.bottom,s=r.left<e.left,l=r.right>e.right;return n||o||s||l})}var nY=class{constructor(i,e,n,o){this._scrollDispatcher=i,this._viewportRuler=e,this._ngZone=n,this._config=o,this._scrollSubscription=null}attach(i){this._overlayRef,this._overlayRef=i}enable(){if(!this._scrollSubscription){let i=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(i).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:o}=this._viewportRuler.getViewportSize();iY(e,[{width:n,height:o,bottom:o,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},s8e=(()=>{class r{constructor(e,n,o,s){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=o,this.noop=()=>new BB,this.close=l=>new tY(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new eY(this._viewportRuler,this._document),this.reposition=l=>new nY(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=s}static{this.\u0275fac=function(n){return new(n||r)(xe(Lg),xe(gu),xe(ci),xe(Ui))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),mf=class{constructor(i){if(this.scrollStrategy=new BB,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,i){let e=Object.keys(i);for(let n of e)i[n]!==void 0&&(this[n]=i[n])}}};var rY=class{constructor(i,e){this.connectionPair=i,this.scrollableViewProperties=e}};var Ofe=(()=>{class r{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),this._attachedOverlays.length===0&&this.detach()}static{this.\u0275fac=function(n){return new(n||r)(xe(Ui))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),a8e=(()=>{class r extends Ofe{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=o=>{let s=this._attachedOverlays;for(let l=s.length-1;l>-1;l--)if(s[l]._keydownEvents.observers.length>0){let h=s[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>h.next(o)):h.next(o);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(n){return new(n||r)(xe(Ui),xe(ci,8))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),l8e=(()=>{class r extends Ofe{constructor(e,n,o){super(e),this._platform=n,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Hc(s)},this._clickListener=s=>{let l=Hc(s),h=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;let p=this._attachedOverlays.slice();for(let m=p.length-1;m>-1;m--){let f=p[m];if(f._outsidePointerEvents.observers.length<1||!f.hasAttached())continue;if(Afe(f.overlayElement,l)||Afe(f.overlayElement,h))break;let g=f._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>g.next(s)):g.next(s)}}}add(e){if(super.add(e),!this._isAttached){let n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(n){return new(n||r)(xe(Ui),xe(Hn),xe(ci,8))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function Afe(r,i){let e=typeof ShadowRoot<"u"&&ShadowRoot,n=i;for(;n;){if(n===r)return!0;n=e&&n instanceof ShadowRoot?n.host:n.parentNode}return!1}var gE=(()=>{class r{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||Wk()){let o=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<o.length;s++)o[s].remove()}let n=this._document.createElement("div");n.classList.add(e),Wk()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}static{this.\u0275fac=function(n){return new(n||r)(xe(Ui),xe(Hn))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),mv=class{constructor(i,e,n,o,s,l,h,p,m,f=!1,g){this._portalOutlet=i,this._host=e,this._pane=n,this._config=o,this._ngZone=s,this._keyboardDispatcher=l,this._document=h,this._location=p,this._outsideClickDispatcher=m,this._animationsDisabled=f,this._injector=g,this._backdropElement=null,this._backdropClick=new Dt,this._attachments=new Dt,this._detachments=new Dt,this._locationChanges=pn.EMPTY,this._backdropClickHandler=y=>this._backdropClick.next(y),this._backdropTransitionendHandler=y=>{this._disposeBackdrop(y.target)},this._keydownEvents=new Dt,this._outsidePointerEvents=new Dt,this._renders=new Dt,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy,this._afterRenderRef=vp(()=>ok(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(i){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(i);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=ks(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let i=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),i}dispose(){let i=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,i&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(i){i!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=i,this.hasAttached()&&(i.attach(this),this.updatePosition()))}updateSize(i){this._config=Xe(Xe({},this._config),i),this._updateElementSize()}setDirection(i){this._config=li(Xe({},this._config),{direction:i}),this._updateElementDirection()}addPanelClass(i){this._pane&&this._toggleClasses(this._pane,i,!0)}removePanelClass(i){this._pane&&this._toggleClasses(this._pane,i,!1)}getDirection(){let i=this._config.direction;return i?typeof i=="string"?i:i.value:"ltr"}updateScrollStrategy(i){i!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=i,this.hasAttached()&&(i.attach(this),i.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let i=this._pane.style;i.width=Ec(this._config.width),i.height=Ec(this._config.height),i.minWidth=Ec(this._config.minWidth),i.minHeight=Ec(this._config.minHeight),i.maxWidth=Ec(this._config.maxWidth),i.maxHeight=Ec(this._config.maxHeight)}_togglePointerEvents(i){this._pane.style.pointerEvents=i?"":"none"}_attachBackdrop(){let i="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(i)})}):this._backdropElement.classList.add(i)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let i=this._backdropElement;if(i){if(this._animationsDisabled){this._disposeBackdrop(i);return}i.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{i.addEventListener("transitionend",this._backdropTransitionendHandler)}),i.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(i)},500))}}_toggleClasses(i,e,n){let o=vw(e||[]).filter(s=>!!s);o.length&&(n?i.classList.add(...o):i.classList.remove(...o))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let i=this._renders.pipe(rn(vr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),i.unsubscribe())})})}_disposeScrollStrategy(){let i=this._scrollStrategy;i&&(i.disable(),i.detach&&i.detach())}_disposeBackdrop(i){i&&(i.removeEventListener("click",this._backdropClickHandler),i.removeEventListener("transitionend",this._backdropTransitionendHandler),i.remove(),this._backdropElement===i&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},Efe="cdk-overlay-connected-position-bounding-box",c8e=/([A-Za-z%]+)$/,cP=class{get positions(){return this._preferredPositions}constructor(i,e,n,o,s){this._viewportRuler=e,this._document=n,this._platform=o,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Dt,this._resizeSubscription=pn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(i)}attach(i){this._overlayRef&&this._overlayRef,this._validatePositions(),i.hostElement.classList.add(Efe),this._overlayRef=i,this._boundingBox=i.hostElement,this._pane=i.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let i=this._originRect,e=this._overlayRect,n=this._viewportRect,o=this._containerRect,s=[],l;for(let h of this._preferredPositions){let p=this._getOriginPoint(i,o,h),m=this._getOverlayPoint(p,e,h),f=this._getOverlayFit(m,e,n,h);if(f.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(h,p);return}if(this._canFitWithFlexibleDimensions(f,m,n)){s.push({position:h,origin:p,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(p,h)});continue}(!l||l.overlayFit.visibleArea<f.visibleArea)&&(l={overlayFit:f,overlayPoint:m,originPoint:p,position:h,overlayRect:e})}if(s.length){let h=null,p=-1;for(let m of s){let f=m.boundingBoxRect.width*m.boundingBoxRect.height*(m.position.weight||1);f>p&&(p=f,h=m)}this._isPushed=!1,this._applyPosition(h.position,h.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(l.position,l.originPoint);return}this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&fS(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Efe),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let i=this._lastPosition;if(i){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,i);this._applyPosition(i,e)}else this.apply()}withScrollableContainers(i){return this._scrollables=i,this}withPositions(i){return this._preferredPositions=i,i.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(i){return this._viewportMargin=i,this}withFlexibleDimensions(i=!0){return this._hasFlexibleDimensions=i,this}withGrowAfterOpen(i=!0){return this._growAfterOpen=i,this}withPush(i=!0){return this._canPush=i,this}withLockedPosition(i=!0){return this._positionLocked=i,this}setOrigin(i){return this._origin=i,this}withDefaultOffsetX(i){return this._offsetX=i,this}withDefaultOffsetY(i){return this._offsetY=i,this}withTransformOriginOn(i){return this._transformOriginSelector=i,this}_getOriginPoint(i,e,n){let o;if(n.originX=="center")o=i.left+i.width/2;else{let l=this._isRtl()?i.right:i.left,h=this._isRtl()?i.left:i.right;o=n.originX=="start"?l:h}e.left<0&&(o-=e.left);let s;return n.originY=="center"?s=i.top+i.height/2:s=n.originY=="top"?i.top:i.bottom,e.top<0&&(s-=e.top),{x:o,y:s}}_getOverlayPoint(i,e,n){let o;n.overlayX=="center"?o=-e.width/2:n.overlayX==="start"?o=this._isRtl()?-e.width:0:o=this._isRtl()?0:-e.width;let s;return n.overlayY=="center"?s=-e.height/2:s=n.overlayY=="top"?0:-e.height,{x:i.x+o,y:i.y+s}}_getOverlayFit(i,e,n,o){let s=Dfe(e),{x:l,y:h}=i,p=this._getOffset(o,"x"),m=this._getOffset(o,"y");p&&(l+=p),m&&(h+=m);let f=0-l,g=l+s.width-n.width,y=0-h,_=h+s.height-n.height,w=this._subtractOverflows(s.width,f,g),A=this._subtractOverflows(s.height,y,_),k=w*A;return{visibleArea:k,isCompletelyWithinViewport:s.width*s.height===k,fitsInViewportVertically:A===s.height,fitsInViewportHorizontally:w==s.width}}_canFitWithFlexibleDimensions(i,e,n){if(this._hasFlexibleDimensions){let o=n.bottom-e.y,s=n.right-e.x,l=Mfe(this._overlayRef.getConfig().minHeight),h=Mfe(this._overlayRef.getConfig().minWidth),p=i.fitsInViewportVertically||l!=null&&l<=o,m=i.fitsInViewportHorizontally||h!=null&&h<=s;return p&&m}return!1}_pushOverlayOnScreen(i,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:i.x+this._previousPushAmount.x,y:i.y+this._previousPushAmount.y};let o=Dfe(e),s=this._viewportRect,l=Math.max(i.x+o.width-s.width,0),h=Math.max(i.y+o.height-s.height,0),p=Math.max(s.top-n.top-i.y,0),m=Math.max(s.left-n.left-i.x,0),f=0,g=0;return o.width<=s.width?f=m||-l:f=i.x<this._viewportMargin?s.left-n.left-i.x:0,o.height<=s.height?g=p||-h:g=i.y<this._viewportMargin?s.top-n.top-i.y:0,this._previousPushAmount={x:f,y:g},{x:i.x+f,y:i.y+g}}_applyPosition(i,e){if(this._setTransformOrigin(i),this._setOverlayElementStyles(e,i),this._setBoundingBoxStyles(e,i),i.panelClass&&this._addPanelClasses(i.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(i!==this._lastPosition||!this._lastScrollVisibility||!d8e(this._lastScrollVisibility,n)){let o=new rY(i,n);this._positionChanges.next(o)}this._lastScrollVisibility=n}this._lastPosition=i,this._isInitialRender=!1}_setTransformOrigin(i){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,o=i.overlayY;i.overlayX==="center"?n="center":this._isRtl()?n=i.overlayX==="start"?"right":"left":n=i.overlayX==="start"?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${n} ${o}`}_calculateBoundingBoxRect(i,e){let n=this._viewportRect,o=this._isRtl(),s,l,h;if(e.overlayY==="top")l=i.y,s=n.height-l+this._viewportMargin;else if(e.overlayY==="bottom")h=n.height-i.y+this._viewportMargin*2,s=n.height-h+this._viewportMargin;else{let _=Math.min(n.bottom-i.y+n.top,i.y),w=this._lastBoundingBoxSize.height;s=_*2,l=i.y-_,s>w&&!this._isInitialRender&&!this._growAfterOpen&&(l=i.y-w/2)}let p=e.overlayX==="start"&&!o||e.overlayX==="end"&&o,m=e.overlayX==="end"&&!o||e.overlayX==="start"&&o,f,g,y;if(m)y=n.width-i.x+this._viewportMargin*2,f=i.x-this._viewportMargin;else if(p)g=i.x,f=n.right-i.x;else{let _=Math.min(n.right-i.x+n.left,i.x),w=this._lastBoundingBoxSize.width;f=_*2,g=i.x-_,f>w&&!this._isInitialRender&&!this._growAfterOpen&&(g=i.x-w/2)}return{top:l,left:g,bottom:h,right:y,width:f,height:s}}_setBoundingBoxStyles(i,e){let n=this._calculateBoundingBoxRect(i,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,l=this._overlayRef.getConfig().maxWidth;o.height=Ec(n.height),o.top=Ec(n.top),o.bottom=Ec(n.bottom),o.width=Ec(n.width),o.left=Ec(n.left),o.right=Ec(n.right),e.overlayX==="center"?o.alignItems="center":o.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?o.justifyContent="center":o.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",s&&(o.maxHeight=Ec(s)),l&&(o.maxWidth=Ec(l))}this._lastBoundingBoxSize=n,fS(this._boundingBox.style,o)}_resetBoundingBoxStyles(){fS(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){fS(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(i,e){let n={},o=this._hasExactPosition(),s=this._hasFlexibleDimensions,l=this._overlayRef.getConfig();if(o){let f=this._viewportRuler.getViewportScrollPosition();fS(n,this._getExactOverlayY(e,i,f)),fS(n,this._getExactOverlayX(e,i,f))}else n.position="static";let h="",p=this._getOffset(e,"x"),m=this._getOffset(e,"y");p&&(h+=`translateX(${p}px) `),m&&(h+=`translateY(${m}px)`),n.transform=h.trim(),l.maxHeight&&(o?n.maxHeight=Ec(l.maxHeight):s&&(n.maxHeight="")),l.maxWidth&&(o?n.maxWidth=Ec(l.maxWidth):s&&(n.maxWidth="")),fS(this._pane.style,n)}_getExactOverlayY(i,e,n){let o={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,i);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),i.overlayY==="bottom"){let l=this._document.documentElement.clientHeight;o.bottom=`${l-(s.y+this._overlayRect.height)}px`}else o.top=Ec(s.y);return o}_getExactOverlayX(i,e,n){let o={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,i);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n));let l;if(this._isRtl()?l=i.overlayX==="end"?"left":"right":l=i.overlayX==="end"?"right":"left",l==="right"){let h=this._document.documentElement.clientWidth;o.right=`${h-(s.x+this._overlayRect.width)}px`}else o.left=Ec(s.x);return o}_getScrollVisibility(){let i=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Tfe(i,n),isOriginOutsideView:iY(i,n),isOverlayClipped:Tfe(e,n),isOverlayOutsideView:iY(e,n)}}_subtractOverflows(i,...e){return e.reduce((n,o)=>n-Math.max(o,0),i)}_getNarrowedViewportRect(){let i=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+i-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:i-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(i,e){return e==="x"?i.offsetX==null?this._offsetX:i.offsetX:i.offsetY==null?this._offsetY:i.offsetY}_validatePositions(){}_addPanelClasses(i){this._pane&&vw(i).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(i=>{this._pane.classList.remove(i)}),this._appliedPanelClasses=[])}_getOriginRect(){let i=this._origin;if(i instanceof Ht)return i.nativeElement.getBoundingClientRect();if(i instanceof Element)return i.getBoundingClientRect();let e=i.width||0,n=i.height||0;return{top:i.y,bottom:i.y+n,left:i.x,right:i.x+e,height:n,width:e}}};function fS(r,i){for(let e in i)i.hasOwnProperty(e)&&(r[e]=i[e]);return r}function Mfe(r){if(typeof r!="number"&&r!=null){let[i,e]=r.split(c8e);return!e||e==="px"?parseFloat(i):null}return r||null}function Dfe(r){return{top:Math.floor(r.top),right:Math.floor(r.right),bottom:Math.floor(r.bottom),left:Math.floor(r.left),width:Math.floor(r.width),height:Math.floor(r.height)}}function d8e(r,i){return r===i?!0:r.isOriginClipped===i.isOriginClipped&&r.isOriginOutsideView===i.isOriginOutsideView&&r.isOverlayClipped===i.isOverlayClipped&&r.isOverlayOutsideView===i.isOverlayOutsideView}var kfe="cdk-global-overlay-wrapper",oY=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(i){let e=i.getConfig();this._overlayRef=i,this._width&&!e.width&&i.updateSize({width:this._width}),this._height&&!e.height&&i.updateSize({height:this._height}),i.hostElement.classList.add(kfe),this._isDisposed=!1}top(i=""){return this._bottomOffset="",this._topOffset=i,this._alignItems="flex-start",this}left(i=""){return this._xOffset=i,this._xPosition="left",this}bottom(i=""){return this._topOffset="",this._bottomOffset=i,this._alignItems="flex-end",this}right(i=""){return this._xOffset=i,this._xPosition="right",this}start(i=""){return this._xOffset=i,this._xPosition="start",this}end(i=""){return this._xOffset=i,this._xPosition="end",this}width(i=""){return this._overlayRef?this._overlayRef.updateSize({width:i}):this._width=i,this}height(i=""){return this._overlayRef?this._overlayRef.updateSize({height:i}):this._height=i,this}centerHorizontally(i=""){return this.left(i),this._xPosition="center",this}centerVertically(i=""){return this.top(i),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let i=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:o,height:s,maxWidth:l,maxHeight:h}=n,p=(o==="100%"||o==="100vw")&&(!l||l==="100%"||l==="100vw"),m=(s==="100%"||s==="100vh")&&(!h||h==="100%"||h==="100vh"),f=this._xPosition,g=this._xOffset,y=this._overlayRef.getConfig().direction==="rtl",_="",w="",A="";p?A="flex-start":f==="center"?(A="center",y?w=g:_=g):y?f==="left"||f==="end"?(A="flex-end",_=g):(f==="right"||f==="start")&&(A="flex-start",w=g):f==="left"||f==="start"?(A="flex-start",_=g):(f==="right"||f==="end")&&(A="flex-end",w=g),i.position=this._cssPosition,i.marginLeft=p?"0":_,i.marginTop=m?"0":this._topOffset,i.marginBottom=this._bottomOffset,i.marginRight=p?"0":w,e.justifyContent=A,e.alignItems=m?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let i=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(kfe),n.justifyContent=n.alignItems=i.marginTop=i.marginBottom=i.marginLeft=i.marginRight=i.position="",this._overlayRef=null,this._isDisposed=!0}},u8e=(()=>{class r{constructor(e,n,o,s){this._viewportRuler=e,this._document=n,this._platform=o,this._overlayContainer=s}global(){return new oY}flexibleConnectedTo(e){return new cP(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(n){return new(n||r)(xe(gu),xe(Ui),xe(Hn),xe(gE))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),h8e=0,Ro=(()=>{class r{constructor(e,n,o,s,l,h,p,m,f,g,y,_){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=o,this._positionBuilder=s,this._keyboardDispatcher=l,this._injector=h,this._ngZone=p,this._document=m,this._directionality=f,this._location=g,this._outsideClickDispatcher=y,this._animationsModuleType=_}create(e){let n=this._createHostElement(),o=this._createPaneElement(n),s=this._createPortalOutlet(o),l=new mf(e);return l.direction=l.direction||this._directionality.value,new mv(s,n,o,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(zc))}position(){return this._positionBuilder}_createPaneElement(e){let n=this._document.createElement("div");return n.id=`cdk-overlay-${h8e++}`,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(fs)),new lP(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(n){return new(n||r)(xe(s8e),xe(gE),xe(au),xe(u8e),xe(a8e),xe(yn),xe(ci),xe(Ui),xe(To),xe(pm),xe(l8e),xe(so,8))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),p8e=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Pfe=new At("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let r=Et(Ro);return()=>r.scrollStrategies.reposition()}}),dP=(()=>{class r{constructor(e){this.elementRef=e}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0})}}return r})(),sY=(()=>{class r{get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}constructor(e,n,o,s,l){this._overlay=e,this._dir=l,this._backdropSubscription=pn.EMPTY,this._attachSubscription=pn.EMPTY,this._detachSubscription=pn.EMPTY,this._positionSubscription=pn.EMPTY,this._disposeOnNavigation=!1,this._ngZone=Et(ci),this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.hasBackdrop=!1,this.lockPosition=!1,this.flexibleDimensions=!1,this.growAfterOpen=!1,this.push=!1,this.backdropClick=new it,this.positionChange=new it,this.attach=new it,this.detach=new it,this.overlayKeydown=new it,this.overlayOutsideClick=new it,this._templatePortal=new _u(n,o),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=p8e);let e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),n.keyCode===27&&!this.disableClose&&!gs(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{let o=this._getOriginElement(),s=Hc(n);(!o||o!==s&&!o.contains(s))&&this.overlayOutsideClick.next(n)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),n=new mf({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(n.width=this.width),(this.height||this.height===0)&&(n.height=this.height),(this.minWidth||this.minWidth===0)&&(n.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(e){let n=this.positions.map(o=>({originX:o.originX,originY:o.originY,overlayX:o.overlayX,overlayY:o.overlayY,offsetX:o.offsetX||this.offsetX,offsetY:o.offsetY||this.offsetY,panelClass:o.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof dP?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof dP?this.origin.elementRef.nativeElement:this.origin instanceof Ht?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(Zz(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||r)(ie(Ro),ie(jo),ie(Io),ie(Pfe),ie(To,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",Xt],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",Xt],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",Xt],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",Xt],push:[2,"cdkConnectedOverlayPush","push",Xt],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",Xt]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[an,Jn]})}}return r})();function m8e(r){return()=>r.scrollStrategies.reposition()}var f8e={provide:Pfe,deps:[Ro],useFactory:m8e},Ep=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({providers:[Ro,f8e],imports:[xw,pv,sP,sP]})}}return r})();function g8e(r,i){}var gS=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var lY=(()=>{class r extends fE{constructor(e,n,o,s,l,h,p,m){super(),this._elementRef=e,this._focusTrapFactory=n,this._config=s,this._interactivityChecker=l,this._ngZone=h,this._overlayRef=p,this._focusMonitor=m,this._platform=Et(Hn),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=Et(Ti),this._injector=Et(yn),this._isDestroyed=!1,this.attachDomPortal=f=>{this._portalOutlet.hasAttached();let g=this._portalOutlet.attachDomPortal(f);return this._contentAttached(),g},this._document=o,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let n=this._ariaLabelledByQueue.indexOf(e);n>-1&&(this._ariaLabelledByQueue.splice(n,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let n=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),n}attachTemplatePortal(e){this._portalOutlet.hasAttached();let n=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),n}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,n){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{e.removeEventListener("blur",o),e.removeEventListener("mousedown",o),e.removeAttribute("tabindex")};e.addEventListener("blur",o),e.addEventListener("mousedown",o)})),e.focus(n)}_focusByCssSelector(e,n){let o=this._elementRef.nativeElement.querySelector(e);o&&this._forceFocus(o,n)}_trapFocus(){this._isDestroyed||ks(()=>{let e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,n=null;if(typeof e=="string"?n=this._document.querySelector(e):typeof e=="boolean"?n=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(n=e),this._config.restoreFocus&&n&&typeof n.focus=="function"){let o=yw(),s=this._elementRef.nativeElement;(!o||o===this._document.body||o===s||s.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let e=this._elementRef.nativeElement,n=yw();return e===n||e.contains(n)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=yw()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(gx),ie(Ui,8),ie(gS),ie(Uy),ie(ci),ie(mv),ie(il))}}static{this.\u0275cmp=gt({type:r,selectors:[["cdk-dialog-container"]],viewQuery:function(n,o){if(n&1&&Ni(pf,7),n&2){let s;Yt(s=Kt())&&(o._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(n,o){n&2&&yi("id",o._config.id||null)("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null)},standalone:!0,features:[fn,yt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(n,o){n&1&&We(0,g8e,0,0,"ng-template",0)},dependencies:[pf],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}}return r})(),uP=class{constructor(i,e){this.overlayRef=i,this.config=e,this.closed=new Dt,this.disableClose=e.disableClose,this.backdropClick=i.backdropClick(),this.keydownEvents=i.keydownEvents(),this.outsidePointerEvents=i.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(n=>{n.keyCode===27&&!this.disableClose&&!gs(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=i.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(i,e){if(this.containerInstance){let n=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),n.next(i),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(i="",e=""){return this.overlayRef.updateSize({width:i,height:e}),this}addPanelClass(i){return this.overlayRef.addPanelClass(i),this}removePanelClass(i){return this.overlayRef.removePanelClass(i),this}},_8e=new At("DialogScrollStrategy",{providedIn:"root",factory:()=>{let r=Et(Ro);return()=>r.scrollStrategies.block()}}),y8e=new At("DialogData"),v8e=new At("DefaultDialogConfig");var b8e=0,cY=(()=>{class r{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(e,n,o,s,l,h){this._overlay=e,this._injector=n,this._defaultOptions=o,this._parentDialog=s,this._overlayContainer=l,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Dt,this._afterOpenedAtThisLevel=new Dt,this._ariaHiddenElements=new Map,this.afterAllClosed=$d(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(yo(void 0))),this._scrollStrategy=h}open(e,n){let o=this._defaultOptions||new gS;n=Xe(Xe({},o),n),n.id=n.id||`cdk-dialog-${b8e++}`,n.id&&this.getDialogById(n.id);let s=this._getOverlayConfig(n),l=this._overlay.create(s),h=new uP(l,n),p=this._attachContainer(l,h,n);return h.containerInstance=p,this._attachDialogContent(e,h,p,n),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(h),h.closed.subscribe(()=>this._removeOpenDialog(h,!0)),this.afterOpened.next(h),h}closeAll(){aY(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){aY(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),aY(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let n=new mf({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachContainer(e,n,o){let s=o.injector||o.viewContainerRef?.injector,l=[{provide:gS,useValue:o},{provide:uP,useValue:n},{provide:mv,useValue:e}],h;o.container?typeof o.container=="function"?h=o.container:(h=o.container.type,l.push(...o.container.providers(o))):h=lY;let p=new Bg(h,o.viewContainerRef,yn.create({parent:s||this._injector,providers:l}),o.componentFactoryResolver);return e.attach(p).instance}_attachDialogContent(e,n,o,s){if(e instanceof jo){let l=this._createInjector(s,n,o,void 0),h={$implicit:s.data,dialogRef:n};s.templateContext&&(h=Xe(Xe({},h),typeof s.templateContext=="function"?s.templateContext():s.templateContext)),o.attachTemplatePortal(new _u(e,null,h,l))}else{let l=this._createInjector(s,n,o,this._injector),h=o.attachComponentPortal(new Bg(e,s.viewContainerRef,l,s.componentFactoryResolver));n.componentRef=h,n.componentInstance=h.instance}}_createInjector(e,n,o,s){let l=e.injector||e.viewContainerRef?.injector,h=[{provide:y8e,useValue:e.data},{provide:uP,useValue:n}];return e.providers&&(typeof e.providers=="function"?h.push(...e.providers(n,e,o)):h.push(...e.providers)),e.direction&&(!l||!l.get(To,null,{optional:!0}))&&h.push({provide:To,useValue:{value:e.direction,change:Vt()}}),yn.create({parent:l||s,providers:h})}_removeOpenDialog(e,n){let o=this.openDialogs.indexOf(e);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,l)=>{s?l.setAttribute("aria-hidden",s):l.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let e=this._overlayContainer.getContainerElement();if(e.parentElement){let n=e.parentElement.children;for(let o=n.length-1;o>-1;o--){let s=n[o];s!==e&&s.nodeName!=="SCRIPT"&&s.nodeName!=="STYLE"&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static{this.\u0275fac=function(n){return new(n||r)(xe(Ro),xe(yn),xe(v8e,8),xe(r,12),xe(gE),xe(_8e))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function aY(r,i){let e=r.length;for(;e--;)i(r[e])}var Rfe=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({providers:[cY],imports:[Ep,pv,Cw,pv]})}}return r})();function w8e(r,i){}var _S=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},dY="mdc-dialog--open",Ffe="mdc-dialog--opening",Lfe="mdc-dialog--closing",C8e=150,x8e=75,S8e=(()=>{class r extends lY{constructor(e,n,o,s,l,h,p,m,f){super(e,n,o,s,l,h,p,f),this._animationMode=m,this._animationStateChanged=new it,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?Bfe(this._config.enterAnimationDuration)??C8e:0,this._exitAnimationDuration=this._animationsEnabled?Bfe(this._config.exitAnimationDuration)??x8e:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Nfe,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Ffe,dY)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(dY),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(dY),this._animationsEnabled?(this._hostElement.style.setProperty(Nfe,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Lfe)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(Ffe,Lfe)}_waitForAnimationToComplete(e,n){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(n,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let n=super.attachComponentPortal(e);return n.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),n}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(gx),ie(Ui,8),ie(_S),ie(Uy),ie(ci),ie(mv),ie(so,8),ie(il))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(n,o){n&2&&(hd("id",o._config.id),yi("aria-modal",o._config.ariaModal)("role",o._config.role)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null),oi("_mat-animation-noopable",!o._animationsEnabled)("mat-mdc-dialog-container-with-actions",o._actionSectionCount>0))},standalone:!0,features:[fn,yt],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(n,o){n&1&&(ne(0,"div",0)(1,"div",1),We(2,w8e,0,0,"ng-template",2),ce()())},dependencies:[pf],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12));border-radius:var(--mdc-dialog-container-shape, var(--mat-app-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-app-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-app-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-app-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-app-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-app-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-app-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-app-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-app-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-app-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-app-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-app-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-app-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.cdk-high-contrast-active .mat-mdc-dialog-actions{border-top-color:CanvasText}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}}return r})(),Nfe="--mat-dialog-transition-duration";function Bfe(r){return r==null?null:typeof r=="number"?r:r.endsWith("ms")?pd(r.substring(0,r.length-2)):r.endsWith("s")?pd(r.substring(0,r.length-1))*1e3:r==="0"?0:null}var jB=function(r){return r[r.OPEN=0]="OPEN",r[r.CLOSING=1]="CLOSING",r[r.CLOSED=2]="CLOSED",r}(jB||{}),Mp=class{constructor(i,e,n){this._ref=i,this._containerInstance=n,this._afterOpened=new Dt,this._beforeClosed=new Dt,this._state=jB.OPEN,this.disableClose=e.disableClose,this.id=i.id,i.addPanelClass("mat-mdc-dialog-panel"),n._animationStateChanged.pipe(mn(o=>o.state==="opened"),Tn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(mn(o=>o.state==="closed"),Tn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),i.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),vr(this.backdropClick(),this.keydownEvents().pipe(mn(o=>o.keyCode===27&&!this.disableClose&&!gs(o)))).subscribe(o=>{this.disableClose||(o.preventDefault(),jfe(this,o.type==="keydown"?"keyboard":"mouse"))})}close(i){this._result=i,this._containerInstance._animationStateChanged.pipe(mn(e=>e.state==="closing"),Tn(1)).subscribe(e=>{this._beforeClosed.next(i),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=jB.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(i){let e=this._ref.config.positionStrategy;return i&&(i.left||i.right)?i.left?e.left(i.left):e.right(i.right):e.centerHorizontally(),i&&(i.top||i.bottom)?i.top?e.top(i.top):e.bottom(i.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(i="",e=""){return this._ref.updateSize(i,e),this}addPanelClass(i){return this._ref.addPanelClass(i),this}removePanelClass(i){return this._ref.removePanelClass(i),this}getState(){return this._state}_finishDialogClose(){this._state=jB.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function jfe(r,i,e){return r._closeInteractionType=i,r.close(e)}var _E=new At("MatMdcDialogData"),I8e=new At("mat-mdc-dialog-default-options"),T8e=new At("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let r=Et(Ro);return()=>r.scrollStrategies.block()}});var A8e=0,vu=(()=>{class r{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(e,n,o,s,l,h,p,m){this._overlay=e,this._defaultOptions=s,this._scrollStrategy=l,this._parentDialog=h,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Dt,this._afterOpenedAtThisLevel=new Dt,this.dialogConfigClass=_S,this.afterAllClosed=$d(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(yo(void 0))),this._dialog=n.get(cY),this._dialogRefConstructor=Mp,this._dialogContainerType=S8e,this._dialogDataToken=_E}open(e,n){let o;n=Xe(Xe({},this._defaultOptions||new _S),n),n.id=n.id||`mat-mdc-dialog-${A8e++}`,n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();let s=this._dialog.open(e,li(Xe({},n),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:n},{provide:gS,useValue:n}]},templateContext:()=>({dialogRef:o}),providers:(l,h,p)=>(o=new this._dialogRefConstructor(l,n,p),o.updatePosition(n?.position),[{provide:this._dialogContainerType,useValue:p},{provide:this._dialogDataToken,useValue:h.data},{provide:this._dialogRefConstructor,useValue:o}])}));return o.componentRef=s.componentRef,o.componentInstance=s.componentInstance,this.openDialogs.push(o),this.afterOpened.next(o),o.afterClosed().subscribe(()=>{let l=this.openDialogs.indexOf(o);l>-1&&(this.openDialogs.splice(l,1),this.openDialogs.length||this._getAfterAllClosed().next())}),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}static{this.\u0275fac=function(n){return new(n||r)(xe(Ro),xe(yn),xe(pm,8),xe(I8e,8),xe(T8e),xe(r,12),xe(gE),xe(so,8))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),E8e=0,VB=(()=>{class r{constructor(e,n,o){this.dialogRef=e,this._elementRef=n,this._dialog=o,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=$fe(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){let n=e._matDialogClose||e._matDialogCloseResult;n&&(this.dialogResult=n.currentValue)}_onButtonClick(e){jfe(this.dialogRef,e.screenX===0&&e.screenY===0?"keyboard":"mouse",this.dialogResult)}static{this.\u0275fac=function(n){return new(n||r)(ie(Mp,8),ie(Ht),ie(vu))}}static{this.\u0275dir=Pt({type:r,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(n,o){n&1&&Oe("click",function(l){return o._onButtonClick(l)}),n&2&&yi("aria-label",o.ariaLabel||null)("type",o.type)},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],type:"type",dialogResult:[0,"mat-dialog-close","dialogResult"],_matDialogClose:[0,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],standalone:!0,features:[Jn]})}}return r})(),Vfe=(()=>{class r{constructor(e,n,o){this._dialogRef=e,this._elementRef=n,this._dialog=o}ngOnInit(){this._dialogRef||(this._dialogRef=$fe(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static{this.\u0275fac=function(n){return new(n||r)(ie(Mp,8),ie(Ht),ie(vu))}}static{this.\u0275dir=Pt({type:r,standalone:!0})}}return r})(),fv=(()=>{class r extends Vfe{constructor(){super(...arguments),this.id=`mat-mdc-dialog-title-${E8e++}`}_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275dir=Pt({type:r,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(n,o){n&2&&hd("id",o.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[fn]})}}return r})(),ff=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=Pt({type:r,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0,features:[qce([Ng])]})}}return r})(),gv=(()=>{class r extends Vfe{_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275dir=Pt({type:r,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(n,o){n&2&&oi("mat-mdc-dialog-actions-align-start",o.align==="start")("mat-mdc-dialog-actions-align-center",o.align==="center")("mat-mdc-dialog-actions-align-end",o.align==="end")},inputs:{align:"align"},standalone:!0,features:[fn]})}}return r})();function $fe(r,i){let e=r.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?i.find(n=>n.id===e.id):null}var hP=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({providers:[vu],imports:[Rfe,Ep,pv,on,on]})}}return r})();var zB=["*"],M8e=["content"],D8e=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],k8e=["mat-drawer","mat-drawer-content","*"];function O8e(r,i){if(r&1){let e=dt();ne(0,"div",1),Oe("click",function(){Re(e);let o=ae();return Fe(o._onBackdropClicked())}),ce()}if(r&2){let e=ae();oi("mat-drawer-shown",e._isShowingBackdrop())}}function P8e(r,i){r&1&&(ne(0,"mat-drawer-content"),pi(1,2),ce())}var R8e=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],F8e=["mat-sidenav","mat-sidenav-content","*"];function L8e(r,i){if(r&1){let e=dt();ne(0,"div",1),Oe("click",function(){Re(e);let o=ae();return Fe(o._onBackdropClicked())}),ce()}if(r&2){let e=ae();oi("mat-drawer-shown",e._isShowingBackdrop())}}function N8e(r,i){r&1&&(ne(0,"mat-sidenav-content"),pi(1,2),ce())}var B8e='.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-app-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-app-background));box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-app-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color, var(--mat-app-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}',Ufe={transformDrawer:Or("transform",[zi("open, open-instant",mi({transform:"none",visibility:"visible"})),zi("void",mi({"box-shadow":"none",visibility:"hidden"})),ln("void => open-instant",un("0ms")),ln("void <=> open, open-instant => void",un("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])};var j8e=new At("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:V8e}),uY=new At("MAT_DRAWER_CONTAINER");function V8e(){return!1}var $B=(()=>{class r extends Ng{constructor(e,n,o,s,l){super(o,s,l),this._changeDetectorRef=e,this._container=n}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}static{this.\u0275fac=function(n){return new(n||r)(ie(Ti),ie(Go(()=>Gfe)),ie(Ht),ie(Lg),ie(ci))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(n,o){n&2&&vo("margin-left",o._container._contentMargins.left,"px")("margin-right",o._container._contentMargins.right,"px")},standalone:!0,features:[Bi([{provide:Ng,useExisting:r}]),fn,yt],ngContentSelectors:zB,decls:1,vars:0,template:function(n,o){n&1&&(Qi(),pi(0))},encapsulation:2,changeDetection:0})}}return r})(),zfe=(()=>{class r{get position(){return this._position}set position(e){e=e==="end"?"end":"start",e!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=tl(e)}get autoFocus(){let e=this._autoFocus;return e??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(e){(e==="true"||e==="false"||e==null)&&(e=tl(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle(tl(e))}constructor(e,n,o,s,l,h,p,m){this._elementRef=e,this._focusTrapFactory=n,this._focusMonitor=o,this._platform=s,this._ngZone=l,this._interactivityChecker=h,this._doc=p,this._container=m,this._focusTrap=null,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Dt,this._animationEnd=new Dt,this._animationState="void",this.openedChange=new it(!0),this._openedStream=this.openedChange.pipe(mn(f=>f),$t(()=>{})),this.openedStart=this._animationStarted.pipe(mn(f=>f.fromState!==f.toState&&f.toState.indexOf("open")===0),Kb(void 0)),this._closedStream=this.openedChange.pipe(mn(f=>!f),$t(()=>{})),this.closedStart=this._animationStarted.pipe(mn(f=>f.fromState!==f.toState&&f.toState==="void"),Kb(void 0)),this._destroyed=new Dt,this.onPositionChanged=new it,this._modeChanged=new Dt,this._injector=Et(yn),this._changeDetectorRef=Et(Ti),this.openedChange.pipe(rn(this._destroyed)).subscribe(f=>{f?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Ds(this._elementRef.nativeElement,"keydown").pipe(mn(f=>f.keyCode===27&&!this.disableClose&&!gs(f)),rn(this._destroyed)).subscribe(f=>this._ngZone.run(()=>{this.close(),f.stopPropagation(),f.preventDefault()}))}),this._animationEnd.subscribe(f=>{let{fromState:g,toState:y}=f;(y.indexOf("open")===0&&g==="void"||y==="void"&&g.indexOf("open")===0)&&this.openedChange.emit(this._opened)})}_forceFocus(e,n){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{e.removeEventListener("blur",o),e.removeEventListener("mousedown",o),e.removeAttribute("tabindex")};e.addEventListener("blur",o),e.addEventListener("mousedown",o)})),e.focus(n)}_focusByCssSelector(e,n){let o=this._elementRef.nativeElement.querySelector(e);o&&this._forceFocus(o,n)}_takeFocus(){if(!this._focusTrap)return;let e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":ks(()=>{!this._focusTrap.focusInitialElement()&&typeof e.focus=="function"&&e.focus()},{injector:this._injector});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(e){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,n){e&&n&&(this._openedVia=n);let o=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),o}_setOpen(e,n,o){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",n&&this._restoreFocus(o)),this._changeDetectorRef.markForCheck(),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(Tn(1)).subscribe(l=>s(l?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop&&this.opened)}_updatePositionInParent(e){if(!this._platform.isBrowser)return;let n=this._elementRef.nativeElement,o=n.parentNode;e==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),o.insertBefore(this._anchor,n)),o.appendChild(n)):this._anchor&&this._anchor.parentNode.insertBefore(n,this._anchor)}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(gx),ie(il),ie(Hn),ie(ci),ie(Uy),ie(Ui,8),ie(uY,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-drawer"]],viewQuery:function(n,o){if(n&1&&Ni(M8e,5),n&2){let s;Yt(s=Kt())&&(o._content=s.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(n,o){n&1&&ak("@transform.start",function(l){return o._animationStarted.next(l)})("@transform.done",function(l){return o._animationEnd.next(l)}),n&2&&(ix("@transform",o._animationState),yi("align",null),oi("mat-drawer-end",o.position==="end")("mat-drawer-over",o.mode==="over")("mat-drawer-push",o.mode==="push")("mat-drawer-side",o.mode==="side")("mat-drawer-opened",o.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],standalone:!0,features:[yt],ngContentSelectors:zB,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(n,o){n&1&&(Qi(),ne(0,"div",1,0),pi(2),ce())},dependencies:[Ng],encapsulation:2,data:{animation:[Ufe.transformDrawer]},changeDetection:0})}}return r})(),Gfe=(()=>{class r{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=tl(e)}get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(e){this._backdropOverride=e==null?null:tl(e)}get scrollable(){return this._userContent||this._content}constructor(e,n,o,s,l,h=!1,p){this._dir=e,this._element=n,this._ngZone=o,this._changeDetectorRef=s,this._animationMode=p,this._drawers=new _p,this.backdropClick=new it,this._destroyed=new Dt,this._doCheckSubject=new Dt,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Dt,this._injector=Et(yn),e&&e.change.pipe(rn(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),l.change().pipe(rn(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=h}ngAfterContentInit(){this._allDrawers.changes.pipe(yo(this._allDrawers),rn(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(n=>!n._container||n._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(yo(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(cr(10),rn(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,n=0;if(this._left&&this._left.opened){if(this._left.mode=="side")e+=this._left._getWidth();else if(this._left.mode=="push"){let o=this._left._getWidth();e+=o,n-=o}}if(this._right&&this._right.opened){if(this._right.mode=="side")n+=this._right._getWidth();else if(this._right.mode=="push"){let o=this._right._getWidth();n+=o,e-=o}}e=e||null,n=n||null,(e!==this._contentMargins.left||n!==this._contentMargins.right)&&(this._contentMargins={left:e,right:n},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(mn(n=>n.fromState!==n.toState),rn(this._drawers.changes)).subscribe(n=>{n.toState!=="open-instant"&&this._animationMode!=="NoopAnimations"&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),e.mode!=="side"&&e.openedChange.pipe(rn(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){e&&e.onPositionChanged.pipe(rn(this._drawers.changes)).subscribe(()=>{ks(()=>{this._validateDrawers()},{injector:this._injector,phase:Qb.Read})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(rn(vr(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){let n=this._element.nativeElement.classList,o="mat-drawer-container-has-open";e?n.add(o):n.remove(o)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{e.position=="end"?(this._end!=null,this._end=e):(this._start!=null,this._start=e)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._drawerHasBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(e){return e!=null&&e.opened}_drawerHasBackdrop(e){return this._backdropOverride==null?!!e&&e.mode!=="side":this._backdropOverride}static{this.\u0275fac=function(n){return new(n||r)(ie(To,8),ie(Ht),ie(ci),ie(Ti),ie(gu),ie(j8e),ie(so,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-drawer-container"]],contentQueries:function(n,o,s){if(n&1&&(Sn(s,$B,5),Sn(s,zfe,5)),n&2){let l;Yt(l=Kt())&&(o._content=l.first),Yt(l=Kt())&&(o._allDrawers=l)}},viewQuery:function(n,o){if(n&1&&Ni($B,5),n&2){let s;Yt(s=Kt())&&(o._userContent=s.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(n,o){n&2&&oi("mat-drawer-container-explicit-backdrop",o._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],standalone:!0,features:[Bi([{provide:uY,useExisting:r}]),yt],ngContentSelectors:k8e,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(n,o){n&1&&(Qi(D8e),We(0,O8e,1,2,"div",0),pi(1),pi(2,1),We(3,P8e,2,0,"mat-drawer-content")),n&2&&(vn(o.hasBackdrop?0:-1),q(3),vn(o._content?-1:3))},dependencies:[$B],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-app-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-app-background));box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-app-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color, var(--mat-app-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0})}}return r})(),UB=(()=>{class r extends $B{constructor(e,n,o,s,l){super(e,n,o,s,l)}static{this.\u0275fac=function(n){return new(n||r)(ie(Ti),ie(Go(()=>pY)),ie(Ht),ie(Lg),ie(ci))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(n,o){n&2&&vo("margin-left",o._container._contentMargins.left,"px")("margin-right",o._container._contentMargins.right,"px")},standalone:!0,features:[Bi([{provide:Ng,useExisting:r}]),fn,yt],ngContentSelectors:zB,decls:1,vars:0,template:function(n,o){n&1&&(Qi(),pi(0))},encapsulation:2,changeDetection:0})}}return r})(),hY=(()=>{class r extends zfe{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(e){this._fixedInViewport=tl(e)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(e){this._fixedTopGap=pd(e)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(e){this._fixedBottomGap=pd(e)}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275cmp=gt({type:r,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(n,o){n&2&&(yi("align",null),vo("top",o.fixedInViewport?o.fixedTopGap:null,"px")("bottom",o.fixedInViewport?o.fixedBottomGap:null,"px"),oi("mat-drawer-end",o.position==="end")("mat-drawer-over",o.mode==="over")("mat-drawer-push",o.mode==="push")("mat-drawer-side",o.mode==="side")("mat-drawer-opened",o.opened)("mat-sidenav-fixed",o.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],standalone:!0,features:[fn,yt],ngContentSelectors:zB,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(n,o){n&1&&(Qi(),ne(0,"div",1,0),pi(2),ce())},dependencies:[Ng],encapsulation:2,data:{animation:[Ufe.transformDrawer]},changeDetection:0})}}return r})(),pY=(()=>{class r extends Gfe{constructor(){super(...arguments),this._allDrawers=void 0,this._content=void 0}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275cmp=gt({type:r,selectors:[["mat-sidenav-container"]],contentQueries:function(n,o,s){if(n&1&&(Sn(s,UB,5),Sn(s,hY,5)),n&2){let l;Yt(l=Kt())&&(o._content=l.first),Yt(l=Kt())&&(o._allDrawers=l)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(n,o){n&2&&oi("mat-drawer-container-explicit-backdrop",o._backdropOverride)},exportAs:["matSidenavContainer"],standalone:!0,features:[Bi([{provide:uY,useExisting:r}]),fn,yt],ngContentSelectors:F8e,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(n,o){n&1&&(Qi(R8e),We(0,L8e,1,2,"div",0),pi(1),pi(2,1),We(3,N8e,2,0,"mat-sidenav-content")),n&2&&(vn(o.hasBackdrop?0:-1),q(3),vn(o._content?-1:3))},dependencies:[UB],styles:[B8e],encapsulation:2,changeDetection:0})}}return r})(),GB=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[on,Xh,Xh,on]})}}return r})();var $8e=["tooltip"],Yfe=20;var Kfe=new At("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let r=Et(Ro);return()=>r.scrollStrategies.reposition({scrollThrottle:Yfe})}});function U8e(r){return()=>r.scrollStrategies.reposition({scrollThrottle:Yfe})}var z8e={provide:Kfe,deps:[Ro],useFactory:U8e};function G8e(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var mY=new At("mat-tooltip-default-options",{providedIn:"root",factory:G8e});var Wfe="tooltip-panel",qfe=Ul({passive:!0}),H8e=8,W8e=8,q8e=24,Y8e=200,Ar=(()=>{class r{get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=tl(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){let n=tl(e);this._disabled!==n&&(this._disabled=n,n?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=pd(e)}get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=pd(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(e){let n=this._message;this._message=e!=null?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(n)}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(e,n,o,s,l,h,p,m,f,g,y,_){this._overlay=e,this._elementRef=n,this._scrollDispatcher=o,this._viewContainerRef=s,this._ngZone=l,this._platform=h,this._ariaDescriber=p,this._focusMonitor=m,this._dir=g,this._defaultOptions=y,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._tooltipComponent=K8e,this._viewportMargin=8,this._cssClassPrefix="mat-mdc",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._touchstartTimeout=null,this._destroyed=new Dt,this._injector=Et(yn),this._scrollStrategy=f,this._document=_,y&&(this._showDelay=y.showDelay,this._hideDelay=y.hideDelay,y.position&&(this.position=y.position),y.positionAtOrigin&&(this.positionAtOrigin=y.positionAtOrigin),y.touchGestures&&(this.touchGestures=y.touchGestures),y.tooltipClass&&(this.tooltipClass=y.tooltipClass)),g.change.pipe(rn(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),this._viewportMargin=H8e}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(rn(this._destroyed)).subscribe(e=>{e?e==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let e=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,o])=>{e.removeEventListener(n,o,qfe)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,n){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let o=this._createOverlay(n);this._detach(),this._portal=this._portal||new Bg(this._tooltipComponent,this._viewContainerRef);let s=this._tooltipInstance=o.attach(this._portal).instance;s._triggerElement=this._elementRef.nativeElement,s._mouseLeaveHideDelay=this._hideDelay,s.afterHidden().pipe(rn(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),s.show(e)}hide(e=this.hideDelay){let n=this._tooltipInstance;n&&(n.isVisible()?n.hide(e):(n._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){let s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&s._origin instanceof Ht)return this._overlayRef;this._detach()}let n=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),o=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin?e||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(n);return o.positionChanges.pipe(rn(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:o,panelClass:`${this._cssClassPrefix}-${Wfe}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(rn(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(rn(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(rn(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&s.keyCode===27&&!gs(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){let n=e.getConfig().positionStrategy,o=this._getOrigin(),s=this._getOverlayPosition();n.withPositions([this._addOffset(Xe(Xe({},o.main),s.main)),this._addOffset(Xe(Xe({},o.fallback),s.fallback))])}_addOffset(e){let n=W8e,o=!this._dir||this._dir.value=="ltr";return e.originY==="top"?e.offsetY=-n:e.originY==="bottom"?e.offsetY=n:e.originX==="start"?e.offsetX=o?-n:n:e.originX==="end"&&(e.offsetX=o?n:-n),e}_getOrigin(){let e=!this._dir||this._dir.value=="ltr",n=this.position,o;n=="above"||n=="below"?o={originX:"center",originY:n=="above"?"top":"bottom"}:n=="before"||n=="left"&&e||n=="right"&&!e?o={originX:"start",originY:"center"}:(n=="after"||n=="right"&&e||n=="left"&&!e)&&(o={originX:"end",originY:"center"});let{x:s,y:l}=this._invertPosition(o.originX,o.originY);return{main:o,fallback:{originX:s,originY:l}}}_getOverlayPosition(){let e=!this._dir||this._dir.value=="ltr",n=this.position,o;n=="above"?o={overlayX:"center",overlayY:"bottom"}:n=="below"?o={overlayX:"center",overlayY:"top"}:n=="before"||n=="left"&&e||n=="right"&&!e?o={overlayX:"end",overlayY:"center"}:(n=="after"||n=="right"&&e||n=="left"&&!e)&&(o={overlayX:"start",overlayY:"center"});let{x:s,y:l}=this._invertPosition(o.overlayX,o.overlayY);return{main:o,fallback:{overlayX:s,overlayY:l}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),ks(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,n){return this.position==="above"||this.position==="below"?n==="top"?n="bottom":n==="bottom"&&(n="top"):e==="end"?e="start":e==="start"&&(e="end"),{x:e,y:n}}_updateCurrentPositionClass(e){let{overlayY:n,originX:o,originY:s}=e,l;if(n==="center"?this._dir&&this._dir.value==="rtl"?l=o==="end"?"left":"right":l=o==="start"?"left":"right":l=n==="bottom"&&s==="top"?"above":"below",l!==this._currentPosition){let h=this._overlayRef;if(h){let p=`${this._cssClassPrefix}-${Wfe}-`;h.removePanelClass(p+this._currentPosition),h.addPanelClass(p+l)}this._currentPosition=l}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{this._setupPointerExitEventsIfNeeded();let n;e.x!==void 0&&e.y!==void 0&&(n=e),this.show(void 0,n)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{let n=e.targetTouches?.[0],o=n?{x:n.clientX,y:n.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout);let s=500;this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,o)},this._defaultOptions.touchLongPressShowDelay??s)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",n=>{let o=n.relatedTarget;(!o||!this._overlayRef?.overlayElement.contains(o))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let n=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",n],["touchcancel",n])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([n,o])=>{this._elementRef.nativeElement.addEventListener(n,o,qfe)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){let n=this._document.elementFromPoint(e.clientX,e.clientY),o=this._elementRef.nativeElement;n!==o&&!o.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){let e=this.touchGestures;if(e!=="off"){let n=this._elementRef.nativeElement,o=n.style;(e==="on"||n.nodeName!=="INPUT"&&n.nodeName!=="TEXTAREA")&&(o.userSelect=o.msUserSelect=o.webkitUserSelect=o.MozUserSelect="none"),(e==="on"||!n.draggable)&&(o.webkitUserDrag="none"),o.touchAction="none",o.webkitTapHighlightColor="transparent"}}_syncAriaDescription(e){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,e,"tooltip"),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}static{this.\u0275fac=function(n){return new(n||r)(ie(Ro),ie(Ht),ie(Lg),ie(Io),ie(ci),ie(Hn),ie(lA),ie(il),ie(Kfe),ie(To),ie(mY,8),ie(Ui))}}static{this.\u0275dir=Pt({type:r,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(n,o){n&2&&oi("mat-mdc-tooltip-disabled",o.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"],standalone:!0})}}return r})(),K8e=(()=>{class r{constructor(e,n,o){this._changeDetectorRef=e,this._elementRef=n,this._isMultiline=!1,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Dt,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide",this._animationsDisabled=o==="NoopAnimations"}show(e){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>q8e&&e.width>=Y8e}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){let n=this._tooltip.nativeElement,o=this._showAnimation,s=this._hideAnimation;if(n.classList.remove(e?s:o),n.classList.add(e?o:s),this._isVisible!==e&&(this._isVisible=e,this._changeDetectorRef.markForCheck()),e&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let l=getComputedStyle(n);(l.getPropertyValue("animation-duration")==="0s"||l.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}static{this.\u0275fac=function(n){return new(n||r)(ie(Ti),ie(Ht),ie(so,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-tooltip-component"]],viewQuery:function(n,o){if(n&1&&Ni($8e,7),n&2){let s;Yt(s=Kt())&&(o._tooltip=s.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(n,o){n&1&&Oe("mouseleave",function(l){return o._handleMouseLeave(l)})},standalone:!0,features:[yt],decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(n,o){if(n&1){let s=dt();ne(0,"div",1,0),Oe("animationend",function(h){return Re(s),Fe(o._handleAnimationEnd(h))}),ne(2,"div",2),Ye(3),ce()()}n&2&&(oi("mdc-tooltip--multiline",o._isMultiline),ee("ngClass",o.tooltipClass),q(3),Si(o.message))},dependencies:[qr],styles:['.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mdc-plain-tooltip-container-color, var(--mat-app-inverse-surface));color:var(--mdc-plain-tooltip-supporting-text-color, var(--mat-app-inverse-on-surface));border-radius:var(--mdc-plain-tooltip-container-shape, var(--mat-app-corner-extra-small));font-family:var(--mdc-plain-tooltip-supporting-text-font, var(--mat-app-body-small-font));font-size:var(--mdc-plain-tooltip-supporting-text-size, var(--mat-app-body-small-size));font-weight:var(--mdc-plain-tooltip-supporting-text-weight, var(--mat-app-body-small-weight));line-height:var(--mdc-plain-tooltip-supporting-text-line-height, var(--mat-app-body-small-line-height));letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, var(--mat-app-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0})}}return r})();var Er=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({providers:[z8e],imports:[Cw,$a,Ep,on,on,Xh]})}}return r})();var Zge=ld(_Y(),1);var r$e=["trigger"],o$e=["panel"],s$e=[[["mat-select-trigger"]],"*"],a$e=["mat-select-trigger","*"];function l$e(r,i){if(r&1&&(ne(0,"span",4),Ye(1),ce()),r&2){let e=ae();q(),Si(e.placeholder)}}function c$e(r,i){r&1&&pi(0)}function d$e(r,i){if(r&1&&(ne(0,"span",11),Ye(1),ce()),r&2){let e=ae(2);q(),Si(e.triggerValue)}}function u$e(r,i){if(r&1&&(ne(0,"span",5),We(1,c$e,1,0)(2,d$e,2,1,"span",11),ce()),r&2){let e=ae();q(),vn(e.customTrigger?1:2)}}function h$e(r,i){if(r&1){let e=dt();ne(0,"div",12,1),Oe("@transformPanel.done",function(o){Re(e);let s=ae();return Fe(s._panelDoneAnimatingStream.next(o.toState))})("keydown",function(o){Re(e);let s=ae();return Fe(s._handleKeydown(o))}),pi(2,1),ce()}if(r&2){let e=ae();lde("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),ee("ngClass",e.panelClass)("@transformPanel","showing"),yi("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}var p$e={transformPanelWrap:Or("transformPanelWrap",[ln("* => void",t4("@transformPanel",[e4()],{optional:!0}))]),transformPanel:Or("transformPanel",[zi("void",mi({opacity:0,transform:"scale(1, 0.8)"})),ln("void => showing",un("120ms cubic-bezier(0, 0, 0.2, 1)",mi({opacity:1,transform:"scale(1, 1)"}))),ln("* => void",un("100ms linear",mi({opacity:0})))])};var ige=0,nge=new At("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let r=Et(Ro);return()=>r.scrollStrategies.reposition()}});function m$e(r){return()=>r.scrollStrategies.reposition()}var vY=new At("MAT_SELECT_CONFIG"),f$e={provide:nge,deps:[Ro],useFactory:m$e},g$e=new At("MatSelectTrigger"),yY=class{constructor(i,e){this.source=i,this.value=e}},sh=(()=>{class r{_scrollOptionIntoView(e){let n=this.options.toArray()[e];if(n){let o=this.panel.nativeElement,s=ZN(e,this.options,this.optionGroups),l=n._getHostElement();e===0&&s===1?o.scrollTop=0:o.scrollTop=QN(l.offsetTop,l.offsetHeight,o.scrollTop,o.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new yY(this,e)}get focused(){return this._focused||this._panelOpen}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Dl.required)??!1}set required(e){this._required=e,this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._selectionModel,this._multiple=e}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,n,o,s,l,h,p,m,f,g,y,_,w,A){this._viewportRuler=e,this._changeDetectorRef=n,this._elementRef=l,this._dir=h,this._parentFormField=f,this.ngControl=g,this._liveAnnouncer=w,this._defaultOptions=A,this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._panelOpen=!1,this._compareWith=(k,R)=>k===R,this._uid=`mat-select-${ige++}`,this._triggerAriaLabelledBy=null,this._destroy=new Dt,this.stateChanges=new Dt,this.disableAutomaticLabeling=!0,this._onChange=()=>{},this._onTouched=()=>{},this._valueId=`mat-select-value-${ige++}`,this._panelDoneAnimatingStream=new Dt,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this._multiple=!1,this.disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto",this._initialized=new Dt,this.optionSelectionChanges=$d(()=>{let k=this.options;return k?k.changes.pipe(yo(k),jr(()=>vr(...k.map(R=>R.onSelectionChange)))):this._initialized.pipe(jr(()=>this.optionSelectionChanges))}),this.openedChange=new it,this._openedStream=this.openedChange.pipe(mn(k=>k),$t(()=>{})),this._closedStream=this.openedChange.pipe(mn(k=>!k),$t(()=>{})),this.selectionChange=new it,this.valueChange=new it,this._trackedModal=null,this._skipPredicate=k=>this.panelOpen?!1:k.disabled,this.ngControl&&(this.ngControl.valueAccessor=this),A?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=A.typeaheadDebounceInterval),this._errorStateTracker=new Sw(s,g,m,p,this.stateChanges),this._scrollStrategyFactory=_,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(y)||0,this.id=this.id}ngOnInit(){this._selectionModel=new hv(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(cm(),rn(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe(rn(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(rn(this._destroy)).subscribe(e=>{e.added.forEach(n=>n.select()),e.removed.forEach(n=>n.deselect())}),this.options.changes.pipe(yo(null),rn(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let e=this._getTriggerAriaLabelledby(),n=this.ngControl;if(e!==this._triggerAriaLabelledBy){let o=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?o.setAttribute("aria-labelledby",e):o.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(this._previousControl!==void 0&&n.disabled!==null&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_applyModalPanelOwnership(){let e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let n=`${this.id}-panel`;this._trackedModal&&ww(this._trackedModal,"aria-owns",n),aA(e,"aria-owns",n),this._trackedModal=e}_clearFromModal(){if(!this._trackedModal)return;let e=`${this.id}-panel`;ww(this._trackedModal,"aria-owns",e),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let e=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){let n=e.keyCode,o=n===40||n===38||n===37||n===39,s=n===13||n===32,l=this._keyManager;if(!l.isTyping()&&s&&!gs(e)||(this.multiple||e.altKey)&&o)e.preventDefault(),this.open();else if(!this.multiple){let h=this.selected;l.onKeydown(e);let p=this.selected;p&&h!==p&&this._liveAnnouncer.announce(p.viewValue,1e4)}}_handleOpenKeydown(e){let n=this._keyManager,o=e.keyCode,s=o===40||o===38,l=n.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(!l&&(o===13||o===32)&&n.activeItem&&!gs(e))e.preventDefault(),n.activeItem._selectViaInteraction();else if(!l&&this._multiple&&o===65&&e.ctrlKey){e.preventDefault();let h=this.options.some(p=>!p.disabled&&!p.selected);this.options.forEach(p=>{p.disabled||(h?p.select():p.deselect())})}else{let h=n.activeItemIndex;n.onKeydown(e),this._multiple&&s&&e.shiftKey&&n.activeItem&&n.activeItemIndex!==h&&n.activeItem._selectViaInteraction()}}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Tn(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{let n=this._selectOptionByValue(e);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){let n=this.options.find(o=>{if(this._selectionModel.isSelected(o))return!1;try{return o.value!=null&&this._compareWith(o.value,e)}catch{return!1}});return n&&this._selectionModel.select(n),n}_assignValue(e){return e!==this._value||this._multiple&&Array.isArray(e)?(this.options&&this._setSelectionByValue(e),this._value=e,!0):!1}_getOverlayWidth(e){return this.panelWidth==="auto"?(e instanceof dP?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new rA(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let e=vr(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(rn(e)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),vr(...this.options.map(n=>n._stateChanges)).pipe(rn(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,n){let o=this._selectionModel.isSelected(e);e.value==null&&!this._multiple?(e.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(e.value)):(o!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),n&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),n&&this.focus())),o!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let e=this.options.toArray();this._selectionModel.sort((n,o)=>this.sortComparator?this.sortComparator(n,o,e):e.indexOf(n)-e.indexOf(o)),this.stateChanges.next()}}_propagateChanges(e){let n;this.multiple?n=this.selected.map(o=>o.value):n=this.selected?this.selected.value:e,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let n=0;n<this.options.length;n++)if(!this.options.get(n).disabled){e=n;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId(),n=e?e+" ":"";return this.ariaLabelledby?n+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId(),n=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static{this.\u0275fac=function(n){return new(n||r)(ie(gu),ie(Ti),ie(ci),ie(zy),ie(Ht),ie(To,8),ie(fw,8),ie(th,8),ie(Gy,8),ie(du,10),oc("tabindex"),ie(nge),ie(Phe),ie(vY,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-select"]],contentQueries:function(n,o,s){if(n&1&&(Sn(s,g$e,5),Sn(s,lc,5),Sn(s,uA,5)),n&2){let l;Yt(l=Kt())&&(o.customTrigger=l.first),Yt(l=Kt())&&(o.options=l),Yt(l=Kt())&&(o.optionGroups=l)}},viewQuery:function(n,o){if(n&1&&(Ni(r$e,5),Ni(o$e,5),Ni(sY,5)),n&2){let s;Yt(s=Kt())&&(o.trigger=s.first),Yt(s=Kt())&&(o.panel=s.first),Yt(s=Kt())&&(o._overlayDir=s.first)}},hostAttrs:["role","combobox","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(n,o){n&1&&Oe("keydown",function(l){return o._handleKeydown(l)})("focus",function(){return o._onFocus()})("blur",function(){return o._onBlur()}),n&2&&(yi("id",o.id)("tabindex",o.disabled?-1:o.tabIndex)("aria-controls",o.panelOpen?o.id+"-panel":null)("aria-expanded",o.panelOpen)("aria-label",o.ariaLabel||null)("aria-required",o.required.toString())("aria-disabled",o.disabled.toString())("aria-invalid",o.errorState)("aria-activedescendant",o._getAriaActiveDescendant()),oi("mat-mdc-select-disabled",o.disabled)("mat-mdc-select-invalid",o.errorState)("mat-mdc-select-required",o.required)("mat-mdc-select-empty",o.empty)("mat-mdc-select-multiple",o.multiple))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",Xt],disableRipple:[2,"disableRipple","disableRipple",Xt],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Oo(e)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Xt],placeholder:"placeholder",required:[2,"required","required",Xt],multiple:[2,"multiple","multiple",Xt],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",Xt],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",Oo],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],standalone:!0,features:[Bi([{provide:Aw,useExisting:r},{provide:dA,useExisting:r}]),an,Jn,yt],ngContentSelectors:a$e,decls:11,vars:8,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","attach","detach","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(n,o){if(n&1){let s=dt();Qi(s$e),ne(0,"div",2,0),Oe("click",function(){return Re(s),Fe(o.open())}),ne(3,"div",3),We(4,l$e,2,1,"span",4)(5,u$e,3,1,"span",5),ce(),ne(6,"div",6)(7,"div",7),jl(),ne(8,"svg",8),wt(9,"path",9),ce()()()(),We(10,h$e,3,9,"ng-template",10),Oe("backdropClick",function(){return Re(s),Fe(o.close())})("attach",function(){return Re(s),Fe(o._onAttached())})("detach",function(){return Re(s),Fe(o.close())})}if(n&2){let s=ji(1);q(3),yi("id",o._valueId),q(),vn(o.empty?4:5),q(6),ee("cdkConnectedOverlayPanelClass",o._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",o._scrollStrategy)("cdkConnectedOverlayOrigin",o._preferredOverlayOrigin||s)("cdkConnectedOverlayOpen",o.panelOpen)("cdkConnectedOverlayPositions",o._positions)("cdkConnectedOverlayWidth",o._overlayWidth)}},dependencies:[dP,sY,qr],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-app-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-app-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-app-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-app-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-app-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow)}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color)}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-app-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-app-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-app-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color)}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color, var(--mat-app-surface-container))}.cdk-high-contrast-active div.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-app-on-surface-variant))}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform)}'],encapsulation:2,data:{animation:[p$e.transformPanel]},changeDetection:0})}}return r})();var ah=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({providers:[f$e],imports:[$a,Ep,cc,on,Xh,Wa,cc,on]})}}return r})();var _$e=ld(bE(),1),rge=ld(bE(),1),yS=rge.default||_$e,wY=new At("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:y$e});function y$e(){return{useUtc:!1}}function v$e(r,i){let e=Array(r);for(let n=0;n<r;n++)e[n]=i(n);return e}var b$e=(()=>{class r extends zl{constructor(e,n){super(),this._options=n,this.setLocale(e||yS.locale())}setLocale(e){super.setLocale(e);let n=yS.localeData(e);this._localeData={firstDayOfWeek:n.firstDayOfWeek(),longMonths:n.months(),shortMonths:n.monthsShort(),dates:v$e(31,o=>this.createDate(2017,0,o+1).format("D")),longDaysOfWeek:n.weekdays(),shortDaysOfWeek:n.weekdaysShort(),narrowDaysOfWeek:n.weekdaysMin()}}getYear(e){return this.clone(e).year()}getMonth(e){return this.clone(e).month()}getDate(e){return this.clone(e).date()}getDayOfWeek(e){return this.clone(e).day()}getMonthNames(e){return e=="long"?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(e){return e=="long"?this._localeData.longDaysOfWeek:e=="short"?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(e){return this.clone(e).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(e){return this.clone(e).daysInMonth()}clone(e){return e.clone().locale(this.locale)}createDate(e,n,o){let s=this._createMoment({year:e,month:n,date:o}).locale(this.locale);return s.isValid(),s}today(){return this._createMoment().locale(this.locale)}parse(e,n){return e&&typeof e=="string"?this._createMoment(e,n,this.locale):e?this._createMoment(e).locale(this.locale):null}format(e,n){return e=this.clone(e),this.isValid(e),e.format(n)}addCalendarYears(e,n){return this.clone(e).add({years:n})}addCalendarMonths(e,n){return this.clone(e).add({months:n})}addCalendarDays(e,n){return this.clone(e).add({days:n})}toIso8601(e){return this.clone(e).format()}deserialize(e){let n;if(e instanceof Date)n=this._createMoment(e).locale(this.locale);else if(this.isDateInstance(e))return this.clone(e);if(typeof e=="string"){if(!e)return null;n=this._createMoment(e,yS.ISO_8601).locale(this.locale)}return n&&this.isValid(n)?this._createMoment(n).locale(this.locale):super.deserialize(e)}isDateInstance(e){return yS.isMoment(e)}isValid(e){return this.clone(e).isValid()}invalid(){return yS.invalid()}_createMoment(e,n,o){let{strict:s,useUtc:l}=this._options||{};return l?yS.utc(e,n,o,s):yS(e,n,o,s)}static{this.\u0275fac=function(n){return new(n||r)(xe(cA,8),xe(wY,8))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})(),w$e={parse:{dateInput:"l"},display:{dateInput:"l",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};function ZB(r=w$e,i){let e=[{provide:zl,useClass:b$e,deps:[cA,wY]},{provide:o_,useValue:r}];return i&&e.push({provide:wY,useValue:i}),e}var C$e=["panel"],x$e=["*"];function S$e(r,i){if(r&1){let e=dt();ne(0,"div",1,0),Oe("@panelAnimation.done",function(o){Re(e);let s=ae();return Fe(s._animationDone.next(o))}),pi(2),ce()}if(r&2){let e=i.id,n=ae();Hr(n._classList),oi("mat-mdc-autocomplete-visible",n.showPanel)("mat-mdc-autocomplete-hidden",!n.showPanel)("mat-primary",n._color==="primary")("mat-accent",n._color==="accent")("mat-warn",n._color==="warn"),ee("id",n.id)("@panelAnimation",n.isOpen?"visible":"hidden"),yi("aria-label",n.ariaLabel||null)("aria-labelledby",n._getPanelAriaLabelledby(e))}}var I$e=Or("panelAnimation",[zi("void, hidden",mi({opacity:0,transform:"scaleY(0.8)"})),ln(":enter, hidden => visible",[Zhe([un("0.03s linear",mi({opacity:1})),un("0.12s cubic-bezier(0, 0, 0.2, 1)",mi({transform:"scaleY(1)"}))])]),ln(":leave, visible => hidden",[un("0.075s linear",mi({opacity:0}))])]),T$e=0,CY=class{constructor(i,e){this.source=i,this.option=e}},QB=new At("mat-autocomplete-default-options",{providedIn:"root",factory:A$e});function A$e(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}var o1=(()=>{class r{get isOpen(){return this._isOpen&&this.showPanel}_setColor(e){this._color=e,this._changeDetectorRef.markForCheck()}set classList(e){this._classList=e,this._elementRef.nativeElement.className=""}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}constructor(e,n,o,s){this._changeDetectorRef=e,this._elementRef=n,this._defaults=o,this._activeOptionChanges=pn.EMPTY,this._animationDone=new it,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new it,this.opened=new it,this.closed=new it,this.optionActivated=new it,this.id=`mat-autocomplete-${T$e++}`,this.inertGroups=s?.SAFARI||!1,this.autoActiveFirstOption=!!o.autoActiveFirstOption,this.autoSelectActiveOption=!!o.autoSelectActiveOption,this.requireSelection=!!o.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new rA(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){let n=new CY(this,e);this.optionSelected.emit(n)}_getPanelAriaLabelledby(e){if(this.ariaLabel)return null;let n=e?e+" ":"";return this.ariaLabelledby?n+this.ariaLabelledby:e}_skipPredicate(){return!1}static{this.\u0275fac=function(n){return new(n||r)(ie(Ti),ie(Ht),ie(QB),ie(Hn))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-autocomplete"]],contentQueries:function(n,o,s){if(n&1&&(Sn(s,lc,5),Sn(s,uA,5)),n&2){let l;Yt(l=Kt())&&(o.options=l),Yt(l=Kt())&&(o.optionGroups=l)}},viewQuery:function(n,o){if(n&1&&(Ni(jo,7),Ni(C$e,5)),n&2){let s;Yt(s=Kt())&&(o.template=s.first),Yt(s=Kt())&&(o.panel=s.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",Xt],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",Xt],requireSelection:[2,"requireSelection","requireSelection",Xt],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",Xt],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Xt]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],standalone:!0,features:[Bi([{provide:dA,useExisting:r}]),an,yt],ngContentSelectors:x$e,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(n,o){n&1&&(Qi(),We(0,S$e,3,16,"ng-template"))},styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape, var(--mat-app-corner-extra-small));box-shadow:var(--mat-autocomplete-container-elevation-shadow);background-color:var(--mat-autocomplete-background-color, var(--mat-app-surface-container))}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[I$e]},changeDetection:0})}}return r})();var E$e={provide:Gc,useExisting:Go(()=>gf),multi:!0};var oge=new At("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{let r=Et(Ro);return()=>r.scrollStrategies.reposition()}});function M$e(r){return()=>r.scrollStrategies.reposition()}var D$e={provide:oge,deps:[Ro],useFactory:M$e},gf=(()=>{class r{constructor(e,n,o,s,l,h,p,m,f,g,y){this._element=e,this._overlay=n,this._viewContainerRef=o,this._zone=s,this._changeDetectorRef=l,this._dir=p,this._formField=m,this._document=f,this._viewportRuler=g,this._defaults=y,this._componentDestroyed=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=pn.EMPTY,this._breakpointObserver=Et(iA),this._handsetLandscapeSubscription=pn.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new Dt,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._initialized=new Dt,this._injector=Et(yn),this._aboveClass="mat-mdc-autocomplete-panel-above",this._overlayAttached=!1,this.optionSelections=$d(()=>{let _=this.autocomplete?this.autocomplete.options:null;return _?_.changes.pipe(yo(_),jr(()=>vr(..._.map(w=>w.onSelectionChange)))):this._initialized.pipe(jr(()=>this.optionSelections))}),this._handlePanelKeydown=_=>{(_.keyCode===27&&!gs(_)||_.keyCode===38&&gs(_,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),_.stopPropagation(),_.preventDefault())},this._trackedModal=null,this._scrollStrategy=h}ngAfterViewInit(){this._initialized.next(),this._initialized.complete();let e=this._getWindow();typeof e<"u"&&this._zone.runOutsideAngular(()=>e.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){let e=this._getWindow();typeof e<"u"&&e.removeEventListener("blur",this._windowBlurHandler),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&ww(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return vr(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(mn(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(mn(()=>this._overlayAttached)):Vt()).pipe($t(e=>e instanceof Zk?e:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return vr(Ds(this._document,"click"),Ds(this._document,"auxclick"),Ds(this._document,"touchend")).pipe(mn(e=>{let n=Hc(e),o=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,s=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&n!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!o||!o.contains(n))&&(!s||!s.contains(n))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(n)}))}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){let n=e.keyCode,o=gs(e);if(n===27&&!o&&e.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&n===13&&this.panelOpen&&!o)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){let s=this.autocomplete._keyManager.activeItem,l=n===38||n===40;n===9||l&&!o&&this.panelOpen?this.autocomplete._keyManager.onKeydown(e):l&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(l||this.autocomplete._keyManager.activeItem!==s)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let n=e.target,o=n.value;if(n.type==="number"&&(o=o==""?null:parseFloat(o)),this._previousValue!==o){if(this._previousValue=o,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(o),!o)this._clearPreviousSelectedOption(null,!1);else if(this.panelOpen&&!this.autocomplete.requireSelection){let s=this.autocomplete.options?.find(l=>l.selected);if(s){let l=this._getDisplayValue(s.value);o!==l&&s.deselect(!1)}}if(this._canOpen()&&this._document.activeElement===e.target){let s=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(s)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_floatLabel(e=!1){this._formField&&this._formField.floatLabel==="auto"&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){let e=new si(o=>{ks(()=>{o.next()},{injector:this._injector})}),n=this.autocomplete.options.changes.pipe(br(()=>this._positionStrategy.reapplyLastPosition()),jh(0));return vr(e,n).pipe(jr(()=>this._zone.run(()=>{let o=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),o!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),Tn(1)).subscribe(o=>this._setValueAndClose(o))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(e){let n=this.autocomplete;return n&&n.displayWith?n.displayWith(e):e}_assignOptionValue(e){let n=this._getDisplayValue(e);e==null&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(n??"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){let n=this.autocomplete,o=e?e.source:this._pendingAutoselectedOption;o?(this._clearPreviousSelectedOption(o),this._assignOptionValue(o.value),this._onChange(o.value),n._emitSelectEvent(o),this._element.nativeElement.focus()):n.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),n._animationDone?n._animationDone.pipe(Tn(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(e,n){this.autocomplete?.options?.forEach(o=>{o!==e&&o.selected&&o.deselect(n)})}_openPanelInternal(e=this._element.nativeElement.value){if(this._attachOverlay(e),this._floatLabel(),this._trackedModal){let n=this.autocomplete.id;aA(this._trackedModal,"aria-owns",n)}}_attachOverlay(e){this.autocomplete;let n=this._overlayRef;n?(this._positionStrategy.setOrigin(this._getConnectedElement()),n.updateSize({width:this._getPanelWidth()})):(this._portal=new _u(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),n=this._overlay.create(this._getOverlayConfig()),this._overlayRef=n,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&n&&n.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe($y.HandsetLandscape).subscribe(s=>{s.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),n&&!n.hasAttached()&&(n.attach(this._portal),this._valueOnAttach=e,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());let o=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&o!==this.panelOpen&&this._emitOpened()}_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){let e=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=e.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=e.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new mf({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){let e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){let n=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],o=this._aboveClass,s=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:o},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:o}],l;this.position==="above"?l=s:this.position==="below"?l=n:l=[...n,...s],e.withPositions(l)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){let e=this.autocomplete;if(e.autoActiveFirstOption){let n=-1;for(let o=0;o<e.options.length;o++)if(!e.options.get(o).disabled){n=o;break}e._keyManager.setActiveItem(n)}else e._keyManager.setActiveItem(-1)}_canOpen(){let e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this.autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(e){let n=this.autocomplete,o=ZN(e,n.options,n.optionGroups);if(e===0&&o===1)n._setScrollTop(0);else if(n.panel){let s=n.options.toArray()[e];if(s){let l=s._getHostElement(),h=QN(l.offsetTop,l.offsetHeight,n._getScrollTop(),n.panel.nativeElement.offsetHeight);n._setScrollTop(h)}}}_applyModalPanelOwnership(){let e=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let n=this.autocomplete.id;this._trackedModal&&ww(this._trackedModal,"aria-owns",n),aA(e,"aria-owns",n),this._trackedModal=e}_clearFromModal(){if(this._trackedModal){let e=this.autocomplete.id;ww(this._trackedModal,"aria-owns",e),this._trackedModal=null}}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(Ro),ie(Io),ie(ci),ie(Ti),ie(oge),ie(To,8),ie(Gy,9),ie(Ui,8),ie(gu),ie(QB,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(n,o){n&1&&Oe("focusin",function(){return o._handleFocus()})("blur",function(){return o._onTouched()})("input",function(l){return o._handleInput(l)})("keydown",function(l){return o._handleKeydown(l)})("click",function(){return o._handleClick()}),n&2&&yi("autocomplete",o.autocompleteAttribute)("role",o.autocompleteDisabled?null:"combobox")("aria-autocomplete",o.autocompleteDisabled?null:"list")("aria-activedescendant",o.panelOpen&&o.activeOption?o.activeOption.id:null)("aria-expanded",o.autocompleteDisabled?null:o.panelOpen.toString())("aria-controls",o.autocompleteDisabled||!o.panelOpen||o.autocomplete==null?null:o.autocomplete.id)("aria-haspopup",o.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",Xt]},exportAs:["matAutocompleteTrigger"],standalone:!0,features:[Bi([E$e]),an,Jn]})}}return r})(),s1=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({providers:[D$e],imports:[Ep,cc,on,$a,Xh,cc,on]})}}return r})();var O$e=["input"],P$e=["label"],R$e=["*"],F$e=new At("mat-checkbox-default-options",{providedIn:"root",factory:lge});function lge(){return{color:"accent",clickAction:"check-indeterminate",disabledInteractive:!1}}var lh=function(r){return r[r.Init=0]="Init",r[r.Checked=1]="Checked",r[r.Unchecked=2]="Unchecked",r[r.Indeterminate=3]="Indeterminate",r}(lh||{}),L$e={provide:Gc,useExisting:Go(()=>jg),multi:!0},xY=class{},N$e=0,age=lge(),jg=(()=>{class r{focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(e){let n=new xY;return n.source=this,n.checked=e,n}_getAnimationTargetElement(){return this._inputElement?.nativeElement}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(e,n,o,s,l,h){this._elementRef=e,this._changeDetectorRef=n,this._ngZone=o,this._animationMode=l,this._options=h,this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"},this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new it,this.indeterminateChange=new it,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=lh.Init,this._controlValueAccessorChangeFn=()=>{},this._validatorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||age,this.color=this._options.color||age.color,this.tabIndex=parseInt(s)||0,this.id=this._uniqueId=`mat-mdc-checkbox-${++N$e}`,this.disabledInteractive=h?.disabledInteractive??!1}ngOnChanges(e){e.required&&this._validatorChangeFn()}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){let n=e!=this._indeterminate;this._indeterminate=e,n&&(this._indeterminate?this._transitionCheckState(lh.Indeterminate):this._transitionCheckState(this.checked?lh.Checked:lh.Unchecked),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorChangeFn=e}_transitionCheckState(e){let n=this._currentCheckState,o=this._getAnimationTargetElement();if(!(n===e||!o)&&(this._currentAnimationClass&&o.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(n,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){o.classList.add(this._currentAnimationClass);let s=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{o.classList.remove(s)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){let e=this._options?.clickAction;!this.disabled&&e!=="noop"?(this.indeterminate&&e!=="check"&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?lh.Checked:lh.Unchecked),this._emitChangeEvent()):(this.disabled&&this.disabledInteractive||!this.disabled&&e==="noop")&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate)}_onInteractionEvent(e){e.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(e,n){if(this._animationMode==="NoopAnimations")return"";switch(e){case lh.Init:if(n===lh.Checked)return this._animationClasses.uncheckedToChecked;if(n==lh.Indeterminate)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case lh.Unchecked:return n===lh.Checked?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case lh.Checked:return n===lh.Unchecked?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case lh.Indeterminate:return n===lh.Checked?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(e){let n=this._inputElement;n&&(n.nativeElement.indeterminate=e)}_onInputClick(){this._handleInputClick()}_onTouchTargetClick(){this._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(e){e.target&&this._labelElement.nativeElement.contains(e.target)&&e.stopPropagation()}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(Ti),ie(ci),oc("tabindex"),ie(so,8),ie(F$e,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-checkbox"]],viewQuery:function(n,o){if(n&1&&(Ni(O$e,5),Ni(P$e,5),Ni(fd,5)),n&2){let s;Yt(s=Kt())&&(o._inputElement=s.first),Yt(s=Kt())&&(o._labelElement=s.first),Yt(s=Kt())&&(o.ripple=s.first)}},hostAttrs:[1,"mat-mdc-checkbox"],hostVars:16,hostBindings:function(n,o){n&2&&(hd("id",o.id),yi("tabindex",null)("aria-label",null)("aria-labelledby",null),Hr(o.color?"mat-"+o.color:"mat-accent"),oi("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mdc-checkbox--disabled",o.disabled)("mat-mdc-checkbox-disabled",o.disabled)("mat-mdc-checkbox-checked",o.checked)("mat-mdc-checkbox-disabled-interactive",o.disabledInteractive))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],id:"id",required:[2,"required","required",Xt],labelPosition:"labelPosition",name:"name",value:"value",disableRipple:[2,"disableRipple","disableRipple",Xt],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?void 0:Oo(e)],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",Xt],checked:[2,"checked","checked",Xt],disabled:[2,"disabled","disabled",Xt],indeterminate:[2,"indeterminate","indeterminate",Xt]},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],standalone:!0,features:[Bi([L$e,{provide:bp,useExisting:r,multi:!0}]),an,Jn,yt],ngContentSelectors:R$e,decls:15,vars:20,consts:[["checkbox",""],["input",""],["label",""],["mat-internal-form-field","",3,"click","labelPosition"],[1,"mdc-checkbox"],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"blur","click","change","checked","indeterminate","disabled","id","required","tabIndex"],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"]],template:function(n,o){if(n&1){let s=dt();Qi(),ne(0,"div",3),Oe("click",function(h){return Re(s),Fe(o._preventBubblingFromLabel(h))}),ne(1,"div",4,0)(3,"div",5),Oe("click",function(){return Re(s),Fe(o._onTouchTargetClick())}),ce(),ne(4,"input",6,1),Oe("blur",function(){return Re(s),Fe(o._onBlur())})("click",function(){return Re(s),Fe(o._onInputClick())})("change",function(h){return Re(s),Fe(o._onInteractionEvent(h))}),ce(),wt(6,"div",7),ne(7,"div",8),jl(),ne(8,"svg",9),wt(9,"path",10),ce(),Q0(),wt(10,"div",11),ce(),wt(11,"div",12),ce(),ne(12,"label",13,2),pi(14),ce()()}if(n&2){let s=ji(2);ee("labelPosition",o.labelPosition),q(4),oi("mdc-checkbox--selected",o.checked),ee("checked",o.checked)("indeterminate",o.indeterminate)("disabled",o.disabled&&!o.disabledInteractive)("id",o.inputId)("required",o.required)("tabIndex",o.disabled&&!o.disabledInteractive?-1:o.tabIndex),yi("aria-label",o.ariaLabel||null)("aria-labelledby",o.ariaLabelledby)("aria-describedby",o.ariaDescribedby)("aria-checked",o.indeterminate?"mixed":null)("aria-disabled",o.disabled&&o.disabledInteractive?!0:null)("name",o.name)("value",o.value),q(7),ee("matRippleTrigger",s)("matRippleDisabled",o.disableRipple||o.disabled)("matRippleCentered",!0),q(),ee("for",o.inputId)}},dependencies:[fd,hA],styles:['.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom;padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox:hover .mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox:hover .mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox:active .mdc-checkbox__native-control~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:active .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity));background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-app-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity));background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-app-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control~.mdc-checkbox__ripple{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;width:var(--mdc-checkbox-state-layer-size, 40px);height:var(--mdc-checkbox-state-layer-size, 40px);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.cdk-high-contrast-active .mdc-checkbox--disabled{opacity:.5}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1);-webkit-print-color-adjust:exact;color-adjust:exact;border-color:var(--mdc-checkbox-unselected-icon-color, var(--mat-app-on-surface-variant));top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2)}.mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color, var(--mat-app-primary));background-color:var(--mdc-checkbox-selected-icon-color, var(--mat-app-primary))}.mdc-checkbox--disabled .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color)}.mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color);border-color:rgba(0,0,0,0)}.mdc-checkbox:hover .mdc-checkbox__native-control:not(:checked)~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mat-app-on-surface));background-color:rgba(0,0,0,0)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-app-primary));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-app-primary))}.mdc-checkbox__native-control:focus:focus:not(:checked)~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mat-app-on-surface))}.mdc-checkbox__native-control:focus:focus:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-app-primary));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-app-primary))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover .mdc-checkbox__native-control~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color)}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color);border-color:rgba(0,0,0,0)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.6, 1);color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-app-on-primary))}.cdk-high-contrast-active .mdc-checkbox__checkmark{color:CanvasText}.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-app-surface))}.cdk-high-contrast-active .mdc-checkbox--disabled .mdc-checkbox__checkmark,.cdk-high-contrast-active .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:CanvasText}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);border-color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-app-on-primary))}.cdk-high-contrast-active .mdc-checkbox__mixedmark{margin:0 1px}.mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-app-surface))}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms cubic-bezier(0, 0, 0.2, 1),transform 180ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox._mat-animation-noopable .mdc-checkbox *,.mat-mdc-checkbox._mat-animation-noopable .mdc-checkbox *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox .mat-internal-form-field{color:var(--mat-checkbox-label-text-color, var(--mat-app-on-surface));font-family:var(--mat-checkbox-label-text-font, var(--mat-app-body-medium-font));line-height:var(--mat-checkbox-label-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-checkbox-label-text-size, var(--mat-app-body-medium-size));letter-spacing:var(--mat-checkbox-label-text-tracking, var(--mat-app-body-medium-tracking));font-weight:var(--mat-checkbox-label-text-weight, var(--mat-app-body-medium-weight))}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive{pointer-events:auto}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive input{cursor:default}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default;color:var(--mat-checkbox-disabled-label-color)}.mat-mdc-checkbox label:empty{display:none}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-checkbox-touch-target-display)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return r})();var yv=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[jg,on,on]})}}return r})();var j$e=["mat-calendar-body",""];function V$e(r,i){return this._trackRow(i)}var gge=(r,i)=>i.id;function $$e(r,i){if(r&1&&(ne(0,"tr",0)(1,"td",3),Ye(2),ce()()),r&2){let e=ae();q(),vo("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),yi("colspan",e.numCols),q(),Qt(" ",e.label," ")}}function U$e(r,i){if(r&1&&(ne(0,"td",3),Ye(1),ce()),r&2){let e=ae(2);vo("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),yi("colspan",e._firstRowOffset),q(),Qt(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function z$e(r,i){if(r&1){let e=dt();ne(0,"td",6)(1,"button",7),Oe("click",function(o){let s=Re(e).$implicit,l=ae(2);return Fe(l._cellClicked(s,o))})("focus",function(o){let s=Re(e).$implicit,l=ae(2);return Fe(l._emitActiveDateChange(s,o))}),ne(2,"span",8),Ye(3),ce(),wt(4,"span",9),ce()()}if(r&2){let e=i.$implicit,n=i.$index,o=ae().$index,s=ae();vo("width",s._cellWidth)("padding-top",s._cellPadding)("padding-bottom",s._cellPadding),yi("data-mat-row",o)("data-mat-col",n),q(),oi("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",s._isActiveCell(o,n))("mat-calendar-body-range-start",s._isRangeStart(e.compareValue))("mat-calendar-body-range-end",s._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",s._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",s._isComparisonBridgeStart(e.compareValue,o,n))("mat-calendar-body-comparison-bridge-end",s._isComparisonBridgeEnd(e.compareValue,o,n))("mat-calendar-body-comparison-start",s._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",s._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",s._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",s._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",s._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",s._isInPreview(e.compareValue)),ee("ngClass",e.cssClasses)("tabindex",s._isActiveCell(o,n)?0:-1),yi("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-pressed",s._isSelected(e.compareValue))("aria-current",s.todayValue===e.compareValue?"date":null)("aria-describedby",s._getDescribedby(e.compareValue)),q(),oi("mat-calendar-body-selected",s._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",s._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",s.todayValue===e.compareValue),q(),Qt(" ",e.displayValue," ")}}function G$e(r,i){if(r&1&&(ne(0,"tr",1),We(1,U$e,2,6,"td",4),yg(2,z$e,5,48,"td",5,gge),ce()),r&2){let e=i.$implicit,n=i.$index,o=ae();q(),vn(n===0&&o._firstRowOffset?1:-1),q(),vg(e)}}function H$e(r,i){if(r&1&&(ne(0,"th",2)(1,"span",6),Ye(2),ce(),ne(3,"span",3),Ye(4),ce()()),r&2){let e=i.$implicit;q(2),Si(e.long),q(2),Si(e.narrow)}}var W$e=["*"];function q$e(r,i){}function Y$e(r,i){if(r&1){let e=dt();ne(0,"mat-month-view",4),bs("activeDateChange",function(o){Re(e);let s=ae();return Os(s.activeDate,o)||(s.activeDate=o),Fe(o)}),Oe("_userSelection",function(o){Re(e);let s=ae();return Fe(s._dateSelected(o))})("dragStarted",function(o){Re(e);let s=ae();return Fe(s._dragStarted(o))})("dragEnded",function(o){Re(e);let s=ae();return Fe(s._dragEnded(o))}),ce()}if(r&2){let e=ae();vs("activeDate",e.activeDate),ee("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)("startDateAccessibleName",e.startDateAccessibleName)("endDateAccessibleName",e.endDateAccessibleName)("activeDrag",e._activeDrag)}}function K$e(r,i){if(r&1){let e=dt();ne(0,"mat-year-view",5),bs("activeDateChange",function(o){Re(e);let s=ae();return Os(s.activeDate,o)||(s.activeDate=o),Fe(o)}),Oe("monthSelected",function(o){Re(e);let s=ae();return Fe(s._monthSelectedInYearView(o))})("selectedChange",function(o){Re(e);let s=ae();return Fe(s._goToDateInView(o,"month"))}),ce()}if(r&2){let e=ae();vs("activeDate",e.activeDate),ee("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function Z$e(r,i){if(r&1){let e=dt();ne(0,"mat-multi-year-view",6),bs("activeDateChange",function(o){Re(e);let s=ae();return Os(s.activeDate,o)||(s.activeDate=o),Fe(o)}),Oe("yearSelected",function(o){Re(e);let s=ae();return Fe(s._yearSelectedInMultiYearView(o))})("selectedChange",function(o){Re(e);let s=ae();return Fe(s._goToDateInView(o,"year"))}),ce()}if(r&2){let e=ae();vs("activeDate",e.activeDate),ee("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function Q$e(r,i){}var X$e=["button"],J$e=[[["","matDatepickerToggleIcon",""]]],eUe=["[matDatepickerToggleIcon]"];function tUe(r,i){r&1&&(jl(),ne(0,"svg",2),wt(1,"path",3),ce())}var _P=(()=>{class r{constructor(){this.changes=new Dt,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(e,n){return`${e} \u2013 ${n}`}formatYearRangeLabel(e,n){return`${e} to ${n}`}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),iUe=0,fP=class{constructor(i,e,n,o,s={},l=i,h){this.value=i,this.displayValue=e,this.ariaLabel=n,this.enabled=o,this.cssClasses=s,this.compareValue=l,this.rawValue=h,this.id=iUe++}},nUe=1,cge=Ul({passive:!1,capture:!0}),a1=Ul({passive:!0,capture:!0}),XB=Ul({passive:!0}),CE=(()=>{class r{ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}constructor(e,n){this._elementRef=e,this._ngZone=n,this._platform=Et(Hn),this._focusActiveCellAfterViewChecked=!1,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new it,this.previewChange=new it,this.activeDateChange=new it,this.dragStarted=new it,this.dragEnded=new it,this._didDragSinceMouseDown=!1,this._injector=Et(yn),this._trackRow=o=>o,this._enterHandler=o=>{if(this._skipNextFocus&&o.type==="focus"){this._skipNextFocus=!1;return}if(o.target&&this.isRange){let s=this._getCellFromElement(o.target);s&&this._ngZone.run(()=>this.previewChange.emit({value:s.enabled?s:null,event:o}))}},this._touchmoveHandler=o=>{if(!this.isRange)return;let s=dge(o),l=s?this._getCellFromElement(s):null;s!==o.target&&(this._didDragSinceMouseDown=!0),TY(o.target)&&o.preventDefault(),this._ngZone.run(()=>this.previewChange.emit({value:l?.enabled?l:null,event:o}))},this._leaveHandler=o=>{this.previewEnd!==null&&this.isRange&&(o.type!=="blur"&&(this._didDragSinceMouseDown=!0),o.target&&this._getCellFromElement(o.target)&&!(o.relatedTarget&&this._getCellFromElement(o.relatedTarget))&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:o})))},this._mousedownHandler=o=>{if(!this.isRange)return;this._didDragSinceMouseDown=!1;let s=o.target&&this._getCellFromElement(o.target);!s||!this._isInRange(s.compareValue)||this._ngZone.run(()=>{this.dragStarted.emit({value:s.rawValue,event:o})})},this._mouseupHandler=o=>{if(!this.isRange)return;let s=TY(o.target);if(!s){this._ngZone.run(()=>{this.dragEnded.emit({value:null,event:o})});return}s.closest(".mat-calendar-body")===this._elementRef.nativeElement&&this._ngZone.run(()=>{let l=this._getCellFromElement(s);this.dragEnded.emit({value:l?.rawValue??null,event:o})})},this._touchendHandler=o=>{let s=dge(o);s&&this._mouseupHandler({target:s})},this._id=`mat-calendar-body-${nUe++}`,this._startDateLabelId=`${this._id}-start-date`,this._endDateLabelId=`${this._id}-end-date`,n.runOutsideAngular(()=>{let o=e.nativeElement;o.addEventListener("touchmove",this._touchmoveHandler,cge),o.addEventListener("mouseenter",this._enterHandler,a1),o.addEventListener("focus",this._enterHandler,a1),o.addEventListener("mouseleave",this._leaveHandler,a1),o.addEventListener("blur",this._leaveHandler,a1),o.addEventListener("mousedown",this._mousedownHandler,XB),o.addEventListener("touchstart",this._mousedownHandler,XB),this._platform.isBrowser&&(window.addEventListener("mouseup",this._mouseupHandler),window.addEventListener("touchend",this._touchendHandler))})}_cellClicked(e,n){this._didDragSinceMouseDown||e.enabled&&this.selectedValueChange.emit({value:e.value,event:n})}_emitActiveDateChange(e,n){e.enabled&&this.activeDateChange.emit({value:e.value,event:n})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){let n=e.numCols,{rows:o,numCols:s}=this;(e.rows||n)&&(this._firstRowOffset=o&&o.length&&o[0].length?s-o[0].length:0),(e.cellAspectRatio||n||!this._cellPadding)&&(this._cellPadding=`${50*this.cellAspectRatio/s}%`),(n||!this._cellWidth)&&(this._cellWidth=`${100/s}%`)}ngOnDestroy(){let e=this._elementRef.nativeElement;e.removeEventListener("touchmove",this._touchmoveHandler,cge),e.removeEventListener("mouseenter",this._enterHandler,a1),e.removeEventListener("focus",this._enterHandler,a1),e.removeEventListener("mouseleave",this._leaveHandler,a1),e.removeEventListener("blur",this._leaveHandler,a1),e.removeEventListener("mousedown",this._mousedownHandler,XB),e.removeEventListener("touchstart",this._mousedownHandler,XB),this._platform.isBrowser&&(window.removeEventListener("mouseup",this._mouseupHandler),window.removeEventListener("touchend",this._touchendHandler))}_isActiveCell(e,n){let o=e*this.numCols+n;return e&&(o-=this._firstRowOffset),o==this.activeCell}_focusActiveCell(e=!0){ks(()=>{setTimeout(()=>{let n=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");n&&(e||(this._skipNextFocus=!0),n.focus())})},{injector:this._injector})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(e){return AY(e,this.startValue,this.endValue)}_isRangeEnd(e){return EY(e,this.startValue,this.endValue)}_isInRange(e){return MY(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return AY(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,n,o){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let s=this.rows[n][o-1];if(!s){let l=this.rows[n-1];s=l&&l[l.length-1]}return s&&!this._isRangeEnd(s.compareValue)}_isComparisonBridgeEnd(e,n,o){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let s=this.rows[n][o+1];if(!s){let l=this.rows[n+1];s=l&&l[0]}return s&&!this._isRangeStart(s.compareValue)}_isComparisonEnd(e){return EY(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return MY(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return AY(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return EY(e,this.previewStart,this.previewEnd)}_isInPreview(e){return MY(e,this.previewStart,this.previewEnd,this.isRange)}_getDescribedby(e){return this.isRange?this.startValue===e&&this.endValue===e?`${this._startDateLabelId} ${this._endDateLabelId}`:this.startValue===e?this._startDateLabelId:this.endValue===e?this._endDateLabelId:null:null}_getCellFromElement(e){let n=TY(e);if(n){let o=n.getAttribute("data-mat-row"),s=n.getAttribute("data-mat-col");if(o&&s)return this.rows[parseInt(o)][parseInt(s)]}return null}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(ci))}}static{this.\u0275cmp=gt({type:r,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange",dragStarted:"dragStarted",dragEnded:"dragEnded"},exportAs:["matCalendarBody"],standalone:!0,features:[Jn,yt],attrs:j$e,decls:7,vars:5,consts:[["aria-hidden","true"],["role","row"],[1,"mat-calendar-body-hidden-label",3,"id"],[1,"mat-calendar-body-label"],[1,"mat-calendar-body-label",3,"paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"click","focus","ngClass","tabindex"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(n,o){n&1&&(We(0,$$e,3,6,"tr",0),yg(1,G$e,4,1,"tr",1,V$e,!0),ne(3,"span",2),Ye(4),ce(),ne(5,"span",2),Ye(6),ce()),n&2&&(vn(o._firstRowOffset<o.labelMinRequiredCells?0:-1),q(),vg(o.rows),q(2),ee("id",o._startDateLabelId),q(),Qt(" ",o.startDateAccessibleName,`
`),q(),ee("id",o._endDateLabelId),q(),Qt(" ",o.endDateAccessibleName,`
`))},dependencies:[qr],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-outline-color, var(--mat-app-primary))}.mat-calendar-body-label{height:0;line-height:0;text-align:start;padding-left:4.7142857143%;padding-right:4.7142857143%;font-size:var(--mat-datepicker-calendar-body-label-text-size, var(--mat-app-title-small-size));font-weight:var(--mat-datepicker-calendar-body-label-text-weight, var(--mat-app-title-small-weight));color:var(--mat-datepicker-calendar-body-label-text-color, var(--mat-app-on-surface))}.mat-calendar-body-hidden-label{display:none}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-app-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-app-body-medium-size))}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;display:block;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview{color:var(--mat-datepicker-calendar-date-preview-state-outline-color, var(--mat-app-primary))}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-disabled>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){color:var(--mat-datepicker-calendar-date-disabled-state-text-color)}.mat-calendar-body-disabled>.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-disabled-state-outline-color)}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px;color:var(--mat-datepicker-calendar-date-text-color, var(--mat-app-on-surface));border-color:var(--mat-datepicker-calendar-date-outline-color)}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-focus-state-background-color)}@media(hover: hover){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-hover-state-background-color)}}.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-state-background-color, var(--mat-app-primary));color:var(--mat-datepicker-calendar-date-selected-state-text-color, var(--mat-app-on-primary))}.mat-calendar-body-disabled>.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-disabled-state-background-color)}.mat-calendar-body-selected.mat-calendar-body-today{box-shadow:inset 0 0 0 1px var(--mat-datepicker-calendar-date-today-selected-state-outline-color, var(--mat-app-primary))}.mat-calendar-body-in-range::before{background:var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-app-primary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-app-tertiary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-app-tertiary-container))}.mat-calendar-body-comparison-bridge-start::before,[dir=rtl] .mat-calendar-body-comparison-bridge-end::before{background:linear-gradient(to right, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-app-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-app-tertiary-container)) 50%)}.mat-calendar-body-comparison-bridge-end::before,[dir=rtl] .mat-calendar-body-comparison-bridge-start::before{background:linear-gradient(to left, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-app-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-app-tertiary-container)) 50%)}.mat-calendar-body-in-range>.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range.mat-calendar-body-in-range::after{background:var(--mat-datepicker-calendar-date-in-overlap-range-state-background-color, var(--mat-app-secondary-container))}.mat-calendar-body-comparison-identical.mat-calendar-body-selected,.mat-calendar-body-in-comparison-range>.mat-calendar-body-selected{background:var(--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color, var(--mat-app-secondary))}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}'],encapsulation:2,changeDetection:0})}}return r})();function IY(r){return r?.nodeName==="TD"}function TY(r){let i;return IY(r)?i=r:IY(r.parentNode)?i=r.parentNode:IY(r.parentNode?.parentNode)&&(i=r.parentNode.parentNode),i?.getAttribute("data-mat-row")!=null?i:null}function AY(r,i,e){return e!==null&&i!==e&&r<e&&r===i}function EY(r,i,e){return i!==null&&i!==e&&r>=i&&r===e}function MY(r,i,e,n){return n&&i!==null&&e!==null&&i!==e&&r>=i&&r<=e}function dge(r){let i=r.changedTouches[0];return document.elementFromPoint(i.clientX,i.clientY)}var yf=class{constructor(i,e){this.start=i,this.end=e}},gP=(()=>{class r{constructor(e,n){this.selection=e,this._adapter=n,this._selectionChanged=new Dt,this.selectionChanged=this._selectionChanged,this.selection=e}updateSelection(e,n){let o=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:n,oldValue:o})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}static{this.\u0275fac=function(n){tk()}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})(),rUe=(()=>{class r extends gP{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return this.selection!=null&&this._isValidDateInstance(this.selection)}isComplete(){return this.selection!=null}clone(){let e=new r(this._adapter);return e.updateSelection(this.selection,this),e}static{this.\u0275fac=function(n){return new(n||r)(xe(zl))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})();function oUe(r,i){return r||new rUe(i)}var _ge={provide:gP,deps:[[new Jm,new Y0,gP],zl],useFactory:oUe};var yge=new At("MAT_DATE_RANGE_SELECTION_STRATEGY");var DY=7,sUe=0,uge=(()=>{class r{get activeDate(){return this._activeDate}set activeDate(e){let n=this._activeDate,o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(o,this.minDate,this.maxDate),this._hasSameMonthAndYear(n,this._activeDate)||this._init()}get selected(){return this._selected}set selected(e){e instanceof yf?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}constructor(e,n,o,s,l){this._changeDetectorRef=e,this._dateFormats=n,this._dateAdapter=o,this._dir=s,this._rangeStrategy=l,this._rerenderSubscription=pn.EMPTY,this.activeDrag=null,this.selectedChange=new it,this._userSelection=new it,this.dragStarted=new it,this.dragEnded=new it,this.activeDateChange=new it,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(yo(null)).subscribe(()=>this._init())}ngOnChanges(e){let n=e.comparisonStart||e.comparisonEnd;n&&!n.firstChange&&this._setRanges(this.selected),e.activeDrag&&!this.activeDrag&&this._clearPreview()}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){let n=e.value,o=this._getDateFromDayOfMonth(n),s,l;this._selected instanceof yf?(s=this._getDateInCurrentMonth(this._selected.start),l=this._getDateInCurrentMonth(this._selected.end)):s=l=this._getDateInCurrentMonth(this._selected),(s!==n||l!==n)&&this.selectedChange.emit(o),this._userSelection.emit({value:o,event:e.event}),this._clearPreview(),this._changeDetectorRef.markForCheck()}_updateActiveDate(e){let n=e.value,o=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(n),this._dateAdapter.compareDate(o,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(e){let n=this._activeDate,o=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,o?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,o?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:this._selectionKeyPressed=!0,this._canSelect(this._activeDate)&&e.preventDefault();return;case 27:this._previewEnd!=null&&!gs(e)&&(this._clearPreview(),this.activeDrag?this.dragEnded.emit({value:null,event:e}):(this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e})),e.preventDefault(),e.stopPropagation());return;default:return}this._dateAdapter.compareDate(n,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(DY+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%DY,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event:e,value:n}){if(this._rangeStrategy){let o=n?n.rawValue:null,s=this._rangeStrategy.createPreview(o,this.selected,e);if(this._previewStart=this._getCellCompareValue(s.start),this._previewEnd=this._getCellCompareValue(s.end),this.activeDrag&&o){let l=this._rangeStrategy.createDrag?.(this.activeDrag.value,this.selected,o,e);l&&(this._previewStart=this._getCellCompareValue(l.start),this._previewEnd=this._getCellCompareValue(l.end))}this._changeDetectorRef.detectChanges()}}_dragEnded(e){if(this.activeDrag)if(e.value){let n=this._rangeStrategy?.createDrag?.(this.activeDrag.value,this.selected,e.value,e.event);this.dragEnded.emit({value:n??null,event:e.event})}else this.dragEnded.emit({value:null,event:e.event})}_getDateFromDayOfMonth(e){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),e)}_initWeekdays(){let e=this._dateAdapter.getFirstDayOfWeek(),n=this._dateAdapter.getDayOfWeekNames("narrow"),s=this._dateAdapter.getDayOfWeekNames("long").map((l,h)=>({long:l,narrow:n[h],id:sUe++}));this._weekdays=s.slice(e).concat(s.slice(0,e))}_createWeekCells(){let e=this._dateAdapter.getNumDaysInMonth(this.activeDate),n=this._dateAdapter.getDateNames();this._weeks=[[]];for(let o=0,s=this._firstWeekOffset;o<e;o++,s++){s==DY&&(this._weeks.push([]),s=0);let l=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),o+1),h=this._shouldEnableDate(l),p=this._dateAdapter.format(l,this._dateFormats.display.dateA11yLabel),m=this.dateClass?this.dateClass(l,"month"):void 0;this._weeks[this._weeks.length-1].push(new fP(o+1,n[o],p,h,m,this._getCellCompareValue(l),l))}}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,n){return!!(e&&n&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(n)&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(n))}_getCellCompareValue(e){if(e){let n=this._dateAdapter.getYear(e),o=this._dateAdapter.getMonth(e),s=this._dateAdapter.getDate(e);return new Date(n,o,s).getTime()}return null}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setRanges(e){e instanceof yf?(this._rangeStart=this._getCellCompareValue(e.start),this._rangeEnd=this._getCellCompareValue(e.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(e),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}_clearPreview(){this._previewStart=this._previewEnd=null}static{this.\u0275fac=function(n){return new(n||r)(ie(Ti),ie(o_,8),ie(zl,8),ie(To,8),ie(yge,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-month-view"]],viewQuery:function(n,o){if(n&1&&Ni(CE,5),n&2){let s;Yt(s=Kt())&&(o._matCalendarBody=s.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName",activeDrag:"activeDrag"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",dragStarted:"dragStarted",dragEnded:"dragEnded",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],standalone:!0,features:[Jn,yt],decls:8,vars:14,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col"],["aria-hidden","true"],["colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","previewChange","dragStarted","dragEnded","keyup","keydown","label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","startDateAccessibleName","endDateAccessibleName"],[1,"cdk-visually-hidden"]],template:function(n,o){n&1&&(ne(0,"table",0)(1,"thead",1)(2,"tr"),yg(3,H$e,5,2,"th",2,gge),ce(),ne(5,"tr",3),wt(6,"th",4),ce()(),ne(7,"tbody",5),Oe("selectedValueChange",function(l){return o._dateSelected(l)})("activeDateChange",function(l){return o._updateActiveDate(l)})("previewChange",function(l){return o._previewChanged(l)})("dragStarted",function(l){return o.dragStarted.emit(l)})("dragEnded",function(l){return o._dragEnded(l)})("keyup",function(l){return o._handleCalendarBodyKeyup(l)})("keydown",function(l){return o._handleCalendarBodyKeydown(l)}),ce()()),n&2&&(q(3),vg(o._weekdays),q(4),ee("label",o._monthLabel)("rows",o._weeks)("todayValue",o._todayDate)("startValue",o._rangeStart)("endValue",o._rangeEnd)("comparisonStart",o._comparisonRangeStart)("comparisonEnd",o._comparisonRangeEnd)("previewStart",o._previewStart)("previewEnd",o._previewEnd)("isRange",o._isRange)("labelMinRequiredCells",3)("activeCell",o._dateAdapter.getDate(o.activeDate)-1)("startDateAccessibleName",o.startDateAccessibleName)("endDateAccessibleName",o.endDateAccessibleName))},dependencies:[CE],encapsulation:2,changeDetection:0})}}return r})(),Sm=24,kY=4,hge=(()=>{class r{get activeDate(){return this._activeDate}set activeDate(e){let n=this._activeDate,o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(o,this.minDate,this.maxDate),vge(this._dateAdapter,n,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(e){e instanceof yf?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}constructor(e,n,o){this._changeDetectorRef=e,this._dateAdapter=n,this._dir=o,this._rerenderSubscription=pn.EMPTY,this.selectedChange=new it,this.yearSelected=new it,this.activeDateChange=new it,this._dateAdapter,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(yo(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());let n=this._dateAdapter.getYear(this._activeDate)-mP(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let o=0,s=[];o<Sm;o++)s.push(n+o),s.length==kY&&(this._years.push(s.map(l=>this._createCellForYear(l))),s=[]);this._changeDetectorRef.markForCheck()}_yearSelected(e){let n=e.value,o=this._dateAdapter.createDate(n,0,1),s=this._getDateFromYear(n);this.yearSelected.emit(o),this.selectedChange.emit(s)}_updateActiveDate(e){let n=e.value,o=this._activeDate;this.activeDate=this._getDateFromYear(n),this._dateAdapter.compareDate(o,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){let n=this._activeDate,o=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,o?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,o?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-kY);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,kY);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-mP(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,Sm-mP(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-Sm*10:-Sm);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?Sm*10:Sm);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(n,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return mP(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(e){let n=this._dateAdapter.getMonth(this.activeDate),o=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(e,n,1));return this._dateAdapter.createDate(e,n,Math.min(this._dateAdapter.getDate(this.activeDate),o))}_createCellForYear(e){let n=this._dateAdapter.createDate(e,0,1),o=this._dateAdapter.getYearName(n),s=this.dateClass?this.dateClass(n,"multi-year"):void 0;return new fP(e,o,o,this._shouldEnableYear(e),s)}_shouldEnableYear(e){if(e==null||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;let n=this._dateAdapter.createDate(e,0,1);for(let o=n;this._dateAdapter.getYear(o)==e;o=this._dateAdapter.addCalendarDays(o,1))if(this.dateFilter(o))return!0;return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedYear(e){if(this._selectedYear=null,e instanceof yf){let n=e.start||e.end;n&&(this._selectedYear=this._dateAdapter.getYear(n))}else e&&(this._selectedYear=this._dateAdapter.getYear(e))}static{this.\u0275fac=function(n){return new(n||r)(ie(Ti),ie(zl,8),ie(To,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-multi-year-view"]],viewQuery:function(n,o){if(n&1&&Ni(CE,5),n&2){let s;Yt(s=Kt())&&(o._matCalendarBody=s.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],standalone:!0,features:[yt],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell"]],template:function(n,o){n&1&&(ne(0,"table",0)(1,"thead",1)(2,"tr"),wt(3,"th",2),ce()(),ne(4,"tbody",3),Oe("selectedValueChange",function(l){return o._yearSelected(l)})("activeDateChange",function(l){return o._updateActiveDate(l)})("keyup",function(l){return o._handleCalendarBodyKeyup(l)})("keydown",function(l){return o._handleCalendarBodyKeydown(l)}),ce()()),n&2&&(q(4),ee("rows",o._years)("todayValue",o._todayYear)("startValue",o._selectedYear)("endValue",o._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",o._getActiveCell()))},dependencies:[CE],encapsulation:2,changeDetection:0})}}return r})();function vge(r,i,e,n,o){let s=r.getYear(i),l=r.getYear(e),h=bge(r,n,o);return Math.floor((s-h)/Sm)===Math.floor((l-h)/Sm)}function mP(r,i,e,n){let o=r.getYear(i);return aUe(o-bge(r,e,n),Sm)}function bge(r,i,e){let n=0;return e?n=r.getYear(e)-Sm+1:i&&(n=r.getYear(i)),n}function aUe(r,i){return(r%i+i)%i}var pge=(()=>{class r{get activeDate(){return this._activeDate}set activeDate(e){let n=this._activeDate,o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(o,this.minDate,this.maxDate),this._dateAdapter.getYear(n)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(e){e instanceof yf?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}constructor(e,n,o,s){this._changeDetectorRef=e,this._dateFormats=n,this._dateAdapter=o,this._dir=s,this._rerenderSubscription=pn.EMPTY,this.selectedChange=new it,this.monthSelected=new it,this.activeDateChange=new it,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(yo(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){let n=e.value,o=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),n,1);this.monthSelected.emit(o);let s=this._getDateFromMonth(n);this.selectedChange.emit(s)}_updateActiveDate(e){let n=e.value,o=this._activeDate;this.activeDate=this._getDateFromMonth(n),this._dateAdapter.compareDate(o,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){let n=this._activeDate,o=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,o?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,o?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(n,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(n=>n.map(o=>this._createCellForMonth(o,e[o]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_getDateFromMonth(e){let n=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),o=this._dateAdapter.getNumDaysInMonth(n);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,Math.min(this._dateAdapter.getDate(this.activeDate),o))}_createCellForMonth(e,n){let o=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),s=this._dateAdapter.format(o,this._dateFormats.display.monthYearA11yLabel),l=this.dateClass?this.dateClass(o,"year"):void 0;return new fP(e,n.toLocaleUpperCase(),s,this._shouldEnableMonth(e),l)}_shouldEnableMonth(e){let n=this._dateAdapter.getYear(this.activeDate);if(e==null||this._isYearAndMonthAfterMaxDate(n,e)||this._isYearAndMonthBeforeMinDate(n,e))return!1;if(!this.dateFilter)return!0;let o=this._dateAdapter.createDate(n,e,1);for(let s=o;this._dateAdapter.getMonth(s)==e;s=this._dateAdapter.addCalendarDays(s,1))if(this.dateFilter(s))return!0;return!1}_isYearAndMonthAfterMaxDate(e,n){if(this.maxDate){let o=this._dateAdapter.getYear(this.maxDate),s=this._dateAdapter.getMonth(this.maxDate);return e>o||e===o&&n>s}return!1}_isYearAndMonthBeforeMinDate(e,n){if(this.minDate){let o=this._dateAdapter.getYear(this.minDate),s=this._dateAdapter.getMonth(this.minDate);return e<o||e===o&&n<s}return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedMonth(e){e instanceof yf?this._selectedMonth=this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end):this._selectedMonth=this._getMonthInCurrentYear(e)}static{this.\u0275fac=function(n){return new(n||r)(ie(Ti),ie(o_,8),ie(zl,8),ie(To,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-year-view"]],viewQuery:function(n,o){if(n&1&&Ni(CE,5),n&2){let s;Yt(s=Kt())&&(o._matCalendarBody=s.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],standalone:!0,features:[yt],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell"]],template:function(n,o){n&1&&(ne(0,"table",0)(1,"thead",1)(2,"tr"),wt(3,"th",2),ce()(),ne(4,"tbody",3),Oe("selectedValueChange",function(l){return o._monthSelected(l)})("activeDateChange",function(l){return o._updateActiveDate(l)})("keyup",function(l){return o._handleCalendarBodyKeyup(l)})("keydown",function(l){return o._handleCalendarBodyKeydown(l)}),ce()()),n&2&&(q(4),ee("label",o._yearLabel)("rows",o._months)("todayValue",o._todayMonth)("startValue",o._selectedMonth)("endValue",o._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",o._dateAdapter.getMonth(o.activeDate)))},dependencies:[CE],encapsulation:2,changeDetection:0})}}return r})(),lUe=1,wge=(()=>{class r{constructor(e,n,o,s,l){this._intl=e,this.calendar=n,this._dateAdapter=o,this._dateFormats=s,this._id=`mat-calendar-header-${lUe++}`,this._periodButtonLabelId=`${this._id}-period-label`,this.calendar.stateChanges.subscribe(()=>l.markForCheck())}get periodButtonText(){return this.calendar.currentView=="month"?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():this.calendar.currentView=="year"?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRange(...this._formatMinAndMaxYearLabels())}get periodButtonDescription(){return this.calendar.currentView=="month"?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():this.calendar.currentView=="year"?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRangeLabel(...this._formatMinAndMaxYearLabels())}get periodButtonLabel(){return this.calendar.currentView=="month"?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView=this.calendar.currentView=="month"?"multi-year":"month"}previousClicked(){this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?-1:-Sm)}nextClicked(){this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?1:Sm)}previousEnabled(){return this.calendar.minDate?!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate):!0}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(e,n){return this.calendar.currentView=="month"?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(n)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(n):this.calendar.currentView=="year"?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(n):vge(this._dateAdapter,e,n,this.calendar.minDate,this.calendar.maxDate)}_formatMinAndMaxYearLabels(){let n=this._dateAdapter.getYear(this.calendar.activeDate)-mP(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),o=n+Sm-1,s=this._dateAdapter.getYearName(this._dateAdapter.createDate(n,0,1)),l=this._dateAdapter.getYearName(this._dateAdapter.createDate(o,0,1));return[s,l]}static{this.\u0275fac=function(n){return new(n||r)(ie(_P),ie(Go(()=>OY)),ie(zl,8),ie(o_,8),ie(Ti))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],standalone:!0,features:[yt],ngContentSelectors:W$e,decls:17,vars:11,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["aria-live","polite",1,"cdk-visually-hidden",3,"id"],["mat-button","","type","button",1,"mat-calendar-period-button",3,"click"],["aria-hidden","true"],["viewBox","0 0 10 5","focusable","false","aria-hidden","true",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"click","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"click","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"]],template:function(n,o){n&1&&(Qi(),ne(0,"div",0)(1,"div",1)(2,"span",2),Ye(3),ce(),ne(4,"button",3),Oe("click",function(){return o.currentPeriodClicked()}),ne(5,"span",4),Ye(6),ce(),jl(),ne(7,"svg",5),wt(8,"polygon",6),ce()(),Q0(),wt(9,"div",7),pi(10),ne(11,"button",8),Oe("click",function(){return o.previousClicked()}),jl(),ne(12,"svg",9),wt(13,"path",10),ce()(),Q0(),ne(14,"button",11),Oe("click",function(){return o.nextClicked()}),jl(),ne(15,"svg",9),wt(16,"path",12),ce()()()()),n&2&&(q(2),ee("id",o._periodButtonLabelId),q(),Si(o.periodButtonDescription),q(),yi("aria-label",o.periodButtonLabel)("aria-describedby",o._periodButtonLabelId),q(2),Si(o.periodButtonText),q(),oi("mat-calendar-invert",o.calendar.currentView!=="month"),q(4),ee("disabled",!o.previousEnabled()),yi("aria-label",o.prevButtonLabel),q(3),ee("disabled",!o.nextEnabled()),yi("aria-label",o.nextButtonLabel))},dependencies:[Ua,Cr],encapsulation:2,changeDetection:0})}}return r})(),OY=(()=>{class r{get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get selected(){return this._selected}set selected(e){e instanceof yf?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(e){let n=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),n&&this.viewChanged.emit(n)}constructor(e,n,o,s){this._dateAdapter=n,this._dateFormats=o,this._changeDetectorRef=s,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new it,this.yearSelected=new it,this.monthSelected=new it,this.viewChanged=new it(!0),this._userSelection=new it,this._userDragDrop=new it,this._activeDrag=null,this.stateChanges=new Dt,this._intlChanges=e.changes.subscribe(()=>{s.markForCheck(),this.stateChanges.next()})}ngAfterContentInit(){this._calendarHeaderPortal=new Bg(this.headerComponent||wge),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){let n=e.minDate&&!this._dateAdapter.sameDate(e.minDate.previousValue,e.minDate.currentValue)?e.minDate:void 0,o=e.maxDate&&!this._dateAdapter.sameDate(e.maxDate.previousValue,e.maxDate.currentValue)?e.maxDate:void 0,s=n||o||e.dateFilter;if(s&&!s.firstChange){let l=this._getCurrentViewComponent();l&&(this._moveFocusOnNextTick=!0,this._changeDetectorRef.detectChanges(),l._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(e){let n=e.value;(this.selected instanceof yf||n&&!this._dateAdapter.sameDate(n,this.selected))&&this.selectedChange.emit(n),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,n){this.activeDate=e,this.currentView=n}_dragStarted(e){this._activeDrag=e}_dragEnded(e){this._activeDrag&&(e.value&&this._userDragDrop.emit(e),this._activeDrag=null)}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}static{this.\u0275fac=function(n){return new(n||r)(ie(_P),ie(zl,8),ie(o_,8),ie(Ti))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-calendar"]],viewQuery:function(n,o){if(n&1&&(Ni(uge,5),Ni(pge,5),Ni(hge,5)),n&2){let s;Yt(s=Kt())&&(o.monthView=s.first),Yt(s=Kt())&&(o.yearView=s.first),Yt(s=Kt())&&(o.multiYearView=s.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection",_userDragDrop:"_userDragDrop"},exportAs:["matCalendar"],standalone:!0,features:[Bi([_ge]),Jn,yt],decls:5,vars:2,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","_userSelection","dragStarted","dragEnded","activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDateChange","monthSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","yearSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"]],template:function(n,o){if(n&1&&(We(0,q$e,0,0,"ng-template",0),ne(1,"div",1),We(2,Y$e,1,11,"mat-month-view",2)(3,K$e,1,6,"mat-year-view",3)(4,Z$e,1,6,"mat-multi-year-view",3),ce()),n&2){let s;ee("cdkPortalOutlet",o._calendarHeaderPortal),q(2),vn((s=o.currentView)==="month"?2:s==="year"?3:s==="multi-year"?4:-1)}},dependencies:[pf,YN,uge,pge,hge],styles:['.mat-calendar{display:block;line-height:normal;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-app-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-app-body-medium-size))}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;align-items:center;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0;margin:0 8px;font-size:var(--mat-datepicker-calendar-period-button-text-size, var(--mat-app-title-small-size));font-weight:var(--mat-datepicker-calendar-period-button-text-weight, var(--mat-app-title-small-weight));--mdc-text-button-label-text-color:var(--mat-datepicker-calendar-period-button-text-color, var(--mat-app-on-surface-variant))}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle;fill:var(--mat-datepicker-calendar-period-button-icon-color, var(--mat-app-on-surface-variant))}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.cdk-high-contrast-active .mat-calendar-arrow{fill:CanvasText}.mat-datepicker-content .mat-calendar-previous-button:not(.mat-mdc-button-disabled),.mat-datepicker-content .mat-calendar-next-button:not(.mat-mdc-button-disabled){color:var(--mat-datepicker-calendar-navigation-button-icon-color, var(--mat-app-on-surface-variant))}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0;color:var(--mat-datepicker-calendar-header-text-color, var(--mat-app-on-surface-variant));font-size:var(--mat-datepicker-calendar-header-text-size, var(--mat-app-title-small-size));font-weight:var(--mat-datepicker-calendar-header-text-weight, var(--mat-app-title-small-weight))}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px;background:var(--mat-datepicker-calendar-header-divider-color)}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return r})(),mge={transformPanel:Or("transformPanel",[ln("void => enter-dropdown",un("120ms cubic-bezier(0, 0, 0.2, 1)",Tw([mi({opacity:0,transform:"scale(1, 0.8)"}),mi({opacity:1,transform:"scale(1, 1)"})]))),ln("void => enter-dialog",un("150ms cubic-bezier(0, 0, 0.2, 1)",Tw([mi({opacity:0,transform:"scale(0.7)"}),mi({transform:"none",opacity:1})]))),ln("* => void",un("100ms linear",mi({opacity:0})))]),fadeInCalendar:Or("fadeInCalendar",[zi("void",mi({opacity:0})),zi("enter",mi({opacity:1})),ln("void => *",un("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])},cUe=0,Cge=new At("mat-datepicker-scroll-strategy",{providedIn:"root",factory:()=>{let r=Et(Ro);return()=>r.scrollStrategies.reposition()}});function dUe(r){return()=>r.scrollStrategies.reposition()}var uUe={provide:Cge,deps:[Ro],useFactory:dUe},xge=(()=>{class r{constructor(e,n,o,s,l,h){this._elementRef=e,this._changeDetectorRef=n,this._globalModel=o,this._dateAdapter=s,this._rangeSelectionStrategy=l,this._subscriptions=new pn,this._animationDone=new Dt,this._isAnimating=!1,this._actionsPortal=null,this._closeButtonText=h.closeCalendarLabel}ngOnInit(){this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){let n=this._model.selection,o=e.value,s=n instanceof yf;if(s&&this._rangeSelectionStrategy){let l=this._rangeSelectionStrategy.selectionFinished(o,n,e.event);this._model.updateSelection(l,this)}else o&&(s||!this._dateAdapter.sameDate(o,n))&&this._model.add(o);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_handleUserDragDrop(e){this._model.updateSelection(e.value,this)}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_handleAnimationEvent(e){this._isAnimating=e.phaseName==="start",this._isAnimating||this._animationDone.next()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(e,n){this._model=e?this._globalModel.clone():this._globalModel,this._actionsPortal=e,n&&this._changeDetectorRef.detectChanges()}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(Ti),ie(gP),ie(zl),ie(yge,8),ie(_P))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-datepicker-content"]],viewQuery:function(n,o){if(n&1&&Ni(OY,5),n&2){let s;Yt(s=Kt())&&(o._calendar=s.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:5,hostBindings:function(n,o){n&1&&ak("@transformPanel.start",function(l){return o._handleAnimationEvent(l)})("@transformPanel.done",function(l){return o._handleAnimationEvent(l)}),n&2&&(ix("@transformPanel",o._animationState),Hr(o.color?"mat-"+o.color:""),oi("mat-datepicker-content-touch",o.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],standalone:!0,features:[yt],decls:5,vars:27,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"yearSelected","monthSelected","viewChanged","_userSelection","_userDragDrop","id","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"focus","blur","click","color"]],template:function(n,o){if(n&1&&(ne(0,"div",0)(1,"mat-calendar",1),Oe("yearSelected",function(l){return o.datepicker._selectYear(l)})("monthSelected",function(l){return o.datepicker._selectMonth(l)})("viewChanged",function(l){return o.datepicker._viewChanged(l)})("_userSelection",function(l){return o._handleUserSelection(l)})("_userDragDrop",function(l){return o._handleUserDragDrop(l)}),ce(),We(2,Q$e,0,0,"ng-template",2),ne(3,"button",3),Oe("focus",function(){return o._closeButtonFocused=!0})("blur",function(){return o._closeButtonFocused=!1})("click",function(){return o.datepicker.close()}),Ye(4),ce()()),n&2){let s;oi("mat-datepicker-content-container-with-custom-header",o.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",o._actionsPortal),yi("aria-modal",!0)("aria-labelledby",(s=o._dialogLabelId)!==null&&s!==void 0?s:void 0),q(),Hr(o.datepicker.panelClass),ee("id",o.datepicker.id)("startAt",o.datepicker.startAt)("startView",o.datepicker.startView)("minDate",o.datepicker._getMinDate())("maxDate",o.datepicker._getMaxDate())("dateFilter",o.datepicker._getDateFilter())("headerComponent",o.datepicker.calendarHeaderComponent)("selected",o._getSelected())("dateClass",o.datepicker.dateClass)("comparisonStart",o.comparisonStart)("comparisonEnd",o.comparisonEnd)("@fadeInCalendar","enter")("startDateAccessibleName",o.startDateAccessibleName)("endDateAccessibleName",o.endDateAccessibleName),q(),ee("cdkPortalOutlet",o._actionsPortal),q(),oi("cdk-visually-hidden",!o._closeButtonFocused),ee("color",o.color||"primary"),q(),Si(o._closeButtonText)}},dependencies:[khe,OY,pf,Ua],styles:[".mat-datepicker-content{display:block;border-radius:4px;background-color:var(--mat-datepicker-calendar-container-background-color, var(--mat-app-surface-container-high));color:var(--mat-datepicker-calendar-container-text-color, var(--mat-app-on-surface));box-shadow:var(--mat-datepicker-calendar-container-elevation-shadow);border-radius:var(--mat-datepicker-calendar-container-shape, var(--mat-app-corner-large))}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;box-shadow:var(--mat-datepicker-calendar-container-touch-elevation-shadow);border-radius:var(--mat-datepicker-calendar-container-touch-shape, var(--mat-app-corner-extra-large));position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}"],encapsulation:2,data:{animation:[mge.transformPanel,mge.fadeInCalendar]},changeDetection:0})}}return r})(),fge=(()=>{class r{get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(e){this._color=e}get disabled(){return this._disabled===void 0&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(e){e!==this._disabled&&(this._disabled=e,this.stateChanges.next(void 0))}get panelClass(){return this._panelClass}set panelClass(e){this._panelClass=bhe(e)}get opened(){return this._opened}set opened(e){e?this.open():this.close()}_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}constructor(e,n,o,s,l,h,p){this._overlay=e,this._viewContainerRef=o,this._dateAdapter=l,this._dir=h,this._model=p,this._inputStateChanges=pn.EMPTY,this._document=Et(Ui),this.startView="month",this.touchUi=!1,this.xPosition="start",this.yPosition="below",this.restoreFocus=!0,this.yearSelected=new it,this.monthSelected=new it,this.viewChanged=new it(!0),this.openedStream=new it,this.closedStream=new it,this._opened=!1,this.id=`mat-datepicker-${cUe++}`,this._focusedElementBeforeOpen=null,this._backdropHarnessClass=`${this.id}-backdrop`,this.stateChanges=new Dt,this._injector=Et(yn),this._changeDetectorRef=Et(Ti),this._dateAdapter,this._scrollStrategy=s,this._model.selectionChanged.subscribe(()=>{this._changeDetectorRef.markForCheck()})}ngOnChanges(e){let n=e.xPosition||e.yPosition;if(n&&!n.firstChange&&this._overlayRef){let o=this._overlayRef.getConfig().positionStrategy;o instanceof cP&&(this._setConnectedPositions(o),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(e){this._model.add(e)}_selectYear(e){this.yearSelected.emit(e)}_selectMonth(e){this.monthSelected.emit(e)}_viewChanged(e){this.viewChanged.emit(e)}registerInput(e){return this.datepickerInput,this._inputStateChanges.unsubscribe(),this.datepickerInput=e,this._inputStateChanges=e.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(e){this._actionsPortal,this._actionsPortal=e,this._componentRef?.instance._assignActions(e,!0)}removeActions(e){e===this._actionsPortal&&(this._actionsPortal=null,this._componentRef?.instance._assignActions(null,!0))}open(){this._opened||this.disabled||this._componentRef?.instance._isAnimating||(this.datepickerInput,this._focusedElementBeforeOpen=yw(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened||this._componentRef?.instance._isAnimating)return;let e=this.restoreFocus&&this._focusedElementBeforeOpen&&typeof this._focusedElementBeforeOpen.focus=="function",n=()=>{this._opened&&(this._opened=!1,this.closedStream.emit())};if(this._componentRef){let{instance:o,location:s}=this._componentRef;o._startExitAnimation(),o._animationDone.pipe(Tn(1)).subscribe(()=>{let l=this._document.activeElement;e&&(!l||l===this._document.activeElement||s.nativeElement.contains(l))&&this._focusedElementBeforeOpen.focus(),this._focusedElementBeforeOpen=null,this._destroyOverlay()})}e?setTimeout(n):n()}_applyPendingSelection(){this._componentRef?.instance?._applyPendingSelection()}_forwardContentValues(e){e.datepicker=this,e.color=this.color,e._dialogLabelId=this.datepickerInput.getOverlayLabelId(),e._assignActions(this._actionsPortal,!1)}_openOverlay(){this._destroyOverlay();let e=this.touchUi,n=new Bg(xge,this._viewContainerRef),o=this._overlayRef=this._overlay.create(new mf({positionStrategy:e?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[e?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir,scrollStrategy:e?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:`mat-datepicker-${e?"dialog":"popup"}`}));this._getCloseStream(o).subscribe(s=>{s&&s.preventDefault(),this.close()}),o.keydownEvents().subscribe(s=>{let l=s.keyCode;(l===38||l===40||l===37||l===39||l===33||l===34)&&s.preventDefault()}),this._componentRef=o.attach(n),this._forwardContentValues(this._componentRef.instance),e||ks(()=>{o.updatePosition()},{injector:this._injector})}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){let e=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(e)}_setConnectedPositions(e){let n=this.xPosition==="end"?"end":"start",o=n==="start"?"end":"start",s=this.yPosition==="above"?"bottom":"top",l=s==="top"?"bottom":"top";return e.withPositions([{originX:n,originY:l,overlayX:n,overlayY:s},{originX:n,originY:s,overlayX:n,overlayY:l},{originX:o,originY:l,overlayX:o,overlayY:s},{originX:o,originY:s,overlayX:o,overlayY:l}])}_getCloseStream(e){let n=["ctrlKey","shiftKey","metaKey"];return vr(e.backdropClick(),e.detachments(),e.keydownEvents().pipe(mn(o=>o.keyCode===27&&!gs(o)||this.datepickerInput&&gs(o,"altKey")&&o.keyCode===38&&n.every(s=>!gs(o,s)))))}static{this.\u0275fac=function(n){return new(n||r)(ie(Ro),ie(ci),ie(Io),ie(Cge),ie(zl,8),ie(To,8),ie(gP))}}static{this.\u0275dir=Pt({type:r,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:[2,"touchUi","touchUi",Xt],disabled:[2,"disabled","disabled",Xt],xPosition:"xPosition",yPosition:"yPosition",restoreFocus:[2,"restoreFocus","restoreFocus",Xt],dateClass:"dateClass",panelClass:"panelClass",opened:[2,"opened","opened",Xt]},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[an,Jn]})}}return r})(),JB=(()=>{class r extends fge{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275cmp=gt({type:r,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],standalone:!0,features:[Bi([_ge,{provide:fge,useExisting:r}]),fn,yt],decls:0,vars:0,template:function(n,o){},encapsulation:2,changeDetection:0})}}return r})(),wE=class{constructor(i,e){this.target=i,this.targetElement=e,this.value=this.target.value}},hUe=(()=>{class r{get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(e){this._assignValueProgrammatically(e)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(e){let n=e,o=this._elementRef.nativeElement;this._disabled!==n&&(this._disabled=n,this.stateChanges.next(void 0)),n&&this._isInitialized&&o.blur&&o.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(e){this._model=e,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(n=>{if(this._shouldHandleChangeEvent(n)){let o=this._getValueFromModel(n.selection);this._lastValueValid=this._isValidValue(o),this._cvaOnChange(o),this._onTouched(),this._formatValue(o),this.dateInput.emit(new wE(this,this._elementRef.nativeElement)),this.dateChange.emit(new wE(this,this._elementRef.nativeElement))}})}constructor(e,n,o){this._elementRef=e,this._dateAdapter=n,this._dateFormats=o,this.dateChange=new it,this.dateInput=new it,this.stateChanges=new Dt,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=pn.EMPTY,this._localeSubscription=pn.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=s=>{let l=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value));return!l||this._matchesFilter(l)?null:{matDatepickerFilter:!0}},this._minValidator=s=>{let l=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value)),h=this._getMinDate();return!h||!l||this._dateAdapter.compareDate(h,l)<=0?null:{matDatepickerMin:{min:h,actual:l}}},this._maxValidator=s=>{let l=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value)),h=this._getMaxDate();return!h||!l||this._dateAdapter.compareDate(h,l)>=0?null:{matDatepickerMax:{max:h,actual:l}}},this._lastValueValid=!1,this._localeSubscription=n.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(e){pUe(e,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}writeValue(e){this._assignValueProgrammatically(e)}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onKeydown(e){let n=["ctrlKey","shiftKey","metaKey"];gs(e,"altKey")&&e.keyCode===40&&n.every(s=>!gs(e,s))&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),e.preventDefault())}_onInput(e){let n=this._lastValueValid,o=this._dateAdapter.parse(e,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(o),o=this._dateAdapter.getValidDateOrNull(o);let s=!this._dateAdapter.sameDate(o,this.value);!o||s?this._cvaOnChange(o):(e&&!this.value&&this._cvaOnChange(o),n!==this._lastValueValid&&this._validatorOnChange()),s&&(this._assignValue(o),this.dateInput.emit(new wE(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new wE(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=e!=null?this._dateAdapter.format(e,this._dateFormats.display.dateInput):""}_assignValue(e){this._model?(this._assignValueToModel(e),this._pendingValue=null):this._pendingValue=e}_isValidValue(e){return!e||this._dateAdapter.isValid(e)}_parentDisabled(){return!1}_assignValueProgrammatically(e){e=this._dateAdapter.deserialize(e),this._lastValueValid=this._isValidValue(e),e=this._dateAdapter.getValidDateOrNull(e),this._assignValue(e),this._formatValue(e)}_matchesFilter(e){let n=this._getDateFilter();return!n||n(e)}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(zl,8),ie(o_,8))}}static{this.\u0275dir=Pt({type:r,inputs:{value:"value",disabled:[2,"disabled","disabled",Xt]},outputs:{dateChange:"dateChange",dateInput:"dateInput"},standalone:!0,features:[an,Jn]})}}return r})();function pUe(r,i){let e=Object.keys(r);for(let n of e){let{previousValue:o,currentValue:s}=r[n];if(i.isDateInstance(o)&&i.isDateInstance(s)){if(!i.sameDate(o,s))return!0}else return!0}return!1}var mUe={provide:Gc,useExisting:Go(()=>xE),multi:!0},fUe={provide:bp,useExisting:Go(()=>xE),multi:!0},xE=(()=>{class r extends hUe{set matDatepicker(e){e&&(this._datepicker=e,this._ariaOwns.set(e.opened?e.id:null),this._closedSubscription=e.closedStream.subscribe(()=>{this._onTouched(),this._ariaOwns.set(null)}),this._openedSubscription=e.openedStream.subscribe(()=>{this._ariaOwns.set(e.id)}),this._registerModel(e.registerInput(this)))}get min(){return this._min}set min(e){let n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(n,this._min)||(this._min=n,this._validatorOnChange())}get max(){return this._max}set max(e){let n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(n,this._max)||(this._max=n,this._validatorOnChange())}get dateFilter(){return this._dateFilter}set dateFilter(e){let n=this._matchesFilter(this.value);this._dateFilter=e,this._matchesFilter(this.value)!==n&&this._validatorOnChange()}constructor(e,n,o,s){super(e,n,o),this._formField=s,this._closedSubscription=pn.EMPTY,this._openedSubscription=pn.EMPTY,this._ariaOwns=Vl(null),this._validator=Dl.compose(super._getValidators())}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe(),this._openedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(e){return e}_assignValueToModel(e){this._model&&this._model.updateSelection(e,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(e){return e.source!==this}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(zl,8),ie(o_,8),ie(Gy,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(n,o){n&1&&Oe("input",function(l){return o._onInput(l.target.value)})("change",function(){return o._onChange()})("blur",function(){return o._onBlur()})("keydown",function(l){return o._onKeydown(l)}),n&2&&(hd("disabled",o.disabled),yi("aria-haspopup",o._datepicker?"dialog":null)("aria-owns",o._ariaOwns())("min",o.min?o._dateAdapter.toIso8601(o.min):null)("max",o.max?o._dateAdapter.toIso8601(o.max):null)("data-mat-calendar",o._datepicker?o._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:[0,"matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],standalone:!0,features:[Bi([mUe,fUe,{provide:hW,useExisting:r}]),fn]})}}return r})(),gUe=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=Pt({type:r,selectors:[["","matDatepickerToggleIcon",""]],standalone:!0})}}return r})(),yP=(()=>{class r{get disabled(){return this._disabled===void 0&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=e}constructor(e,n,o){this._intl=e,this._changeDetectorRef=n,this._stateChanges=pn.EMPTY;let s=Number(o);this.tabIndex=s||s===0?s:null}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){let e=this.datepicker?this.datepicker.stateChanges:Vt(),n=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:Vt(),o=this.datepicker?vr(this.datepicker.openedStream,this.datepicker.closedStream):Vt();this._stateChanges.unsubscribe(),this._stateChanges=vr(this._intl.changes,e,n,o).subscribe(()=>this._changeDetectorRef.markForCheck())}static{this.\u0275fac=function(n){return new(n||r)(ie(_P),ie(Ti),oc("tabindex"))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-datepicker-toggle"]],contentQueries:function(n,o,s){if(n&1&&Sn(s,gUe,5),n&2){let l;Yt(l=Kt())&&(o._customIcon=l.first)}},viewQuery:function(n,o){if(n&1&&Ni(X$e,5),n&2){let s;Yt(s=Kt())&&(o._button=s.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(n,o){n&1&&Oe("click",function(l){return o._open(l)}),n&2&&(yi("tabindex",null)("data-mat-calendar",o.datepicker?o.datepicker.id:null),oi("mat-datepicker-toggle-active",o.datepicker&&o.datepicker.opened)("mat-accent",o.datepicker&&o.datepicker.color==="accent")("mat-warn",o.datepicker&&o.datepicker.color==="warn"))},inputs:{datepicker:[0,"for","datepicker"],tabIndex:"tabIndex",ariaLabel:[0,"aria-label","ariaLabel"],disabled:[2,"disabled","disabled",Xt],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],standalone:!0,features:[an,Jn,yt],ngContentSelectors:eUe,decls:4,vars:6,consts:[["button",""],["mat-icon-button","","type","button",3,"disabled","disableRipple"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false","aria-hidden","true",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(n,o){n&1&&(Qi(J$e),ne(0,"button",1,0),We(2,tUe,2,0,":svg:svg",2),pi(3),ce()),n&2&&(ee("disabled",o.disabled)("disableRipple",o.disableRipple),yi("aria-haspopup",o.datepicker?"dialog":null)("aria-label",o.ariaLabel||o._intl.openCalendarLabel)("tabindex",o.disabled?-1:o.tabIndex),q(2),vn(o._customIcon?-1:2))},dependencies:[Cr],styles:[".mat-datepicker-toggle{pointer-events:auto;color:var(--mat-datepicker-toggle-icon-color, var(--mat-app-on-surface-variant))}.mat-datepicker-toggle-active{color:var(--mat-datepicker-toggle-active-state-icon-color, var(--mat-app-on-surface-variant))}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}"],encapsulation:2,changeDetection:0})}}return r})();var ej=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({providers:[_P,uUe],imports:[$a,bn,Ep,Cw,pv,on,xge,yP,wge,Xh]})}}return r})();function _Ue(r,i){if(r&1&&(ne(0,"mat-option",17),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e),q(),Qt(" ",e," ")}}function yUe(r,i){if(r&1){let e=dt();ne(0,"mat-form-field",14)(1,"mat-select",16,0),Oe("selectionChange",function(o){Re(e);let s=ae(2);return Fe(s._changePageSize(o.value))}),yg(3,_Ue,2,2,"mat-option",17,sk),ce(),ne(5,"div",18),Oe("click",function(){Re(e);let o=ji(2);return Fe(o.open())}),ce()()}if(r&2){let e=ae(2);ee("appearance",e._formFieldAppearance)("color",e.color),q(),ee("value",e.pageSize)("disabled",e.disabled)("aria-labelledby",e._pageSizeLabelId)("panelClass",e.selectConfig.panelClass||"")("disableOptionCentering",e.selectConfig.disableOptionCentering),q(2),vg(e._displayedPageSizeOptions)}}function vUe(r,i){if(r&1&&(ne(0,"div",15),Ye(1),ce()),r&2){let e=ae(2);q(),Si(e.pageSize)}}function bUe(r,i){if(r&1&&(ne(0,"div",3)(1,"div",13),Ye(2),ce(),We(3,yUe,6,7,"mat-form-field",14)(4,vUe,2,1,"div",15),ce()),r&2){let e=ae();q(),yi("id",e._pageSizeLabelId),q(),Qt(" ",e._intl.itemsPerPageLabel," "),q(),vn(e._displayedPageSizeOptions.length>1?3:-1),q(),vn(e._displayedPageSizeOptions.length<=1?4:-1)}}function wUe(r,i){if(r&1){let e=dt();ne(0,"button",19),Oe("click",function(){Re(e);let o=ae();return Fe(o.firstPage())}),jl(),ne(1,"svg",8),wt(2,"path",20),ce()()}if(r&2){let e=ae();ee("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),yi("aria-label",e._intl.firstPageLabel)}}function CUe(r,i){if(r&1){let e=dt();ne(0,"button",21),Oe("click",function(){Re(e);let o=ae();return Fe(o.lastPage())}),jl(),ne(1,"svg",8),wt(2,"path",22),ce()()}if(r&2){let e=ae();ee("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),yi("aria-label",e._intl.lastPageLabel)}}var tj=(()=>{class r{constructor(){this.changes=new Dt,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,n,o)=>{if(o==0||n==0)return`0 of ${o}`;o=Math.max(o,0);let s=e*n,l=s<o?Math.min(s+n,o):s+n;return`${s+1} \u2013 ${l} of ${o}`}}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function xUe(r){return r||new tj}var SUe={provide:tj,deps:[[new Jm,new Y0,tj]],useFactory:xUe},IUe=50;var TUe=new At("MAT_PAGINATOR_DEFAULT_OPTIONS"),AUe=0,vP=(()=>{class r{get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(e||0,0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=e||0,this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(e||0,0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(n=>Oo(n,0)),this._updateDisplayedPageSizeOptions()}constructor(e,n,o){if(this._intl=e,this._changeDetectorRef=n,this._pageSizeLabelId=`mat-paginator-page-size-label-${AUe++}`,this._isInitialized=!1,this._initializedStream=new Vd(1),this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this.hidePageSize=!1,this.showFirstLastButtons=!1,this.selectConfig={},this.disabled=!1,this.page=new it,this.initialized=this._initializedStream,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),o){let{pageSize:s,pageSizeOptions:l,hidePageSize:h,showFirstLastButtons:p}=o;s!=null&&(this._pageSize=s),l!=null&&(this._pageSizeOptions=l),h!=null&&(this.hidePageSize=h),p!=null&&(this.showFirstLastButtons=p)}this._formFieldAppearance=o?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;let e=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;let e=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;let e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;let e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&this.pageSize!=0}hasNextPage(){let e=this.getNumberOfPages()-1;return this.pageIndex<e&&this.pageSize!=0}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){let n=this.pageIndex*this.pageSize,o=this.pageIndex;this.pageIndex=Math.floor(n/e)||0,this.pageSize=e,this._emitPageEvent(o)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=this.pageSizeOptions.length!=0?this.pageSizeOptions[0]:IUe),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),this._displayedPageSizeOptions.indexOf(this.pageSize)===-1&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,n)=>e-n),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}static{this.\u0275fac=function(n){return new(n||r)(ie(tj),ie(Ti),ie(TUe,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[2,"pageIndex","pageIndex",Oo],length:[2,"length","length",Oo],pageSize:[2,"pageSize","pageSize",Oo],pageSizeOptions:"pageSizeOptions",hidePageSize:[2,"hidePageSize","hidePageSize",Xt],showFirstLastButtons:[2,"showFirstLastButtons","showFirstLastButtons",Xt],selectConfig:"selectConfig",disabled:[2,"disabled","disabled",Xt]},outputs:{page:"page"},exportAs:["matPaginator"],standalone:!0,features:[an,yt],decls:14,vars:14,consts:[["selectRef",""],[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],[1,"mat-mdc-paginator-touch-target",3,"click"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(n,o){n&1&&(ne(0,"div",1)(1,"div",2),We(2,bUe,5,4,"div",3),ne(3,"div",4)(4,"div",5),Ye(5),ce(),We(6,wUe,3,5,"button",6),ne(7,"button",7),Oe("click",function(){return o.previousPage()}),jl(),ne(8,"svg",8),wt(9,"path",9),ce()(),Q0(),ne(10,"button",10),Oe("click",function(){return o.nextPage()}),jl(),ne(11,"svg",8),wt(12,"path",11),ce()(),We(13,CUe,3,5,"button",12),ce()()()),n&2&&(q(2),vn(o.hidePageSize?-1:2),q(3),Qt(" ",o._intl.getRangeLabel(o.pageIndex,o.pageSize,o.length)," "),q(),vn(o.showFirstLastButtons?6:-1),q(),ee("matTooltip",o._intl.previousPageLabel)("matTooltipDisabled",o._previousButtonsDisabled())("matTooltipPosition","above")("disabled",o._previousButtonsDisabled()),yi("aria-label",o._intl.previousPageLabel),q(3),ee("matTooltip",o._intl.nextPageLabel)("matTooltipDisabled",o._nextButtonsDisabled())("matTooltipPosition","above")("disabled",o._nextButtonsDisabled()),yi("aria-label",o._intl.nextPageLabel),q(3),vn(o.showFirstLastButtons?13:-1))},dependencies:[dc,sh,lc,Cr,Ar],styles:[".mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color, var(--mat-app-on-surface));background-color:var(--mat-paginator-container-background-color, var(--mat-app-surface));font-family:var(--mat-paginator-container-text-font, var(--mat-app-body-small-font));line-height:var(--mat-paginator-container-text-line-height, var(--mat-app-body-small-line-height));font-size:var(--mat-paginator-container-text-size, var(--mat-app-body-small-size));font-weight:var(--mat-paginator-container-text-weight, var(--mat-app-body-small-weight));letter-spacing:var(--mat-paginator-container-text-tracking, var(--mat-app-body-small-tracking));--mat-form-field-container-height:var(--mat-paginator-form-field-container-height);--mat-form-field-container-vertical-padding:var(--mat-paginator-form-field-container-vertical-padding)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size, var(--mat-app-body-small-size))}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color)}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}.mat-mdc-paginator-touch-target{display:var(--mat-paginator-touch-target-display);position:absolute;top:50%;left:50%;width:84px;height:48px;background-color:rgba(0,0,0,0);transform:translate(-50%, -50%);cursor:pointer}"],encapsulation:2,changeDetection:0})}}return r})(),Ige=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({providers:[SUe],imports:[bn,ah,Er,vP]})}}return r})();var MUe=["mat-sort-header",""],DUe=["*"];function kUe(r,i){if(r&1){let e=dt();ne(0,"div",2),Oe("@arrowPosition.start",function(){Re(e);let o=ae();return Fe(o._disableViewStateAnimation=!0)})("@arrowPosition.done",function(){Re(e);let o=ae();return Fe(o._disableViewStateAnimation=!1)}),wt(1,"div",3),ne(2,"div",4),wt(3,"div",5)(4,"div",6)(5,"div",7),ce()()}if(r&2){let e=ae();ee("@arrowOpacity",e._getArrowViewState())("@arrowPosition",e._getArrowViewState())("@allowChildren",e._getArrowDirectionState()),q(2),ee("@indicator",e._getArrowDirectionState()),q(),ee("@leftPointer",e._getArrowDirectionState()),q(),ee("@rightPointer",e._getArrowDirectionState())}}var Tge=new At("MAT_SORT_DEFAULT_OPTIONS"),PY=(()=>{class r{get direction(){return this._direction}set direction(e){this._direction=e}constructor(e){this._defaultOptions=e,this._initializedStream=new Vd(1),this.sortables=new Map,this._stateChanges=new Dt,this.start="asc",this._direction="",this.disabled=!1,this.sortChange=new it,this.initialized=this._initializedStream}register(e){this.sortables.set(e.id,e)}deregister(e){this.sortables.delete(e.id)}sort(e){this.active!=e.id?(this.active=e.id,this.direction=e.start?e.start:this.start):this.direction=this.getNextSortDirection(e),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(e){if(!e)return"";let n=e?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear,o=OUe(e.start||this.start,n),s=o.indexOf(this.direction)+1;return s>=o.length&&(s=0),o[s]}ngOnInit(){this._initializedStream.next()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete(),this._initializedStream.complete()}static{this.\u0275fac=function(n){return new(n||r)(ie(Tge,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{active:[0,"matSortActive","active"],start:[0,"matSortStart","start"],direction:[0,"matSortDirection","direction"],disableClear:[2,"matSortDisableClear","disableClear",Xt],disabled:[2,"matSortDisabled","disabled",Xt]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],standalone:!0,features:[an,Jn]})}}return r})();function OUe(r,i){let e=["asc","desc"];return r=="desc"&&e.reverse(),i||e.push(""),e}var l1=zhe.ENTERING+" "+Uhe.STANDARD_CURVE,SE={indicator:Or("indicator",[zi("active-asc, asc",mi({transform:"translateY(0px)"})),zi("active-desc, desc",mi({transform:"translateY(10px)"})),ln("active-asc <=> active-desc",un(l1))]),leftPointer:Or("leftPointer",[zi("active-asc, asc",mi({transform:"rotate(-45deg)"})),zi("active-desc, desc",mi({transform:"rotate(45deg)"})),ln("active-asc <=> active-desc",un(l1))]),rightPointer:Or("rightPointer",[zi("active-asc, asc",mi({transform:"rotate(45deg)"})),zi("active-desc, desc",mi({transform:"rotate(-45deg)"})),ln("active-asc <=> active-desc",un(l1))]),arrowOpacity:Or("arrowOpacity",[zi("desc-to-active, asc-to-active, active",mi({opacity:1})),zi("desc-to-hint, asc-to-hint, hint",mi({opacity:.54})),zi("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",mi({opacity:0})),ln("* => asc, * => desc, * => active, * => hint, * => void",un("0ms")),ln("* <=> *",un(l1))]),arrowPosition:Or("arrowPosition",[ln("* => desc-to-hint, * => desc-to-active",un(l1,Tw([mi({transform:"translateY(-25%)"}),mi({transform:"translateY(0)"})]))),ln("* => hint-to-desc, * => active-to-desc",un(l1,Tw([mi({transform:"translateY(0)"}),mi({transform:"translateY(25%)"})]))),ln("* => asc-to-hint, * => asc-to-active",un(l1,Tw([mi({transform:"translateY(25%)"}),mi({transform:"translateY(0)"})]))),ln("* => hint-to-asc, * => active-to-asc",un(l1,Tw([mi({transform:"translateY(0)"}),mi({transform:"translateY(-25%)"})]))),zi("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",mi({transform:"translateY(0)"})),zi("hint-to-desc, active-to-desc, desc",mi({transform:"translateY(-25%)"})),zi("hint-to-asc, active-to-asc, asc",mi({transform:"translateY(25%)"}))]),allowChildren:Or("allowChildren",[ln("* <=> *",[t4("@*",e4(),{optional:!0})])])},ij=(()=>{class r{constructor(){this.changes=new Dt}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function PUe(r){return r||new ij}var RUe={provide:ij,deps:[[new Jm,new Y0,ij]],useFactory:PUe},Age=(()=>{class r{get sortActionDescription(){return this._sortActionDescription}set sortActionDescription(e){this._updateSortActionDescription(e)}constructor(e,n,o,s,l,h,p,m){this._intl=e,this._changeDetectorRef=n,this._sort=o,this._columnDef=s,this._focusMonitor=l,this._elementRef=h,this._ariaDescriber=p,this._showIndicatorHint=!1,this._viewState={},this._arrowDirection="",this._disableViewStateAnimation=!1,this.arrowPosition="after",this.disabled=!1,this._sortActionDescription="Sort",m?.arrowPosition&&(this.arrowPosition=m?.arrowPosition),this._handleStateChanges()}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this),this._sortButton=this._elementRef.nativeElement.querySelector(".mat-sort-header-container"),this._updateSortActionDescription(this._sortActionDescription)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{let n=!!e;n!==this._showIndicatorHint&&(this._setIndicatorHintVisible(n),this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe(),this._sortButton&&this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription)}_setIndicatorHintVisible(e){this._isDisabled()&&e||(this._showIndicatorHint=e,this._isSorted()||(this._updateArrowDirection(),this._showIndicatorHint?this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"hint"}):this._setAnimationTransitionState({fromState:"hint",toState:this._arrowDirection})))}_setAnimationTransitionState(e){this._viewState=e||{},this._disableViewStateAnimation&&(this._viewState={toState:e.toState})}_toggleOnInteraction(){this._sort.sort(this),(this._viewState.toState==="hint"||this._viewState.toState==="active")&&(this._disableViewStateAnimation=!0)}_handleClick(){this._isDisabled()||this._sort.sort(this)}_handleKeydown(e){!this._isDisabled()&&(e.keyCode===32||e.keyCode===13)&&(e.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&(this._sort.direction==="asc"||this._sort.direction==="desc")}_getArrowDirectionState(){return`${this._isSorted()?"active-":""}${this._arrowDirection}`}_getArrowViewState(){let e=this._viewState.fromState;return(e?`${e}-to-`:"")+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?this._sort.direction=="asc"?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}_updateSortActionDescription(e){this._sortButton&&(this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription),this._ariaDescriber?.describe(this._sortButton,e)),this._sortActionDescription=e}_handleStateChanges(){this._rerenderSubscription=vr(this._sort.sortChange,this._sort._stateChanges,this._intl.changes).subscribe(()=>{this._isSorted()&&(this._updateArrowDirection(),(this._viewState.toState==="hint"||this._viewState.toState==="active")&&(this._disableViewStateAnimation=!0),this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"active"}),this._showIndicatorHint=!1),!this._isSorted()&&this._viewState&&this._viewState.toState==="active"&&(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:"active",toState:this._arrowDirection})),this._changeDetectorRef.markForCheck()})}static{this.\u0275fac=function(n){return new(n||r)(ie(ij),ie(Ti),ie(PY,8),ie("MAT_SORT_HEADER_COLUMN_DEF",8),ie(il),ie(Ht),ie(lA,8),ie(Tge,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(n,o){n&1&&Oe("click",function(){return o._handleClick()})("keydown",function(l){return o._handleKeydown(l)})("mouseenter",function(){return o._setIndicatorHintVisible(!0)})("mouseleave",function(){return o._setIndicatorHintVisible(!1)}),n&2&&(yi("aria-sort",o._getAriaSortAttribute()),oi("mat-sort-header-disabled",o._isDisabled()))},inputs:{id:[0,"mat-sort-header","id"],arrowPosition:"arrowPosition",start:"start",disabled:[2,"disabled","disabled",Xt],sortActionDescription:"sortActionDescription",disableClear:[2,"disableClear","disableClear",Xt]},exportAs:["matSortHeader"],standalone:!0,features:[an,yt],attrs:MUe,ngContentSelectors:DUe,decls:4,vars:7,consts:[[1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(n,o){n&1&&(Qi(),ne(0,"div",0)(1,"div",1),pi(2),ce(),We(3,kUe,6,6,"div",2),ce()),n&2&&(oi("mat-sort-header-sorted",o._isSorted())("mat-sort-header-position-before",o.arrowPosition==="before"),yi("tabindex",o._isDisabled()?null:0)("role",o._isDisabled()?null:"button"),q(3),vn(o._renderArrow()?3:-1))},styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-container::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;color:var(--mat-sort-arrow-color, var(--mat-app-on-surface));opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}"],encapsulation:2,data:{animation:[SE.indicator,SE.leftPointer,SE.rightPointer,SE.arrowOpacity,SE.arrowPosition,SE.allowChildren]},changeDetection:0})}}return r})(),Ege=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({providers:[RUe],imports:[on]})}}return r})();var NUe=[[["caption"]],[["colgroup"],["col"]],"*"],BUe=["caption","colgroup, col","*"];function jUe(r,i){r&1&&pi(0,2)}function VUe(r,i){r&1&&(ne(0,"thead",0),_a(1,1),ce(),ne(2,"tbody",0),_a(3,2)(4,3),ce(),ne(5,"tfoot",0),_a(6,4),ce())}function $Ue(r,i){r&1&&_a(0,1)(1,2)(2,3)(3,4)}var Vg=new At("CDK_TABLE");var lj=(()=>{class r{constructor(e){this.template=e}static{this.\u0275fac=function(n){return new(n||r)(ie(jo))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdkCellDef",""]],standalone:!0})}}return r})(),cj=(()=>{class r{constructor(e){this.template=e}static{this.\u0275fac=function(n){return new(n||r)(ie(jo))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdkHeaderCellDef",""]],standalone:!0})}}return r})(),kge=(()=>{class r{constructor(e){this.template=e}static{this.\u0275fac=function(n){return new(n||r)(ie(jo))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdkFooterCellDef",""]],standalone:!0})}}return r})(),IE=(()=>{class r{get name(){return this._name}set name(e){this._setNameInput(e)}get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){e!==this._stickyEnd&&(this._stickyEnd=e,this._hasStickyChanged=!0)}constructor(e){this._table=e,this._hasStickyChanged=!1,this._sticky=!1,this._stickyEnd=!1}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}static{this.\u0275fac=function(n){return new(n||r)(ie(Vg,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdkColumnDef",""]],contentQueries:function(n,o,s){if(n&1&&(Sn(s,lj,5),Sn(s,cj,5),Sn(s,kge,5)),n&2){let l;Yt(l=Kt())&&(o.cell=l.first),Yt(l=Kt())&&(o.headerCell=l.first),Yt(l=Kt())&&(o.footerCell=l.first)}},inputs:{name:[0,"cdkColumnDef","name"],sticky:[2,"sticky","sticky",Xt],stickyEnd:[2,"stickyEnd","stickyEnd",Xt]},standalone:!0,features:[Bi([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:r}]),an]})}}return r})(),rj=class{constructor(i,e){e.nativeElement.classList.add(...i._columnCssClassName)}},Oge=(()=>{class r extends rj{constructor(e,n){super(e,n)}static{this.\u0275fac=function(n){return new(n||r)(ie(IE),ie(Ht))}}static{this.\u0275dir=Pt({type:r,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],standalone:!0,features:[fn]})}}return r})();var Pge=(()=>{class r extends rj{constructor(e,n){super(e,n);let o=e._table?._getCellRole();o&&n.nativeElement.setAttribute("role",o)}static{this.\u0275fac=function(n){return new(n||r)(ie(IE),ie(Ht))}}static{this.\u0275dir=Pt({type:r,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],standalone:!0,features:[fn]})}}return r})(),oj=class{constructor(){this.tasks=[],this.endTasks=[]}},sj=new At("_COALESCED_STYLE_SCHEDULER"),FY=(()=>{class r{constructor(e){this._currentSchedule=null,this._ngZone=Et(ci)}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new oj,this._ngZone.runOutsideAngular(()=>queueMicrotask(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){let e=this._currentSchedule;this._currentSchedule=new oj;for(let n of e.tasks)n();for(let n of e.endTasks)n()}this._currentSchedule=null})))}static{this.\u0275fac=function(n){return new(n||r)(xe(ci))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})();var LY=(()=>{class r{constructor(e,n){this.template=e,this._differs=n}ngOnChanges(e){if(!this._columnsDiffer){let n=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(n).create(),this._columnsDiffer.diff(n)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof bP?e.headerCell.template:this instanceof NY?e.footerCell.template:e.cell.template}static{this.\u0275fac=function(n){return new(n||r)(ie(jo),ie(J0))}}static{this.\u0275dir=Pt({type:r,features:[Jn]})}}return r})(),bP=(()=>{class r extends LY{get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}constructor(e,n,o){super(e,n),this._table=o,this._hasStickyChanged=!1,this._sticky=!1}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static{this.\u0275fac=function(n){return new(n||r)(ie(jo),ie(J0),ie(Vg,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[0,"cdkHeaderRowDef","columns"],sticky:[2,"cdkHeaderRowDefSticky","sticky",Xt]},standalone:!0,features:[an,fn,Jn]})}}return r})(),NY=(()=>{class r extends LY{get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}constructor(e,n,o){super(e,n),this._table=o,this._hasStickyChanged=!1,this._sticky=!1}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static{this.\u0275fac=function(n){return new(n||r)(ie(jo),ie(J0),ie(Vg,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[0,"cdkFooterRowDef","columns"],sticky:[2,"cdkFooterRowDefSticky","sticky",Xt]},standalone:!0,features:[an,fn,Jn]})}}return r})(),dj=(()=>{class r extends LY{constructor(e,n,o){super(e,n),this._table=o}static{this.\u0275fac=function(n){return new(n||r)(ie(jo),ie(J0),ie(Vg,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdkRowDef",""]],inputs:{columns:[0,"cdkRowDefColumns","columns"],when:[0,"cdkRowDefWhen","when"]},standalone:!0,features:[fn]})}}return r})(),vS=(()=>{class r{static{this.mostRecentCellOutlet=null}constructor(e){this._viewContainer=e,r.mostRecentCellOutlet=this}ngOnDestroy(){r.mostRecentCellOutlet===this&&(r.mostRecentCellOutlet=null)}static{this.\u0275fac=function(n){return new(n||r)(ie(Io))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdkCellOutlet",""]],standalone:!0})}}return r})(),BY=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=gt({type:r,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],standalone:!0,features:[yt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,o){n&1&&_a(0,0)},dependencies:[vS],encapsulation:2})}}return r})();var jY=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=gt({type:r,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],standalone:!0,features:[yt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,o){n&1&&_a(0,0)},dependencies:[vS],encapsulation:2})}}return r})(),Rge=(()=>{class r{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}static{this.\u0275fac=function(n){return new(n||r)(ie(jo))}}static{this.\u0275dir=Pt({type:r,selectors:[["ng-template","cdkNoDataRow",""]],standalone:!0})}}return r})(),Mge=["top","bottom","left","right"],RY=class{constructor(i,e,n,o,s=!0,l=!0,h){this._isNativeHtmlTable=i,this._stickCellCss=e,this.direction=n,this._coalescedStyleScheduler=o,this._isBrowser=s,this._needsPositionStickyOnElement=l,this._positionListener=h,this._elemSizeCache=new WeakMap,this._resizeObserver=globalThis?.ResizeObserver?new globalThis.ResizeObserver(p=>this._updateCachedSizes(p)):null,this._updatedStickyColumnsParamsToReplay=[],this._stickyColumnsReplayTimeout=null,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(i,e){(e.includes("left")||e.includes("right"))&&this._removeFromStickyColumnReplayQueue(i);let n=[];for(let o of i)if(o.nodeType===o.ELEMENT_NODE){n.push(o);for(let s=0;s<o.children.length;s++)n.push(o.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(let o of n)this._removeStickyStyle(o,e)})}updateStickyColumns(i,e,n,o=!0,s=!0){if(s&&this._updateStickyColumnReplayQueue({rows:[...i],stickyStartStates:[...e],stickyEndStates:[...n]}),!i.length||!this._isBrowser||!(e.some(l=>l)||n.some(l=>l))){this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]}));return}this._coalescedStyleScheduler.schedule(()=>{let l=i[0],h=l.children.length,p=this._getCellWidths(l,o),m=this._getStickyStartColumnPositions(p,e),f=this._getStickyEndColumnPositions(p,n),g=e.lastIndexOf(!0),y=n.indexOf(!0),_=this.direction==="rtl",w=_?"right":"left",A=_?"left":"right";for(let k of i)for(let R=0;R<h;R++){let $=k.children[R];e[R]&&this._addStickyStyle($,w,m[R],R===g),n[R]&&this._addStickyStyle($,A,f[R],R===y)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:g===-1?[]:p.slice(0,g+1).map((k,R)=>e[R]?k:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:y===-1?[]:p.slice(y).map((k,R)=>n[R+y]?k:null).reverse()}))})}stickRows(i,e,n){this._isBrowser&&this._coalescedStyleScheduler.schedule(()=>{let o=n==="bottom"?i.slice().reverse():i,s=n==="bottom"?e.slice().reverse():e,l=[],h=[],p=[];for(let f=0,g=0;f<o.length;f++){if(!s[f])continue;l[f]=g;let y=o[f];p[f]=this._isNativeHtmlTable?Array.from(y.children):[y];let _=this._retrieveElementSize(y).height;g+=_,h[f]=_}let m=s.lastIndexOf(!0);for(let f=0;f<o.length;f++){if(!s[f])continue;let g=l[f],y=f===m;for(let _ of p[f])this._addStickyStyle(_,n,g,y)}n==="top"?this._positionListener?.stickyHeaderRowsUpdated({sizes:h,offsets:l,elements:p}):this._positionListener?.stickyFooterRowsUpdated({sizes:h,offsets:l,elements:p})})}updateStickyFooterContainer(i,e){this._isNativeHtmlTable&&this._coalescedStyleScheduler.schedule(()=>{let n=i.querySelector("tfoot");n&&(e.some(o=>!o)?this._removeStickyStyle(n,["bottom"]):this._addStickyStyle(n,"bottom",0,!1))})}_removeStickyStyle(i,e){for(let o of e)i.style[o]="",i.classList.remove(this._borderCellCss[o]);Mge.some(o=>e.indexOf(o)===-1&&i.style[o])?i.style.zIndex=this._getCalculatedZIndex(i):(i.style.zIndex="",this._needsPositionStickyOnElement&&(i.style.position=""),i.classList.remove(this._stickCellCss))}_addStickyStyle(i,e,n,o){i.classList.add(this._stickCellCss),o&&i.classList.add(this._borderCellCss[e]),i.style[e]=`${n}px`,i.style.zIndex=this._getCalculatedZIndex(i),this._needsPositionStickyOnElement&&(i.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(i){let e={top:100,bottom:10,left:1,right:1},n=0;for(let o of Mge)i.style[o]&&(n+=e[o]);return n?`${n}`:""}_getCellWidths(i,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;let n=[],o=i.children;for(let s=0;s<o.length;s++){let l=o[s];n.push(this._retrieveElementSize(l).width)}return this._cachedCellWidths=n,n}_getStickyStartColumnPositions(i,e){let n=[],o=0;for(let s=0;s<i.length;s++)e[s]&&(n[s]=o,o+=i[s]);return n}_getStickyEndColumnPositions(i,e){let n=[],o=0;for(let s=i.length;s>0;s--)e[s]&&(n[s]=o,o+=i[s]);return n}_retrieveElementSize(i){let e=this._elemSizeCache.get(i);if(e)return e;let n=i.getBoundingClientRect(),o={width:n.width,height:n.height};return this._resizeObserver&&(this._elemSizeCache.set(i,o),this._resizeObserver.observe(i,{box:"border-box"})),o}_updateStickyColumnReplayQueue(i){this._removeFromStickyColumnReplayQueue(i.rows),!this._stickyColumnsReplayTimeout&&this._updatedStickyColumnsParamsToReplay.push(i)}_removeFromStickyColumnReplayQueue(i){let e=new Set(i);for(let n of this._updatedStickyColumnsParamsToReplay)n.rows=n.rows.filter(o=>!e.has(o));this._updatedStickyColumnsParamsToReplay=this._updatedStickyColumnsParamsToReplay.filter(n=>!!n.rows.length)}_updateCachedSizes(i){let e=!1;for(let n of i){let o=n.borderBoxSize?.length?{width:n.borderBoxSize[0].inlineSize,height:n.borderBoxSize[0].blockSize}:{width:n.contentRect.width,height:n.contentRect.height};o.width!==this._elemSizeCache.get(n.target)?.width&&UUe(n.target)&&(e=!0),this._elemSizeCache.set(n.target,o)}e&&this._updatedStickyColumnsParamsToReplay.length&&(this._stickyColumnsReplayTimeout&&clearTimeout(this._stickyColumnsReplayTimeout),this._stickyColumnsReplayTimeout=setTimeout(()=>{for(let n of this._updatedStickyColumnsParamsToReplay)this.updateStickyColumns(n.rows,n.stickyStartStates,n.stickyEndStates,!0,!1);this._updatedStickyColumnsParamsToReplay=[],this._stickyColumnsReplayTimeout=null},0))}};function UUe(r){return["cdk-cell","cdk-header-cell","cdk-footer-cell"].some(i=>r.classList.contains(i))}var aj=new At("CDK_SPL");var VY=(()=>{class r{constructor(e,n){this.viewContainer=e,this.elementRef=n;let o=Et(Vg);o._rowOutlet=this,o._outletAssigned()}static{this.\u0275fac=function(n){return new(n||r)(ie(Io),ie(Ht))}}static{this.\u0275dir=Pt({type:r,selectors:[["","rowOutlet",""]],standalone:!0})}}return r})(),$Y=(()=>{class r{constructor(e,n){this.viewContainer=e,this.elementRef=n;let o=Et(Vg);o._headerRowOutlet=this,o._outletAssigned()}static{this.\u0275fac=function(n){return new(n||r)(ie(Io),ie(Ht))}}static{this.\u0275dir=Pt({type:r,selectors:[["","headerRowOutlet",""]],standalone:!0})}}return r})(),UY=(()=>{class r{constructor(e,n){this.viewContainer=e,this.elementRef=n;let o=Et(Vg);o._footerRowOutlet=this,o._outletAssigned()}static{this.\u0275fac=function(n){return new(n||r)(ie(Io),ie(Ht))}}static{this.\u0275dir=Pt({type:r,selectors:[["","footerRowOutlet",""]],standalone:!0})}}return r})(),zY=(()=>{class r{constructor(e,n){this.viewContainer=e,this.elementRef=n;let o=Et(Vg);o._noDataRowOutlet=this,o._outletAssigned()}static{this.\u0275fac=function(n){return new(n||r)(ie(Io),ie(Ht))}}static{this.\u0275dir=Pt({type:r,selectors:[["","noDataRowOutlet",""]],standalone:!0})}}return r})();var GY=(()=>{class r{_getCellRole(){if(this._cellRoleInternal===void 0){let e=this._elementRef.nativeElement.getAttribute("role");return e==="grid"||e==="treegrid"?"gridcell":"cell"}return this._cellRoleInternal}get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=e,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=e,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}constructor(e,n,o,s,l,h,p,m,f,g,y,_){this._differs=e,this._changeDetectorRef=n,this._elementRef=o,this._dir=l,this._platform=p,this._viewRepeater=m,this._coalescedStyleScheduler=f,this._viewportRuler=g,this._stickyPositioningListener=y,this._onDestroy=new Dt,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._hasAllOutlets=!1,this._hasInitialized=!1,this._cellRoleInternal=void 0,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new it,this.viewChange=new mt({start:0,end:Number.MAX_VALUE}),this._injector=Et(yn),s||o.nativeElement.setAttribute("role","table"),this._document=h,this._isServer=!p.isBrowser,this._isNativeHtmlTable=o.nativeElement.nodeName==="TABLE"}ngOnInit(){this._setupStickyStyler(),this._dataDiffer=this._differs.find([]).create((e,n)=>this.trackBy?this.trackBy(n.dataIndex,n.data):n),this._viewportRuler.change().pipe(rn(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentInit(){this._hasInitialized=!0}ngAfterContentChecked(){this._canRender()&&this._render()}ngOnDestroy(){[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),NB(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();let e=this._dataDiffer.diff(this._renderRows);if(!e){this._updateNoDataRow(),this.contentChanged.next();return}let n=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,n,(o,s,l)=>this._getEmbeddedViewArgs(o.item,l),o=>o.item.data,o=>{o.operation===pE.INSERTED&&o.context&&this._renderCellTemplateForItem(o.record.item.rowDef,o.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(o=>{let s=n.get(o.currentIndex);s.context.$implicit=o.item.data}),this._updateNoDataRow(),ks(()=>{this.updateStickyColumnStyles()},{injector:this._injector}),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){let e=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){let o=Dge(this._headerRowOutlet,"thead");o&&(o.style.display=e.length?"":"none")}let n=this._headerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,n,"top"),this._headerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyFooterRowStyles(){let e=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){let o=Dge(this._footerRowOutlet,"tfoot");o&&(o.style.display=e.length?"":"none")}let n=this._footerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,n,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,n),this._footerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyColumnStyles(){let e=this._getRenderedRows(this._headerRowOutlet),n=this._getRenderedRows(this._rowOutlet),o=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...n,...o],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((s,l)=>{this._addStickyColumnStyles([s],this._headerRowDefs[l])}),this._rowDefs.forEach(s=>{let l=[];for(let h=0;h<n.length;h++)this._renderRows[h].rowDef===s&&l.push(n[h]);this._addStickyColumnStyles(l,s)}),o.forEach((s,l)=>{this._addStickyColumnStyles([s],this._footerRowDefs[l])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_outletAssigned(){!this._hasAllOutlets&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasAllOutlets=!0,this._canRender()&&this._render())}_canRender(){return this._hasAllOutlets&&this._hasInitialized}_render(){this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&this._rowDefs.length;let n=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||n,this._forceRecalculateCellWidths=n,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){let e=[],n=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let o=0;o<this._data.length;o++){let s=this._data[o],l=this._getRenderRowsForData(s,o,n.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let h=0;h<l.length;h++){let p=l[h],m=this._cachedRenderRowsMap.get(p.data);m.has(p.rowDef)?m.get(p.rowDef).push(p):m.set(p.rowDef,[p]),e.push(p)}}return e}_getRenderRowsForData(e,n,o){return this._getRowDefs(e,n).map(l=>{let h=o&&o.has(l)?o.get(l):[];if(h.length){let p=h.shift();return p.dataIndex=n,p}else return{data:e,rowDef:l,dataIndex:n}})}_cacheColumnDefs(){this._columnDefsByName.clear(),nj(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(n=>{this._columnDefsByName.has(n.name),this._columnDefsByName.set(n.name,n)})}_cacheRowDefs(){this._headerRowDefs=nj(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=nj(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=nj(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);let e=this._rowDefs.filter(n=>!n.when);!this.multiTemplateDataRows&&e.length>1,this._defaultRowDef=e[0]}_renderUpdatedColumns(){let e=(l,h)=>{let p=!!h.getColumnsDiff();return l||p},n=this._rowDefs.reduce(e,!1);n&&this._forceRenderDataRows();let o=this._headerRowDefs.reduce(e,!1);o&&this._forceRenderHeaderRows();let s=this._footerRowDefs.reduce(e,!1);return s&&this._forceRenderFooterRows(),n||o||s}_switchDataSource(e){this._data=[],NB(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;NB(this.dataSource)?e=this.dataSource.connect(this):$c(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=Vt(this.dataSource)),this._renderChangeSubscription=e.pipe(rn(this._onDestroy)).subscribe(n=>{this._data=n||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,n)=>this._renderRow(this._headerRowOutlet,e,n)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,n)=>this._renderRow(this._footerRowOutlet,e,n)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,n){let o=Array.from(n.columns||[]).map(h=>{let p=this._columnDefsByName.get(h);return p}),s=o.map(h=>h.sticky),l=o.map(h=>h.stickyEnd);this._stickyStyler.updateStickyColumns(e,s,l,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){let n=[];for(let o=0;o<e.viewContainer.length;o++){let s=e.viewContainer.get(o);n.push(s.rootNodes[0])}return n}_getRowDefs(e,n){if(this._rowDefs.length==1)return[this._rowDefs[0]];let o=[];if(this.multiTemplateDataRows)o=this._rowDefs.filter(s=>!s.when||s.when(n,e));else{let s=this._rowDefs.find(l=>l.when&&l.when(n,e))||this._defaultRowDef;s&&o.push(s)}return o.length,o}_getEmbeddedViewArgs(e,n){let o=e.rowDef,s={$implicit:e.data};return{templateRef:o.template,context:s,index:n}}_renderRow(e,n,o,s={}){let l=e.viewContainer.createEmbeddedView(n.template,s,o);return this._renderCellTemplateForItem(n,s),l}_renderCellTemplateForItem(e,n){for(let o of this._getCellTemplates(e))vS.mostRecentCellOutlet&&vS.mostRecentCellOutlet._viewContainer.createEmbeddedView(o,n);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){let e=this._rowOutlet.viewContainer;for(let n=0,o=e.length;n<o;n++){let l=e.get(n).context;l.count=o,l.first=n===0,l.last=n===o-1,l.even=n%2===0,l.odd=!l.even,this.multiTemplateDataRows?(l.dataIndex=this._renderRows[n].dataIndex,l.renderIndex=n):l.index=this._renderRows[n].dataIndex}}_getCellTemplates(e){return!e||!e.columns?[]:Array.from(e.columns,n=>{let o=this._columnDefsByName.get(n);return e.extractCellTemplate(o)})}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){let e=(n,o)=>n||o.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){let e=this._dir?this._dir.value:"ltr";this._stickyStyler=new RY(this._isNativeHtmlTable,this.stickyCssClass,e,this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:Vt()).pipe(rn(this._onDestroy)).subscribe(n=>{this._stickyStyler.direction=n,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(n=>!n._table||n._table===this)}_updateNoDataRow(){let e=this._customNoDataRow||this._noDataRow;if(!e)return;let n=this._rowOutlet.viewContainer.length===0;if(n===this._isShowingNoDataRow)return;let o=this._noDataRowOutlet.viewContainer;if(n){let s=o.createEmbeddedView(e.templateRef),l=s.rootNodes[0];s.rootNodes.length===1&&l?.nodeType===this._document.ELEMENT_NODE&&(l.setAttribute("role","row"),l.classList.add(e._contentClassName))}else o.clear();this._isShowingNoDataRow=n,this._changeDetectorRef.markForCheck()}static{this.\u0275fac=function(n){return new(n||r)(ie(J0),ie(Ti),ie(Ht),oc("role"),ie(To,8),ie(Ui),ie(Hn),ie(oP),ie(sj),ie(gu),ie(aj,12),ie(ci,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(n,o,s){if(n&1&&(Sn(s,Rge,5),Sn(s,IE,5),Sn(s,dj,5),Sn(s,bP,5),Sn(s,NY,5)),n&2){let l;Yt(l=Kt())&&(o._noDataRow=l.first),Yt(l=Kt())&&(o._contentColumnDefs=l),Yt(l=Kt())&&(o._contentRowDefs=l),Yt(l=Kt())&&(o._contentHeaderRowDefs=l),Yt(l=Kt())&&(o._contentFooterRowDefs=l)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(n,o){n&2&&oi("cdk-table-fixed-layout",o.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[2,"multiTemplateDataRows","multiTemplateDataRows",Xt],fixedLayout:[2,"fixedLayout","fixedLayout",Xt]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],standalone:!0,features:[Bi([{provide:Vg,useExisting:r},{provide:oP,useClass:mE},{provide:sj,useClass:FY},{provide:aj,useValue:null}]),an,yt],ngContentSelectors:BUe,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(n,o){n&1&&(Qi(NUe),pi(0),pi(1,1),We(2,jUe,1,0)(3,VUe,7,0)(4,$Ue,4,0)),n&2&&(q(2),vn(o._isServer?2:-1),q(),vn(o._isNativeHtmlTable?3:4))},dependencies:[$Y,VY,zY,UY],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2})}}return r})();function nj(r,i){return r.concat(Array.from(i))}function Dge(r,i){let e=i.toUpperCase(),n=r.viewContainer.element.nativeElement;for(;n;){let o=n.nodeType===1?n.nodeName:null;if(o===e)return n;if(o==="TABLE")break;n=n.parentNode}return null}var Fge=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[sP]})}}return r})();var zUe=[[["caption"]],[["colgroup"],["col"]],"*"],GUe=["caption","colgroup, col","*"];function HUe(r,i){r&1&&pi(0,2)}function WUe(r,i){r&1&&(ne(0,"thead",0),_a(1,1),ce(),ne(2,"tbody",2),_a(3,3)(4,4),ce(),ne(5,"tfoot",0),_a(6,5),ce())}function qUe(r,i){r&1&&_a(0,1)(1,3)(2,4)(3,5)}var Lge=(()=>{class r extends GY{constructor(){super(...arguments),this.stickyCssClass="mat-mdc-table-sticky",this.needsPositionStickyOnElement=!1}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275cmp=gt({type:r,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(n,o){n&2&&oi("mdc-table-fixed-layout",o.fixedLayout)},exportAs:["matTable"],standalone:!0,features:[Bi([{provide:GY,useExisting:r},{provide:Vg,useExisting:r},{provide:sj,useClass:FY},{provide:oP,useClass:mE},{provide:aj,useValue:null}]),fn,yt],ngContentSelectors:GUe,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["role","rowgroup",1,"mdc-data-table__content"],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(n,o){n&1&&(Qi(zUe),pi(0),pi(1,1),We(2,HUe,1,0)(3,WUe,7,0)(4,qUe,4,0)),n&2&&(q(2),vn(o._isServer?2:-1),q(),vn(o._isNativeHtmlTable?3:4))},dependencies:[$Y,VY,zY,UY],styles:[".mat-mdc-table-sticky{position:sticky !important}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table{min-width:100%;border:0;border-spacing:0;table-layout:auto;white-space:normal;background-color:var(--mat-table-background-color, var(--mat-app-surface))}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell{text-align:right}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px}.mat-mdc-header-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-header-container-height, 56px);color:var(--mat-table-header-headline-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-table-header-headline-font, var(--mat-app-title-small-font, Roboto, sans-serif));line-height:var(--mat-table-header-headline-line-height, var(--mat-app-title-small-line-height));font-size:var(--mat-table-header-headline-size, var(--mat-app-title-small-size, 14px));font-weight:var(--mat-table-header-headline-weight, var(--mat-app-title-small-weight, 500))}.mat-mdc-row{height:var(--mat-table-row-item-container-height, 52px);color:var(--mat-table-row-item-label-text-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)))}.mat-mdc-row,.mdc-data-table__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-table-row-item-label-text-font, var(--mat-app-body-medium-font, Roboto, sans-serif));line-height:var(--mat-table-row-item-label-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-table-row-item-label-text-size, var(--mat-app-body-medium-size, 14px));font-weight:var(--mat-table-row-item-label-text-weight, var(--mat-app-body-medium-weight))}.mat-mdc-footer-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-footer-container-height, 52px);color:var(--mat-table-row-item-label-text-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-table-footer-supporting-text-font, var(--mat-app-body-medium-font, Roboto, sans-serif));line-height:var(--mat-table-footer-supporting-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-table-footer-supporting-text-size, var(--mat-app-body-medium-size, 14px));font-weight:var(--mat-table-footer-supporting-text-weight, var(--mat-app-body-medium-weight));letter-spacing:var(--mat-table-footer-supporting-text-tracking, var(--mat-app-body-medium-tracking))}.mat-mdc-header-cell{border-bottom-color:var(--mat-table-row-item-outline-color, var(--mat-app-outline, rgba(0, 0, 0, 0.12)));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-header-headline-tracking, var(--mat-app-title-small-tracking));font-weight:inherit;line-height:inherit;box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mat-mdc-header-cell{text-align:right}.mat-mdc-cell{border-bottom-color:var(--mat-table-row-item-outline-color, var(--mat-app-outline, rgba(0, 0, 0, 0.12)));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-row-item-label-text-tracking, var(--mat-app-body-medium-tracking));line-height:inherit}.mdc-data-table__row:last-child .mat-mdc-cell{border-bottom:none}.mat-mdc-footer-cell{letter-spacing:var(--mat-table-row-item-label-text-tracking, var(--mat-app-body-medium-tracking))}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2})}}return r})(),Nge=(()=>{class r extends lj{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275dir=Pt({type:r,selectors:[["","matCellDef",""]],standalone:!0,features:[Bi([{provide:lj,useExisting:r}]),fn]})}}return r})(),Bge=(()=>{class r extends cj{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275dir=Pt({type:r,selectors:[["","matHeaderCellDef",""]],standalone:!0,features:[Bi([{provide:cj,useExisting:r}]),fn]})}}return r})();var jge=(()=>{class r extends IE{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275dir=Pt({type:r,selectors:[["","matColumnDef",""]],inputs:{name:[0,"matColumnDef","name"]},standalone:!0,features:[Bi([{provide:IE,useExisting:r},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:r}]),fn]})}}return r})(),Vge=(()=>{class r extends Oge{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275dir=Pt({type:r,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],standalone:!0,features:[fn]})}}return r})();var $ge=(()=>{class r extends Pge{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275dir=Pt({type:r,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],standalone:!0,features:[fn]})}}return r})();var Uge=(()=>{class r extends bP{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275dir=Pt({type:r,selectors:[["","matHeaderRowDef",""]],inputs:{columns:[0,"matHeaderRowDef","columns"],sticky:[2,"matHeaderRowDefSticky","sticky",Xt]},standalone:!0,features:[Bi([{provide:bP,useExisting:r}]),an,fn]})}}return r})();var zge=(()=>{class r extends dj{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275dir=Pt({type:r,selectors:[["","matRowDef",""]],inputs:{columns:[0,"matRowDefColumns","columns"],when:[0,"matRowDefWhen","when"]},standalone:!0,features:[Bi([{provide:dj,useExisting:r}]),fn]})}}return r})(),Gge=(()=>{class r extends BY{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275cmp=gt({type:r,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],standalone:!0,features:[Bi([{provide:BY,useExisting:r}]),fn,yt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,o){n&1&&_a(0,0)},dependencies:[vS],encapsulation:2})}}return r})();var Hge=(()=>{class r extends jY{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275cmp=gt({type:r,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],standalone:!0,features:[Bi([{provide:jY,useExisting:r}]),fn,yt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,o){n&1&&_a(0,0)},dependencies:[vS],encapsulation:2})}}return r})();var Wge=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[on,Fge,on]})}}return r})(),YUe=9007199254740991,uj=class extends LB{get data(){return this._data.value}set data(i){i=Array.isArray(i)?i:[],this._data.next(i),this._renderChangesSubscription||this._filterData(i)}get filter(){return this._filter.value}set filter(i){this._filter.next(i),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(i){this._sort=i,this._updateChangeSubscription()}get paginator(){return this._paginator}set paginator(i){this._paginator=i,this._updateChangeSubscription()}constructor(i=[]){super(),this._renderData=new mt([]),this._filter=new mt(""),this._internalPageChanges=new Dt,this._renderChangesSubscription=null,this.sortingDataAccessor=(e,n)=>{let o=e[n];if(W9(o)){let s=Number(o);return s<YUe?s:o}return o},this.sortData=(e,n)=>{let o=n.active,s=n.direction;return!o||s==""?e:e.sort((l,h)=>{let p=this.sortingDataAccessor(l,o),m=this.sortingDataAccessor(h,o),f=typeof p,g=typeof m;f!==g&&(f==="number"&&(p+=""),g==="number"&&(m+=""));let y=0;return p!=null&&m!=null?p>m?y=1:p<m&&(y=-1):p!=null?y=1:m!=null&&(y=-1),y*(s=="asc"?1:-1)})},this.filterPredicate=(e,n)=>{let o=Object.keys(e).reduce((l,h)=>l+e[h]+"\u25EC","").toLowerCase(),s=n.trim().toLowerCase();return o.indexOf(s)!=-1},this._data=new mt(i),this._updateChangeSubscription()}_updateChangeSubscription(){let i=this._sort?vr(this._sort.sortChange,this._sort.initialized):Vt(null),e=this._paginator?vr(this._paginator.page,this._internalPageChanges,this._paginator.initialized):Vt(null),n=this._data,o=ts([n,this._filter]).pipe($t(([h])=>this._filterData(h))),s=ts([o,i]).pipe($t(([h])=>this._orderData(h))),l=ts([s,e]).pipe($t(([h])=>this._pageData(h)));this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=l.subscribe(h=>this._renderData.next(h))}_filterData(i){return this.filteredData=this.filter==null||this.filter===""?i:i.filter(e=>this.filterPredicate(e,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(i){return this.sort?this.sortData(i.slice(),this.sort):i}_pageData(i){if(!this.paginator)return i;let e=this.paginator.pageIndex*this.paginator.pageSize;return i.slice(e,e+this.paginator.pageSize)}_updatePaginator(i){Promise.resolve().then(()=>{let e=this.paginator;if(e&&(e.length=i,e.pageIndex>0)){let n=Math.ceil(e.length/e.pageSize)-1||0,o=Math.min(e.pageIndex,n);o!==e.pageIndex&&(e.pageIndex=o,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=null}};var wP=(()=>{class r{_sanitizer;constructor(e){this._sanitizer=e}transform(e){return this._sanitizer.bypassSecurityTrustHtml(e)}static \u0275fac=function(n){return new(n||r)(ie(xg,16))};static \u0275pipe=fg({name:"sanitizeHtml",type:r,pure:!0,standalone:!0})}return r})(),HY=(()=>{class r{get html(){return this._html}set html(e){this._html=e}_html="";static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-custom-html"]],inputs:{html:"html"},standalone:!0,features:[yt],decls:2,vars:3,consts:[[1,"custom-html",3,"innerHTML"]],template:function(n,o){n&1&&(wt(0,"div",0),Ne(1,"sanitizeHtml")),n&2&&ee("innerHTML",je(1,1,o.html),Xu)},dependencies:[wP],styles:["[_nghost-%COMP%]   .custom-html[_ngcontent-%COMP%]{padding:20px}"]})}return r})();var CP=(()=>{class r{el;errorImageUrl="./assets/igo2/common/images/na.png";hideError=!1;constructor(e){this.el=e}onError(e){this.hideError?this.el.nativeElement.style.display="none":e.target.src=this.errorImageUrl}static \u0275fac=function(n){return new(n||r)(ie(Ht))};static \u0275dir=Pt({type:r,selectors:[["","igoImageError",""]],hostBindings:function(n,o){n&1&&Oe("error",function(l){return o.onError(l)})},inputs:{errorImageUrl:"errorImageUrl",hideError:"hideError"},standalone:!0})}return r})(),TE=(()=>{class r{http;configService;constructor(e,n){this.http=e,this.configService=n}transform(e){let n=new Wd({"Content-Type":"text/plain",activityInterceptor:"false",interceptError:"false"}),o=new RegExp(this.configService?.getConfig("depot.url")+'.*?(?="|$)');return o.test(e)&&(e=e.match(o)[0]),this.http.get(e,{headers:n,responseType:"blob"}).pipe(Fn(s=>{throw s.error.caught=!0,s.error.toDisplay=!1,s}),jr(s=>new si(l=>{let h=new FileReader;h.readAsDataURL(s),h.onloadend=()=>{l.next(h.result),l.complete()}})))}static \u0275fac=function(n){return new(n||r)(ie(dr,16),ie(Ri,16))};static \u0275pipe=fg({name:"secureImage",type:r,pure:!0,standalone:!0})}return po([Cp({maxCacheCount:20}),xo("design:type",Function),xo("design:paramtypes",[String]),xo("design:returntype",si)],r.prototype,"transform",null),r})();var mj=ld(bE(),1);var bu=function(r){return r.Mobile="mobile",r.Tablet="tablet",r.Desktop="desktop",r}(bu||{}),x_=function(r){return r.Portrait="portrait",r.Landscape="landscape",r}(x_||{}),Ol=(()=>{class r{media$=new mt(void 0);orientation$=new mt(void 0);constructor(e){e.observe([$y.HandsetLandscape]).subscribe(n=>{n.matches&&(this.media$.next(bu.Mobile),this.orientation$.next(x_.Landscape))}),e.observe([$y.HandsetPortrait]).subscribe(n=>{n.matches&&(this.media$.next(bu.Mobile),this.orientation$.next(x_.Portrait))}),e.observe([$y.TabletLandscape]).subscribe(n=>{n.matches&&(this.media$.next(bu.Tablet),this.orientation$.next(x_.Landscape))}),e.observe([$y.TabletPortrait]).subscribe(n=>{n.matches&&(this.media$.next(bu.Tablet),this.orientation$.next(x_.Portrait))}),e.observe([$y.WebLandscape]).subscribe(n=>{n.matches&&(this.media$.next(bu.Desktop),this.orientation$.next(x_.Landscape))}),e.observe([$y.WebPortrait]).subscribe(n=>{n.matches&&(this.media$.next(bu.Desktop),this.orientation$.next(x_.Portrait))})}getMedia(){return this.media$.value}getOrientation(){return this.orientation$.value}isTouchScreen(){return"ontouchstart"in document.documentElement}isMobile(){return this.getMedia()==="mobile"}isDesktop(){return this.getMedia()==="desktop"}static \u0275fac=function(n){return new(n||r)(xe(iA))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var qge=r=>typeof r=="object"&&r!=null&&r.nodeType===1,Yge=(r,i)=>(!i||r!=="hidden")&&r!=="visible"&&r!=="clip",hj=(r,i)=>{if(r.clientHeight<r.scrollHeight||r.clientWidth<r.scrollWidth){let e=getComputedStyle(r,null);return Yge(e.overflowY,i)||Yge(e.overflowX,i)||(n=>{let o=(s=>{if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}})(n);return!!o&&(o.clientHeight<n.scrollHeight||o.clientWidth<n.scrollWidth)})(r)}return!1},pj=(r,i,e,n,o,s,l,h)=>s<r&&l>i||s>r&&l<i?0:s<=r&&h<=e||l>=i&&h>=e?s-r-n:l>i&&h<e||s<r&&h>e?l-i+o:0,ZUe=r=>{let i=r.parentElement;return i??(r.getRootNode().host||null)},WY=(r,i)=>{var e,n,o,s;if(typeof document>"u")return[];let{scrollMode:l,block:h,inline:p,boundary:m,skipOverflowHiddenElements:f}=i,g=typeof m=="function"?m:Le=>Le!==m;if(!qge(r))throw new TypeError("Invalid target");let y=document.scrollingElement||document.documentElement,_=[],w=r;for(;qge(w)&&g(w);){if(w=ZUe(w),w===y){_.push(w);break}w!=null&&w===document.body&&hj(w)&&!hj(document.documentElement)||w!=null&&hj(w,f)&&_.push(w)}let A=(n=(e=window.visualViewport)==null?void 0:e.width)!=null?n:innerWidth,k=(s=(o=window.visualViewport)==null?void 0:o.height)!=null?s:innerHeight,{scrollX:R,scrollY:$}=window,{height:H,width:oe,top:se,right:ge,bottom:ue,left:pe}=r.getBoundingClientRect(),{top:Ce,right:_e,bottom:de,left:te}=(Le=>{let Me=window.getComputedStyle(Le);return{top:parseFloat(Me.scrollMarginTop)||0,right:parseFloat(Me.scrollMarginRight)||0,bottom:parseFloat(Me.scrollMarginBottom)||0,left:parseFloat(Me.scrollMarginLeft)||0}})(r),Se=h==="start"||h==="nearest"?se-Ce:h==="end"?ue+de:se+H/2-Ce+de,Te=p==="center"?pe+oe/2-te+_e:p==="end"?ge+_e:pe-te,De=[];for(let Le=0;Le<_.length;Le++){let Me=_[Le],{height:ze,width:Ve,top:$e,right:nt,bottom:be,left:we}=Me.getBoundingClientRect();if(l==="if-needed"&&se>=0&&pe>=0&&ue<=k&&ge<=A&&(Me===y&&!hj(Me)||se>=$e&&ue<=be&&pe>=we&&ge<=nt))return De;let ke=getComputedStyle(Me),et=parseInt(ke.borderLeftWidth,10),Qe=parseInt(ke.borderTopWidth,10),at=parseInt(ke.borderRightWidth,10),_t=parseInt(ke.borderBottomWidth,10),ht=0,Zt=0,Tt="offsetWidth"in Me?Me.offsetWidth-Me.clientWidth-et-at:0,me="offsetHeight"in Me?Me.offsetHeight-Me.clientHeight-Qe-_t:0,Ct="offsetWidth"in Me?Me.offsetWidth===0?0:Ve/Me.offsetWidth:0,pt="offsetHeight"in Me?Me.offsetHeight===0?0:ze/Me.offsetHeight:0;if(y===Me)ht=h==="start"?Se:h==="end"?Se-k:h==="nearest"?pj($,$+k,k,Qe,_t,$+Se,$+Se+H,H):Se-k/2,Zt=p==="start"?Te:p==="center"?Te-A/2:p==="end"?Te-A:pj(R,R+A,A,et,at,R+Te,R+Te+oe,oe),ht=Math.max(0,ht+$),Zt=Math.max(0,Zt+R);else{ht=h==="start"?Se-$e-Qe:h==="end"?Se-be+_t+me:h==="nearest"?pj($e,be,ze,Qe,_t+me,Se,Se+H,H):Se-($e+ze/2)+me/2,Zt=p==="start"?Te-we-et:p==="center"?Te-(we+Ve/2)+Tt/2:p==="end"?Te-nt+at+Tt:pj(we,nt,Ve,et,at+Tt,Te,Te+oe,oe);let{scrollLeft:Pe,scrollTop:ye}=Me;ht=pt===0?0:Math.max(0,Math.min(ye+ht/pt,Me.scrollHeight-ze/pt+me)),Zt=Ct===0?0:Math.max(0,Math.min(Pe+Zt/Ct,Me.scrollWidth-Ve/Ct+Tt)),Se+=ye-ht,Te+=Pe-Zt}De.push({el:Me,top:ht,left:Zt})}return De};var QUe=r=>r===!1?{block:"end",inline:"nearest"}:(i=>i===Object(i)&&Object.keys(i).length!==0)(r)?r:{block:"start",inline:"nearest"};function Kge(r,i){if(!r.isConnected||!(o=>{let s=o;for(;s&&s.parentNode;){if(s.parentNode===document)return!0;s=s.parentNode instanceof ShadowRoot?s.parentNode.host:s.parentNode}return!1})(r))return;let e=(o=>{let s=window.getComputedStyle(o);return{top:parseFloat(s.scrollMarginTop)||0,right:parseFloat(s.scrollMarginRight)||0,bottom:parseFloat(s.scrollMarginBottom)||0,left:parseFloat(s.scrollMarginLeft)||0}})(r);if((o=>typeof o=="object"&&typeof o.behavior=="function")(i))return i.behavior(WY(r,i));let n=typeof i=="boolean"||i==null?void 0:i.behavior;for(let{el:o,top:s,left:l}of WY(r,QUe(i))){let h=s-e.top+e.bottom,p=l-e.left+e.right;o.scroll({top:h,left:p,behavior:n})}}function XUe(r,i){if(r&1&&(ne(0,"mat-option",4),Ye(1),ce()),r&2){let e=ae();ee("value",e.emptyValue),q(),Si(e.emptyText)}}function JUe(r,i){if(r&1&&(ne(0,"mat-option",4),Ye(1),Ne(2,"async"),ce()),r&2){let e=ae();ee("value",e.multiSelectValue),q(),Si(je(2,2,e.multiText$))}}function eze(r,i){if(r&1&&(ne(0,"mat-option",4),Ye(1),ce()),r&2){let e=i.$implicit,n=ae();ee("value",e.entity),q(),Qt(" ",n.titleAccessor(e.entity)," ")}}var tze=r=>({height:r});function ize(r,i){if(r&1){let e=dt();zn(0),ne(1,"mat-checkbox",18),Oe("change",function(o){Re(e);let s=ae(3);return Fe(s.onToggleRows(o.checked))}),ce(),Gn()}if(r&2){let e=i.ngIf,n=ae(3);q(),ee("checked",e===n.entityTableSelectionState.All)("indeterminate",e===n.entityTableSelectionState.Some)}}function nze(r,i){if(r&1&&(zn(0),We(1,ize,2,2,"ng-container",17),Ne(2,"async"),Gn()),r&2){let e=ae(2);q(),ee("ngIf",je(2,1,e.selectionState$))}}function rze(r,i){if(r&1&&(ne(0,"th",16),We(1,nze,3,3,"ng-container",17),ce()),r&2){let e=ae();q(),ee("ngIf",e.selectMany)}}function oze(r,i){if(r&1){let e=dt();ne(0,"td",19)(1,"mat-checkbox",20),Oe("mousedown",function(o){return Re(e),Fe(o.shiftKey?o.preventDefault():null)})("click",function(o){let s=Re(e).$implicit,l=ae();return Fe(o.shiftKey?l.onShiftToggleRow(!l.rowIsSelected(s.record),s.record,o):o.stopPropagation())})("change",function(o){let s=Re(e).$implicit,l=ae();return Fe(l.onToggleRow(o.checked,s.record))}),ce()()}if(r&2){let e=i.$implicit,n=ae();q(),ee("checked",n.rowIsSelected(e.record))}}function sze(r,i){if(r&1&&(ne(0,"th",23),Ye(1),ce()),r&2){let e=ae(2).$implicit;ee("matTooltip",e.tooltip?e.tooltip:void 0),q(),Qt(" ",e.title," ")}}function aze(r,i){r&1&&(zn(0),We(1,sze,2,2,"th",22),Gn())}function lze(r,i){if(r&1&&(ne(0,"th",25),Ye(1),ce()),r&2){let e=ae(2).$implicit;ee("matTooltip",e.tooltip?e.tooltip:void 0),q(),Qt(" ",e.title," ")}}function cze(r,i){r&1&&(zn(0),We(1,lze,2,2,"th",24),Gn())}function dze(r,i){if(r&1&&(ne(0,"td",28),Ye(1),ce()),r&2){let e=ae().$implicit,n=ae(3).$implicit;ee("ngClass",e.cellData[n.name].class),q(),Qt(" ",e.cellData[n.name].value," ")}}function uze(r,i){if(r&1&&(wt(0,"img",31),Ne(1,"secureImage"),Ne(2,"async")),r&2){let e=ae(2).$implicit,n=ae(3).$implicit;Wr("src",je(2,3,je(1,1,e.cellData[n.name].value)),pl)}}function hze(r,i){r&1&&(ne(0,"span"),Ye(1),Ne(2,"translate"),ce()),r&2&&(q(),Qt("",je(2,1,"igo.common.entity-table.targetHtmlUrl")," "))}function pze(r,i){if(r&1){let e=dt();ne(0,"td",28)(1,"a",29),Oe("click",function(o){return Re(e),Fe(o.stopPropagation())}),We(2,uze,3,5,"img",30)(3,hze,3,3,"ng-template",null,1,Vo),ce()()}if(r&2){let e=ji(4),n=ae().$implicit,o=ae(3).$implicit;ee("ngClass",n.cellData[o.name].class),q(),Wr("href",n.cellData[o.name].value,pl),q(),ee("ngIf",n.cellData[o.name].isImg)("ngIfElse",e)}}function mze(r,i){if(r&1&&(zn(0),We(1,dze,2,2,"td",27)(2,pze,5,4,"ng-template",null,0,Vo),Gn()),r&2){let e=i.$implicit,n=ji(3),o=ae(3).$implicit;q(),ee("ngIf",!e.cellData[o.name].isUrl)("ngIfElse",n)}}function fze(r,i){r&1&&(zn(0),We(1,mze,4,2,"ng-container",26),Gn())}function gze(r,i){if(r&1&&wt(0,"td",33),r&2){let e=ae().$implicit,n=ae(3).$implicit;ee("ngClass",e.cellData[n.name].class)("innerHTML",e.cellData[n.name].value,Xu)}}function _ze(r,i){if(r&1&&(wt(0,"img",31),Ne(1,"secureImage"),Ne(2,"async")),r&2){let e=ae(2).$implicit,n=ae(3).$implicit;Wr("src",je(2,3,je(1,1,e.cellData[n.name].value)),pl)}}function yze(r,i){r&1&&(ne(0,"span"),Ye(1),Ne(2,"translate"),ce()),r&2&&(q(),Qt("",je(2,1,"igo.geo.targetHtmlUrl")," "))}function vze(r,i){if(r&1){let e=dt();ne(0,"td",28)(1,"a",29),Oe("click",function(o){return Re(e),Fe(o.stopPropagation())}),We(2,_ze,3,5,"img",30)(3,yze,3,3,"ng-template",null,1,Vo),ce()()}if(r&2){let e=ji(4),n=ae().$implicit,o=ae(3).$implicit;ee("ngClass",n.cellData[o.name].class),q(),Wr("href",n.cellData[o.name].value,pl),q(),ee("ngIf",n.cellData[o.name].isImg)("ngIfElse",e)}}function bze(r,i){if(r&1&&(zn(0),We(1,gze,1,2,"td",32)(2,vze,5,4,"ng-template",null,2,Vo),Gn()),r&2){let e=i.$implicit,n=ji(3),o=ae(3).$implicit;q(),ee("ngIf",!e.cellData[o.name].isUrl)("ngIfElse",n)}}function wze(r,i){r&1&&(zn(0),We(1,bze,4,2,"ng-container",26),Gn())}function Cze(r,i){if(r&1){let e=dt();ne(0,"div",45),wt(1,"mat-datepicker-toggle",46),ne(2,"input",47),Oe("dateChange",function(o){Re(e);let s=ae(2).$implicit,l=ae(3).$implicit,h=ae();return Fe(h.onDateChange(l.name,s.record,o))}),ce(),wt(3,"mat-datepicker",null,5),ce()}if(r&2){let e=ji(4),n=ae(2).$implicit,o=ae(3).$implicit;q(),ee("for",e),q(),Wr("value",n.cellData[o.name].value),ee("matDatepicker",e)("formControlName",o.name)}}function xze(r,i){if(r&1){let e=dt();ne(0,"input",48),Oe("focus",function(o){Re(e);let s=ae(5).$implicit;return Fe(s.onFocus(o))})("keypress",function(o){Re(e);let s=ae(5).$implicit;return Fe(s.onChange(o))})("blur",function(o){Re(e);let s=ae(5).$implicit;return Fe(s.onBlur(o))}),ce()}if(r&2){let e=ae(5).$implicit;ee("formControlName",e.name)}}function Sze(r,i){if(r&1){let e=dt();ne(0,"input",49),Oe("input",function(o){Re(e);let s=ae(2).$implicit,l=ae(3).$implicit,h=ae();return Fe(h.onValueChange(l.name,s.record,o))}),ce()}if(r&2){let e=ae(2).$implicit,n=ae(3).$implicit,o=ae();Wr("step",n.step),Wr("value",e.cellData[n.name].value),Wr("readonly",o.getValidationAttributeValue(n,"readonly")),Wr("required",o.getValidationAttributeValue(n,"mandatory")),Wr("min",o.getValidationAttributeValue(n,"minValue")),Wr("max",o.getValidationAttributeValue(n,"maxValue")),ee("formControlName",n.name)}}function Ize(r,i){if(r&1){let e=dt();ne(0,"input",50),Oe("input",function(o){Re(e);let s=ae(2).$implicit,l=ae(3).$implicit,h=ae();return Fe(h.onValueChange(l.name,s.record,o))}),ce()}if(r&2){let e=ae(2).$implicit,n=ae(3).$implicit,o=ae();Wr("value",e.cellData[n.name].value),Wr("readonly",o.getValidationAttributeValue(n,"readonly")),Wr("required",o.getValidationAttributeValue(n,"mandatory")),ee("formControlName",n.name)}}function Tze(r,i){if(r&1){let e=dt();ne(0,"mat-checkbox",51),Oe("change",function(o){Re(e);let s=ae(2).$implicit,l=ae(3).$implicit,h=ae();return Fe(h.onBooleanValueChange(l.name,s.record,o))}),ce()}if(r&2){let e=ae(2).$implicit,n=ae(3).$implicit;ee("formControlName",n.name)("checked",e.cellData[n.name].value)}}function Aze(r,i){if(r&1&&(ne(0,"mat-option",54),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e.id)("disabled",e.disabled),q(),Qt(" ",e.value," ")}}function Eze(r,i){if(r&1){let e=dt();ne(0,"mat-select",52),Oe("selectionChange",function(o){Re(e);let s=ae(2).$implicit,l=ae(3).$implicit,h=ae();return Fe(h.onSelectValueChange(l.name,s.record,o))}),We(1,Aze,2,3,"mat-option",53),ce()}if(r&2){let e=ae(2).$implicit,n=ae(3).$implicit,o=ae();Wr("required",o.getValidationAttributeValue(n,"mandatory")),ee("formControlName",n.name)("multiple",n.multiple)("value",e.cellData[n.name].value),q(),ee("ngForOf",n.domainValues)}}function Mze(r,i){if(r&1&&wt(0,"input",55),r&2){ae();let e=ji(9),n=ae().$implicit,o=ae(3).$implicit,s=ae();Wr("required",s.getValidationAttributeValue(o,"mandatory")),Wr("value",n.cellData[o.name].value),Wr("readonly",s.getValidationAttributeValue(o,"readonly")),ee("formControlName",o.name)("matAutocomplete",e)}}function Dze(r,i){if(r&1&&(ne(0,"mat-option",56),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e.id),q(),Qt(" ",e.value," ")}}function kze(r,i){if(r&1){let e=dt();ne(0,"td",35),We(1,Cze,5,4,"div",36)(2,xze,1,1,"input",37)(3,Sze,1,7,"input",38)(4,Ize,1,4,"input",39)(5,Tze,1,2,"mat-checkbox",40)(6,Eze,2,5,"mat-select",41)(7,Mze,1,5,"input",42),ne(8,"mat-autocomplete",43,4),Oe("optionSelected",function(o){Re(e);let s=ae().$implicit,l=ae(3).$implicit,h=ae();return Fe(h.onAutocompleteValueChange(l,s.record,o))}),We(10,Dze,2,2,"mat-option",44),Ne(11,"async"),ce()()}if(r&2){let e=ae().$implicit,n=ae(3).$implicit,o=ae();ee("formGroup",o.formGroup)("ngClass",e.cellData[n.name].class),q(),ee("ngIf",n.type==="date"),q(),ee("ngIf",n.type==="time"),q(),ee("ngIf",n.type==="number"),q(),ee("ngIf",!n.type||n.type==="string"),q(),ee("ngIf",n.type==="boolean"),q(),ee("ngIf",n.type==="list"),q(),ee("ngIf",n.type==="autocomplete"),q(3),ee("ngForOf",je(11,10,o.filteredOptions[n.name]))}}function Oze(r,i){if(r&1&&(wt(0,"td",33),Ne(1,"sanitizeHtml")),r&2){let e=ae(2).$implicit,n=ae(3).$implicit;ee("ngClass",e.cellData[n.name].class)("innerHTML",je(1,2,e.cellData[n.name].value),Xu)}}function Pze(r,i){if(r&1&&(wt(0,"img",31),Ne(1,"secureImage"),Ne(2,"async")),r&2){let e=ae(3).$implicit,n=ae(3).$implicit;Wr("src",je(2,3,je(1,1,e.cellData[n.name].value)),pl)}}function Rze(r,i){r&1&&(ne(0,"span"),Ye(1),Ne(2,"translate"),ce()),r&2&&(q(),Qt("",je(2,1,"igo.geo.targetHtmlUrl")," "))}function Fze(r,i){if(r&1){let e=dt();ne(0,"td",28)(1,"a",29),Oe("click",function(o){return Re(e),Fe(o.stopPropagation())}),We(2,Pze,3,5,"img",30)(3,Rze,3,3,"ng-template",null,1,Vo),ce()()}if(r&2){let e=ji(4),n=ae(2).$implicit,o=ae(3).$implicit;ee("ngClass",n.cellData[o.name].class),q(),Wr("href",n.cellData[o.name].value,pl),q(),ee("ngIf",n.cellData[o.name].isImg)("ngIfElse",e)}}function Lze(r,i){if(r&1&&We(0,Oze,2,4,"td",32)(1,Fze,5,4,"ng-template",null,6,Vo),r&2){let e=ji(2),n=ae().$implicit,o=ae(3).$implicit;ee("ngIf",!n.cellData[o.name].isUrl)("ngIfElse",e)}}function Nze(r,i){if(r&1&&(zn(0),We(1,kze,12,12,"td",34)(2,Lze,3,2,"ng-template",null,3,Vo),Gn()),r&2){let e=i.$implicit,n=ji(3),o=ae(4);q(),ee("ngIf",o.isEdition(e.record))("ngIfElse",n)}}function Bze(r,i){r&1&&(zn(0),We(1,Nze,4,2,"ng-container",26),Gn())}function jze(r,i){if(r&1){let e=dt();ne(0,"mat-icon",59),Oe("click",function(o){Re(e);let s=ae(4).$implicit;return Fe(s.onClick(o))}),Ye(1),ce()}if(r&2){let e=ae().$implicit,n=ae(3).$implicit;q(),Si(e.cellData[n.name].value||n.icon)}}function Vze(r,i){if(r&1&&(ne(0,"mat-icon"),Ye(1),ce()),r&2){let e=ae().$implicit,n=ae(3).$implicit;q(),Si(e.cellData[n.name].value||n.icon)}}function $ze(r,i){if(r&1&&(ne(0,"td",28),We(1,jze,2,1,"mat-icon",58)(2,Vze,2,1,"mat-icon",17),ce()),r&2){let e=i.$implicit,n=ae(3).$implicit;ee("ngClass",e.cellData[n.name].class),q(),ee("ngIf",n.onClick),q(),ee("ngIf",!n.onClick)}}function Uze(r,i){r&1&&(zn(0),We(1,$ze,3,3,"td",57),Gn())}function zze(r,i){if(r&1){let e=dt();ne(0,"button",63),Oe("mousedown",function(){Re(e);let o=ae(2).$implicit,s=ae().$implicit,l=ae(4);return Fe(l.onButtonClick(o.click,s.record))}),ne(1,"mat-icon"),Ye(2),ce()()}if(r&2){let e=ae(2).$implicit;ee("color",e.color)("disabled",e.disabled),q(2),Si(e.icon)}}function Gze(r,i){if(r&1){let e=dt();ne(0,"button",64),Oe("mousedown",function(){Re(e);let o=ae(2).$implicit,s=ae().$implicit,l=ae(4);return Fe(l.onButtonClick(o.click,s.record))}),ne(1,"mat-icon"),Ye(2),ce()()}if(r&2){let e=ae(2).$implicit;ee("color",e.color)("disabled",e.disabled),q(2),Si(e.icon)}}function Hze(r,i){if(r&1&&(zn(0),We(1,zze,3,3,"button",61)(2,Gze,3,3,"button",62),Gn()),r&2){let e=ae().$implicit;q(),ee("ngIf",e.style==="mat-icon-button"),q(),ee("ngIf",e.style!=="mat-icon-button")}}function Wze(r,i){if(r&1&&(ne(0,"span"),We(1,Hze,3,2,"ng-container",17),ce()),r&2){let e=i.$implicit,n=ae().$implicit,o=ae(4);q(),ee("ngIf",o.isEdition(n.record)===e.editMode||e.editMode===void 0)}}function qze(r,i){if(r&1&&(zn(0),ne(1,"td",28),We(2,Wze,2,1,"span",60),ce(),Gn()),r&2){let e=i.$implicit,n=ae(3).$implicit;q(),ee("ngClass",e.cellData[n.name].class),q(),ee("ngForOf",e.cellData[n.name].value)}}function Yze(r,i){r&1&&(zn(0),We(1,qze,3,2,"ng-container",26),Gn())}function Kze(r,i){if(r&1&&(zn(0),We(1,fze,2,0,"ng-container",17)(2,wze,2,0,"ng-container",17)(3,Bze,2,0,"ng-container",17)(4,Uze,2,0,"ng-container",17)(5,Yze,2,0,"ng-container",17),Gn()),r&2){let e=i.ngIf,n=ae(2);q(),ee("ngIf",e===n.entityTableColumnRenderer.Default),q(),ee("ngIf",e===n.entityTableColumnRenderer.HTML),q(),ee("ngIf",e===n.entityTableColumnRenderer.UnsanitizedHTML),q(),ee("ngIf",e===n.entityTableColumnRenderer.Icon),q(),ee("ngIf",e===n.entityTableColumnRenderer.ButtonGroup)}}function Zze(r,i){if(r&1&&(zn(0,21),We(1,aze,2,0,"ng-container",17)(2,cze,2,0,"ng-container",17)(3,Kze,6,5,"ng-container",17),Gn()),r&2){let e=i.$implicit,n=ae();ee("matColumnDef",e.name),q(),ee("ngIf",n.columnIsSortable(e)),q(),ee("ngIf",!n.columnIsSortable(e)),q(),ee("ngIf",n.getColumnRenderer(e))}}function Qze(r,i){if(r&1&&wt(0,"tr",65),r&2){let e=ae();ee("ngClass",e.getHeaderClass())}}function Xze(r,i){if(r&1){let e=dt();ne(0,"tr",66),Oe("select",function(){let o=Re(e).$implicit,s=ae();return Fe(s.onRowSelect(o.record))})("click",function(){let o=Re(e).$implicit,s=ae();return Fe(s.onRowClick(o.record))}),ce()}if(r&2){let e=i.$implicit,n=ae();ee("scrollBehavior",n.scrollBehavior)("ngClass",n.getRowClass(e.record))("selection",n.selection)("selected",n.rowIsSelected(e.record))}}function Jze(r,i){if(r&1){let e=dt();ne(0,"igo-entity-table-paginator",67),Oe("paginatorChange",function(o){Re(e);let s=ae();return Fe(s.paginatorChange(o))}),ce()}if(r&2){let e=ae();ee("store",e.store)("paginatorOptions",e.paginatorOptions)("entitySortChange$",e.entitySortChange$)}}var $g=function(r){return r.Default="Default",r.HTML="HTML",r.UnsanitizedHTML="UnsanitizedHTML",r.Editable="Editable",r.Icon="Icon",r.ButtonGroup="ButtonGroup",r}($g||{}),KY=function(r){return r.Auto="auto",r.Instant="instant",r.Smooth="smooth",r}(KY||{}),qY=function(r){return r.None="None",r.All="All",r.Some="Some",r}(qY||{});function bS(r,i){return(0,Zge.t)(r,i).safeObject}function xP(r){let i=r.meta||{};return i.id?i.id:bS(r,i.idProperty||"id")}function Im(r){let i=r.meta||{};return i.title?i.title:bS(r,i.titleProperty||"title")}function Qge(r){let i=r.meta||{};return i.titleHtml?i.titleHtml:bS(r,i.titleHtmlProperty||"titleHtml")}function SP(r){let i=r.meta||{};return i.icon?i.icon:bS(r,i.iconProperty||"icon")}function ZY(r){return(r.meta||{}).revision||0}var YY=class{options;index=new Map;change$=new Vd(1);getKey;constructor(i={}){this.options=i,this.getKey=i.getKey?i.getKey:xP,this.next()}clear(){this.index.size>0&&(this.index.clear(),this.next())}get(i){return this.index.get(this.getKey(i))||{}}set(i,e){this.setMany([i],e)}setMany(i,e){i.forEach(n=>{this.index.set(this.getKey(n),Object.assign({},e))}),this.next()}setAll(i){Array.from(this.index.keys()).forEach(e=>{this.index.set(e,Object.assign({},i))}),this.next()}update(i,e,n=!1){this.updateMany([i],e,n)}updateMany(i,e,n=!1){if(n===!0)return this.updateManyExclusive(i,e);i.forEach(o=>{let s=Object.assign({},this.get(o),e);this.index.set(this.getKey(o),s)}),this.next()}reverse(i,e){this.reverseMany([i],e)}reverseMany(i,e){i.forEach(n=>{let o=this.get(n),s=e.reduce((p,m)=>(p[m]=o[m]||!1,p),{}),l=this.reverseChanges(s),h=Object.assign({},o,l);this.index.set(this.getKey(n),h)}),this.next()}updateAll(i){let e=this.getAllKeys();Array.from(e).forEach(n=>{let o=Object.assign({},this.index.get(n),i);this.index.set(n,o)}),this.next()}updateManyExclusive(i,e){let n=this.reverseChanges(e),o=i.map(l=>this.getKey(l));new Set(o.concat(Array.from(this.getAllKeys()))).forEach(l=>{let h=this.index.get(l)||{};o.indexOf(l)>=0?this.index.set(l,Object.assign({},h,e)):Object.keys(n).some(m=>h[m]!==void 0&&h[m]!==n[m])===!0&&this.index.set(l,Object.assign({},h,n))}),this.next()}reverseChanges(i){return Object.entries(i).reduce((e,n)=>{let[o,s]=n;return typeof s=="boolean"&&(e[o]=!s),e},{})}getAllKeys(){let i=Array.from(this.options?.index?.keys()??[]);return new Set(Array.from(this.index.keys()).concat(i))}next(){this.change$.next()}},fj=class{source$;values$=new mt([]);values$$;lifted=!1;joins=[];filter$=new mt(void 0);filters$=new mt([]);filterIndex=new Map;sort$=new mt(void 0);get getKey(){return this.getKey$.value}getKey$=new mt(void 0);count$=new mt(0);get count(){return this.count$.value}empty$=new mt(!0);get empty(){return this.empty$.value}get index(){return this._index}_index;constructor(i){this.source$=i}get(i){if(this._index===void 0)throw new Error("This view has no index, therefore, this method is unavailable.");return this.index.get(i)}all(){return this.values$.value}all$(){return this.values$}firstBy(i){return this.values$.value.find(i)}firstBy$(i){return this.values$.pipe($t(e=>e.find(i)))}manyBy(i){return this.values$.value.filter(i)}manyBy$(i){return this.values$.pipe($t(e=>e.filter(i)))}clear(){this.filter(void 0),this.sort(void 0)}destroy(){this.values$$!==void 0&&this.values$$.unsubscribe(),this.clear()}createIndex(i){return this._index=new Map,this.getKey$.next(i),this}join(i){if(this.lifted===!0)throw new Error("This view has already been lifted, therefore, no join is allowed.");return this.joins.push(i),this}filter(i){return this.filter$.next(i),this}addFilter(i){let e=Gs();return this.filterIndex.set(e,i),this.filters$.next(Array.from(this.filterIndex.values())),e}removeFilter(i){this.filterIndex.delete(i),this.filters$.next(Array.from(this.filterIndex.values()))}sort(i){return this.sort$.next(i),this}lift(){this.lifted=!0;let e=[this.joins.length>0?this.liftJoinedSource():this.liftSource(),this.filters$,this.filter$,this.sort$,this.getKey$];this.values$$=ts(e).pipe(zd(1),cr(5)).subscribe(n=>{let[o,s,l,h,p]=n,m=this.processValues(o,s,l,h),f=p!==void 0;this.setValues(m,f)})}liftSource(){return this.source$}liftJoinedSource(){let i=[this.source$,ts(this.joins.map(e=>e.source))];return ts(i).pipe($t(e=>{let[n,o]=e;return n.reduce((s,l)=>{let h=this.computeJoinedValue(l,o);return h!==void 0&&s.push(h),s},[])}))}computeJoinedValue(i,e){let n=i,o=0;for(;n!==void 0&&o<this.joins.length;)n=this.joins[o].reduce(n,e[o]),o+=1;return n}processValues(i,e,n,o){return i=i.slice(0),i=this.filterValues(i,e.concat([n])),i=this.sortValues(i,o),i}filterValues(i,e){return e.length===0?i:i.filter(n=>e.filter(o=>o!==void 0).every(o=>o(n)))}sortValues(i,e){return e===void 0?i:i.sort((n,o)=>Ln.naturalCompare(e.valueAccessor(n),e.valueAccessor(o),e.direction,e.nullsFirst))}setValues(i,e){e===!0&&(this._index=this.generateIndex(i)),this.values$.next(i);let n=i.length,o=n===0;this.count$.next(n),this.empty$.next(o)}generateIndex(i){let e=i.map(n=>[this.getKey(n),n]);return new Map(e)}},wd=class{entities$=new mt([]);count$=new mt(0);get count(){return this.count$.value}empty$=new mt(!0);get empty(){return this.empty$.value}state;view;stateView;getKey;getProperty;get index(){return this._index}_index;get pristine(){return this._pristine}_pristine=!0;strategies=[];constructor(i,e={}){this.getKey=e.getKey?e.getKey:xP,this.getProperty=e.getProperty?e.getProperty:bS,this.state=this.createStateManager(),this.view=this.createDataView(),this.stateView=this.createStateView(),this.view.lift(),this.stateView.lift(),i.length>0?this.load(i):this._index=this.generateIndex(i)}get(i){return this.index.get(i)}all(){return this.entities$.value}load(i,e=!0){this._index=this.generateIndex(i),this._pristine=e,this.next()}softClear(){this.index&&this.index.size>0?(this.index.clear(),this._pristine=!0,this.next()):this.index&&this.updateCount()}clear(){this.stateView.clear(),this.view.clear(),this.state.clear(),this.softClear()}destroy(){this.stateView.destroy(),this.view.destroy(),this.clear()}insert(i){this.insertMany([i])}insertMany(i){i.forEach(e=>this.index.set(this.getKey(e),e)),this._pristine=!1,this.next()}update(i){this.updateMany([i])}updateMany(i){i.forEach(e=>this.index.set(this.getKey(e),e)),this._pristine=!1,this.next()}addStrategy(i,e=!1){if(this.strategies.find(o=>i.constructor===o.constructor)!==void 0)throw new Error("A strategy of this type already exists on that EntityStore.");return this.strategies.push(i),i.bindStore(this),e===!0&&i.activate(),this}removeStrategy(i){let e=this.strategies.indexOf(i);return e>=0&&(this.strategies.splice(e,1),i.unbindStore(this)),this}getStrategyOfType(i){return this.strategies.find(e=>e instanceof i)}activateStrategyOfType(i){let e=this.getStrategyOfType(i);e!==void 0&&e.activate()}deactivateStrategyOfType(i){let e=this.getStrategyOfType(i);e!==void 0&&e.deactivate()}delete(i){this.deleteMany([i])}deleteMany(i){i.forEach(e=>this.index.delete(this.getKey(e))),this._pristine=!1,this.next()}generateIndex(i){let e=i.map(n=>[this.getKey(n),n]);return new Map(e)}next(){this.entities$.next(Array.from(this.index.values())),this.updateCount()}updateCount(){let i=this.index.size,e=i===0;this.count$.next(i),this.empty$.next(e)}createStateManager(){return new YY({getKey:this.getKey,index:this.index})}createDataView(){return new fj(this.entities$)}createStateView(){return new fj(this.view.all$()).join({source:this.state.change$,reduce:i=>{let e=this.getKey(i),n=this.state.get(i),o=this.stateView.get(e);if(o!==void 0&&o.entity===i&&this.statesAreTheSame(o.state,n))return o;let s=o?o.revision+1:1,l=`${e}-${s}`;return{entity:i,state:n,revision:s,ref:l}}}).createIndex(i=>this.getKey(i.entity))}statesAreTheSame(i,e){if(i===e)return!0;let n=Object.keys(i).length===0,o=Object.keys(e).length===0;return n&&o}},bv=class{cdRef;store;innerStateIndex=new Map;entities$$;state$$;constructor(i,e){this.setChangeDetector(e),this.setStore(i)}destroy(){this.setChangeDetector(void 0),this.setStore(void 0)}setStore(i){if(i===void 0){this.teardownObservers(),this.innerStateIndex.clear(),this.store=void 0;return}this.setStore(void 0),this.store=i,this.setupObservers(),this.detectChanges()}setChangeDetector(i){this.cdRef=i}setupObservers(){this.teardownObservers(),this.entities$$=this.store.entities$.subscribe(()=>this.onEntitiesChange()),this.state$$=this.store.state.change$.pipe(zd(1)).subscribe(()=>this.onStateChange())}teardownObservers(){this.entities$$!==void 0&&this.entities$$.unsubscribe(),this.state$$!==void 0&&this.state$$.unsubscribe(),this.entities$$=void 0,this.state$$=void 0}onEntitiesChange(){this.detectChanges()}onStateChange(){let i=!1,e=this.store.state.index,n=this.innerStateIndex;e.size!==n.size&&(i=this.detectChanges());let o=Array.from(e.keys());for(let s of o){let l=e.get(s),h=n.get(s);i===!1&&(h===void 0?i=this.detectChanges():Ln.objectsAreEquivalent(l,h)||(i=this.detectChanges())),this.innerStateIndex.set(s,Object.assign({},l))}}detectChanges(){return this.cdRef!==void 0&&this.cdRef.detectChanges(),!0}};var vf=class{options;stores=[];get active(){return this.active$.value}active$=new mt(!1);constructor(i={}){this.options=i,this.options=i}activate(){this.active===!0&&this.doDeactivate(),this.active$.next(!0),this.doActivate()}deactivate(){this.active$.next(!1),this.doDeactivate()}bindStore(i){this.stores.indexOf(i)<0&&this.stores.push(i)}unbindStore(i){let e=this.stores.indexOf(i);e>=0&&this.stores.splice(e,1)}doActivate(){}doDeactivate(){}},bf=class extends vf{options;constructor(i){super(i),this.options=i}filters=new Map;bindStore(i){super.bindStore(i),this.active===!0&&this.filterStore(i)}unbindStore(i){super.unbindStore(i),this.active===!0&&this.unfilterStore(i)}doActivate(){this.filterAll()}doDeactivate(){this.unfilterAll()}filterAll(){this.stores.forEach(i=>this.filterStore(i))}unfilterAll(){this.stores.forEach(i=>this.unfilterStore(i))}filterStore(i){this.filters.set(i,i.stateView.addFilter(this.options.filterClauseFunc))}unfilterStore(i){let e=this.filters.get(i);e!==void 0&&(i.stateView.removeFilter(e),this.filters.delete(i))}},S_=class extends vf{filters=new Map;bindStore(i){super.bindStore(i),this.active===!0&&this.filterStore(i)}unbindStore(i){super.unbindStore(i),this.active===!0&&this.unfilterStore(i)}doActivate(){this.filterAll()}doDeactivate(){this.unfilterAll()}filterAll(){this.stores.forEach(i=>this.filterStore(i))}unfilterAll(){this.stores.forEach(i=>this.unfilterStore(i))}filterStore(i){if(this.filters.has(i))return;let e=n=>n.state.selected===!0;this.filters.set(i,i.stateView.addFilter(e))}unfilterStore(i){let e=this.filters.get(i);e!==void 0&&(i.stateView.removeFilter(e),this.filters.delete(i))}},Xge=(()=>{class r{cdRef;selected$=new mt(void 0);multiText$=new mt(void 0);multiSelectValue={id:"IGO_MULTI_SELECT"};emptyValue={id:"IGO_EMPTY_SELECT"};selected$$;watcher;store;titleAccessor=Im;emptyText=void 0;multi=!1;multiAllText="All";multiNoneText="None";placeholder;disabled=!1;selectedChange=new it;constructor(e){this.cdRef=e}ngOnInit(){this.watcher=new bv(this.store,this.cdRef),this.selected$$=this.store.stateView.manyBy$(e=>e.state.selected===!0).subscribe(e=>{let n=e.map(o=>o.entity);this.onSelectFromStore(n)})}ngOnDestroy(){this.watcher.destroy(),this.selected$$.unsubscribe()}onSelectionChange(e){let n=e.value instanceof Array?e.value:[e.value],o=n.find(h=>h===this.multiSelectValue),s=n.filter(h=>h!==this.multiSelectValue);o!==void 0&&(s.length===this.store.count?s=[]:s.length<this.store.count&&(s=this.store.all())),s=s.filter(h=>h!==this.emptyValue),s.length===0?this.store.state.updateAll({selected:!1}):this.store.state.updateMany(s,{selected:!0},!0);let l=this.multi?s:e.value;this.selectedChange.emit({selected:!0,value:l})}onSelectFromStore(e){if(this.multi===!0)this.selected$.next(e);else{let n=e.length>0?e[0]:void 0;this.selected$.next(n)}this.updateMultiToggleWithEntities(e)}updateMultiToggleWithEntities(e){e.length===this.store.count&&this.multiText$.value!==this.multiNoneText?this.multiText$.next(this.multiNoneText):e.length<this.store.count&&this.multiText$.value!==this.multiAllText&&this.multiText$.next(this.multiAllText)}static \u0275fac=function(n){return new(n||r)(ie(Ti))};static \u0275cmp=gt({type:r,selectors:[["igo-entity-selector"]],inputs:{store:"store",titleAccessor:"titleAccessor",emptyText:"emptyText",multi:"multi",multiAllText:"multiAllText",multiNoneText:"multiNoneText",placeholder:"placeholder",disabled:"disabled"},outputs:{selectedChange:"selectedChange"},standalone:!0,features:[yt],decls:7,vars:11,consts:[["subscriptSizing","dynamic",1,"igo-entity-selector"],[3,"selectionChange","disabled","value","multiple","placeholder"],[3,"value",4,"ngIf"],["ngFor","",3,"ngForOf"],[3,"value"]],template:function(n,o){n&1&&(ne(0,"mat-form-field",0)(1,"mat-select",1),Ne(2,"async"),Oe("selectionChange",function(l){return o.onSelectionChange(l)}),We(3,XUe,2,2,"mat-option",2)(4,JUe,3,4,"mat-option",2)(5,eze,2,2,"ng-template",3),Ne(6,"async"),ce()()),n&2&&(q(),ee("disabled",o.disabled)("value",je(2,7,o.selected$))("multiple",o.multi)("placeholder",o.placeholder),q(2),ee("ngIf",o.emptyText!==void 0&&o.multi===!1),q(),ee("ngIf",o.multi===!0),q(),ee("ngForOf",je(6,9,o.store.stateView.all$())))},dependencies:[Wa,dc,ah,sh,lc,gn,cc,Ps,kr],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})}return r})();var QY=(()=>{class r{languageService;mediaService;disabled=!1;hidePageSize=!1;pageIndex=0;pageSize=50;pageSizeOptions=[5,10,20,50,100,200];showFirstLastButtons=!0;count$$;entitySortChange$$;paginationLabelTranslation$$=[];entitySortChange$=new mt(!1);store;paginatorOptions;page;length=0;paginatorChange=new it;constructor(e,n){this.languageService=e,this.mediaService=n}paginator;ngOnChanges(){this.unsubscribeAll(),this.count$$=this.store.stateView.count$.subscribe(e=>{this.length=e,this.emitPaginator()}),this.entitySortChange$$=this.entitySortChange$.subscribe(()=>{this.paginator&&this.paginator.firstPage()}),this.initPaginatorOptions(),this.translateLabels()}initPaginatorOptions(){this.disabled=this.paginatorOptions?.disabled||this.disabled,this.pageIndex=this.paginatorOptions?.pageIndex||this.pageIndex,this.pageSize=this.paginatorOptions?.pageSize||this.pageSize,this.pageSizeOptions=this.paginatorOptions?.pageSizeOptions||this.pageSizeOptions,this.mediaService.isMobile()?(this.showFirstLastButtons=!1,this.hidePageSize=!0):(this.showFirstLastButtons=this.paginatorOptions?.showFirstLastButtons||this.showFirstLastButtons,this.hidePageSize=this.paginatorOptions?.hidePageSize||this.hidePageSize)}translateLabels(){this.paginationLabelTranslation$$.push(this.languageService.translate.get("igo.common.paginator.firstPageLabel").subscribe(e=>{this.paginator._intl.firstPageLabel=e})),this.paginator._intl.getRangeLabel=this.rangeLabel,this.paginationLabelTranslation$$.push(this.languageService.translate.get("igo.common.paginator.itemsPerPageLabel").subscribe(e=>{this.paginator._intl.itemsPerPageLabel=e})),this.paginationLabelTranslation$$.push(this.languageService.translate.get("igo.common.paginator.lastPageLabel").subscribe(e=>{this.paginator._intl.lastPageLabel=e})),this.paginationLabelTranslation$$.push(this.languageService.translate.get("igo.common.paginator.nextPageLabel").subscribe(e=>{this.paginator._intl.nextPageLabel=e})),this.paginationLabelTranslation$$.push(this.languageService.translate.get("igo.common.paginator.previousPageLabel").subscribe(e=>{this.paginator._intl.previousPageLabel=e}))}rangeLabel=(e,n,o)=>{let s=new mt("");if(this.paginationLabelTranslation$$.push(this.languageService.translate.get("igo.common.paginator.of").subscribe(p=>{s.next(p)})),o===0||n===0)return`0 ${s.value} ${o}`;o=Math.max(o,0);let l=e*n,h=l<o?Math.min(l+n,o):l+n;return`${l+1} - ${h} ${s.value} ${o}`};unsubscribeAll(){this.paginationLabelTranslation$$.map(e=>e.unsubscribe()),this.count$$&&this.count$$.unsubscribe(),this.entitySortChange$$&&this.entitySortChange$$.unsubscribe()}ngOnDestroy(){this.unsubscribeAll()}emitPaginator(){this.paginatorChange.emit(this.paginator)}static \u0275fac=function(n){return new(n||r)(ie(wn),ie(Ol))};static \u0275cmp=gt({type:r,selectors:[["igo-entity-table-paginator"]],viewQuery:function(n,o){if(n&1&&Ni(vP,7),n&2){let s;Yt(s=Kt())&&(o.paginator=s.first)}},inputs:{entitySortChange$:"entitySortChange$",store:"store",paginatorOptions:"paginatorOptions"},outputs:{page:"page",paginatorChange:"paginatorChange"},standalone:!0,features:[Jn,yt],decls:1,vars:7,consts:[[3,"page","disabled","hidePageSize","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"]],template:function(n,o){n&1&&(ne(0,"mat-paginator",0),Oe("page",function(){return o.emitPaginator()}),ce()),n&2&&ee("disabled",o.disabled)("hidePageSize",o.hidePageSize)("length",o.length)("pageIndex",o.pageIndex)("pageSize",o.pageSize)("pageSizeOptions",o.pageSizeOptions)("showFirstLastButtons",o.showFirstLastButtons)},dependencies:[Ige,vP],styles:["[_nghost-%COMP%]     .mat-mdc-paginator-container{min-height:unset}"],changeDetection:0})}return r})(),e7e=(()=>{class r{renderer;el;static selectedCls="igo-entity-table-row-selected";static highlightedCls="igo-entity-table-row-highlighted";selection=!1;selectOnClick=!0;highlightSelection=!0;set selected(e){this.selection!==!1&&e!==this._selected&&(this.toggleSelected(e),this.scroll())}get selected(){return this._selected}_selected=!1;scrollBehavior=KY.Auto;select=new it;onClick(){this.selection===!1||this.selectOnClick===!1||(this.toggleSelected(!0),this.select.emit(this))}constructor(e,n){this.renderer=e,this.el=n}toggleSelected(e){this._selected=e,e===!0?(this.addCls(r.selectedCls),this.highlightSelection===!0&&this.addCls(r.highlightedCls)):(this.removeCls(r.selectedCls),this.removeCls(r.highlightedCls))}scroll(){this._selected===!0&&Kge(this.el.nativeElement,{scrollMode:"if-needed",behavior:"smooth",block:"end",inline:"nearest"})}addCls(e){this.renderer.addClass(this.el.nativeElement,e)}removeCls(e){this.renderer.removeClass(this.el.nativeElement,e)}static \u0275fac=function(n){return new(n||r)(ie(lu),ie(Ht))};static \u0275dir=Pt({type:r,selectors:[["","igoEntityTableRow",""]],hostBindings:function(n,o){n&1&&Oe("click",function(){return o.onClick()})},inputs:{selection:"selection",selectOnClick:"selectOnClick",highlightSelection:"highlightSelection",selected:"selected",scrollBehavior:"scrollBehavior"},outputs:{select:"select"},standalone:!0})}return r})(),gj=(()=>{class r{cdRef;formBuilder;_focusMonitor;_elementRef;ngControl;_parentForm;_controlName;_defaultErrorStateMatcher;dateAdapter;entitySortChange$=new mt(!1);formGroup=new hhe({});filteredOptions={};entityTableColumnRenderer=$g;entityTableSelectionState=qY;selectionState$=new mt(void 0);selection$$;dataSource$$;lastRecordCheckedKey;store;set paginator(e){this._paginator=e,this.dataSource.paginator=e}get paginator(){return this._paginator}_paginator;template;scrollBehavior=KY.Auto;sortNullsFirst=!1;withPaginator=!1;paginatorOptions;entityClick=new it;entitySelectChange=new it;entitySortChange=new it(void 0);get headers(){let e=this.template.columns.filter(n=>n.visible!==!1).map(n=>n.name);return this.selectionCheckbox===!0&&(e=["selectionCheckbox"].concat(e)),e}dataSource=new uj;get selection(){return this.template.selection||!1}get selectionCheckbox(){return this.template.selectionCheckbox||!1}get selectMany(){return this.template.selectMany||!1}get fixedHeader(){return this.template.fixedHeader===void 0?!0:this.template.fixedHeader}get tableHeight(){return this.template.tableHeight?this.template.tableHeight:"auto"}constructor(e,n,o,s,l,h,p,m,f){this.cdRef=e,this.formBuilder=n,this._focusMonitor=o,this._elementRef=s,this.ngControl=l,this._parentForm=h,this._controlName=p,this._defaultErrorStateMatcher=m,this.dateAdapter=f,this.dateAdapter.setLocale("fr-CA")}ngOnInit(){this.handleDatasource(),this.dataSource.paginator=this.paginator,this.store.state.change$.pipe(cr(100)).subscribe(()=>{this.handleDatasource(),this.refresh()})}ngOnChanges(e){let n=e.store;n&&n.currentValue!==n.previousValue&&this.handleDatasource()}onValueChange(e,n,o){let s=this.getColumnKeyWithoutPropertiesTag(e);n.entity.properties[s]=o.target.value}onBooleanValueChange(e,n,o){let s=this.getColumnKeyWithoutPropertiesTag(e);n.entity.properties[s]=o.checked}onSelectValueChange(e,n,o){let s=this.getColumnKeyWithoutPropertiesTag(e);n.entity.properties[s]=o.value}onAutocompleteValueChange(e,n,o){this.formGroup.controls[e.name].setValue(o.option.viewValue);let s=this.getColumnKeyWithoutPropertiesTag(e.name);n.entity.properties[s]=o.option.value}onDateChange(e,n,o){let l=(0,mj.default)(o.value).format("YYYY-MM-DD"),h=this.getColumnKeyWithoutPropertiesTag(e);n.entity.properties[h]=l}enableEdit(e){let n=e.entity.properties||e.entity;this.template.columns.forEach(o=>{o.title=o.validation?.mandatory&&!o.title.includes("*")?o.title+" *":o.title;let s=this.getColumnKeyWithoutPropertiesTag(o.name);if(o.type==="boolean")!n[s]||n[s]===null?n[s]=!1:typeof n[s]=="string"&&(n[s]=JSON.parse(n[s].toLowerCase())),this.formGroup.setControl(o.name,this.formBuilder.control(n[s]));else if(o.type==="list")o.multiple?this.formGroup.setControl(o.name,this.formBuilder.control([n[s]])):(this.formGroup.setControl(o.name,this.formBuilder.control(n[s])),typeof n[s]=="string"?this.formGroup.controls[o.name].setValue(parseInt(n[s])):this.formGroup.controls[o.name].setValue(n[s]));else if(o.type==="autocomplete"){this.formGroup.setControl(o.name,this.formBuilder.control(n[s])),this.filteredOptions[o.name]=new si,this.filteredOptions[o.name]=this.formGroup.controls[o.name].valueChanges.pipe($t(h=>{if(h?.length)return o.domainValues?.filter(p=>{let m=h?h.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):"";return p.value.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(m)})}));let l=n[s];if(o.domainValues.forEach(h=>{typeof l=="string"&&d_.isValidNumber(l)&&!d_.isOctalNumber(l)&&(l=parseInt(l)),(h.value===l||h.id===l)&&(l=h.value)}),this.formGroup.controls[o.name].setValue(l),this.isEdition(e)&&o.linkColumnForce){let h=e.entity;this.formGroup.controls[o.name].setValue(h?.properties[this.getColumnKeyWithoutPropertiesTag(o.linkColumnForce)])}}else if(o.type==="date"){if(o.visible!==!1)if(n[s]){let l=(0,mj.default)(n[s]);n[s]=l.utc().format("YYYY-MM-DD"),this.formGroup.setControl(o.name,this.formBuilder.control(n[s]))}else{let l=this.getColumnKeyWithoutPropertiesTag(o.name);e.entity.properties[l]=null,this.formGroup.setControl(o.name,this.formBuilder.control(null))}}else this.formGroup.setControl(o.name,this.formBuilder.control(n[s]));this.formGroup.controls[o.name]&&this.getValidationAttributeValue(o,"readonly")&&this.formGroup.controls[o.name].disable()})}handleDatasource(){this.unsubscribeStore(),this.selection$$=this.store.stateView.manyBy$(e=>e.state.selected===!0).subscribe(e=>{let n=e[0],o=this.store.stateView.all().indexOf(n),s=this.paginator?this.paginator.pageSize*(this.paginator.pageIndex+1):0,l=this.paginator?s-this.paginator.pageSize:0;if(this.paginator&&(o<l||o>=s)){let h=Math.floor(o/this.paginator.pageSize);this.dataSource.paginator.pageIndex=h}this.selectionState$.next(this.computeSelectionState(e))}),this.dataSource$$=this.store.stateView.all$().subscribe(e=>{e[0]&&this.enableEdit(e[0]),this.dataSource.data=e.map(n=>({record:n,cellData:this.template.columns.reduce((o,s)=>{let l=this.getValue(n,s);return o[s.name]={class:this.getCellClass(n,s),value:l,isUrl:this.isUrl(l),isImg:this.isImg(l)},o},{})}))})}ngOnDestroy(){this.unsubscribeStore()}unsubscribeStore(){this.selection$$&&this.selection$$.unsubscribe(),this.dataSource$$&&this.dataSource$$.unsubscribe()}getTrackByFunction(){return(e,n)=>n.record.ref}refresh(){this.cdRef.detectChanges()}paginatorChange(e){this.paginator=e}onSort(e){let n=e.direction,o=this.template.columns.find(s=>s.name===e.active);n==="asc"||n==="desc"?(this.store.stateView.sort({valueAccessor:s=>this.getValue(s,o),direction:n,nullsFirst:this.sortNullsFirst}),this.entitySortChange.emit({column:o,direction:n}),this.entitySortChange$.next(!0)):this.store.stateView.sort(void 0)}onRowClick(e){this.lastRecordCheckedKey=this.store.stateView.getKey(e),this.entityClick.emit(e.entity)}onRowSelect(e){if(this.selection===!1)return;let n=e.entity;this.store.state.update(n,{selected:!0},!0),this.entitySelectChange.emit({added:[n]})}onToggleRows(e){if(this.selection===!1)return;let n=this.store.view.all();this.entitySelectChange.emit({added:[n]}),this.store.state.updateMany(n,{selected:e})}onToggleRow(e,n){if(this.selection===!1)return;let o=n.entity,s=e===!0&&!this.selectMany;this.store.state.update(o,{selected:e},s),e===!0&&this.entitySelectChange.emit({added:[o]}),this.lastRecordCheckedKey=this.store.stateView.getKey(n)}onShiftToggleRow(e,n,o){if(this.selection===!1)return;if(this.selectMany===!1||this.lastRecordCheckedKey===void 0){this.onToggleRow(e,n);return}let s=window.document.createRange();s.selectNode(o.target),window.getSelection().removeAllRanges(),window.getSelection().addRange(s),o.stopImmediatePropagation();let l=this.store.stateView.all(),h=l.indexOf(n),p=this.store.stateView.get(this.lastRecordCheckedKey),m=l.indexOf(p),f=[h,m],y=l.slice(Math.min(...f),Math.max(...f)+1).map(_=>_.entity);this.store.state.updateMany(y,{selected:e}),e===!0&&this.entitySelectChange.emit({added:y}),this.lastRecordCheckedKey=this.store.stateView.getKey(n)}computeSelectionState(e){let n=qY,o=e.length;return o===0?n.None:o===this.store.stateView.count?n.All:n.Some}columnIsSortable(e){let n=e.sort;return n===void 0&&(n=this.template.sort===void 0?!1:this.template.sort),n}rowIsSelected(e){let n=e.state;return n.selected?n.selected:!1}isImg(e){return this.isUrl(e)?["jpg","png","gif"].indexOf(e.split(".").pop().toLowerCase())!==-1:!1}isUrl(e){return typeof e=="string"?e.slice(0,8)==="https://"||e.slice(0,7)==="http://":!1}getValue(e,n){let o=e.entity,s;if(n.valueAccessor!==void 0)return n.valueAccessor(o,e);if(this.template.valueAccessor!==void 0)return this.template.valueAccessor(o,n.name,e);if(s=this.store.getProperty(o,n.name),n.type==="boolean")s==null||s===""?s=!1:typeof s!="boolean"&&s!==void 0&&(typeof s=="number"?s=!!s:s=JSON.parse(s.toLowerCase())),this.isEdition(e)||(s=s?"&#10003;":"");else if(n.type==="list"&&s&&n.domainValues){let l=e.entity;if(n.multiple){let h;typeof s=="string"?h=s.match(/[\w.-]+/g).map(Number):h=s;let p=[];n.domainValues.forEach(m=>{h.includes(m.id)&&(e.edition?p.push(m.id):p.push(m.value))}),this.isEdition(e)?s=h:s=p}else!this.isEdition(e)&&n.linkColumnForce?s=l?.properties[this.getColumnKeyWithoutPropertiesTag(n.linkColumnForce)]:n.domainValues.forEach(h=>{typeof s=="string"&&d_.isValidNumber(s)&&!d_.isOctalNumber(s)&&(s=parseInt(s)),(h.value===s||h.id===s)&&(this.isEdition(e)?s=h.id:s=h.value)})}else if(n.type==="autocomplete"&&s&&n.domainValues){let l=e.entity;!this.isEdition(e)&&n.linkColumnForce?s=l?.properties[this.getColumnKeyWithoutPropertiesTag(n.linkColumnForce)]:n.domainValues.forEach(h=>{typeof s=="string"&&d_.isValidNumber(s)&&!d_.isOctalNumber(s)&&(s=parseInt(s)),(h.value===s||h.id===s)&&(s=h.value)})}else n.type==="date"&&(this.isEdition(e)?s&&(s=(0,mj.default)(s).format(),this.formGroup.controls[n.name].setValue(s)):!this.isEdition(e)&&s===null&&(s=""));return s===void 0&&(s=""),s}getValidationAttributeValue(e,n){return e.validation!==void 0&&e.validation[n]!==void 0?e.validation[n]:!1}isEdition(e){return!!e.entity.edition}getColumnRenderer(e){return e.renderer!==void 0?e.renderer:$g.Default}getTableClass(){return{"igo-entity-table-with-selection":this.selection}}getHeaderClass(){let e=this.template.headerClassFunc;return e instanceof Function?e():{}}getRowClass(e){let n=e.entity,o=this.template.rowClassFunc;return o instanceof Function?o(n,e):{}}getCellClass(e,n){let o=e.entity,s={},l=this.template.cellClassFunc;l instanceof Function&&Object.assign(s,l(o,n,e));let h=n.cellClassFunc;return h instanceof Function&&Object.assign(s,h(o,e)),s}onButtonClick(e,n){this.enableEdit(n),typeof e=="function"&&e(n.entity,n)}getColumnKeyWithoutPropertiesTag(e){return e.includes("properties.")?e.split(".")[1]:e}static \u0275fac=function(n){return new(n||r)(ie(Ti),ie(r_),ie(il),ie(Ht),ie(du,10),ie(fw,8),ie(Tg,8),ie(zy),ie(zl))};static \u0275cmp=gt({type:r,selectors:[["igo-entity-table"]],inputs:{store:"store",paginator:"paginator",template:"template",scrollBehavior:"scrollBehavior",sortNullsFirst:"sortNullsFirst",withPaginator:"withPaginator",paginatorOptions:"paginatorOptions"},outputs:{entityClick:"entityClick",entitySelectChange:"entitySelectChange",entitySortChange:"entitySortChange"},standalone:!0,features:[Bi([{provide:Aw,useExisting:r},ZB()]),Jn,yt],decls:9,vars:11,consts:[["isAnUrlDefault",""],["notImg",""],["isAnUrlHTML",""],["isUnsanitizedHTML",""],["auto","matAutocomplete"],["picker",""],["isAnUrlUnsanitizedHTML",""],[1,"table-container",3,"ngStyle"],["id","currentWorkspaceTable","mat-table","","matSort","",3,"matSortChange","ngClass","dataSource","trackBy"],["matColumnDef","selectionCheckbox",1,"mat-cell-checkbox"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",3,"ngClass",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","igoEntityTableRow","",3,"scrollBehavior","ngClass","selection","selected","select","click",4,"matRowDef","matRowDefColumns"],[3,"store","paginatorOptions","entitySortChange$","paginatorChange",4,"ngIf"],["mat-header-cell",""],[4,"ngIf"],[3,"change","checked","indeterminate"],["mat-cell",""],[3,"mousedown","click","change","checked"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",3,"matTooltip",4,"matHeaderCellDef"],["mat-header-cell","","mat-sort-header","",3,"matTooltip"],["mat-header-cell","",3,"matTooltip",4,"matHeaderCellDef"],["mat-header-cell","",3,"matTooltip"],[4,"matCellDef"],["mat-cell","","class","mat-cell-text",3,"ngClass",4,"ngIf","ngIfElse"],["mat-cell","",1,"mat-cell-text",3,"ngClass"],["target","_blank","rel","noopener noreferrer",3,"click","href"],["igoImageError","","width","50","heigth","auto",3,"src",4,"ngIf","ngIfElse"],["igoImageError","","width","50","heigth","auto",3,"src"],["mat-cell","","class","mat-cell-text",3,"ngClass","innerHTML",4,"ngIf","ngIfElse"],["mat-cell","",1,"mat-cell-text",3,"ngClass","innerHTML"],["mat-cell","","class","mat-cell-text edition",3,"formGroup","ngClass",4,"ngIf","ngIfElse"],["mat-cell","",1,"mat-cell-text","edition",3,"formGroup","ngClass"],["class","date-picker",4,"ngIf"],["matInput","","type","time","step","900",3,"formControlName","focus","keypress","blur",4,"ngIf"],["matInput","","type","number","class","class_number_edition",3,"formControlName","step","value","readonly","required","min","max","input",4,"ngIf"],["matInput","","type","text",3,"formControlName","value","readonly","required","input",4,"ngIf"],[3,"formControlName","checked","change",4,"ngIf"],[3,"required","formControlName","multiple","value","selectionChange",4,"ngIf"],["matInput","","type","text",3,"formControlName","matAutocomplete","required","value","readonly",4,"ngIf"],["panelWidth","430px",3,"optionSelected"],[3,"value",4,"ngFor","ngForOf"],[1,"date-picker"],["matSuffix","",3,"for"],["matInput","",3,"dateChange","matDatepicker","formControlName","value"],["matInput","","type","time","step","900",3,"focus","keypress","blur","formControlName"],["matInput","","type","number",1,"class_number_edition",3,"input","formControlName","step","value","readonly","required","min","max"],["matInput","","type","text",3,"input","formControlName","value","readonly","required"],[3,"change","formControlName","checked"],[3,"selectionChange","required","formControlName","multiple","value"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],["matInput","","type","text",3,"formControlName","matAutocomplete","required","value","readonly"],[3,"value"],["mat-cell","","class","mat-cell-text",3,"ngClass",4,"matCellDef"],[3,"click",4,"ngIf"],[3,"click"],[4,"ngFor","ngForOf"],["igoStopPropagation","","mat-icon-button","",3,"color","disabled","mousedown",4,"ngIf"],["igoStopPropagation","","mat-mini-fab","",3,"color","disabled","mousedown",4,"ngIf"],["igoStopPropagation","","mat-icon-button","",3,"mousedown","color","disabled"],["igoStopPropagation","","mat-mini-fab","",3,"mousedown","color","disabled"],["mat-header-row","",3,"ngClass"],["mat-row","","igoEntityTableRow","",3,"select","click","scrollBehavior","ngClass","selection","selected"],[3,"paginatorChange","store","paginatorOptions","entitySortChange$"]],template:function(n,o){n&1&&(ne(0,"div",7)(1,"table",8),Oe("matSortChange",function(l){return o.onSort(l)}),zn(2,9),We(3,rze,2,1,"th",10)(4,oze,2,1,"td",11),Gn(),We(5,Zze,4,4,"ng-container",12)(6,Qze,1,1,"tr",13)(7,Xze,1,4,"tr",14),ce(),We(8,Jze,1,3,"igo-entity-table-paginator",15),ce()),n&2&&(ee("ngStyle",fo(9,tze,o.tableHeight)),q(),ee("ngClass",o.getTableClass())("dataSource",o.dataSource)("trackBy",o.getTrackByFunction()),q(4),ee("ngForOf",o.template.columns),q(),ee("matHeaderRowDef",o.headers)("matHeaderRowDefSticky",o.fixedHeader),q(),ee("matRowDefColumns",o.headers),q(),ee("ngIf",o.withPaginator))},dependencies:[kr,QY,e7e,$l,eh,BN,sc,Ig,Ag,jN,U9,CP,s1,o1,lc,gf,bn,Cr,Khe,yv,jg,ej,JB,xE,yP,Wa,l_,jn,er,pu,hu,sW,cc,ah,sh,Ege,PY,Age,Wge,Lge,Bge,Uge,jge,Nge,zge,Vge,$ge,Gge,Hge,Er,Ar,qr,Ps,gn,e_,uu,th,Tg,wP,TE,uv,On,hn],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block}.table-compact[_nghost-%COMP%]   tr.mat-mdc-header-row[_ngcontent-%COMP%], .table-compact[_nghost-%COMP%]     mat-checkbox .mat-ripple{height:36px}.table-compact[_nghost-%COMP%]   tr.mat-mdc-row[_ngcontent-%COMP%], .table-compact[_nghost-%COMP%]     mat-checkbox .mat-ripple{height:28px}[_nghost-%COMP%]   .table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto;flex:1 1 auto}[_nghost-%COMP%]   .mat-cell-text[_ngcontent-%COMP%]{overflow:hidden;word-wrap:break-word}[_nghost-%COMP%]   entity-table[_ngcontent-%COMP%]   table.igo-entity-table-with-selection[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{-moz-box-shadow:2px 0px 2px 0px #dddddd;-webkit-box-shadow:2px 0px 2px 0px #dddddd;-o-box-shadow:2px 0px 2px 0px #dddddd;box-shadow:2px 0 2px #ddd;cursor:pointer}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:7px}[_nghost-%COMP%]   .class_hidden[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]   .class_display_none[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .class_boolean[_ngcontent-%COMP%], [_nghost-%COMP%]   .class_icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .class_number[_ngcontent-%COMP%]{text-align:center;padding-right:35px!important}[_nghost-%COMP%]   .class_string[_ngcontent-%COMP%], [_nghost-%COMP%]   .class_text[_ngcontent-%COMP%], [_nghost-%COMP%]   .class_number_edition[_ngcontent-%COMP%]{text-align:left}[_nghost-%COMP%]   td.edition[_ngcontent-%COMP%]{background:#a6a6a633}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{border-bottom:1px solid darkgrey}"],changeDetection:0})}return r})();var i7e=["*"];var n7e=new At("MAT_CARD_CONFIG"),Jge=(()=>{class r{constructor(e){this.appearance=e?.appearance||"raised"}static{this.\u0275fac=function(n){return new(n||r)(ie(n7e,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(n,o){n&2&&oi("mat-mdc-card-outlined",o.appearance==="outlined")("mdc-card--outlined",o.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[yt],ngContentSelectors:i7e,decls:1,vars:0,template:function(n,o){n&1&&(Qi(),pi(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-app-surface-container-low));border-color:var(--mdc-elevated-card-container-color, var(--mat-app-surface-container-low));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-app-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-app-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-app-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-app-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-app-corner-medium));border-width:var(--mdc-outlined-card-outline-width);border-color:var(--mdc-outlined-card-outline-color, var(--mat-app-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-app-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-app-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-app-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-app-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-app-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-app-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-app-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-app-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-app-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-app-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-app-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-app-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}}return r})();var e0e=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[on,$a,on]})}}return r})();var wS=(()=>{class r{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=tl(e)}get inset(){return this._inset}set inset(e){this._inset=tl(e)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(n,o){n&2&&(yi("aria-orientation",o.vertical?"vertical":"horizontal"),oi("mat-divider-vertical",o.vertical)("mat-divider-horizontal",!o.vertical)("mat-divider-inset",o.inset))},inputs:{vertical:"vertical",inset:"inset"},standalone:!0,features:[yt],decls:0,vars:0,template:function(n,o){},styles:[".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-app-outline));border-top-width:var(--mat-divider-width)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-app-outline));border-right-width:var(--mat-divider-width)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0})}}return r})(),I_=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[on,on]})}}return r})();var o7e=["*"],s7e='.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mdc-list-list-item-container-color);border-radius:var(--mdc-list-list-item-container-shape, var(--mat-app-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.cdk-high-contrast-active .mdc-list-item.mdc-list-item--selected::before,.cdk-high-contrast-active .mdc-list-item.mdc-list-item--selected:focus::before,.cdk-high-contrast-active .mdc-list-item:not(.mdc-list-item--selected):focus::before{border-color:CanvasText}.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item.mdc-list-item--selected::before{border-width:3px;border-style:double}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color, var(--mat-app-on-surface-variant));width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font, var(--mat-app-label-small-font));line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height, var(--mat-app-label-small-line-height));font-size:var(--mdc-list-list-item-trailing-supporting-text-size, var(--mat-app-label-small-size));font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight, var(--mat-app-label-small-weight));letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking, var(--mat-app-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color, var(--mat-app-on-surface-variant));width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color, var(--mat-app-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color, var(--mat-app-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mdc-list-list-item-label-text-color, var(--mat-app-on-surface));font-family:var(--mdc-list-list-item-label-text-font, var(--mat-app-body-large-font));line-height:var(--mdc-list-list-item-label-text-line-height, var(--mat-app-body-large-line-height));font-size:var(--mdc-list-list-item-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-list-list-item-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-list-list-item-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color, var(--mat-app-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color, var(--mat-app-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mdc-list-list-item-supporting-text-color, var(--mat-app-on-surface-variant));font-family:var(--mdc-list-list-item-supporting-text-font, var(--mat-app-body-medium-font));line-height:var(--mdc-list-list-item-supporting-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mdc-list-list-item-supporting-text-size, var(--mat-app-body-medium-size));font-weight:var(--mdc-list-list-item-supporting-text-weight, var(--mat-app-body-medium-weight));letter-spacing:var(--mdc-list-list-item-supporting-text-tracking, var(--mat-app-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color, var(--mat-app-on-surface));opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color, var(--mat-app-on-surface));opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color, var(--mat-app-on-surface))}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color, var(--mat-app-on-surface));opacity:var(--mdc-list-list-item-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color, var(--mat-app-on-surface));opacity:var(--mdc-list-list-item-disabled-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color, var(--mat-app-on-surface));opacity:var(--mdc-list-list-item-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape, var(--mat-app-corner-full));background-color:var(--mdc-list-list-item-leading-avatar-color, var(--mat-app-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size)}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-app-corner-full));--mat-mdc-focus-indicator-border-radius:var(--mat-list-active-indicator-shape, var(--mat-app-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-app-secondary-container))}',a7e=["unscopedContent"],l7e=["text"],c7e=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],d7e=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var u7e=new At("ListOption"),Tm=(()=>{class r{constructor(e){this._elementRef=e}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht))}}static{this.\u0275dir=Pt({type:r,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"],standalone:!0})}}return r})(),XY=(()=>{class r{constructor(e){this._elementRef=e}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht))}}static{this.\u0275dir=Pt({type:r,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"],standalone:!0})}}return r})(),CS=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=Pt({type:r,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"],standalone:!0})}}return r})(),i0e=(()=>{class r{constructor(e){this._listOption=e}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}static{this.\u0275fac=function(n){return new(n||r)(ie(u7e,8))}}static{this.\u0275dir=Pt({type:r,hostVars:4,hostBindings:function(n,o){n&2&&oi("mdc-list-item__start",o._isAlignedAtStart())("mdc-list-item__end",!o._isAlignedAtStart())},standalone:!0})}}return r})(),JY=(()=>{class r extends i0e{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275dir=Pt({type:r,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],standalone:!0,features:[fn]})}}return r})(),Am=(()=>{class r extends i0e{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275dir=Pt({type:r,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],standalone:!0,features:[fn]})}}return r})(),h7e=new At("MAT_LIST_CONFIG"),_j=(()=>{class r{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=Et(h7e,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=tl(e)}get disabled(){return this._disabled}set disabled(e){this._disabled=tl(e)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=Pt({type:r,hostVars:1,hostBindings:function(n,o){n&2&&yi("aria-disabled",o.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},standalone:!0})}}return r})(),p7e=(()=>{class r{set lines(e){this._explicitLines=pd(e,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(e){this._disableRipple=tl(e)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(e){this._disabled=tl(e)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(e,n,o,s,l,h){this._elementRef=e,this._ngZone=n,this._listBase=o,this._platform=s,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new pn,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=l||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._noopAnimations=h==="NoopAnimations",o&&!o._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new Kk(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(vr(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(e){if(!this._lines||!this._titles||!this._unscopedContent)return;e&&this._checkDomForUnscopedTextContent();let n=this._explicitLines??this._inferLinesFromContent(),o=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",n<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",n<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",n===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",n===3),this._hasUnscopedTextContent){let s=this._titles.length===0&&n===1;o.classList.toggle("mdc-list-item__primary-text",s),o.classList.toggle("mdc-list-item__secondary-text",!s)}else o.classList.remove("mdc-list-item__primary-text"),o.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let e=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(e+=1),e}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(e=>e.nodeType!==e.COMMENT_NODE).some(e=>!!(e.textContent&&e.textContent.trim()))}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(ci),ie(_j,8),ie(Hn),ie(s_,8),ie(so,8))}}static{this.\u0275dir=Pt({type:r,contentQueries:function(n,o,s){if(n&1&&(Sn(s,JY,4),Sn(s,Am,4)),n&2){let l;Yt(l=Kt())&&(o._avatars=l),Yt(l=Kt())&&(o._icons=l)}},hostVars:4,hostBindings:function(n,o){n&2&&(yi("aria-disabled",o.disabled)("disabled",o._isButtonElement&&o.disabled||null),oi("mdc-list-item--disabled",o.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"},standalone:!0})}}return r})();var AE=(()=>{class r extends _j{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275cmp=gt({type:r,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],standalone:!0,features:[Bi([{provide:_j,useExisting:r}]),fn,yt],ngContentSelectors:o7e,decls:1,vars:0,template:function(n,o){n&1&&(Qi(),pi(0))},styles:[s7e],encapsulation:2,changeDetection:0})}}return r})(),wf=(()=>{class r extends p7e{get activated(){return this._activated}set activated(e){this._activated=tl(e)}constructor(e,n,o,s,l,h){super(e,n,o,s,l,h),this._activated=!1}_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return this._meta.length!==0&&(this._avatars.length!==0||this._icons.length!==0)}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(ci),ie(_j,8),ie(Hn),ie(s_,8),ie(so,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(n,o,s){if(n&1&&(Sn(s,XY,5),Sn(s,Tm,5),Sn(s,CS,5)),n&2){let l;Yt(l=Kt())&&(o._lines=l),Yt(l=Kt())&&(o._titles=l),Yt(l=Kt())&&(o._meta=l)}},viewQuery:function(n,o){if(n&1&&(Ni(a7e,5),Ni(l7e,5)),n&2){let s;Yt(s=Kt())&&(o._unscopedContent=s.first),Yt(s=Kt())&&(o._itemText=s.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(n,o){n&2&&(yi("aria-current",o._getAriaCurrent()),oi("mdc-list-item--activated",o.activated)("mdc-list-item--with-leading-avatar",o._avatars.length!==0)("mdc-list-item--with-leading-icon",o._icons.length!==0)("mdc-list-item--with-trailing-meta",o._meta.length!==0)("mat-mdc-list-item-both-leading-and-trailing",o._hasBothLeadingAndTrailing())("_mat-animation-noopable",o._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],standalone:!0,features:[fn,yt],ngContentSelectors:d7e,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-mdc-focus-indicator"]],template:function(n,o){if(n&1){let s=dt();Qi(c7e),pi(0),ne(1,"span",1),pi(2,1),pi(3,2),ne(4,"span",2,0),Oe("cdkObserveContent",function(){return Re(s),Fe(o._updateItemLines(!0))}),pi(6,3),ce()(),pi(7,4),pi(8,5),wt(9,"div",3)}},dependencies:[UN],encapsulation:2,changeDetection:0})}}return r})();var wu=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[tA,$a,on,Hh,lW,I_]})}}return r})();var m7e=["mat-menu-item",""],f7e=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],g7e=["mat-icon, [matMenuItemIcon]","*"];function _7e(r,i){r&1&&(jl(),ne(0,"svg",2),wt(1,"polygon",3),ce())}var y7e=["*"];function v7e(r,i){if(r&1){let e=dt();ne(0,"div",0),Oe("keydown",function(o){Re(e);let s=ae();return Fe(s._handleKeydown(o))})("click",function(){Re(e);let o=ae();return Fe(o.closed.emit("click"))})("@transformMenu.start",function(o){Re(e);let s=ae();return Fe(s._onAnimationStart(o))})("@transformMenu.done",function(o){Re(e);let s=ae();return Fe(s._onAnimationDone(o))}),ne(1,"div",1),pi(2),ce()()}if(r&2){let e=ae();Hr(e._classList),ee("id",e.panelId)("@transformMenu",e._panelAnimationState),yi("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}var eK=new At("MAT_MENU_PANEL"),IP=(()=>{class r{constructor(e,n,o,s,l){this._elementRef=e,this._document=n,this._focusMonitor=o,this._parentMenu=s,this._changeDetectorRef=l,this.role="menuitem",this.disabled=!1,this.disableRipple=!1,this._hovered=new Dt,this._focused=new Dt,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(e,n){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,n):this._getHostElement().focus(n),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let e=this._elementRef.nativeElement.cloneNode(!0),n=e.querySelectorAll("mat-icon, .material-icons");for(let o=0;o<n.length;o++)n[o].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(Ui),ie(il),ie(eK,8),ie(Ti))}}static{this.\u0275cmp=gt({type:r,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator"],hostVars:8,hostBindings:function(n,o){n&1&&Oe("click",function(l){return o._checkDisabled(l)})("mouseenter",function(){return o._handleMouseEnter()}),n&2&&(yi("role",o.role)("tabindex",o._getTabIndex())("aria-disabled",o.disabled)("disabled",o.disabled||null),oi("mat-mdc-menu-item-highlighted",o._highlighted)("mat-mdc-menu-item-submenu-trigger",o._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",Xt],disableRipple:[2,"disableRipple","disableRipple",Xt]},exportAs:["matMenuItem"],standalone:!0,features:[an,yt],attrs:m7e,ngContentSelectors:g7e,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(n,o){n&1&&(Qi(f7e),pi(0),ne(1,"span",0),pi(2,1),ce(),wt(3,"div",1),We(4,_7e,2,0,":svg:svg",2)),n&2&&(q(3),ee("matRippleDisabled",o.disableRipple||o.disabled)("matRippleTrigger",o._getHostElement()),q(),vn(o._triggersSubmenu?4:-1))},dependencies:[fd],encapsulation:2,changeDetection:0})}}return r})();var b7e=new At("MatMenuContent");var vj={transformMenu:Or("transformMenu",[zi("void",mi({opacity:0,transform:"scale(0.8)"})),ln("void => enter",un("120ms cubic-bezier(0, 0, 0.2, 1)",mi({opacity:1,transform:"scale(1)"}))),ln("* => void",un("100ms 25ms linear",mi({opacity:0})))]),fadeInItems:Or("fadeInItems",[zi("showing",mi({opacity:1})),ln("void => *",[mi({opacity:0}),un("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},U9t=vj.fadeInItems,z9t=vj.transformMenu,w7e=0,C7e=new At("mat-menu-default-options",{providedIn:"root",factory:x7e});function x7e(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}var wv=(()=>{class r{get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}set panelClass(e){let n=this._previousPanelClass,o=Xe({},this._classList);n&&n.length&&n.split(" ").forEach(s=>{o[s]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(s=>{o[s]=!0}),this._elementRef.nativeElement.className=""),this._classList=o}get classList(){return this.panelClass}set classList(e){this.panelClass=e}constructor(e,n,o,s){this._elementRef=e,this._changeDetectorRef=s,this._elevationPrefix="mat-elevation-z",this._baseElevation=null,this._directDescendantItems=new _p,this._classList={},this._panelAnimationState="void",this._animationDone=new Dt,this.closed=new it,this.close=this.closed,this.panelId=`mat-menu-panel-${w7e++}`,this._injector=Et(yn),this.overlayPanelClass=o.overlayPanelClass||"",this._xPosition=o.xPosition,this._yPosition=o.yPosition,this.backdropClass=o.backdropClass,this.overlapTrigger=o.overlapTrigger,this.hasBackdrop=o.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new bw(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(yo(this._directDescendantItems),jr(e=>vr(...e.map(n=>n._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{let n=this._keyManager;if(this._panelAnimationState==="enter"&&n.activeItem?._hasFocus()){let o=e.toArray(),s=Math.max(0,Math.min(o.length-1,n.activeItemIndex||0));o[s]&&!o[s].disabled?n.setActiveItem(s):n.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy()}_hovered(){return this._directDescendantItems.changes.pipe(yo(this._directDescendantItems),jr(n=>vr(...n.map(o=>o._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){let n=e.keyCode,o=this._keyManager;switch(n){case 27:gs(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(n===38||n===40)&&o.setFocusOrigin("keyboard"),o.onKeydown(e);return}e.stopPropagation()}focusFirstItem(e="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=ks(()=>{let n=null;if(this._directDescendantItems.length&&(n=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!n||!n.contains(document.activeElement)){let o=this._keyManager;o.setFocusOrigin(e).setFirstItemActive(),!o.activeItem&&n&&n.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){if(this._baseElevation===null){let h=(typeof getComputedStyle=="function"?getComputedStyle(this._elementRef.nativeElement):null)?.getPropertyValue("--mat-menu-base-elevation-level")||"8";this._baseElevation=parseInt(h)}let n=Math.min(this._baseElevation+e,24),o=`${this._elevationPrefix}${n}`,s=Object.keys(this._classList).find(l=>l.startsWith(this._elevationPrefix));if(!s||s===this._previousElevation){let l=Xe({},this._classList);this._previousElevation&&(l[this._previousElevation]=!1),l[o]=!0,this._previousElevation=o,this._classList=l}}setPositionClasses(e=this.xPosition,n=this.yPosition){this._classList=li(Xe({},this._classList),{"mat-menu-before":e==="before","mat-menu-after":e==="after","mat-menu-above":n==="above","mat-menu-below":n==="below"}),this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,e.toState==="enter"&&this._keyManager.activeItemIndex===0&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(yo(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(n=>n._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(ci),ie(C7e),ie(Ti))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-menu"]],contentQueries:function(n,o,s){if(n&1&&(Sn(s,b7e,5),Sn(s,IP,5),Sn(s,IP,4)),n&2){let l;Yt(l=Kt())&&(o.lazyContent=l.first),Yt(l=Kt())&&(o._allItems=l),Yt(l=Kt())&&(o.items=l)}},viewQuery:function(n,o){if(n&1&&Ni(jo,5),n&2){let s;Yt(s=Kt())&&(o.templateRef=s.first)}},hostVars:3,hostBindings:function(n,o){n&2&&yi("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",Xt],hasBackdrop:[2,"hasBackdrop","hasBackdrop",e=>e==null?null:Xt(e)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],standalone:!0,features:[Bi([{provide:eK,useExisting:r}]),an,yt],ngContentSelectors:y7e,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mat-mdc-elevation-specific",3,"keydown","click","id"],[1,"mat-mdc-menu-content"]],template:function(n,o){n&1&&(Qi(),We(0,v7e,3,7,"ng-template"))},styles:['mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-app-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-app-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;box-sizing:border-box;outline:0;border-radius:var(--mat-menu-container-shape, var(--mat-app-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-app-surface-container));will-change:transform,opacity}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.mat-mdc-menu-panel.ng-animating:has(.mat-mdc-menu-content:empty){display:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-app-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing);margin-top:var(--mat-menu-divider-top-spacing)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:var(--mat-menu-item-leading-spacing);padding-right:var(--mat-menu-item-trailing-spacing);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}[dir=rtl] .mat-mdc-menu-item{padding-right:var(--mat-menu-item-leading-spacing);padding-left:var(--mat-menu-item-trailing-spacing)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing);padding-right:var(--mat-menu-item-with-icon-trailing-spacing)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-right:var(--mat-menu-item-with-icon-leading-spacing);padding-left:var(--mat-menu-item-with-icon-trailing-spacing)}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-app-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing);height:var(--mat-menu-item-icon-size);width:var(--mat-menu-item-icon-size)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color)}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color)}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[vj.transformMenu,vj.fadeInItems]},changeDetection:0})}}return r})(),r0e=new At("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let r=Et(Ro);return()=>r.scrollStrategies.reposition()}});function S7e(r){return()=>r.scrollStrategies.reposition()}var I7e={provide:r0e,deps:[Ro],useFactory:S7e},n0e=Ul({passive:!0});var TP=(()=>{class r{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._parentMaterialMenu,this._menuCloseSubscription=e.close.subscribe(n=>{this._destroyMenu(n),(n==="click"||n==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(n)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(e,n,o,s,l,h,p,m,f){this._overlay=e,this._element=n,this._viewContainerRef=o,this._menuItemInstance=h,this._dir=p,this._focusMonitor=m,this._ngZone=f,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=pn.EMPTY,this._hoverSubscription=pn.EMPTY,this._menuCloseSubscription=pn.EMPTY,this._changeDetectorRef=Et(Ti),this._handleTouchStart=g=>{yx(g)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new it,this.onMenuOpen=this.menuOpened,this.menuClosed=new it,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=l instanceof wv?l:void 0,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,n0e)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,n0e),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){let e=this.menu;if(this._menuOpen||!e)return;let n=this._createOverlay(e),o=n.getConfig(),s=o.positionStrategy;this._setPosition(e,s),o.hasBackdrop=e.hasBackdrop==null?!this.triggersSubmenu():e.hasBackdrop,n.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof wv&&(e._startAnimation(),e._directDescendantItems.changes.pipe(rn(e.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,n){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,n):this._element.nativeElement.focus(n)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;let n=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&(e==="keydown"||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,n instanceof wv?(n._resetAnimation(),n.lazyContent?n._animationDone.pipe(mn(o=>o.toState==="void"),Tn(1),rn(n.lazyContent._attached)).subscribe({next:()=>n.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),n?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let n=0,o=e.parentMenu;for(;o;)n++,o=o.parentMenu;e.setElevation(n)}}_setIsMenuOpen(e){e!==this._menuOpen&&(this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e),this._changeDetectorRef.markForCheck())}_createOverlay(e){if(!this._overlayRef){let n=this._getOverlayConfig(e);this._subscribeToPositions(e,n.positionStrategy),this._overlayRef=this._overlay.create(n),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new mf({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,n){e.setPositionClasses&&n.positionChanges.subscribe(o=>{let s=o.connectionPair.overlayX==="start"?"after":"before",l=o.connectionPair.overlayY==="top"?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(s,l)):e.setPositionClasses(s,l)})}_setPosition(e,n){let[o,s]=e.xPosition==="before"?["end","start"]:["start","end"],[l,h]=e.yPosition==="above"?["bottom","top"]:["top","bottom"],[p,m]=[l,h],[f,g]=[o,s],y=0;if(this.triggersSubmenu()){if(g=o=e.xPosition==="before"?"start":"end",s=f=o==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let _=this._parentMaterialMenu.items.first;this._parentInnerPadding=_?_._getHostElement().offsetTop:0}y=l==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(p=l==="top"?"bottom":"top",m=h==="top"?"bottom":"top");n.withPositions([{originX:o,originY:p,overlayX:f,overlayY:l,offsetY:y},{originX:s,originY:p,overlayX:g,overlayY:l,offsetY:y},{originX:o,originY:m,overlayX:f,overlayY:h,offsetY:-y},{originX:s,originY:m,overlayX:g,overlayY:h,offsetY:-y}])}_menuClosingActions(){let e=this._overlayRef.backdropClick(),n=this._overlayRef.detachments(),o=this._parentMaterialMenu?this._parentMaterialMenu.closed:Vt(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(mn(l=>l!==this._menuItemInstance),mn(()=>this._menuOpen)):Vt();return vr(e,o,s,n)}_handleMousedown(e){_x(e)||(this._openedBy=e.button===0?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){let n=e.keyCode;(n===13||n===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(n===39&&this.dir==="ltr"||n===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(mn(e=>e===this._menuItemInstance&&!e.disabled),jh(0,FD)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof wv&&this.menu._isAnimating?this.menu._animationDone.pipe(Tn(1),jh(0,FD),rn(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new _u(e.templateRef,this._viewContainerRef)),this._portal}static{this.\u0275fac=function(n){return new(n||r)(ie(Ro),ie(Ht),ie(Io),ie(r0e),ie(eK,8),ie(IP,10),ie(To,8),ie(il),ie(ci))}}static{this.\u0275dir=Pt({type:r,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(n,o){n&1&&Oe("click",function(l){return o._handleClick(l)})("mousedown",function(l){return o._handleMousedown(l)})("keydown",function(l){return o._handleKeydown(l)}),n&2&&yi("aria-haspopup",o.menu?"menu":null)("aria-expanded",o.menuOpen)("aria-controls",o.menuOpen?o.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],standalone:!0})}}return r})(),AP=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({providers:[I7e],imports:[$a,Hh,on,Ep,Xh,on]})}}return r})();function T7e(r,i){if(r&1&&(ne(0,"button",5),Ne(1,"async"),wt(2,"igo-icon",6),Ne(3,"async"),ce()),r&2){let e=ae(2);ee("color",e.color)("disabled",je(1,4,e.disabled$))("disableRipple",!0),q(2),ee("icon",e.isObservable(e.action.icon)?je(3,6,e.action.icon):e.action.icon)}}function A7e(r,i){if(r&1&&(ne(0,"span",7),Ye(1),Ne(2,"translate"),ce()),r&2){let e=ae(2);q(),Si(je(2,1,e.title))}}function E7e(r,i){if(r&1){let e=dt();ne(0,"mat-list-item",2),Ne(1,"async"),Ne(2,"translate"),Ne(3,"async"),Oe("click",function(){Re(e);let o=ae();return Fe(o.onClick())}),We(4,T7e,4,8,"button",3)(5,A7e,3,3,"span",4),ce()}if(r&2){let e=ae();ee("matTooltip",e.withTooltip?je(2,6,je(1,4,e.tooltip$)||e.title):"")("ngClass",je(3,8,e.ngClass$)),q(4),ee("ngIf",e.withIcon),q(),ee("ngIf",e.withTitle)}}function M7e(r,i){if(r&1){let e=dt();ne(0,"mat-checkbox",10),Ne(1,"async"),Oe("change",function(){Re(e);let o=ae(2);return Fe(o.action.handler())}),Ye(2),Ne(3,"translate"),ce()}if(r&2){let e=ae(2);ee("checked",je(1,2,e.checkCondition$)),q(2),Qt(" ",je(3,4,e.title)," ")}}function D7e(r,i){if(r&1&&(ne(0,"mat-list-item",8),Ne(1,"async"),Ne(2,"translate"),Ne(3,"async"),We(4,M7e,4,6,"mat-checkbox",9),ce()),r&2){let e=ae();ee("matTooltip",e.withTooltip?je(2,5,je(1,3,e.tooltip$)||e.title):"")("ngClass",je(3,7,e.ngClass$)),q(4),ee("ngIf",e.withTitle)}}function k7e(r,i){if(r&1){let e=dt();ne(0,"div",7)(1,"button",8),Ne(2,"translate"),Oe("click",function(){Re(e);let o=ae();return Fe(o.scrollUp())}),ne(3,"mat-icon"),Ye(4,"expand_less"),ce()()()}r&2&&(q(),ee("matTooltip",je(2,1,"igo.common.actionbar.scrollUp")))}function O7e(r,i){if(r&1){let e=dt();ne(0,"igo-actionbar-item",11),Oe("trigger",function(){Re(e);let o=ae(2);return Fe(o.onTriggerAction(o.toggleCollapseAction))}),ce()}if(r&2){let e=ae(2);ee("withTitle",!1)("withIcon",!0)("color",e.color)("disabled",e.store.view.empty)("action",e.toggleCollapseAction)}}function P7e(r,i){if(r&1){let e=dt();ne(0,"igo-actionbar-item",13),Oe("trigger",function(){let o=Re(e).$implicit,s=ae(3);return Fe(s.onTriggerAction(o))}),ce()}if(r&2){let e=i.$implicit,n=ae(3);ee("withTitle",n.withTitle)("withIcon",n.withIcon)("withTooltip",n.withTooltip)("color",n.color)("disabled",n.store.state.get(e).disabled)("action",e)}}function R7e(r,i){if(r&1&&(We(0,P7e,1,6,"ng-template",12,0,Vo),Ne(2,"async")),r&2){let e=ae(2);ee("ngForOf",je(2,1,e.store.view.all$()))}}function F7e(r,i){if(r&1&&(ne(0,"mat-list",9),We(1,O7e,1,5,"igo-actionbar-item",10)(2,R7e,3,3,null,5),ce()),r&2){let e=ae();q(),ee("ngIf",e.withToggleButton),q(),ee("ngIf",!e.collapsed)}}function L7e(r,i){if(r&1){let e=dt();ne(0,"div",14)(1,"button",8),Ne(2,"translate"),Oe("click",function(){Re(e);let o=ae();return Fe(o.scrollDown())}),ne(3,"mat-icon"),Ye(4,"expand_more"),ce()()()}r&2&&(q(),ee("matTooltip",je(2,1,"igo.common.actionbar.scrollDown")))}function N7e(r,i){if(r&1){let e=dt();ne(0,"igo-actionbar-item",17),Oe("trigger",function(){let o=Re(e).$implicit,s=ae(2);return Fe(s.onTriggerAction(o))}),ce()}if(r&2){let e=i.$implicit,n=ae(2);ee("withTitle",n.withTitle)("withIcon",n.withIcon)("color",n.color)("action",e)}}function B7e(r,i){if(r&1&&(ne(0,"div")(1,"button",15),Ne(2,"translate"),ne(3,"mat-icon"),Ye(4),ce()(),ne(5,"mat-menu",16,1)(7,"mat-list"),We(8,N7e,1,4,"ng-template",12),Ne(9,"async"),ce()()()),r&2){let e=ji(6),n=ae();q(),ee("matTooltip",je(2,10,"igo.common.actionbar.icon"))("matMenuTriggerFor",e)("disabled",n.store.view.empty)("color",n.iconColor),q(3),Si(n.icon),q(),Hr(n.overlayClass),ee("xPosition",n.xPosition)("yPosition",n.yPosition),q(3),ee("ngForOf",je(9,12,n.store.view.all$()))}}function j7e(r,i){if(r&1){let e=dt();ne(0,"igo-actionbar-item",17),Oe("trigger",function(){let o=Re(e).$implicit,s=ae(2);return Fe(s.onTriggerAction(o))}),ce(),wt(1,"br")}if(r&2){let e=i.$implicit,n=ae(2);ee("withTitle",n.withTitle)("withIcon",n.withIcon)("color",n.color)("action",e)}}function V7e(r,i){if(r&1&&(ne(0,"mat-card",18)(1,"mat-list"),We(2,j7e,2,4,"ng-template",12),Ne(3,"async"),ce()()),r&2){let e=ae();q(2),ee("ngForOf",je(3,1,e.store.view.all$()))}}var c1=function(r){return r.Dock="dock",r.Overlay="overlay",r.Context="context",r}(c1||{}),Em=class extends wd{},$7e=(()=>{class r{disabled$=new mt(!1);checkCondition$=new mt(void 0);tooltip$=new mt(void 0);noDisplay$=new mt(!1);ngClass$=new mt({});ngClass$$;disabled$$;availability$$;checkCondition$$;tooltip$$;noDisplay$$;display$$;isObservable=$c;action;color="default";withTitle=!0;withIcon=!0;withTooltip=!0;set disabled(e){this.disabled$.next(e)}get disabled(){return this.disabled$.value}set noDisplay(e){this.noDisplay$.next(e)}get noDisplay(){return this.noDisplay$.value}trigger=new it;get title(){return this.action.title}ngOnInit(){let e=this.action.args||[];this.action.ngClass!==void 0&&(this.ngClass$$=this.action.ngClass(...e).subscribe(n=>this.updateNgClass(n))),$c(this.action.checkCondition)?this.checkCondition$$=this.action.checkCondition.subscribe(n=>this.updateCheckCondition(n)):this.updateCheckCondition(this.action.checkCondition),$c(this.action.tooltip)?this.tooltip$$=this.action.tooltip.subscribe(n=>this.updateTooltip(n)):this.updateTooltip(this.action.tooltip),this.action.availability!==void 0&&(this.availability$$=this.action.availability(...e).subscribe(n=>this.disabled=!n)),this.disabled$$=this.disabled$.subscribe(n=>this.updateNgClass({"igo-actionbar-item-disabled":n})),this.action.display!==void 0&&(this.display$$=this.action.display(...e).subscribe(n=>this.noDisplay=!n)),this.noDisplay$$=this.noDisplay$.subscribe(n=>this.updateNgClass({"igo-actionbar-item-no-display":n}))}ngOnDestroy(){this.ngClass$$!==void 0&&(this.ngClass$$.unsubscribe(),this.ngClass$$=void 0),this.availability$$!==void 0&&(this.availability$$.unsubscribe(),this.availability$$=void 0),this.display$$!==void 0&&(this.display$$.unsubscribe(),this.display$$=void 0),this.checkCondition$$!==void 0&&(this.checkCondition$$.unsubscribe(),this.checkCondition$$=void 0),this.tooltip$$!==void 0&&(this.tooltip$$.unsubscribe(),this.tooltip$$=void 0),this.disabled$$.unsubscribe(),this.noDisplay$$.unsubscribe()}onClick(){this.disabled!==!0&&this.trigger.emit(this.action)}updateNgClass(e){this.ngClass$.next(Object.assign({},this.ngClass$.value,e))}updateTooltip(e){this.tooltip$.next(e)}updateCheckCondition(e){this.checkCondition$.next(e)}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-actionbar-item"]],inputs:{action:"action",color:"color",withTitle:"withTitle",withIcon:"withIcon",withTooltip:"withTooltip",disabled:"disabled",noDisplay:"noDisplay"},outputs:{trigger:"trigger"},standalone:!0,features:[yt],decls:2,vars:2,consts:[["class","actionbar-item","matTooltipClass","actionbarItemTooltip","matTooltipShowDelay","500",3,"matTooltip","ngClass","click",4,"ngIf"],["class","item-checkbox","matTooltipClass","actionbarItemTooltip","matTooltipShowDelay","500",3,"matTooltip","ngClass",4,"ngIf"],["matTooltipClass","actionbarItemTooltip","matTooltipShowDelay","500",1,"actionbar-item",3,"click","matTooltip","ngClass"],["matListItemAvatar","","mat-icon-button","",3,"color","disabled","disableRipple",4,"ngIf"],["matLine","",4,"ngIf"],["matListItemAvatar","","mat-icon-button","",3,"color","disabled","disableRipple"],[3,"icon"],["matLine",""],["matTooltipClass","actionbarItemTooltip","matTooltipShowDelay","500",1,"item-checkbox",3,"matTooltip","ngClass"],[3,"checked","change",4,"ngIf"],[3,"change","checked"]],template:function(n,o){n&1&&We(0,E7e,6,10,"mat-list-item",0)(1,D7e,5,9,"mat-list-item",1),n&2&&(ee("ngIf",!o.action.checkbox),q(),ee("ngIf",o.action.checkbox))},dependencies:[gn,wu,wf,JY,Er,Ar,qr,bn,Cr,jn,yv,jg,kr,On,hn,i1],styles:["[_nghost-%COMP%]     mat-list-item:hover{cursor:pointer}[_nghost-%COMP%]   mat-list-item.igo-actionbar-item-disabled[_ngcontent-%COMP%]{color:#00000042;cursor:default!important}[_nghost-%COMP%]   mat-list-item.igo-actionbar-item-no-display[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   mat-list-item[_ngcontent-%COMP%]     button[matlistitemavatar]{margin-left:4px}[_nghost-%COMP%]   mat-list-item[_ngcontent-%COMP%]     button .mat-mdc-button-persistent-ripple{display:none}[_nghost-%COMP%]   .item-checkbox[_ngcontent-%COMP%]     mat-checkbox label{margin-left:28px}[_nghost-%COMP%]   .actionbar-item[_ngcontent-%COMP%]   [matline][_ngcontent-%COMP%]{padding-left:16px}"],changeDetection:0})}return r})(),EE=(()=>{class r{overlay;elRef;cdRef;mediaService;actionbarMode=c1;collapsed=!1;toggleCollapseAction={id:"actionbar_toggle",icon:"more_vert",handler:()=>{this.collapsed=!this.collapsed}};watcher;heightCondition$=new mt(!1);positionConditionTop$=new mt(!0);positionConditionLow$=new mt(!0);store;mode=c1.Dock;withToggleButton=!1;horizontal=!1;color="default";iconColor="default";withTitle=!0;withTooltip=!0;scrollActive=!0;withIcon=!0;icon="more_horiz";xPosition="before";yPosition="above";set overlayClass(e){this._overlayClass=e}get overlayClass(){return[this._overlayClass,"igo-actionbar-overlay"].join(" ")}_overlayClass="";isCollapsed=this.collapsed;get withTitleClass(){return this.withTitle}get withIconClass(){return this.withIcon}get horizontalClass(){return this.horizontal}get heightCondition(){let e=this.elRef.nativeElement;return this.scrollActive===!1&&e.clientHeight<e.scrollHeight}get positionConditionTop(){return this.elRef.nativeElement.scrollTop!==0}get positionConditionLow(){let e=this.elRef.nativeElement;return!(e.scrollTop>=e.scrollHeight-e.clientHeight)}get isDesktop(){return this.mediaService.getMedia()===bu.Desktop}constructor(e,n,o,s){this.overlay=e,this.elRef=n,this.cdRef=o,this.mediaService=s}ngOnChanges(e){let n=e.store;n&&n.currentValue!==n.previousValue&&(this.watcher!==void 0&&this.watcher.destroy(),this.watcher=new bv(this.store,this.cdRef))}ngOnDestroy(){this.watcher.destroy()}onTriggerAction(e){let n=e.args||[];e.handler(...n)}scrollDown(){this.elRef.nativeElement.scrollBy(0,52)}scrollUp(){this.elRef.nativeElement.scrollBy(0,-52)}static \u0275fac=function(n){return new(n||r)(ie(Ro),ie(Ht),ie(Ti),ie(Ol))};static \u0275cmp=gt({type:r,selectors:[["igo-actionbar"]],hostVars:8,hostBindings:function(n,o){n&2&&oi("is-collapsed",o.isCollapsed)("with-title",o.withTitleClass)("with-icon",o.withIconClass)("horizontal",o.horizontalClass)},inputs:{store:"store",mode:"mode",withToggleButton:"withToggleButton",horizontal:"horizontal",color:"color",iconColor:"iconColor",withTitle:"withTitle",withTooltip:"withTooltip",scrollActive:"scrollActive",withIcon:"withIcon",icon:"icon",xPosition:"xPosition",yPosition:"yPosition",overlayClass:"overlayClass"},standalone:!0,features:[Jn,yt],decls:5,vars:5,consts:[["buttonContent",""],["actionbarMenu","matMenu"],["id","topChevron",4,"ngIf"],["matListItemIcon","",4,"ngIf"],["id","lowChevron",4,"ngIf"],[4,"ngIf"],["class","context-menu-card mat-elevation-z4",4,"ngIf"],["id","topChevron"],["mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"click","matTooltip"],["matListItemIcon",""],["color","accent",3,"withTitle","withIcon","color","disabled","action","trigger",4,"ngIf"],["color","accent",3,"trigger","withTitle","withIcon","color","disabled","action"],["ngFor","",3,"ngForOf"],["color","accent",3,"trigger","withTitle","withIcon","withTooltip","color","disabled","action"],["id","lowChevron"],["mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",1,"buttonOverlay",3,"matTooltip","matMenuTriggerFor","disabled","color"],["overlapTrigger","true",1,"igo-compact-menu","igo-no-min-width-menu",3,"xPosition","yPosition"],["color","accent",3,"trigger","withTitle","withIcon","color","action"],[1,"context-menu-card","mat-elevation-z4"]],template:function(n,o){n&1&&We(0,k7e,5,3,"div",2)(1,F7e,3,2,"mat-list",3)(2,L7e,5,3,"div",4)(3,B7e,10,14,"div",5)(4,V7e,4,3,"mat-card",6),n&2&&(ee("ngIf",o.heightCondition&&o.positionConditionTop&&o.isDesktop),q(),ee("ngIf",o.mode===o.actionbarMode.Dock),q(),ee("ngIf",o.heightCondition&&o.positionConditionLow&&o.isDesktop),q(),ee("ngIf",o.mode===o.actionbarMode.Overlay),q(),ee("ngIf",o.mode===o.actionbarMode.Context))},dependencies:[gn,bn,Cr,Er,Ar,jn,er,wu,AE,Am,$7e,Ps,AP,wv,TP,e0e,Jge,kr,On,hn],styles:["[_nghost-%COMP%]{display:block;height:100%;overflow:auto;position:relative}.horizontal[_nghost-%COMP%]{max-width:100%;overflow:unset}.horizontal[_nghost-%COMP%]   mat-list[_ngcontent-%COMP%]{width:auto;white-space:nowrap}.horizontal[_nghost-%COMP%]   igo-actionbar-item[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   mat-list[_ngcontent-%COMP%]{padding-top:0}[_nghost-%COMP%]   .buttonOverlay[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .context-menu-card[_ngcontent-%COMP%]{padding:8px 3px;margin:10px}[_nghost-%COMP%]   #topChevron[_ngcontent-%COMP%]{position:sticky;top:0;background-color:#fff;z-index:3;display:flex;justify-content:center}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){[_nghost-%COMP%]   #topChevron[_ngcontent-%COMP%]{position:fixed;top:unset}}@supports (-ms-accelerator: true){[_nghost-%COMP%]   #topChevron[_ngcontent-%COMP%]{position:fixed;top:unset}}[_nghost-%COMP%]   #lowChevron[_ngcontent-%COMP%]{position:sticky;bottom:0;background-color:#fff;z-index:3;display:flex;justify-content:center}[_nghost-%COMP%]   .igo-actionbar-overlay[_ngcontent-%COMP%]{min-width:inherit!important;padding-top:0;padding-bottom:0}[_nghost-%COMP%]   .igo-actionbar-overlay[_ngcontent-%COMP%]   .mat-mdc-list[_ngcontent-%COMP%]{padding-top:0}[_nghost-%COMP%]   .igo-actionbar-overlay[_ngcontent-%COMP%]   .mat-mdc-menu-content[_ngcontent-%COMP%]:not(:empty){padding-top:0;padding-bottom:0}[_nghost-%COMP%]     .mdc-list-item__primary-text{white-space:normal;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;line-height:18px;-webkit-box-orient:vertical;-webkit-line-clamp:2}"],changeDetection:0})}return r})();var U7e=r=>({"igo-backdrop-shown":r}),bj=(()=>{class r{get shown(){return this._shown}set shown(e){this._shown=e}_shown;static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-backdrop"]],inputs:{shown:"shown"},standalone:!0,features:[yt],decls:1,vars:3,consts:[[3,"ngClass"]],template:function(n,o){n&1&&wt(0,"div",0),n&2&&ee("ngClass",fo(1,U7e,o.shown))},dependencies:[qr],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#64646480;z-index:2;display:none}[_nghost-%COMP%] > div.igo-backdrop-shown[_ngcontent-%COMP%]{display:block}"]})}return r})();var s0e=(()=>{class r{overlay;viewContainerRef;elementRef;overlayRef;sub;menuContext;menuPosition=new it;constructor(e,n,o){this.overlay=e,this.viewContainerRef=n,this.elementRef=o}onContextMenu(e){let n,o;if(e instanceof MouseEvent?(n=e.x,o=e.y):e instanceof TouchEvent&&(n=e.touches[0].pageX,o=e.touches[0].pageY),!n||!o)return;this.close(),e.preventDefault(),this.menuPosition.emit({x:n,y:o}),this.overlayRef=null;let s=this.overlay.position().flexibleConnectedTo({x:n,y:o}).withPositions([{originX:"end",originY:"bottom",overlayX:"start",overlayY:"top"}]);this.overlayRef=this.overlay.create({positionStrategy:s,scrollStrategy:this.overlay.scrollStrategies.close()}),this.overlayRef.attach(new _u(this.menuContext,this.viewContainerRef,{$implicit:void 0})),this.sub=Ds(document,"click").pipe(mn(l=>{let h=l.target;return this.close(),!!this.overlayRef&&!this.overlayRef.overlayElement.contains(h)}),Tn(1)).subscribe(()=>this.close()),this.sub=Ds(document,"contextmenu").pipe(mn(l=>{let h=l.target;if(h&&!this.elementRef.nativeElement.contains(h)&&!this.overlayRef.overlayElement.contains(h))return!0;l.preventDefault()}),Tn(1)).subscribe(()=>this.close())}close(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null),this.sub&&this.sub.unsubscribe()}static \u0275fac=function(n){return new(n||r)(ie(Ro),ie(Io),ie(Ht))};static \u0275dir=Pt({type:r,selectors:[["","igoContextMenu",""]],hostBindings:function(n,o){n&1&&Oe("longpress",function(l){return o.onContextMenu(l)})("contextmenu",function(l){return o.onContextMenu(l)})},inputs:{menuContext:[0,"igoContextMenu","menuContext"]},outputs:{menuPosition:"menuPosition"},standalone:!0})}return r})(),a0e=(()=>{class r{touchTimeout;touchDuration=400;onlyIOS=!0;longpress=new it;touchstart(e){if(e.touches.length>1){this.touchEnd();return}this.touchTimeout=setTimeout(()=>{this.onlyIOS?c_.getOSName()==="iOS"&&this.longpress.emit(e):this.longpress.emit(e)},this.touchDuration)}touchend(){this.touchEnd()}touchEnd(){clearTimeout(this.touchTimeout)}static \u0275fac=function(n){return new(n||r)};static \u0275dir=Pt({type:r,selectors:[["","igoLongPress",""]],hostBindings:function(n,o){n&1&&Oe("touchstart",function(l){return o.touchstart(l)})("touchmove",function(){return o.touchend()})("touchcancel",function(){return o.touchend()})("touchend",function(){return o.touchend()})},inputs:{touchDuration:"touchDuration",onlyIOS:"onlyIOS"},outputs:{longpress:"longpress"},standalone:!0})}return r})();var z7e=["target"];function G7e(r,i){}var EP=class{componentFactory;componentRef;subscriptions=[];target;inputs={};inputs$$={};subscribers={};constructor(i){this.componentFactory=i}setTarget(i){this.target=i,this.componentRef=i.createComponent(this.componentFactory),this.updateInputs(this.inputs),this.updateSubscribers(this.subscribers)}destroy(){this.target!==void 0&&this.target.clear(),this.componentRef!==void 0&&(this.componentRef.destroy(),this.componentRef=void 0),this.unobserveAllInputs(),this.unsubscribeAll()}updateInputs(i){if(this.inputs=i,this.componentRef===void 0)return;let e=this.componentRef.instance;this.componentFactory.inputs.forEach(o=>{let s=o.propName;this.unobserveInput(s);let l=i[s];Object.prototype.hasOwnProperty.call(i,s)&&(l instanceof si?this.observeInput(s,l):this.setInputValue(e,s,l))}),typeof e.onUpdateInputs=="function"&&e.onUpdateInputs()}setInputValue(i,e,n){let o=i[e];if(n===o)return;let s=Object.getPrototypeOf(i),l=Object.getOwnPropertyDescriptor(s,e);l!==void 0&&l.set!==void 0?l.set.call(i,n):i[e]=n}updateSubscribers(i){if(this.subscribers=i,this.componentRef===void 0)return;let e=this.componentRef.instance;this.componentFactory.outputs.forEach(o=>{let s=o.propName;if(Object.prototype.hasOwnProperty.call(i,s)){let l=e[s],h=i[s];Array.isArray(h)?h.forEach(p=>{this.subscriptions.push(l.subscribe(p))}):this.subscriptions.push(l.subscribe(h))}})}observeInput(i,e){this.inputs$$[i]=e.subscribe(n=>{let o=this.componentRef.instance;this.setInputValue(o,i,n),typeof o.onUpdateInputs=="function"&&o.onUpdateInputs()})}unobserveInput(i){this.inputs$$[i]!==void 0&&(this.inputs$$[i].unsubscribe(),this.inputs$$[i]=void 0)}unobserveAllInputs(){Object.values(this.inputs$$).forEach(i=>{i!==void 0&&i.unsubscribe()}),this.inputs$$={}}unsubscribeAll(){this.subscriptions.forEach(i=>i.unsubscribe()),this.subscriptions=[]}},tK=(()=>{class r{resolver;constructor(e){this.resolver=e}create(e){let n=this.resolver.resolveComponentFactory(e);return new EP(n)}static \u0275fac=function(n){return new(n||r)(xe(au))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),ME=(()=>{class r{dynamicComponentService;cdRef;component;inputs={};subscribers={};dynamicComponent;target;constructor(e,n){this.dynamicComponentService=e,this.cdRef=n}ngOnChanges(e){let n=e.component,o=e.inputs,s=e.subscribers,l=Ln.objectsAreEquivalent;if(!(!n||!n.currentValue)){if(n.currentValue!==n.previousValue)this.createComponent(n.currentValue);else{let h=o&&l(o.currentValue||{},o.previousValue||{}),p=s&&l(s.currentValue||{},s.previousValue||{});h===!1&&this.updateInputs(),p===!1&&this.updateSubscribers()}this.cdRef.detectChanges()}}ngOnDestroy(){this.dynamicComponent&&this.dynamicComponent.destroy()}createComponent(e){this.dynamicComponent!==void 0&&this.dynamicComponent.destroy(),this.dynamicComponent=e instanceof EP?e:this.dynamicComponentService.create(e),this.renderComponent()}renderComponent(){this.updateInputs(),this.updateSubscribers(),this.dynamicComponent.setTarget(this.target)}updateInputs(){this.dynamicComponent.updateInputs(this.inputs)}updateSubscribers(){this.dynamicComponent.updateSubscribers(this.subscribers)}static \u0275fac=function(n){return new(n||r)(ie(tK),ie(Ti))};static \u0275cmp=gt({type:r,selectors:[["igo-dynamic-outlet"]],viewQuery:function(n,o){if(n&1&&Ni(z7e,7,Io),n&2){let s;Yt(s=Kt())&&(o.target=s.first)}},inputs:{component:"component",inputs:"inputs",subscribers:"subscribers"},standalone:!0,features:[Jn,yt],decls:2,vars:0,consts:[["target",""]],template:function(n,o){n&1&&We(0,G7e,0,0,"ng-template",null,0,Vo)},styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}"],changeDetection:0})}return r})();function W7e(r,i){if(r&1&&wt(0,"igo-dynamic-outlet",1),r&2){let e=ae();ee("component",e.widget)("inputs",e.inputs)("subscribers",e.getEffectiveSubscribers())}}var iK=(()=>{class r{dynamicComponentService;constructor(e){this.dynamicComponentService=e}create(e){return this.dynamicComponentService.create(e)}static \u0275fac=function(n){return new(n||r)(xe(tK))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),nK=(()=>{class r{baseSubscribers={cancel:e=>this.onCancel(e),complete:e=>this.onComplete(e)};widget;inputs;subscribers={};complete=new it;cancel=new it;ngOnDestroy(){this.destroyWidget()}getEffectiveSubscribers(){let e=Object.assign({},this.subscribers);return Object.keys(this.baseSubscribers).forEach(n=>{let o=e[n],s=this.baseSubscribers[n];o!==void 0?e[n]=l=>{o(l),s(l)}:e[n]=s}),e}onCancel(e){this.cancel.emit(e),this.destroyWidget()}onComplete(e){this.complete.emit(e),this.destroyWidget()}destroyWidget(){this.widget!==void 0&&this.widget.destroy(),this.widget=void 0}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-widget-outlet"]],inputs:{widget:"widget",inputs:"inputs",subscribers:"subscribers"},outputs:{complete:"complete",cancel:"cancel"},standalone:!0,features:[yt],decls:1,vars:1,consts:[[3,"component","inputs","subscribers",4,"ngIf"],[3,"component","inputs","subscribers"]],template:function(n,o){n&1&&We(0,W7e,1,3,"igo-dynamic-outlet",0),n&2&&ee("ngIf",o.widget)},dependencies:[gn,ME],styles:["[_nghost-%COMP%]   igo-dynamic-outlet[_ngcontent-%COMP%]{height:100%}"],changeDetection:0})}return r})(),l0e=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({imports:[nK]})}return r})(),c0e=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({providers:[iK],imports:[l0e,l0e]})}return r})();function q7e(r,i){if(r&1){let e=dt();zn(0),ne(1,"igo-widget-outlet",1),Ne(2,"async"),Ne(3,"async"),Oe("cancel",function(){let o=Re(e).ngIf,s=ae();return Fe(s.onWidgetCancel(o))})("complete",function(){let o=Re(e).ngIf,s=ae();return Fe(s.onWidgetComplete(o))}),ce(),Gn()}if(r&2){let e=i.ngIf,n=ae();q(),ee("widget",e)("inputs",je(2,3,n.widgetInputs$))("subscribers",je(3,5,n.widgetSubscribers$))}}var wj=class extends wd{activeWorkspace$=new mt(void 0);activateWorkspace(i){let e=this.activeWorkspace$.value;e!==void 0&&e.deactivate(),this.deactivateWorkspace(),i!==void 0&&(this.state.update(i,{active:!0,selected:!0},!0),this.activeWorkspace$.next(i),i.activate())}deactivateWorkspace(){let i=this.activeWorkspace$.value;i!==void 0&&(i.deactivate(),this.activeWorkspace$.next(void 0))}},DE=class{options;widget$=new mt(void 0);widgetInputs$=new mt({});widgetSubscribers$=new mt({});entities$$;change=new Dt;change$;get id(){return this.options.id}get title(){return this.options.title}get meta(){return this.options.meta||{}}get entityStore(){return this.options.entityStore}get actionStore(){return this.options.actionStore}get widget(){return this.widget$.value}get hasWidget(){return this.widget!==void 0}constructor(i){this.options=i}get active(){return this.active$.value}active$=new mt(!1);activate(){this.active===!0&&this.deactivate(),this.active$.next(!0),this.entityStore!==void 0&&(this.entities$$=this.entityStore.stateView.all$().subscribe(()=>this.onStateChange())),this.change.next()}deactivate(){this.active$.next(!1),this.deactivateWidget(),this.entities$$!==void 0&&this.entities$$.unsubscribe(),this.change$!==void 0&&this.change$.unsubscribe()}activateWidget(i,e={},n={}){this.widget$.next(i),this.widgetInputs$.next(e),this.widgetSubscribers$.next(n),this.change.next()}deactivateWidget(){this.widget$.next(void 0),this.change.next()}onStateChange(){this.change.next()}},Cj=(()=>{class r{store;disabled;selectedChange=new it;getWorkspaceTitle(e){return Im(e)}onSelectedChange(e){let n=e.value;this.store.activateWorkspace(n),this.selectedChange.emit({selected:!0,value:n})}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-workspace-selector"]],inputs:{store:"store",disabled:"disabled"},outputs:{selectedChange:"selectedChange"},standalone:!0,features:[yt],decls:1,vars:4,consts:[[3,"selectedChange","store","multi","titleAccessor","disabled"]],template:function(n,o){n&1&&(ne(0,"igo-entity-selector",0),Oe("selectedChange",function(l){return o.onSelectedChange(l)}),ce()),n&2&&ee("store",o.store)("multi",!1)("titleAccessor",o.getWorkspaceTitle)("disabled",o.disabled)},dependencies:[Xge],changeDetection:0})}return r})();var d0e=(()=>{class r{workspace;deactivateWidget=new it;get widget$(){return this.workspace.widget$}get widgetInputs$(){return this.workspace.widgetInputs$}get widgetSubscribers$(){return this.workspace.widgetSubscribers$}onWidgetCancel(e){this.workspace.deactivateWidget(),this.deactivateWidget.emit(e)}onWidgetComplete(e){this.workspace.deactivateWidget(),this.deactivateWidget.emit(e)}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-workspace-widget-outlet"]],inputs:{workspace:"workspace"},outputs:{deactivateWidget:"deactivateWidget"},standalone:!0,features:[yt],decls:2,vars:3,consts:[[4,"ngIf"],[3,"cancel","complete","widget","inputs","subscribers"]],template:function(n,o){n&1&&(We(0,q7e,4,7,"ng-container",0),Ne(1,"async")),n&2&&ee("ngIf",je(1,1,o.widget$))},dependencies:[gn,nK,kr],styles:["igo-widget-outlet[_ngcontent-%COMP%]{height:100%}"],changeDetection:0})}return r})();var Y7e=["button"],K7e=["*"];function Z7e(r,i){if(r&1&&wt(0,"mat-pseudo-checkbox",3),r&2){let e=ae();ee("disabled",e.disabled)}}function Q7e(r,i){if(r&1&&wt(0,"mat-pseudo-checkbox",3),r&2){let e=ae();ee("disabled",e.disabled)}}var rK=new At("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:X7e});function X7e(){return{hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1,disabledInteractive:!1}}var h0e=new At("MatButtonToggleGroup"),J7e={provide:Gc,useExisting:Go(()=>oK),multi:!0},p0e=0,xj=class{constructor(i,e){this.source=i,this.value=e}},oK=(()=>{class r{get name(){return this._name}set name(e){this._name=e,this._markButtonsForCheck()}get value(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(n=>n.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}get selected(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=e,this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markButtonsForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markButtonsForCheck()}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._markButtonsForCheck()}get hideMultipleSelectionIndicator(){return this._hideMultipleSelectionIndicator}set hideMultipleSelectionIndicator(e){this._hideMultipleSelectionIndicator=e,this._markButtonsForCheck()}constructor(e,n,o){this._changeDetector=e,this._dir=o,this._multiple=!1,this._disabled=!1,this._disabledInteractive=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name=`mat-button-toggle-group-${p0e++}`,this.valueChange=new it,this.change=new it,this.appearance=n&&n.appearance?n.appearance:"standard",this.hideSingleSelectionIndicator=n?.hideSingleSelectionIndicator??!1,this.hideMultipleSelectionIndicator=n?.hideMultipleSelectionIndicator??!1}ngOnInit(){this._selectionModel=new hv(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked)),this.multiple||this._initializeTabIndex()}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_keydown(e){if(this.multiple||this.disabled)return;let o=e.target.id,s=this._buttonToggles.toArray().findIndex(h=>h.buttonId===o),l=null;switch(e.keyCode){case 32:case 13:l=this._buttonToggles.get(s)||null;break;case 38:l=this._getNextButton(s,-1);break;case 37:l=this._getNextButton(s,this.dir==="ltr"?-1:1);break;case 40:l=this._getNextButton(s,1);break;case 39:l=this._getNextButton(s,this.dir==="ltr"?1:-1);break;default:return}l&&(e.preventDefault(),l._onButtonClick(),l.focus())}_emitChangeEvent(e){let n=new xj(e,this.value);this._rawValue=n.value,this._controlValueAccessorChangeFn(n.value),this.change.emit(n)}_syncButtonToggle(e,n,o=!1,s=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?n?this._selectionModel.select(e):this._selectionModel.deselect(e):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(e,o)):this._updateModelValue(e,o)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return typeof this._rawValue>"u"?!1:this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(n=>e.value!=null&&n===e.value):e.value===this._rawValue}_initializeTabIndex(){if(this._buttonToggles.forEach(e=>{e.tabIndex=-1}),this.selected)this.selected.tabIndex=0;else for(let e=0;e<this._buttonToggles.length;e++){let n=this._buttonToggles.get(e);if(!n.disabled){n.tabIndex=0;break}}this._markButtonsForCheck()}_getNextButton(e,n){let o=this._buttonToggles;for(let s=1;s<=o.length;s++){let l=(e+n*s+o.length)%o.length,h=o.get(l);if(h&&!h.disabled)return h}return null}_setSelectionByValue(e){this._rawValue=e,this._buttonToggles&&(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(n=>this._selectValue(n))):(this._clearSelection(),this._selectValue(e)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>{e.checked=!1,this.multiple||(e.tabIndex=-1)})}_selectValue(e){let n=this._buttonToggles.find(o=>o.value!=null&&o.value===e);n&&(n.checked=!0,this._selectionModel.select(n),this.multiple||(n.tabIndex=0))}_updateModelValue(e,n){n&&this._emitChangeEvent(e),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(e=>e._markForCheck())}static{this.\u0275fac=function(n){return new(n||r)(ie(Ti),ie(rK,8),ie(To,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["mat-button-toggle-group"]],contentQueries:function(n,o,s){if(n&1&&Sn(s,Sj,5),n&2){let l;Yt(l=Kt())&&(o._buttonToggles=l)}},hostAttrs:[1,"mat-button-toggle-group"],hostVars:6,hostBindings:function(n,o){n&1&&Oe("keydown",function(l){return o._keydown(l)}),n&2&&(yi("role",o.multiple?"group":"radiogroup")("aria-disabled",o.disabled),oi("mat-button-toggle-vertical",o.vertical)("mat-button-toggle-group-appearance-standard",o.appearance==="standard"))},inputs:{appearance:"appearance",name:"name",vertical:[2,"vertical","vertical",Xt],value:"value",multiple:[2,"multiple","multiple",Xt],disabled:[2,"disabled","disabled",Xt],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Xt],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Xt],hideMultipleSelectionIndicator:[2,"hideMultipleSelectionIndicator","hideMultipleSelectionIndicator",Xt]},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],standalone:!0,features:[Bi([J7e,{provide:h0e,useExisting:r}]),an]})}}return r})(),Sj=(()=>{class r{get buttonId(){return`${this.id}-button`}get tabIndex(){return this._tabIndex}set tabIndex(e){this._tabIndex=e,this._markForCheck()}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=e}get disabledInteractive(){return this._disabledInteractive||this.buttonToggleGroup!==null&&this.buttonToggleGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}constructor(e,n,o,s,l,h){this._changeDetectorRef=n,this._elementRef=o,this._focusMonitor=s,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new it;let p=Number(l);this.tabIndex=p||p===0?p:null,this.buttonToggleGroup=e,this.appearance=h&&h.appearance?h.appearance:"standard",this.disabledInteractive=h?.disabledInteractive??!1}ngOnInit(){let e=this.buttonToggleGroup;this.id=this.id||`mat-button-toggle-${p0e++}`,e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){let e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){if(this.disabled)return;let e=this.isSingleSelector()?!0:!this._checked;if(e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.isSingleSelector()){let n=this.buttonToggleGroup._buttonToggles.find(o=>o.tabIndex===0);n&&(n.tabIndex=-1),this.tabIndex=0}this.change.emit(new xj(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this.isSingleSelector()?this.buttonToggleGroup.name:this.name||null}isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}static{this.\u0275fac=function(n){return new(n||r)(ie(h0e,8),ie(Ti),ie(Ht),ie(il),oc("tabindex"),ie(rK,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-button-toggle"]],viewQuery:function(n,o){if(n&1&&Ni(Y7e,5),n&2){let s;Yt(s=Kt())&&(o._buttonElement=s.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:14,hostBindings:function(n,o){n&1&&Oe("focus",function(){return o.focus()}),n&2&&(yi("aria-label",null)("aria-labelledby",null)("id",o.id)("name",null),oi("mat-button-toggle-standalone",!o.buttonToggleGroup)("mat-button-toggle-checked",o.checked)("mat-button-toggle-disabled",o.disabled)("mat-button-toggle-disabled-interactive",o.disabledInteractive)("mat-button-toggle-appearance-standard",o.appearance==="standard"))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[2,"disableRipple","disableRipple",Xt],appearance:"appearance",checked:[2,"checked","checked",Xt],disabled:[2,"disabled","disabled",Xt],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Xt]},outputs:{change:"change"},exportAs:["matButtonToggle"],standalone:!0,features:[an,yt],ngContentSelectors:K7e,decls:8,vars:14,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-label-content"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(n,o){if(n&1){let s=dt();Qi(),ne(0,"button",1,0),Oe("click",function(){return Re(s),Fe(o._onButtonClick())}),ne(2,"span",2),We(3,Z7e,1,1,"mat-pseudo-checkbox",3)(4,Q7e,1,1,"mat-pseudo-checkbox",3),pi(5),ce()(),wt(6,"span",4)(7,"span",5)}if(n&2){let s=ji(1);ee("id",o.buttonId)("disabled",o.disabled&&!o.disabledInteractive||null),yi("role",o.isSingleSelector()?"radio":"button")("tabindex",o.disabled&&!o.disabledInteractive?-1:o.tabIndex)("aria-pressed",o.isSingleSelector()?null:o.checked)("aria-checked",o.isSingleSelector()?o.checked:null)("name",o._getButtonName())("aria-label",o.ariaLabel)("aria-labelledby",o.ariaLabelledby)("aria-disabled",o.disabled&&o.disabledInteractive?"true":null),q(3),vn(o.buttonToggleGroup&&o.checked&&!o.buttonToggleGroup.multiple&&!o.buttonToggleGroup.hideSingleSelectionIndicator?3:-1),q(),vn(o.buttonToggleGroup&&o.checked&&o.buttonToggleGroup.multiple&&!o.buttonToggleGroup.hideMultipleSelectionIndicator?4:-1),q(3),ee("matRippleTrigger",s)("matRippleDisabled",o.disableRipple||o.disabled)}},dependencies:[fd,aW],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full));border:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-app-on-secondary-container))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-label-text-font);font-size:var(--mat-legacy-button-toggle-label-text-size);line-height:var(--mat-legacy-button-toggle-label-text-line-height);font-weight:var(--mat-legacy-button-toggle-label-text-weight);letter-spacing:var(--mat-legacy-button-toggle-label-text-tracking);--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-legacy-button-toggle-selected-state-text-color)}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle .mat-pseudo-checkbox{margin-right:12px}[dir=rtl] .mat-button-toggle .mat-pseudo-checkbox{margin-right:0;margin-left:12px}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{pointer-events:none;color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color);--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-legacy-button-toggle-disabled-state-text-color)}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-disabled-interactive{pointer-events:auto}.mat-button-toggle-appearance-standard{color:var(--mat-standard-button-toggle-text-color, var(--mat-app-on-surface));background-color:var(--mat-standard-button-toggle-background-color);font-family:var(--mat-standard-button-toggle-label-text-font, var(--mat-app-label-large-font));font-size:var(--mat-standard-button-toggle-label-text-size, var(--mat-app-label-large-size));line-height:var(--mat-standard-button-toggle-label-text-line-height, var(--mat-app-label-large-line-height));font-weight:var(--mat-standard-button-toggle-label-text-weight, var(--mat-app-label-large-weight));letter-spacing:var(--mat-standard-button-toggle-label-text-tracking, var(--mat-app-label-large-tracking))}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-app-on-secondary-container));background-color:var(--mat-standard-button-toggle-selected-state-background-color, var(--mat-app-secondary-container))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-standard-button-toggle-disabled-selected-state-text-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color, var(--mat-app-on-surface))}.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-button-toggle-appearance-standard.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}@media(hover: none){.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full))}.mat-button-toggle-group-appearance-standard .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full));border-bottom-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full))}.mat-button-toggle-group-appearance-standard .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full));border-bottom-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full))}"],encapsulation:2,changeDetection:0})}}return r})(),m0e=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[on,Hh,Sj,on]})}}return r})();var tGe=new At("routeServiceOptions");var xS=(()=>{class r{router;route;options;constructor(e,n,o){this.router=e,this.route=n;let s={centerKey:"center",zoomKey:"zoom",projectionKey:"projection",contextKey:"context",searchKey:"search",visibleOnLayersKey:"visiblelayers",visibleOffLayersKey:"invisiblelayers",directionsCoordKey:"routing",directionsOptionsKey:"routingOptions",toolKey:"tool",wmsUrlKey:"wmsUrl",wmsLayersKey:"wmsLayers",wmtsUrlKey:"wmtsUrl",wmtsLayersKey:"wmtsLayers",arcgisUrlKey:"arcgisUrl",arcgisLayersKey:"arcgisLayers",iarcgisUrlKey:"iarcgisUrl",iarcgisLayersKey:"iarcgisLayers",tarcgisUrlKey:"tarcgisUrl",tarcgisLayersKey:"tarcgisLayers",vectorKey:"vector"};this.options=Object.assign({},s,o)}get queryParams(){let e=decodeURIComponent(location.search);if(e.includes("\xA2er=")){e=e.replace("\xA2er","&center");let n=e.slice(1).split("&").map(o=>o.split("=")).reduce((o,s)=>{let[l,h]=s.map(decodeURIComponent);return o[l]=h,o},{});this.router.navigate([],{queryParams:n})}return this.route.queryParams}static \u0275fac=function(n){return new(n||r)(xe(n_),xe(i_),xe(tGe,8))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var d1=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",g0e=d1.includes("firefox"),iGe=d1.includes("safari")&&!d1.includes("chrom"),bqt=iGe&&(d1.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(d1)),_0e=d1.includes("webkit")&&!d1.includes("edge"),MP=d1.includes("macintosh"),Ij=typeof devicePixelRatio<"u"?devicePixelRatio:1,Tj=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Aj=typeof Image<"u"&&Image.prototype.decode,y0e=typeof createImageBitmap=="function",Ej=function(){let r=!1;try{let i=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,i),window.removeEventListener("_",null,i)}catch{}return r}();var Dp={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};var sK=class{constructor(i){this.code_=i.code,this.units_=i.units,this.extent_=i.extent!==void 0?i.extent:null,this.worldExtent_=i.worldExtent!==void 0?i.worldExtent:null,this.axisOrientation_=i.axisOrientation!==void 0?i.axisOrientation:"enu",this.global_=i.global!==void 0?i.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=i.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=i.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Dp[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(i){this.global_=i,this.canWrapX_=!!(i&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(i){this.defaultTileGrid_=i}setExtent(i){this.extent_=i,this.canWrapX_=!!(this.global_&&i)}setWorldExtent(i){this.worldExtent_=i}setGetPointResolution(i){this.getPointResolutionFunc_=i}getPointResolutionFunc(){return this.getPointResolutionFunc_}},Cf=sK;var DP=6378137,kE=Math.PI*DP,nGe=[-kE,-kE,kE,kE],rGe=[-180,-85,180,85],Mj=DP*Math.log(Math.tan(Math.PI/2)),u1=class extends Cf{constructor(i){super({code:i,units:"m",extent:nGe,global:!0,worldExtent:rGe,getPointResolution:function(e,n){return e/Math.cosh(n[1]/DP)}})}},aK=[new u1("EPSG:3857"),new u1("EPSG:102100"),new u1("EPSG:102113"),new u1("EPSG:900913"),new u1("http://www.opengis.net/def/crs/EPSG/0/3857"),new u1("http://www.opengis.net/gml/srs/epsg.xml#3857")];function v0e(r,i,e){let n=r.length;e=e>1?e:2,i===void 0&&(e>2?i=r.slice():i=new Array(n));for(let o=0;o<n;o+=e){i[o]=kE*r[o]/180;let s=DP*Math.log(Math.tan(Math.PI*(+r[o+1]+90)/360));s>Mj?s=Mj:s<-Mj&&(s=-Mj),i[o+1]=s}return i}function b0e(r,i,e){let n=r.length;e=e>1?e:2,i===void 0&&(e>2?i=r.slice():i=new Array(n));for(let o=0;o<n;o+=e)i[o]=180*r[o]/kE,i[o+1]=360*Math.atan(Math.exp(r[o+1]/DP))/Math.PI-90;return i}var oGe=6378137,w0e=[-180,-90,180,90],sGe=Math.PI*oGe/180,Cv=class extends Cf{constructor(i,e){super({code:i,units:"degrees",extent:w0e,axisOrientation:e,global:!0,metersPerUnit:sGe,worldExtent:w0e})}},lK=[new Cv("CRS:84"),new Cv("EPSG:4326","neu"),new Cv("urn:ogc:def:crs:OGC:1.3:CRS84"),new Cv("urn:ogc:def:crs:OGC:2:84"),new Cv("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Cv("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Cv("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var cK={};function C0e(r){return cK[r]||cK[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function x0e(r,i){cK[r]=i}function xf(r){for(let i in r)delete r[i]}function Cd(r){let i;for(i in r)return!1;return!i}var OE={};function SS(r,i,e){let n=r.getCode(),o=i.getCode();n in OE||(OE[n]={}),OE[n][o]=e}function Dj(r,i){let e;return r in OE&&i in OE[r]&&(e=OE[r][i]),e}var Yc={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function mc(r){let i=Fs();for(let e=0,n=r.length;e<n;++e)IS(i,r[e]);return i}function aGe(r,i,e){let n=Math.min.apply(null,r),o=Math.min.apply(null,i),s=Math.max.apply(null,r),l=Math.max.apply(null,i);return Sd(n,o,s,l,e)}function xd(r,i,e){return e?(e[0]=r[0]-i,e[1]=r[1]-i,e[2]=r[2]+i,e[3]=r[3]+i,e):[r[0]-i,r[1]-i,r[2]+i,r[3]+i]}function Oj(r,i){return i?(i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i):r.slice()}function kp(r,i,e){let n,o;return i<r[0]?n=r[0]-i:r[2]<i?n=i-r[2]:n=0,e<r[1]?o=r[1]-e:r[3]<e?o=e-r[3]:o=0,n*n+o*o}function Mm(r,i){return kP(r,i[0],i[1])}function fc(r,i){return r[0]<=i[0]&&i[2]<=r[2]&&r[1]<=i[1]&&i[3]<=r[3]}function kP(r,i,e){return r[0]<=i&&i<=r[2]&&r[1]<=e&&e<=r[3]}function kj(r,i){let e=r[0],n=r[1],o=r[2],s=r[3],l=i[0],h=i[1],p=Yc.UNKNOWN;return l<e?p=p|Yc.LEFT:l>o&&(p=p|Yc.RIGHT),h<n?p=p|Yc.BELOW:h>s&&(p=p|Yc.ABOVE),p===Yc.UNKNOWN&&(p=Yc.INTERSECTING),p}function Fs(){return[1/0,1/0,-1/0,-1/0]}function Sd(r,i,e,n,o){return o?(o[0]=r,o[1]=i,o[2]=e,o[3]=n,o):[r,i,e,n]}function xv(r){return Sd(1/0,1/0,-1/0,-1/0,r)}function T_(r,i){let e=r[0],n=r[1];return Sd(e,n,e,n,i)}function PE(r,i,e,n,o){let s=xv(o);return dK(s,r,i,e,n)}function Dm(r,i){return r[0]==i[0]&&r[2]==i[2]&&r[1]==i[1]&&r[3]==i[3]}function h1(r,i){return i[0]<r[0]&&(r[0]=i[0]),i[2]>r[2]&&(r[2]=i[2]),i[1]<r[1]&&(r[1]=i[1]),i[3]>r[3]&&(r[3]=i[3]),r}function IS(r,i){i[0]<r[0]&&(r[0]=i[0]),i[0]>r[2]&&(r[2]=i[0]),i[1]<r[1]&&(r[1]=i[1]),i[1]>r[3]&&(r[3]=i[1])}function dK(r,i,e,n,o){for(;e<n;e+=o)lGe(r,i[e],i[e+1]);return r}function lGe(r,i,e){r[0]=Math.min(r[0],i),r[1]=Math.min(r[1],e),r[2]=Math.max(r[2],i),r[3]=Math.max(r[3],e)}function RE(r,i){let e;return e=i(TS(r)),e||(e=i(AS(r)),e)||(e=i(ES(r)),e)||(e=i(Cu(r)),e)?e:!1}function p1(r){let i=0;return km(r)||(i=or(r)*is(r)),i}function TS(r){return[r[0],r[1]]}function AS(r){return[r[2],r[1]]}function gc(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function S0e(r,i){let e;if(i==="bottom-left")e=TS(r);else if(i==="bottom-right")e=AS(r);else if(i==="top-left")e=Cu(r);else if(i==="top-right")e=ES(r);else throw new Error("Invalid corner");return e}function Ug(r,i,e,n,o){let[s,l,h,p,m,f,g,y]=Pj(r,i,e,n);return Sd(Math.min(s,h,m,g),Math.min(l,p,f,y),Math.max(s,h,m,g),Math.max(l,p,f,y),o)}function Pj(r,i,e,n){let o=i*n[0]/2,s=i*n[1]/2,l=Math.cos(e),h=Math.sin(e),p=o*l,m=o*h,f=s*l,g=s*h,y=r[0],_=r[1];return[y-p+g,_-m-f,y-p-g,_-m+f,y+p-g,_+m+f,y+p+g,_+m-f,y-p+g,_-m-f]}function is(r){return r[3]-r[1]}function ch(r,i,e){let n=e||Fs();return Wo(r,i)?(r[0]>i[0]?n[0]=r[0]:n[0]=i[0],r[1]>i[1]?n[1]=r[1]:n[1]=i[1],r[2]<i[2]?n[2]=r[2]:n[2]=i[2],r[3]<i[3]?n[3]=r[3]:n[3]=i[3]):xv(n),n}function I0e(r){return[r[2]-r[0],r[3]-r[1]]}function Cu(r){return[r[0],r[3]]}function ES(r){return[r[2],r[3]]}function or(r){return r[2]-r[0]}function Wo(r,i){return r[0]<=i[2]&&r[2]>=i[0]&&r[1]<=i[3]&&r[3]>=i[1]}function km(r){return r[2]<r[0]||r[3]<r[1]}function T0e(r,i){return i?(i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i):r}function A0e(r,i,e){let n=!1,o=kj(r,i),s=kj(r,e);if(o===Yc.INTERSECTING||s===Yc.INTERSECTING)n=!0;else{let l=r[0],h=r[1],p=r[2],m=r[3],f=i[0],g=i[1],y=e[0],_=e[1],w=(_-g)/(y-f),A,k;s&Yc.ABOVE&&!(o&Yc.ABOVE)&&(A=y-(_-m)/w,n=A>=l&&A<=p),!n&&s&Yc.RIGHT&&!(o&Yc.RIGHT)&&(k=_-(y-p)*w,n=k>=h&&k<=m),!n&&s&Yc.BELOW&&!(o&Yc.BELOW)&&(A=y-(_-h)/w,n=A>=l&&A<=p),!n&&s&Yc.LEFT&&!(o&Yc.LEFT)&&(k=_-(y-l)*w,n=k>=h&&k<=m)}return n}function E0e(r,i,e,n){if(km(r))return xv(e);let o=[];if(n>1){let h=r[2]-r[0],p=r[3]-r[1];for(let m=0;m<n;++m)o.push(r[0]+h*m/n,r[1],r[2],r[1]+p*m/n,r[2]-h*m/n,r[3],r[0],r[3]-p*m/n)}else o=[r[0],r[1],r[2],r[1],r[2],r[3],r[0],r[3]];i(o,o,2);let s=[],l=[];for(let h=0,p=o.length;h<p;h+=2)s.push(o[h]),l.push(o[h+1]);return aGe(s,l,e)}function uK(r,i){let e=i.getExtent(),n=gc(r);if(i.canWrapX()&&(n[0]<e[0]||n[0]>=e[2])){let o=or(e),l=Math.floor((n[0]-e[0])/o)*o;r[0]-=l,r[2]-=l}return r}function M0e(r,i){if(i.canWrapX()){let e=i.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[e[0],r[1],e[2],r[3]]];uK(r,i);let n=or(e);if(or(r)>n)return[[e[0],r[1],e[2],r[3]]];if(r[0]<e[0])return[[r[0]+n,r[1],e[2],r[3]],[e[0],r[1],r[2],r[3]]];if(r[2]>e[2])return[[r[0],r[1],e[2],r[3]],[e[0],r[1],r[2]-n,r[3]]]}return[r]}function ss(r,i,e){return Math.min(Math.max(r,i),e)}function D0e(r,i,e,n,o,s){let l=o-e,h=s-n;if(l!==0||h!==0){let p=((r-e)*l+(i-n)*h)/(l*l+h*h);p>1?(e=o,n=s):p>0&&(e+=l*p,n+=h*p)}return Op(r,i,e,n)}function Op(r,i,e,n){let o=e-r,s=n-i;return o*o+s*s}function k0e(r){let i=r.length;for(let n=0;n<i;n++){let o=n,s=Math.abs(r[n][n]);for(let h=n+1;h<i;h++){let p=Math.abs(r[h][n]);p>s&&(s=p,o=h)}if(s===0)return null;let l=r[o];r[o]=r[n],r[n]=l;for(let h=n+1;h<i;h++){let p=-r[h][n]/r[n][n];for(let m=n;m<i+1;m++)n==m?r[h][m]=0:r[h][m]+=p*r[n][m]}}let e=new Array(i);for(let n=i-1;n>=0;n--){e[n]=r[n][i]/r[n][n];for(let o=n-1;o>=0;o--)r[o][i]-=r[o][n]*e[n]}return e}function hK(r){return r*180/Math.PI}function Sf(r){return r*Math.PI/180}function Pp(r,i){let e=r%i;return e*i<0?e+i:e}function xu(r,i,e){return r+e*(i-r)}function MS(r,i){let e=Math.pow(10,i);return Math.round(r*e)/e}function FE(r,i){return Math.round(MS(r,i))}function m1(r,i){return Math.floor(MS(r,i))}function A_(r,i){return Math.ceil(MS(r,i))}function LE(r,i,e){let n=e!==void 0?r.toFixed(e):""+r,o=n.indexOf(".");return o=o===-1?n.length:o,o>i?n:new Array(1+i-o).join("0")+n}function pK(r,i){let e=(""+r).split("."),n=(""+i).split(".");for(let o=0;o<Math.max(e.length,n.length);o++){let s=parseInt(e[o]||"0",10),l=parseInt(n[o]||"0",10);if(s>l)return 1;if(l>s)return-1}return 0}function Rj(r,i){return r[0]+=+i[0],r[1]+=+i[1],r}function mK(r,i){let e=r[0],n=r[1],o=i[0],s=i[1],l=o[0],h=o[1],p=s[0],m=s[1],f=p-l,g=m-h,y=f===0&&g===0?0:(f*(e-l)+g*(n-h))/(f*f+g*g||0),_,w;return y<=0?(_=l,w=h):y>=1?(_=p,w=m):(_=l+y*f,w=h+y*g),[_,w]}function Jh(r,i){let e=!0;for(let n=r.length-1;n>=0;--n)if(r[n]!=i[n]){e=!1;break}return e}function NE(r,i){let e=Math.cos(i),n=Math.sin(i),o=r[0]*e-r[1]*n,s=r[1]*e+r[0]*n;return r[0]=o,r[1]=s,r}function Fj(r,i){return r[0]*=i,r[1]*=i,r}function f1(r,i){let e=r[0]-i[0],n=r[1]-i[1];return e*e+n*n}function g1(r,i){return Math.sqrt(f1(r,i))}function O0e(r,i){return f1(r,mK(r,i))}function BE(r,i){if(i.canWrapX()){let e=or(i.getExtent()),n=fK(r,i,e);n&&(r[0]-=n*e)}return r}function fK(r,i,e){let n=i.getExtent(),o=0;return i.canWrapX()&&(r[0]<n[0]||r[0]>n[2])&&(e=e||or(n),o=Math.floor((r[0]-n[0])/e)),o}var P0e=63710088e-1;function OP(r,i,e){e=e||P0e;let n=Sf(r[1]),o=Sf(i[1]),s=(o-n)/2,l=Sf(i[0]-r[0])/2,h=Math.sin(s)*Math.sin(s)+Math.sin(l)*Math.sin(l)*Math.cos(n)*Math.cos(o);return 2*e*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function R0e(r,i,e,n){n=n||P0e;let o=Sf(r[1]),s=Sf(r[0]),l=i/n,h=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(e)),p=s+Math.atan2(Math.sin(e)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(h));return[hK(p),hK(h)]}var F0e={info:1,warn:2,error:3,none:4},uGe=F0e.info;function Lj(...r){uGe>F0e.warn||console.warn(...r)}var gK=!0;function _K(r){gK=!(r===void 0?!0:r)}function yK(r,i){if(i!==void 0){for(let e=0,n=r.length;e<n;++e)i[e]=r[e];i=i}else i=r.slice();return i}function Bj(r,i){if(i!==void 0&&r!==i){for(let e=0,n=r.length;e<n;++e)i[e]=r[e];r=i}return r}function vK(r){x0e(r.getCode(),r),SS(r,r,yK)}function hGe(r){r.forEach(vK)}function Vi(r){return typeof r=="string"?C0e(r):r||null}function DS(r,i,e,n){r=Vi(r);let o,s=r.getPointResolutionFunc();if(s){if(o=s(i,e),n&&n!==r.getUnits()){let l=r.getMetersPerUnit();l&&(o=o*l/Dp[n])}}else{let l=r.getUnits();if(l=="degrees"&&!n||n=="degrees")o=i;else{let h=Gg(r,Vi("EPSG:4326"));if(h===Bj&&l!=="degrees")o=i*r.getMetersPerUnit();else{let m=[e[0]-i/2,e[1],e[0]+i/2,e[1],e[0],e[1]-i/2,e[0],e[1]+i/2];m=h(m,m,2);let f=OP(m.slice(0,2),m.slice(2,4)),g=OP(m.slice(4,6),m.slice(6,8));o=(f+g)/2}let p=n?Dp[n]:r.getMetersPerUnit();p!==void 0&&(o/=p)}}return o}function Nj(r){hGe(r),r.forEach(function(i){r.forEach(function(e){i!==e&&SS(i,e,yK)})})}function pGe(r,i,e,n){r.forEach(function(o){i.forEach(function(s){SS(o,s,e),SS(s,o,n)})})}function jj(r,i){return r?typeof r=="string"?Vi(r):r:Vi(i)}function L0e(r){return function(i,e,n){let o=i.length;n=n!==void 0?n:2,e=e!==void 0?e:new Array(o);for(let s=0;s<o;s+=n){let l=r(i.slice(s,s+n)),h=l.length;for(let p=0,m=n;p<m;++p)e[s+p]=p>=h?i[s+p]:l[p]}return e}}function N0e(r,i,e,n){let o=Vi(r),s=Vi(i);SS(o,s,L0e(e)),SS(s,o,L0e(n))}function jE(r,i){return _K(),us(r,"EPSG:4326",i!==void 0?i:"EPSG:3857")}function qd(r,i){if(r===i)return!0;let e=r.getUnits()===i.getUnits();return(r.getCode()===i.getCode()||Gg(r,i)===yK)&&e}function Gg(r,i){let e=r.getCode(),n=i.getCode(),o=Dj(e,n);return o||(o=Bj),o}function Sv(r,i){let e=Vi(r),n=Vi(i);return Gg(e,n)}function us(r,i,e){return Sv(i,e)(r,void 0,r.length)}function Su(r,i,e,n){let o=Sv(i,e);return E0e(r,o,void 0,n)}var zg=null;function Kc(){return zg}function Iv(r,i){return zg?us(r,i,zg):r}function Ta(r,i){return zg?us(r,zg,i):(gK&&!Jh(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(gK=!1,Lj("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r)}function E_(r,i){return zg?Su(r,i,zg):r}function dh(r,i){return zg?Su(r,zg,i):r}function B0e(r,i){if(!zg)return r;let e=Vi(i).getMetersPerUnit(),n=zg.getMetersPerUnit();return e&&n?r*e/n:r}function bK(r,i,e){return function(n){let o,s;if(r.canWrapX()){let l=r.getExtent(),h=or(l);n=n.slice(0),s=fK(n,r,h),s&&(n[0]=n[0]-s*h),n[0]=ss(n[0],l[0],l[2]),n[1]=ss(n[1],l[1],l[3]),o=e(n)}else o=e(n);return s&&i.canWrapX()&&(o[0]+=s*or(i.getExtent())),o}}function mGe(){Nj(aK),Nj(lK),pGe(lK,aK,v0e,b0e)}mGe();var ub=ld(EDe(),1);var uh=Uint8Array,Om=Uint16Array,EK=Int32Array,$j=new uh([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Uj=new uh([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),SK=new uh([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),U0e=function(r,i){for(var e=new Om(31),n=0;n<31;++n)e[n]=i+=1<<r[n-1];for(var o=new EK(e[30]),n=1;n<30;++n)for(var s=e[n];s<e[n+1];++s)o[s]=s-e[n]<<5|n;return{b:e,r:o}},z0e=U0e($j,2),G0e=z0e.b,IK=z0e.r;G0e[28]=258,IK[258]=28;var H0e=U0e(Uj,0),fGe=H0e.b,j0e=H0e.r,TK=new Om(32768);for(ws=0;ws<32768;++ws)Tv=(ws&43690)>>1|(ws&21845)<<1,Tv=(Tv&52428)>>2|(Tv&13107)<<2,Tv=(Tv&61680)>>4|(Tv&3855)<<4,TK[ws]=((Tv&65280)>>8|(Tv&255)<<8)>>1;var Tv,ws,M_=function(r,i,e){for(var n=r.length,o=0,s=new Om(i);o<n;++o)r[o]&&++s[r[o]-1];var l=new Om(i);for(o=1;o<i;++o)l[o]=l[o-1]+s[o-1]<<1;var h;if(e){h=new Om(1<<i);var p=15-i;for(o=0;o<n;++o)if(r[o])for(var m=o<<4|r[o],f=i-r[o],g=l[r[o]-1]++<<f,y=g|(1<<f)-1;g<=y;++g)h[TK[g]>>p]=m}else for(h=new Om(n),o=0;o<n;++o)r[o]&&(h[o]=TK[l[r[o]-1]++]>>15-r[o]);return h},_1=new uh(288);for(ws=0;ws<144;++ws)_1[ws]=8;var ws;for(ws=144;ws<256;++ws)_1[ws]=9;var ws;for(ws=256;ws<280;++ws)_1[ws]=7;var ws;for(ws=280;ws<288;++ws)_1[ws]=8;var ws,FP=new uh(32);for(ws=0;ws<32;++ws)FP[ws]=5;var ws,gGe=M_(_1,9,0),_Ge=M_(_1,9,1),yGe=M_(FP,5,0),vGe=M_(FP,5,1),wK=function(r){for(var i=r[0],e=1;e<r.length;++e)r[e]>i&&(i=r[e]);return i},Hg=function(r,i,e){var n=i/8|0;return(r[n]|r[n+1]<<8)>>(i&7)&e},CK=function(r,i){var e=i/8|0;return(r[e]|r[e+1]<<8|r[e+2]<<16)>>(i&7)},MK=function(r){return(r+7)/8|0},W0e=function(r,i,e){return(i==null||i<0)&&(i=0),(e==null||e>r.length)&&(e=r.length),new uh(r.subarray(i,e))};var bGe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Wg=function(r,i,e){var n=new Error(i||bGe[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,Wg),!e)throw n;return n},wGe=function(r,i,e,n){var o=r.length,s=n?n.length:0;if(!o||i.f&&!i.l)return e||new uh(0);var l=!e,h=l||i.i!=2,p=i.i;l&&(e=new uh(o*3));var m=function(Tt){var me=e.length;if(Tt>me){var Ct=new uh(Math.max(me*2,Tt));Ct.set(e),e=Ct}},f=i.f||0,g=i.p||0,y=i.b||0,_=i.l,w=i.d,A=i.m,k=i.n,R=o*8;do{if(!_){f=Hg(r,g,1);var $=Hg(r,g+1,3);if(g+=3,$)if($==1)_=_Ge,w=vGe,A=9,k=5;else if($==2){var ge=Hg(r,g,31)+257,ue=Hg(r,g+10,15)+4,pe=ge+Hg(r,g+5,31)+1;g+=14;for(var Ce=new uh(pe),_e=new uh(19),de=0;de<ue;++de)_e[SK[de]]=Hg(r,g+de*3,7);g+=ue*3;for(var te=wK(_e),Se=(1<<te)-1,Te=M_(_e,te,1),de=0;de<pe;){var De=Te[Hg(r,g,Se)];g+=De&15;var H=De>>4;if(H<16)Ce[de++]=H;else{var Le=0,Me=0;for(H==16?(Me=3+Hg(r,g,3),g+=2,Le=Ce[de-1]):H==17?(Me=3+Hg(r,g,7),g+=3):H==18&&(Me=11+Hg(r,g,127),g+=7);Me--;)Ce[de++]=Le}}var ze=Ce.subarray(0,ge),Ve=Ce.subarray(ge);A=wK(ze),k=wK(Ve),_=M_(ze,A,1),w=M_(Ve,k,1)}else Wg(1);else{var H=MK(g)+4,oe=r[H-4]|r[H-3]<<8,se=H+oe;if(se>o){p&&Wg(0);break}h&&m(y+oe),e.set(r.subarray(H,se),y),i.b=y+=oe,i.p=g=se*8,i.f=f;continue}if(g>R){p&&Wg(0);break}}h&&m(y+131072);for(var $e=(1<<A)-1,nt=(1<<k)-1,be=g;;be=g){var Le=_[CK(r,g)&$e],we=Le>>4;if(g+=Le&15,g>R){p&&Wg(0);break}if(Le||Wg(2),we<256)e[y++]=we;else if(we==256){be=g,_=null;break}else{var ke=we-254;if(we>264){var de=we-257,et=$j[de];ke=Hg(r,g,(1<<et)-1)+G0e[de],g+=et}var Qe=w[CK(r,g)&nt],at=Qe>>4;Qe||Wg(3),g+=Qe&15;var Ve=fGe[at];if(at>3){var et=Uj[at];Ve+=CK(r,g)&(1<<et)-1,g+=et}if(g>R){p&&Wg(0);break}h&&m(y+131072);var _t=y+ke;if(y<Ve){var ht=s-Ve,Zt=Math.min(Ve,_t);for(ht+y<0&&Wg(3);y<Zt;++y)e[y]=n[ht+y]}for(;y<_t;++y)e[y]=e[y-Ve]}}i.l=_,i.p=be,i.b=y,i.f=f,_&&(f=1,i.m=A,i.d=w,i.n=k)}while(!f);return y!=e.length&&l?W0e(e,0,y):e.subarray(0,y)},Av=function(r,i,e){e<<=i&7;var n=i/8|0;r[n]|=e,r[n+1]|=e>>8},PP=function(r,i,e){e<<=i&7;var n=i/8|0;r[n]|=e,r[n+1]|=e>>8,r[n+2]|=e>>16},xK=function(r,i){for(var e=[],n=0;n<r.length;++n)r[n]&&e.push({s:n,f:r[n]});var o=e.length,s=e.slice();if(!o)return{t:Y0e,l:0};if(o==1){var l=new uh(e[0].s+1);return l[e[0].s]=1,{t:l,l:1}}e.sort(function(se,ge){return se.f-ge.f}),e.push({s:-1,f:25001});var h=e[0],p=e[1],m=0,f=1,g=2;for(e[0]={s:-1,f:h.f+p.f,l:h,r:p};f!=o-1;)h=e[e[m].f<e[g].f?m++:g++],p=e[m!=f&&e[m].f<e[g].f?m++:g++],e[f++]={s:-1,f:h.f+p.f,l:h,r:p};for(var y=s[0].s,n=1;n<o;++n)s[n].s>y&&(y=s[n].s);var _=new Om(y+1),w=AK(e[f-1],_,0);if(w>i){var n=0,A=0,k=w-i,R=1<<k;for(s.sort(function(ge,ue){return _[ue.s]-_[ge.s]||ge.f-ue.f});n<o;++n){var $=s[n].s;if(_[$]>i)A+=R-(1<<w-_[$]),_[$]=i;else break}for(A>>=k;A>0;){var H=s[n].s;_[H]<i?A-=1<<i-_[H]++-1:++n}for(;n>=0&&A;--n){var oe=s[n].s;_[oe]==i&&(--_[oe],++A)}w=i}return{t:new uh(_),l:w}},AK=function(r,i,e){return r.s==-1?Math.max(AK(r.l,i,e+1),AK(r.r,i,e+1)):i[r.s]=e},V0e=function(r){for(var i=r.length;i&&!r[--i];);for(var e=new Om(++i),n=0,o=r[0],s=1,l=function(p){e[n++]=p},h=1;h<=i;++h)if(r[h]==o&&h!=i)++s;else{if(!o&&s>2){for(;s>138;s-=138)l(32754);s>2&&(l(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(l(o),--s;s>6;s-=6)l(8304);s>2&&(l(s-3<<5|8208),s=0)}for(;s--;)l(o);s=1,o=r[h]}return{c:e.subarray(0,n),n:i}},RP=function(r,i){for(var e=0,n=0;n<i.length;++n)e+=r[n]*i[n];return e},q0e=function(r,i,e){var n=e.length,o=MK(i+2);r[o]=n&255,r[o+1]=n>>8,r[o+2]=r[o]^255,r[o+3]=r[o+1]^255;for(var s=0;s<n;++s)r[o+s+4]=e[s];return(o+4+n)*8},$0e=function(r,i,e,n,o,s,l,h,p,m,f){Av(i,f++,e),++o[256];for(var g=xK(o,15),y=g.t,_=g.l,w=xK(s,15),A=w.t,k=w.l,R=V0e(y),$=R.c,H=R.n,oe=V0e(A),se=oe.c,ge=oe.n,ue=new Om(19),pe=0;pe<$.length;++pe)++ue[$[pe]&31];for(var pe=0;pe<se.length;++pe)++ue[se[pe]&31];for(var Ce=xK(ue,7),_e=Ce.t,de=Ce.l,te=19;te>4&&!_e[SK[te-1]];--te);var Se=m+5<<3,Te=RP(o,_1)+RP(s,FP)+l,De=RP(o,y)+RP(s,A)+l+14+3*te+RP(ue,_e)+2*ue[16]+3*ue[17]+7*ue[18];if(p>=0&&Se<=Te&&Se<=De)return q0e(i,f,r.subarray(p,p+m));var Le,Me,ze,Ve;if(Av(i,f,1+(De<Te)),f+=2,De<Te){Le=M_(y,_,0),Me=y,ze=M_(A,k,0),Ve=A;var $e=M_(_e,de,0);Av(i,f,H-257),Av(i,f+5,ge-1),Av(i,f+10,te-4),f+=14;for(var pe=0;pe<te;++pe)Av(i,f+3*pe,_e[SK[pe]]);f+=3*te;for(var nt=[$,se],be=0;be<2;++be)for(var we=nt[be],pe=0;pe<we.length;++pe){var ke=we[pe]&31;Av(i,f,$e[ke]),f+=_e[ke],ke>15&&(Av(i,f,we[pe]>>5&127),f+=we[pe]>>12)}}else Le=gGe,Me=_1,ze=yGe,Ve=FP;for(var pe=0;pe<h;++pe){var et=n[pe];if(et>255){var ke=et>>18&31;PP(i,f,Le[ke+257]),f+=Me[ke+257],ke>7&&(Av(i,f,et>>23&31),f+=$j[ke]);var Qe=et&31;PP(i,f,ze[Qe]),f+=Ve[Qe],Qe>3&&(PP(i,f,et>>5&8191),f+=Uj[Qe])}else PP(i,f,Le[et]),f+=Me[et]}return PP(i,f,Le[256]),f+Me[256]},CGe=new EK([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Y0e=new uh(0),xGe=function(r,i,e,n,o,s){var l=s.z||r.length,h=new uh(n+l+5*(1+Math.ceil(l/7e3))+o),p=h.subarray(n,h.length-o),m=s.l,f=(s.r||0)&7;if(i){f&&(p[0]=s.r>>3);for(var g=CGe[i-1],y=g>>13,_=g&8191,w=(1<<e)-1,A=s.p||new Om(32768),k=s.h||new Om(w+1),R=Math.ceil(e/3),$=2*R,H=function(pt){return(r[pt]^r[pt+1]<<R^r[pt+2]<<$)&w},oe=new EK(25e3),se=new Om(288),ge=new Om(32),ue=0,pe=0,Ce=s.i||0,_e=0,de=s.w||0,te=0;Ce+2<l;++Ce){var Se=H(Ce),Te=Ce&32767,De=k[Se];if(A[Te]=De,k[Se]=Te,de<=Ce){var Le=l-Ce;if((ue>7e3||_e>24576)&&(Le>423||!m)){f=$0e(r,p,0,oe,se,ge,pe,_e,te,Ce-te,f),_e=ue=pe=0,te=Ce;for(var Me=0;Me<286;++Me)se[Me]=0;for(var Me=0;Me<30;++Me)ge[Me]=0}var ze=2,Ve=0,$e=_,nt=Te-De&32767;if(Le>2&&Se==H(Ce-nt))for(var be=Math.min(y,Le)-1,we=Math.min(32767,Ce),ke=Math.min(258,Le);nt<=we&&--$e&&Te!=De;){if(r[Ce+ze]==r[Ce+ze-nt]){for(var et=0;et<ke&&r[Ce+et]==r[Ce+et-nt];++et);if(et>ze){if(ze=et,Ve=nt,et>be)break;for(var Qe=Math.min(nt,et-2),at=0,Me=0;Me<Qe;++Me){var _t=Ce-nt+Me&32767,ht=A[_t],Zt=_t-ht&32767;Zt>at&&(at=Zt,De=_t)}}}Te=De,De=A[Te],nt+=Te-De&32767}if(Ve){oe[_e++]=268435456|IK[ze]<<18|j0e[Ve];var Tt=IK[ze]&31,me=j0e[Ve]&31;pe+=$j[Tt]+Uj[me],++se[257+Tt],++ge[me],de=Ce+ze,++ue}else oe[_e++]=r[Ce],++se[r[Ce]]}}for(Ce=Math.max(Ce,de);Ce<l;++Ce)oe[_e++]=r[Ce],++se[r[Ce]];f=$0e(r,p,m,oe,se,ge,pe,_e,te,Ce-te,f),m||(s.r=f&7|p[f/8|0]<<3,f-=7,s.h=k,s.p=A,s.i=Ce,s.w=de)}else{for(var Ce=s.w||0;Ce<l+m;Ce+=65535){var Ct=Ce+65535;Ct>=l&&(p[f/8|0]=m,Ct=l),f=q0e(p,f+1,r.subarray(Ce,Ct))}s.i=l}return W0e(h,0,n+MK(f)+o)};var K0e=function(){var r=1,i=0;return{p:function(e){for(var n=r,o=i,s=e.length|0,l=0;l!=s;){for(var h=Math.min(l+2655,s);l<h;++l)o+=n+=e[l];n=(n&65535)+15*(n>>16),o=(o&65535)+15*(o>>16)}r=n,i=o},d:function(){return r%=65521,i%=65521,(r&255)<<24|(r&65280)<<8|(i&255)<<8|i>>8}}},SGe=function(r,i,e,n,o){if(!o&&(o={l:1},i.dictionary)){var s=i.dictionary.subarray(-32768),l=new uh(s.length+r.length);l.set(s),l.set(r,s.length),r=l,o.w=s.length}return xGe(r,i.level==null?6:i.level,i.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+i.mem,e,n,o)};var Z0e=function(r,i,e){for(;e;++i)r[i]=e,e>>>=8};var IGe=function(r,i){var e=i.level,n=e==0?0:e<6?1:e==9?3:2;if(r[0]=120,r[1]=n<<6|(i.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,i.dictionary){var o=K0e();o.p(i.dictionary),Z0e(r,2,o.d())}},TGe=function(r,i){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&Wg(6,"invalid zlib data"),(r[1]>>5&1)==+!i&&Wg(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2};function zj(r,i){i||(i={});var e=K0e();e.p(r);var n=SGe(r,i,i.dictionary?6:2,4);return IGe(n,i),Z0e(n,n.length-4,e.d()),n}function Q0e(r,i){return wGe(r.subarray(TGe(r,i&&i.dictionary),-4),{i:2},i&&i.out,i&&i.dictionary)}var AGe=typeof TextDecoder<"u"&&new TextDecoder,EGe=0;try{AGe.decode(Y0e,{stream:!0}),EGe=1}catch{}var Mr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function DK(){Mr.console&&typeof Mr.console.log=="function"&&Mr.console.log.apply(Mr.console,arguments)}var Za={log:DK,warn:function(r){Mr.console&&(typeof Mr.console.warn=="function"?Mr.console.warn.apply(Mr.console,arguments):DK.call(null,arguments))},error:function(r){Mr.console&&(typeof Mr.console.error=="function"?Mr.console.error.apply(Mr.console,arguments):DK(r))}};function kK(r,i,e){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){kS(n.response,i,e)},n.onerror=function(){Za.error("could not download file")},n.send()}function X0e(r){var i=new XMLHttpRequest;i.open("HEAD",r,!1);try{i.send()}catch{}return i.status>=200&&i.status<=299}function Gj(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(i)}}var LP,LK,kS=Mr.saveAs||((typeof window>"u"?"undefined":pa(window))!=="object"||window!==Mr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,i,e){var n=Mr.URL||Mr.webkitURL,o=document.createElement("a");i=i||r.name||"download",o.download=i,o.rel="noopener",typeof r=="string"?(o.href=r,o.origin!==location.origin?X0e(o.href)?kK(r,i,e):Gj(o,o.target="_blank"):Gj(o)):(o.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(o.href)},4e4),setTimeout(function(){Gj(o)},0))}:"msSaveOrOpenBlob"in navigator?function(r,i,e){if(i=i||r.name||"download",typeof r=="string")if(X0e(r))kK(r,i,e);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){Gj(n)})}else navigator.msSaveOrOpenBlob(function(o,s){return s===void 0?s={autoBom:!1}:pa(s)!=="object"&&(Za.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(r,e),i)}:function(r,i,e,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return kK(r,i,e);var o=r.type==="application/octet-stream",s=/constructor/i.test(Mr.HTMLElement)||Mr.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&s)&&(typeof FileReader>"u"?"undefined":pa(FileReader))==="object"){var h=new FileReader;h.onloadend=function(){var f=h.result;f=l?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},h.readAsDataURL(r)}else{var p=Mr.URL||Mr.webkitURL,m=p.createObjectURL(r);n?n.location=m:location.href=m,n=null,setTimeout(function(){p.revokeObjectURL(m)},4e4)}});function f_e(r){var i;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(h){return[parseInt(h[1]),parseInt(h[2]),parseInt(h[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(h){return[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(h){return[parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16),parseInt(h[3]+h[3],16)]}}],n=0;n<e.length;n++){var o=e[n].re,s=e[n].process,l=o.exec(r);l&&(i=s(l),this.r=i[0],this.g=i[1],this.b=i[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var h=this.r.toString(16),p=this.g.toString(16),m=this.b.toString(16);return h.length==1&&(h="0"+h),p.length==1&&(p="0"+p),m.length==1&&(m="0"+m),"#"+h+p+m}}function OK(r,i){var e=r[0],n=r[1],o=r[2],s=r[3];e=hh(e,n,o,s,i[0],7,-680876936),s=hh(s,e,n,o,i[1],12,-389564586),o=hh(o,s,e,n,i[2],17,606105819),n=hh(n,o,s,e,i[3],22,-1044525330),e=hh(e,n,o,s,i[4],7,-176418897),s=hh(s,e,n,o,i[5],12,1200080426),o=hh(o,s,e,n,i[6],17,-1473231341),n=hh(n,o,s,e,i[7],22,-45705983),e=hh(e,n,o,s,i[8],7,1770035416),s=hh(s,e,n,o,i[9],12,-1958414417),o=hh(o,s,e,n,i[10],17,-42063),n=hh(n,o,s,e,i[11],22,-1990404162),e=hh(e,n,o,s,i[12],7,1804603682),s=hh(s,e,n,o,i[13],12,-40341101),o=hh(o,s,e,n,i[14],17,-1502002290),e=ph(e,n=hh(n,o,s,e,i[15],22,1236535329),o,s,i[1],5,-165796510),s=ph(s,e,n,o,i[6],9,-1069501632),o=ph(o,s,e,n,i[11],14,643717713),n=ph(n,o,s,e,i[0],20,-373897302),e=ph(e,n,o,s,i[5],5,-701558691),s=ph(s,e,n,o,i[10],9,38016083),o=ph(o,s,e,n,i[15],14,-660478335),n=ph(n,o,s,e,i[4],20,-405537848),e=ph(e,n,o,s,i[9],5,568446438),s=ph(s,e,n,o,i[14],9,-1019803690),o=ph(o,s,e,n,i[3],14,-187363961),n=ph(n,o,s,e,i[8],20,1163531501),e=ph(e,n,o,s,i[13],5,-1444681467),s=ph(s,e,n,o,i[2],9,-51403784),o=ph(o,s,e,n,i[7],14,1735328473),e=mh(e,n=ph(n,o,s,e,i[12],20,-1926607734),o,s,i[5],4,-378558),s=mh(s,e,n,o,i[8],11,-2022574463),o=mh(o,s,e,n,i[11],16,1839030562),n=mh(n,o,s,e,i[14],23,-35309556),e=mh(e,n,o,s,i[1],4,-1530992060),s=mh(s,e,n,o,i[4],11,1272893353),o=mh(o,s,e,n,i[7],16,-155497632),n=mh(n,o,s,e,i[10],23,-1094730640),e=mh(e,n,o,s,i[13],4,681279174),s=mh(s,e,n,o,i[0],11,-358537222),o=mh(o,s,e,n,i[3],16,-722521979),n=mh(n,o,s,e,i[6],23,76029189),e=mh(e,n,o,s,i[9],4,-640364487),s=mh(s,e,n,o,i[12],11,-421815835),o=mh(o,s,e,n,i[15],16,530742520),e=fh(e,n=mh(n,o,s,e,i[2],23,-995338651),o,s,i[0],6,-198630844),s=fh(s,e,n,o,i[7],10,1126891415),o=fh(o,s,e,n,i[14],15,-1416354905),n=fh(n,o,s,e,i[5],21,-57434055),e=fh(e,n,o,s,i[12],6,1700485571),s=fh(s,e,n,o,i[3],10,-1894986606),o=fh(o,s,e,n,i[10],15,-1051523),n=fh(n,o,s,e,i[1],21,-2054922799),e=fh(e,n,o,s,i[8],6,1873313359),s=fh(s,e,n,o,i[15],10,-30611744),o=fh(o,s,e,n,i[6],15,-1560198380),n=fh(n,o,s,e,i[13],21,1309151649),e=fh(e,n,o,s,i[4],6,-145523070),s=fh(s,e,n,o,i[11],10,-1120210379),o=fh(o,s,e,n,i[2],15,718787259),n=fh(n,o,s,e,i[9],21,-343485551),r[0]=v1(e,r[0]),r[1]=v1(n,r[1]),r[2]=v1(o,r[2]),r[3]=v1(s,r[3])}function e6(r,i,e,n,o,s){return i=v1(v1(i,r),v1(n,s)),v1(i<<o|i>>>32-o,e)}function hh(r,i,e,n,o,s,l){return e6(i&e|~i&n,r,i,o,s,l)}function ph(r,i,e,n,o,s,l){return e6(i&n|e&~n,r,i,o,s,l)}function mh(r,i,e,n,o,s,l){return e6(i^e^n,r,i,o,s,l)}function fh(r,i,e,n,o,s,l){return e6(e^(i|~n),r,i,o,s,l)}function g_e(r){var i,e=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=r.length;i+=64)OK(n,MGe(r.substring(i-64,i)));r=r.substring(i-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<r.length;i++)o[i>>2]|=r.charCodeAt(i)<<(i%4<<3);if(o[i>>2]|=128<<(i%4<<3),i>55)for(OK(n,o),i=0;i<16;i++)o[i]=0;return o[14]=8*e,OK(n,o),n}function MGe(r){var i,e=[];for(i=0;i<64;i+=4)e[i>>2]=r.charCodeAt(i)+(r.charCodeAt(i+1)<<8)+(r.charCodeAt(i+2)<<16)+(r.charCodeAt(i+3)<<24);return e}LP=Mr.atob.bind(Mr),LK=Mr.btoa.bind(Mr);var J0e="0123456789abcdef".split("");function DGe(r){for(var i="",e=0;e<4;e++)i+=J0e[r>>8*e+4&15]+J0e[r>>8*e&15];return i}function kGe(r){return String.fromCharCode((255&r)>>0,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function NK(r){return g_e(r).map(kGe).join("")}var OGe=function(r){for(var i=0;i<r.length;i++)r[i]=DGe(r[i]);return r.join("")}(g_e("hello"))!="5d41402abc4b2a76b9719d911017c592";function v1(r,i){if(OGe){var e=(65535&r)+(65535&i);return(r>>16)+(i>>16)+(e>>16)<<16|65535&e}return r+i&4294967295}function BK(r,i){var e,n,o,s;if(r!==e){for(var l=(o=r,s=1+(256/r.length>>0),new Array(s+1).join(o)),h=[],p=0;p<256;p++)h[p]=p;var m=0;for(p=0;p<256;p++){var f=h[p];m=(m+f+l.charCodeAt(p))%256,h[p]=h[m],h[m]=f}e=r,n=h}else h=n;var g=i.length,y=0,_=0,w="";for(p=0;p<g;p++)_=(_+(f=h[y=(y+1)%256]))%256,h[y]=h[_],h[_]=f,l=h[(h[y]+h[_])%256],w+=String.fromCharCode(i.charCodeAt(p)^l);return w}var e_e={print:4,modify:8,copy:16,"annot-forms":32};function UE(r,i,e,n){this.v=1,this.r=2;var o=192;r.forEach(function(h){if(e_e.perm!==void 0)throw new Error("Invalid permission: "+h);o+=e_e[h]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var s=(i+this.padding).substr(0,32),l=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,l),this.P=-(1+(255^o)),this.encryptionKey=NK(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=BK(this.encryptionKey,this.padding)}function zE(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var i="",e=r.length,n=0;n<e;n++){var o=r.charCodeAt(n);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?i+="#"+("0"+o.toString(16)).slice(-2):i+=r[n]}return i}function t_e(r){if(pa(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var i={};this.subscribe=function(e,n,o){if(o=o||!1,typeof e!="string"||typeof n!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");i.hasOwnProperty(e)||(i[e]={});var s=Math.random().toString(35);return i[e][s]=[n,!!o],s},this.unsubscribe=function(e){for(var n in i)if(i[n][e])return delete i[n][e],Object.keys(i[n]).length===0&&delete i[n],!0;return!1},this.publish=function(e){if(i.hasOwnProperty(e)){var n=Array.prototype.slice.call(arguments,1),o=[];for(var s in i[e]){var l=i[e][s];try{l[0].apply(r,n)}catch(h){Mr.console&&Za.error("jsPDF PubSub Error",h.message,h)}l[1]&&o.push(s)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return i}}function Xj(r){if(!(this instanceof Xj))return new Xj(r);var i="opacity,stroke-opacity".split(",");for(var e in r)r.hasOwnProperty(e)&&i.indexOf(e)>=0&&(this[e]=r[e]);this.id="",this.objectNumber=-1}function __e(r,i){this.gState=r,this.matrix=i,this.id="",this.objectNumber=-1}function OS(r,i,e,n,o){if(!(this instanceof OS))return new OS(r,i,e,n,o);this.type=r==="axial"?2:3,this.coords=i,this.colors=e,__e.call(this,n,o)}function GE(r,i,e,n,o){if(!(this instanceof GE))return new GE(r,i,e,n,o);this.boundingBox=r,this.xStep=i,this.yStep=e,this.stream="",this.cloneIndex=0,__e.call(this,n,o)}function tr(r){var i,e=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],o=arguments[2],s=arguments[3],l=[],h=1,p=16,m="S",f=null;pa(r=r||{})==="object"&&(e=r.orientation,n=r.unit||n,o=r.format||o,s=r.compress||r.compressPdf||s,(f=r.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),h=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(i=r.precision),r.floatPrecision!==void 0&&(p=r.floatPrecision),m=r.defaultPathOperation||"S"),l=r.filters||(s===!0?["FlateEncode"]:l),n=n||"mm",e=(""+(e||"P")).toLowerCase();var g=r.putOnlyUsedFonts||!1,y={},_={internal:{},__private__:{}};_.__private__.PubSub=t_e;var w="1.3",A=_.__private__.getPdfVersion=function(){return w};_.__private__.setPdfVersion=function(re){w=re};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};_.__private__.getPageFormats=function(){return k};var R=_.__private__.getPageFormat=function(re){return k[re]};o=o||"a4";var $={COMPAT:"compat",ADVANCED:"advanced"},H=$.COMPAT;function oe(){this.saveGraphicsState(),ye(new Pi(Wt,0,0,-Wt,0,A0()*Wt).toString()+" cm"),this.setFontSize(this.getFontSize()/Wt),m="n",H=$.ADVANCED}function se(){this.restoreGraphicsState(),m="S",H=$.COMPAT}var ge=_.__private__.combineFontStyleAndFontWeight=function(re,Ae){if(re=="bold"&&Ae=="normal"||re=="bold"&&Ae==400||re=="normal"&&Ae=="italic"||re=="bold"&&Ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ae&&(re=Ae==400||Ae==="normal"?re==="italic"?"italic":"normal":Ae!=700&&Ae!=="bold"||re!=="normal"?(Ae==700?"bold":Ae)+""+re:"bold"),re};_.advancedAPI=function(re){var Ae=H===$.COMPAT;return Ae&&oe.call(this),typeof re!="function"||(re(this),Ae&&se.call(this)),this},_.compatAPI=function(re){var Ae=H===$.ADVANCED;return Ae&&se.call(this),typeof re!="function"||(re(this),Ae&&oe.call(this)),this},_.isAdvancedAPI=function(){return H===$.ADVANCED};var ue,pe=function(re){if(H!==$.ADVANCED)throw new Error(re+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Ce=_.roundToPrecision=_.__private__.roundToPrecision=function(re,Ae){var tt=i||Ae;if(isNaN(re)||isNaN(tt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return re.toFixed(tt).replace(/0+$/,"")};ue=_.hpf=_.__private__.hpf=typeof p=="number"?function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.hpf");return Ce(re,p)}:p==="smart"?function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.hpf");return Ce(re,re>-1&&re<1?16:5)}:function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.hpf");return Ce(re,16)};var _e=_.f2=_.__private__.f2=function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.f2");return Ce(re,2)},de=_.__private__.f3=function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.f3");return Ce(re,3)},te=_.scale=_.__private__.scale=function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.scale");return H===$.COMPAT?re*Wt:H===$.ADVANCED?re:void 0},Se=function(re){return H===$.COMPAT?A0()-re:H===$.ADVANCED?re:void 0},Te=function(re){return te(Se(re))};_.__private__.setPrecision=_.setPrecision=function(re){typeof parseInt(re,10)=="number"&&(i=parseInt(re,10))};var De,Le="00000000000000000000000000000000",Me=_.__private__.getFileId=function(){return Le},ze=_.__private__.setFileId=function(re){return Le=re!==void 0&&/^[a-fA-F0-9]{32}$/.test(re)?re.toUpperCase():Le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Nd=new UE(f.userPermissions,f.userPassword,f.ownerPassword,Le)),Le};_.setFileId=function(re){return ze(re),this},_.getFileId=function(){return Me()};var Ve=_.__private__.convertDateToPDFDate=function(re){var Ae=re.getTimezoneOffset(),tt=Ae<0?"+":"-",xt=Math.floor(Math.abs(Ae/60)),Ft=Math.abs(Ae%60),ii=[tt,ke(xt),"'",ke(Ft),"'"].join("");return["D:",re.getFullYear(),ke(re.getMonth()+1),ke(re.getDate()),ke(re.getHours()),ke(re.getMinutes()),ke(re.getSeconds()),ii].join("")},$e=_.__private__.convertPDFDateToDate=function(re){var Ae=parseInt(re.substr(2,4),10),tt=parseInt(re.substr(6,2),10)-1,xt=parseInt(re.substr(8,2),10),Ft=parseInt(re.substr(10,2),10),ii=parseInt(re.substr(12,2),10),Ai=parseInt(re.substr(14,2),10);return new Date(Ae,tt,xt,Ft,ii,Ai,0)},nt=_.__private__.setCreationDate=function(re){var Ae;if(re===void 0&&(re=new Date),re instanceof Date)Ae=Ve(re);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(re))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ae=re}return De=Ae},be=_.__private__.getCreationDate=function(re){var Ae=De;return re==="jsDate"&&(Ae=$e(De)),Ae};_.setCreationDate=function(re){return nt(re),this},_.getCreationDate=function(re){return be(re)};var we,ke=_.__private__.padd2=function(re){return("0"+parseInt(re)).slice(-2)},et=_.__private__.padd2Hex=function(re){return("00"+(re=re.toString())).substr(re.length)},Qe=0,at=[],_t=[],ht=0,Zt=[],Tt=[],me=!1,Ct=_t,pt=function(){Qe=0,ht=0,_t=[],at=[],Zt=[],Cl=ho(),xl=ho()};_.__private__.setCustomOutputDestination=function(re){me=!0,Ct=re};var Pe=function(re){me||(Ct=re)};_.__private__.resetCustomOutputDestination=function(){me=!1,Ct=_t};var ye=_.__private__.out=function(re){return re=re.toString(),ht+=re.length+1,Ct.push(re),Ct},lt=_.__private__.write=function(re){return ye(arguments.length===1?re.toString():Array.prototype.join.call(arguments," "))},Ot=_.__private__.getArrayBuffer=function(re){for(var Ae=re.length,tt=new ArrayBuffer(Ae),xt=new Uint8Array(tt);Ae--;)xt[Ae]=re.charCodeAt(Ae);return tt},ut=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];_.__private__.getStandardFonts=function(){return ut};var ot=r.fontSize||16;_.__private__.setFontSize=_.setFontSize=function(re){return ot=H===$.ADVANCED?re/Wt:re,this};var Rt,Lt=_.__private__.getFontSize=_.getFontSize=function(){return H===$.COMPAT?ot:ot*Wt},Nt=r.R2L||!1;_.__private__.setR2L=_.setR2L=function(re){return Nt=re,this},_.__private__.getR2L=_.getR2L=function(){return Nt};var ni,wi=_.__private__.setZoomMode=function(re){var Ae=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(re))Rt=re;else if(isNaN(re)){if(Ae.indexOf(re)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+re+'" is not recognized.');Rt=re}else Rt=parseInt(re,10)};_.__private__.getZoomMode=function(){return Rt};var vi,Hi=_.__private__.setPageMode=function(re){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(re)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+re+'" is not recognized.');ni=re};_.__private__.getPageMode=function(){return ni};var Ei=_.__private__.setLayoutMode=function(re){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(re)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+re+'" is not recognized.');vi=re};_.__private__.getLayoutMode=function(){return vi},_.__private__.setDisplayMode=_.setDisplayMode=function(re,Ae,tt){return wi(re),Ei(Ae),Hi(tt),this};var Li={title:"",subject:"",author:"",keywords:"",creator:""};_.__private__.getDocumentProperty=function(re){if(Object.keys(Li).indexOf(re)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Li[re]},_.__private__.getDocumentProperties=function(){return Li},_.__private__.setDocumentProperties=_.setProperties=_.setDocumentProperties=function(re){for(var Ae in Li)Li.hasOwnProperty(Ae)&&re[Ae]&&(Li[Ae]=re[Ae]);return this},_.__private__.setDocumentProperty=function(re,Ae){if(Object.keys(Li).indexOf(re)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Li[re]=Ae};var $i,Wt,Sr,En,ro,yr={},Ir={},Mo=[],kn={},Lo={},rr={},gr={},cs=null,Mi=0,pr=[],_o=new t_e(_),Xo=r.hotfixes||[],uo={},Rn={},Ra=[],Pi=function re(Ae,tt,xt,Ft,ii,Ai){if(!(this instanceof re))return new re(Ae,tt,xt,Ft,ii,Ai);isNaN(Ae)&&(Ae=1),isNaN(tt)&&(tt=0),isNaN(xt)&&(xt=0),isNaN(Ft)&&(Ft=1),isNaN(ii)&&(ii=0),isNaN(Ai)&&(Ai=0),this._matrix=[Ae,tt,xt,Ft,ii,Ai]};Object.defineProperty(Pi.prototype,"sx",{get:function(){return this._matrix[0]},set:function(re){this._matrix[0]=re}}),Object.defineProperty(Pi.prototype,"shy",{get:function(){return this._matrix[1]},set:function(re){this._matrix[1]=re}}),Object.defineProperty(Pi.prototype,"shx",{get:function(){return this._matrix[2]},set:function(re){this._matrix[2]=re}}),Object.defineProperty(Pi.prototype,"sy",{get:function(){return this._matrix[3]},set:function(re){this._matrix[3]=re}}),Object.defineProperty(Pi.prototype,"tx",{get:function(){return this._matrix[4]},set:function(re){this._matrix[4]=re}}),Object.defineProperty(Pi.prototype,"ty",{get:function(){return this._matrix[5]},set:function(re){this._matrix[5]=re}}),Object.defineProperty(Pi.prototype,"a",{get:function(){return this._matrix[0]},set:function(re){this._matrix[0]=re}}),Object.defineProperty(Pi.prototype,"b",{get:function(){return this._matrix[1]},set:function(re){this._matrix[1]=re}}),Object.defineProperty(Pi.prototype,"c",{get:function(){return this._matrix[2]},set:function(re){this._matrix[2]=re}}),Object.defineProperty(Pi.prototype,"d",{get:function(){return this._matrix[3]},set:function(re){this._matrix[3]=re}}),Object.defineProperty(Pi.prototype,"e",{get:function(){return this._matrix[4]},set:function(re){this._matrix[4]=re}}),Object.defineProperty(Pi.prototype,"f",{get:function(){return this._matrix[5]},set:function(re){this._matrix[5]=re}}),Object.defineProperty(Pi.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Pi.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Pi.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Pi.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Pi.prototype.join=function(re){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ue).join(re)},Pi.prototype.multiply=function(re){var Ae=re.sx*this.sx+re.shy*this.shx,tt=re.sx*this.shy+re.shy*this.sy,xt=re.shx*this.sx+re.sy*this.shx,Ft=re.shx*this.shy+re.sy*this.sy,ii=re.tx*this.sx+re.ty*this.shx+this.tx,Ai=re.tx*this.shy+re.ty*this.sy+this.ty;return new Pi(Ae,tt,xt,Ft,ii,Ai)},Pi.prototype.decompose=function(){var re=this.sx,Ae=this.shy,tt=this.shx,xt=this.sy,Ft=this.tx,ii=this.ty,Ai=Math.sqrt(re*re+Ae*Ae),Ji=(re/=Ai)*tt+(Ae/=Ai)*xt;tt-=re*Ji,xt-=Ae*Ji;var qn=Math.sqrt(tt*tt+xt*xt);return Ji/=qn,re*(xt/=qn)<Ae*(tt/=qn)&&(re=-re,Ae=-Ae,Ji=-Ji,Ai=-Ai),{scale:new Pi(Ai,0,0,qn,0,0),translate:new Pi(1,0,0,1,Ft,ii),rotate:new Pi(re,Ae,-Ae,re,0,0),skew:new Pi(1,0,Ji,1,0,0)}},Pi.prototype.toString=function(re){return this.join(" ")},Pi.prototype.inversed=function(){var re=this.sx,Ae=this.shy,tt=this.shx,xt=this.sy,Ft=this.tx,ii=this.ty,Ai=1/(re*xt-Ae*tt),Ji=xt*Ai,qn=-Ae*Ai,Rr=-tt*Ai,Nr=re*Ai;return new Pi(Ji,qn,Rr,Nr,-Ji*Ft-Rr*ii,-qn*Ft-Nr*ii)},Pi.prototype.applyToPoint=function(re){var Ae=re.x*this.sx+re.y*this.shx+this.tx,tt=re.x*this.shy+re.y*this.sy+this.ty;return new I0(Ae,tt)},Pi.prototype.applyToRectangle=function(re){var Ae=this.applyToPoint(re),tt=this.applyToPoint(new I0(re.x+re.w,re.y+re.h));return new xC(Ae.x,Ae.y,tt.x-Ae.x,tt.y-Ae.y)},Pi.prototype.clone=function(){var re=this.sx,Ae=this.shy,tt=this.shx,xt=this.sy,Ft=this.tx,ii=this.ty;return new Pi(re,Ae,tt,xt,Ft,ii)},_.Matrix=Pi;var Vs=_.matrixMult=function(re,Ae){return Ae.multiply(re)},wl=new Pi(1,0,0,1,0,0);_.unitMatrix=_.identityMatrix=wl;var Ur=function(re,Ae){if(!Lo[re]){var tt=(Ae instanceof OS?"Sh":"P")+(Object.keys(kn).length+1).toString(10);Ae.id=tt,Lo[re]=tt,kn[tt]=Ae,_o.publish("addPattern",Ae)}};_.ShadingPattern=OS,_.TilingPattern=GE,_.addShadingPattern=function(re,Ae){return pe("addShadingPattern()"),Ur(re,Ae),this},_.beginTilingPattern=function(re){pe("beginTilingPattern()"),zI(re.boundingBox[0],re.boundingBox[1],re.boundingBox[2]-re.boundingBox[0],re.boundingBox[3]-re.boundingBox[1],re.matrix)},_.endTilingPattern=function(re,Ae){pe("endTilingPattern()"),Ae.stream=Tt[we].join(`
`),Ur(re,Ae),_o.publish("endTilingPattern",Ae),Ra.pop().restore()};var Zn=_.__private__.newObject=function(){var re=ho();return $s(re,!0),re},ho=_.__private__.newObjectDeferred=function(){return Qe++,at[Qe]=function(){return ht},Qe},$s=function(re,Ae){return Ae=typeof Ae=="boolean"&&Ae,at[re]=ht,Ae&&ye(re+" 0 obj"),re},Ks=_.__private__.newAdditionalObject=function(){var re={objId:ho(),content:""};return Zt.push(re),re},Cl=ho(),xl=ho(),tc=_.__private__.decodeColorString=function(re){var Ae=re.split(" ");if(Ae.length!==2||Ae[1]!=="g"&&Ae[1]!=="G")Ae.length===5&&(Ae[4]==="k"||Ae[4]==="K")&&(Ae=[(1-Ae[0])*(1-Ae[3]),(1-Ae[1])*(1-Ae[3]),(1-Ae[2])*(1-Ae[3]),"r"]);else{var tt=parseFloat(Ae[0]);Ae=[tt,tt,tt,"r"]}for(var xt="#",Ft=0;Ft<3;Ft++)xt+=("0"+Math.floor(255*parseFloat(Ae[Ft])).toString(16)).slice(-2);return xt},Nu=_.__private__.encodeColorString=function(re){var Ae;typeof re=="string"&&(re={ch1:re});var tt=re.ch1,xt=re.ch2,Ft=re.ch3,ii=re.ch4,Ai=re.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof tt=="string"&&tt.charAt(0)!=="#"){var Ji=new f_e(tt);if(Ji.ok)tt=Ji.toHex();else if(!/^\d*\.?\d*$/.test(tt))throw new Error('Invalid color "'+tt+'" passed to jsPDF.encodeColorString.')}if(typeof tt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(tt)&&(tt="#"+tt[1]+tt[1]+tt[2]+tt[2]+tt[3]+tt[3]),typeof tt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(tt)){var qn=parseInt(tt.substr(1),16);tt=qn>>16&255,xt=qn>>8&255,Ft=255&qn}if(xt===void 0||ii===void 0&&tt===xt&&xt===Ft)if(typeof tt=="string")Ae=tt+" "+Ai[0];else switch(re.precision){case 2:Ae=_e(tt/255)+" "+Ai[0];break;case 3:default:Ae=de(tt/255)+" "+Ai[0]}else if(ii===void 0||pa(ii)==="object"){if(ii&&!isNaN(ii.a)&&ii.a===0)return Ae=["1.","1.","1.",Ai[1]].join(" ");if(typeof tt=="string")Ae=[tt,xt,Ft,Ai[1]].join(" ");else switch(re.precision){case 2:Ae=[_e(tt/255),_e(xt/255),_e(Ft/255),Ai[1]].join(" ");break;default:case 3:Ae=[de(tt/255),de(xt/255),de(Ft/255),Ai[1]].join(" ")}}else if(typeof tt=="string")Ae=[tt,xt,Ft,ii,Ai[2]].join(" ");else switch(re.precision){case 2:Ae=[_e(tt),_e(xt),_e(Ft),_e(ii),Ai[2]].join(" ");break;case 3:default:Ae=[de(tt),de(xt),de(Ft),de(ii),Ai[2]].join(" ")}return Ae},Bu=_.__private__.getFilters=function(){return l},Xa=_.__private__.putStream=function(re){var Ae=(re=re||{}).data||"",tt=re.filters||Bu(),xt=re.alreadyAppliedFilters||[],Ft=re.addLength1||!1,ii=Ae.length,Ai=re.objectId,Ji=function(Bd){return Bd};if(f!==null&&Ai===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(Ji=Nd.encryptor(Ai,0));var qn={};tt===!0&&(tt=["FlateEncode"]);var Rr=re.additionalKeyValues||[],Nr=(qn=tr.API.processDataByFilters!==void 0?tr.API.processDataByFilters(Ae,tt):{data:Ae,reverseChain:[]}).reverseChain+(Array.isArray(xt)?xt.join(" "):xt.toString());if(qn.data.length!==0&&(Rr.push({key:"Length",value:qn.data.length}),Ft===!0&&Rr.push({key:"Length1",value:ii})),Nr.length!=0)if(Nr.split("/").length-1==1)Rr.push({key:"Filter",value:Nr});else{Rr.push({key:"Filter",value:"["+Nr+"]"});for(var No=0;No<Rr.length;No+=1)if(Rr[No].key==="DecodeParms"){for(var dl=[],Tl=0;Tl<qn.reverseChain.split("/").length-1;Tl+=1)dl.push("null");dl.push(Rr[No].value),Rr[No].value="["+dl.join(" ")+"]"}}ye("<<");for(var ic=0;ic<Rr.length;ic++)ye("/"+Rr[ic].key+" "+Rr[ic].value);ye(">>"),qn.data.length!==0&&(ye("stream"),ye(Ji(qn.data)),ye("endstream"))},id=_.__private__.putPage=function(re){var Ae=re.number,tt=re.data,xt=re.objId,Ft=re.contentsObjId;$s(xt,!0),ye("<</Type /Page"),ye("/Parent "+re.rootDictionaryObjId+" 0 R"),ye("/Resources "+re.resourceDictionaryObjId+" 0 R"),ye("/MediaBox ["+parseFloat(ue(re.mediaBox.bottomLeftX))+" "+parseFloat(ue(re.mediaBox.bottomLeftY))+" "+ue(re.mediaBox.topRightX)+" "+ue(re.mediaBox.topRightY)+"]"),re.cropBox!==null&&ye("/CropBox ["+ue(re.cropBox.bottomLeftX)+" "+ue(re.cropBox.bottomLeftY)+" "+ue(re.cropBox.topRightX)+" "+ue(re.cropBox.topRightY)+"]"),re.bleedBox!==null&&ye("/BleedBox ["+ue(re.bleedBox.bottomLeftX)+" "+ue(re.bleedBox.bottomLeftY)+" "+ue(re.bleedBox.topRightX)+" "+ue(re.bleedBox.topRightY)+"]"),re.trimBox!==null&&ye("/TrimBox ["+ue(re.trimBox.bottomLeftX)+" "+ue(re.trimBox.bottomLeftY)+" "+ue(re.trimBox.topRightX)+" "+ue(re.trimBox.topRightY)+"]"),re.artBox!==null&&ye("/ArtBox ["+ue(re.artBox.bottomLeftX)+" "+ue(re.artBox.bottomLeftY)+" "+ue(re.artBox.topRightX)+" "+ue(re.artBox.topRightY)+"]"),typeof re.userUnit=="number"&&re.userUnit!==1&&ye("/UserUnit "+re.userUnit),_o.publish("putPage",{objId:xt,pageContext:pr[Ae],pageNumber:Ae,page:tt}),ye("/Contents "+Ft+" 0 R"),ye(">>"),ye("endobj");var ii=tt.join(`
`);return H===$.ADVANCED&&(ii+=`
Q`),$s(Ft,!0),Xa({data:ii,filters:Bu(),objectId:Ft}),ye("endobj"),xt},Dh=_.__private__.putPages=function(){var re,Ae,tt=[];for(re=1;re<=Mi;re++)pr[re].objId=ho(),pr[re].contentsObjId=ho();for(re=1;re<=Mi;re++)tt.push(id({number:re,data:Tt[re],objId:pr[re].objId,contentsObjId:pr[re].contentsObjId,mediaBox:pr[re].mediaBox,cropBox:pr[re].cropBox,bleedBox:pr[re].bleedBox,trimBox:pr[re].trimBox,artBox:pr[re].artBox,userUnit:pr[re].userUnit,rootDictionaryObjId:Cl,resourceDictionaryObjId:xl}));$s(Cl,!0),ye("<</Type /Pages");var xt="/Kids [";for(Ae=0;Ae<Mi;Ae++)xt+=tt[Ae]+" 0 R ";ye(xt+"]"),ye("/Count "+Mi),ye(">>"),ye("endobj"),_o.publish("postPutPages")},Rd=function(re){_o.publish("putFont",{font:re,out:ye,newObject:Zn,putStream:Xa}),re.isAlreadyPutted!==!0&&(re.objectNumber=Zn(),ye("<<"),ye("/Type /Font"),ye("/BaseFont /"+zE(re.postScriptName)),ye("/Subtype /Type1"),typeof re.encoding=="string"&&ye("/Encoding /"+re.encoding),ye("/FirstChar 32"),ye("/LastChar 255"),ye(">>"),ye("endobj"))},ju=function(){for(var re in yr)yr.hasOwnProperty(re)&&(g===!1||g===!0&&y.hasOwnProperty(re))&&Rd(yr[re])},qf=function(re){re.objectNumber=Zn();var Ae=[];Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Form"}),Ae.push({key:"BBox",value:"["+[ue(re.x),ue(re.y),ue(re.x+re.width),ue(re.y+re.height)].join(" ")+"]"}),Ae.push({key:"Matrix",value:"["+re.matrix.toString()+"]"});var tt=re.pages[1].join(`
`);Xa({data:tt,additionalKeyValues:Ae,objectId:re.objectNumber}),ye("endobj")},y0=function(){for(var re in uo)uo.hasOwnProperty(re)&&qf(uo[re])},Yf=function(re,Ae){var tt,xt=[],Ft=1/(Ae-1);for(tt=0;tt<1;tt+=Ft)xt.push(tt);if(xt.push(1),re[0].offset!=0){var ii={offset:0,color:re[0].color};re.unshift(ii)}if(re[re.length-1].offset!=1){var Ai={offset:1,color:re[re.length-1].color};re.push(Ai)}for(var Ji="",qn=0,Rr=0;Rr<xt.length;Rr++){for(tt=xt[Rr];tt>re[qn+1].offset;)qn++;var Nr=re[qn].offset,No=(tt-Nr)/(re[qn+1].offset-Nr),dl=re[qn].color,Tl=re[qn+1].color;Ji+=et(Math.round((1-No)*dl[0]+No*Tl[0]).toString(16))+et(Math.round((1-No)*dl[1]+No*Tl[1]).toString(16))+et(Math.round((1-No)*dl[2]+No*Tl[2]).toString(16))}return Ji.trim()},Fd=function(re,Ae){Ae||(Ae=21);var tt=Zn(),xt=Yf(re.colors,Ae),Ft=[];Ft.push({key:"FunctionType",value:"0"}),Ft.push({key:"Domain",value:"[0.0 1.0]"}),Ft.push({key:"Size",value:"["+Ae+"]"}),Ft.push({key:"BitsPerSample",value:"8"}),Ft.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ft.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Xa({data:xt,additionalKeyValues:Ft,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:tt}),ye("endobj"),re.objectNumber=Zn(),ye("<< /ShadingType "+re.type),ye("/ColorSpace /DeviceRGB");var ii="/Coords ["+ue(parseFloat(re.coords[0]))+" "+ue(parseFloat(re.coords[1]))+" ";re.type===2?ii+=ue(parseFloat(re.coords[2]))+" "+ue(parseFloat(re.coords[3])):ii+=ue(parseFloat(re.coords[2]))+" "+ue(parseFloat(re.coords[3]))+" "+ue(parseFloat(re.coords[4]))+" "+ue(parseFloat(re.coords[5])),ye(ii+="]"),re.matrix&&ye("/Matrix ["+re.matrix.toString()+"]"),ye("/Function "+tt+" 0 R"),ye("/Extend [true true]"),ye(">>"),ye("endobj")},ms=function(re,Ae){var tt=ho(),xt=Zn();Ae.push({resourcesOid:tt,objectOid:xt}),re.objectNumber=xt;var Ft=[];Ft.push({key:"Type",value:"/Pattern"}),Ft.push({key:"PatternType",value:"1"}),Ft.push({key:"PaintType",value:"1"}),Ft.push({key:"TilingType",value:"1"}),Ft.push({key:"BBox",value:"["+re.boundingBox.map(ue).join(" ")+"]"}),Ft.push({key:"XStep",value:ue(re.xStep)}),Ft.push({key:"YStep",value:ue(re.yStep)}),Ft.push({key:"Resources",value:tt+" 0 R"}),re.matrix&&Ft.push({key:"Matrix",value:"["+re.matrix.toString()+"]"}),Xa({data:re.stream,additionalKeyValues:Ft,objectId:re.objectNumber}),ye("endobj")},nd=function(re){var Ae;for(Ae in kn)kn.hasOwnProperty(Ae)&&(kn[Ae]instanceof OS?Fd(kn[Ae]):kn[Ae]instanceof GE&&ms(kn[Ae],re))},Vu=function(re){for(var Ae in re.objectNumber=Zn(),ye("<<"),re)switch(Ae){case"opacity":ye("/ca "+_e(re[Ae]));break;case"stroke-opacity":ye("/CA "+_e(re[Ae]))}ye(">>"),ye("endobj")},Gm=function(){var re;for(re in rr)rr.hasOwnProperty(re)&&Vu(rr[re])},rd=function(){for(var re in ye("/XObject <<"),uo)uo.hasOwnProperty(re)&&uo[re].objectNumber>=0&&ye("/"+re+" "+uo[re].objectNumber+" 0 R");_o.publish("putXobjectDict"),ye(">>")},kh=function(){Nd.oid=Zn(),ye("<<"),ye("/Filter /Standard"),ye("/V "+Nd.v),ye("/R "+Nd.r),ye("/U <"+Nd.toHexString(Nd.U)+">"),ye("/O <"+Nd.toHexString(Nd.O)+">"),ye("/P "+Nd.P),ye(">>"),ye("endobj")},dy=function(){for(var re in ye("/Font <<"),yr)yr.hasOwnProperty(re)&&(g===!1||g===!0&&y.hasOwnProperty(re))&&ye("/"+re+" "+yr[re].objectNumber+" 0 R");ye(">>")},Sb=function(){if(Object.keys(kn).length>0){for(var re in ye("/Shading <<"),kn)kn.hasOwnProperty(re)&&kn[re]instanceof OS&&kn[re].objectNumber>=0&&ye("/"+re+" "+kn[re].objectNumber+" 0 R");_o.publish("putShadingPatternDict"),ye(">>")}},em=function(re){if(Object.keys(kn).length>0){for(var Ae in ye("/Pattern <<"),kn)kn.hasOwnProperty(Ae)&&kn[Ae]instanceof _.TilingPattern&&kn[Ae].objectNumber>=0&&kn[Ae].objectNumber<re&&ye("/"+Ae+" "+kn[Ae].objectNumber+" 0 R");_o.publish("putTilingPatternDict"),ye(">>")}},Jd=function(){if(Object.keys(rr).length>0){var re;for(re in ye("/ExtGState <<"),rr)rr.hasOwnProperty(re)&&rr[re].objectNumber>=0&&ye("/"+re+" "+rr[re].objectNumber+" 0 R");_o.publish("putGStateDict"),ye(">>")}},Zs=function(re){$s(re.resourcesOid,!0),ye("<<"),ye("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),dy(),Sb(),em(re.objectOid),Jd(),rd(),ye(">>"),ye("endobj")},Kf=function(){var re=[];ju(),Gm(),y0(),nd(re),_o.publish("putResources"),re.forEach(Zs),Zs({resourcesOid:xl,objectOid:Number.MAX_SAFE_INTEGER}),_o.publish("postPutResources")},Zf=function(){_o.publish("putAdditionalObjects");for(var re=0;re<Zt.length;re++){var Ae=Zt[re];$s(Ae.objId,!0),ye(Ae.content),ye("endobj")}_o.publish("postPutAdditionalObjects")},v0=function(re){Ir[re.fontName]=Ir[re.fontName]||{},Ir[re.fontName][re.fontStyle]=re.id},Qf=function(re,Ae,tt,xt,Ft){var ii={id:"F"+(Object.keys(yr).length+1).toString(10),postScriptName:re,fontName:Ae,fontStyle:tt,encoding:xt,isStandardFont:Ft||!1,metadata:{}};return _o.publish("addFont",{font:ii,instance:this}),yr[ii.id]=ii,v0(ii),ii.id},b0=function(re){for(var Ae=0,tt=ut.length;Ae<tt;Ae++){var xt=Qf.call(this,re[Ae][0],re[Ae][1],re[Ae][2],ut[Ae][3],!0);g===!1&&(y[xt]=!0);var Ft=re[Ae][0].split("-");v0({id:xt,fontName:Ft[0],fontStyle:Ft[1]||""})}_o.publish("addFonts",{fonts:yr,dictionary:Ir})},Sl=function(re){return re.foo=function(){try{return re.apply(this,arguments)}catch(xt){var Ae=xt.stack||"";~Ae.indexOf(" at ")&&(Ae=Ae.split(" at ")[1]);var tt="Error in function "+Ae.split(`
`)[0].split("<")[0]+": "+xt.message;if(!Mr.console)throw new Error(tt);Mr.console.error(tt,xt),Mr.alert&&alert(tt)}},re.foo.bar=re,re.foo},w0=function(re,Ae){var tt,xt,Ft,ii,Ai,Ji,qn,Rr,Nr;if(Ft=(Ae=Ae||{}).sourceEncoding||"Unicode",Ai=Ae.outputEncoding,(Ae.autoencode||Ai)&&yr[$i].metadata&&yr[$i].metadata[Ft]&&yr[$i].metadata[Ft].encoding&&(ii=yr[$i].metadata[Ft].encoding,!Ai&&yr[$i].encoding&&(Ai=yr[$i].encoding),!Ai&&ii.codePages&&(Ai=ii.codePages[0]),typeof Ai=="string"&&(Ai=ii[Ai]),Ai)){for(qn=!1,Ji=[],tt=0,xt=re.length;tt<xt;tt++)(Rr=Ai[re.charCodeAt(tt)])?Ji.push(String.fromCharCode(Rr)):Ji.push(re[tt]),Ji[tt].charCodeAt(0)>>8&&(qn=!0);re=Ji.join("")}for(tt=re.length;qn===void 0&&tt!==0;)re.charCodeAt(tt-1)>>8&&(qn=!0),tt--;if(!qn)return re;for(Ji=Ae.noBOM?[]:[254,255],tt=0,xt=re.length;tt<xt;tt++){if((Nr=(Rr=re.charCodeAt(tt))>>8)>>8)throw new Error("Character at position "+tt+" of string '"+re+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ji.push(Nr),Ji.push(Rr-(Nr<<8))}return String.fromCharCode.apply(void 0,Ji)},Ll=_.__private__.pdfEscape=_.pdfEscape=function(re,Ae){return w0(re,Ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ap=_.__private__.beginPage=function(re){Tt[++Mi]=[],pr[Mi]={objId:0,contentsObjId:0,userUnit:Number(h),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(re[0]),topRightY:Number(re[1])}},$u(Mi),Pe(Tt[we])},C0=function(re,Ae){var tt,xt,Ft;switch(e=Ae||e,typeof re=="string"&&(tt=R(re.toLowerCase()),Array.isArray(tt)&&(xt=tt[0],Ft=tt[1])),Array.isArray(re)&&(xt=re[0]*Wt,Ft=re[1]*Wt),isNaN(xt)&&(xt=o[0],Ft=o[1]),(xt>14400||Ft>14400)&&(Za.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),xt=Math.min(14400,xt),Ft=Math.min(14400,Ft)),o=[xt,Ft],e.substr(0,1)){case"l":Ft>xt&&(o=[Ft,xt]);break;case"p":xt>Ft&&(o=[Ft,xt])}ap(o),jI(Tb),ye(lp),CC!==0&&ye(CC+" J"),Rh!==0&&ye(Rh+" j"),_o.publish("addPage",{pageNumber:Mi})},Xf=function(re){re>0&&re<=Mi&&(Tt.splice(re,1),pr.splice(re,1),Mi--,we>Mi&&(we=Mi),this.setPage(we))},$u=function(re){re>0&&re<=Mi&&(we=re)},Ue=_.__private__.getNumberOfPages=_.getNumberOfPages=function(){return Tt.length-1},Ke=function(re,Ae,tt){var xt,Ft=void 0;return tt=tt||{},re=re!==void 0?re:yr[$i].fontName,Ae=Ae!==void 0?Ae:yr[$i].fontStyle,xt=re.toLowerCase(),Ir[xt]!==void 0&&Ir[xt][Ae]!==void 0?Ft=Ir[xt][Ae]:Ir[re]!==void 0&&Ir[re][Ae]!==void 0?Ft=Ir[re][Ae]:tt.disableWarning===!1&&Za.warn("Unable to look up font label for font '"+re+"', '"+Ae+"'. Refer to getFontList() for available fonts."),Ft||tt.noFallback||(Ft=Ir.times[Ae])==null&&(Ft=Ir.times.normal),Ft},ft=_.__private__.putInfo=function(){var re=Zn(),Ae=function(xt){return xt};for(var tt in f!==null&&(Ae=Nd.encryptor(re,0)),ye("<<"),ye("/Producer ("+Ll(Ae("jsPDF "+tr.version))+")"),Li)Li.hasOwnProperty(tt)&&Li[tt]&&ye("/"+tt.substr(0,1).toUpperCase()+tt.substr(1)+" ("+Ll(Ae(Li[tt]))+")");ye("/CreationDate ("+Ll(Ae(De))+")"),ye(">>"),ye("endobj")},Gt=_.__private__.putCatalog=function(re){var Ae=(re=re||{}).rootDictionaryObjId||Cl;switch(Zn(),ye("<<"),ye("/Type /Catalog"),ye("/Pages "+Ae+" 0 R"),Rt||(Rt="fullwidth"),Rt){case"fullwidth":ye("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ye("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ye("/OpenAction [3 0 R /Fit]");break;case"original":ye("/OpenAction [3 0 R /XYZ null null 1]");break;default:var tt=""+Rt;tt.substr(tt.length-1)==="%"&&(Rt=parseInt(Rt)/100),typeof Rt=="number"&&ye("/OpenAction [3 0 R /XYZ null null "+_e(Rt)+"]")}switch(vi||(vi="continuous"),vi){case"continuous":ye("/PageLayout /OneColumn");break;case"single":ye("/PageLayout /SinglePage");break;case"two":case"twoleft":ye("/PageLayout /TwoColumnLeft");break;case"tworight":ye("/PageLayout /TwoColumnRight")}ni&&ye("/PageMode /"+ni),_o.publish("putCatalog"),ye(">>"),ye("endobj")},Ii=_.__private__.putTrailer=function(){ye("trailer"),ye("<<"),ye("/Size "+(Qe+1)),ye("/Root "+Qe+" 0 R"),ye("/Info "+(Qe-1)+" 0 R"),f!==null&&ye("/Encrypt "+Nd.oid+" 0 R"),ye("/ID [ <"+Le+"> <"+Le+"> ]"),ye(">>")},sn=_.__private__.putHeader=function(){ye("%PDF-"+w),ye("%\xBA\xDF\xAC\xE0")},oo=_.__private__.putXRef=function(){var re="0000000000";ye("xref"),ye("0 "+(Qe+1)),ye("0000000000 65535 f ");for(var Ae=1;Ae<=Qe;Ae++)typeof at[Ae]=="function"?ye((re+at[Ae]()).slice(-10)+" 00000 n "):at[Ae]!==void 0?ye((re+at[Ae]).slice(-10)+" 00000 n "):ye("0000000000 00000 n ")},Es=_.__private__.buildDocument=function(){pt(),Pe(_t),_o.publish("buildDocument"),sn(),Dh(),Zf(),Kf(),f!==null&&kh(),ft(),Gt();var re=ht;return oo(),Ii(),ye("startxref"),ye(""+re),ye("%%EOF"),Pe(Tt[we]),_t.join(`
`)},Qs=_.__private__.getBlob=function(re){return new Blob([Ot(re)],{type:"application/pdf"})},Il=_.output=_.__private__.output=Sl(function(re,Ae){switch(typeof(Ae=Ae||{})=="string"?Ae={filename:Ae}:Ae.filename=Ae.filename||"generated.pdf",re){case void 0:return Es();case"save":_.save(Ae.filename);break;case"arraybuffer":return Ot(Es());case"blob":return Qs(Es());case"bloburi":case"bloburl":if(Mr.URL!==void 0&&typeof Mr.URL.createObjectURL=="function")return Mr.URL&&Mr.URL.createObjectURL(Qs(Es()))||void 0;Za.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var tt="",xt=Es();try{tt=LK(xt)}catch{tt=LK(unescape(encodeURIComponent(xt)))}return"data:application/pdf;filename="+Ae.filename+";base64,"+tt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Mr)==="[object Window]"){var Ft="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ii=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ae.pdfObjectUrl&&(Ft=Ae.pdfObjectUrl,ii="");var Ai='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ft+'"'+ii+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ae)+");<\/script></body></html>",Ji=Mr.open();return Ji!==null&&Ji.document.write(Ai),Ji}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Mr)==="[object Window]"){var qn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ae.filename+'" width="500px" height="400px" /></body></html>',Rr=Mr.open();if(Rr!==null){Rr.document.write(qn);var Nr=this;Rr.document.documentElement.querySelector("#pdfViewer").onload=function(){Rr.document.title=Ae.filename,Rr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Nr.output("bloburl"))}}return Rr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Mr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var No='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ae)+'"></iframe></body></html>',dl=Mr.open();if(dl!==null&&(dl.document.write(No),dl.document.title=Ae.filename),dl||typeof safari>"u")return dl;break;case"datauri":case"dataurl":return Mr.document.location.href=this.output("datauristring",Ae);default:return null}}),Ld=function(re){return Array.isArray(Xo)===!0&&Xo.indexOf(re)>-1};switch(n){case"pt":Wt=1;break;case"mm":Wt=72/25.4;break;case"cm":Wt=72/2.54;break;case"in":Wt=72;break;case"px":Wt=Ld("px_scaling")==1?.75:96/72;break;case"pc":case"em":Wt=12;break;case"ex":Wt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Wt=n}var Nd=null;nt(),ze();var uD=function(re){return f!==null?Nd.encryptor(re,0):function(Ae){return Ae}},LI=_.__private__.getPageInfo=_.getPageInfo=function(re){if(isNaN(re)||re%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:pr[re].objId,pageNumber:re,pageContext:pr[re]}},Pr=_.__private__.getPageInfoByObjId=function(re){if(isNaN(re)||re%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ae in pr)if(pr[Ae].objId===re)break;return LI(Ae)},hD=_.__private__.getCurrentPageInfo=_.getCurrentPageInfo=function(){return{objId:pr[we].objId,pageNumber:we,pageContext:pr[we]}};_.addPage=function(){return C0.apply(this,arguments),this},_.setPage=function(){return $u.apply(this,arguments),Pe.call(this,Tt[we]),this},_.insertPage=function(re){return this.addPage(),this.movePage(we,re),this},_.movePage=function(re,Ae){var tt,xt;if(re>Ae){tt=Tt[re],xt=pr[re];for(var Ft=re;Ft>Ae;Ft--)Tt[Ft]=Tt[Ft-1],pr[Ft]=pr[Ft-1];Tt[Ae]=tt,pr[Ae]=xt,this.setPage(Ae)}else if(re<Ae){tt=Tt[re],xt=pr[re];for(var ii=re;ii<Ae;ii++)Tt[ii]=Tt[ii+1],pr[ii]=pr[ii+1];Tt[Ae]=tt,pr[Ae]=xt,this.setPage(Ae)}return this},_.deletePage=function(){return Xf.apply(this,arguments),this},_.__private__.text=_.text=function(re,Ae,tt,xt,Ft){var ii,Ai,Ji,qn,Rr,Nr,No,dl,Tl,ic=(xt=xt||{}).scope||this;if(typeof re=="number"&&typeof Ae=="number"&&(typeof tt=="string"||Array.isArray(tt))){var Bd=tt;tt=Ae,Ae=re,re=Bd}if(arguments[3]instanceof Pi?(pe("The transform parameter of text() with a Matrix value"),Tl=Ft):(Ji=arguments[4],qn=arguments[5],pa(No=arguments[3])==="object"&&No!==null||(typeof Ji=="string"&&(qn=Ji,Ji=null),typeof No=="string"&&(qn=No,No=null),typeof No=="number"&&(Ji=No,No=null),xt={flags:No,angle:Ji,align:qn})),isNaN(Ae)||isNaN(tt)||re==null)throw new Error("Invalid arguments passed to jsPDF.text");if(re.length===0)return ic;var Sc="",tm=!1,Uu=typeof xt.lineHeightFactor=="number"?xt.lineHeightFactor:x0,Ko=ic.internal.scaleFactor;function GI(Xs){return Xs=Xs.split("	").join(Array(xt.TabLen||9).join(" ")),Ll(Xs,No)}function TC(Xs){for(var Js,Nl=Xs.concat(),Ic=[],rg=Nl.length;rg--;)typeof(Js=Nl.shift())=="string"?Ic.push(Js):Array.isArray(Xs)&&(Js.length===1||Js[1]===void 0&&Js[2]===void 0)?Ic.push(Js[0]):Ic.push([Js[0],Js[1],Js[2]]);return Ic}function kb(Xs,Js){var Nl;if(typeof Xs=="string")Nl=Js(Xs)[0];else if(Array.isArray(Xs)){for(var Ic,rg,PC=Xs.concat(),Bb=[],qI=PC.length;qI--;)typeof(Ic=PC.shift())=="string"?Bb.push(Js(Ic)[0]):Array.isArray(Ic)&&typeof Ic[0]=="string"&&(rg=Js(Ic[0],Ic[1],Ic[2]),Bb.push([rg[0],rg[1],rg[2]]));Nl=Bb}return Nl}var Ob=!1,AC=!0;if(typeof re=="string")Ob=!0;else if(Array.isArray(re)){var EC=re.concat();Ai=[];for(var qm,od=EC.length;od--;)(typeof(qm=EC.shift())!="string"||Array.isArray(qm)&&typeof qm[0]!="string")&&(AC=!1);Ob=AC}if(Ob===!1)throw new Error('Type of text must be string or Array. "'+re+'" is not recognized.');typeof re=="string"&&(re=re.match(/[\r?\n]/)?re.split(/\r\n|\r|\n/g):[re]);var Pb=ot/ic.internal.scaleFactor,Rb=Pb*(Uu-1);switch(xt.baseline){case"bottom":tt-=Rb;break;case"top":tt+=Pb-Rb;break;case"hanging":tt+=Pb-2*Rb;break;case"middle":tt+=Pb/2-Rb}if((Nr=xt.maxWidth||0)>0&&(typeof re=="string"?re=ic.splitTextToSize(re,Nr):Object.prototype.toString.call(re)==="[object Array]"&&(re=re.reduce(function(Xs,Js){return Xs.concat(ic.splitTextToSize(Js,Nr))},[]))),ii={text:re,x:Ae,y:tt,options:xt,mutex:{pdfEscape:Ll,activeFontKey:$i,fonts:yr,activeFontSize:ot}},_o.publish("preProcessText",ii),re=ii.text,Ji=(xt=ii.options).angle,!(Tl instanceof Pi)&&Ji&&typeof Ji=="number"){Ji*=Math.PI/180,xt.rotationDirection===0&&(Ji=-Ji),H===$.ADVANCED&&(Ji=-Ji);var eg=Math.cos(Ji),E0=Math.sin(Ji);Tl=new Pi(eg,E0,-E0,eg,0,0)}else Ji&&Ji instanceof Pi&&(Tl=Ji);H!==$.ADVANCED||Tl||(Tl=wl),(Rr=xt.charSpace||Ph)!==void 0&&(Sc+=ue(te(Rr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(dl=xt.horizontalScale)!==void 0&&(Sc+=ue(100*dl)+` Tz
`),xt.lang;var jd=-1,yD=xt.renderingMode!==void 0?xt.renderingMode:xt.stroke,Fb=ic.internal.getCurrentPageInfo().pageContext;switch(yD){case 0:case!1:case"fill":jd=0;break;case 1:case!0:case"stroke":jd=1;break;case 2:case"fillThenStroke":jd=2;break;case 3:case"invisible":jd=3;break;case 4:case"fillAndAddForClipping":jd=4;break;case 5:case"strokeAndAddPathForClipping":jd=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":jd=6;break;case 7:case"addToPathForClipping":jd=7}var HI=Fb.usedRenderingMode!==void 0?Fb.usedRenderingMode:-1;jd!==-1?Sc+=jd+` Tr
`:HI!==-1&&(Sc+=`0 Tr
`),jd!==-1&&(Fb.usedRenderingMode=jd),qn=xt.align||"left";var zu,M0=ot*Uu,Lb=ic.internal.pageSize.getWidth(),WI=yr[$i];Rr=xt.charSpace||Ph,Nr=xt.maxWidth||0,No=Object.assign({autoencode:!0,noBOM:!0},xt.flags);var D0=[],my=function(Xs){return ic.getStringUnitWidth(Xs,{font:WI,charSpace:Rr,fontSize:ot,doKerning:!1})*ot/Ko};if(Object.prototype.toString.call(re)==="[object Array]"){var Gu;Ai=TC(re),qn!=="left"&&(zu=Ai.map(my));var eu,k0=0;if(qn==="right"){Ae-=zu[0],re=[],od=Ai.length;for(var tg=0;tg<od;tg++)tg===0?(eu=Jo(Ae),Gu=Oh(tt)):(eu=te(k0-zu[tg]),Gu=-M0),re.push([Ai[tg],eu,Gu]),k0=zu[tg]}else if(qn==="center"){Ae-=zu[0]/2,re=[],od=Ai.length;for(var ig=0;ig<od;ig++)ig===0?(eu=Jo(Ae),Gu=Oh(tt)):(eu=te((k0-zu[ig])/2),Gu=-M0),re.push([Ai[ig],eu,Gu]),k0=zu[ig]}else if(qn==="left"){re=[],od=Ai.length;for(var Nb=0;Nb<od;Nb++)re.push(Ai[Nb])}else if(qn==="justify"&&WI.encoding==="Identity-H"){re=[],od=Ai.length,Nr=Nr!==0?Nr:Lb;for(var ng=0,Al=0;Al<od;Al++)if(Gu=Al===0?Oh(tt):-M0,eu=Al===0?Jo(Ae):ng,Al<od-1){var MC=te((Nr-zu[Al])/(Ai[Al].split(" ").length-1)),tu=Ai[Al].split(" ");re.push([tu[0]+" ",eu,Gu]),ng=0;for(var El=1;El<tu.length;El++){var cp=(my(tu[El-1]+" "+tu[El])-my(tu[El]))*Ko+MC;El==tu.length-1?re.push([tu[El],cp,0]):re.push([tu[El]+" ",cp,0]),ng-=cp}}else re.push([Ai[Al],eu,Gu]);re.push(["",ng,0])}else{if(qn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(re=[],od=Ai.length,Nr=Nr!==0?Nr:Lb,Al=0;Al<od;Al++)Gu=Al===0?Oh(tt):-M0,eu=Al===0?Jo(Ae):0,Al<od-1?D0.push(ue(te((Nr-zu[Al])/(Ai[Al].split(" ").length-1)))):D0.push(0),re.push([Ai[Al],eu,Gu])}}var DC=typeof xt.R2L=="boolean"?xt.R2L:Nt;DC===!0&&(re=kb(re,function(Xs,Js,Nl){return[Xs.split("").reverse().join(""),Js,Nl]})),ii={text:re,x:Ae,y:tt,options:xt,mutex:{pdfEscape:Ll,activeFontKey:$i,fonts:yr,activeFontSize:ot}},_o.publish("postProcessText",ii),re=ii.text,tm=ii.mutex.isHex||!1;var kC=yr[$i].encoding;kC!=="WinAnsiEncoding"&&kC!=="StandardEncoding"||(re=kb(re,function(Xs,Js,Nl){return[GI(Xs),Js,Nl]})),Ai=TC(re),re=[];for(var O0,P0,R0,fy=0,gy=1,_y=Array.isArray(Ai[0])?gy:fy,F0="",OC=function(Xs,Js,Nl){var Ic="";return Nl instanceof Pi?(Nl=typeof xt.angle=="number"?Vs(Nl,new Pi(1,0,0,1,Xs,Js)):Vs(new Pi(1,0,0,1,Xs,Js),Nl),H===$.ADVANCED&&(Nl=Vs(new Pi(1,0,0,-1,0,0),Nl)),Ic=Nl.join(" ")+` Tm
`):Ic=ue(Xs)+" "+ue(Js)+` Td
`,Ic},dp=0;dp<Ai.length;dp++){switch(F0="",_y){case gy:R0=(tm?"<":"(")+Ai[dp][0]+(tm?">":")"),O0=parseFloat(Ai[dp][1]),P0=parseFloat(Ai[dp][2]);break;case fy:R0=(tm?"<":"(")+Ai[dp]+(tm?">":")"),O0=Jo(Ae),P0=Oh(tt)}D0!==void 0&&D0[dp]!==void 0&&(F0=D0[dp]+` Tw
`),dp===0?re.push(F0+OC(O0,P0,Tl)+R0):_y===fy?re.push(F0+R0):_y===gy&&re.push(F0+OC(O0,P0,Tl)+R0)}re=_y===fy?re.join(` Tj
T* `):re.join(` Tj
`),re+=` Tj
`;var up=`BT
/`;return up+=$i+" "+ot+` Tf
`,up+=ue(ot*Uu)+` TL
`,up+=hy+`
`,up+=Sc,up+=re,ye(up+="ET"),y[$i]=!0,ic};var pD=_.__private__.clip=_.clip=function(re){return ye(re==="evenodd"?"W*":"W"),this};_.clipEvenOdd=function(){return pD("evenodd")},_.__private__.discardPath=_.discardPath=function(){return ye("n"),this};var Hm=_.__private__.isValidStyle=function(re){var Ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(re)!==-1&&(Ae=!0),Ae};_.__private__.setDefaultPathOperation=_.setDefaultPathOperation=function(re){return Hm(re)&&(m=re),this};var NI=_.__private__.getStyle=_.getStyle=function(re){var Ae=m;switch(re){case"D":case"S":Ae="S";break;case"F":Ae="f";break;case"FD":case"DF":Ae="B";break;case"f":case"f*":case"B":case"B*":Ae=re}return Ae},BI=_.close=function(){return ye("h"),this};_.stroke=function(){return ye("S"),this},_.fill=function(re){return Ib("f",re),this},_.fillEvenOdd=function(re){return Ib("f*",re),this},_.fillStroke=function(re){return Ib("B",re),this},_.fillStrokeEvenOdd=function(re){return Ib("B*",re),this};var Ib=function(re,Ae){pa(Ae)==="object"?fD(Ae,re):ye(re)},_C=function(re){re===null||H===$.ADVANCED&&re===void 0||(re=NI(re),ye(re))};function mD(re,Ae,tt,xt,Ft){var ii=new GE(Ae||this.boundingBox,tt||this.xStep,xt||this.yStep,this.gState,Ft||this.matrix);ii.stream=this.stream;var Ai=re+"$$"+this.cloneIndex+++"$$";return Ur(Ai,ii),ii}var fD=function(re,Ae){var tt=Lo[re.key],xt=kn[tt];if(xt instanceof OS)ye("q"),ye(gD(Ae)),xt.gState&&_.setGState(xt.gState),ye(re.matrix.toString()+" cm"),ye("/"+tt+" sh"),ye("Q");else if(xt instanceof GE){var Ft=new Pi(1,0,0,-1,0,A0());re.matrix&&(Ft=Ft.multiply(re.matrix||wl),tt=mD.call(xt,re.key,re.boundingBox,re.xStep,re.yStep,Ft).id),ye("q"),ye("/Pattern cs"),ye("/"+tt+" scn"),xt.gState&&_.setGState(xt.gState),ye(Ae),ye("Q")}},gD=function(re){switch(re){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},yC=_.moveTo=function(re,Ae){return ye(ue(te(re))+" "+ue(Te(Ae))+" m"),this},Jf=_.lineTo=function(re,Ae){return ye(ue(te(re))+" "+ue(Te(Ae))+" l"),this},Wm=_.curveTo=function(re,Ae,tt,xt,Ft,ii){return ye([ue(te(re)),ue(Te(Ae)),ue(te(tt)),ue(Te(xt)),ue(te(Ft)),ue(Te(ii)),"c"].join(" ")),this};_.__private__.line=_.line=function(re,Ae,tt,xt,Ft){if(isNaN(re)||isNaN(Ae)||isNaN(tt)||isNaN(xt)||!Hm(Ft))throw new Error("Invalid arguments passed to jsPDF.line");return H===$.COMPAT?this.lines([[tt-re,xt-Ae]],re,Ae,[1,1],Ft||"S"):this.lines([[tt-re,xt-Ae]],re,Ae,[1,1]).stroke()},_.__private__.lines=_.lines=function(re,Ae,tt,xt,Ft,ii){var Ai,Ji,qn,Rr,Nr,No,dl,Tl,ic,Bd,Sc,tm;if(typeof re=="number"&&(tm=tt,tt=Ae,Ae=re,re=tm),xt=xt||[1,1],ii=ii||!1,isNaN(Ae)||isNaN(tt)||!Array.isArray(re)||!Array.isArray(xt)||!Hm(Ft)||typeof ii!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(yC(Ae,tt),Ai=xt[0],Ji=xt[1],Rr=re.length,Bd=Ae,Sc=tt,qn=0;qn<Rr;qn++)(Nr=re[qn]).length===2?(Bd=Nr[0]*Ai+Bd,Sc=Nr[1]*Ji+Sc,Jf(Bd,Sc)):(No=Nr[0]*Ai+Bd,dl=Nr[1]*Ji+Sc,Tl=Nr[2]*Ai+Bd,ic=Nr[3]*Ji+Sc,Bd=Nr[4]*Ai+Bd,Sc=Nr[5]*Ji+Sc,Wm(No,dl,Tl,ic,Bd,Sc));return ii&&BI(),_C(Ft),this},_.path=function(re){for(var Ae=0;Ae<re.length;Ae++){var tt=re[Ae],xt=tt.c;switch(tt.op){case"m":yC(xt[0],xt[1]);break;case"l":Jf(xt[0],xt[1]);break;case"c":Wm.apply(this,xt);break;case"h":BI()}}return this},_.__private__.rect=_.rect=function(re,Ae,tt,xt,Ft){if(isNaN(re)||isNaN(Ae)||isNaN(tt)||isNaN(xt)||!Hm(Ft))throw new Error("Invalid arguments passed to jsPDF.rect");return H===$.COMPAT&&(xt=-xt),ye([ue(te(re)),ue(Te(Ae)),ue(te(tt)),ue(te(xt)),"re"].join(" ")),_C(Ft),this},_.__private__.triangle=_.triangle=function(re,Ae,tt,xt,Ft,ii,Ai){if(isNaN(re)||isNaN(Ae)||isNaN(tt)||isNaN(xt)||isNaN(Ft)||isNaN(ii)||!Hm(Ai))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[tt-re,xt-Ae],[Ft-tt,ii-xt],[re-Ft,Ae-ii]],re,Ae,[1,1],Ai,!0),this},_.__private__.roundedRect=_.roundedRect=function(re,Ae,tt,xt,Ft,ii,Ai){if(isNaN(re)||isNaN(Ae)||isNaN(tt)||isNaN(xt)||isNaN(Ft)||isNaN(ii)||!Hm(Ai))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ji=4/3*(Math.SQRT2-1);return Ft=Math.min(Ft,.5*tt),ii=Math.min(ii,.5*xt),this.lines([[tt-2*Ft,0],[Ft*Ji,0,Ft,ii-ii*Ji,Ft,ii],[0,xt-2*ii],[0,ii*Ji,-Ft*Ji,ii,-Ft,ii],[2*Ft-tt,0],[-Ft*Ji,0,-Ft,-ii*Ji,-Ft,-ii],[0,2*ii-xt],[0,-ii*Ji,Ft*Ji,-ii,Ft,-ii]],re+Ft,Ae,[1,1],Ai,!0),this},_.__private__.ellipse=_.ellipse=function(re,Ae,tt,xt,Ft){if(isNaN(re)||isNaN(Ae)||isNaN(tt)||isNaN(xt)||!Hm(Ft))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ii=4/3*(Math.SQRT2-1)*tt,Ai=4/3*(Math.SQRT2-1)*xt;return yC(re+tt,Ae),Wm(re+tt,Ae-Ai,re+ii,Ae-xt,re,Ae-xt),Wm(re-ii,Ae-xt,re-tt,Ae-Ai,re-tt,Ae),Wm(re-tt,Ae+Ai,re-ii,Ae+xt,re,Ae+xt),Wm(re+ii,Ae+xt,re+tt,Ae+Ai,re+tt,Ae),_C(Ft),this},_.__private__.circle=_.circle=function(re,Ae,tt,xt){if(isNaN(re)||isNaN(Ae)||isNaN(tt)||!Hm(xt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(re,Ae,tt,tt,xt)},_.setFont=function(re,Ae,tt){return tt&&(Ae=ge(Ae,tt)),$i=Ke(re,Ae,{disableWarning:!1}),this};var _D=_.__private__.getFont=_.getFont=function(){return yr[Ke.apply(_,arguments)]};_.__private__.getFontList=_.getFontList=function(){var re,Ae,tt={};for(re in Ir)if(Ir.hasOwnProperty(re))for(Ae in tt[re]=[],Ir[re])Ir[re].hasOwnProperty(Ae)&&tt[re].push(Ae);return tt},_.addFont=function(re,Ae,tt,xt,Ft){var ii=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ii.indexOf(arguments[3])!==-1?Ft=arguments[3]:arguments[3]&&ii.indexOf(arguments[3])==-1&&(tt=ge(tt,xt)),Ft=Ft||"Identity-H",Qf.call(this,re,Ae,tt,Ft)};var x0,Tb=r.lineWidth||.200025,Ab=_.__private__.getLineWidth=_.getLineWidth=function(){return Tb},jI=_.__private__.setLineWidth=_.setLineWidth=function(re){return Tb=re,ye(ue(te(re))+" w"),this};_.__private__.setLineDash=tr.API.setLineDash=tr.API.setLineDashPattern=function(re,Ae){if(re=re||[],Ae=Ae||0,isNaN(Ae)||!Array.isArray(re))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return re=re.map(function(tt){return ue(te(tt))}).join(" "),Ae=ue(te(Ae)),ye("["+re+"] "+Ae+" d"),this};var VI=_.__private__.getLineHeight=_.getLineHeight=function(){return ot*x0};_.__private__.getLineHeight=_.getLineHeight=function(){return ot*x0};var $I=_.__private__.setLineHeightFactor=_.setLineHeightFactor=function(re){return typeof(re=re||1.15)=="number"&&(x0=re),this},vC=_.__private__.getLineHeightFactor=_.getLineHeightFactor=function(){return x0};$I(r.lineHeight);var Jo=_.__private__.getHorizontalCoordinate=function(re){return te(re)},Oh=_.__private__.getVerticalCoordinate=function(re){return H===$.ADVANCED?re:pr[we].mediaBox.topRightY-pr[we].mediaBox.bottomLeftY-te(re)},uy=_.__private__.getHorizontalCoordinateString=_.getHorizontalCoordinateString=function(re){return ue(Jo(re))},S0=_.__private__.getVerticalCoordinateString=_.getVerticalCoordinateString=function(re){return ue(Oh(re))},lp=r.strokeColor||"0 G";_.__private__.getStrokeColor=_.getDrawColor=function(){return tc(lp)},_.__private__.setStrokeColor=_.setDrawColor=function(re,Ae,tt,xt){return lp=Nu({ch1:re,ch2:Ae,ch3:tt,ch4:xt,pdfColorType:"draw",precision:2}),ye(lp),this};var bC=r.fillColor||"0 g";_.__private__.getFillColor=_.getFillColor=function(){return tc(bC)},_.__private__.setFillColor=_.setFillColor=function(re,Ae,tt,xt){return bC=Nu({ch1:re,ch2:Ae,ch3:tt,ch4:xt,pdfColorType:"fill",precision:2}),ye(bC),this};var hy=r.textColor||"0 g",Eb=_.__private__.getTextColor=_.getTextColor=function(){return tc(hy)};_.__private__.setTextColor=_.setTextColor=function(re,Ae,tt,xt){return hy=Nu({ch1:re,ch2:Ae,ch3:tt,ch4:xt,pdfColorType:"text",precision:3}),this};var Ph=r.charSpace,wC=_.__private__.getCharSpace=_.getCharSpace=function(){return parseFloat(Ph||0)};_.__private__.setCharSpace=_.setCharSpace=function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ph=re,this};var CC=0;_.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},_.__private__.setLineCap=_.setLineCap=function(re){var Ae=_.CapJoinStyles[re];if(Ae===void 0)throw new Error("Line cap style of '"+re+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return CC=Ae,ye(Ae+" J"),this};var Rh=0;_.__private__.setLineJoin=_.setLineJoin=function(re){var Ae=_.CapJoinStyles[re];if(Ae===void 0)throw new Error("Line join style of '"+re+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Rh=Ae,ye(Ae+" j"),this},_.__private__.setLineMiterLimit=_.__private__.setMiterLimit=_.setLineMiterLimit=_.setMiterLimit=function(re){if(re=re||0,isNaN(re))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ye(ue(te(re))+" M"),this},_.GState=Xj,_.setGState=function(re){(re=typeof re=="string"?rr[gr[re]]:UI(null,re)).equals(cs)||(ye("/"+re.id+" gs"),cs=re)};var UI=function(re,Ae){if(!re||!gr[re]){var tt=!1;for(var xt in rr)if(rr.hasOwnProperty(xt)&&rr[xt].equals(Ae)){tt=!0;break}if(tt)Ae=rr[xt];else{var Ft="GS"+(Object.keys(rr).length+1).toString(10);rr[Ft]=Ae,Ae.id=Ft}return re&&(gr[re]=Ae.id),_o.publish("addGState",Ae),Ae}};_.addGState=function(re,Ae){return UI(re,Ae),this},_.saveGraphicsState=function(){return ye("q"),Mo.push({key:$i,size:ot,color:hy}),this},_.restoreGraphicsState=function(){ye("Q");var re=Mo.pop();return $i=re.key,ot=re.size,hy=re.color,cs=null,this},_.setCurrentTransformationMatrix=function(re){return ye(re.toString()+" cm"),this},_.comment=function(re){return ye("#"+re),this};var I0=function(re,Ae){var tt=re||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return tt},set:function(ii){isNaN(ii)||(tt=parseFloat(ii))}});var xt=Ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return xt},set:function(ii){isNaN(ii)||(xt=parseFloat(ii))}});var Ft="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ft},set:function(ii){Ft=ii.toString()}}),this},xC=function(re,Ae,tt,xt){I0.call(this,re,Ae),this.type="rect";var Ft=tt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ft},set:function(Ai){isNaN(Ai)||(Ft=parseFloat(Ai))}});var ii=xt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ii},set:function(Ai){isNaN(Ai)||(ii=parseFloat(Ai))}}),this},SC=function(){this.page=Mi,this.currentPage=we,this.pages=Tt.slice(0),this.pagesContext=pr.slice(0),this.x=Sr,this.y=En,this.matrix=ro,this.width=py(we),this.height=A0(we),this.outputDestination=Ct,this.id="",this.objectNumber=-1};SC.prototype.restore=function(){Mi=this.page,we=this.currentPage,pr=this.pagesContext,Tt=this.pages,Sr=this.x,En=this.y,ro=this.matrix,IC(we,this.width),Db(we,this.height),Ct=this.outputDestination};var zI=function(re,Ae,tt,xt,Ft){Ra.push(new SC),Mi=we=0,Tt=[],Sr=re,En=Ae,ro=Ft,ap([tt,xt])},Mb=function(re){if(Rn[re])Ra.pop().restore();else{var Ae=new SC,tt="Xo"+(Object.keys(uo).length+1).toString(10);Ae.id=tt,Rn[re]=tt,uo[tt]=Ae,_o.publish("addFormObject",Ae),Ra.pop().restore()}};for(var T0 in _.beginFormObject=function(re,Ae,tt,xt,Ft){return zI(re,Ae,tt,xt,Ft),this},_.endFormObject=function(re){return Mb(re),this},_.doFormObject=function(re,Ae){var tt=uo[Rn[re]];return ye("q"),ye(Ae.toString()+" cm"),ye("/"+tt.id+" Do"),ye("Q"),this},_.getFormObject=function(re){var Ae=uo[Rn[re]];return{x:Ae.x,y:Ae.y,width:Ae.width,height:Ae.height,matrix:Ae.matrix}},_.save=function(re,Ae){return re=re||"generated.pdf",(Ae=Ae||{}).returnPromise=Ae.returnPromise||!1,Ae.returnPromise===!1?(kS(Qs(Es()),re),typeof kS.unload=="function"&&Mr.setTimeout&&setTimeout(kS.unload,911),this):new Promise(function(tt,xt){try{var Ft=kS(Qs(Es()),re);typeof kS.unload=="function"&&Mr.setTimeout&&setTimeout(kS.unload,911),tt(Ft)}catch(ii){xt(ii.message)}})},tr.API)tr.API.hasOwnProperty(T0)&&(T0==="events"&&tr.API.events.length?function(re,Ae){var tt,xt,Ft;for(Ft=Ae.length-1;Ft!==-1;Ft--)tt=Ae[Ft][0],xt=Ae[Ft][1],re.subscribe.apply(re,[tt].concat(typeof xt=="function"?[xt]:xt))}(_o,tr.API.events):_[T0]=tr.API[T0]);var py=_.getPageWidth=function(re){return(pr[re=re||we].mediaBox.topRightX-pr[re].mediaBox.bottomLeftX)/Wt},IC=_.setPageWidth=function(re,Ae){pr[re].mediaBox.topRightX=Ae*Wt+pr[re].mediaBox.bottomLeftX},A0=_.getPageHeight=function(re){return(pr[re=re||we].mediaBox.topRightY-pr[re].mediaBox.bottomLeftY)/Wt},Db=_.setPageHeight=function(re,Ae){pr[re].mediaBox.topRightY=Ae*Wt+pr[re].mediaBox.bottomLeftY};return _.internal={pdfEscape:Ll,getStyle:NI,getFont:_D,getFontSize:Lt,getCharSpace:wC,getTextColor:Eb,getLineHeight:VI,getLineHeightFactor:vC,getLineWidth:Ab,write:lt,getHorizontalCoordinate:Jo,getVerticalCoordinate:Oh,getCoordinateString:uy,getVerticalCoordinateString:S0,collections:{},newObject:Zn,newAdditionalObject:Ks,newObjectDeferred:ho,newObjectDeferredBegin:$s,getFilters:Bu,putStream:Xa,events:_o,scaleFactor:Wt,pageSize:{getWidth:function(){return py(we)},setWidth:function(re){IC(we,re)},getHeight:function(){return A0(we)},setHeight:function(re){Db(we,re)}},encryptionOptions:f,encryption:Nd,getEncryptor:uD,output:Il,getNumberOfPages:Ue,pages:Tt,out:ye,f2:_e,f3:de,getPageInfo:LI,getPageInfoByObjId:Pr,getCurrentPageInfo:hD,getPDFVersion:A,Point:I0,Rectangle:xC,Matrix:Pi,hasHotfix:Ld},Object.defineProperty(_.internal.pageSize,"width",{get:function(){return py(we)},set:function(re){IC(we,re)},enumerable:!0,configurable:!0}),Object.defineProperty(_.internal.pageSize,"height",{get:function(){return A0(we)},set:function(re){Db(we,re)},enumerable:!0,configurable:!0}),b0.call(_,ut),$i="F1",C0(o,e),_o.publish("initialized"),_}UE.prototype.lsbFirstWord=function(r){return String.fromCharCode(r>>0&255,r>>8&255,r>>16&255,r>>24&255)},UE.prototype.toHexString=function(r){return r.split("").map(function(i){return("0"+(255&i.charCodeAt(0)).toString(16)).slice(-2)}).join("")},UE.prototype.hexToBytes=function(r){for(var i=[],e=0;e<r.length;e+=2)i.push(String.fromCharCode(parseInt(r.substr(e,2),16)));return i.join("")},UE.prototype.processOwnerPassword=function(r,i){return BK(NK(i).substr(0,5),r)},UE.prototype.encryptor=function(r,i){var e=NK(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&i,i>>8&255)).substr(0,10);return function(n){return BK(e,n)}},Xj.prototype.equals=function(r){var i,e="id,objectNumber,equals";if(!r||pa(r)!==pa(this))return!1;var n=0;for(i in this)if(!(e.indexOf(i)>=0)){if(this.hasOwnProperty(i)&&!r.hasOwnProperty(i)||this[i]!==r[i])return!1;n++}for(i in r)r.hasOwnProperty(i)&&e.indexOf(i)<0&&n--;return n===0},tr.API={events:[]},tr.version="3.0.1";var _c=tr.API,UK=1,RS=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},VE=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},io=function(r){return r.toFixed(2)},y1=function(r){return r.toFixed(5)};_c.__acroform__={};var Rp=function(r,i){r.prototype=Object.create(i.prototype),r.prototype.constructor=r},i_e=function(r){return r*UK},D_=function(r){var i=new v_e,e=Dn.internal.getHeight(r)||0,n=Dn.internal.getWidth(r)||0;return i.BBox=[0,0,Number(io(n)),Number(io(e))],i},PGe=_c.__acroform__.setBit=function(r,i){if(r=r||0,i=i||0,isNaN(r)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|=1<<i},RGe=_c.__acroform__.clearBit=function(r,i){if(r=r||0,i=i||0,isNaN(r)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&=~(1<<i)},FGe=_c.__acroform__.getBit=function(r,i){if(isNaN(r)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<i?1:0},Oc=_c.__acroform__.getBitForPdf=function(r,i){if(isNaN(r)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return FGe(r,i-1)},Pc=_c.__acroform__.setBitForPdf=function(r,i){if(isNaN(r)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return PGe(r,i-1)},Rc=_c.__acroform__.clearBitForPdf=function(r,i){if(isNaN(r)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return RGe(r,i-1)},LGe=_c.__acroform__.calculateCoordinates=function(r,i){var e=i.internal.getHorizontalCoordinate,n=i.internal.getVerticalCoordinate,o=r[0],s=r[1],l=r[2],h=r[3],p={};return p.lowerLeft_X=e(o)||0,p.lowerLeft_Y=n(s+h)||0,p.upperRight_X=e(o+l)||0,p.upperRight_Y=n(s)||0,[Number(io(p.lowerLeft_X)),Number(io(p.lowerLeft_Y)),Number(io(p.upperRight_X)),Number(io(p.upperRight_Y))]},NGe=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var i=[],e=r._V||r.DV,n=jK(r,e),o=r.scope.internal.getFont(r.fontName,r.fontStyle).id;i.push("/Tx BMC"),i.push("q"),i.push("BT"),i.push(r.scope.__private__.encodeColorString(r.color)),i.push("/"+o+" "+io(n.fontSize)+" Tf"),i.push("1 0 0 1 0 0 Tm"),i.push(n.text),i.push("ET"),i.push("Q"),i.push("EMC");var s=D_(r);return s.scope=r.scope,s.stream=i.join(`
`),s}},jK=function(r,i){var e=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},o=(i=(i=i.substr(0,1)=="("?i.substr(1):i).substr(i.length-1)==")"?i.substr(0,i.length-1):i).split(" ");o=r.multiline?o.map(function(de){return de.split(`
`)}):o.map(function(de){return[de]});var s=e,l=Dn.internal.getHeight(r)||0;l=l<0?-l:l;var h=Dn.internal.getWidth(r)||0;h=h<0?-h:h;var p=function(de,te,Se){if(de+1<o.length){var Te=te+" "+o[de+1][0];return Hj(Te,r,Se).width<=h-4}return!1};s++;e:for(;s>0;){i="",s--;var m,f,g=Hj("3",r,s).height,y=r.multiline?l-s:(l-g)/2,_=y+=2,w=0,A=0,k=0;if(s<=0){i=`(...) Tj
`,i+="% Width of Text: "+Hj(i,r,s=12).width+", FieldWidth:"+h+`
`;break}for(var R="",$=0,H=0;H<o.length;H++)if(o.hasOwnProperty(H)){var oe=!1;if(o[H].length!==1&&k!==o[H].length-1){if((g+2)*($+2)+2>l)continue e;R+=o[H][k],oe=!0,A=H,H--}else{R=(R+=o[H][k]+" ").substr(R.length-1)==" "?R.substr(0,R.length-1):R;var se=parseInt(H),ge=p(se,R,s),ue=H>=o.length-1;if(ge&&!ue){R+=" ",k=0;continue}if(ge||ue){if(ue)A=se;else if(r.multiline&&(g+2)*($+2)+2>l)continue e}else{if(!r.multiline||(g+2)*($+2)+2>l)continue e;A=se}}for(var pe="",Ce=w;Ce<=A;Ce++){var _e=o[Ce];if(r.multiline){if(Ce===A){pe+=_e[k]+" ",k=(k+1)%_e.length;continue}if(Ce===w){pe+=_e[_e.length-1]+" ";continue}}pe+=_e[0]+" "}switch(pe=pe.substr(pe.length-1)==" "?pe.substr(0,pe.length-1):pe,f=Hj(pe,r,s).width,r.textAlign){case"right":m=h-f-2;break;case"center":m=(h-f)/2;break;case"left":default:m=2}i+=io(m)+" "+io(_)+` Td
`,i+="("+RS(pe)+`) Tj
`,i+=-io(m)+` 0 Td
`,_=-(s+2),f=0,w=oe?A:A+1,$++,R=""}break}return n.text=i,n.fontSize=s,n},Hj=function(r,i,e){var n=i.scope.internal.getFont(i.fontName,i.fontStyle),o=i.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:i.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:o}},BGe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},jGe=function(r,i){var e={type:"reference",object:r};i.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===e.type&&n.object===e.object})===void 0&&i.internal.getPageInfo(r.page).pageContext.annotations.push(e)},VGe=function(r,i){for(var e in r)if(r.hasOwnProperty(e)){var n=e,o=r[e];i.internal.newObjectDeferredBegin(o.objId,!0),pa(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete r[n]}},$Ge=function(r,i){if(i.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(Yg.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(BGe)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");UK=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new b_e,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in n)if(n.hasOwnProperty(o)){var s=n[o];s.objId=void 0,s.hasAnnotation&&jGe(s,e)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(e){(function(n,o){var s=!n;for(var l in n||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(l)){var h=n[l],p=[],m=h.Rect;if(h.Rect&&(h.Rect=LGe(h.Rect,o)),o.internal.newObjectDeferredBegin(h.objId,!0),h.DA=Dn.createDefaultAppearanceStream(h),pa(h)==="object"&&typeof h.getKeyValueListForStream=="function"&&(p=h.getKeyValueListForStream()),h.Rect=m,h.hasAppearanceStream&&!h.appearanceStreamContent){var f=NGe(h);p.push({key:"AP",value:"<</N "+f+">>"}),o.internal.acroformPlugin.xForms.push(f)}if(h.appearanceStreamContent){var g="";for(var y in h.appearanceStreamContent)if(h.appearanceStreamContent.hasOwnProperty(y)){var _=h.appearanceStreamContent[y];if(g+="/"+y+" ",g+="<<",Object.keys(_).length>=1||Array.isArray(_)){for(var l in _)if(_.hasOwnProperty(l)){var w=_[l];typeof w=="function"&&(w=w.call(o,h)),g+="/"+l+" "+w+" ",o.internal.acroformPlugin.xForms.indexOf(w)>=0||o.internal.acroformPlugin.xForms.push(w)}}else typeof(w=_)=="function"&&(w=w.call(o,h)),g+="/"+l+" "+w,o.internal.acroformPlugin.xForms.indexOf(w)>=0||o.internal.acroformPlugin.xForms.push(w);g+=">>"}p.push({key:"AP",value:`<<
`+g+">>"})}o.internal.putStream({additionalKeyValues:p,objectId:h.objId}),o.internal.out("endobj")}s&&VGe(o.internal.acroformPlugin.xForms,o)})(e,r)}),r.internal.acroformPlugin.isInitialized=!0}},y_e=_c.__acroform__.arrayToPdfArray=function(r,i,e){var n=function(l){return l};if(Array.isArray(r)){for(var o="[",s=0;s<r.length;s++)switch(s!==0&&(o+=" "),pa(r[s])){case"boolean":case"number":case"object":o+=r[s].toString();break;case"string":r[s].substr(0,1)!=="/"?(i!==void 0&&e&&(n=e.internal.getEncryptor(i)),o+="("+RS(n(r[s].toString()))+")"):o+=r[s].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},PK=function(r,i,e){var n=function(o){return o};return i!==void 0&&e&&(n=e.internal.getEncryptor(i)),(r=r||"").toString(),r="("+RS(n(r))+")"},k_=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};k_.prototype.toString=function(){return this.objId+" 0 R"},k_.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},k_.prototype.getKeyValueListForStream=function(){var r=[],i=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var e in i)if(Object.getOwnPropertyDescriptor(this,i[e]).configurable===!1){var n=i[e],o=this[n];o&&(Array.isArray(o)?r.push({key:n,value:y_e(o,this.objId,this.scope)}):o instanceof k_?(o.scope=this.scope,r.push({key:n,value:o.objId+" 0 R"})):typeof o!="function"&&r.push({key:n,value:o}))}return r};var v_e=function(){k_.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,i=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){r=e.trim()},get:function(){return r||null}})};Rp(v_e,k_);var b_e=function(){k_.call(this);var r,i=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return i.length>0?i:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return i}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var e=function(n){return n};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+RS(e(r))+")"}},set:function(e){r=e}})};Rp(b_e,k_);var Yg=function r(){k_.call(this);var i=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return i},set:function(R){if(isNaN(R))throw new Error('Invalid value "'+R+'" for attribute F supplied.');i=R}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Oc(i,3)},set:function(R){R?this.F=Pc(i,3):this.F=Rc(i,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(R){if(isNaN(R))throw new Error('Invalid value "'+R+'" for attribute Ff supplied.');e=R}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(R){n=R!==void 0?R:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(R){n[0]=R}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(R){n[1]=R}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(R){n[2]=R}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(R){n[3]=R}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(R){switch(R){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=R;break;default:throw new Error('Invalid value "'+R+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Jj)return;s="FieldObject"+r.FieldNum++}var R=function($){return $};return this.scope&&(R=this.scope.internal.getEncryptor(this.objId)),"("+RS(R(s))+")"},set:function(R){s=R.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(R){s=R}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(R){l=R}});var h="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return h},set:function(R){h=R}});var p=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return p},set:function(R){p=R}});var m=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return m===void 0?50/UK:m},set:function(R){m=R}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(R){f=R}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof Jj||this instanceof PS))return PK(g,this.objId,this.scope)},set:function(R){R=R.toString(),g=R}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Yd?y:PK(y,this.objId,this.scope)},set:function(R){R=R.toString(),y=this instanceof Yd?R:R.substr(0,1)==="("?VE(R.substr(1,R.length-2)):VE(R)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yd?VE(y.substr(1,y.length-1)):y},set:function(R){R=R.toString(),y=this instanceof Yd?"/"+R:R}});var _=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(_)return _},set:function(R){this.V=R}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof Yd?_:PK(_,this.objId,this.scope)},set:function(R){R=R.toString(),_=this instanceof Yd?R:R.substr(0,1)==="("?VE(R.substr(1,R.length-2)):VE(R)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yd?VE(_.substr(1,_.length-1)):_},set:function(R){R=R.toString(),_=this instanceof Yd?"/"+R:R}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var w,A=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return A},set:function(R){R=!!R,A=R}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(w)return w},set:function(R){w=R}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,1)},set:function(R){R?this.Ff=Pc(this.Ff,1):this.Ff=Rc(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,2)},set:function(R){R?this.Ff=Pc(this.Ff,2):this.Ff=Rc(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,3)},set:function(R){R?this.Ff=Pc(this.Ff,3):this.Ff=Rc(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(R){if([0,1,2].indexOf(R)===-1)throw new Error('Invalid value "'+R+'" for attribute Q supplied.');k=R}}),Object.defineProperty(this,"textAlign",{get:function(){var R;switch(k){case 0:default:R="left";break;case 1:R="center";break;case 2:R="right"}return R},configurable:!0,enumerable:!0,set:function(R){switch(R){case"right":case 2:k=2;break;case"center":case 1:k=1;break;case"left":case 0:default:k=0}}})};Rp(Yg,k_);var HE=function(){Yg.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){r=e}});var i=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return y_e(i,this.objId,this.scope)},set:function(e){var n,o;o=[],typeof(n=e)=="string"&&(o=function(s,l,h){h||(h=1);for(var p,m=[];p=l.exec(s);)m.push(p[h]);return m}(n,/\((.*?)\)/g)),i=o}}),this.getOptions=function(){return i},this.setOptions=function(e){i=e,this.sort&&i.sort()},this.addOption=function(e){e=(e=e||"").toString(),i.push(e),this.sort&&i.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();i.indexOf(e)!==-1&&(i.splice(i.indexOf(e),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,18)},set:function(e){e?this.Ff=Pc(this.Ff,18):this.Ff=Rc(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=Pc(this.Ff,19):this.Ff=Rc(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,20)},set:function(e){e?(this.Ff=Pc(this.Ff,20),i.sort()):this.Ff=Rc(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,22)},set:function(e){e?this.Ff=Pc(this.Ff,22):this.Ff=Rc(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,23)},set:function(e){e?this.Ff=Pc(this.Ff,23):this.Ff=Rc(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,27)},set:function(e){e?this.Ff=Pc(this.Ff,27):this.Ff=Rc(this.Ff,27)}}),this.hasAppearanceStream=!1};Rp(HE,Yg);var WE=function(){HE.call(this),this.fontName="helvetica",this.combo=!1};Rp(WE,HE);var qE=function(){WE.call(this),this.combo=!0};Rp(qE,WE);var Yj=function(){qE.call(this),this.edit=!0};Rp(Yj,qE);var Yd=function(){Yg.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,15)},set:function(e){e?this.Ff=Pc(this.Ff,15):this.Ff=Rc(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,16)},set:function(e){e?this.Ff=Pc(this.Ff,16):this.Ff=Rc(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,17)},set:function(e){e?this.Ff=Pc(this.Ff,17):this.Ff=Rc(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,26)},set:function(e){e?this.Ff=Pc(this.Ff,26):this.Ff=Rc(this.Ff,26)}});var r,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(s){return s};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(i).length!==0){var n,o=[];for(n in o.push("<<"),i)o.push("/"+n+" ("+RS(e(i[n]))+")");return o.push(">>"),o.join(`
`)}},set:function(e){pa(e)==="object"&&(i=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(e){typeof e=="string"&&(i.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(e){r="/"+e}})};Rp(Yd,Yg);var Kj=function(){Yd.call(this),this.pushButton=!0};Rp(Kj,Yd);var YE=function(){Yd.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(i){r=i!==void 0?i:[]}})};Rp(YE,Yd);var Jj=function(){var r,i;Yg.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(o){r=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return i},set:function(o){i=o}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(h){return h};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var s,l=[];for(s in l.push("<<"),n)l.push("/"+s+" ("+RS(o(n[s]))+")");return l.push(">>"),l.join(`
`)},set:function(o){pa(o)==="object"&&(n=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(o){typeof o=="string"&&(n.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(o){e=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(o){e="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Dn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Rp(Jj,Yg),YE.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var i in this.Kids)if(this.Kids.hasOwnProperty(i)){var e=this.Kids[i];e.appearanceStreamContent=r.createAppearanceStream(e.optionName),e.caption=r.getCA()}},YE.prototype.createOption=function(r){var i=new Jj;return i.Parent=this,i.optionName=r,this.Kids.push(i),UGe.call(this.scope,i),i};var Zj=function(){Yd.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Dn.CheckBox.createAppearanceStream()};Rp(Zj,Yd);var PS=function(){Yg.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,13)},set:function(i){i?this.Ff=Pc(this.Ff,13):this.Ff=Rc(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,21)},set:function(i){i?this.Ff=Pc(this.Ff,21):this.Ff=Rc(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,23)},set:function(i){i?this.Ff=Pc(this.Ff,23):this.Ff=Rc(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,24)},set:function(i){i?this.Ff=Pc(this.Ff,24):this.Ff=Rc(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,25)},set:function(i){i?this.Ff=Pc(this.Ff,25):this.Ff=Rc(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,26)},set:function(i){i?this.Ff=Pc(this.Ff,26):this.Ff=Rc(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(i){Number.isInteger(i)&&(r=i)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Rp(PS,Yg);var Qj=function(){PS.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Oc(this.Ff,14)},set:function(r){r?this.Ff=Pc(this.Ff,14):this.Ff=Rc(this.Ff,14)}}),this.password=!0};Rp(Qj,PS);var Dn={CheckBox:{createAppearanceStream:function(){return{N:{On:Dn.CheckBox.YesNormal},D:{On:Dn.CheckBox.YesPushDown,Off:Dn.CheckBox.OffPushDown}}},YesPushDown:function(r){var i=D_(r);i.scope=r.scope;var e=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,o=r.scope.__private__.encodeColorString(r.color),s=jK(r,r.caption);return e.push("0.749023 g"),e.push("0 0 "+io(Dn.internal.getWidth(r))+" "+io(Dn.internal.getHeight(r))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+n+" "+io(s.fontSize)+" Tf "+o),e.push("BT"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC"),i.stream=e.join(`
`),i},YesNormal:function(r){var i=D_(r);i.scope=r.scope;var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),o=[],s=Dn.internal.getHeight(r),l=Dn.internal.getWidth(r),h=jK(r,r.caption);return o.push("1 g"),o.push("0 0 "+io(l)+" "+io(s)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+io(l-1)+" "+io(s-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+e+" "+io(h.fontSize)+" Tf "+n),o.push(h.text),o.push("ET"),o.push("Q"),i.stream=o.join(`
`),i},OffPushDown:function(r){var i=D_(r);i.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+io(Dn.internal.getWidth(r))+" "+io(Dn.internal.getHeight(r))+" re"),e.push("f"),i.stream=e.join(`
`),i}},RadioButton:{Circle:{createAppearanceStream:function(r){var i={D:{Off:Dn.RadioButton.Circle.OffPushDown},N:{}};return i.N[r]=Dn.RadioButton.Circle.YesNormal,i.D[r]=Dn.RadioButton.Circle.YesPushDown,i},getCA:function(){return"l"},YesNormal:function(r){var i=D_(r);i.scope=r.scope;var e=[],n=Dn.internal.getWidth(r)<=Dn.internal.getHeight(r)?Dn.internal.getWidth(r)/4:Dn.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var o=Dn.internal.Bezier_C,s=Number((n*o).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+y1(Dn.internal.getWidth(r)/2)+" "+y1(Dn.internal.getHeight(r)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),e.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),e.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),e.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),e.push("f"),e.push("Q"),i.stream=e.join(`
`),i},YesPushDown:function(r){var i=D_(r);i.scope=r.scope;var e=[],n=Dn.internal.getWidth(r)<=Dn.internal.getHeight(r)?Dn.internal.getWidth(r)/4:Dn.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var o=Number((2*n).toFixed(5)),s=Number((o*Dn.internal.Bezier_C).toFixed(5)),l=Number((n*Dn.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+y1(Dn.internal.getWidth(r)/2)+" "+y1(Dn.internal.getHeight(r)/2)+" cm"),e.push(o+" 0 m"),e.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),e.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),e.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),e.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+y1(Dn.internal.getWidth(r)/2)+" "+y1(Dn.internal.getHeight(r)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+l+" "+l+" "+n+" 0 "+n+" c"),e.push("-"+l+" "+n+" -"+n+" "+l+" -"+n+" 0 c"),e.push("-"+n+" -"+l+" -"+l+" -"+n+" 0 -"+n+" c"),e.push(l+" -"+n+" "+n+" -"+l+" "+n+" 0 c"),e.push("f"),e.push("Q"),i.stream=e.join(`
`),i},OffPushDown:function(r){var i=D_(r);i.scope=r.scope;var e=[],n=Dn.internal.getWidth(r)<=Dn.internal.getHeight(r)?Dn.internal.getWidth(r)/4:Dn.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var o=Number((2*n).toFixed(5)),s=Number((o*Dn.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+y1(Dn.internal.getWidth(r)/2)+" "+y1(Dn.internal.getHeight(r)/2)+" cm"),e.push(o+" 0 m"),e.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),e.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),e.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),e.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),e.push("f"),e.push("Q"),i.stream=e.join(`
`),i}},Cross:{createAppearanceStream:function(r){var i={D:{Off:Dn.RadioButton.Cross.OffPushDown},N:{}};return i.N[r]=Dn.RadioButton.Cross.YesNormal,i.D[r]=Dn.RadioButton.Cross.YesPushDown,i},getCA:function(){return"8"},YesNormal:function(r){var i=D_(r);i.scope=r.scope;var e=[],n=Dn.internal.calculateCross(r);return e.push("q"),e.push("1 1 "+io(Dn.internal.getWidth(r)-2)+" "+io(Dn.internal.getHeight(r)-2)+" re"),e.push("W"),e.push("n"),e.push(io(n.x1.x)+" "+io(n.x1.y)+" m"),e.push(io(n.x2.x)+" "+io(n.x2.y)+" l"),e.push(io(n.x4.x)+" "+io(n.x4.y)+" m"),e.push(io(n.x3.x)+" "+io(n.x3.y)+" l"),e.push("s"),e.push("Q"),i.stream=e.join(`
`),i},YesPushDown:function(r){var i=D_(r);i.scope=r.scope;var e=Dn.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+io(Dn.internal.getWidth(r))+" "+io(Dn.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+io(Dn.internal.getWidth(r)-2)+" "+io(Dn.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(io(e.x1.x)+" "+io(e.x1.y)+" m"),n.push(io(e.x2.x)+" "+io(e.x2.y)+" l"),n.push(io(e.x4.x)+" "+io(e.x4.y)+" m"),n.push(io(e.x3.x)+" "+io(e.x3.y)+" l"),n.push("s"),n.push("Q"),i.stream=n.join(`
`),i},OffPushDown:function(r){var i=D_(r);i.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+io(Dn.internal.getWidth(r))+" "+io(Dn.internal.getHeight(r))+" re"),e.push("f"),i.stream=e.join(`
`),i}}},createDefaultAppearanceStream:function(r){var i=r.scope.internal.getFont(r.fontName,r.fontStyle).id,e=r.scope.__private__.encodeColorString(r.color);return"/"+i+" "+r.fontSize+" Tf "+e}};Dn.internal={Bezier_C:.551915024494,calculateCross:function(r){var i=Dn.internal.getWidth(r),e=Dn.internal.getHeight(r),n=Math.min(i,e);return{x1:{x:(i-n)/2,y:(e-n)/2+n},x2:{x:(i-n)/2+n,y:(e-n)/2},x3:{x:(i-n)/2,y:(e-n)/2},x4:{x:(i-n)/2+n,y:(e-n)/2+n}}}},Dn.internal.getWidth=function(r){var i=0;return pa(r)==="object"&&(i=i_e(r.Rect[2])),i},Dn.internal.getHeight=function(r){var i=0;return pa(r)==="object"&&(i=i_e(r.Rect[3])),i};var UGe=_c.addField=function(r){if($Ge(this,r),!(r instanceof Yg))throw new Error("Invalid argument passed to jsPDF.addField.");var i;return(i=r).scope.internal.acroformPlugin.printedOut&&(i.scope.internal.acroformPlugin.printedOut=!1,i.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),i.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(i),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};_c.AcroFormChoiceField=HE,_c.AcroFormListBox=WE,_c.AcroFormComboBox=qE,_c.AcroFormEditBox=Yj,_c.AcroFormButton=Yd,_c.AcroFormPushButton=Kj,_c.AcroFormRadioButton=YE,_c.AcroFormCheckBox=Zj,_c.AcroFormTextField=PS,_c.AcroFormPasswordField=Qj,_c.AcroFormAppearance=Dn,_c.AcroForm={ChoiceField:HE,ListBox:WE,ComboBox:qE,EditBox:Yj,Button:Yd,PushButton:Kj,RadioButton:YE,CheckBox:Zj,TextField:PS,PasswordField:Qj,Appearance:Dn},tr.AcroForm={ChoiceField:HE,ListBox:WE,ComboBox:qE,EditBox:Yj,Button:Yd,PushButton:Kj,RadioButton:YE,CheckBox:Zj,TextField:PS,PasswordField:Qj,Appearance:Dn};var tYt=tr.AcroForm;function w_e(r){return r.reduce(function(i,e,n){return i[e]=n,i},{})}(function(r){r.__addimage__={};var i="UNKNOWN",e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=r.__addimage__.getImageFileTypeByImageData=function(de,te){var Se,Te,De,Le,Me,ze=i;if((te=te||i)==="RGBA"||de.data!==void 0&&de.data instanceof Uint8ClampedArray&&"height"in de&&"width"in de)return"RGBA";if(ge(de))for(Me in e)for(De=e[Me],Se=0;Se<De.length;Se+=1){for(Le=!0,Te=0;Te<De[Se].length;Te+=1)if(De[Se][Te]!==void 0&&De[Se][Te]!==de[Te]){Le=!1;break}if(Le===!0){ze=Me;break}}else for(Me in e)for(De=e[Me],Se=0;Se<De.length;Se+=1){for(Le=!0,Te=0;Te<De[Se].length;Te+=1)if(De[Se][Te]!==void 0&&De[Se][Te]!==de.charCodeAt(Te)){Le=!1;break}if(Le===!0){ze=Me;break}}return ze===i&&te!==i&&(ze=te),ze},o=function de(te){for(var Se=this.internal.write,Te=this.internal.putStream,De=(0,this.internal.getFilters)();De.indexOf("FlateEncode")!==-1;)De.splice(De.indexOf("FlateEncode"),1);te.objectId=this.internal.newObject();var Le=[];if(Le.push({key:"Type",value:"/XObject"}),Le.push({key:"Subtype",value:"/Image"}),Le.push({key:"Width",value:te.width}),Le.push({key:"Height",value:te.height}),te.colorSpace===k.INDEXED?Le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(te.palette.length/3-1)+" "+("sMask"in te&&te.sMask!==void 0?te.objectId+2:te.objectId+1)+" 0 R]"}):(Le.push({key:"ColorSpace",value:"/"+te.colorSpace}),te.colorSpace===k.DEVICE_CMYK&&Le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Le.push({key:"BitsPerComponent",value:te.bitsPerComponent}),"decodeParameters"in te&&te.decodeParameters!==void 0&&Le.push({key:"DecodeParms",value:"<<"+te.decodeParameters+">>"}),"transparency"in te&&Array.isArray(te.transparency)){for(var Me="",ze=0,Ve=te.transparency.length;ze<Ve;ze++)Me+=te.transparency[ze]+" "+te.transparency[ze]+" ";Le.push({key:"Mask",value:"["+Me+"]"})}te.sMask!==void 0&&Le.push({key:"SMask",value:te.objectId+1+" 0 R"});var $e=te.filter!==void 0?["/"+te.filter]:void 0;if(Te({data:te.data,additionalKeyValues:Le,alreadyAppliedFilters:$e,objectId:te.objectId}),Se("endobj"),"sMask"in te&&te.sMask!==void 0){var nt="/Predictor "+te.predictor+" /Colors 1 /BitsPerComponent "+te.bitsPerComponent+" /Columns "+te.width,be={width:te.width,height:te.height,colorSpace:"DeviceGray",bitsPerComponent:te.bitsPerComponent,decodeParameters:nt,data:te.sMask};"filter"in te&&(be.filter=te.filter),de.call(this,be)}if(te.colorSpace===k.INDEXED){var we=this.internal.newObject();Te({data:pe(new Uint8Array(te.palette)),objectId:we}),Se("endobj")}},s=function(){var de=this.internal.collections.addImage_images;for(var te in de)o.call(this,de[te])},l=function(){var de,te=this.internal.collections.addImage_images,Se=this.internal.write;for(var Te in te)Se("/I"+(de=te[Te]).index,de.objectId,"0","R")},h=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",l))},p=function(){var de=this.internal.collections.addImage_images;return h.call(this),de},m=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(de){return typeof r["process"+de.toUpperCase()]=="function"},g=function(de){return pa(de)==="object"&&de.nodeType===1},y=function(de,te){if(de.nodeName==="IMG"&&de.hasAttribute("src")){var Se=""+de.getAttribute("src");if(Se.indexOf("data:image/")===0)return LP(unescape(Se).split("base64,").pop());var Te=r.loadFile(Se,!0);if(Te!==void 0)return Te}if(de.nodeName==="CANVAS"){if(de.width===0||de.height===0)throw new Error("Given canvas must have data. Canvas width: "+de.width+", height: "+de.height);var De;switch(te){case"PNG":De="image/png";break;case"WEBP":De="image/webp";break;case"JPEG":case"JPG":default:De="image/jpeg"}return LP(de.toDataURL(De,1).split("base64,").pop())}},_=function(de){var te=this.internal.collections.addImage_images;if(te){for(var Se in te)if(de===te[Se].alias)return te[Se]}},w=function(de,te,Se){return de||te||(de=-96,te=-96),de<0&&(de=-1*Se.width*72/de/this.internal.scaleFactor),te<0&&(te=-1*Se.height*72/te/this.internal.scaleFactor),de===0&&(de=te*Se.width/Se.height),te===0&&(te=de*Se.height/Se.width),[de,te]},A=function(de,te,Se,Te,De,Le){var Me=w.call(this,Se,Te,De),ze=this.internal.getCoordinateString,Ve=this.internal.getVerticalCoordinateString,$e=p.call(this);if(Se=Me[0],Te=Me[1],$e[De.index]=De,Le){Le*=Math.PI/180;var nt=Math.cos(Le),be=Math.sin(Le),we=function(et){return et.toFixed(4)},ke=[we(nt),we(be),we(-1*be),we(nt),0,0,"cm"]}this.internal.write("q"),Le?(this.internal.write([1,"0","0",1,ze(de),Ve(te+Te),"cm"].join(" ")),this.internal.write(ke.join(" ")),this.internal.write([ze(Se),"0","0",ze(Te),"0","0","cm"].join(" "))):this.internal.write([ze(Se),"0","0",ze(Te),ze(de),Ve(te+Te),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+De.index+" Do"),this.internal.write("Q")},k=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var R=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},$=r.__addimage__.sHashCode=function(de){var te,Se,Te=0;if(typeof de=="string")for(Se=de.length,te=0;te<Se;te++)Te=(Te<<5)-Te+de.charCodeAt(te),Te|=0;else if(ge(de))for(Se=de.byteLength/2,te=0;te<Se;te++)Te=(Te<<5)-Te+de[te],Te|=0;return Te},H=r.__addimage__.validateStringAsBase64=function(de){(de=de||"").toString().trim();var te=!0;return de.length===0&&(te=!1),de.length%4!=0&&(te=!1),/^[A-Za-z0-9+/]+$/.test(de.substr(0,de.length-2))===!1&&(te=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(de.substr(-2))===!1&&(te=!1),te},oe=r.__addimage__.extractImageFromDataUrl=function(de){if(de==null||!(de=de.trim()).startsWith("data:"))return null;var te=de.indexOf(",");return te<0?null:de.substring(0,te).trim().endsWith("base64")?de.substring(te+1):null},se=r.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};r.__addimage__.isArrayBuffer=function(de){return se()&&de instanceof ArrayBuffer};var ge=r.__addimage__.isArrayBufferView=function(de){return se()&&typeof Uint32Array<"u"&&(de instanceof Int8Array||de instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&de instanceof Uint8ClampedArray||de instanceof Int16Array||de instanceof Uint16Array||de instanceof Int32Array||de instanceof Uint32Array||de instanceof Float32Array||de instanceof Float64Array)},ue=r.__addimage__.binaryStringToUint8Array=function(de){for(var te=de.length,Se=new Uint8Array(te),Te=0;Te<te;Te++)Se[Te]=de.charCodeAt(Te);return Se},pe=r.__addimage__.arrayBufferToBinaryString=function(de){for(var te="",Se=ge(de)?de:new Uint8Array(de),Te=0;Te<Se.length;Te+=8192)te+=String.fromCharCode.apply(null,Se.subarray(Te,Te+8192));return te};r.addImage=function(){var de,te,Se,Te,De,Le,Me,ze,Ve;if(typeof arguments[1]=="number"?(te=i,Se=arguments[1],Te=arguments[2],De=arguments[3],Le=arguments[4],Me=arguments[5],ze=arguments[6],Ve=arguments[7]):(te=arguments[1],Se=arguments[2],Te=arguments[3],De=arguments[4],Le=arguments[5],Me=arguments[6],ze=arguments[7],Ve=arguments[8]),pa(de=arguments[0])==="object"&&!g(de)&&"imageData"in de){var $e=de;de=$e.imageData,te=$e.format||te||i,Se=$e.x||Se||0,Te=$e.y||Te||0,De=$e.w||$e.width||De,Le=$e.h||$e.height||Le,Me=$e.alias||Me,ze=$e.compression||ze,Ve=$e.rotation||$e.angle||Ve}var nt=this.internal.getFilters();if(ze===void 0&&nt.indexOf("FlateEncode")!==-1&&(ze="SLOW"),isNaN(Se)||isNaN(Te))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var be=Ce.call(this,de,te,Me,ze);return A.call(this,Se,Te,De,Le,be,Ve),this};var Ce=function(de,te,Se,Te){var De,Le,Me;if(typeof de=="string"&&n(de)===i){de=unescape(de);var ze=_e(de,!1);(ze!==""||(ze=r.loadFile(de,!0))!==void 0)&&(de=ze)}if(g(de)&&(de=y(de,te)),te=n(de,te),!f(te))throw new Error("addImage does not support files of type '"+te+"', please ensure that a plugin for '"+te+"' support is added.");if(((Me=Se)==null||Me.length===0)&&(Se=function(Ve){return typeof Ve=="string"||ge(Ve)?$(Ve):ge(Ve.data)?$(Ve.data):null}(de)),(De=_.call(this,Se))||(se()&&(de instanceof Uint8Array||te==="RGBA"||(Le=de,de=ue(de))),De=this["process"+te.toUpperCase()](de,m.call(this),Se,function(Ve){return Ve&&typeof Ve=="string"&&(Ve=Ve.toUpperCase()),Ve in r.image_compression?Ve:R.NONE}(Te),Le)),!De)throw new Error("An unknown error occurred whilst processing the image.");return De},_e=r.__addimage__.convertBase64ToBinaryString=function(de,te){te=typeof te!="boolean"||te;var Se,Te="";if(typeof de=="string"){var De;Se=(De=oe(de))!==null&&De!==void 0?De:de;try{Te=LP(Se)}catch(Le){if(te)throw H(Se)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Te};r.getImageProperties=function(de){var te,Se,Te="";if(g(de)&&(de=y(de)),typeof de=="string"&&n(de)===i&&((Te=_e(de,!1))===""&&(Te=r.loadFile(de)||""),de=Te),Se=n(de),!f(Se))throw new Error("addImage does not support files of type '"+Se+"', please ensure that a plugin for '"+Se+"' support is added.");if(!se()||de instanceof Uint8Array||(de=ue(de)),!(te=this["process"+Se.toUpperCase()](de)))throw new Error("An unknown error occurred whilst processing the image");return te.fileType=Se,te}})(tr.API),function(r){var i=function(e){if(e!==void 0&&e!="")return!0};tr.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(e){for(var n,o,s,l=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString,p=this.internal.getPageInfoByObjId(e.objId),m=e.pageContext.annotations,f=!1,g=0;g<m.length&&!f;g++)switch((n=m[g]).type){case"link":(i(n.options.url)||i(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var y=0;y<m.length;y++){n=m[y];var _=this.internal.pdfEscape,w=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var A=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),R=this.internal.getEncryptor(A.objId),$=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(o="/Rect ["+l(n.bounds.x)+" "+h(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w)+" "+h(n.bounds.y)+"] ")+"/Contents ("+_(R(n.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+p.objId+" 0 R",s+=" /T ("+_(R($))+") >>",A.content=s;var H=A.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+l(n.bounds.x+30)+" "+h(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w+30)+" "+h(n.bounds.y)+"] ")+" /Parent "+H,n.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(A.objId,"0 R",k.objId,"0 R");break;case"freetext":o="/Rect ["+l(n.bounds.x)+" "+h(n.bounds.y)+" "+l(n.bounds.x+n.bounds.w)+" "+h(n.bounds.y+n.bounds.h)+"] ";var oe=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+_(w(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+oe+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var se=this.annotations._nameMap[n.options.name];n.options.pageNumber=se.page,n.options.top=se.y}else n.options.top||(n.options.top=0);if(o="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+_(w(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var ge=h(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+ge+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),r.createAnnotation=function(e){var n=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":n.pageContext.annotations.push(e)}},r.link=function(e,n,o,s,l){var h=this.internal.getCurrentPageInfo(),p=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString;h.pageContext.annotations.push({finalBounds:{x:p(e),y:m(n),w:p(e+o),h:m(n+s)},options:l,type:"link"})},r.textWithLink=function(e,n,o,s){var l,h,p=this.getTextWidth(e),m=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){h=s.maxWidth;var f=this.splitTextToSize(e,h).length;l=Math.ceil(m*f)}else h=p,l=m;return this.text(e,n,o,s),o+=.2*m,s.align==="center"&&(n-=p/2),s.align==="right"&&(n-=p),this.link(n,o-m,h,l,s),p},r.getTextWidth=function(e){var n=this.internal.getFontSize();return this.getStringUnitWidth(e)*n/this.internal.scaleFactor}}(tr.API),function(r){var i={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];r.__arabicParser__={};var s=r.__arabicParser__.isInArabicSubstitutionA=function(A){return i[A.charCodeAt(0)]!==void 0},l=r.__arabicParser__.isArabicLetter=function(A){return typeof A=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(A)},h=r.__arabicParser__.isArabicEndLetter=function(A){return l(A)&&s(A)&&i[A.charCodeAt(0)].length<=2},p=r.__arabicParser__.isArabicAlfLetter=function(A){return l(A)&&o.indexOf(A.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(A){return l(A)&&s(A)&&i[A.charCodeAt(0)].length>=1};var m=r.__arabicParser__.arabicLetterHasFinalForm=function(A){return l(A)&&s(A)&&i[A.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(A){return l(A)&&s(A)&&i[A.charCodeAt(0)].length>=3};var f=r.__arabicParser__.arabicLetterHasMedialForm=function(A){return l(A)&&s(A)&&i[A.charCodeAt(0)].length==4},g=r.__arabicParser__.resolveLigatures=function(A){var k=0,R=e,$="",H=0;for(k=0;k<A.length;k+=1)R[A.charCodeAt(k)]!==void 0?(H++,typeof(R=R[A.charCodeAt(k)])=="number"&&($+=String.fromCharCode(R),R=e,H=0),k===A.length-1&&(R=e,$+=A.charAt(k-(H-1)),k-=H-1,H=0)):(R=e,$+=A.charAt(k-H),k-=H,H=0);return $};r.__arabicParser__.isArabicDiacritic=function(A){return A!==void 0&&n[A.charCodeAt(0)]!==void 0};var y=r.__arabicParser__.getCorrectForm=function(A,k,R){return l(A)?s(A)===!1?-1:!m(A)||!l(k)&&!l(R)||!l(R)&&h(k)||h(A)&&!l(k)||h(A)&&p(k)||h(A)&&h(k)?0:f(A)&&l(k)&&!h(k)&&l(R)&&m(R)?3:h(A)||!l(R)?1:2:-1},_=function(A){var k=0,R=0,$=0,H="",oe="",se="",ge=(A=A||"").split("\\s+"),ue=[];for(k=0;k<ge.length;k+=1){for(ue.push(""),R=0;R<ge[k].length;R+=1)H=ge[k][R],oe=ge[k][R-1],se=ge[k][R+1],l(H)?($=y(H,oe,se),ue[k]+=$!==-1?String.fromCharCode(i[H.charCodeAt(0)][$]):H):ue[k]+=H;ue[k]=g(ue[k])}return ue.join(" ")},w=r.__arabicParser__.processArabic=r.processArabic=function(){var A,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,R=[];if(Array.isArray(k)){var $=0;for(R=[],$=0;$<k.length;$+=1)Array.isArray(k[$])?R.push([_(k[$][0]),k[$][1],k[$][2]]):R.push([_(k[$])]);A=R}else A=_(k);return typeof arguments[0]=="string"?A:(arguments[0].text=A,arguments[0])};r.events.push(["preProcessText",w])}(tr.API),tr.API.autoPrint=function(r){var i;switch((r=r||{}).variant=r.variant||"non-conform",r.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){i=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+i+" 0 R")})}return this},function(r){var i=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(h){e=h}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(h){n=isNaN(h)||Number.isInteger(h)===!1||h<0?150:h,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(h){o=isNaN(h)||Number.isInteger(h)===!1||h<0?300:h,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(h){s=h}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(h){l=h}}),Object.defineProperty(this,"parentNode",{})};i.prototype.getContext=function(e,n){var o;if((e=e||"2d")!=="2d")return null;for(o in n)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=n[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},i.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new i,this.canvas.pdf=this}])}(tr.API),function(r){var i={left:0,top:0,bottom:0,right:0},e=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},i),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var p=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return p},set:function(A){p=A}});var m=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return m},set:function(A){m=A}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(A){f=A}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(A){g=A}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(A){y=A}});var _=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return _},set:function(A){_=A}});var w=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return w},set:function(A){w=A}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(p){return n.call(this),this.internal.__cell__.headerFunction=typeof p=="function"?p:void 0,this},r.getTextDimensions=function(p,m){n.call(this);var f=(m=m||{}).fontSize||this.getFontSize(),g=m.font||this.getFont(),y=m.scaleFactor||this.internal.scaleFactor,_=0,w=0,A=0,k=this;if(!Array.isArray(p)&&typeof p!="string"){if(typeof p!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");p=String(p)}var R=m.maxWidth;R>0?typeof p=="string"?p=this.splitTextToSize(p,R):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(H,oe){return H.concat(k.splitTextToSize(oe,R))},[])):p=Array.isArray(p)?p:[p];for(var $=0;$<p.length;$++)_<(A=this.getStringUnitWidth(p[$],{font:g})*f)&&(_=A);return _!==0&&(w=p.length),{w:_/=y,h:Math.max((w*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/y,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var p=this.internal.__cell__.margins||i;return this.internal.__cell__.lastCell=new s(p.left,p.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=r.cell=function(){var p;p=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var m=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,g=this.internal.__cell__.margins||i,y=this.internal.__cell__.tableHeaderRow,_=this.internal.__cell__.printHeaders;return m.lineNumber!==void 0&&(m.lineNumber===p.lineNumber?(p.x=(m.x||0)+(m.width||0),p.y=m.y||0):m.y+m.height+p.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),p.y=g.top,_&&y&&(this.printHeaderRow(p.lineNumber,!0),p.y+=y[0].height)):p.y=m.y+m.height||p.y),p.text[0]!==void 0&&(this.rect(p.x,p.y,p.width,p.height,e===!0?"FD":void 0),p.align==="right"?this.text(p.text,p.x+p.width-f,p.y+f,{align:"right",baseline:"top"}):p.align==="center"?this.text(p.text,p.x+p.width/2,p.y+f,{align:"center",baseline:"top",maxWidth:p.width-f-f}):this.text(p.text,p.x+f,p.y+f,{align:"left",baseline:"top",maxWidth:p.width-f-f})),this.internal.__cell__.lastCell=p,this};r.table=function(p,m,f,g,y){if(n.call(this),!f)throw new Error("No data for PDF table.");var _,w,A,k,R=[],$=[],H=[],oe={},se={},ge=[],ue=[],pe=(y=y||{}).autoSize||!1,Ce=y.printHeaders!==!1,_e=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,de=y.margins||Object.assign({width:this.getPageWidth()},i),te=typeof y.padding=="number"?y.padding:3,Se=y.headerBackgroundColor||"#c8c8c8",Te=y.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=Ce,this.internal.__cell__.margins=de,this.internal.__cell__.table_font_size=_e,this.internal.__cell__.padding=te,this.internal.__cell__.headerBackgroundColor=Se,this.internal.__cell__.headerTextColor=Te,this.setFontSize(_e),g==null)$=R=Object.keys(f[0]),H=R.map(function(){return"left"});else if(Array.isArray(g)&&pa(g[0])==="object")for(R=g.map(function($e){return $e.name}),$=g.map(function($e){return $e.prompt||$e.name||""}),H=g.map(function($e){return $e.align||"left"}),_=0;_<g.length;_+=1)se[g[_].name]=g[_].width*(19.049976/25.4);else Array.isArray(g)&&typeof g[0]=="string"&&($=R=g,H=R.map(function(){return"left"}));if(pe||Array.isArray(g)&&typeof g[0]=="string")for(_=0;_<R.length;_+=1){for(oe[k=R[_]]=f.map(function($e){return $e[k]}),this.setFont(void 0,"bold"),ge.push(this.getTextDimensions($[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),w=oe[k],this.setFont(void 0,"normal"),A=0;A<w.length;A+=1)ge.push(this.getTextDimensions(w[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);se[k]=Math.max.apply(null,ge)+te+te,ge=[]}if(Ce){var De={};for(_=0;_<R.length;_+=1)De[R[_]]={},De[R[_]].text=$[_],De[R[_]].align=H[_];var Le=h.call(this,De,se);ue=R.map(function($e){return new s(p,m,se[$e],Le,De[$e].text,void 0,De[$e].align)}),this.setTableHeaderRow(ue),this.printHeaderRow(1,!1)}var Me=g.reduce(function($e,nt){return $e[nt.name]=nt.align,$e},{});for(_=0;_<f.length;_+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:_,data:f[_]},this);var ze=h.call(this,f[_],se);for(A=0;A<R.length;A+=1){var Ve=f[_][R[A]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:_,col:A,data:Ve},this),l.call(this,new s(p,m,se[R[A]],ze,Ve,_+2,Me[R[A]]))}}return this.internal.__cell__.table_x=p,this.internal.__cell__.table_y=m,this};var h=function(p,m){var f=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(p).map(function(_){var w=p[_];return this.splitTextToSize(w.hasOwnProperty("text")?w.text:w,m[_]-f-f)},this).map(function(_){return this.getLineHeightFactor()*_.length*g/y+f+f},this).reduce(function(_,w){return Math.max(_,w)},0)};r.setTableHeaderRow=function(p){n.call(this),this.internal.__cell__.tableHeaderRow=p},r.printHeaderRow=function(p,m){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],_=0;_<this.internal.__cell__.tableHeaderRow.length;_+=1){f=this.internal.__cell__.tableHeaderRow[_].clone(),m&&(f.y=this.internal.__cell__.margins.top||0,y.push(f)),f.lineNumber=p;var w=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,f),this.setTextColor(w)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),e=!1}}(tr.API);var C_e={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},x_e=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],VK=w_e(x_e),S_e=[100,200,300,400,500,600,700,800,900],zGe=w_e(S_e);function $K(r){var i=r.family.replace(/"|'/g,"").toLowerCase(),e=function(s){return C_e[s=s||"normal"]?s:"normal"}(r.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(r.weight),o=function(s){return typeof VK[s=s||"normal"]=="number"?s:"normal"}(r.stretch);return{family:i,style:e,weight:n,stretch:o,src:r.src||[],ref:r.ref||{name:i,style:[o,e,n].join(" ")}}}function n_e(r,i,e,n){var o;for(o=e;o>=0&&o<i.length;o+=n)if(r[i[o]])return r[i[o]];for(o=e;o>=0&&o<i.length;o-=n)if(r[i[o]])return r[i[o]]}var GGe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},r_e={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function o_e(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function HGe(r,i,e){for(var n=(e=e||{}).defaultFontFamily||"times",o=Object.assign({},GGe,e.genericFontFamilies||{}),s=null,l=null,h=0;h<i.length;++h)if(o[(s=$K(i[h])).family]&&(s.family=o[s.family]),r.hasOwnProperty(s.family)){l=r[s.family];break}if(!(l=l||r[n]))throw new Error("Could not find a font-family for the rule '"+o_e(s)+"' and default family '"+n+"'.");if(l=function(p,m){if(m[p])return m[p];var f=VK[p],g=f<=VK.normal?-1:1,y=n_e(m,x_e,f,g);if(!y)throw new Error("Could not find a matching font-stretch value for "+p);return y}(s.stretch,l),l=function(p,m){if(m[p])return m[p];for(var f=C_e[p],g=0;g<f.length;++g)if(m[f[g]])return m[f[g]];throw new Error("Could not find a matching font-style for "+p)}(s.style,l),!(l=function(p,m){if(m[p])return m[p];if(p===400&&m[500])return m[500];if(p===500&&m[400])return m[400];var f=zGe[p],g=n_e(m,S_e,f,p<400?-1:1);if(!g)throw new Error("Could not find a matching font-weight for value "+p);return g}(s.weight,l)))throw new Error("Failed to resolve a font for the rule '"+o_e(s)+"'.");return l}function s_e(r){return r.trimLeft()}function WGe(r,i){for(var e=0;e<r.length;){if(r.charAt(e)===i)return[r.substring(0,e),r.substring(e+1)];e+=1}return null}function qGe(r){var i=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return i===null?null:[i[0],r.substring(i[0].length)]}var Wj,a_e,l_e,RK=["times"];(function(r){var i,e,n,o,s,l,h,p,m,f=function(be){return be=be||{},this.isStrokeTransparent=be.isStrokeTransparent||!1,this.strokeOpacity=be.strokeOpacity||1,this.strokeStyle=be.strokeStyle||"#000000",this.fillStyle=be.fillStyle||"#000000",this.isFillTransparent=be.isFillTransparent||!1,this.fillOpacity=be.fillOpacity||1,this.font=be.font||"10px sans-serif",this.textBaseline=be.textBaseline||"alphabetic",this.textAlign=be.textAlign||"left",this.lineWidth=be.lineWidth||1,this.lineJoin=be.lineJoin||"miter",this.lineCap=be.lineCap||"butt",this.path=be.path||[],this.transform=be.transform!==void 0?be.transform.clone():new p,this.globalCompositeOperation=be.globalCompositeOperation||"normal",this.globalAlpha=be.globalAlpha||1,this.clip_path=be.clip_path||[],this.currentPoint=be.currentPoint||new l,this.miterLimit=be.miterLimit||10,this.lastPoint=be.lastPoint||new l,this.lineDashOffset=be.lineDashOffset||0,this.lineDash=be.lineDash||[],this.margin=be.margin||[0,0,0,0],this.prevPageLastElemOffset=be.prevPageLastElemOffset||0,this.ignoreClearRect=typeof be.ignoreClearRect!="boolean"||be.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new g(this),i=this.internal.f2,e=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,l=this.internal.Point,h=this.internal.Rectangle,p=this.internal.Matrix,m=new f}]);var g=function(be){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var we=be;Object.defineProperty(this,"pdf",{get:function(){return we}});var ke=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ke},set:function(Pe){ke=!!Pe}});var et=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return et},set:function(Pe){et=!!Pe}});var Qe=0;Object.defineProperty(this,"posX",{get:function(){return Qe},set:function(Pe){isNaN(Pe)||(Qe=Pe)}});var at=0;Object.defineProperty(this,"posY",{get:function(){return at},set:function(Pe){isNaN(Pe)||(at=Pe)}}),Object.defineProperty(this,"margin",{get:function(){return m.margin},set:function(Pe){var ye;typeof Pe=="number"?ye=[Pe,Pe,Pe,Pe]:((ye=new Array(4))[0]=Pe[0],ye[1]=Pe.length>=2?Pe[1]:ye[0],ye[2]=Pe.length>=3?Pe[2]:ye[0],ye[3]=Pe.length>=4?Pe[3]:ye[1]),m.margin=ye}});var _t=!1;Object.defineProperty(this,"autoPaging",{get:function(){return _t},set:function(Pe){_t=Pe}});var ht=0;Object.defineProperty(this,"lastBreak",{get:function(){return ht},set:function(Pe){ht=Pe}});var Zt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Zt},set:function(Pe){Zt=Pe}}),Object.defineProperty(this,"ctx",{get:function(){return m},set:function(Pe){Pe instanceof f&&(m=Pe)}}),Object.defineProperty(this,"path",{get:function(){return m.path},set:function(Pe){m.path=Pe}});var Tt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Tt},set:function(Pe){Tt=Pe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Pe){var ye;ye=y(Pe),this.ctx.fillStyle=ye.style,this.ctx.isFillTransparent=ye.a===0,this.ctx.fillOpacity=ye.a,this.pdf.setFillColor(ye.r,ye.g,ye.b,{a:ye.a}),this.pdf.setTextColor(ye.r,ye.g,ye.b,{a:ye.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Pe){var ye=y(Pe);this.ctx.strokeStyle=ye.style,this.ctx.isStrokeTransparent=ye.a===0,this.ctx.strokeOpacity=ye.a,ye.a===0?this.pdf.setDrawColor(255,255,255):(ye.a,this.pdf.setDrawColor(ye.r,ye.g,ye.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Pe){["butt","round","square"].indexOf(Pe)!==-1&&(this.ctx.lineCap=Pe,this.pdf.setLineCap(Pe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Pe){isNaN(Pe)||(this.ctx.lineWidth=Pe,this.pdf.setLineWidth(Pe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Pe){["bevel","round","miter"].indexOf(Pe)!==-1&&(this.ctx.lineJoin=Pe,this.pdf.setLineJoin(Pe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Pe){isNaN(Pe)||(this.ctx.miterLimit=Pe,this.pdf.setMiterLimit(Pe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Pe){this.ctx.textBaseline=Pe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Pe){["right","end","center","left","start"].indexOf(Pe)!==-1&&(this.ctx.textAlign=Pe)}});var me=null;function Ct(Pe,ye){if(me===null){var lt=function(Ot){var ut=[];return Object.keys(Ot).forEach(function(ot){Ot[ot].forEach(function(Rt){var Lt=null;switch(Rt){case"bold":Lt={family:ot,weight:"bold"};break;case"italic":Lt={family:ot,style:"italic"};break;case"bolditalic":Lt={family:ot,weight:"bold",style:"italic"};break;case"":case"normal":Lt={family:ot}}Lt!==null&&(Lt.ref={name:ot,style:Rt},ut.push(Lt))})}),ut}(Pe.getFontList());me=function(Ot){for(var ut={},ot=0;ot<Ot.length;++ot){var Rt=$K(Ot[ot]),Lt=Rt.family,Nt=Rt.stretch,ni=Rt.style,wi=Rt.weight;ut[Lt]=ut[Lt]||{},ut[Lt][Nt]=ut[Lt][Nt]||{},ut[Lt][Nt][ni]=ut[Lt][Nt][ni]||{},ut[Lt][Nt][ni][wi]=Rt}return ut}(lt.concat(ye))}return me}var pt=null;Object.defineProperty(this,"fontFaces",{get:function(){return pt},set:function(Pe){me=null,pt=Pe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Pe){var ye;if(this.ctx.font=Pe,(ye=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Pe))!==null){var lt=ye[1];ye[2];var Ot=ye[3],ut=ye[4];ye[5];var ot=ye[6],Rt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ut)[2];ut=Math.floor(Rt==="px"?parseFloat(ut)*this.pdf.internal.scaleFactor:Rt==="em"?parseFloat(ut)*this.pdf.getFontSize():parseFloat(ut)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ut);var Lt=function(Li){var $i,Wt,Sr=[],En=Li.trim();if(En==="")return RK;if(En in r_e)return[r_e[En]];for(;En!=="";){switch(Wt=null,$i=(En=s_e(En)).charAt(0)){case'"':case"'":Wt=WGe(En.substring(1),$i);break;default:Wt=qGe(En)}if(Wt===null||(Sr.push(Wt[0]),(En=s_e(Wt[1]))!==""&&En.charAt(0)!==","))return RK;En=En.replace(/^,/,"")}return Sr}(ot);if(this.fontFaces){var Nt=HGe(Ct(this.pdf,this.fontFaces),Lt.map(function(Li){return{family:Li,stretch:"normal",weight:Ot,style:lt}}));this.pdf.setFont(Nt.ref.name,Nt.ref.style)}else{var ni="";(Ot==="bold"||parseInt(Ot,10)>=700||lt==="bold")&&(ni="bold"),lt==="italic"&&(ni+="italic"),ni.length===0&&(ni="normal");for(var wi="",vi={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Hi=0;Hi<Lt.length;Hi++){if(this.pdf.internal.getFont(Lt[Hi],ni,{noFallback:!0,disableWarning:!0})!==void 0){wi=Lt[Hi];break}if(ni==="bolditalic"&&this.pdf.internal.getFont(Lt[Hi],"bold",{noFallback:!0,disableWarning:!0})!==void 0)wi=Lt[Hi],ni="bold";else if(this.pdf.internal.getFont(Lt[Hi],"normal",{noFallback:!0,disableWarning:!0})!==void 0){wi=Lt[Hi],ni="normal";break}}if(wi===""){for(var Ei=0;Ei<Lt.length;Ei++)if(vi[Lt[Ei]]){wi=vi[Lt[Ei]];break}}wi=wi===""?"Times":wi,this.pdf.setFont(wi,ni)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Pe){this.ctx.globalCompositeOperation=Pe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Pe){this.ctx.globalAlpha=Pe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Pe){this.ctx.lineDashOffset=Pe,nt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Pe){this.ctx.lineDash=Pe,nt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Pe){this.ctx.ignoreClearRect=!!Pe}})};g.prototype.setLineDash=function(be){this.lineDash=be},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){oe.call(this,"fill",!1)},g.prototype.stroke=function(){oe.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(be,we){if(isNaN(be)||isNaN(we))throw Za.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ke=this.ctx.transform.applyToPoint(new l(be,we));this.path.push({type:"mt",x:ke.x,y:ke.y}),this.ctx.lastPoint=new l(be,we)},g.prototype.closePath=function(){var be=new l(0,0),we=0;for(we=this.path.length-1;we!==-1;we--)if(this.path[we].type==="begin"&&pa(this.path[we+1])==="object"&&typeof this.path[we+1].x=="number"){be=new l(this.path[we+1].x,this.path[we+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(be.x,be.y)},g.prototype.lineTo=function(be,we){if(isNaN(be)||isNaN(we))throw Za.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ke=this.ctx.transform.applyToPoint(new l(be,we));this.path.push({type:"lt",x:ke.x,y:ke.y}),this.ctx.lastPoint=new l(ke.x,ke.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),oe.call(this,null,!0)},g.prototype.quadraticCurveTo=function(be,we,ke,et){if(isNaN(ke)||isNaN(et)||isNaN(be)||isNaN(we))throw Za.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Qe=this.ctx.transform.applyToPoint(new l(ke,et)),at=this.ctx.transform.applyToPoint(new l(be,we));this.path.push({type:"qct",x1:at.x,y1:at.y,x:Qe.x,y:Qe.y}),this.ctx.lastPoint=new l(Qe.x,Qe.y)},g.prototype.bezierCurveTo=function(be,we,ke,et,Qe,at){if(isNaN(Qe)||isNaN(at)||isNaN(be)||isNaN(we)||isNaN(ke)||isNaN(et))throw Za.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var _t=this.ctx.transform.applyToPoint(new l(Qe,at)),ht=this.ctx.transform.applyToPoint(new l(be,we)),Zt=this.ctx.transform.applyToPoint(new l(ke,et));this.path.push({type:"bct",x1:ht.x,y1:ht.y,x2:Zt.x,y2:Zt.y,x:_t.x,y:_t.y}),this.ctx.lastPoint=new l(_t.x,_t.y)},g.prototype.arc=function(be,we,ke,et,Qe,at){if(isNaN(be)||isNaN(we)||isNaN(ke)||isNaN(et)||isNaN(Qe))throw Za.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(at=!!at,!this.ctx.transform.isIdentity){var _t=this.ctx.transform.applyToPoint(new l(be,we));be=_t.x,we=_t.y;var ht=this.ctx.transform.applyToPoint(new l(0,ke)),Zt=this.ctx.transform.applyToPoint(new l(0,0));ke=Math.sqrt(Math.pow(ht.x-Zt.x,2)+Math.pow(ht.y-Zt.y,2))}Math.abs(Qe-et)>=2*Math.PI&&(et=0,Qe=2*Math.PI),this.path.push({type:"arc",x:be,y:we,radius:ke,startAngle:et,endAngle:Qe,counterclockwise:at})},g.prototype.arcTo=function(be,we,ke,et,Qe){throw new Error("arcTo not implemented.")},g.prototype.rect=function(be,we,ke,et){if(isNaN(be)||isNaN(we)||isNaN(ke)||isNaN(et))throw Za.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(be,we),this.lineTo(be+ke,we),this.lineTo(be+ke,we+et),this.lineTo(be,we+et),this.lineTo(be,we),this.lineTo(be+ke,we),this.lineTo(be,we)},g.prototype.fillRect=function(be,we,ke,et){if(isNaN(be)||isNaN(we)||isNaN(ke)||isNaN(et))throw Za.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!_.call(this)){var Qe={};this.lineCap!=="butt"&&(Qe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Qe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(be,we,ke,et),this.fill(),Qe.hasOwnProperty("lineCap")&&(this.lineCap=Qe.lineCap),Qe.hasOwnProperty("lineJoin")&&(this.lineJoin=Qe.lineJoin)}},g.prototype.strokeRect=function(be,we,ke,et){if(isNaN(be)||isNaN(we)||isNaN(ke)||isNaN(et))throw Za.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");w.call(this)||(this.beginPath(),this.rect(be,we,ke,et),this.stroke())},g.prototype.clearRect=function(be,we,ke,et){if(isNaN(be)||isNaN(we)||isNaN(ke)||isNaN(et))throw Za.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(be,we,ke,et))},g.prototype.save=function(be){be=typeof be!="boolean"||be;for(var we=this.pdf.internal.getCurrentPageInfo().pageNumber,ke=0;ke<this.pdf.internal.getNumberOfPages();ke++)this.pdf.setPage(ke+1),this.pdf.internal.out("q");if(this.pdf.setPage(we),be){this.ctx.fontSize=this.pdf.internal.getFontSize();var et=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=et}},g.prototype.restore=function(be){be=typeof be!="boolean"||be;for(var we=this.pdf.internal.getCurrentPageInfo().pageNumber,ke=0;ke<this.pdf.internal.getNumberOfPages();ke++)this.pdf.setPage(ke+1),this.pdf.internal.out("Q");this.pdf.setPage(we),be&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(be){var we,ke,et,Qe;if(be.isCanvasGradient===!0&&(be=be.getColor()),!be)return{r:0,g:0,b:0,a:0,style:be};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(be))we=0,ke=0,et=0,Qe=0;else{var at=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(be);if(at!==null)we=parseInt(at[1]),ke=parseInt(at[2]),et=parseInt(at[3]),Qe=1;else if((at=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(be))!==null)we=parseInt(at[1]),ke=parseInt(at[2]),et=parseInt(at[3]),Qe=parseFloat(at[4]);else{if(Qe=1,typeof be=="string"&&be.charAt(0)!=="#"){var _t=new f_e(be);be=_t.ok?_t.toHex():"#000000"}be.length===4?(we=be.substring(1,2),we+=we,ke=be.substring(2,3),ke+=ke,et=be.substring(3,4),et+=et):(we=be.substring(1,3),ke=be.substring(3,5),et=be.substring(5,7)),we=parseInt(we,16),ke=parseInt(ke,16),et=parseInt(et,16)}}return{r:we,g:ke,b:et,a:Qe,style:be}},_=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},w=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(be,we,ke,et){if(isNaN(we)||isNaN(ke)||typeof be!="string")throw Za.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(et=isNaN(et)?void 0:et,!_.call(this)){var Qe=ze(this.ctx.transform.rotation),at=this.ctx.transform.scaleX;te.call(this,{text:be,x:we,y:ke,scale:at,angle:Qe,align:this.textAlign,maxWidth:et})}},g.prototype.strokeText=function(be,we,ke,et){if(isNaN(we)||isNaN(ke)||typeof be!="string")throw Za.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!w.call(this)){et=isNaN(et)?void 0:et;var Qe=ze(this.ctx.transform.rotation),at=this.ctx.transform.scaleX;te.call(this,{text:be,x:we,y:ke,scale:at,renderingMode:"stroke",angle:Qe,align:this.textAlign,maxWidth:et})}},g.prototype.measureText=function(be){if(typeof be!="string")throw Za.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var we=this.pdf,ke=this.pdf.internal.scaleFactor,et=we.internal.getFontSize(),Qe=we.getStringUnitWidth(be)*et/we.internal.scaleFactor,at=function(_t){var ht=(_t=_t||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ht}}),this};return new at({width:Qe*=Math.round(96*ke/72*1e4)/1e4})},g.prototype.scale=function(be,we){if(isNaN(be)||isNaN(we))throw Za.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ke=new p(be,0,0,we,0,0);this.ctx.transform=this.ctx.transform.multiply(ke)},g.prototype.rotate=function(be){if(isNaN(be))throw Za.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var we=new p(Math.cos(be),Math.sin(be),-Math.sin(be),Math.cos(be),0,0);this.ctx.transform=this.ctx.transform.multiply(we)},g.prototype.translate=function(be,we){if(isNaN(be)||isNaN(we))throw Za.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ke=new p(1,0,0,1,be,we);this.ctx.transform=this.ctx.transform.multiply(ke)},g.prototype.transform=function(be,we,ke,et,Qe,at){if(isNaN(be)||isNaN(we)||isNaN(ke)||isNaN(et)||isNaN(Qe)||isNaN(at))throw Za.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var _t=new p(be,we,ke,et,Qe,at);this.ctx.transform=this.ctx.transform.multiply(_t)},g.prototype.setTransform=function(be,we,ke,et,Qe,at){be=isNaN(be)?1:be,we=isNaN(we)?0:we,ke=isNaN(ke)?0:ke,et=isNaN(et)?1:et,Qe=isNaN(Qe)?0:Qe,at=isNaN(at)?0:at,this.ctx.transform=new p(be,we,ke,et,Qe,at)};var A=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(be,we,ke,et,Qe,at,_t,ht,Zt){var Tt=this.pdf.getImageProperties(be),me=1,Ct=1,pt=1,Pe=1;et!==void 0&&ht!==void 0&&(pt=ht/et,Pe=Zt/Qe,me=Tt.width/et*ht/et,Ct=Tt.height/Qe*Zt/Qe),at===void 0&&(at=we,_t=ke,we=0,ke=0),et!==void 0&&ht===void 0&&(ht=et,Zt=Qe),et===void 0&&ht===void 0&&(ht=Tt.width,Zt=Tt.height);for(var ye,lt=this.ctx.transform.decompose(),Ot=ze(lt.rotate.shx),ut=new p,ot=(ut=(ut=(ut=ut.multiply(lt.translate)).multiply(lt.skew)).multiply(lt.scale)).applyToRectangle(new h(at-we*pt,_t-ke*Pe,et*me,Qe*Ct)),Rt=k.call(this,ot),Lt=[],Nt=0;Nt<Rt.length;Nt+=1)Lt.indexOf(Rt[Nt])===-1&&Lt.push(Rt[Nt]);if(H(Lt),this.autoPaging)for(var ni=Lt[0],wi=Lt[Lt.length-1],vi=ni;vi<wi+1;vi++){this.pdf.setPage(vi);var Hi=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ei=vi===1?this.posY+this.margin[0]:this.margin[0],Li=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$i=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Wt=vi===1?0:Li+(vi-2)*$i;if(this.ctx.clip_path.length!==0){var Sr=this.path;ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=$(ye,this.posX+this.margin[3],-Wt+Ei+this.ctx.prevPageLastElemOffset),se.call(this,"fill",!0),this.path=Sr}var En=JSON.parse(JSON.stringify(ot));En=$([En],this.posX+this.margin[3],-Wt+Ei+this.ctx.prevPageLastElemOffset)[0];var ro=(vi>ni||vi<wi)&&A.call(this);ro&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Hi,$i,null).clip().discardPath()),this.pdf.addImage(be,"JPEG",En.x,En.y,En.w,En.h,null,null,Ot),ro&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(be,"JPEG",ot.x,ot.y,ot.w,ot.h,null,null,Ot)};var k=function(be,we,ke){var et=[];we=we||this.pdf.internal.pageSize.width,ke=ke||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Qe=this.posY+this.ctx.prevPageLastElemOffset;switch(be.type){default:case"mt":case"lt":et.push(Math.floor((be.y+Qe)/ke)+1);break;case"arc":et.push(Math.floor((be.y+Qe-be.radius)/ke)+1),et.push(Math.floor((be.y+Qe+be.radius)/ke)+1);break;case"qct":var at=Ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,be.x1,be.y1,be.x,be.y);et.push(Math.floor((at.y+Qe)/ke)+1),et.push(Math.floor((at.y+at.h+Qe)/ke)+1);break;case"bct":var _t=$e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,be.x1,be.y1,be.x2,be.y2,be.x,be.y);et.push(Math.floor((_t.y+Qe)/ke)+1),et.push(Math.floor((_t.y+_t.h+Qe)/ke)+1);break;case"rect":et.push(Math.floor((be.y+Qe)/ke)+1),et.push(Math.floor((be.y+be.h+Qe)/ke)+1)}for(var ht=0;ht<et.length;ht+=1)for(;this.pdf.internal.getNumberOfPages()<et[ht];)R.call(this);return et},R=function(){var be=this.fillStyle,we=this.strokeStyle,ke=this.font,et=this.lineCap,Qe=this.lineWidth,at=this.lineJoin;this.pdf.addPage(),this.fillStyle=be,this.strokeStyle=we,this.font=ke,this.lineCap=et,this.lineWidth=Qe,this.lineJoin=at},$=function(be,we,ke){for(var et=0;et<be.length;et++)switch(be[et].type){case"bct":be[et].x2+=we,be[et].y2+=ke;case"qct":be[et].x1+=we,be[et].y1+=ke;case"mt":case"lt":case"arc":default:be[et].x+=we,be[et].y+=ke}return be},H=function(be){return be.sort(function(we,ke){return we-ke})},oe=function(be,we){for(var ke,et,Qe=this.fillStyle,at=this.strokeStyle,_t=this.lineCap,ht=this.lineWidth,Zt=Math.abs(ht*this.ctx.transform.scaleX),Tt=this.lineJoin,me=JSON.parse(JSON.stringify(this.path)),Ct=JSON.parse(JSON.stringify(this.path)),pt=[],Pe=0;Pe<Ct.length;Pe++)if(Ct[Pe].x!==void 0)for(var ye=k.call(this,Ct[Pe]),lt=0;lt<ye.length;lt+=1)pt.indexOf(ye[lt])===-1&&pt.push(ye[lt]);for(var Ot=0;Ot<pt.length;Ot++)for(;this.pdf.internal.getNumberOfPages()<pt[Ot];)R.call(this);if(H(pt),this.autoPaging)for(var ut=pt[0],ot=pt[pt.length-1],Rt=ut;Rt<ot+1;Rt++){this.pdf.setPage(Rt),this.fillStyle=Qe,this.strokeStyle=at,this.lineCap=_t,this.lineWidth=Zt,this.lineJoin=Tt;var Lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=Rt===1?this.posY+this.margin[0]:this.margin[0],ni=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wi=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],vi=Rt===1?0:ni+(Rt-2)*wi;if(this.ctx.clip_path.length!==0){var Hi=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=$(ke,this.posX+this.margin[3],-vi+Nt+this.ctx.prevPageLastElemOffset),se.call(this,be,!0),this.path=Hi}if(et=JSON.parse(JSON.stringify(me)),this.path=$(et,this.posX+this.margin[3],-vi+Nt+this.ctx.prevPageLastElemOffset),we===!1||Rt===0){var Ei=(Rt>ut||Rt<ot)&&A.call(this);Ei&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lt,wi,null).clip().discardPath()),se.call(this,be,we),Ei&&this.pdf.restoreGraphicsState()}this.lineWidth=ht}else this.lineWidth=Zt,se.call(this,be,we),this.lineWidth=ht;this.path=me},se=function(be,we){if((be!=="stroke"||we||!w.call(this))&&(be==="stroke"||we||!_.call(this))){for(var ke,et,Qe=[],at=this.path,_t=0;_t<at.length;_t++){var ht=at[_t];switch(ht.type){case"begin":Qe.push({begin:!0});break;case"close":Qe.push({close:!0});break;case"mt":Qe.push({start:ht,deltas:[],abs:[]});break;case"lt":var Zt=Qe.length;if(at[_t-1]&&!isNaN(at[_t-1].x)&&(ke=[ht.x-at[_t-1].x,ht.y-at[_t-1].y],Zt>0)){for(;Zt>=0;Zt--)if(Qe[Zt-1].close!==!0&&Qe[Zt-1].begin!==!0){Qe[Zt-1].deltas.push(ke),Qe[Zt-1].abs.push(ht);break}}break;case"bct":ke=[ht.x1-at[_t-1].x,ht.y1-at[_t-1].y,ht.x2-at[_t-1].x,ht.y2-at[_t-1].y,ht.x-at[_t-1].x,ht.y-at[_t-1].y],Qe[Qe.length-1].deltas.push(ke);break;case"qct":var Tt=at[_t-1].x+2/3*(ht.x1-at[_t-1].x),me=at[_t-1].y+2/3*(ht.y1-at[_t-1].y),Ct=ht.x+2/3*(ht.x1-ht.x),pt=ht.y+2/3*(ht.y1-ht.y),Pe=ht.x,ye=ht.y;ke=[Tt-at[_t-1].x,me-at[_t-1].y,Ct-at[_t-1].x,pt-at[_t-1].y,Pe-at[_t-1].x,ye-at[_t-1].y],Qe[Qe.length-1].deltas.push(ke);break;case"arc":Qe.push({deltas:[],abs:[],arc:!0}),Array.isArray(Qe[Qe.length-1].abs)&&Qe[Qe.length-1].abs.push(ht)}}et=we?null:be==="stroke"?"stroke":"fill";for(var lt=!1,Ot=0;Ot<Qe.length;Ot++)if(Qe[Ot].arc)for(var ut=Qe[Ot].abs,ot=0;ot<ut.length;ot++){var Rt=ut[ot];Rt.type==="arc"?pe.call(this,Rt.x,Rt.y,Rt.radius,Rt.startAngle,Rt.endAngle,Rt.counterclockwise,void 0,we,!lt):Se.call(this,Rt.x,Rt.y),lt=!0}else if(Qe[Ot].close===!0)this.pdf.internal.out("h"),lt=!1;else if(Qe[Ot].begin!==!0){var Lt=Qe[Ot].start.x,Nt=Qe[Ot].start.y;Te.call(this,Qe[Ot].deltas,Lt,Nt),lt=!0}et&&Ce.call(this,et),we&&_e.call(this)}},ge=function(be){var we=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ke=we*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return be-ke;case"top":return be+we-ke;case"hanging":return be+we-2*ke;case"middle":return be+we/2-ke;case"ideographic":return be;case"alphabetic":default:return be}},ue=function(be){return be+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var be=function(){};return be.colorStops=[],be.addColorStop=function(we,ke){this.colorStops.push([we,ke])},be.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},be.isCanvasGradient=!0,be},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var pe=function(be,we,ke,et,Qe,at,_t,ht,Zt){for(var Tt=Le.call(this,ke,et,Qe,at),me=0;me<Tt.length;me++){var Ct=Tt[me];me===0&&(Zt?de.call(this,Ct.x1+be,Ct.y1+we):Se.call(this,Ct.x1+be,Ct.y1+we)),De.call(this,be,we,Ct.x2,Ct.y2,Ct.x3,Ct.y3,Ct.x4,Ct.y4)}ht?_e.call(this):Ce.call(this,_t)},Ce=function(be){switch(be){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},_e=function(){this.pdf.clip(),this.pdf.discardPath()},de=function(be,we){this.pdf.internal.out(e(be)+" "+n(we)+" m")},te=function(be){var we;switch(be.align){case"right":case"end":we="right";break;case"center":we="center";break;case"left":case"start":default:we="left"}var ke=this.pdf.getTextDimensions(be.text),et=ge.call(this,be.y),Qe=ue.call(this,et)-ke.h,at=this.ctx.transform.applyToPoint(new l(be.x,et)),_t=this.ctx.transform.decompose(),ht=new p;ht=(ht=(ht=ht.multiply(_t.translate)).multiply(_t.skew)).multiply(_t.scale);for(var Zt,Tt,me,Ct=this.ctx.transform.applyToRectangle(new h(be.x,et,ke.w,ke.h)),pt=ht.applyToRectangle(new h(be.x,Qe,ke.w,ke.h)),Pe=k.call(this,pt),ye=[],lt=0;lt<Pe.length;lt+=1)ye.indexOf(Pe[lt])===-1&&ye.push(Pe[lt]);if(H(ye),this.autoPaging)for(var Ot=ye[0],ut=ye[ye.length-1],ot=Ot;ot<ut+1;ot++){this.pdf.setPage(ot);var Rt=ot===1?this.posY+this.margin[0]:this.margin[0],Lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[2],ni=Nt-this.margin[0],wi=this.pdf.internal.pageSize.width-this.margin[1],vi=wi-this.margin[3],Hi=ot===1?0:Lt+(ot-2)*ni;if(this.ctx.clip_path.length!==0){var Ei=this.path;Zt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=$(Zt,this.posX+this.margin[3],-1*Hi+Rt),se.call(this,"fill",!0),this.path=Ei}var Li=$([JSON.parse(JSON.stringify(pt))],this.posX+this.margin[3],-Hi+Rt+this.ctx.prevPageLastElemOffset)[0];be.scale>=.01&&(Tt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Tt*be.scale),me=this.lineWidth,this.lineWidth=me*be.scale);var $i=this.autoPaging!=="text";if($i||Li.y+Li.h<=Nt){if($i||Li.y>=Rt&&Li.x<=wi){var Wt=$i?be.text:this.pdf.splitTextToSize(be.text,be.maxWidth||wi-Li.x)[0],Sr=$([JSON.parse(JSON.stringify(Ct))],this.posX+this.margin[3],-Hi+Rt+this.ctx.prevPageLastElemOffset)[0],En=$i&&(ot>Ot||ot<ut)&&A.call(this);En&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vi,ni,null).clip().discardPath()),this.pdf.text(Wt,Sr.x,Sr.y,{angle:be.angle,align:we,renderingMode:be.renderingMode}),En&&this.pdf.restoreGraphicsState()}}else Li.y<Nt&&(this.ctx.prevPageLastElemOffset+=Nt-Li.y);be.scale>=.01&&(this.pdf.setFontSize(Tt),this.lineWidth=me)}else be.scale>=.01&&(Tt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Tt*be.scale),me=this.lineWidth,this.lineWidth=me*be.scale),this.pdf.text(be.text,at.x+this.posX,at.y+this.posY,{angle:be.angle,align:we,renderingMode:be.renderingMode,maxWidth:be.maxWidth}),be.scale>=.01&&(this.pdf.setFontSize(Tt),this.lineWidth=me)},Se=function(be,we,ke,et){ke=ke||0,et=et||0,this.pdf.internal.out(e(be+ke)+" "+n(we+et)+" l")},Te=function(be,we,ke){return this.pdf.lines(be,we,ke,null,null)},De=function(be,we,ke,et,Qe,at,_t,ht){this.pdf.internal.out([i(o(ke+be)),i(s(et+we)),i(o(Qe+be)),i(s(at+we)),i(o(_t+be)),i(s(ht+we)),"c"].join(" "))},Le=function(be,we,ke,et){for(var Qe=2*Math.PI,at=Math.PI/2;we>ke;)we-=Qe;var _t=Math.abs(ke-we);_t<Qe&&et&&(_t=Qe-_t);for(var ht=[],Zt=et?-1:1,Tt=we;_t>1e-5;){var me=Tt+Zt*Math.min(_t,at);ht.push(Me.call(this,be,Tt,me)),_t-=Math.abs(me-Tt),Tt=me}return ht},Me=function(be,we,ke){var et=(ke-we)/2,Qe=be*Math.cos(et),at=be*Math.sin(et),_t=Qe,ht=-at,Zt=_t*_t+ht*ht,Tt=Zt+_t*Qe+ht*at,me=4/3*(Math.sqrt(2*Zt*Tt)-Tt)/(_t*at-ht*Qe),Ct=_t-me*ht,pt=ht+me*_t,Pe=Ct,ye=-pt,lt=et+we,Ot=Math.cos(lt),ut=Math.sin(lt);return{x1:be*Math.cos(we),y1:be*Math.sin(we),x2:Ct*Ot-pt*ut,y2:Ct*ut+pt*Ot,x3:Pe*Ot-ye*ut,y3:Pe*ut+ye*Ot,x4:be*Math.cos(ke),y4:be*Math.sin(ke)}},ze=function(be){return 180*be/Math.PI},Ve=function(be,we,ke,et,Qe,at){var _t=be+.5*(ke-be),ht=we+.5*(et-we),Zt=Qe+.5*(ke-Qe),Tt=at+.5*(et-at),me=Math.min(be,Qe,_t,Zt),Ct=Math.max(be,Qe,_t,Zt),pt=Math.min(we,at,ht,Tt),Pe=Math.max(we,at,ht,Tt);return new h(me,pt,Ct-me,Pe-pt)},$e=function(be,we,ke,et,Qe,at,_t,ht){var Zt,Tt,me,Ct,pt,Pe,ye,lt,Ot,ut,ot,Rt,Lt,Nt,ni=ke-be,wi=et-we,vi=Qe-ke,Hi=at-et,Ei=_t-Qe,Li=ht-at;for(Tt=0;Tt<41;Tt++)Ot=(ye=(me=be+(Zt=Tt/40)*ni)+Zt*((pt=ke+Zt*vi)-me))+Zt*(pt+Zt*(Qe+Zt*Ei-pt)-ye),ut=(lt=(Ct=we+Zt*wi)+Zt*((Pe=et+Zt*Hi)-Ct))+Zt*(Pe+Zt*(at+Zt*Li-Pe)-lt),Tt==0?(ot=Ot,Rt=ut,Lt=Ot,Nt=ut):(ot=Math.min(ot,Ot),Rt=Math.min(Rt,ut),Lt=Math.max(Lt,Ot),Nt=Math.max(Nt,ut));return new h(Math.round(ot),Math.round(Rt),Math.round(Lt-ot),Math.round(Nt-Rt))},nt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var be,we,ke=(be=this.ctx.lineDash,we=this.ctx.lineDashOffset,JSON.stringify({lineDash:be,lineDashOffset:we}));this.prevLineDash!==ke&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ke)}}})(tr.API),function(r){var i=function(s){var l,h,p,m,f,g,y,_,w,A;for(/[^\x00-\xFF]/.test(s),h=[],p=0,m=(s+=l="\0\0\0\0".slice(s.length%4||4)).length;m>p;p+=4)(f=(s.charCodeAt(p)<<24)+(s.charCodeAt(p+1)<<16)+(s.charCodeAt(p+2)<<8)+s.charCodeAt(p+3))!==0?(g=(f=((f=((f=((f=(f-(A=f%85))/85)-(w=f%85))/85)-(_=f%85))/85)-(y=f%85))/85)%85,h.push(g+33,y+33,_+33,w+33,A+33)):h.push(122);return function(k,R){for(var $=R;$>0;$--)k.pop()}(h,l.length),String.fromCharCode.apply(String,h)+"~>"},e=function(s){var l,h,p,m,f,g=String,y="length",_=255,w="charCodeAt",A="slice",k="replace";for(s[A](-2),s=s[A](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),p=[],m=0,f=(s+=l="uuuuu"[A](s[y]%5||5))[y];f>m;m+=5)h=52200625*(s[w](m)-33)+614125*(s[w](m+1)-33)+7225*(s[w](m+2)-33)+85*(s[w](m+3)-33)+(s[w](m+4)-33),p.push(_&h>>24,_&h>>16,_&h>>8,_&h);return function(R,$){for(var H=$;H>0;H--)R.pop()}(p,l[y]),g.fromCharCode.apply(g,p)},n=function(s){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),l.test(s)===!1)return"";for(var h="",p=0;p<s.length;p+=2)h+=String.fromCharCode("0x"+(s[p]+s[p+1]));return h},o=function(s){for(var l=new Uint8Array(s.length),h=s.length;h--;)l[h]=s.charCodeAt(h);return s=(l=zj(l)).reduce(function(p,m){return p+String.fromCharCode(m)},"")};r.processDataByFilters=function(s,l){var h=0,p=s||"",m=[];for(typeof(l=l||[])=="string"&&(l=[l]),h=0;h<l.length;h+=1)switch(l[h]){case"ASCII85Decode":case"/ASCII85Decode":p=e(p),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":p=i(p),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":p=n(p),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":p=p.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":p=o(p),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[h]+'" is not implemented')}return{data:p,reverseChain:m.reverse().join(" ")}}}(tr.API),function(r){r.loadFile=function(i,e,n){return function(o,s,l){s=s!==!1,l=typeof l=="function"?l:function(){};var h=void 0;try{h=function(p,m,f){var g=new XMLHttpRequest,y=0,_=function(w){var A=w.length,k=[],R=String.fromCharCode;for(y=0;y<A;y+=1)k.push(R(255&w.charCodeAt(y)));return k.join("")};if(g.open("GET",p,!m),g.overrideMimeType("text/plain; charset=x-user-defined"),m===!1&&(g.onload=function(){g.status===200?f(_(this.responseText)):f(void 0)}),g.send(null),m&&g.status===200)return _(g.responseText)}(o,s,l)}catch{}return h}(i,e,n)},r.loadImageFile=r.loadFile}(tr.API),function(r){function i(){return(Mr.html2canvas?Promise.resolve(Mr.html2canvas):import("./chunk-IHCMNYRX.js")).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function e(){return(Mr.DOMPurify?Promise.resolve(Mr.DOMPurify):import("./chunk-N66Z4JTY.js")).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var h=pa(l);return h==="undefined"?"undefined":h==="string"||l instanceof String?"string":h==="number"||l instanceof Number?"number":h==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":h==="object"?"object":"unknown"},o=function(l,h){var p=document.createElement(l);for(var m in h.className&&(p.className=h.className),h.innerHTML&&h.dompurify&&(p.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)p.style[m]=h.style[m];return p},s=function l(h){var p=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),m=l.convert(Promise.resolve(),p);return m=(m=m.setProgress(1,l,1,[l])).set(h)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(l,h){return l.__proto__=h||s.prototype,l},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(l,h){return this.then(function(){switch(h=h||function(p){switch(n(p)){case"string":return"string";case"element":return p.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l)){case"string":return this.then(e).then(function(p){return this.set({src:o("div",{innerHTML:l,dompurify:p})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},s.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=function p(m,f){for(var g=m.nodeType===3?document.createTextNode(m.nodeValue):m.cloneNode(!1),y=m.firstChild;y;y=y.nextSibling)f!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||g.appendChild(p(y,f));return m.nodeType===1&&(m.nodeName==="CANVAS"?(g.width=m.width,g.height=m.height,g.getContext("2d").drawImage(m,0,0)):m.nodeName!=="TEXTAREA"&&m.nodeName!=="SELECT"||(g.value=m.value),g.addEventListener("load",function(){g.scrollTop=m.scrollTop,g.scrollLeft=m.scrollLeft},!0)),g}(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(i).then(function(h){var p=Object.assign({},this.opt.html2canvas);return delete p.onrendered,h(this.prop.container,p)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(i).then(function(h){var p=this.opt.jsPDF,m=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,p.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,p.context2d.posX=this.opt.x,p.context2d.posY=this.opt.y,p.context2d.margin=this.opt.margin,p.context2d.fontFaces=m,m)for(var y=0;y<m.length;++y){var _=m[y],w=_.src.find(function(A){return A.format==="truetype"});w&&p.addFont(w.url,_.ref.name,_.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,p.context2d.save(!0),h(this.prop.container,g)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(l,h,p){return(p=p||"pdf").toLowerCase()==="img"||p.toLowerCase()==="image"?this.outputImg(l,h):this.outputPdf(l,h)},s.prototype.outputPdf=function(l,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,h)})},s.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},s.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(l){if(n(l)!=="object")return this;var h=Object.keys(l||{}).map(function(p){if(p in s.template.prop)return function(){this.prop[p]=l[p]};switch(p){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[p]=l[p]}}},this);return this.then(function(){return this.thenList(h)})},s.prototype.get=function(l,h){return this.then(function(){var p=l in s.template.prop?this.prop[l]:this.opt[l];return h?h(p):p})},s.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},s.prototype.setPageSize=function(l){function h(p,m){return Math.floor(p*m/72*96)}return this.then(function(){(l=l||tr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:h(l.inner.width,l.k),height:h(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},s.prototype.setProgress=function(l,h,p,m){return l!=null&&(this.progress.val=l),h!=null&&(this.progress.state=h),p!=null&&(this.progress.n=p),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(l,h,p,m){return this.setProgress(l?this.progress.val+l:null,h||null,p?this.progress.n+p:null,m?this.progress.stack.concat(m):null)},s.prototype.then=function(l,h){var p=this;return this.thenCore(l,h,function(m,f){return p.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(g){return p.updateProgress(null,m),g}).then(m,f).then(function(g){return p.updateProgress(1),g})})},s.prototype.thenCore=function(l,h,p){p=p||Promise.prototype.then,l&&(l=l.bind(this)),h&&(h=h.bind(this));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),f=p.call(m,l,h);return s.convert(f,this.__proto__)},s.prototype.thenExternal=function(l,h){return Promise.prototype.then.call(this,l,h)},s.prototype.thenList=function(l){var h=this;return l.forEach(function(p){h=h.thenCore(p)}),h},s.prototype.catch=function(l){l&&(l=l.bind(this));var h=Promise.prototype.catch.call(this,l);return s.convert(h,this)},s.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},s.prototype.error=function(l){return this.then(function(){throw new Error(l)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,tr.getPageSize=function(l,h,p){if(pa(l)==="object"){var m=l;l=m.orientation,h=m.unit||h,p=m.format||p}h=h||"mm",p=p||"a4",l=(""+(l||"P")).toLowerCase();var f,g=(""+p).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+h}var _,w=0,A=0;if(y.hasOwnProperty(g))w=y[g][1]/f,A=y[g][0]/f;else try{w=p[1],A=p[0]}catch{throw new Error("Invalid format: "+p)}if(l==="p"||l==="portrait")l="p",A>w&&(_=A,A=w,w=_);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",w>A&&(_=A,A=w,w=_)}return{width:A,height:w,unit:h,k:f,orientation:l}},r.html=function(l,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map($K):null;var p=new s(h);return h.worker?p:p.from(l).doCallback()}}(tr.API),tr.API.addJS=function(r){return l_e=r,this.internal.events.subscribe("postPutResources",function(){Wj=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Wj+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),a_e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+l_e+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Wj!==void 0&&a_e!==void 0&&this.internal.out("/Names <</JavaScript "+Wj+" 0 R>>")}),this},function(r){var i;r.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=e.outline.render().split(/\r\n/),s=0;s<o.length;s++){var l=o[s],h=n.exec(l);if(h!=null){var p=h[1];e.internal.newObjectDeferredBegin(p,!1)}e.internal.write(l)}if(this.outline.createNamedDestinations){var m=this.internal.pages.length,f=[];for(s=0;s<m;s++){var g=e.internal.newObject();f.push(g);var y=e.internal.getPageInfo(s+1);e.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var _=e.internal.newObject();for(e.internal.write("<< /Names [ "),s=0;s<f.length;s++)e.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");e.internal.write(" ] >>","endobj"),i=e.internal.newObject(),e.internal.write("<< /Dests "+_+" 0 R"),e.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+i+" 0 R"))}]),r.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(n,o,s){var l={title:o,options:s,children:[]};return n==null&&(n=this.root),n.children.push(l),l},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(n){n.id=e.internal.newObjectDeferred();for(var o=0;o<n.children.length;o++)this.genIds_r(n.children[o])},e.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},e.outline.renderItems=function(n){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var l=n.children[s];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var h=this.count=this.count_r({count:0},l);if(h>0&&this.line("/Count "+h),l.options&&l.options.pageNumber){var p=e.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+p.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var m=0;m<n.children.length;m++)this.renderItems(n.children[m])},e.outline.line=function(n){this.ctx.val+=n+`\r
`},e.outline.makeRef=function(n){return n.id+" 0 R"},e.outline.makeString=function(n){return"("+e.internal.pdfEscape(n)+")"},e.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(n,o){for(var s=0;s<o.children.length;s++)n.count++,this.count_r(n,o.children[s]);return n.count}}])}(tr.API),function(r){var i=[192,193,194,195,196,197,198,199];r.processJPEG=function(e,n,o,s,l,h){var p,m=this.decode.DCT_DECODE,f=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=l||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(p=function(g){for(var y,_=256*g.charCodeAt(4)+g.charCodeAt(5),w=g.length,A={width:0,height:0,numcomponents:1},k=4;k<w;k+=2){if(k+=_,i.indexOf(g.charCodeAt(k+1))!==-1){y=256*g.charCodeAt(k+5)+g.charCodeAt(k+6),A={width:256*g.charCodeAt(k+7)+g.charCodeAt(k+8),height:y,numcomponents:g.charCodeAt(k+9)};break}_=256*g.charCodeAt(k+2)+g.charCodeAt(k+3)}return A}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:h=this.color_spaces.DEVICE_GRAY;break;case 4:h=this.color_spaces.DEVICE_CMYK;break;case 3:h=this.color_spaces.DEVICE_RGB}f={data:e,width:p.width,height:p.height,colorSpace:h,bitsPerComponent:8,filter:m,index:n,alias:o}}return f}}(tr.API);var $E,qj,c_e,d_e,u_e,YGe=function(){var r,i,e;function n(s){var l,h,p,m,f,g,y,_,w,A,k,R,$,H;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},g=null;;){switch(l=this.readUInt32(),w=function(){var oe,se;for(se=[],oe=0;oe<4;++oe)se.push(String.fromCharCode(this.data[this.pos++]));return se}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(l);break;case"fcTL":g&&this.animation.frames.push(g),this.pos+=4,g={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),m=this.readUInt16()||100,g.delay=1e3*f/m,g.disposeOp=this.data[this.pos++],g.blendOp=this.data[this.pos++],g.data=[];break;case"IDAT":case"fdAT":for(w==="fdAT"&&(this.pos+=4,l-=4),s=g?.data||this.imgData,R=0;0<=l?R<l:R>l;0<=l?++R:--R)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(p=this.palette.length/3,this.transparency.indexed=this.read(l),this.transparency.indexed.length>p)throw new Error("More transparent colors than palette size");if((A=p-this.transparency.indexed.length)>0)for($=0;0<=A?$<A:$>A;0<=A?++$:--$)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(l)[0];break;case 2:this.transparency.rgb=this.read(l)}break;case"tEXt":y=(k=this.read(l)).indexOf(0),_=String.fromCharCode.apply(String,k.slice(0,y)),this.text[_]=String.fromCharCode.apply(String,k.slice(y+1));break;case"IEND":return g&&this.animation.frames.push(g),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(H=this.colorType)===4||H===6,h=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*h,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var l,h;for(h=[],l=0;0<=s?l<s:l>s;0<=s?++l:--l)h.push(this.data[this.pos++]);return h},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var l=this.pixelBitlength/8,h=new Uint8Array(this.width*this.height*l),p=0,m=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function f(g,y,_,w){var A,k,R,$,H,oe,se,ge,ue,pe,Ce,_e,de,te,Se,Te,De,Le,Me,ze,Ve,$e=Math.ceil((m.width-g)/_),nt=Math.ceil((m.height-y)/w),be=m.width==$e&&m.height==nt;for(te=l*$e,_e=be?h:new Uint8Array(te*nt),oe=s.length,de=0,k=0;de<nt&&p<oe;){switch(s[p++]){case 0:for($=De=0;De<te;$=De+=1)_e[k++]=s[p++];break;case 1:for($=Le=0;Le<te;$=Le+=1)A=s[p++],H=$<l?0:_e[k-l],_e[k++]=(A+H)%256;break;case 2:for($=Me=0;Me<te;$=Me+=1)A=s[p++],R=($-$%l)/l,Se=de&&_e[(de-1)*te+R*l+$%l],_e[k++]=(Se+A)%256;break;case 3:for($=ze=0;ze<te;$=ze+=1)A=s[p++],R=($-$%l)/l,H=$<l?0:_e[k-l],Se=de&&_e[(de-1)*te+R*l+$%l],_e[k++]=(A+Math.floor((H+Se)/2))%256;break;case 4:for($=Ve=0;Ve<te;$=Ve+=1)A=s[p++],R=($-$%l)/l,H=$<l?0:_e[k-l],de===0?Se=Te=0:(Se=_e[(de-1)*te+R*l+$%l],Te=R&&_e[(de-1)*te+(R-1)*l+$%l]),se=H+Se-Te,ge=Math.abs(se-H),pe=Math.abs(se-Se),Ce=Math.abs(se-Te),ue=ge<=pe&&ge<=Ce?H:pe<=Ce?Se:Te,_e[k++]=(A+ue)%256;break;default:throw new Error("Invalid filter algorithm: "+s[p-1])}if(!be){var we=((y+de*w)*m.width+g)*l,ke=de*te;for($=0;$<$e;$+=1){for(var et=0;et<l;et+=1)h[we++]=_e[ke++];we+=(_-1)*l}}de++}}return s=Q0e(s),m.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),h},n.prototype.decodePalette=function(){var s,l,h,p,m,f,g,y,_;for(h=this.palette,f=this.transparency.indexed||[],m=new Uint8Array((f.length||0)+h.length),p=0,s=0,l=g=0,y=h.length;g<y;l=g+=3)m[p++]=h[l],m[p++]=h[l+1],m[p++]=h[l+2],m[p++]=(_=f[s++])!=null?_:255;return m},n.prototype.copyToImageData=function(s,l){var h,p,m,f,g,y,_,w,A,k,R;if(p=this.colors,A=null,h=this.hasAlphaChannel,this.palette.length&&(A=(R=this._decodedPalette)!=null?R:this._decodedPalette=this.decodePalette(),p=4,h=!0),w=(m=s.data||s).length,g=A||l,f=y=0,p===1)for(;f<w;)_=A?4*l[f/4]:y,k=g[_++],m[f++]=k,m[f++]=k,m[f++]=k,m[f++]=h?g[_++]:255,y=_;else for(;f<w;)_=A?4*l[f/4]:y,m[f++]=g[_++],m[f++]=g[_++],m[f++]=g[_++],m[f++]=h?g[_++]:255,y=_},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var o=function(){if(Object.prototype.toString.call(Mr)==="[object Window]"){try{i=Mr.document.createElement("canvas"),e=i.getContext("2d")}catch{return!1}return!0}return!1};return o(),r=function(s){var l;if(o()===!0)return e.width=s.width,e.height=s.height,e.clearRect(0,0,s.width,s.height),e.putImageData(s,0,0),(l=new Image).src=i.toDataURL(),l;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var l,h,p,m,f,g,y,_;if(this.animation){for(_=[],h=f=0,g=(y=this.animation.frames).length;f<g;h=++f)l=y[h],p=s.createImageData(l.width,l.height),m=this.decodePixels(new Uint8Array(l.data)),this.copyToImageData(p,m),l.imageData=p,_.push(l.image=r(p));return _}},n.prototype.renderFrame=function(s,l){var h,p,m;return h=(p=this.animation.frames)[l],m=p[l-1],l===0&&s.clearRect(0,0,this.width,this.height),m?.disposeOp===1?s.clearRect(m.xOffset,m.yOffset,m.width,m.height):m?.disposeOp===2&&s.putImageData(m.imageData,m.xOffset,m.yOffset),h.blendOp===0&&s.clearRect(h.xOffset,h.yOffset,h.width,h.height),s.drawImage(h.image,h.xOffset,h.yOffset)},n.prototype.animate=function(s){var l,h,p,m,f,g,y=this;return h=0,g=this.animation,m=g.numFrames,p=g.frames,f=g.numPlays,(l=function(){var _,w;if(_=h++%m,w=p[_],y.renderFrame(s,_),m>1&&h/m<f)return y.animation._timeout=setTimeout(l,w.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var l,h;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,l=s.getContext("2d"),this.animation?(this.decodeFrames(l),this.animate(l)):(h=l.createImageData(this.width,this.height),this.copyToImageData(h,this.decodePixels()),l.putImageData(h,0,0))},n}();function KGe(r){var i=0;if(r[i++]!==71||r[i++]!==73||r[i++]!==70||r[i++]!==56||(r[i++]+1&253)!=56||r[i++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=r[i++]|r[i++]<<8,n=r[i++]|r[i++]<<8,o=r[i++],s=o>>7,l=1<<(7&o)+1;r[i++],r[i++];var h=null,p=null;s&&(h=i,p=l,i+=3*l);var m=!0,f=[],g=0,y=null,_=0,w=null;for(this.width=e,this.height=n;m&&i<r.length;)switch(r[i++]){case 33:switch(r[i++]){case 255:if(r[i]!==11||r[i+1]==78&&r[i+2]==69&&r[i+3]==84&&r[i+4]==83&&r[i+5]==67&&r[i+6]==65&&r[i+7]==80&&r[i+8]==69&&r[i+9]==50&&r[i+10]==46&&r[i+11]==48&&r[i+12]==3&&r[i+13]==1&&r[i+16]==0)i+=14,w=r[i++]|r[i++]<<8,i++;else for(i+=12;;){if(!((de=r[i++])>=0))throw Error("Invalid block size");if(de===0)break;i+=de}break;case 249:if(r[i++]!==4||r[i+4]!==0)throw new Error("Invalid graphics extension block.");var A=r[i++];g=r[i++]|r[i++]<<8,y=r[i++],!(1&A)&&(y=null),_=A>>2&7,i++;break;case 254:for(;;){if(!((de=r[i++])>=0))throw Error("Invalid block size");if(de===0)break;i+=de}break;default:throw new Error("Unknown graphic control label: 0x"+r[i-1].toString(16))}break;case 44:var k=r[i++]|r[i++]<<8,R=r[i++]|r[i++]<<8,$=r[i++]|r[i++]<<8,H=r[i++]|r[i++]<<8,oe=r[i++],se=oe>>6&1,ge=1<<(7&oe)+1,ue=h,pe=p,Ce=!1;oe>>7&&(Ce=!0,ue=i,pe=ge,i+=3*ge);var _e=i;for(i++;;){var de;if(!((de=r[i++])>=0))throw Error("Invalid block size");if(de===0)break;i+=de}f.push({x:k,y:R,width:$,height:H,has_local_palette:Ce,palette_offset:ue,palette_size:pe,data_offset:_e,data_length:i-_e,transparent_index:y,interlaced:!!se,delay:g,disposal:_});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+r[i-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return w},this.frameInfo=function(te){if(te<0||te>=f.length)throw new Error("Frame index out of range.");return f[te]},this.decodeAndBlitFrameBGRA=function(te,Se){var Te=this.frameInfo(te),De=Te.width*Te.height,Le=new Uint8Array(De);h_e(r,Te.data_offset,Le,De);var Me=Te.palette_offset,ze=Te.transparent_index;ze===null&&(ze=256);var Ve=Te.width,$e=e-Ve,nt=Ve,be=4*(Te.y*e+Te.x),we=4*((Te.y+Te.height)*e+Te.x),ke=be,et=4*$e;Te.interlaced===!0&&(et+=4*e*7);for(var Qe=8,at=0,_t=Le.length;at<_t;++at){var ht=Le[at];if(nt===0&&(nt=Ve,(ke+=et)>=we&&(et=4*$e+4*e*(Qe-1),ke=be+(Ve+$e)*(Qe<<1),Qe>>=1)),ht===ze)ke+=4;else{var Zt=r[Me+3*ht],Tt=r[Me+3*ht+1],me=r[Me+3*ht+2];Se[ke++]=me,Se[ke++]=Tt,Se[ke++]=Zt,Se[ke++]=255}--nt}},this.decodeAndBlitFrameRGBA=function(te,Se){var Te=this.frameInfo(te),De=Te.width*Te.height,Le=new Uint8Array(De);h_e(r,Te.data_offset,Le,De);var Me=Te.palette_offset,ze=Te.transparent_index;ze===null&&(ze=256);var Ve=Te.width,$e=e-Ve,nt=Ve,be=4*(Te.y*e+Te.x),we=4*((Te.y+Te.height)*e+Te.x),ke=be,et=4*$e;Te.interlaced===!0&&(et+=4*e*7);for(var Qe=8,at=0,_t=Le.length;at<_t;++at){var ht=Le[at];if(nt===0&&(nt=Ve,(ke+=et)>=we&&(et=4*$e+4*e*(Qe-1),ke=be+(Ve+$e)*(Qe<<1),Qe>>=1)),ht===ze)ke+=4;else{var Zt=r[Me+3*ht],Tt=r[Me+3*ht+1],me=r[Me+3*ht+2];Se[ke++]=Zt,Se[ke++]=Tt,Se[ke++]=me,Se[ke++]=255}--nt}}}function h_e(r,i,e,n){for(var o=r[i++],s=1<<o,l=s+1,h=l+1,p=o+1,m=(1<<p)-1,f=0,g=0,y=0,_=r[i++],w=new Int32Array(4096),A=null;;){for(;f<16&&_!==0;)g|=r[i++]<<f,f+=8,_===1?_=r[i++]:--_;if(f<p)break;var k=g&m;if(g>>=p,f-=p,k!==s){if(k===l)break;for(var R=k<h?k:A,$=0,H=R;H>s;)H=w[H]>>8,++$;var oe=H;if(y+$+(R!==k?1:0)>n)return void Za.log("Warning, gif stream longer than expected.");e[y++]=oe;var se=y+=$;for(R!==k&&(e[y++]=oe),H=R;$--;)H=w[H],e[--se]=255&H,H>>=8;A!==null&&h<4096&&(w[h++]=A<<8|oe,h>=m+1&&p<12&&(++p,m=m<<1|1)),A=k}else h=l+1,m=(1<<(p=o+1))-1,A=null}return y!==n&&Za.log("Warning, gif stream shorter than expected."),e}function FK(r){var i,e,n,o,s,l=Math.floor,h=new Array(64),p=new Array(64),m=new Array(64),f=new Array(64),g=new Array(65535),y=new Array(65535),_=new Array(64),w=new Array(64),A=[],k=0,R=7,$=new Array(64),H=new Array(64),oe=new Array(64),se=new Array(256),ge=new Array(2048),ue=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],pe=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Ce=[0,1,2,3,4,5,6,7,8,9,10,11],_e=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],de=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],te=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Se=[0,1,2,3,4,5,6,7,8,9,10,11],Te=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],De=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Le(be,we){for(var ke=0,et=0,Qe=new Array,at=1;at<=16;at++){for(var _t=1;_t<=be[at];_t++)Qe[we[et]]=[],Qe[we[et]][0]=ke,Qe[we[et]][1]=at,et++,ke++;ke*=2}return Qe}function Me(be){for(var we=be[0],ke=be[1]-1;ke>=0;)we&1<<ke&&(k|=1<<R),ke--,--R<0&&(k==255?(ze(255),ze(0)):ze(k),R=7,k=0)}function ze(be){A.push(be)}function Ve(be){ze(be>>8&255),ze(255&be)}function $e(be,we,ke,et,Qe){for(var at,_t=Qe[0],ht=Qe[240],Zt=function(ut,ot){var Rt,Lt,Nt,ni,wi,vi,Hi,Ei,Li,$i,Wt=0;for(Li=0;Li<8;++Li){Rt=ut[Wt],Lt=ut[Wt+1],Nt=ut[Wt+2],ni=ut[Wt+3],wi=ut[Wt+4],vi=ut[Wt+5],Hi=ut[Wt+6];var Sr=Rt+(Ei=ut[Wt+7]),En=Rt-Ei,ro=Lt+Hi,yr=Lt-Hi,Ir=Nt+vi,Mo=Nt-vi,kn=ni+wi,Lo=ni-wi,rr=Sr+kn,gr=Sr-kn,cs=ro+Ir,Mi=ro-Ir;ut[Wt]=rr+cs,ut[Wt+4]=rr-cs;var pr=.707106781*(Mi+gr);ut[Wt+2]=gr+pr,ut[Wt+6]=gr-pr;var _o=.382683433*((rr=Lo+Mo)-(Mi=yr+En)),Xo=.5411961*rr+_o,uo=1.306562965*Mi+_o,Rn=.707106781*(cs=Mo+yr),Ra=En+Rn,Pi=En-Rn;ut[Wt+5]=Pi+Xo,ut[Wt+3]=Pi-Xo,ut[Wt+1]=Ra+uo,ut[Wt+7]=Ra-uo,Wt+=8}for(Wt=0,Li=0;Li<8;++Li){Rt=ut[Wt],Lt=ut[Wt+8],Nt=ut[Wt+16],ni=ut[Wt+24],wi=ut[Wt+32],vi=ut[Wt+40],Hi=ut[Wt+48];var Vs=Rt+(Ei=ut[Wt+56]),wl=Rt-Ei,Ur=Lt+Hi,Zn=Lt-Hi,ho=Nt+vi,$s=Nt-vi,Ks=ni+wi,Cl=ni-wi,xl=Vs+Ks,tc=Vs-Ks,Nu=Ur+ho,Bu=Ur-ho;ut[Wt]=xl+Nu,ut[Wt+32]=xl-Nu;var Xa=.707106781*(Bu+tc);ut[Wt+16]=tc+Xa,ut[Wt+48]=tc-Xa;var id=.382683433*((xl=Cl+$s)-(Bu=Zn+wl)),Dh=.5411961*xl+id,Rd=1.306562965*Bu+id,ju=.707106781*(Nu=$s+Zn),qf=wl+ju,y0=wl-ju;ut[Wt+40]=y0+Dh,ut[Wt+24]=y0-Dh,ut[Wt+8]=qf+Rd,ut[Wt+56]=qf-Rd,Wt++}for(Li=0;Li<64;++Li)$i=ut[Li]*ot[Li],_[Li]=$i>0?$i+.5|0:$i-.5|0;return _}(be,we),Tt=0;Tt<64;++Tt)w[ue[Tt]]=Zt[Tt];var me=w[0]-ke;ke=w[0],me==0?Me(et[0]):(Me(et[y[at=32767+me]]),Me(g[at]));for(var Ct=63;Ct>0&&w[Ct]==0;)Ct--;if(Ct==0)return Me(_t),ke;for(var pt,Pe=1;Pe<=Ct;){for(var ye=Pe;w[Pe]==0&&Pe<=Ct;)++Pe;var lt=Pe-ye;if(lt>=16){pt=lt>>4;for(var Ot=1;Ot<=pt;++Ot)Me(ht);lt&=15}at=32767+w[Pe],Me(Qe[(lt<<4)+y[at]]),Me(g[at]),Pe++}return Ct!=63&&Me(_t),ke}function nt(be){be=Math.min(Math.max(be,1),100),s!=be&&(function(we){for(var ke=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],et=0;et<64;et++){var Qe=l((ke[et]*we+50)/100);Qe=Math.min(Math.max(Qe,1),255),h[ue[et]]=Qe}for(var at=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],_t=0;_t<64;_t++){var ht=l((at[_t]*we+50)/100);ht=Math.min(Math.max(ht,1),255),p[ue[_t]]=ht}for(var Zt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Tt=0,me=0;me<8;me++)for(var Ct=0;Ct<8;Ct++)m[Tt]=1/(h[ue[Tt]]*Zt[me]*Zt[Ct]*8),f[Tt]=1/(p[ue[Tt]]*Zt[me]*Zt[Ct]*8),Tt++}(be<50?Math.floor(5e3/be):Math.floor(200-2*be)),s=be)}this.encode=function(be,we){we&&nt(we),A=new Array,k=0,R=7,Ve(65496),Ve(65504),Ve(16),ze(74),ze(70),ze(73),ze(70),ze(0),ze(1),ze(1),ze(0),Ve(1),Ve(1),ze(0),ze(0),function(){Ve(65499),Ve(132),ze(0);for(var Lt=0;Lt<64;Lt++)ze(h[Lt]);ze(1);for(var Nt=0;Nt<64;Nt++)ze(p[Nt])}(),function(Lt,Nt){Ve(65472),Ve(17),ze(8),Ve(Nt),Ve(Lt),ze(3),ze(1),ze(17),ze(0),ze(2),ze(17),ze(1),ze(3),ze(17),ze(1)}(be.width,be.height),function(){Ve(65476),Ve(418),ze(0);for(var Lt=0;Lt<16;Lt++)ze(pe[Lt+1]);for(var Nt=0;Nt<=11;Nt++)ze(Ce[Nt]);ze(16);for(var ni=0;ni<16;ni++)ze(_e[ni+1]);for(var wi=0;wi<=161;wi++)ze(de[wi]);ze(1);for(var vi=0;vi<16;vi++)ze(te[vi+1]);for(var Hi=0;Hi<=11;Hi++)ze(Se[Hi]);ze(17);for(var Ei=0;Ei<16;Ei++)ze(Te[Ei+1]);for(var Li=0;Li<=161;Li++)ze(De[Li])}(),Ve(65498),Ve(12),ze(3),ze(1),ze(0),ze(2),ze(17),ze(3),ze(17),ze(0),ze(63),ze(0);var ke=0,et=0,Qe=0;k=0,R=7,this.encode.displayName="_encode_";for(var at,_t,ht,Zt,Tt,me,Ct,pt,Pe,ye=be.data,lt=be.width,Ot=be.height,ut=4*lt,ot=0;ot<Ot;){for(at=0;at<ut;){for(Tt=ut*ot+at,Ct=-1,pt=0,Pe=0;Pe<64;Pe++)me=Tt+(pt=Pe>>3)*ut+(Ct=4*(7&Pe)),ot+pt>=Ot&&(me-=ut*(ot+1+pt-Ot)),at+Ct>=ut&&(me-=at+Ct-ut+4),_t=ye[me++],ht=ye[me++],Zt=ye[me++],$[Pe]=(ge[_t]+ge[ht+256>>0]+ge[Zt+512>>0]>>16)-128,H[Pe]=(ge[_t+768>>0]+ge[ht+1024>>0]+ge[Zt+1280>>0]>>16)-128,oe[Pe]=(ge[_t+1280>>0]+ge[ht+1536>>0]+ge[Zt+1792>>0]>>16)-128;ke=$e($,m,ke,i,n),et=$e(H,f,et,e,o),Qe=$e(oe,f,Qe,e,o),at+=32}ot+=8}if(R>=0){var Rt=[];Rt[1]=R+1,Rt[0]=(1<<R+1)-1,Me(Rt)}return Ve(65497),new Uint8Array(A)},r=r||50,function(){for(var be=String.fromCharCode,we=0;we<256;we++)se[we]=be(we)}(),i=Le(pe,Ce),e=Le(te,Se),n=Le(_e,de),o=Le(Te,De),function(){for(var be=1,we=2,ke=1;ke<=15;ke++){for(var et=be;et<we;et++)y[32767+et]=ke,g[32767+et]=[],g[32767+et][1]=ke,g[32767+et][0]=et;for(var Qe=-(we-1);Qe<=-be;Qe++)y[32767+Qe]=ke,g[32767+Qe]=[],g[32767+Qe][1]=ke,g[32767+Qe][0]=we-1+Qe;be<<=1,we<<=1}}(),function(){for(var be=0;be<256;be++)ge[be]=19595*be,ge[be+256>>0]=38470*be,ge[be+512>>0]=7471*be+32768,ge[be+768>>0]=-11059*be,ge[be+1024>>0]=-21709*be,ge[be+1280>>0]=32768*be+8421375,ge[be+1536>>0]=-27439*be,ge[be+1792>>0]=-5329*be}(),nt(r)}function qg(r,i){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!i,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function p_e(r){function i(pe){if(!pe)throw Error("assert :P")}function e(pe,Ce,_e){for(var de=0;4>de;de++)if(pe[Ce+de]!=_e.charCodeAt(de))return!0;return!1}function n(pe,Ce,_e,de,te){for(var Se=0;Se<te;Se++)pe[Ce+Se]=_e[de+Se]}function o(pe,Ce,_e,de){for(var te=0;te<de;te++)pe[Ce+te]=_e}function s(pe){return new Int32Array(pe)}function l(pe,Ce){for(var _e=[],de=0;de<pe;de++)_e.push(new Ce);return _e}function h(pe,Ce){var _e=[];return function de(te,Se,Te){for(var De=Te[Se],Le=0;Le<De&&(te.push(Te.length>Se+1?[]:new Ce),!(Te.length<Se+1));Le++)de(te[Le],Se+1,Te)}(_e,0,pe),_e}var p=function(){var pe=this;function Ce(B,z){for(var le=1<<z-1>>>0;B&le;)le>>>=1;return le?(B&le-1)+le:B}function _e(B,z,le,fe,Ie){i(!(fe%le));do B[z+(fe-=le)]=Ie;while(0<fe)}function de(B,z,le,fe,Ie){if(i(2328>=Ie),512>=Ie)var Ee=s(512);else if((Ee=s(Ie))==null)return 0;return function(Be,He,qe,Ze,St,Bt){var jt,kt,ai=He,Jt=1<<qe,It=s(16),Mt=s(16);for(i(St!=0),i(Ze!=null),i(Be!=null),i(0<qe),kt=0;kt<St;++kt){if(15<Ze[kt])return 0;++It[Ze[kt]]}if(It[0]==St)return 0;for(Mt[1]=0,jt=1;15>jt;++jt){if(It[jt]>1<<jt)return 0;Mt[jt+1]=Mt[jt]+It[jt]}for(kt=0;kt<St;++kt)jt=Ze[kt],0<Ze[kt]&&(Bt[Mt[jt]++]=kt);if(Mt[15]==1)return(Ze=new te).g=0,Ze.value=Bt[0],_e(Be,ai,1,Jt,Ze),Jt;var hi,Ci=-1,_i=Jt-1,cn=0,Ki=1,lr=1,Wi=1<<qe;for(kt=0,jt=1,St=2;jt<=qe;++jt,St<<=1){if(Ki+=lr<<=1,0>(lr-=It[jt]))return 0;for(;0<It[jt];--It[jt])(Ze=new te).g=jt,Ze.value=Bt[kt++],_e(Be,ai+cn,St,Wi,Ze),cn=Ce(cn,jt)}for(jt=qe+1,St=2;15>=jt;++jt,St<<=1){if(Ki+=lr<<=1,0>(lr-=It[jt]))return 0;for(;0<It[jt];--It[jt]){if(Ze=new te,(cn&_i)!=Ci){for(ai+=Wi,hi=1<<(Ci=jt)-qe;15>Ci&&!(0>=(hi-=It[Ci]));)++Ci,hi<<=1;Jt+=Wi=1<<(hi=Ci-qe),Be[He+(Ci=cn&_i)].g=hi+qe,Be[He+Ci].value=ai-He-Ci}Ze.g=jt-qe,Ze.value=Bt[kt++],_e(Be,ai+(cn>>qe),St,Wi,Ze),cn=Ce(cn,jt)}}return Ki!=2*Mt[15]-1?0:Jt}(B,z,le,fe,Ie,Ee)}function te(){this.value=this.g=0}function Se(){this.value=this.g=0}function Te(){this.G=l(5,te),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(od,Se)}function De(B,z,le,fe){i(B!=null),i(z!=null),i(2147483648>fe),B.Ca=254,B.I=0,B.b=-8,B.Ka=0,B.oa=z,B.pa=le,B.Jd=z,B.Yc=le+fe,B.Zc=4<=fe?le+fe-4+1:le,at(B)}function Le(B,z){for(var le=0;0<z--;)le|=ht(B,128)<<z;return le}function Me(B,z){var le=Le(B,z);return _t(B)?-le:le}function ze(B,z,le,fe){var Ie,Ee=0;for(i(B!=null),i(z!=null),i(4294967288>fe),B.Sb=fe,B.Ra=0,B.u=0,B.h=0,4<fe&&(fe=4),Ie=0;Ie<fe;++Ie)Ee+=z[le+Ie]<<8*Ie;B.Ra=Ee,B.bb=fe,B.oa=z,B.pa=le}function Ve(B){for(;8<=B.u&&B.bb<B.Sb;)B.Ra>>>=8,B.Ra+=B.oa[B.pa+B.bb]<<eg-8>>>0,++B.bb,B.u-=8;ke(B)&&(B.h=1,B.u=0)}function $e(B,z){if(i(0<=z),!B.h&&z<=Rb){var le=we(B)&Pb[z];return B.u+=z,Ve(B),le}return B.h=1,B.u=0}function nt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function be(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function we(B){return B.Ra>>>(B.u&eg-1)>>>0}function ke(B){return i(B.bb<=B.Sb),B.h||B.bb==B.Sb&&B.u>eg}function et(B,z){B.u=z,B.h=ke(B)}function Qe(B){B.u>=E0&&(i(B.u>=E0),Ve(B))}function at(B){i(B!=null&&B.oa!=null),B.pa<B.Zc?(B.I=(B.oa[B.pa++]|B.I<<8)>>>0,B.b+=8):(i(B!=null&&B.oa!=null),B.pa<B.Yc?(B.b+=8,B.I=B.oa[B.pa++]|B.I<<8):B.Ka?B.b=0:(B.I<<=8,B.b+=8,B.Ka=1))}function _t(B){return Le(B,1)}function ht(B,z){var le=B.Ca;0>B.b&&at(B);var fe=B.b,Ie=le*z>>>8,Ee=(B.I>>>fe>Ie)+0;for(Ee?(le-=Ie,B.I-=Ie+1<<fe>>>0):le=Ie+1,fe=le,Ie=0;256<=fe;)Ie+=8,fe>>=8;return fe=7^Ie+jd[fe],B.b-=fe,B.Ca=(le<<fe)-1,Ee}function Zt(B,z,le){B[z+0]=le>>24&255,B[z+1]=le>>16&255,B[z+2]=le>>8&255,B[z+3]=le>>0&255}function Tt(B,z){return B[z+0]<<0|B[z+1]<<8}function me(B,z){return Tt(B,z)|B[z+2]<<16}function Ct(B,z){return Tt(B,z)|Tt(B,z+2)<<16}function pt(B,z){var le=1<<z;return i(B!=null),i(0<z),B.X=s(le),B.X==null?0:(B.Mb=32-z,B.Xa=z,1)}function Pe(B,z){i(B!=null),i(z!=null),i(B.Xa==z.Xa),n(z.X,0,B.X,0,1<<z.Xa)}function ye(){this.X=[],this.Xa=this.Mb=0}function lt(B,z,le,fe){i(le!=null),i(fe!=null);var Ie=le[0],Ee=fe[0];return Ie==0&&(Ie=(B*Ee+z/2)/z),Ee==0&&(Ee=(z*Ie+B/2)/B),0>=Ie||0>=Ee?0:(le[0]=Ie,fe[0]=Ee,1)}function Ot(B,z){return B+(1<<z)-1>>>z}function ut(B,z){return((4278255360&B)+(4278255360&z)>>>0&4278255360)+((16711935&B)+(16711935&z)>>>0&16711935)>>>0}function ot(B,z){pe[z]=function(le,fe,Ie,Ee,Be,He,qe){var Ze;for(Ze=0;Ze<Be;++Ze){var St=pe[B](He[qe+Ze-1],Ie,Ee+Ze);He[qe+Ze]=ut(le[fe+Ze],St)}}}function Rt(){this.ud=this.hd=this.jd=0}function Lt(B,z){return((4278124286&(B^z))>>>1)+(B&z)>>>0}function Nt(B){return 0<=B&&256>B?B:0>B?0:255<B?255:void 0}function ni(B,z){return Nt(B+(B-z+.5>>1))}function wi(B,z,le){return Math.abs(z-le)-Math.abs(B-le)}function vi(B,z,le,fe,Ie,Ee,Be){for(fe=Ee[Be-1],le=0;le<Ie;++le)Ee[Be+le]=fe=ut(B[z+le],fe)}function Hi(B,z,le,fe,Ie){var Ee;for(Ee=0;Ee<le;++Ee){var Be=B[z+Ee],He=Be>>8&255,qe=16711935&(qe=(qe=16711935&Be)+((He<<16)+He));fe[Ie+Ee]=(4278255360&Be)+qe>>>0}}function Ei(B,z){z.jd=B>>0&255,z.hd=B>>8&255,z.ud=B>>16&255}function Li(B,z,le,fe,Ie,Ee){var Be;for(Be=0;Be<fe;++Be){var He=z[le+Be],qe=He>>>8,Ze=He,St=255&(St=(St=He>>>16)+((B.jd<<24>>24)*(qe<<24>>24)>>>5));Ze=255&(Ze=(Ze=Ze+((B.hd<<24>>24)*(qe<<24>>24)>>>5))+((B.ud<<24>>24)*(St<<24>>24)>>>5)),Ie[Ee+Be]=(4278255360&He)+(St<<16)+Ze}}function $i(B,z,le,fe,Ie){pe[z]=function(Ee,Be,He,qe,Ze,St,Bt,jt,kt){for(qe=Bt;qe<jt;++qe)for(Bt=0;Bt<kt;++Bt)Ze[St++]=Ie(He[fe(Ee[Be++])])},pe[B]=function(Ee,Be,He,qe,Ze,St,Bt){var jt=8>>Ee.b,kt=Ee.Ea,ai=Ee.K[0],Jt=Ee.w;if(8>jt)for(Ee=(1<<Ee.b)-1,Jt=(1<<jt)-1;Be<He;++Be){var It,Mt=0;for(It=0;It<kt;++It)It&Ee||(Mt=fe(qe[Ze++])),St[Bt++]=Ie(ai[Mt&Jt]),Mt>>=jt}else pe["VP8LMapColor"+le](qe,Ze,ai,Jt,St,Bt,Be,He,kt)}}function Wt(B,z,le,fe,Ie){for(le=z+le;z<le;){var Ee=B[z++];fe[Ie++]=Ee>>16&255,fe[Ie++]=Ee>>8&255,fe[Ie++]=Ee>>0&255}}function Sr(B,z,le,fe,Ie){for(le=z+le;z<le;){var Ee=B[z++];fe[Ie++]=Ee>>16&255,fe[Ie++]=Ee>>8&255,fe[Ie++]=Ee>>0&255,fe[Ie++]=Ee>>24&255}}function En(B,z,le,fe,Ie){for(le=z+le;z<le;){var Ee=(Be=B[z++])>>16&240|Be>>12&15,Be=Be>>0&240|Be>>28&15;fe[Ie++]=Ee,fe[Ie++]=Be}}function ro(B,z,le,fe,Ie){for(le=z+le;z<le;){var Ee=(Be=B[z++])>>16&248|Be>>13&7,Be=Be>>5&224|Be>>3&31;fe[Ie++]=Ee,fe[Ie++]=Be}}function yr(B,z,le,fe,Ie){for(le=z+le;z<le;){var Ee=B[z++];fe[Ie++]=Ee>>0&255,fe[Ie++]=Ee>>8&255,fe[Ie++]=Ee>>16&255}}function Ir(B,z,le,fe,Ie,Ee){if(Ee==0)for(le=z+le;z<le;)Zt(fe,((Ee=B[z++])[0]>>24|Ee[1]>>8&65280|Ee[2]<<8&16711680|Ee[3]<<24)>>>0),Ie+=32;else n(fe,Ie,B,z,le)}function Mo(B,z){pe[z][0]=pe[B+"0"],pe[z][1]=pe[B+"1"],pe[z][2]=pe[B+"2"],pe[z][3]=pe[B+"3"],pe[z][4]=pe[B+"4"],pe[z][5]=pe[B+"5"],pe[z][6]=pe[B+"6"],pe[z][7]=pe[B+"7"],pe[z][8]=pe[B+"8"],pe[z][9]=pe[B+"9"],pe[z][10]=pe[B+"10"],pe[z][11]=pe[B+"11"],pe[z][12]=pe[B+"12"],pe[z][13]=pe[B+"13"],pe[z][14]=pe[B+"0"],pe[z][15]=pe[B+"0"]}function kn(B){return B==XI||B==JI||B==vy||B==L0}function Lo(){this.eb=[],this.size=this.A=this.fb=0}function rr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function gr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Lo,this.f.kb=new rr,this.sd=null}function cs(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Mi(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function pr(B){return alert("todo:WebPSamplerProcessPlane"),B.T}function _o(B,z){var le=B.T,fe=z.ba.f.RGBA,Ie=fe.eb,Ee=fe.fb+B.ka*fe.A,Be=pp[z.ba.S],He=B.y,qe=B.O,Ze=B.f,St=B.N,Bt=B.ea,jt=B.W,kt=z.cc,ai=z.dc,Jt=z.Mc,It=z.Nc,Mt=B.ka,hi=B.ka+B.T,Ci=B.U,_i=Ci+1>>1;for(Mt==0?Be(He,qe,null,null,Ze,St,Bt,jt,Ze,St,Bt,jt,Ie,Ee,null,null,Ci):(Be(z.ec,z.fc,He,qe,kt,ai,Jt,It,Ze,St,Bt,jt,Ie,Ee-fe.A,Ie,Ee,Ci),++le);Mt+2<hi;Mt+=2)kt=Ze,ai=St,Jt=Bt,It=jt,St+=B.Rc,jt+=B.Rc,Ee+=2*fe.A,Be(He,(qe+=2*B.fa)-B.fa,He,qe,kt,ai,Jt,It,Ze,St,Bt,jt,Ie,Ee-fe.A,Ie,Ee,Ci);return qe+=B.fa,B.j+hi<B.o?(n(z.ec,z.fc,He,qe,Ci),n(z.cc,z.dc,Ze,St,_i),n(z.Mc,z.Nc,Bt,jt,_i),le--):1&hi||Be(He,qe,null,null,Ze,St,Bt,jt,Ze,St,Bt,jt,Ie,Ee+fe.A,null,null,Ci),le}function Xo(B,z,le){var fe=B.F,Ie=[B.J];if(fe!=null){var Ee=B.U,Be=z.ba.S,He=Be==QI||Be==vy;z=z.ba.f.RGBA;var qe=[0],Ze=B.ka;qe[0]=B.T,B.Kb&&(Ze==0?--qe[0]:(--Ze,Ie[0]-=B.width),B.j+B.ka+B.T==B.o&&(qe[0]=B.o-B.j-Ze));var St=z.eb;Ze=z.fb+Ze*z.A,B=Js(fe,Ie[0],B.width,Ee,qe,St,Ze+(He?0:3),z.A),i(le==qe),B&&kn(Be)&&up(St,Ze,He,Ee,qe,z.A)}return 0}function uo(B){var z=B.ma,le=z.ba.S,fe=11>le,Ie=le==KI||le==ZI||le==QI||le==bD||le==12||kn(le);if(z.memory=null,z.Ib=null,z.Jb=null,z.Nd=null,!AC(z.Oa,B,Ie?11:12))return 0;if(Ie&&kn(le)&&Ai(),B.da)alert("todo:use_scaling");else{if(fe){if(z.Ib=pr,B.Kb){if(le=B.U+1>>1,z.memory=s(B.U+2*le),z.memory==null)return 0;z.ec=z.memory,z.fc=0,z.cc=z.ec,z.dc=z.fc+B.U,z.Mc=z.cc,z.Nc=z.dc+le,z.Ib=_o,Ai()}}else alert("todo:EmitYUV");Ie&&(z.Jb=Xo,fe&&Ft())}if(fe&&!FL){for(B=0;256>B;++B)LL[B]=89858*(B-128)+iT>>wy,NL[B]=-22014*(B-128)+iT,pz[B]=-45773*(B-128),hz[B]=113618*(B-128)+iT>>wy;for(B=FC;B<ID;++B)z=76283*(B-16)+iT>>wy,mz[B-FC]=Uu(z,255),fz[B-FC]=Uu(z+8>>4,15);FL=1}return 1}function Rn(B){var z=B.ma,le=B.U,fe=B.T;return i(!(1&B.ka)),0>=le||0>=fe?0:(le=z.Ib(B,z),z.Jb!=null&&z.Jb(B,z,le),z.Dc+=le,1)}function Ra(B){B.ma.memory=null}function Pi(B,z,le,fe){return $e(B,8)!=47?0:(z[0]=$e(B,14)+1,le[0]=$e(B,14)+1,fe[0]=$e(B,1),$e(B,3)!=0?0:!B.h)}function Vs(B,z){if(4>B)return B+1;var le=B-2>>1;return(2+(1&B)<<le)+$e(z,le)+1}function wl(B,z){return 120<z?z-120:1<=(le=((le=JU[z-1])>>4)*B+(8-(15&le)))?le:1;var le}function Ur(B,z,le){var fe=we(le),Ie=B[z+=255&fe].g-8;return 0<Ie&&(et(le,le.u+8),fe=we(le),z+=B[z].value,z+=fe&(1<<Ie)-1),et(le,le.u+B[z].g),B[z].value}function Zn(B,z,le){return le.g+=B.g,le.value+=B.value<<z>>>0,i(8>=le.g),B.g}function ho(B,z,le){var fe=B.xc;return i((z=fe==0?0:B.vc[B.md*(le>>fe)+(z>>fe)])<B.Wb),B.Ya[z]}function $s(B,z,le,fe){var Ie=B.ab,Ee=B.c*z,Be=B.C;z=Be+z;var He=le,qe=fe;for(fe=B.Ta,le=B.Ua;0<Ie--;){var Ze=B.gc[Ie],St=Be,Bt=z,jt=He,kt=qe,ai=(qe=fe,He=le,Ze.Ea);switch(i(St<Bt),i(Bt<=Ze.nc),Ze.hc){case 2:HI(jt,kt,(Bt-St)*ai,qe,He);break;case 0:var Jt=St,It=Bt,Mt=qe,hi=He,Ci=(Wi=Ze).Ea;Jt==0&&(yD(jt,kt,null,null,1,Mt,hi),vi(jt,kt+1,0,0,Ci-1,Mt,hi+1),kt+=Ci,hi+=Ci,++Jt);for(var _i=1<<Wi.b,cn=_i-1,Ki=Ot(Ci,Wi.b),lr=Wi.K,Wi=Wi.w+(Jt>>Wi.b)*Ki;Jt<It;){var rs=lr,_s=Wi,es=1;for(Fb(jt,kt,Mt,hi-Ci,1,Mt,hi);es<Ci;){var Bo=(es&~cn)+_i;Bo>Ci&&(Bo=Ci),(0,D0[rs[_s++]>>8&15])(jt,kt+ +es,Mt,hi+es-Ci,Bo-es,Mt,hi+es),es=Bo}kt+=Ci,hi+=Ci,++Jt&cn||(Wi+=Ki)}Bt!=Ze.nc&&n(qe,He-ai,qe,He+(Bt-St-1)*ai,ai);break;case 1:for(ai=jt,It=kt,Ci=(jt=Ze.Ea)-(hi=jt&~(Mt=(kt=1<<Ze.b)-1)),Jt=Ot(jt,Ze.b),_i=Ze.K,Ze=Ze.w+(St>>Ze.b)*Jt;St<Bt;){for(cn=_i,Ki=Ze,lr=new Rt,Wi=It+hi,rs=It+jt;It<Wi;)Ei(cn[Ki++],lr),my(lr,ai,It,kt,qe,He),It+=kt,He+=kt;It<rs&&(Ei(cn[Ki++],lr),my(lr,ai,It,Ci,qe,He),It+=Ci,He+=Ci),++St&Mt||(Ze+=Jt)}break;case 3:if(jt==qe&&kt==He&&0<Ze.b){for(It=qe,jt=ai=He+(Bt-St)*ai-(hi=(Bt-St)*Ot(Ze.Ea,Ze.b)),kt=qe,Mt=He,Jt=[],hi=(Ci=hi)-1;0<=hi;--hi)Jt[hi]=kt[Mt+hi];for(hi=Ci-1;0<=hi;--hi)It[jt+hi]=Jt[hi];zu(Ze,St,Bt,qe,ai,qe,He)}else zu(Ze,St,Bt,jt,kt,qe,He)}He=fe,qe=le}qe!=le&&n(fe,le,He,qe,Ee)}function Ks(B,z){var le=B.V,fe=B.Ba+B.c*B.C,Ie=z-B.C;if(i(z<=B.l.o),i(16>=Ie),0<Ie){var Ee=B.l,Be=B.Ta,He=B.Ua,qe=Ee.width;if($s(B,Ie,le,fe),Ie=He=[He],i((le=B.C)<(fe=z)),i(Ee.v<Ee.va),fe>Ee.o&&(fe=Ee.o),le<Ee.j){var Ze=Ee.j-le;le=Ee.j,Ie[0]+=Ze*qe}if(le>=fe?le=0:(Ie[0]+=4*Ee.v,Ee.ka=le-Ee.j,Ee.U=Ee.va-Ee.v,Ee.T=fe-le,le=1),le){if(He=He[0],11>(le=B.ca).S){var St=le.f.RGBA,Bt=(fe=le.S,Ie=Ee.U,Ee=Ee.T,Ze=St.eb,St.A),jt=Ee;for(St=St.fb+B.Ma*St.A;0<jt--;){var kt=Be,ai=He,Jt=Ie,It=Ze,Mt=St;switch(fe){case YI:Gu(kt,ai,Jt,It,Mt);break;case KI:eu(kt,ai,Jt,It,Mt);break;case XI:eu(kt,ai,Jt,It,Mt),up(It,Mt,0,Jt,1,0);break;case IL:ig(kt,ai,Jt,It,Mt);break;case ZI:Ir(kt,ai,Jt,It,Mt,1);break;case JI:Ir(kt,ai,Jt,It,Mt,1),up(It,Mt,0,Jt,1,0);break;case QI:Ir(kt,ai,Jt,It,Mt,0);break;case vy:Ir(kt,ai,Jt,It,Mt,0),up(It,Mt,1,Jt,1,0);break;case bD:k0(kt,ai,Jt,It,Mt);break;case L0:k0(kt,ai,Jt,It,Mt),Xs(It,Mt,Jt,1,0);break;case wD:tg(kt,ai,Jt,It,Mt);break;default:i(0)}He+=qe,St+=Bt}B.Ma+=Ee}else alert("todo:EmitRescaledRowsYUVA");i(B.Ma<=le.height)}}B.C=z,i(B.C<=B.i)}function Cl(B){var z;if(0<B.ua)return 0;for(z=0;z<B.Wb;++z){var le=B.Ya[z].G,fe=B.Ya[z].H;if(0<le[1][fe[1]+0].g||0<le[2][fe[2]+0].g||0<le[3][fe[3]+0].g)return 0}return 1}function xl(B,z,le,fe,Ie,Ee){if(B.Z!=0){var Be=B.qd,He=B.rd;for(i(B0[B.Z]!=null);z<le;++z)B0[B.Z](Be,He,fe,Ie,fe,Ie,Ee),Be=fe,He=Ie,Ie+=Ee;B.qd=Be,B.rd=He}}function tc(B,z){var le=B.l.ma,fe=le.Z==0||le.Z==1?B.l.j:B.C;if(fe=B.C<fe?fe:B.C,i(z<=B.l.o),z>fe){var Ie=B.l.width,Ee=le.ca,Be=le.tb+Ie*fe,He=B.V,qe=B.Ba+B.c*fe,Ze=B.gc;i(B.ab==1),i(Ze[0].hc==3),Lb(Ze[0],fe,z,He,qe,Ee,Be),xl(le,fe,z,Ee,Be,Ie)}B.C=B.Ma=z}function Nu(B,z,le,fe,Ie,Ee,Be){var He=B.$/fe,qe=B.$%fe,Ze=B.m,St=B.s,Bt=le+B.$,jt=Bt;Ie=le+fe*Ie;var kt=le+fe*Ee,ai=280+St.ua,Jt=B.Pb?He:16777216,It=0<St.ua?St.Wa:null,Mt=St.wc,hi=Bt<kt?ho(St,qe,He):null;i(B.C<Ee),i(kt<=Ie);var Ci=!1;e:for(;;){for(;Ci||Bt<kt;){var _i=0;if(He>=Jt){var cn=Bt-le;i((Jt=B).Pb),Jt.wd=Jt.m,Jt.xd=cn,0<Jt.s.ua&&Pe(Jt.s.Wa,Jt.s.vb),Jt=He+tz}if(qe&Mt||(hi=ho(St,qe,He)),i(hi!=null),hi.Qb&&(z[Bt]=hi.qb,Ci=!0),!Ci)if(Qe(Ze),hi.jc){_i=Ze,cn=z;var Ki=Bt,lr=hi.pd[we(_i)&od-1];i(hi.jc),256>lr.g?(et(_i,_i.u+lr.g),cn[Ki]=lr.value,_i=0):(et(_i,_i.u+lr.g-256),i(256<=lr.value),_i=lr.value),_i==0&&(Ci=!0)}else _i=Ur(hi.G[0],hi.H[0],Ze);if(Ze.h)break;if(Ci||256>_i){if(!Ci)if(hi.nd)z[Bt]=(hi.qb|_i<<8)>>>0;else{if(Qe(Ze),Ci=Ur(hi.G[1],hi.H[1],Ze),Qe(Ze),cn=Ur(hi.G[2],hi.H[2],Ze),Ki=Ur(hi.G[3],hi.H[3],Ze),Ze.h)break;z[Bt]=(Ki<<24|Ci<<16|_i<<8|cn)>>>0}if(Ci=!1,++Bt,++qe>=fe&&(qe=0,++He,Be!=null&&He<=Ee&&!(He%16)&&Be(B,He),It!=null))for(;jt<Bt;)_i=z[jt++],It.X[(506832829*_i&4294967295)>>>It.Mb]=_i}else if(280>_i){if(_i=Vs(_i-256,Ze),cn=Ur(hi.G[4],hi.H[4],Ze),Qe(Ze),cn=wl(fe,cn=Vs(cn,Ze)),Ze.h)break;if(Bt-le<cn||Ie-Bt<_i)break e;for(Ki=0;Ki<_i;++Ki)z[Bt+Ki]=z[Bt+Ki-cn];for(Bt+=_i,qe+=_i;qe>=fe;)qe-=fe,++He,Be!=null&&He<=Ee&&!(He%16)&&Be(B,He);if(i(Bt<=Ie),qe&Mt&&(hi=ho(St,qe,He)),It!=null)for(;jt<Bt;)_i=z[jt++],It.X[(506832829*_i&4294967295)>>>It.Mb]=_i}else{if(!(_i<ai))break e;for(Ci=_i-280,i(It!=null);jt<Bt;)_i=z[jt++],It.X[(506832829*_i&4294967295)>>>It.Mb]=_i;_i=Bt,i(!(Ci>>>(cn=It).Xa)),z[_i]=cn.X[Ci],Ci=!0}Ci||i(Ze.h==ke(Ze))}if(B.Pb&&Ze.h&&Bt<Ie)i(B.m.h),B.a=5,B.m=B.wd,B.$=B.xd,0<B.s.ua&&Pe(B.s.vb,B.s.Wa);else{if(Ze.h)break e;Be?.(B,He>Ee?Ee:He),B.a=0,B.$=Bt-le}return 1}return B.a=3,0}function Bu(B){i(B!=null),B.vc=null,B.yc=null,B.Ya=null;var z=B.Wa;z!=null&&(z.X=null),B.vb=null,i(B!=null)}function Xa(){var B=new Mb;return B==null?null:(B.a=0,B.xb=DL,Mo("Predictor","VP8LPredictors"),Mo("Predictor","VP8LPredictors_C"),Mo("PredictorAdd","VP8LPredictorsAdd"),Mo("PredictorAdd","VP8LPredictorsAdd_C"),HI=Hi,my=Li,Gu=Wt,eu=Sr,k0=En,tg=ro,ig=yr,pe.VP8LMapColor32b=M0,pe.VP8LMapColor8b=WI,B)}function id(B,z,le,fe,Ie){var Ee=1,Be=[B],He=[z],qe=fe.m,Ze=fe.s,St=null,Bt=0;e:for(;;){if(le)for(;Ee&&$e(qe,1);){var jt=Be,kt=He,ai=fe,Jt=1,It=ai.m,Mt=ai.gc[ai.ab],hi=$e(It,2);if(ai.Oc&1<<hi)Ee=0;else{switch(ai.Oc|=1<<hi,Mt.hc=hi,Mt.Ea=jt[0],Mt.nc=kt[0],Mt.K=[null],++ai.ab,i(4>=ai.ab),hi){case 0:case 1:Mt.b=$e(It,3)+2,Jt=id(Ot(Mt.Ea,Mt.b),Ot(Mt.nc,Mt.b),0,ai,Mt.K),Mt.K=Mt.K[0];break;case 3:var Ci,_i=$e(It,8)+1,cn=16<_i?0:4<_i?1:2<_i?2:3;if(jt[0]=Ot(Mt.Ea,cn),Mt.b=cn,Ci=Jt=id(_i,1,0,ai,Mt.K)){var Ki,lr=_i,Wi=Mt,rs=1<<(8>>Wi.b),_s=s(rs);if(_s==null)Ci=0;else{var es=Wi.K[0],Bo=Wi.w;for(_s[0]=Wi.K[0][0],Ki=1;Ki<1*lr;++Ki)_s[Ki]=ut(es[Bo+Ki],_s[Ki-1]);for(;Ki<4*rs;++Ki)_s[Ki]=0;Wi.K[0]=null,Wi.K[0]=_s,Ci=1}}Jt=Ci;break;case 2:break;default:i(0)}Ee=Jt}}if(Be=Be[0],He=He[0],Ee&&$e(qe,1)&&!(Ee=1<=(Bt=$e(qe,4))&&11>=Bt)){fe.a=3;break e}var Us;if(Us=Ee)t:{var Ms,Jr,nc,Hu=fe,rc=Be,Wu=He,ys=Bt,Tc=le,Lh=Hu.m,jc=Hu.s,sd=[null],iu=1,mp=0,Ym=ez[ys];i:for(;;){if(Tc&&$e(Lh,1)){var Vc=$e(Lh,3)+2,sg=Ot(rc,Vc),nu=Ot(Wu,Vc),rm=sg*nu;if(!id(sg,nu,0,Hu,sd))break i;for(sd=sd[0],jc.xc=Vc,Ms=0;Ms<rm;++Ms){var j0=sd[Ms]>>8&65535;sd[Ms]=j0,j0>=iu&&(iu=j0+1)}}if(Lh.h)break i;for(Jr=0;5>Jr;++Jr){var Ml=by[Jr];!Jr&&0<ys&&(Ml+=1<<ys),mp<Ml&&(mp=Ml)}var TD=l(iu*Ym,te),$L=iu,UL=l($L,Te);if(UL==null)var jb=null;else i(65536>=$L),jb=UL;var Km=s(mp);if(jb==null||Km==null||TD==null){Hu.a=1;break i}var Cy=TD;for(Ms=nc=0;Ms<iu;++Ms){var Br=jb[Ms],j=Br.G,X=Br.H,he=0,ve=1,Ge=0;for(Jr=0;5>Jr;++Jr){Ml=by[Jr],j[Jr]=Cy,X[Jr]=nc,!Jr&&0<ys&&(Ml+=1<<ys);r:{var vt,ei=Ml,dn=Hu,_r=Km,Uo=Cy,ru=nc,om=0,ou=dn.m,vDe=$e(ou,1);if(o(_r,0,0,ei),vDe){var bDe=$e(ou,1)+1,wDe=$e(ou,1),Doe=$e(ou,wDe==0?1:8);_r[Doe]=1,bDe==2&&(_r[Doe=$e(ou,8)]=1);var zL=1}else{var koe=s(19),Ooe=$e(ou,4)+4;if(19<Ooe){dn.a=3;var GL=0;break r}for(vt=0;vt<Ooe;++vt)koe[EL[vt]]=$e(ou,3);var _z=void 0,AD=void 0,Poe=dn,CDe=koe,HL=ei,Roe=_r,yz=0,Vb=Poe.m,Foe=8,Loe=l(128,te);n:for(;de(Loe,0,7,CDe,19);){if($e(Vb,1)){var xDe=2+2*$e(Vb,3);if((_z=2+$e(Vb,xDe))>HL)break n}else _z=HL;for(AD=0;AD<HL&&_z--;){Qe(Vb);var Noe=Loe[0+(127&we(Vb))];et(Vb,Vb.u+Noe.g);var nT=Noe.value;if(16>nT)Roe[AD++]=nT,nT!=0&&(Foe=nT);else{var SDe=nT==16,Boe=nT-16,IDe=TL[Boe],joe=$e(Vb,eT[Boe])+IDe;if(AD+joe>HL)break n;for(var TDe=SDe?Foe:0;0<joe--;)Roe[AD++]=TDe}}yz=1;break n}yz||(Poe.a=3),zL=yz}(zL=zL&&!ou.h)&&(om=de(Uo,ru,8,_r,ei)),zL&&om!=0?GL=om:(dn.a=3,GL=0)}if(GL==0)break i;if(ve&&AL[Jr]==1&&(ve=Cy[nc].g==0),he+=Cy[nc].g,nc+=GL,3>=Jr){var ED,vz=Km[0];for(ED=1;ED<Ml;++ED)Km[ED]>vz&&(vz=Km[ED]);Ge+=vz}}if(Br.nd=ve,Br.Qb=0,ve&&(Br.qb=(j[3][X[3]+0].value<<24|j[1][X[1]+0].value<<16|j[2][X[2]+0].value)>>>0,he==0&&256>j[0][X[0]+0].value&&(Br.Qb=1,Br.qb+=j[0][X[0]+0].value<<8)),Br.jc=!Br.Qb&&6>Ge,Br.jc){var WL,xy=Br;for(WL=0;WL<od;++WL){var $b=WL,Ub=xy.pd[$b],qL=xy.G[0][xy.H[0]+$b];256<=qL.value?(Ub.g=qL.g+256,Ub.value=qL.value):(Ub.g=0,Ub.value=0,$b>>=Zn(qL,8,Ub),$b>>=Zn(xy.G[1][xy.H[1]+$b],16,Ub),$b>>=Zn(xy.G[2][xy.H[2]+$b],0,Ub),Zn(xy.G[3][xy.H[3]+$b],24,Ub))}}}jc.vc=sd,jc.Wb=iu,jc.Ya=jb,jc.yc=TD,Us=1;break t}Us=0}if(!(Ee=Us)){fe.a=3;break e}if(0<Bt){if(Ze.ua=1<<Bt,!pt(Ze.Wa,Bt)){fe.a=1,Ee=0;break e}}else Ze.ua=0;var bz=fe,Voe=Be,ADe=He,wz=bz.s,Cz=wz.xc;if(bz.c=Voe,bz.i=ADe,wz.md=Ot(Voe,Cz),wz.wc=Cz==0?-1:(1<<Cz)-1,le){fe.xb=lz;break e}if((St=s(Be*He))==null){fe.a=1,Ee=0;break e}Ee=(Ee=Nu(fe,St,0,Be,He,He,null))&&!qe.h;break e}return Ee?(Ie!=null?Ie[0]=St:(i(St==null),i(le)),fe.$=0,le||Bu(Ze)):Bu(Ze),Ee}function Dh(B,z){var le=B.c*B.i,fe=le+z+16*z;return i(B.c<=z),B.V=s(fe),B.V==null?(B.Ta=null,B.Ua=0,B.a=1,0):(B.Ta=B.V,B.Ua=B.Ba+le+z,1)}function Rd(B,z){var le=B.C,fe=z-le,Ie=B.V,Ee=B.Ba+B.c*le;for(i(z<=B.l.o);0<fe;){var Be=16<fe?16:fe,He=B.l.ma,qe=B.l.width,Ze=qe*Be,St=He.ca,Bt=He.tb+qe*le,jt=B.Ta,kt=B.Ua;$s(B,Be,Ie,Ee),Nl(jt,kt,St,Bt,Ze),xl(He,le,le+Be,St,Bt,qe),fe-=Be,Ie+=Be*B.c,le+=Be}i(le==z),B.C=B.Ma=z}function ju(){this.ub=this.yd=this.td=this.Rb=0}function qf(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function y0(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Yf(){this.Yb=function(){var B=[];return function z(le,fe,Ie){for(var Ee=Ie[fe],Be=0;Be<Ee&&(le.push(Ie.length>fe+1?[]:0),!(Ie.length<fe+1));Be++)z(le[Be],fe+1,Ie)}(B,0,[3,11]),B}()}function Fd(){this.jb=s(3),this.Wc=h([4,8],Yf),this.Xc=h([4,17],Yf)}function ms(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function nd(){this.ld=this.La=this.dd=this.tc=0}function Vu(){this.Na=this.la=0}function Gm(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function rd(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function kh(){this.uc=this.M=this.Nb=0,this.wa=Array(new nd),this.Y=0,this.ya=Array(new rd),this.aa=0,this.l=new em}function dy(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Sb(){this.cb=this.a=0,this.sc="",this.m=new nt,this.Od=new ju,this.Kc=new qf,this.ed=new ms,this.Qa=new y0,this.Ic=this.$c=this.Aa=0,this.D=new kh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,nt),this.ia=0,this.pb=l(4,Gm),this.Pa=new Fd,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new dy),this.Hd=0,this.rb=Array(new Vu),this.sb=0,this.wa=Array(new nd),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new rd),this.L=this.aa=0,this.gd=h([4,2],nd),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function em(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Jd(){var B=new Sb;return B!=null&&(B.a=0,B.sc="OK",B.cb=0,B.Xb=0,RC||(RC=v0)),B}function Zs(B,z,le){return B.a==0&&(B.a=z,B.sc=le,B.cb=0),0}function Kf(B,z,le){return 3<=le&&B[z+0]==157&&B[z+1]==1&&B[z+2]==42}function Zf(B,z){if(B==null)return 0;if(B.a=0,B.sc="OK",z==null)return Zs(B,2,"null VP8Io passed to VP8GetHeaders()");var le=z.data,fe=z.w,Ie=z.ha;if(4>Ie)return Zs(B,7,"Truncated header.");var Ee=le[fe+0]|le[fe+1]<<8|le[fe+2]<<16,Be=B.Od;if(Be.Rb=!(1&Ee),Be.td=Ee>>1&7,Be.yd=Ee>>4&1,Be.ub=Ee>>5,3<Be.td)return Zs(B,3,"Incorrect keyframe parameters.");if(!Be.yd)return Zs(B,4,"Frame not displayable.");fe+=3,Ie-=3;var He=B.Kc;if(Be.Rb){if(7>Ie)return Zs(B,7,"cannot parse picture header");if(!Kf(le,fe,Ie))return Zs(B,3,"Bad code word");He.c=16383&(le[fe+4]<<8|le[fe+3]),He.Td=le[fe+4]>>6,He.i=16383&(le[fe+6]<<8|le[fe+5]),He.Ud=le[fe+6]>>6,fe+=7,Ie-=7,B.za=He.c+15>>4,B.Ub=He.i+15>>4,z.width=He.c,z.height=He.i,z.Da=0,z.j=0,z.v=0,z.va=z.width,z.o=z.height,z.da=0,z.ib=z.width,z.hb=z.height,z.U=z.width,z.T=z.height,o((Ee=B.Pa).jb,0,255,Ee.jb.length),i((Ee=B.Qa)!=null),Ee.Cb=0,Ee.Bb=0,Ee.Fb=1,o(Ee.Zb,0,0,Ee.Zb.length),o(Ee.Lb,0,0,Ee.Lb)}if(Be.ub>Ie)return Zs(B,7,"bad partition length");De(Ee=B.m,le,fe,Be.ub),fe+=Be.ub,Ie-=Be.ub,Be.Rb&&(He.Ld=_t(Ee),He.Kd=_t(Ee)),He=B.Qa;var qe,Ze=B.Pa;if(i(Ee!=null),i(He!=null),He.Cb=_t(Ee),He.Cb){if(He.Bb=_t(Ee),_t(Ee)){for(He.Fb=_t(Ee),qe=0;4>qe;++qe)He.Zb[qe]=_t(Ee)?Me(Ee,7):0;for(qe=0;4>qe;++qe)He.Lb[qe]=_t(Ee)?Me(Ee,6):0}if(He.Bb)for(qe=0;3>qe;++qe)Ze.jb[qe]=_t(Ee)?Le(Ee,8):255}else He.Bb=0;if(Ee.Ka)return Zs(B,3,"cannot parse segment header");if((He=B.ed).zd=_t(Ee),He.Tb=Le(Ee,6),He.wb=Le(Ee,3),He.Pc=_t(Ee),He.Pc&&_t(Ee)){for(Ze=0;4>Ze;++Ze)_t(Ee)&&(He.vd[Ze]=Me(Ee,6));for(Ze=0;4>Ze;++Ze)_t(Ee)&&(He.od[Ze]=Me(Ee,6))}if(B.L=He.Tb==0?0:He.zd?1:2,Ee.Ka)return Zs(B,3,"cannot parse filter header");var St=Ie;if(Ie=qe=fe,fe=qe+St,He=St,B.Xb=(1<<Le(B.m,2))-1,St<3*(Ze=B.Xb))le=7;else{for(qe+=3*Ze,He-=3*Ze,St=0;St<Ze;++St){var Bt=le[Ie+0]|le[Ie+1]<<8|le[Ie+2]<<16;Bt>He&&(Bt=He),De(B.Jc[+St],le,qe,Bt),qe+=Bt,He-=Bt,Ie+=3}De(B.Jc[+Ze],le,qe,He),le=qe<fe?0:5}if(le!=0)return Zs(B,le,"cannot parse partitions");for(le=Le(qe=B.m,7),Ie=_t(qe)?Me(qe,4):0,fe=_t(qe)?Me(qe,4):0,He=_t(qe)?Me(qe,4):0,Ze=_t(qe)?Me(qe,4):0,qe=_t(qe)?Me(qe,4):0,St=B.Qa,Bt=0;4>Bt;++Bt){if(St.Cb){var jt=St.Zb[Bt];St.Fb||(jt+=le)}else{if(0<Bt){B.pb[Bt]=B.pb[0];continue}jt=le}var kt=B.pb[Bt];kt.Sc[0]=CD[Uu(jt+Ie,127)],kt.Sc[1]=xD[Uu(jt+0,127)],kt.Eb[0]=2*CD[Uu(jt+fe,127)],kt.Eb[1]=101581*xD[Uu(jt+He,127)]>>16,8>kt.Eb[1]&&(kt.Eb[1]=8),kt.Qc[0]=CD[Uu(jt+Ze,117)],kt.Qc[1]=xD[Uu(jt+qe,127)],kt.lc=jt+qe}if(!Be.Rb)return Zs(B,4,"Not a key frame.");for(_t(Ee),Be=B.Pa,le=0;4>le;++le){for(Ie=0;8>Ie;++Ie)for(fe=0;3>fe;++fe)for(He=0;11>He;++He)Ze=ht(Ee,sz[le][Ie][fe][He])?Le(Ee,8):rz[le][Ie][fe][He],Be.Wc[le][Ie].Yb[fe][He]=Ze;for(Ie=0;17>Ie;++Ie)Be.Xc[le][Ie]=Be.Wc[le][az[Ie]]}return B.kc=_t(Ee),B.kc&&(B.Bd=Le(Ee,8)),B.cb=1}function v0(B,z,le,fe,Ie,Ee,Be){var He=z[Ie].Yb[le];for(le=0;16>Ie;++Ie){if(!ht(B,He[le+0]))return Ie;for(;!ht(B,He[le+1]);)if(He=z[++Ie].Yb[0],le=0,Ie==16)return 16;var qe=z[Ie+1].Yb;if(ht(B,He[le+2])){var Ze=B,St=0;if(ht(Ze,(jt=He)[(Bt=le)+3]))if(ht(Ze,jt[Bt+6])){for(He=0,Bt=2*(St=ht(Ze,jt[Bt+8]))+(jt=ht(Ze,jt[Bt+9+St])),St=0,jt=iz[Bt];jt[He];++He)St+=St+ht(Ze,jt[He]);St+=3+(8<<Bt)}else ht(Ze,jt[Bt+7])?(St=7+2*ht(Ze,165),St+=ht(Ze,145)):St=5+ht(Ze,159);else St=ht(Ze,jt[Bt+4])?3+ht(Ze,jt[Bt+5]):2;He=qe[2]}else St=1,He=qe[1];qe=Be+nz[Ie],0>(Ze=B).b&&at(Ze);var Bt,jt=Ze.b,kt=(Bt=Ze.Ca>>1)-(Ze.I>>jt)>>31;--Ze.b,Ze.Ca+=kt,Ze.Ca|=1,Ze.I-=(Bt+1&kt)<<jt,Ee[qe]=((St^kt)-kt)*fe[(0<Ie)+0]}return 16}function Qf(B){var z=B.rb[B.sb-1];z.la=0,z.Na=0,o(B.zc,0,0,B.zc.length),B.ja=0}function b0(B,z){if(B==null)return 0;if(z==null)return Zs(B,2,"NULL VP8Io parameter in VP8Decode().");if(!B.cb&&!Zf(B,z))return 0;if(i(B.cb),z.ac==null||z.ac(z)){z.ob&&(B.L=0);var le=nm[B.L];if(B.L==2?(B.yb=0,B.zb=0):(B.yb=z.v-le>>4,B.zb=z.j-le>>4,0>B.yb&&(B.yb=0),0>B.zb&&(B.zb=0)),B.Va=z.o+15+le>>4,B.Hb=z.va+15+le>>4,B.Hb>B.za&&(B.Hb=B.za),B.Va>B.Ub&&(B.Va=B.Ub),0<B.L){var fe=B.ed;for(le=0;4>le;++le){var Ie;if(B.Qa.Cb){var Ee=B.Qa.Lb[le];B.Qa.Fb||(Ee+=fe.Tb)}else Ee=fe.Tb;for(Ie=0;1>=Ie;++Ie){var Be=B.gd[le][Ie],He=Ee;if(fe.Pc&&(He+=fe.vd[0],Ie&&(He+=fe.od[0])),0<(He=0>He?0:63<He?63:He)){var qe=He;0<fe.wb&&(qe=4<fe.wb?qe>>2:qe>>1)>9-fe.wb&&(qe=9-fe.wb),1>qe&&(qe=1),Be.dd=qe,Be.tc=2*He+qe,Be.ld=40<=He?2:15<=He?1:0}else Be.tc=0;Be.La=Ie}}}le=0}else Zs(B,6,"Frame setup failed"),le=B.a;if(le=le==0){if(le){B.$c=0,0<B.Aa||(B.Ic=gz);e:{le=B.Ic,fe=4*(qe=B.za);var Ze=32*qe,St=qe+1,Bt=0<B.L?qe*(0<B.Aa?2:1):0,jt=(B.Aa==2?2:1)*qe;if((Be=fe+832+(Ie=3*(16*le+nm[B.L])/2*Ze)+(Ee=B.Fa!=null&&0<B.Fa.length?B.Kc.c*B.Kc.i:0))!=Be)le=0;else{if(Be>B.Vb){if(B.Vb=0,B.Ec=s(Be),B.Fc=0,B.Ec==null){le=Zs(B,1,"no memory during frame initialization.");break e}B.Vb=Be}Be=B.Ec,He=B.Fc,B.Ac=Be,B.Bc=He,He+=fe,B.Gd=l(Ze,dy),B.Hd=0,B.rb=l(St+1,Vu),B.sb=1,B.wa=Bt?l(Bt,nd):null,B.Y=0,B.D.Nb=0,B.D.wa=B.wa,B.D.Y=B.Y,0<B.Aa&&(B.D.Y+=qe),i(!0),B.oc=Be,B.pc=He,He+=832,B.ya=l(jt,rd),B.aa=0,B.D.ya=B.ya,B.D.aa=B.aa,B.Aa==2&&(B.D.aa+=qe),B.R=16*qe,B.B=8*qe,qe=(Ze=nm[B.L])*B.R,Ze=Ze/2*B.B,B.sa=Be,B.ta=He+qe,B.qa=B.sa,B.ra=B.ta+16*le*B.R+Ze,B.Ha=B.qa,B.Ia=B.ra+8*le*B.B+Ze,B.$c=0,He+=Ie,B.mb=Ee?Be:null,B.nb=Ee?He:null,i(He+Ee<=B.Fc+B.Vb),Qf(B),o(B.Ac,B.Bc,0,fe),le=1}}if(le){if(z.ka=0,z.y=B.sa,z.O=B.ta,z.f=B.qa,z.N=B.ra,z.ea=B.Ha,z.Vd=B.Ia,z.fa=B.R,z.Rc=B.B,z.F=null,z.J=0,!qI){for(le=-255;255>=le;++le)Ic[255+le]=0>le?-le:le;for(le=-1020;1020>=le;++le)rg[1020+le]=-128>le?-128:127<le?127:le;for(le=-112;112>=le;++le)PC[112+le]=-16>le?-16:15<le?15:le;for(le=-255;510>=le;++le)Bb[255+le]=0>le?0:255<le?255:le;qI=1}Nb=ft,ng=Xf,MC=$u,tu=Ue,El=Ke,Al=C0,cp=bC,DC=hy,kC=wC,O0=CC,P0=Eb,R0=Ph,fy=Rh,gy=UI,_y=vC,F0=Jo,OC=Oh,dp=uy,im[0]=Hm,im[1]=Ii,im[2]=hD,im[3]=pD,im[4]=NI,im[5]=Ib,im[6]=BI,im[7]=_C,im[8]=fD,im[9]=mD,N0[0]=Ld,N0[1]=oo,N0[2]=Es,N0[3]=Qs,N0[4]=Nd,N0[5]=uD,N0[6]=LI,og[0]=Wm,og[1]=sn,og[2]=gD,og[3]=yC,og[4]=x0,og[5]=_D,og[6]=Tb,le=1}else le=0}le&&(le=function(kt,ai){for(kt.M=0;kt.M<kt.Va;++kt.M){var Jt,It=kt.Jc[kt.M&kt.Xb],Mt=kt.m,hi=kt;for(Jt=0;Jt<hi.za;++Jt){var Ci=Mt,_i=hi,cn=_i.Ac,Ki=_i.Bc+4*Jt,lr=_i.zc,Wi=_i.ya[_i.aa+Jt];if(_i.Qa.Bb?Wi.$b=ht(Ci,_i.Pa.jb[0])?2+ht(Ci,_i.Pa.jb[2]):ht(Ci,_i.Pa.jb[1]):Wi.$b=0,_i.kc&&(Wi.Ad=ht(Ci,_i.Bd)),Wi.Za=!ht(Ci,145)+0,Wi.Za){var rs=Wi.Ob,_s=0;for(_i=0;4>_i;++_i){var es,Bo=lr[0+_i];for(es=0;4>es;++es){Bo=oz[cn[Ki+es]][Bo];for(var Us=ML[ht(Ci,Bo[0])];0<Us;)Us=ML[2*Us+ht(Ci,Bo[Us])];Bo=-Us,cn[Ki+es]=Bo}n(rs,_s,cn,Ki,4),_s+=4,lr[0+_i]=Bo}}else Bo=ht(Ci,156)?ht(Ci,128)?1:3:ht(Ci,163)?2:0,Wi.Ob[0]=Bo,o(cn,Ki,Bo,4),o(lr,0,Bo,4);Wi.Dd=ht(Ci,142)?ht(Ci,114)?ht(Ci,183)?1:3:2:0}if(hi.m.Ka)return Zs(kt,7,"Premature end-of-partition0 encountered.");for(;kt.ja<kt.za;++kt.ja){if(hi=It,Ci=(Mt=kt).rb[Mt.sb-1],cn=Mt.rb[Mt.sb+Mt.ja],Jt=Mt.ya[Mt.aa+Mt.ja],Ki=Mt.kc?Jt.Ad:0)Ci.la=cn.la=0,Jt.Za||(Ci.Na=cn.Na=0),Jt.Hc=0,Jt.Gc=0,Jt.ia=0;else{var Ms,Jr;if(Ci=cn,cn=hi,Ki=Mt.Pa.Xc,lr=Mt.ya[Mt.aa+Mt.ja],Wi=Mt.pb[lr.$b],_i=lr.ad,rs=0,_s=Mt.rb[Mt.sb-1],Bo=es=0,o(_i,rs,0,384),lr.Za)var nc=0,Hu=Ki[3];else{Us=s(16);var rc=Ci.Na+_s.Na;if(rc=RC(cn,Ki[1],rc,Wi.Eb,0,Us,0),Ci.Na=_s.Na=(0<rc)+0,1<rc)Nb(Us,0,_i,rs);else{var Wu=Us[0]+3>>3;for(Us=0;256>Us;Us+=16)_i[rs+Us]=Wu}nc=1,Hu=Ki[0]}var ys=15&Ci.la,Tc=15&_s.la;for(Us=0;4>Us;++Us){var Lh=1&Tc;for(Wu=Jr=0;4>Wu;++Wu)ys=ys>>1|(Lh=(rc=RC(cn,Hu,rc=Lh+(1&ys),Wi.Sc,nc,_i,rs))>nc)<<7,Jr=Jr<<2|(3<rc?3:1<rc?2:_i[rs+0]!=0),rs+=16;ys>>=4,Tc=Tc>>1|Lh<<7,es=(es<<8|Jr)>>>0}for(Hu=ys,nc=Tc>>4,Ms=0;4>Ms;Ms+=2){for(Jr=0,ys=Ci.la>>4+Ms,Tc=_s.la>>4+Ms,Us=0;2>Us;++Us){for(Lh=1&Tc,Wu=0;2>Wu;++Wu)rc=Lh+(1&ys),ys=ys>>1|(Lh=0<(rc=RC(cn,Ki[2],rc,Wi.Qc,0,_i,rs)))<<3,Jr=Jr<<2|(3<rc?3:1<rc?2:_i[rs+0]!=0),rs+=16;ys>>=2,Tc=Tc>>1|Lh<<5}Bo|=Jr<<4*Ms,Hu|=ys<<4<<Ms,nc|=(240&Tc)<<Ms}Ci.la=Hu,_s.la=nc,lr.Hc=es,lr.Gc=Bo,lr.ia=43690&Bo?0:Wi.ia,Ki=!(es|Bo)}if(0<Mt.L&&(Mt.wa[Mt.Y+Mt.ja]=Mt.gd[Jt.$b][Jt.Za],Mt.wa[Mt.Y+Mt.ja].La|=!Ki),hi.Ka)return Zs(kt,7,"Premature end-of-file encountered.")}if(Qf(kt),Mt=ai,hi=1,Jt=(It=kt).D,Ci=0<It.L&&It.M>=It.zb&&It.M<=It.Va,It.Aa==0)e:{if(Jt.M=It.M,Jt.uc=Ci,kb(It,Jt),hi=1,Jt=(Jr=It.D).Nb,Ci=(Bo=nm[It.L])*It.R,cn=Bo/2*It.B,Us=16*Jt*It.R,Wu=8*Jt*It.B,Ki=It.sa,lr=It.ta-Ci+Us,Wi=It.qa,_i=It.ra-cn+Wu,rs=It.Ha,_s=It.Ia-cn+Wu,Tc=(ys=Jr.M)==0,es=ys>=It.Va-1,It.Aa==2&&kb(It,Jr),Jr.uc)for(Lh=(rc=It).D.M,i(rc.D.uc),Jr=rc.yb;Jr<rc.Hb;++Jr){nc=Jr,Hu=Lh;var jc=(sd=(Ml=rc).D).Nb;Ms=Ml.R;var sd=sd.wa[sd.Y+nc],iu=Ml.sa,mp=Ml.ta+16*jc*Ms+16*nc,Ym=sd.dd,Vc=sd.tc;if(Vc!=0)if(i(3<=Vc),Ml.L==1)0<nc&&F0(iu,mp,Ms,Vc+4),sd.La&&dp(iu,mp,Ms,Vc),0<Hu&&_y(iu,mp,Ms,Vc+4),sd.La&&OC(iu,mp,Ms,Vc);else{var sg=Ml.B,nu=Ml.qa,rm=Ml.ra+8*jc*sg+8*nc,j0=Ml.Ha,Ml=Ml.Ia+8*jc*sg+8*nc;jc=sd.ld,0<nc&&(DC(iu,mp,Ms,Vc+4,Ym,jc),O0(nu,rm,j0,Ml,sg,Vc+4,Ym,jc)),sd.La&&(R0(iu,mp,Ms,Vc,Ym,jc),gy(nu,rm,j0,Ml,sg,Vc,Ym,jc)),0<Hu&&(cp(iu,mp,Ms,Vc+4,Ym,jc),kC(nu,rm,j0,Ml,sg,Vc+4,Ym,jc)),sd.La&&(P0(iu,mp,Ms,Vc,Ym,jc),fy(nu,rm,j0,Ml,sg,Vc,Ym,jc))}}if(It.ia&&alert("todo:DitherRow"),Mt.put!=null){if(Jr=16*ys,ys=16*(ys+1),Tc?(Mt.y=It.sa,Mt.O=It.ta+Us,Mt.f=It.qa,Mt.N=It.ra+Wu,Mt.ea=It.Ha,Mt.W=It.Ia+Wu):(Jr-=Bo,Mt.y=Ki,Mt.O=lr,Mt.f=Wi,Mt.N=_i,Mt.ea=rs,Mt.W=_s),es||(ys-=Bo),ys>Mt.o&&(ys=Mt.o),Mt.F=null,Mt.J=null,It.Fa!=null&&0<It.Fa.length&&Jr<ys&&(Mt.J=Db(It,Mt,Jr,ys-Jr),Mt.F=It.mb,Mt.F==null&&Mt.F.length==0)){hi=Zs(It,3,"Could not decode alpha data.");break e}Jr<Mt.j&&(Bo=Mt.j-Jr,Jr=Mt.j,i(!(1&Bo)),Mt.O+=It.R*Bo,Mt.N+=It.B*(Bo>>1),Mt.W+=It.B*(Bo>>1),Mt.F!=null&&(Mt.J+=Mt.width*Bo)),Jr<ys&&(Mt.O+=Mt.v,Mt.N+=Mt.v>>1,Mt.W+=Mt.v>>1,Mt.F!=null&&(Mt.J+=Mt.v),Mt.ka=Jr-Mt.j,Mt.U=Mt.va-Mt.v,Mt.T=ys-Jr,hi=Mt.put(Mt))}Jt+1!=It.Ic||es||(n(It.sa,It.ta-Ci,Ki,lr+16*It.R,Ci),n(It.qa,It.ra-cn,Wi,_i+8*It.B,cn),n(It.Ha,It.Ia-cn,rs,_s+8*It.B,cn))}if(!hi)return Zs(kt,6,"Output aborted.")}return 1}(B,z)),z.bc!=null&&z.bc(z),le&=1}return le?(B.cb=0,le):0}function Sl(B,z,le,fe,Ie){Ie=B[z+le+32*fe]+(Ie>>3),B[z+le+32*fe]=-256&Ie?0>Ie?0:255:Ie}function w0(B,z,le,fe,Ie,Ee){Sl(B,z,0,le,fe+Ie),Sl(B,z,1,le,fe+Ee),Sl(B,z,2,le,fe-Ee),Sl(B,z,3,le,fe-Ie)}function Ll(B){return(20091*B>>16)+B}function ap(B,z,le,fe){var Ie,Ee=0,Be=s(16);for(Ie=0;4>Ie;++Ie){var He=B[z+0]+B[z+8],qe=B[z+0]-B[z+8],Ze=(35468*B[z+4]>>16)-Ll(B[z+12]),St=Ll(B[z+4])+(35468*B[z+12]>>16);Be[Ee+0]=He+St,Be[Ee+1]=qe+Ze,Be[Ee+2]=qe-Ze,Be[Ee+3]=He-St,Ee+=4,z++}for(Ie=Ee=0;4>Ie;++Ie)He=(B=Be[Ee+0]+4)+Be[Ee+8],qe=B-Be[Ee+8],Ze=(35468*Be[Ee+4]>>16)-Ll(Be[Ee+12]),Sl(le,fe,0,0,He+(St=Ll(Be[Ee+4])+(35468*Be[Ee+12]>>16))),Sl(le,fe,1,0,qe+Ze),Sl(le,fe,2,0,qe-Ze),Sl(le,fe,3,0,He-St),Ee++,fe+=32}function C0(B,z,le,fe){var Ie=B[z+0]+4,Ee=35468*B[z+4]>>16,Be=Ll(B[z+4]),He=35468*B[z+1]>>16;w0(le,fe,0,Ie+Be,B=Ll(B[z+1]),He),w0(le,fe,1,Ie+Ee,B,He),w0(le,fe,2,Ie-Ee,B,He),w0(le,fe,3,Ie-Be,B,He)}function Xf(B,z,le,fe,Ie){ap(B,z,le,fe),Ie&&ap(B,z+16,le,fe+4)}function $u(B,z,le,fe){ng(B,z+0,le,fe,1),ng(B,z+32,le,fe+128,1)}function Ue(B,z,le,fe){var Ie;for(B=B[z+0]+4,Ie=0;4>Ie;++Ie)for(z=0;4>z;++z)Sl(le,fe,z,Ie,B)}function Ke(B,z,le,fe){B[z+0]&&tu(B,z+0,le,fe),B[z+16]&&tu(B,z+16,le,fe+4),B[z+32]&&tu(B,z+32,le,fe+128),B[z+48]&&tu(B,z+48,le,fe+128+4)}function ft(B,z,le,fe){var Ie,Ee=s(16);for(Ie=0;4>Ie;++Ie){var Be=B[z+0+Ie]+B[z+12+Ie],He=B[z+4+Ie]+B[z+8+Ie],qe=B[z+4+Ie]-B[z+8+Ie],Ze=B[z+0+Ie]-B[z+12+Ie];Ee[0+Ie]=Be+He,Ee[8+Ie]=Be-He,Ee[4+Ie]=Ze+qe,Ee[12+Ie]=Ze-qe}for(Ie=0;4>Ie;++Ie)Be=(B=Ee[0+4*Ie]+3)+Ee[3+4*Ie],He=Ee[1+4*Ie]+Ee[2+4*Ie],qe=Ee[1+4*Ie]-Ee[2+4*Ie],Ze=B-Ee[3+4*Ie],le[fe+0]=Be+He>>3,le[fe+16]=Ze+qe>>3,le[fe+32]=Be-He>>3,le[fe+48]=Ze-qe>>3,fe+=64}function Gt(B,z,le){var fe,Ie=z-32,Ee=Fh,Be=255-B[Ie-1];for(fe=0;fe<le;++fe){var He,qe=Ee,Ze=Be+B[z-1];for(He=0;He<le;++He)B[z+He]=qe[Ze+B[Ie+He]];z+=32}}function Ii(B,z){Gt(B,z,4)}function sn(B,z){Gt(B,z,8)}function oo(B,z){Gt(B,z,16)}function Es(B,z){var le;for(le=0;16>le;++le)n(B,z+32*le,B,z-32,16)}function Qs(B,z){var le;for(le=16;0<le;--le)o(B,z,B[z-1],16),z+=32}function Il(B,z,le){var fe;for(fe=0;16>fe;++fe)o(z,le+32*fe,B,16)}function Ld(B,z){var le,fe=16;for(le=0;16>le;++le)fe+=B[z-1+32*le]+B[z+le-32];Il(fe>>5,B,z)}function Nd(B,z){var le,fe=8;for(le=0;16>le;++le)fe+=B[z-1+32*le];Il(fe>>4,B,z)}function uD(B,z){var le,fe=8;for(le=0;16>le;++le)fe+=B[z+le-32];Il(fe>>4,B,z)}function LI(B,z){Il(128,B,z)}function Pr(B,z,le){return B+2*z+le+2>>2}function hD(B,z){var le,fe=z-32;for(fe=new Uint8Array([Pr(B[fe-1],B[fe+0],B[fe+1]),Pr(B[fe+0],B[fe+1],B[fe+2]),Pr(B[fe+1],B[fe+2],B[fe+3]),Pr(B[fe+2],B[fe+3],B[fe+4])]),le=0;4>le;++le)n(B,z+32*le,fe,0,fe.length)}function pD(B,z){var le=B[z-1],fe=B[z-1+32],Ie=B[z-1+64],Ee=B[z-1+96];Zt(B,z+0,16843009*Pr(B[z-1-32],le,fe)),Zt(B,z+32,16843009*Pr(le,fe,Ie)),Zt(B,z+64,16843009*Pr(fe,Ie,Ee)),Zt(B,z+96,16843009*Pr(Ie,Ee,Ee))}function Hm(B,z){var le,fe=4;for(le=0;4>le;++le)fe+=B[z+le-32]+B[z-1+32*le];for(fe>>=3,le=0;4>le;++le)o(B,z+32*le,fe,4)}function NI(B,z){var le=B[z-1+0],fe=B[z-1+32],Ie=B[z-1+64],Ee=B[z-1-32],Be=B[z+0-32],He=B[z+1-32],qe=B[z+2-32],Ze=B[z+3-32];B[z+0+96]=Pr(fe,Ie,B[z-1+96]),B[z+1+96]=B[z+0+64]=Pr(le,fe,Ie),B[z+2+96]=B[z+1+64]=B[z+0+32]=Pr(Ee,le,fe),B[z+3+96]=B[z+2+64]=B[z+1+32]=B[z+0+0]=Pr(Be,Ee,le),B[z+3+64]=B[z+2+32]=B[z+1+0]=Pr(He,Be,Ee),B[z+3+32]=B[z+2+0]=Pr(qe,He,Be),B[z+3+0]=Pr(Ze,qe,He)}function BI(B,z){var le=B[z+1-32],fe=B[z+2-32],Ie=B[z+3-32],Ee=B[z+4-32],Be=B[z+5-32],He=B[z+6-32],qe=B[z+7-32];B[z+0+0]=Pr(B[z+0-32],le,fe),B[z+1+0]=B[z+0+32]=Pr(le,fe,Ie),B[z+2+0]=B[z+1+32]=B[z+0+64]=Pr(fe,Ie,Ee),B[z+3+0]=B[z+2+32]=B[z+1+64]=B[z+0+96]=Pr(Ie,Ee,Be),B[z+3+32]=B[z+2+64]=B[z+1+96]=Pr(Ee,Be,He),B[z+3+64]=B[z+2+96]=Pr(Be,He,qe),B[z+3+96]=Pr(He,qe,qe)}function Ib(B,z){var le=B[z-1+0],fe=B[z-1+32],Ie=B[z-1+64],Ee=B[z-1-32],Be=B[z+0-32],He=B[z+1-32],qe=B[z+2-32],Ze=B[z+3-32];B[z+0+0]=B[z+1+64]=Ee+Be+1>>1,B[z+1+0]=B[z+2+64]=Be+He+1>>1,B[z+2+0]=B[z+3+64]=He+qe+1>>1,B[z+3+0]=qe+Ze+1>>1,B[z+0+96]=Pr(Ie,fe,le),B[z+0+64]=Pr(fe,le,Ee),B[z+0+32]=B[z+1+96]=Pr(le,Ee,Be),B[z+1+32]=B[z+2+96]=Pr(Ee,Be,He),B[z+2+32]=B[z+3+96]=Pr(Be,He,qe),B[z+3+32]=Pr(He,qe,Ze)}function _C(B,z){var le=B[z+0-32],fe=B[z+1-32],Ie=B[z+2-32],Ee=B[z+3-32],Be=B[z+4-32],He=B[z+5-32],qe=B[z+6-32],Ze=B[z+7-32];B[z+0+0]=le+fe+1>>1,B[z+1+0]=B[z+0+64]=fe+Ie+1>>1,B[z+2+0]=B[z+1+64]=Ie+Ee+1>>1,B[z+3+0]=B[z+2+64]=Ee+Be+1>>1,B[z+0+32]=Pr(le,fe,Ie),B[z+1+32]=B[z+0+96]=Pr(fe,Ie,Ee),B[z+2+32]=B[z+1+96]=Pr(Ie,Ee,Be),B[z+3+32]=B[z+2+96]=Pr(Ee,Be,He),B[z+3+64]=Pr(Be,He,qe),B[z+3+96]=Pr(He,qe,Ze)}function mD(B,z){var le=B[z-1+0],fe=B[z-1+32],Ie=B[z-1+64],Ee=B[z-1+96];B[z+0+0]=le+fe+1>>1,B[z+2+0]=B[z+0+32]=fe+Ie+1>>1,B[z+2+32]=B[z+0+64]=Ie+Ee+1>>1,B[z+1+0]=Pr(le,fe,Ie),B[z+3+0]=B[z+1+32]=Pr(fe,Ie,Ee),B[z+3+32]=B[z+1+64]=Pr(Ie,Ee,Ee),B[z+3+64]=B[z+2+64]=B[z+0+96]=B[z+1+96]=B[z+2+96]=B[z+3+96]=Ee}function fD(B,z){var le=B[z-1+0],fe=B[z-1+32],Ie=B[z-1+64],Ee=B[z-1+96],Be=B[z-1-32],He=B[z+0-32],qe=B[z+1-32],Ze=B[z+2-32];B[z+0+0]=B[z+2+32]=le+Be+1>>1,B[z+0+32]=B[z+2+64]=fe+le+1>>1,B[z+0+64]=B[z+2+96]=Ie+fe+1>>1,B[z+0+96]=Ee+Ie+1>>1,B[z+3+0]=Pr(He,qe,Ze),B[z+2+0]=Pr(Be,He,qe),B[z+1+0]=B[z+3+32]=Pr(le,Be,He),B[z+1+32]=B[z+3+64]=Pr(fe,le,Be),B[z+1+64]=B[z+3+96]=Pr(Ie,fe,le),B[z+1+96]=Pr(Ee,Ie,fe)}function gD(B,z){var le;for(le=0;8>le;++le)n(B,z+32*le,B,z-32,8)}function yC(B,z){var le;for(le=0;8>le;++le)o(B,z,B[z-1],8),z+=32}function Jf(B,z,le){var fe;for(fe=0;8>fe;++fe)o(z,le+32*fe,B,8)}function Wm(B,z){var le,fe=8;for(le=0;8>le;++le)fe+=B[z+le-32]+B[z-1+32*le];Jf(fe>>4,B,z)}function _D(B,z){var le,fe=4;for(le=0;8>le;++le)fe+=B[z+le-32];Jf(fe>>3,B,z)}function x0(B,z){var le,fe=4;for(le=0;8>le;++le)fe+=B[z-1+32*le];Jf(fe>>3,B,z)}function Tb(B,z){Jf(128,B,z)}function Ab(B,z,le){var fe=B[z-le],Ie=B[z+0],Ee=3*(Ie-fe)+vD[1020+B[z-2*le]-B[z+le]],Be=yy[112+(Ee+4>>3)];B[z-le]=Fh[255+fe+yy[112+(Ee+3>>3)]],B[z+0]=Fh[255+Ie-Be]}function jI(B,z,le,fe){var Ie=B[z+0],Ee=B[z+le];return hp[255+B[z-2*le]-B[z-le]]>fe||hp[255+Ee-Ie]>fe}function VI(B,z,le,fe){return 4*hp[255+B[z-le]-B[z+0]]+hp[255+B[z-2*le]-B[z+le]]<=fe}function $I(B,z,le,fe,Ie){var Ee=B[z-3*le],Be=B[z-2*le],He=B[z-le],qe=B[z+0],Ze=B[z+le],St=B[z+2*le],Bt=B[z+3*le];return 4*hp[255+He-qe]+hp[255+Be-Ze]>fe?0:hp[255+B[z-4*le]-Ee]<=Ie&&hp[255+Ee-Be]<=Ie&&hp[255+Be-He]<=Ie&&hp[255+Bt-St]<=Ie&&hp[255+St-Ze]<=Ie&&hp[255+Ze-qe]<=Ie}function vC(B,z,le,fe){var Ie=2*fe+1;for(fe=0;16>fe;++fe)VI(B,z+fe,le,Ie)&&Ab(B,z+fe,le)}function Jo(B,z,le,fe){var Ie=2*fe+1;for(fe=0;16>fe;++fe)VI(B,z+fe*le,1,Ie)&&Ab(B,z+fe*le,1)}function Oh(B,z,le,fe){var Ie;for(Ie=3;0<Ie;--Ie)vC(B,z+=4*le,le,fe)}function uy(B,z,le,fe){var Ie;for(Ie=3;0<Ie;--Ie)Jo(B,z+=4,le,fe)}function S0(B,z,le,fe,Ie,Ee,Be,He){for(Ee=2*Ee+1;0<Ie--;){if($I(B,z,le,Ee,Be))if(jI(B,z,le,He))Ab(B,z,le);else{var qe=B,Ze=z,St=le,Bt=qe[Ze-2*St],jt=qe[Ze-St],kt=qe[Ze+0],ai=qe[Ze+St],Jt=qe[Ze+2*St],It=27*(hi=vD[1020+3*(kt-jt)+vD[1020+Bt-ai]])+63>>7,Mt=18*hi+63>>7,hi=9*hi+63>>7;qe[Ze-3*St]=Fh[255+qe[Ze-3*St]+hi],qe[Ze-2*St]=Fh[255+Bt+Mt],qe[Ze-St]=Fh[255+jt+It],qe[Ze+0]=Fh[255+kt-It],qe[Ze+St]=Fh[255+ai-Mt],qe[Ze+2*St]=Fh[255+Jt-hi]}z+=fe}}function lp(B,z,le,fe,Ie,Ee,Be,He){for(Ee=2*Ee+1;0<Ie--;){if($I(B,z,le,Ee,Be))if(jI(B,z,le,He))Ab(B,z,le);else{var qe=B,Ze=z,St=le,Bt=qe[Ze-St],jt=qe[Ze+0],kt=qe[Ze+St],ai=yy[112+((Jt=3*(jt-Bt))+4>>3)],Jt=yy[112+(Jt+3>>3)],It=ai+1>>1;qe[Ze-2*St]=Fh[255+qe[Ze-2*St]+It],qe[Ze-St]=Fh[255+Bt+Jt],qe[Ze+0]=Fh[255+jt-ai],qe[Ze+St]=Fh[255+kt-It]}z+=fe}}function bC(B,z,le,fe,Ie,Ee){S0(B,z,le,1,16,fe,Ie,Ee)}function hy(B,z,le,fe,Ie,Ee){S0(B,z,1,le,16,fe,Ie,Ee)}function Eb(B,z,le,fe,Ie,Ee){var Be;for(Be=3;0<Be;--Be)lp(B,z+=4*le,le,1,16,fe,Ie,Ee)}function Ph(B,z,le,fe,Ie,Ee){var Be;for(Be=3;0<Be;--Be)lp(B,z+=4,1,le,16,fe,Ie,Ee)}function wC(B,z,le,fe,Ie,Ee,Be,He){S0(B,z,Ie,1,8,Ee,Be,He),S0(le,fe,Ie,1,8,Ee,Be,He)}function CC(B,z,le,fe,Ie,Ee,Be,He){S0(B,z,1,Ie,8,Ee,Be,He),S0(le,fe,1,Ie,8,Ee,Be,He)}function Rh(B,z,le,fe,Ie,Ee,Be,He){lp(B,z+4*Ie,Ie,1,8,Ee,Be,He),lp(le,fe+4*Ie,Ie,1,8,Ee,Be,He)}function UI(B,z,le,fe,Ie,Ee,Be,He){lp(B,z+4,1,Ie,8,Ee,Be,He),lp(le,fe+4,1,Ie,8,Ee,Be,He)}function I0(){this.ba=new gr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Mi,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function xC(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function SC(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function zI(){this.ua=0,this.Wa=new ye,this.vb=new ye,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Te,this.yc=new te}function Mb(){this.xb=this.a=0,this.l=new em,this.ca=new gr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new be,this.Pb=0,this.wd=new be,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new zI,this.ab=0,this.gc=l(4,SC),this.Oc=0}function T0(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new em,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function py(B,z,le,fe,Ie,Ee,Be){for(B=B==null?0:B[z+0],z=0;z<Be;++z)Ie[Ee+z]=B+le[fe+z]&255,B=Ie[Ee+z]}function IC(B,z,le,fe,Ie,Ee,Be){var He;if(B==null)py(null,null,le,fe,Ie,Ee,Be);else for(He=0;He<Be;++He)Ie[Ee+He]=B[z+He]+le[fe+He]&255}function A0(B,z,le,fe,Ie,Ee,Be){if(B==null)py(null,null,le,fe,Ie,Ee,Be);else{var He,qe=B[z+0],Ze=qe,St=qe;for(He=0;He<Be;++He)Ze=St+(qe=B[z+He])-Ze,St=le[fe+He]+(-256&Ze?0>Ze?0:255:Ze)&255,Ze=qe,Ie[Ee+He]=St}}function Db(B,z,le,fe){var Ie=z.width,Ee=z.o;if(i(B!=null&&z!=null),0>le||0>=fe||le+fe>Ee)return null;if(!B.Cc){if(B.ga==null){var Be;if(B.ga=new T0,(Be=B.ga==null)||(Be=z.width*z.o,i(B.Gb.length==0),B.Gb=s(Be),B.Uc=0,B.Gb==null?Be=0:(B.mb=B.Gb,B.nb=B.Uc,B.rc=null,Be=1),Be=!Be),!Be){Be=B.ga;var He=B.Fa,qe=B.P,Ze=B.qc,St=B.mb,Bt=B.nb,jt=qe+1,kt=Ze-1,ai=Be.l;if(i(He!=null&&St!=null&&z!=null),B0[0]=null,B0[1]=py,B0[2]=IC,B0[3]=A0,Be.ca=St,Be.tb=Bt,Be.c=z.width,Be.i=z.height,i(0<Be.c&&0<Be.i),1>=Ze)z=0;else if(Be.$a=He[qe+0]>>0&3,Be.Z=He[qe+0]>>2&3,Be.Lc=He[qe+0]>>4&3,qe=He[qe+0]>>6&3,0>Be.$a||1<Be.$a||4<=Be.Z||1<Be.Lc||qe)z=0;else if(ai.put=Rn,ai.ac=uo,ai.bc=Ra,ai.ma=Be,ai.width=z.width,ai.height=z.height,ai.Da=z.Da,ai.v=z.v,ai.va=z.va,ai.j=z.j,ai.o=z.o,Be.$a)e:{i(Be.$a==1),z=Xa();t:for(;;){if(z==null){z=0;break e}if(i(Be!=null),Be.mc=z,z.c=Be.c,z.i=Be.i,z.l=Be.l,z.l.ma=Be,z.l.width=Be.c,z.l.height=Be.i,z.a=0,ze(z.m,He,jt,kt),!id(Be.c,Be.i,1,z,null)||(z.ab==1&&z.gc[0].hc==3&&Cl(z.s)?(Be.ic=1,He=z.c*z.i,z.Ta=null,z.Ua=0,z.V=s(He),z.Ba=0,z.V==null?(z.a=1,z=0):z=1):(Be.ic=0,z=Dh(z,Be.c)),!z))break t;z=1;break e}Be.mc=null,z=0}else z=kt>=Be.c*Be.i;Be=!z}if(Be)return null;B.ga.Lc!=1?B.Ga=0:fe=Ee-le}i(B.ga!=null),i(le+fe<=Ee);e:{if(z=(He=B.ga).c,Ee=He.l.o,He.$a==0){if(jt=B.rc,kt=B.Vc,ai=B.Fa,qe=B.P+1+le*z,Ze=B.mb,St=B.nb+le*z,i(qe<=B.P+B.qc),He.Z!=0)for(i(B0[He.Z]!=null),Be=0;Be<fe;++Be)B0[He.Z](jt,kt,ai,qe,Ze,St,z),jt=Ze,kt=St,St+=z,qe+=z;else for(Be=0;Be<fe;++Be)n(Ze,St,ai,qe,z),jt=Ze,kt=St,St+=z,qe+=z;B.rc=jt,B.Vc=kt}else{if(i(He.mc!=null),z=le+fe,i((Be=He.mc)!=null),i(z<=Be.i),Be.C>=z)z=1;else if(He.ic||Ft(),He.ic){He=Be.V,jt=Be.Ba,kt=Be.c;var Jt=Be.i,It=(ai=1,qe=Be.$/kt,Ze=Be.$%kt,St=Be.m,Bt=Be.s,Be.$),Mt=kt*Jt,hi=kt*z,Ci=Bt.wc,_i=It<hi?ho(Bt,Ze,qe):null;i(It<=Mt),i(z<=Jt),i(Cl(Bt));t:for(;;){for(;!St.h&&It<hi;){if(Ze&Ci||(_i=ho(Bt,Ze,qe)),i(_i!=null),Qe(St),256>(Jt=Ur(_i.G[0],_i.H[0],St)))He[jt+It]=Jt,++It,++Ze>=kt&&(Ze=0,++qe<=z&&!(qe%16)&&tc(Be,qe));else{if(!(280>Jt)){ai=0;break t}Jt=Vs(Jt-256,St);var cn,Ki=Ur(_i.G[4],_i.H[4],St);if(Qe(St),!(It>=(Ki=wl(kt,Ki=Vs(Ki,St)))&&Mt-It>=Jt)){ai=0;break t}for(cn=0;cn<Jt;++cn)He[jt+It+cn]=He[jt+It+cn-Ki];for(It+=Jt,Ze+=Jt;Ze>=kt;)Ze-=kt,++qe<=z&&!(qe%16)&&tc(Be,qe);It<hi&&Ze&Ci&&(_i=ho(Bt,Ze,qe))}i(St.h==ke(St))}tc(Be,qe>z?z:qe);break t}!ai||St.h&&It<Mt?(ai=0,Be.a=St.h?5:3):Be.$=It,z=ai}else z=Nu(Be,Be.V,Be.Ba,Be.c,Be.i,z,Rd);if(!z){fe=0;break e}}le+fe>=Ee&&(B.Cc=1),fe=1}if(!fe)return null;if(B.Cc&&((fe=B.ga)!=null&&(fe.mc=null),B.ga=null,0<B.Ga))return alert("todo:WebPDequantizeLevels"),null}return B.nb+le*Ie}function re(B,z,le,fe,Ie,Ee){for(;0<Ie--;){var Be,He=B,qe=z+(le?1:0),Ze=B,St=z+(le?0:3);for(Be=0;Be<fe;++Be){var Bt=Ze[St+4*Be];Bt!=255&&(Bt*=32897,He[qe+4*Be+0]=He[qe+4*Be+0]*Bt>>23,He[qe+4*Be+1]=He[qe+4*Be+1]*Bt>>23,He[qe+4*Be+2]=He[qe+4*Be+2]*Bt>>23)}z+=Ee}}function Ae(B,z,le,fe,Ie){for(;0<fe--;){var Ee;for(Ee=0;Ee<le;++Ee){var Be=B[z+2*Ee+0],He=15&(Ze=B[z+2*Ee+1]),qe=4369*He,Ze=(240&Ze|Ze>>4)*qe>>16;B[z+2*Ee+0]=(240&Be|Be>>4)*qe>>16&240|(15&Be|Be<<4)*qe>>16>>4&15,B[z+2*Ee+1]=240&Ze|He}z+=Ie}}function tt(B,z,le,fe,Ie,Ee,Be,He){var qe,Ze,St=255;for(Ze=0;Ze<Ie;++Ze){for(qe=0;qe<fe;++qe){var Bt=B[z+qe];Ee[Be+4*qe]=Bt,St&=Bt}z+=le,Be+=He}return St!=255}function xt(B,z,le,fe,Ie){var Ee;for(Ee=0;Ee<Ie;++Ee)le[fe+Ee]=B[z+Ee]>>8}function Ft(){up=re,Xs=Ae,Js=tt,Nl=xt}function ii(B,z,le){pe[B]=function(fe,Ie,Ee,Be,He,qe,Ze,St,Bt,jt,kt,ai,Jt,It,Mt,hi,Ci){var _i,cn=Ci-1>>1,Ki=He[qe+0]|Ze[St+0]<<16,lr=Bt[jt+0]|kt[ai+0]<<16;i(fe!=null);var Wi=3*Ki+lr+131074>>2;for(z(fe[Ie+0],255&Wi,Wi>>16,Jt,It),Ee!=null&&(Wi=3*lr+Ki+131074>>2,z(Ee[Be+0],255&Wi,Wi>>16,Mt,hi)),_i=1;_i<=cn;++_i){var rs=He[qe+_i]|Ze[St+_i]<<16,_s=Bt[jt+_i]|kt[ai+_i]<<16,es=Ki+rs+lr+_s+524296,Bo=es+2*(rs+lr)>>3;Wi=Bo+Ki>>1,Ki=(es=es+2*(Ki+_s)>>3)+rs>>1,z(fe[Ie+2*_i-1],255&Wi,Wi>>16,Jt,It+(2*_i-1)*le),z(fe[Ie+2*_i-0],255&Ki,Ki>>16,Jt,It+(2*_i-0)*le),Ee!=null&&(Wi=es+lr>>1,Ki=Bo+_s>>1,z(Ee[Be+2*_i-1],255&Wi,Wi>>16,Mt,hi+(2*_i-1)*le),z(Ee[Be+2*_i+0],255&Ki,Ki>>16,Mt,hi+(2*_i+0)*le)),Ki=rs,lr=_s}1&Ci||(Wi=3*Ki+lr+131074>>2,z(fe[Ie+Ci-1],255&Wi,Wi>>16,Jt,It+(Ci-1)*le),Ee!=null&&(Wi=3*lr+Ki+131074>>2,z(Ee[Be+Ci-1],255&Wi,Wi>>16,Mt,hi+(Ci-1)*le)))}}function Ai(){pp[YI]=cz,pp[KI]=tT,pp[IL]=dz,pp[ZI]=kL,pp[QI]=OL,pp[bD]=PL,pp[wD]=SD,pp[XI]=tT,pp[JI]=kL,pp[vy]=OL,pp[L0]=PL}function Ji(B){return B&~uz?0>B?0:255:B>>RL}function qn(B,z){return Ji((19077*B>>8)+(26149*z>>8)-14234)}function Rr(B,z,le){return Ji((19077*B>>8)-(6419*z>>8)-(13320*le>>8)+8708)}function Nr(B,z){return Ji((19077*B>>8)+(33050*z>>8)-17685)}function No(B,z,le,fe,Ie){fe[Ie+0]=qn(B,le),fe[Ie+1]=Rr(B,z,le),fe[Ie+2]=Nr(B,z)}function dl(B,z,le,fe,Ie){fe[Ie+0]=Nr(B,z),fe[Ie+1]=Rr(B,z,le),fe[Ie+2]=qn(B,le)}function Tl(B,z,le,fe,Ie){var Ee=Rr(B,z,le);z=Ee<<3&224|Nr(B,z)>>3,fe[Ie+0]=248&qn(B,le)|Ee>>5,fe[Ie+1]=z}function ic(B,z,le,fe,Ie){var Ee=240&Nr(B,z)|15;fe[Ie+0]=240&qn(B,le)|Rr(B,z,le)>>4,fe[Ie+1]=Ee}function Bd(B,z,le,fe,Ie){fe[Ie+0]=255,No(B,z,le,fe,Ie+1)}function Sc(B,z,le,fe,Ie){dl(B,z,le,fe,Ie),fe[Ie+3]=255}function tm(B,z,le,fe,Ie){No(B,z,le,fe,Ie),fe[Ie+3]=255}function Uu(B,z){return 0>B?0:B>z?z:B}function Ko(B,z,le){pe[B]=function(fe,Ie,Ee,Be,He,qe,Ze,St,Bt){for(var jt=St+(-2&Bt)*le;St!=jt;)z(fe[Ie+0],Ee[Be+0],He[qe+0],Ze,St),z(fe[Ie+1],Ee[Be+0],He[qe+0],Ze,St+le),Ie+=2,++Be,++qe,St+=2*le;1&Bt&&z(fe[Ie+0],Ee[Be+0],He[qe+0],Ze,St)}}function GI(B,z,le){return le==0?B==0?z==0?6:5:z==0?4:0:le}function TC(B,z,le,fe,Ie){switch(B>>>30){case 3:ng(z,le,fe,Ie,0);break;case 2:Al(z,le,fe,Ie);break;case 1:tu(z,le,fe,Ie)}}function kb(B,z){var le,fe,Ie=z.M,Ee=z.Nb,Be=B.oc,He=B.pc+40,qe=B.oc,Ze=B.pc+584,St=B.oc,Bt=B.pc+600;for(le=0;16>le;++le)Be[He+32*le-1]=129;for(le=0;8>le;++le)qe[Ze+32*le-1]=129,St[Bt+32*le-1]=129;for(0<Ie?Be[He-1-32]=qe[Ze-1-32]=St[Bt-1-32]=129:(o(Be,He-32-1,127,21),o(qe,Ze-32-1,127,9),o(St,Bt-32-1,127,9)),fe=0;fe<B.za;++fe){var jt=z.ya[z.aa+fe];if(0<fe){for(le=-1;16>le;++le)n(Be,He+32*le-4,Be,He+32*le+12,4);for(le=-1;8>le;++le)n(qe,Ze+32*le-4,qe,Ze+32*le+4,4),n(St,Bt+32*le-4,St,Bt+32*le+4,4)}var kt=B.Gd,ai=B.Hd+fe,Jt=jt.ad,It=jt.Hc;if(0<Ie&&(n(Be,He-32,kt[ai].y,0,16),n(qe,Ze-32,kt[ai].f,0,8),n(St,Bt-32,kt[ai].ea,0,8)),jt.Za){var Mt=Be,hi=He-32+16;for(0<Ie&&(fe>=B.za-1?o(Mt,hi,kt[ai].y[15],4):n(Mt,hi,kt[ai+1].y,0,4)),le=0;4>le;le++)Mt[hi+128+le]=Mt[hi+256+le]=Mt[hi+384+le]=Mt[hi+0+le];for(le=0;16>le;++le,It<<=2)Mt=Be,hi=He+BL[le],im[jt.Ob[le]](Mt,hi),TC(It,Jt,16*+le,Mt,hi)}else if(Mt=GI(fe,Ie,jt.Ob[0]),N0[Mt](Be,He),It!=0)for(le=0;16>le;++le,It<<=2)TC(It,Jt,16*+le,Be,He+BL[le]);for(le=jt.Gc,Mt=GI(fe,Ie,jt.Dd),og[Mt](qe,Ze),og[Mt](St,Bt),It=Jt,Mt=qe,hi=Ze,255&(jt=le>>0)&&(170&jt?MC(It,256,Mt,hi):El(It,256,Mt,hi)),jt=St,It=Bt,255&(le>>=8)&&(170&le?MC(Jt,320,jt,It):El(Jt,320,jt,It)),Ie<B.Ub-1&&(n(kt[ai].y,0,Be,He+480,16),n(kt[ai].f,0,qe,Ze+224,8),n(kt[ai].ea,0,St,Bt+224,8)),le=8*Ee*B.B,kt=B.sa,ai=B.ta+16*fe+16*Ee*B.R,Jt=B.qa,jt=B.ra+8*fe+le,It=B.Ha,Mt=B.Ia+8*fe+le,le=0;16>le;++le)n(kt,ai+le*B.R,Be,He+32*le,16);for(le=0;8>le;++le)n(Jt,jt+le*B.B,qe,Ze+32*le,8),n(It,Mt+le*B.B,St,Bt+32*le,8)}}function Ob(B,z,le,fe,Ie,Ee,Be,He,qe){var Ze=[0],St=[0],Bt=0,jt=qe!=null?qe.kd:0,kt=qe??new xC;if(B==null||12>le)return 7;kt.data=B,kt.w=z,kt.ha=le,z=[z],le=[le],kt.gb=[kt.gb];e:{var ai=z,Jt=le,It=kt.gb;if(i(B!=null),i(Jt!=null),i(It!=null),It[0]=0,12<=Jt[0]&&!e(B,ai[0],"RIFF")){if(e(B,ai[0]+8,"WEBP")){It=3;break e}var Mt=Ct(B,ai[0]+4);if(12>Mt||4294967286<Mt){It=3;break e}if(jt&&Mt>Jt[0]-8){It=7;break e}It[0]=Mt,ai[0]+=12,Jt[0]-=12}It=0}if(It!=0)return It;for(Mt=0<kt.gb[0],le=le[0];;){e:{var hi=B;Jt=z,It=le;var Ci=Ze,_i=St,cn=ai=[0];if((Wi=Bt=[Bt])[0]=0,8>It[0])It=7;else{if(!e(hi,Jt[0],"VP8X")){if(Ct(hi,Jt[0]+4)!=10){It=3;break e}if(18>It[0]){It=7;break e}var Ki=Ct(hi,Jt[0]+8),lr=1+me(hi,Jt[0]+12);if(2147483648<=lr*(hi=1+me(hi,Jt[0]+15))){It=3;break e}cn!=null&&(cn[0]=Ki),Ci!=null&&(Ci[0]=lr),_i!=null&&(_i[0]=hi),Jt[0]+=18,It[0]-=18,Wi[0]=1}It=0}}if(Bt=Bt[0],ai=ai[0],It!=0)return It;if(Jt=!!(2&ai),!Mt&&Bt)return 3;if(Ee!=null&&(Ee[0]=!!(16&ai)),Be!=null&&(Be[0]=Jt),He!=null&&(He[0]=0),Be=Ze[0],ai=St[0],Bt&&Jt&&qe==null){It=0;break}if(4>le){It=7;break}if(Mt&&Bt||!Mt&&!Bt&&!e(B,z[0],"ALPH")){le=[le],kt.na=[kt.na],kt.P=[kt.P],kt.Sa=[kt.Sa];e:{Ki=B,It=z,Mt=le;var Wi=kt.gb;Ci=kt.na,_i=kt.P,cn=kt.Sa,lr=22,i(Ki!=null),i(Mt!=null),hi=It[0];var rs=Mt[0];for(i(Ci!=null),i(cn!=null),Ci[0]=null,_i[0]=null,cn[0]=0;;){if(It[0]=hi,Mt[0]=rs,8>rs){It=7;break e}var _s=Ct(Ki,hi+4);if(4294967286<_s){It=3;break e}var es=8+_s+1&-2;if(lr+=es,0<Wi&&lr>Wi){It=3;break e}if(!e(Ki,hi,"VP8 ")||!e(Ki,hi,"VP8L")){It=0;break e}if(rs[0]<es){It=7;break e}e(Ki,hi,"ALPH")||(Ci[0]=Ki,_i[0]=hi+8,cn[0]=_s),hi+=es,rs-=es}}if(le=le[0],kt.na=kt.na[0],kt.P=kt.P[0],kt.Sa=kt.Sa[0],It!=0)break}le=[le],kt.Ja=[kt.Ja],kt.xa=[kt.xa];e:if(Wi=B,It=z,Mt=le,Ci=kt.gb[0],_i=kt.Ja,cn=kt.xa,Ki=It[0],hi=!e(Wi,Ki,"VP8 "),lr=!e(Wi,Ki,"VP8L"),i(Wi!=null),i(Mt!=null),i(_i!=null),i(cn!=null),8>Mt[0])It=7;else{if(hi||lr){if(Wi=Ct(Wi,Ki+4),12<=Ci&&Wi>Ci-12){It=3;break e}if(jt&&Wi>Mt[0]-8){It=7;break e}_i[0]=Wi,It[0]+=8,Mt[0]-=8,cn[0]=lr}else cn[0]=5<=Mt[0]&&Wi[Ki+0]==47&&!(Wi[Ki+4]>>5),_i[0]=Mt[0];It=0}if(le=le[0],kt.Ja=kt.Ja[0],kt.xa=kt.xa[0],z=z[0],It!=0)break;if(4294967286<kt.Ja)return 3;if(He==null||Jt||(He[0]=kt.xa?2:1),Be=[Be],ai=[ai],kt.xa){if(5>le){It=7;break}He=Be,jt=ai,Jt=Ee,B==null||5>le?B=0:5<=le&&B[z+0]==47&&!(B[z+4]>>5)?(Mt=[0],Wi=[0],Ci=[0],ze(_i=new be,B,z,le),Pi(_i,Mt,Wi,Ci)?(He!=null&&(He[0]=Mt[0]),jt!=null&&(jt[0]=Wi[0]),Jt!=null&&(Jt[0]=Ci[0]),B=1):B=0):B=0}else{if(10>le){It=7;break}He=ai,B==null||10>le||!Kf(B,z+3,le-3)?B=0:(jt=B[z+0]|B[z+1]<<8|B[z+2]<<16,Jt=16383&(B[z+7]<<8|B[z+6]),B=16383&(B[z+9]<<8|B[z+8]),1&jt||3<(jt>>1&7)||!(jt>>4&1)||jt>>5>=kt.Ja||!Jt||!B?B=0:(Be&&(Be[0]=Jt),He&&(He[0]=B),B=1))}if(!B||(Be=Be[0],ai=ai[0],Bt&&(Ze[0]!=Be||St[0]!=ai)))return 3;qe!=null&&(qe[0]=kt,qe.offset=z-qe.w,i(4294967286>z-qe.w),i(qe.offset==qe.ha-le));break}return It==0||It==7&&Bt&&qe==null?(Ee!=null&&(Ee[0]|=kt.na!=null&&0<kt.na.length),fe!=null&&(fe[0]=Be),Ie!=null&&(Ie[0]=ai),0):It}function AC(B,z,le){var fe=z.width,Ie=z.height,Ee=0,Be=0,He=fe,qe=Ie;if(z.Da=B!=null&&0<B.Da,z.Da&&(He=B.cd,qe=B.bd,Ee=B.v,Be=B.j,11>le||(Ee&=-2,Be&=-2),0>Ee||0>Be||0>=He||0>=qe||Ee+He>fe||Be+qe>Ie))return 0;if(z.v=Ee,z.j=Be,z.va=Ee+He,z.o=Be+qe,z.U=He,z.T=qe,z.da=B!=null&&0<B.da,z.da){if(!lt(He,qe,le=[B.ib],Ee=[B.hb]))return 0;z.ib=le[0],z.hb=Ee[0]}return z.ob=B!=null&&B.ob,z.Kb=B==null||!B.Sd,z.da&&(z.ob=z.ib<3*fe/4&&z.hb<3*Ie/4,z.Kb=0),1}function EC(B){if(B==null)return 2;if(11>B.S){var z=B.f.RGBA;z.fb+=(B.height-1)*z.A,z.A=-z.A}else z=B.f.kb,B=B.height,z.O+=(B-1)*z.fa,z.fa=-z.fa,z.N+=(B-1>>1)*z.Ab,z.Ab=-z.Ab,z.W+=(B-1>>1)*z.Db,z.Db=-z.Db,z.F!=null&&(z.J+=(B-1)*z.lb,z.lb=-z.lb);return 0}function qm(B,z,le,fe){if(fe==null||0>=B||0>=z)return 2;if(le!=null){if(le.Da){var Ie=le.cd,Ee=le.bd,Be=-2&le.v,He=-2&le.j;if(0>Be||0>He||0>=Ie||0>=Ee||Be+Ie>B||He+Ee>z)return 2;B=Ie,z=Ee}if(le.da){if(!lt(B,z,Ie=[le.ib],Ee=[le.hb]))return 2;B=Ie[0],z=Ee[0]}}fe.width=B,fe.height=z;e:{var qe=fe.width,Ze=fe.height;if(B=fe.S,0>=qe||0>=Ze||!(B>=YI&&13>B))B=2;else{if(0>=fe.Rd&&fe.sd==null){Be=Ee=Ie=z=0;var St=(He=qe*VL[B])*Ze;if(11>B||(Ee=(Ze+1)/2*(z=(qe+1)/2),B==12&&(Be=(Ie=qe)*Ze)),(Ze=s(St+2*Ee+Be))==null){B=1;break e}fe.sd=Ze,11>B?((qe=fe.f.RGBA).eb=Ze,qe.fb=0,qe.A=He,qe.size=St):((qe=fe.f.kb).y=Ze,qe.O=0,qe.fa=He,qe.Fd=St,qe.f=Ze,qe.N=0+St,qe.Ab=z,qe.Cd=Ee,qe.ea=Ze,qe.W=0+St+Ee,qe.Db=z,qe.Ed=Ee,B==12&&(qe.F=Ze,qe.J=0+St+2*Ee),qe.Tc=Be,qe.lb=Ie)}if(z=1,Ie=fe.S,Ee=fe.width,Be=fe.height,Ie>=YI&&13>Ie)if(11>Ie)B=fe.f.RGBA,z&=(He=Math.abs(B.A))*(Be-1)+Ee<=B.size,z&=He>=Ee*VL[Ie],z&=B.eb!=null;else{B=fe.f.kb,He=(Ee+1)/2,St=(Be+1)/2,qe=Math.abs(B.fa),Ze=Math.abs(B.Ab);var Bt=Math.abs(B.Db),jt=Math.abs(B.lb),kt=jt*(Be-1)+Ee;z&=qe*(Be-1)+Ee<=B.Fd,z&=Ze*(St-1)+He<=B.Cd,z=(z&=Bt*(St-1)+He<=B.Ed)&qe>=Ee&Ze>=He&Bt>=He,z&=B.y!=null,z&=B.f!=null,z&=B.ea!=null,Ie==12&&(z&=jt>=Ee,z&=kt<=B.Tc,z&=B.F!=null)}else z=0;B=z?0:2}}return B!=0||le!=null&&le.fd&&(B=EC(fe)),B}var od=64,Pb=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Rb=24,eg=32,E0=8,jd=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ot("Predictor0","PredictorAdd0"),pe.Predictor0=function(){return 4278190080},pe.Predictor1=function(B){return B},pe.Predictor2=function(B,z,le){return z[le+0]},pe.Predictor3=function(B,z,le){return z[le+1]},pe.Predictor4=function(B,z,le){return z[le-1]},pe.Predictor5=function(B,z,le){return Lt(Lt(B,z[le+1]),z[le+0])},pe.Predictor6=function(B,z,le){return Lt(B,z[le-1])},pe.Predictor7=function(B,z,le){return Lt(B,z[le+0])},pe.Predictor8=function(B,z,le){return Lt(z[le-1],z[le+0])},pe.Predictor9=function(B,z,le){return Lt(z[le+0],z[le+1])},pe.Predictor10=function(B,z,le){return Lt(Lt(B,z[le-1]),Lt(z[le+0],z[le+1]))},pe.Predictor11=function(B,z,le){var fe=z[le+0];return 0>=wi(fe>>24&255,B>>24&255,(z=z[le-1])>>24&255)+wi(fe>>16&255,B>>16&255,z>>16&255)+wi(fe>>8&255,B>>8&255,z>>8&255)+wi(255&fe,255&B,255&z)?fe:B},pe.Predictor12=function(B,z,le){var fe=z[le+0];return(Nt((B>>24&255)+(fe>>24&255)-((z=z[le-1])>>24&255))<<24|Nt((B>>16&255)+(fe>>16&255)-(z>>16&255))<<16|Nt((B>>8&255)+(fe>>8&255)-(z>>8&255))<<8|Nt((255&B)+(255&fe)-(255&z)))>>>0},pe.Predictor13=function(B,z,le){var fe=z[le-1];return(ni((B=Lt(B,z[le+0]))>>24&255,fe>>24&255)<<24|ni(B>>16&255,fe>>16&255)<<16|ni(B>>8&255,fe>>8&255)<<8|ni(B>>0&255,fe>>0&255))>>>0};var yD=pe.PredictorAdd0;pe.PredictorAdd1=vi,ot("Predictor2","PredictorAdd2"),ot("Predictor3","PredictorAdd3"),ot("Predictor4","PredictorAdd4"),ot("Predictor5","PredictorAdd5"),ot("Predictor6","PredictorAdd6"),ot("Predictor7","PredictorAdd7"),ot("Predictor8","PredictorAdd8"),ot("Predictor9","PredictorAdd9"),ot("Predictor10","PredictorAdd10"),ot("Predictor11","PredictorAdd11"),ot("Predictor12","PredictorAdd12"),ot("Predictor13","PredictorAdd13");var Fb=pe.PredictorAdd2;$i("ColorIndexInverseTransform","MapARGB","32b",function(B){return B>>8&255},function(B){return B}),$i("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(B){return B},function(B){return B>>8&255});var HI,zu=pe.ColorIndexInverseTransform,M0=pe.MapARGB,Lb=pe.VP8LColorIndexInverseTransformAlpha,WI=pe.MapAlpha,D0=pe.VP8LPredictorsAdd=[];D0.length=16,(pe.VP8LPredictors=[]).length=16,(pe.VP8LPredictorsAdd_C=[]).length=16,(pe.VP8LPredictors_C=[]).length=16;var my,Gu,eu,k0,tg,ig,Nb,ng,Al,MC,tu,El,cp,DC,kC,O0,P0,R0,fy,gy,_y,F0,OC,dp,up,Xs,Js,Nl,Ic=s(511),rg=s(2041),PC=s(225),Bb=s(767),qI=0,vD=rg,yy=PC,Fh=Bb,hp=Ic,YI=0,KI=1,IL=2,ZI=3,QI=4,bD=5,wD=6,XI=7,JI=8,vy=9,L0=10,eT=[2,3,7],TL=[3,3,11],by=[280,256,256,256,40],AL=[0,1,1,1,0],EL=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],JU=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ez=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],tz=8,CD=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],xD=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],RC=null,iz=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],nz=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ML=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],rz=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],oz=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],sz=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],az=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],N0=[],im=[],og=[],lz=1,DL=2,B0=[],pp=[];ii("UpsampleRgbLinePair",No,3),ii("UpsampleBgrLinePair",dl,3),ii("UpsampleRgbaLinePair",tm,4),ii("UpsampleBgraLinePair",Sc,4),ii("UpsampleArgbLinePair",Bd,4),ii("UpsampleRgba4444LinePair",ic,2),ii("UpsampleRgb565LinePair",Tl,2);var cz=pe.UpsampleRgbLinePair,dz=pe.UpsampleBgrLinePair,tT=pe.UpsampleRgbaLinePair,kL=pe.UpsampleBgraLinePair,OL=pe.UpsampleArgbLinePair,PL=pe.UpsampleRgba4444LinePair,SD=pe.UpsampleRgb565LinePair,wy=16,iT=1<<wy-1,FC=-227,ID=482,RL=6,uz=(256<<RL)-1,FL=0,LL=s(256),hz=s(256),pz=s(256),NL=s(256),mz=s(ID-FC),fz=s(ID-FC);Ko("YuvToRgbRow",No,3),Ko("YuvToBgrRow",dl,3),Ko("YuvToRgbaRow",tm,4),Ko("YuvToBgraRow",Sc,4),Ko("YuvToArgbRow",Bd,4),Ko("YuvToRgba4444Row",ic,2),Ko("YuvToRgb565Row",Tl,2);var BL=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],nm=[0,2,8],jL=[8,7,6,4,4,2,2,2,1,1,1,1],gz=1;this.WebPDecodeRGBA=function(B,z,le,fe,Ie){var Ee=KI,Be=new I0,He=new gr;Be.ba=He,He.S=Ee,He.width=[He.width],He.height=[He.height];var qe=He.width,Ze=He.height,St=new cs;if(St==null||B==null)var Bt=2;else i(St!=null),Bt=Ob(B,z,le,St.width,St.height,St.Pd,St.Qd,St.format,null);if(Bt!=0?qe=0:(qe!=null&&(qe[0]=St.width[0]),Ze!=null&&(Ze[0]=St.height[0]),qe=1),qe){He.width=He.width[0],He.height=He.height[0],fe!=null&&(fe[0]=He.width),Ie!=null&&(Ie[0]=He.height);e:{if(fe=new em,(Ie=new xC).data=B,Ie.w=z,Ie.ha=le,Ie.kd=1,z=[0],i(Ie!=null),((B=Ob(Ie.data,Ie.w,Ie.ha,null,null,null,z,null,Ie))==0||B==7)&&z[0]&&(B=4),(z=B)==0){if(i(Be!=null),fe.data=Ie.data,fe.w=Ie.w+Ie.offset,fe.ha=Ie.ha-Ie.offset,fe.put=Rn,fe.ac=uo,fe.bc=Ra,fe.ma=Be,Ie.xa){if((B=Xa())==null){Be=1;break e}if(function(jt,kt){var ai=[0],Jt=[0],It=[0];t:for(;;){if(jt==null)return 0;if(kt==null)return jt.a=2,0;if(jt.l=kt,jt.a=0,ze(jt.m,kt.data,kt.w,kt.ha),!Pi(jt.m,ai,Jt,It)){jt.a=3;break t}if(jt.xb=DL,kt.width=ai[0],kt.height=Jt[0],!id(ai[0],Jt[0],1,jt,null))break t;return 1}return i(jt.a!=0),0}(B,fe)){if(fe=(z=qm(fe.width,fe.height,Be.Oa,Be.ba))==0){t:{fe=B;i:for(;;){if(fe==null){fe=0;break t}if(i(fe.s.yc!=null),i(fe.s.Ya!=null),i(0<fe.s.Wb),i((le=fe.l)!=null),i((Ie=le.ma)!=null),fe.xb!=0){if(fe.ca=Ie.ba,fe.tb=Ie.tb,i(fe.ca!=null),!AC(Ie.Oa,le,ZI)){fe.a=2;break i}if(!Dh(fe,le.width)||le.da)break i;if((le.da||kn(fe.ca.S))&&Ft(),11>fe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),fe.ca.f.kb.F!=null&&Ft()),fe.Pb&&0<fe.s.ua&&fe.s.vb.X==null&&!pt(fe.s.vb,fe.s.Wa.Xa)){fe.a=1;break i}fe.xb=0}if(!Nu(fe,fe.V,fe.Ba,fe.c,fe.i,le.o,Ks))break i;Ie.Dc=fe.Ma,fe=1;break t}i(fe.a!=0),fe=0}fe=!fe}fe&&(z=B.a)}else z=B.a}else{if((B=new Jd)==null){Be=1;break e}if(B.Fa=Ie.na,B.P=Ie.P,B.qc=Ie.Sa,Zf(B,fe)){if((z=qm(fe.width,fe.height,Be.Oa,Be.ba))==0){if(B.Aa=0,le=Be.Oa,i((Ie=B)!=null),le!=null){if(0<(qe=0>(qe=le.Md)?0:100<qe?255:255*qe/100)){for(Ze=St=0;4>Ze;++Ze)12>(Bt=Ie.pb[Ze]).lc&&(Bt.ia=qe*jL[0>Bt.lc?0:Bt.lc]>>3),St|=Bt.ia;St&&(alert("todo:VP8InitRandom"),Ie.ia=1)}Ie.Ga=le.Id,100<Ie.Ga?Ie.Ga=100:0>Ie.Ga&&(Ie.Ga=0)}b0(B,fe)||(z=B.a)}}else z=B.a}z==0&&Be.Oa!=null&&Be.Oa.fd&&(z=EC(Be.ba))}Be=z}Ee=Be!=0?null:11>Ee?He.f.RGBA.eb:He.f.kb.y}else Ee=null;return Ee};var VL=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function m(pe,Ce){for(var _e="",de=0;de<4;de++)_e+=String.fromCharCode(pe[Ce++]);return _e}function f(pe,Ce){return(pe[Ce+0]<<0|pe[Ce+1]<<8|pe[Ce+2]<<16)>>>0}function g(pe,Ce){return(pe[Ce+0]<<0|pe[Ce+1]<<8|pe[Ce+2]<<16|pe[Ce+3]<<24)>>>0}new p;var y=[0],_=[0],w=[],A=new p,k=r,R=function(pe,Ce){var _e={},de=0,te=!1,Se=0,Te=0;if(_e.frames=[],!function(we,ke,et,Qe){for(var at=0;at<Qe;at++)if(we[ke+at]!=et.charCodeAt(at))return!0;return!1}(pe,Ce,"RIFF",4)){for(g(pe,Ce+=4),Ce+=8;Ce<pe.length;){var De=m(pe,Ce),Le=g(pe,Ce+=4);Ce+=4;var Me=Le+(1&Le);switch(De){case"VP8 ":case"VP8L":_e.frames[de]===void 0&&(_e.frames[de]={}),($e=_e.frames[de]).src_off=te?Te:Ce-8,$e.src_size=Se+Le+8,de++,te&&(te=!1,Se=0,Te=0);break;case"VP8X":($e=_e.header={}).feature_flags=pe[Ce];var ze=Ce+4;$e.canvas_width=1+f(pe,ze),ze+=3,$e.canvas_height=1+f(pe,ze),ze+=3;break;case"ALPH":te=!0,Se=Me+8,Te=Ce-8;break;case"ANIM":($e=_e.header).bgcolor=g(pe,Ce),ze=Ce+4,$e.loop_count=(nt=pe)[(be=ze)+0]<<0|nt[be+1]<<8,ze+=2;break;case"ANMF":var Ve,$e;($e=_e.frames[de]={}).offset_x=2*f(pe,Ce),Ce+=3,$e.offset_y=2*f(pe,Ce),Ce+=3,$e.width=1+f(pe,Ce),Ce+=3,$e.height=1+f(pe,Ce),Ce+=3,$e.duration=f(pe,Ce),Ce+=3,Ve=pe[Ce++],$e.dispose=1&Ve,$e.blend=Ve>>1&1}De!="ANMF"&&(Ce+=Me)}var nt,be;return _e}}(k,0);R.response=k,R.rgbaoutput=!0,R.dataurl=!1;var $=R.header?R.header:null,H=R.frames?R.frames:null;if($){$.loop_counter=$.loop_count,y=[$.canvas_height],_=[$.canvas_width];for(var oe=0;oe<H.length&&H[oe].blend!=0;oe++);}var se=H[0],ge=A.WebPDecodeRGBA(k,se.src_off,se.src_size,_,y);se.rgba=ge,se.imgwidth=_[0],se.imgheight=y[0];for(var ue=0;ue<_[0]*y[0]*4;ue++)w[ue]=ge[ue];return this.width=_,this.height=y,this.data=w,this}(function(r){var i=function(){return typeof zj=="function"},e=function(y,_,w,A){var k=4,R=l;switch(A){case r.image_compression.FAST:k=1,R=s;break;case r.image_compression.MEDIUM:k=6,R=h;break;case r.image_compression.SLOW:k=9,R=p}y=n(y,_,w,R);var $=zj(y,{level:k});return r.__addimage__.arrayBufferToBinaryString($)},n=function(y,_,w,A){for(var k,R,$,H=y.length/_,oe=new Uint8Array(y.length+H),se=f(),ge=0;ge<H;ge+=1){if($=ge*_,k=y.subarray($,$+_),A)oe.set(A(k,w,R),$+ge);else{for(var ue,pe=se.length,Ce=[];ue<pe;ue+=1)Ce[ue]=se[ue](k,w,R);var _e=g(Ce.concat());oe.set(Ce[_e],$+ge)}R=k}return oe},o=function(y){var _=Array.apply([],y);return _.unshift(0),_},s=function(y,_){var w,A=[],k=y.length;A[0]=1;for(var R=0;R<k;R+=1)w=y[R-_]||0,A[R+1]=y[R]-w+256&255;return A},l=function(y,_,w){var A,k=[],R=y.length;k[0]=2;for(var $=0;$<R;$+=1)A=w&&w[$]||0,k[$+1]=y[$]-A+256&255;return k},h=function(y,_,w){var A,k,R=[],$=y.length;R[0]=3;for(var H=0;H<$;H+=1)A=y[H-_]||0,k=w&&w[H]||0,R[H+1]=y[H]+256-(A+k>>>1)&255;return R},p=function(y,_,w){var A,k,R,$,H=[],oe=y.length;H[0]=4;for(var se=0;se<oe;se+=1)A=y[se-_]||0,k=w&&w[se]||0,R=w&&w[se-_]||0,$=m(A,k,R),H[se+1]=y[se]-$+256&255;return H},m=function(y,_,w){if(y===_&&_===w)return y;var A=Math.abs(_-w),k=Math.abs(y-w),R=Math.abs(y+_-w-w);return A<=k&&A<=R?y:k<=R?_:w},f=function(){return[o,s,l,h,p]},g=function(y){var _=y.map(function(w){return w.reduce(function(A,k){return A+Math.abs(k)},0)});return _.indexOf(Math.min.apply(null,_))};r.processPNG=function(y,_,w,A){var k,R,$,H,oe,se,ge,ue,pe,Ce,_e,de,te,Se,Te,De=this.decode.FLATE_DECODE,Le="";if(this.__addimage__.isArrayBuffer(y)&&(y=new Uint8Array(y)),this.__addimage__.isArrayBufferView(y)){if(y=($=new YGe(y)).imgData,R=$.bits,k=$.colorSpace,oe=$.colors,[4,6].indexOf($.colorType)!==-1){if($.bits===8){pe=(ue=$.pixelBitlength==32?new Uint32Array($.decodePixels().buffer):$.pixelBitlength==16?new Uint16Array($.decodePixels().buffer):new Uint8Array($.decodePixels().buffer)).length,_e=new Uint8Array(pe*$.colors),Ce=new Uint8Array(pe);var Me,ze=$.pixelBitlength-$.bits;for(Se=0,Te=0;Se<pe;Se++){for(te=ue[Se],Me=0;Me<ze;)_e[Te++]=te>>>Me&255,Me+=$.bits;Ce[Se]=te>>>Me&255}}if($.bits===16){pe=(ue=new Uint32Array($.decodePixels().buffer)).length,_e=new Uint8Array(pe*(32/$.pixelBitlength)*$.colors),Ce=new Uint8Array(pe*(32/$.pixelBitlength)),de=$.colors>1,Se=0,Te=0;for(var Ve=0;Se<pe;)te=ue[Se++],_e[Te++]=te>>>0&255,de&&(_e[Te++]=te>>>16&255,te=ue[Se++],_e[Te++]=te>>>0&255),Ce[Ve++]=te>>>16&255;R=8}A!==r.image_compression.NONE&&i()?(y=e(_e,$.width*$.colors,$.colors,A),ge=e(Ce,$.width,1,A)):(y=_e,ge=Ce,De=void 0)}if($.colorType===3&&(k=this.color_spaces.INDEXED,se=$.palette,$.transparency.indexed)){var $e=$.transparency.indexed,nt=0;for(Se=0,pe=$e.length;Se<pe;++Se)nt+=$e[Se];if((nt/=255)===pe-1&&$e.indexOf(0)!==-1)H=[$e.indexOf(0)];else if(nt!==pe){for(ue=$.decodePixels(),Ce=new Uint8Array(ue.length),Se=0,pe=ue.length;Se<pe;Se++)Ce[Se]=$e[ue[Se]];ge=e(Ce,$.width,1)}}var be=function(we){var ke;switch(we){case r.image_compression.FAST:ke=11;break;case r.image_compression.MEDIUM:ke=13;break;case r.image_compression.SLOW:ke=14;break;default:ke=12}return ke}(A);return De===this.decode.FLATE_DECODE&&(Le="/Predictor "+be+" "),Le+="/Colors "+oe+" /BitsPerComponent "+R+" /Columns "+$.width,(this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),(ge&&this.__addimage__.isArrayBuffer(ge)||this.__addimage__.isArrayBufferView(ge))&&(ge=this.__addimage__.arrayBufferToBinaryString(ge)),{alias:w,data:y,index:_,filter:De,decodeParameters:Le,transparency:H,palette:se,sMask:ge,predictor:be,width:$.width,height:$.height,bitsPerComponent:R,colorSpace:k}}}})(tr.API),function(r){r.processGIF89A=function(i,e,n,o){var s=new KGe(i),l=s.width,h=s.height,p=[];s.decodeAndBlitFrameRGBA(0,p);var m={data:p,width:l,height:h},f=new FK(100).encode(m,100);return r.processJPEG.call(this,f,e,n,o)},r.processGIF87A=r.processGIF89A}(tr.API),qg.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var i=0;i<r;i++){var e=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[i]={red:o,green:n,blue:e,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},qg.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,i=this.width*this.height*4;this.data=new Uint8Array(i),this[r]()}catch(e){Za.log("bit decode error:"+e)}},qg.prototype.bit1=function(){var r,i=Math.ceil(this.width/8),e=i%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,o=0;o<i;o++)for(var s=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+8*o*4,h=0;h<8&&8*o+h<this.width;h++){var p=this.palette[s>>7-h&1];this.data[l+4*h]=p.blue,this.data[l+4*h+1]=p.green,this.data[l+4*h+2]=p.red,this.data[l+4*h+3]=255}e!==0&&(this.pos+=4-e)}},qg.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),i=r%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,o=0;o<r;o++){var s=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+2*o*4,h=s>>4,p=15&s,m=this.palette[h];if(this.data[l]=m.blue,this.data[l+1]=m.green,this.data[l+2]=m.red,this.data[l+3]=255,2*o+1>=this.width)break;m=this.palette[p],this.data[l+4]=m.blue,this.data[l+4+1]=m.green,this.data[l+4+2]=m.red,this.data[l+4+3]=255}i!==0&&(this.pos+=4-i)}},qg.prototype.bit8=function(){for(var r=this.width%4,i=this.height-1;i>=0;i--){for(var e=this.bottom_up?i:this.height-1-i,n=0;n<this.width;n++){var o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;if(o<this.palette.length){var l=this.palette[o];this.data[s]=l.red,this.data[s+1]=l.green,this.data[s+2]=l.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}r!==0&&(this.pos+=4-r)}},qg.prototype.bit15=function(){for(var r=this.width%3,i=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(s&i)/i*255|0,h=(s>>5&i)/i*255|0,p=(s>>10&i)/i*255|0,m=s>>15?255:0,f=n*this.width*4+4*o;this.data[f]=p,this.data[f+1]=h,this.data[f+2]=l,this.data[f+3]=m}this.pos+=r}},qg.prototype.bit16=function(){for(var r=this.width%3,i=parseInt("11111",2),e=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var o=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(l&i)/i*255|0,p=(l>>5&e)/e*255|0,m=(l>>11)/i*255|0,f=o*this.width*4+4*s;this.data[f]=m,this.data[f+1]=p,this.data[f+2]=h,this.data[f+3]=255}this.pos+=r}},qg.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+4*e;this.data[l]=s,this.data[l+1]=o,this.data[l+2]=n,this.data[l+3]=255}this.pos+=this.width%4}},qg.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var i=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),h=i*this.width*4+4*e;this.data[h]=s,this.data[h+1]=o,this.data[h+2]=n,this.data[h+3]=l}},qg.prototype.getData=function(){return this.data},function(r){r.processBMP=function(i,e,n,o){var s=new qg(i,!1),l=s.width,h=s.height,p={data:s.getData(),width:l,height:h},m=new FK(100).encode(p,100);return r.processJPEG.call(this,m,e,n,o)}}(tr.API),p_e.prototype.getData=function(){return this.data},function(r){r.processWEBP=function(i,e,n,o){var s=new p_e(i),l=s.width,h=s.height,p={data:s.getData(),width:l,height:h},m=new FK(100).encode(p,100);return r.processJPEG.call(this,m,e,n,o)}}(tr.API),tr.API.processRGBA=function(r,i,e){for(var n=r.data,o=n.length,s=new Uint8Array(o/4*3),l=new Uint8Array(o/4),h=0,p=0,m=0;m<o;m+=4){var f=n[m],g=n[m+1],y=n[m+2],_=n[m+3];s[h++]=f,s[h++]=g,s[h++]=y,l[p++]=_}var w=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:w,index:i,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},tr.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},$E=tr.API,qj=$E.getCharWidthsArray=function(r,i){var e,n,o=(i=i||{}).font||this.internal.getFont(),s=i.fontSize||this.internal.getFontSize(),l=i.charSpace||this.internal.getCharSpace(),h=i.widths?i.widths:o.metadata.Unicode.widths,p=h.fof?h.fof:1,m=i.kerning?i.kerning:o.metadata.Unicode.kerning,f=m.fof?m.fof:1,g=i.doKerning!==!1,y=0,_=r.length,w=0,A=h[0]||p,k=[];for(e=0;e<_;e++)n=r.charCodeAt(e),typeof o.metadata.widthOfString=="function"?k.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(n))+l*(1e3/s)||0)/1e3):(y=g&&pa(m[n])==="object"&&!isNaN(parseInt(m[n][w],10))?m[n][w]/f:0,k.push((h[n]||A)/p+y)),w=n;return k},c_e=$E.getStringUnitWidth=function(r,i){var e=(i=i||{}).fontSize||this.internal.getFontSize(),n=i.font||this.internal.getFont(),o=i.charSpace||this.internal.getCharSpace();return $E.processArabic&&(r=$E.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,e,o)/e:qj.apply(this,arguments).reduce(function(s,l){return s+l},0)},d_e=function(r,i,e,n){for(var o=[],s=0,l=r.length,h=0;s!==l&&h+i[s]<e;)h+=i[s],s++;o.push(r.slice(0,s));var p=s;for(h=0;s!==l;)h+i[s]>n&&(o.push(r.slice(p,s)),h=0,p=s),h+=i[s],s++;return p!==s&&o.push(r.slice(p,s)),o},u_e=function(r,i,e){e||(e={});var n,o,s,l,h,p,m,f=[],g=[f],y=e.textIndent||0,_=0,w=0,A=r.split(" "),k=qj.apply(this,[" ",e])[0];if(p=e.lineIndent===-1?A[0].length+2:e.lineIndent||0){var R=Array(p).join(" "),$=[];A.map(function(oe){(oe=oe.split(/\s*\n/)).length>1?$=$.concat(oe.map(function(se,ge){return(ge&&se.length?`
`:"")+se})):$.push(oe[0])}),A=$,p=c_e.apply(this,[R,e])}for(s=0,l=A.length;s<l;s++){var H=0;if(n=A[s],p&&n[0]==`
`&&(n=n.substr(1),H=1),y+_+(w=(o=qj.apply(this,[n,e])).reduce(function(oe,se){return oe+se},0))>i||H){if(w>i){for(h=d_e.apply(this,[n,o,i-(y+_),i]),f.push(h.shift()),f=[h.pop()];h.length;)g.push([h.shift()]);w=o.slice(n.length-(f[0]?f[0].length:0)).reduce(function(oe,se){return oe+se},0)}else f=[n];g.push(f),y=w+p,_=k}else f.push(n),y+=_+w,_=k}return m=p?function(oe,se){return(se?R:"")+oe.join(" ")}:function(oe){return oe.join(" ")},g.map(m)},$E.splitTextToSize=function(r,i,e){var n,o=(e=e||{}).fontSize||this.internal.getFontSize(),s=function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var g=this.internal.getFont(f.fontName,f.fontStyle);return g.metadata.Unicode?{widths:g.metadata.Unicode.widths||{0:1},kerning:g.metadata.Unicode.kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,e);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var l=1*this.internal.scaleFactor*i/o;s.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/o:0,s.lineIndent=e.lineIndent;var h,p,m=[];for(h=0,p=n.length;h<p;h++)m=m.concat(u_e.apply(this,[n[h],l,s]));return m},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var i="klmnopqrstuvwxyz",e={},n={},o=0;o<i.length;o++)e[i[o]]="0123456789abcdef"[o],n["0123456789abcdef"[o]]=i[o];var s=function(g){return"0x"+parseInt(g,10).toString(16)},l=r.__fontmetrics__.compress=function(g){var y,_,w,A,k=["{"];for(var R in g){if(y=g[R],isNaN(parseInt(R,10))?_="'"+R+"'":(R=parseInt(R,10),_=(_=s(R).slice(2)).slice(0,-1)+n[_.slice(-1)]),typeof y=="number")y<0?(w=s(y).slice(3),A="-"):(w=s(y).slice(2),A=""),w=A+w.slice(0,-1)+n[w.slice(-1)];else{if(pa(y)!=="object")throw new Error("Don't know what to do with value type "+pa(y)+".");w=l(y)}k.push(_+w)}return k.push("}"),k.join("")},h=r.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,_,w,A,k={},R=1,$=k,H=[],oe="",se="",ge=g.length-1,ue=1;ue<ge;ue+=1)(A=g[ue])=="'"?y?(w=y.join(""),y=void 0):y=[]:y?y.push(A):A=="{"?(H.push([$,w]),$={},w=void 0):A=="}"?((_=H.pop())[0][_[1]]=$,w=void 0,$=_[0]):A=="-"?R=-1:w===void 0?e.hasOwnProperty(A)?(oe+=e[A],w=parseInt(oe,16)*R,R=1,oe=""):oe+=A:e.hasOwnProperty(A)?(se+=e[A],$[w]=parseInt(se,16)*R,R=1,w=void 0,se=""):se+=A;return k},p={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:p,"Courier-Bold":p,"Courier-BoldOblique":p,"Courier-Oblique":p,Helvetica:p,"Helvetica-Bold":p,"Helvetica-BoldOblique":p,"Helvetica-Oblique":p,"Times-Roman":p,"Times-Bold":p,"Times-BoldItalic":p,"Times-Italic":p}},f={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(g){var y=g.font,_=f.Unicode[y.postScriptName];_&&(y.metadata.Unicode={},y.metadata.Unicode.widths=_.widths,y.metadata.Unicode.kerning=_.kerning);var w=m.Unicode[y.postScriptName];w&&(y.metadata.Unicode.encoding=w,y.encoding=w.codePages[0])}])}(tr.API),function(r){var i=function(e){for(var n=e.length,o=new Uint8Array(n),s=0;s<n;s++)o[s]=e.charCodeAt(s);return o};r.API.events.push(["addFont",function(e){var n=void 0,o=e.font,s=e.instance;if(!o.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(n=s.existsFileInVFS(o.postScriptName)===!1?s.loadFile(o.postScriptName):s.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(l,h){h=/^\x00\x01\x00\x00/.test(h)?i(h):i(LP(h)),l.metadata=r.API.TTFFont.open(h),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(o,n)}}])}(tr),function(r){function i(){return(Mr.canvg?Promise.resolve(Mr.canvg):import("./chunk-Y6TYK6L2.js")).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}tr.API.addSvgAsImage=function(e,n,o,s,l,h,p,m){if(isNaN(n)||isNaN(o))throw Za.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(l))throw Za.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=l;var g=f.getContext("2d");g.fillStyle="#fff",g.fillRect(0,0,f.width,f.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},_=this;return i().then(function(w){return w.fromString(g,e,y)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(w){return w.render(y)}).then(function(){_.addImage(f.toDataURL("image/jpeg",1),n,o,s,l,p,m)})}}(),tr.API.putTotalPages=function(r){var i,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(i=new RegExp(r,"g"),e=this.internal.getNumberOfPages()):(i=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var o=0;o<this.internal.pages[n].length;o++)this.internal.pages[n][o]=this.internal.pages[n][o].replace(i,e);return this},tr.API.viewerPreferences=function(r,i){var e;r=r||{},i=i||!1;var n,o,s,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},h=Object.keys(l),p=[],m=0,f=0,g=0;function y(w,A){var k,R=!1;for(k=0;k<w.length;k+=1)w[k]===A&&(R=!0);return R}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,r==="reset"||i===!0){var _=h.length;for(g=0;g<_;g+=1)e[h[g]].value=e[h[g]].defaultValue,e[h[g]].explicitSet=!1}if(pa(r)==="object"){for(o in r)if(s=r[o],y(h,o)&&s!==void 0){if(e[o].type==="boolean"&&typeof s=="boolean")e[o].value=s;else if(e[o].type==="name"&&y(e[o].valueSet,s))e[o].value=s;else if(e[o].type==="integer"&&Number.isInteger(s))e[o].value=s;else if(e[o].type==="array"){for(m=0;m<s.length;m+=1)if(n=!0,s[m].length===1&&typeof s[m][0]=="number")p.push(String(s[m]-1));else if(s[m].length>1){for(f=0;f<s[m].length;f+=1)typeof s[m][f]!="number"&&(n=!1);n===!0&&p.push([s[m][0]-1,s[m][1]-1].join(" "))}e[o].value="["+p.join(" ")+"]"}else e[o].value=e[o].defaultValue;e[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var w,A=[];for(w in e)e[w].explicitSet===!0&&(e[w].type==="name"?A.push("/"+w+" /"+e[w].value):A.push("/"+w+" "+e[w].value));A.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+A.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(r){var i=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),h=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),p=unescape(encodeURIComponent("</x:xmpmeta>")),m=s.length+l.length+h.length+o.length+p.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+m+" >>"),this.internal.write("stream"),this.internal.write(o+s+l+h+p),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",i)),this}}(tr.API),function(r){var i=r.API,e=i.pdfEscape16=function(s,l){for(var h,p=l.metadata.Unicode.widths,m=["","0","00","000","0000"],f=[""],g=0,y=s.length;g<y;++g){if(h=l.metadata.characterToGlyph(s.charCodeAt(g)),l.metadata.glyIdsUsed.push(h),l.metadata.toUnicode[h]=s.charCodeAt(g),p.indexOf(h)==-1&&(p.push(h),p.push([parseInt(l.metadata.widthOfGlyph(h),10)])),h=="0")return f.join("");h=h.toString(16),f.push(m[4-h.length],h)}return f.join("")},n=function(s){var l,h,p,m,f,g,y;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,p=[],g=0,y=(h=Object.keys(s).sort(function(_,w){return _-w})).length;g<y;g++)l=h[g],p.length>=100&&(f+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar`,p=[]),s[l]!==void 0&&s[l]!==null&&typeof s[l].toString=="function"&&(m=("0000"+s[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),p.push("<"+l+"><"+m+">"));return p.length&&(f+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};i.events.push(["putFont",function(s){(function(l){var h=l.font,p=l.out,m=l.newObject,f=l.putStream;if(h.metadata instanceof r.API.TTFFont&&h.encoding==="Identity-H"){for(var g=h.metadata.Unicode.widths,y=h.metadata.subset.encode(h.metadata.glyIdsUsed,1),_="",w=0;w<y.length;w++)_+=String.fromCharCode(y[w]);var A=m();f({data:_,addLength1:!0,objectId:A}),p("endobj");var k=m();f({data:n(h.metadata.toUnicode),addLength1:!0,objectId:k}),p("endobj");var R=m();p("<<"),p("/Type /FontDescriptor"),p("/FontName /"+zE(h.fontName)),p("/FontFile2 "+A+" 0 R"),p("/FontBBox "+r.API.PDFObject.convert(h.metadata.bbox)),p("/Flags "+h.metadata.flags),p("/StemV "+h.metadata.stemV),p("/ItalicAngle "+h.metadata.italicAngle),p("/Ascent "+h.metadata.ascender),p("/Descent "+h.metadata.decender),p("/CapHeight "+h.metadata.capHeight),p(">>"),p("endobj");var $=m();p("<<"),p("/Type /Font"),p("/BaseFont /"+zE(h.fontName)),p("/FontDescriptor "+R+" 0 R"),p("/W "+r.API.PDFObject.convert(g)),p("/CIDToGIDMap /Identity"),p("/DW 1000"),p("/Subtype /CIDFontType2"),p("/CIDSystemInfo"),p("<<"),p("/Supplement 0"),p("/Registry (Adobe)"),p("/Ordering ("+h.encoding+")"),p(">>"),p(">>"),p("endobj"),h.objectNumber=m(),p("<<"),p("/Type /Font"),p("/Subtype /Type0"),p("/ToUnicode "+k+" 0 R"),p("/BaseFont /"+zE(h.fontName)),p("/Encoding /"+h.encoding),p("/DescendantFonts ["+$+" 0 R]"),p(">>"),p("endobj"),h.isAlreadyPutted=!0}})(s)}]),i.events.push(["putFont",function(s){(function(l){var h=l.font,p=l.out,m=l.newObject,f=l.putStream;if(h.metadata instanceof r.API.TTFFont&&h.encoding==="WinAnsiEncoding"){for(var g=h.metadata.rawData,y="",_=0;_<g.length;_++)y+=String.fromCharCode(g[_]);var w=m();f({data:y,addLength1:!0,objectId:w}),p("endobj");var A=m();f({data:n(h.metadata.toUnicode),addLength1:!0,objectId:A}),p("endobj");var k=m();p("<<"),p("/Descent "+h.metadata.decender),p("/CapHeight "+h.metadata.capHeight),p("/StemV "+h.metadata.stemV),p("/Type /FontDescriptor"),p("/FontFile2 "+w+" 0 R"),p("/Flags 96"),p("/FontBBox "+r.API.PDFObject.convert(h.metadata.bbox)),p("/FontName /"+zE(h.fontName)),p("/ItalicAngle "+h.metadata.italicAngle),p("/Ascent "+h.metadata.ascender),p(">>"),p("endobj"),h.objectNumber=m();for(var R=0;R<h.metadata.hmtx.widths.length;R++)h.metadata.hmtx.widths[R]=parseInt(h.metadata.hmtx.widths[R]*(1e3/h.metadata.head.unitsPerEm));p("<</Subtype/TrueType/Type/Font/ToUnicode "+A+" 0 R/BaseFont/"+zE(h.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+h.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(h.metadata.hmtx.widths)+">>"),p("endobj"),h.isAlreadyPutted=!0}})(s)}]);var o=function(s){var l,h=s.text||"",p=s.x,m=s.y,f=s.options||{},g=s.mutex||{},y=g.pdfEscape,_=g.activeFontKey,w=g.fonts,A=_,k="",R=0,$="",H=w[A].encoding;if(w[A].encoding!=="Identity-H")return{text:h,x:p,y:m,options:f,mutex:g};for($=h,A=_,Array.isArray(h)&&($=h[0]),R=0;R<$.length;R+=1)w[A].metadata.hasOwnProperty("cmap")&&(l=w[A].metadata.cmap.unicode.codeMap[$[R].charCodeAt(0)]),l||$[R].charCodeAt(0)<256&&w[A].metadata.hasOwnProperty("Unicode")?k+=$[R]:k+="";var oe="";return parseInt(A.slice(1))<14||H==="WinAnsiEncoding"?oe=y(k,A).split("").map(function(se){return se.charCodeAt(0).toString(16)}).join(""):H==="Identity-H"&&(oe=e(k,w[A])),g.isHex=!0,{text:oe,x:p,y:m,options:f,mutex:g}};i.events.push(["postProcessText",function(s){var l=s.text||"",h=[],p={text:l,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(l)){var m=0;for(m=0;m<l.length;m+=1)Array.isArray(l[m])&&l[m].length===3?h.push([o(Object.assign({},p,{text:l[m][0]})).text,l[m][1],l[m][2]]):h.push(o(Object.assign({},p,{text:l[m]})).text);s.text=h}else s.text=o(Object.assign({},p,{text:l})).text}])}(tr),function(r){var i=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(e){return i.call(this),this.internal.vFS[e]!==void 0},r.addFileToVFS=function(e,n){return i.call(this),this.internal.vFS[e]=n,this},r.getFileFromVFS=function(e){return i.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(tr.API),function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var o,s,l,h,p,m,f,g=i,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],_=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],w={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},A={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],R=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),$=!1,H=0;this.__bidiEngine__={};var oe=function(de){var te=de.charCodeAt(),Se=te>>8,Te=A[Se];return Te!==void 0?g[256*Te+(255&te)]:Se===252||Se===253?"AL":R.test(Se)?"L":Se===8?"R":"N"},se=function(de){for(var te,Se=0;Se<de.length;Se++){if((te=oe(de.charAt(Se)))==="L")return!1;if(te==="R")return!0}return!1},ge=function(de,te,Se,Te){var De,Le,Me,ze,Ve=te[Te];switch(Ve){case"L":case"R":$=!1;break;case"N":case"AN":break;case"EN":$&&(Ve="AN");break;case"AL":$=!0,Ve="R";break;case"WS":Ve="N";break;case"CS":Te<1||Te+1>=te.length||(De=Se[Te-1])!=="EN"&&De!=="AN"||(Le=te[Te+1])!=="EN"&&Le!=="AN"?Ve="N":$&&(Le="AN"),Ve=Le===De?Le:"N";break;case"ES":Ve=(De=Te>0?Se[Te-1]:"B")==="EN"&&Te+1<te.length&&te[Te+1]==="EN"?"EN":"N";break;case"ET":if(Te>0&&Se[Te-1]==="EN"){Ve="EN";break}if($){Ve="N";break}for(Me=Te+1,ze=te.length;Me<ze&&te[Me]==="ET";)Me++;Ve=Me<ze&&te[Me]==="EN"?"EN":"N";break;case"NSM":if(l&&!h){for(ze=te.length,Me=Te+1;Me<ze&&te[Me]==="NSM";)Me++;if(Me<ze){var $e=de[Te],nt=$e>=1425&&$e<=2303||$e===64286;if(De=te[Me],nt&&(De==="R"||De==="AL")){Ve="R";break}}}Ve=Te<1||(De=te[Te-1])==="B"?"N":Se[Te-1];break;case"B":$=!1,o=!0,Ve=H;break;case"S":s=!0,Ve="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":$=!1;break;case"BN":Ve="N"}return Ve},ue=function(de,te,Se){var Te=de.split("");return Se&&pe(Te,Se,{hiLevel:H}),Te.reverse(),te&&te.reverse(),Te.join("")},pe=function(de,te,Se){var Te,De,Le,Me,ze,Ve=-1,$e=de.length,nt=0,be=[],we=H?_:y,ke=[];for($=!1,o=!1,s=!1,De=0;De<$e;De++)ke[De]=oe(de[De]);for(Le=0;Le<$e;Le++){if(ze=nt,be[Le]=ge(de,ke,be,Le),Te=240&(nt=we[ze][w[be[Le]]]),nt&=15,te[Le]=Me=we[nt][5],Te>0)if(Te===16){for(De=Ve;De<Le;De++)te[De]=1;Ve=-1}else Ve=-1;if(we[nt][6])Ve===-1&&(Ve=Le);else if(Ve>-1){for(De=Ve;De<Le;De++)te[De]=Me;Ve=-1}ke[Le]==="B"&&(te[Le]=0),Se.hiLevel|=Me}s&&function(et,Qe,at){for(var _t=0;_t<at;_t++)if(et[_t]==="S"){Qe[_t]=H;for(var ht=_t-1;ht>=0&&et[ht]==="WS";ht--)Qe[ht]=H}}(ke,te,$e)},Ce=function(de,te,Se,Te,De){if(!(De.hiLevel<de)){if(de===1&&H===1&&!o)return te.reverse(),void(Se&&Se.reverse());for(var Le,Me,ze,Ve,$e=te.length,nt=0;nt<$e;){if(Te[nt]>=de){for(ze=nt+1;ze<$e&&Te[ze]>=de;)ze++;for(Ve=nt,Me=ze-1;Ve<Me;Ve++,Me--)Le=te[Ve],te[Ve]=te[Me],te[Me]=Le,Se&&(Le=Se[Ve],Se[Ve]=Se[Me],Se[Me]=Le);nt=ze}nt++}}},_e=function(de,te,Se){var Te=de.split(""),De={hiLevel:H};return Se||(Se=[]),pe(Te,Se,De),function(Le,Me,ze){if(ze.hiLevel!==0&&f)for(var Ve,$e=0;$e<Le.length;$e++)Me[$e]===1&&(Ve=k.indexOf(Le[$e]))>=0&&(Le[$e]=k[Ve+1])}(Te,Se,De),Ce(2,Te,te,Se,De),Ce(1,Te,te,Se,De),Te.join("")};return this.__bidiEngine__.doBidiReorder=function(de,te,Se){if(function(De,Le){if(Le)for(var Me=0;Me<De.length;Me++)Le[Me]=Me;h===void 0&&(h=se(De)),m===void 0&&(m=se(De))}(de,te),l||!p||m)if(l&&p&&h^m)H=h?1:0,de=ue(de,te,Se);else if(!l&&p&&m)H=h?1:0,de=_e(de,te,Se),de=ue(de,te);else if(!l||h||p||m){if(l&&!p&&h^m)de=ue(de,te),h?(H=0,de=_e(de,te,Se)):(H=1,de=_e(de,te,Se),de=ue(de,te));else if(l&&h&&!p&&m)H=1,de=_e(de,te,Se),de=ue(de,te);else if(!l&&!p&&h^m){var Te=f;h?(H=1,de=_e(de,te,Se),H=0,f=!1,de=_e(de,te,Se),f=Te):(H=0,de=_e(de,te,Se),de=ue(de,te),H=1,f=!1,de=_e(de,te,Se),f=Te,de=ue(de,te))}}else H=0,de=_e(de,te,Se);else H=h?1:0,de=_e(de,te,Se);return de},this.__bidiEngine__.setOptions=function(de){de&&(l=de.isInputVisual,p=de.isOutputVisual,h=de.isInputRtl,m=de.isOutputRtl,f=de.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var i=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var o=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var l=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,e.setOptions(s),Object.prototype.toString.call(o)==="[object Array]"){var h=0;for(l=[],h=0;h<o.length;h+=1)Object.prototype.toString.call(o[h])==="[object Array]"?l.push([e.doBidiReorder(o[h][0]),o[h][1],o[h][2]]):l.push([e.doBidiReorder(o[h])]);n.text=l}else n.text=e.doBidiReorder(o);e.setOptions({isInputVisual:!0})}])}(tr),tr.API.TTFFont=function(){function r(i){var e;if(this.rawData=i,e=this.contents=new b1(i),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new dHe(this),this.registerTTF()}return r.open=function(i){return new r(i)},r.prototype.parse=function(){return this.directory=new ZGe(this.contents),this.head=new XGe(this),this.name=new nHe(this),this.cmap=new I_e(this),this.toUnicode={},this.hhea=new JGe(this),this.maxp=new rHe(this),this.hmtx=new oHe(this),this.post=new tHe(this),this.os2=new eHe(this),this.loca=new cHe(this),this.glyf=new sHe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var i,e,n,o,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var l,h,p,m;for(m=[],l=0,h=(p=this.bbox).length;l<h;l++)i=p[l],m.push(Math.round(i*this.scaleFactor));return m}.call(this),this.stemV=0,this.post.exists?(n=255&(o=this.post.italic_angle),32768&(e=o>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(i){var e;return((e=this.cmap.unicode)!=null?e.codeMap[i]:void 0)||0},r.prototype.widthOfGlyph=function(i){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(i).advance*e},r.prototype.widthOfString=function(i,e,n){var o,s,l,h;for(l=0,s=0,h=(i=""+i).length;0<=h?s<h:s>h;s=0<=h?++s:--s)o=i.charCodeAt(s),l+=this.widthOfGlyph(this.characterToGlyph(o))+n*(1e3/e)||0;return l*(e/1e3)},r.prototype.lineHeight=function(i,e){var n;return e==null&&(e=!1),n=e?this.lineGap:0,(this.ascender+n-this.decender)/1e3*i},r}();var Kg,b1=function(){function r(i){this.data=i??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(i){return this.data[this.pos++]=i},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(i){return this.writeByte(i>>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},r.prototype.readInt32=function(){var i;return(i=this.readUInt32())>=2147483648?i-4294967296:i},r.prototype.writeInt32=function(i){return i<0&&(i+=4294967296),this.writeUInt32(i)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(i){return this.writeByte(i>>8&255),this.writeByte(255&i)},r.prototype.readInt16=function(){var i;return(i=this.readUInt16())>=32768?i-65536:i},r.prototype.writeInt16=function(i){return i<0&&(i+=65536),this.writeUInt16(i)},r.prototype.readString=function(i){var e,n;for(n=[],e=0;0<=i?e<i:e>i;e=0<=i?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(i){var e,n,o;for(o=[],e=0,n=i.length;0<=n?e<n:e>n;e=0<=n?++e:--e)o.push(this.writeByte(i.charCodeAt(e)));return o},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(i){return this.writeInt16(i)},r.prototype.readLongLong=function(){var i,e,n,o,s,l,h,p;return i=this.readByte(),e=this.readByte(),n=this.readByte(),o=this.readByte(),s=this.readByte(),l=this.readByte(),h=this.readByte(),p=this.readByte(),128&i?-1*(72057594037927940*(255^i)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^o)+16777216*(255^s)+65536*(255^l)+256*(255^h)+(255^p)+1):72057594037927940*i+281474976710656*e+1099511627776*n+4294967296*o+16777216*s+65536*l+256*h+p},r.prototype.writeLongLong=function(i){var e,n;return e=Math.floor(i/4294967296),n=4294967295&i,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(i){return this.writeInt32(i)},r.prototype.read=function(i){var e,n;for(e=[],n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)e.push(this.readByte());return e},r.prototype.write=function(i){var e,n,o,s;for(s=[],n=0,o=i.length;n<o;n++)e=i[n],s.push(this.writeByte(e));return s},r}(),ZGe=function(){var r;function i(e){var n,o,s;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},o=0,s=this.tableCount;0<=s?o<s:o>s;o=0<=s?++o:--o)n={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[n.tag]=n}return i.prototype.encode=function(e){var n,o,s,l,h,p,m,f,g,y,_,w,A;for(A in _=Object.keys(e).length,p=Math.log(2),g=16*Math.floor(Math.log(_)/p),l=Math.floor(g/p),f=16*_-g,(o=new b1).writeInt(this.scalarType),o.writeShort(_),o.writeShort(g),o.writeShort(l),o.writeShort(f),s=16*_,m=o.pos+s,h=null,w=[],e)for(y=e[A],o.writeString(A),o.writeInt(r(y)),o.writeInt(m),o.writeInt(y.length),w=w.concat(y),A==="head"&&(h=m),m+=y.length;m%4;)w.push(0),m++;return o.write(w),n=2981146554-r(o.data),o.pos=h+8,o.writeUInt32(n),o.data},r=function(e){var n,o,s,l;for(e=T_e.call(e);e.length%4;)e.push(0);for(s=new b1(e),o=0,n=0,l=e.length;n<l;n=n+=4)o+=s.readUInt32();return 4294967295&o},i}(),QGe={}.hasOwnProperty,O_=function(r,i){for(var e in i)QGe.call(i,e)&&(r[e]=i[e]);function n(){this.constructor=r}return n.prototype=i.prototype,r.prototype=new n,r.__super__=i.prototype,r};Kg=function(){function r(i){var e;this.file=i,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var XGe=function(r){function i(){return i.__super__.constructor.apply(this,arguments)}return O_(i,Kg),i.prototype.tag="head",i.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},i.prototype.encode=function(e){var n;return(n=new b1).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},i}(),m_e=function(){function r(i,e){var n,o,s,l,h,p,m,f,g,y,_,w,A,k,R,$,H;switch(this.platformID=i.readUInt16(),this.encodingID=i.readShort(),this.offset=e+i.readInt(),g=i.pos,i.pos=this.offset,this.format=i.readUInt16(),this.length=i.readUInt16(),this.language=i.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(p=0;p<256;++p)this.codeMap[p]=i.readByte();break;case 4:for(_=i.readUInt16(),y=_/2,i.pos+=6,s=function(){var oe,se;for(se=[],p=oe=0;0<=y?oe<y:oe>y;p=0<=y?++oe:--oe)se.push(i.readUInt16());return se}(),i.pos+=2,A=function(){var oe,se;for(se=[],p=oe=0;0<=y?oe<y:oe>y;p=0<=y?++oe:--oe)se.push(i.readUInt16());return se}(),m=function(){var oe,se;for(se=[],p=oe=0;0<=y?oe<y:oe>y;p=0<=y?++oe:--oe)se.push(i.readUInt16());return se}(),f=function(){var oe,se;for(se=[],p=oe=0;0<=y?oe<y:oe>y;p=0<=y?++oe:--oe)se.push(i.readUInt16());return se}(),o=(this.length-i.pos+this.offset)/2,h=function(){var oe,se;for(se=[],p=oe=0;0<=o?oe<o:oe>o;p=0<=o?++oe:--oe)se.push(i.readUInt16());return se}(),p=R=0,H=s.length;R<H;p=++R)for(k=s[p],n=$=w=A[p];w<=k?$<=k:$>=k;n=w<=k?++$:--$)f[p]===0?l=n+m[p]:(l=h[f[p]/2+(n-w)-(y-p)]||0)!==0&&(l+=m[p]),this.codeMap[n]=65535&l}i.pos=g}return r.encode=function(i,e){var n,o,s,l,h,p,m,f,g,y,_,w,A,k,R,$,H,oe,se,ge,ue,pe,Ce,_e,de,te,Se,Te,De,Le,Me,ze,Ve,$e,nt,be,we,ke,et,Qe,at,_t,ht,Zt,Tt,me;switch(Te=new b1,l=Object.keys(i).sort(function(Ct,pt){return Ct-pt}),e){case"macroman":for(A=0,k=function(){var Ct=[];for(w=0;w<256;++w)Ct.push(0);return Ct}(),$={0:0},s={},De=0,Ve=l.length;De<Ve;De++)$[ht=i[o=l[De]]]==null&&($[ht]=++A),s[o]={old:i[o],new:$[i[o]]},k[o]=$[i[o]];return Te.writeUInt16(1),Te.writeUInt16(0),Te.writeUInt32(12),Te.writeUInt16(0),Te.writeUInt16(262),Te.writeUInt16(0),Te.write(k),{charMap:s,subtable:Te.data,maxGlyphID:A+1};case"unicode":for(te=[],g=[],H=0,$={},n={},R=m=null,Le=0,$e=l.length;Le<$e;Le++)$[se=i[o=l[Le]]]==null&&($[se]=++H),n[o]={old:se,new:$[se]},h=$[se]-o,R!=null&&h===m||(R&&g.push(R),te.push(o),m=h),R=o;for(R&&g.push(R),g.push(65535),te.push(65535),_e=2*(Ce=te.length),pe=2*Math.pow(Math.log(Ce)/Math.LN2,2),y=Math.log(pe/2)/Math.LN2,ue=2*Ce-pe,p=[],ge=[],_=[],w=Me=0,nt=te.length;Me<nt;w=++Me){if(de=te[w],f=g[w],de===65535){p.push(0),ge.push(0);break}if(de-(Se=n[de].new)>=32768)for(p.push(0),ge.push(2*(_.length+Ce-w)),o=ze=de;de<=f?ze<=f:ze>=f;o=de<=f?++ze:--ze)_.push(n[o].new);else p.push(Se-de),ge.push(0)}for(Te.writeUInt16(3),Te.writeUInt16(1),Te.writeUInt32(12),Te.writeUInt16(4),Te.writeUInt16(16+8*Ce+2*_.length),Te.writeUInt16(0),Te.writeUInt16(_e),Te.writeUInt16(pe),Te.writeUInt16(y),Te.writeUInt16(ue),at=0,be=g.length;at<be;at++)o=g[at],Te.writeUInt16(o);for(Te.writeUInt16(0),_t=0,we=te.length;_t<we;_t++)o=te[_t],Te.writeUInt16(o);for(Zt=0,ke=p.length;Zt<ke;Zt++)h=p[Zt],Te.writeUInt16(h);for(Tt=0,et=ge.length;Tt<et;Tt++)oe=ge[Tt],Te.writeUInt16(oe);for(me=0,Qe=_.length;me<Qe;me++)A=_[me],Te.writeUInt16(A);return{charMap:n,subtable:Te.data,maxGlyphID:H+1}}},r}(),I_e=function(r){function i(){return i.__super__.constructor.apply(this,arguments)}return O_(i,Kg),i.prototype.tag="cmap",i.prototype.parse=function(e){var n,o,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)n=new m_e(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},i.encode=function(e,n){var o,s;return n==null&&(n="macroman"),o=m_e.encode(e,n),(s=new b1).writeUInt16(0),s.writeUInt16(1),o.table=s.data.concat(o.subtable),o},i}(),JGe=function(r){function i(){return i.__super__.constructor.apply(this,arguments)}return O_(i,Kg),i.prototype.tag="hhea",i.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},i}(),eHe=function(r){function i(){return i.__super__.constructor.apply(this,arguments)}return O_(i,Kg),i.prototype.tag="OS/2",i.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var n,o;for(o=[],n=0;n<10;++n)o.push(e.readByte());return o}(),this.charRange=function(){var n,o;for(o=[],n=0;n<4;++n)o.push(e.readInt());return o}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var n,o;for(o=[],n=0;n<2;n=++n)o.push(e.readInt());return o}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},i}(),tHe=function(r){function i(){return i.__super__.constructor.apply(this,arguments)}return O_(i,Kg),i.prototype.tag="post",i.prototype.parse=function(e){var n,o,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:var l;for(o=e.readUInt16(),this.glyphNameIndex=[],l=0;0<=o?l<o:l>o;l=0<=o?++l:--l)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)n=e.readByte(),s.push(this.names.push(e.readString(n)));return s;case 151552:return o=e.readUInt16(),this.offsets=e.read(o);case 196608:break;case 262144:return this.map=function(){var h,p,m;for(m=[],l=h=0,p=this.file.maxp.numGlyphs;0<=p?h<p:h>p;l=0<=p?++h:--h)m.push(e.readUInt32());return m}.call(this)}},i}(),iHe=function(r,i){this.raw=r,this.length=r.length,this.platformID=i.platformID,this.encodingID=i.encodingID,this.languageID=i.languageID},nHe=function(r){function i(){return i.__super__.constructor.apply(this,arguments)}return O_(i,Kg),i.prototype.tag="name",i.prototype.parse=function(e){var n,o,s,l,h,p,m,f,g,y,_;for(e.pos=this.offset,e.readShort(),n=e.readShort(),p=e.readShort(),o=[],l=0;0<=n?l<n:l>n;l=0<=n?++l:--l)o.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+p+e.readShort()});for(m={},l=g=0,y=o.length;g<y;l=++g)s=o[l],e.pos=s.offset,f=e.readString(s.length),h=new iHe(f,s),m[_=s.nameID]==null&&(m[_]=[]),m[s.nameID].push(h);this.strings=m,this.copyright=m[0],this.fontFamily=m[1],this.fontSubfamily=m[2],this.uniqueSubfamily=m[3],this.fontName=m[4],this.version=m[5];try{this.postscriptName=m[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=m[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=m[7],this.manufacturer=m[8],this.designer=m[9],this.description=m[10],this.vendorUrl=m[11],this.designerUrl=m[12],this.license=m[13],this.licenseUrl=m[14],this.preferredFamily=m[15],this.preferredSubfamily=m[17],this.compatibleFull=m[18],this.sampleText=m[19]},i}(),rHe=function(r){function i(){return i.__super__.constructor.apply(this,arguments)}return O_(i,Kg),i.prototype.tag="maxp",i.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},i}(),oHe=function(r){function i(){return i.__super__.constructor.apply(this,arguments)}return O_(i,Kg),i.prototype.tag="hmtx",i.prototype.parse=function(e){var n,o,s,l,h,p,m;for(e.pos=this.offset,this.metrics=[],n=0,p=this.file.hhea.numberOfMetrics;0<=p?n<p:n>p;n=0<=p?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,g;for(g=[],n=f=0;0<=s?f<s:f>s;n=0<=s?++f:--f)g.push(e.readInt16());return g}(),this.widths=function(){var f,g,y,_;for(_=[],f=0,g=(y=this.metrics).length;f<g;f++)l=y[f],_.push(l.advance);return _}.call(this),o=this.widths[this.widths.length-1],m=[],n=h=0;0<=s?h<s:h>s;n=0<=s?++h:--h)m.push(this.widths.push(o));return m},i.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},i}(),T_e=[].slice,sHe=function(r){function i(){return i.__super__.constructor.apply(this,arguments)}return O_(i,Kg),i.prototype.tag="glyf",i.prototype.parse=function(){return this.cache={}},i.prototype.glyphFor=function(e){var n,o,s,l,h,p,m,f,g,y;return e in this.cache?this.cache[e]:(l=this.file.loca,n=this.file.contents,o=l.indexOf(e),(s=l.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+o,h=(p=new b1(n.read(s))).readShort(),f=p.readShort(),y=p.readShort(),m=p.readShort(),g=p.readShort(),this.cache[e]=h===-1?new lHe(p,f,y,m,g):new aHe(p,h,f,y,m,g),this.cache[e]))},i.prototype.encode=function(e,n,o){var s,l,h,p,m;for(h=[],l=[],p=0,m=n.length;p<m;p++)s=e[n[p]],l.push(h.length),s&&(h=h.concat(s.encode(o)));return l.push(h.length),{table:h,offsets:l}},i}(),aHe=function(){function r(i,e,n,o,s,l){this.raw=i,this.numberOfContours=e,this.xMin=n,this.yMin=o,this.xMax=s,this.yMax=l,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),lHe=function(){function r(i,e,n,o,s){var l,h;for(this.raw=i,this.xMin=e,this.yMin=n,this.xMax=o,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;h=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&h;)l.pos+=1&h?4:2,128&h?l.pos+=8:64&h?l.pos+=4:8&h&&(l.pos+=2)}return r.prototype.encode=function(){var i,e,n;for(e=new b1(T_e.call(this.raw.data)),i=0,n=this.glyphIDs.length;i<n;++i)e.pos=this.glyphOffsets[i];return e.data},r}(),cHe=function(r){function i(){return i.__super__.constructor.apply(this,arguments)}return O_(i,Kg),i.prototype.tag="loca",i.prototype.parse=function(e){var n,o;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?function(){var s,l;for(l=[],o=0,s=this.length;o<s;o+=2)l.push(2*e.readUInt16());return l}.call(this):function(){var s,l;for(l=[],o=0,s=this.length;o<s;o+=4)l.push(e.readUInt32());return l}.call(this)},i.prototype.indexOf=function(e){return this.offsets[e]},i.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},i.prototype.encode=function(e,n){for(var o=new Uint32Array(this.offsets.length),s=0,l=0,h=0;h<o.length;++h)if(o[h]=s,l<n.length&&n[l]==h){++l,o[h]=s;var p=this.offsets[h],m=this.offsets[h+1]-p;m>0&&(s+=m)}for(var f=new Array(4*o.length),g=0;g<o.length;++g)f[4*g+3]=255&o[g],f[4*g+2]=(65280&o[g])>>8,f[4*g+1]=(16711680&o[g])>>16,f[4*g]=(4278190080&o[g])>>24;return f},i}(),dHe=function(){function r(i){this.font=i,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var i,e,n,o,s;for(e in o=this.font.cmap.tables[0].codeMap,i={},s=this.subset)n=s[e],i[e]=o[n];return i},r.prototype.glyphsFor=function(i){var e,n,o,s,l,h,p;for(o={},l=0,h=i.length;l<h;l++)o[s=i[l]]=this.font.glyf.glyphFor(s);for(s in e=[],o)(n=o[s])!=null&&n.compound&&e.push.apply(e,n.glyphIDs);if(e.length>0)for(s in p=this.glyphsFor(e))n=p[s],o[s]=n;return o},r.prototype.encode=function(i,e){var n,o,s,l,h,p,m,f,g,y,_,w,A,k,R;for(o in n=I_e.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(i),_={0:0},R=n.charMap)_[(p=R[o]).old]=p.new;for(w in y=n.maxGlyphID,l)w in _||(_[w]=y++);return f=function($){var H,oe;for(H in oe={},$)oe[$[H]]=H;return oe}(_),g=Object.keys(f).sort(function($,H){return $-H}),A=function(){var $,H,oe;for(oe=[],$=0,H=g.length;$<H;$++)h=g[$],oe.push(f[h]);return oe}(),s=this.font.glyf.encode(l,A,_),m=this.font.loca.encode(s.offsets,A),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:m,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},r}();tr.API.PDFObject=function(){var r;function i(){}return r=function(e,n){return(Array(n+1).join("0")+e).slice(-n)},i.convert=function(e){var n,o,s,l;if(Array.isArray(e))return"["+function(){var h,p,m;for(m=[],h=0,p=e.length;h<p;h++)n=e[h],m.push(i.convert(n));return m}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e?.isString)return"("+e+")";if(e instanceof Date)return"(D:"+r(e.getUTCFullYear(),4)+r(e.getUTCMonth(),2)+r(e.getUTCDate(),2)+r(e.getUTCHours(),2)+r(e.getUTCMinutes(),2)+r(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(o in s=["<<"],e)l=e[o],s.push("/"+o+" "+i.convert(l));return s.push(">>"),s.join(`
`)}return""+e},i}();function O_e(r,i,e,n,o){n=n||{};var s=1.15,l=o.internal.scaleFactor,h=o.internal.getFontSize()/l,p=o.getLineHeightFactor?o.getLineHeightFactor():s,m=h*p,f=/\r\n|\r|\n/g,g="",y=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(g=typeof r=="string"?r.split(f):r,y=g.length||1),e+=h*(2-s),n.valign==="middle"?e-=y/2*m:n.valign==="bottom"&&(e-=y*m),n.halign==="center"||n.halign==="right"){var _=h;if(n.halign==="center"&&(_*=.5),g&&y>=1){for(var w=0;w<g.length;w++)o.text(g[w],i-o.getStringUnitWidth(g[w])*_,e),e+=m;return o}i-=o.getStringUnitWidth(r)*_}return n.halign==="justify"?o.text(r,i,e,{maxWidth:n.maxWidth||100,align:"justify"}):o.text(r,i,e),o}var A_e={},KE=function(){function r(i){this.jsPDFDocument=i,this.userStyles={textColor:i.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:i.internal.getFontSize(),fontStyle:i.internal.getFont().fontStyle,font:i.internal.getFont().fontName,lineWidth:i.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:i.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return r.setDefaults=function(i,e){e===void 0&&(e=null),e?e.__autoTableDocumentDefaults=i:A_e=i},r.unifyColor=function(i){return Array.isArray(i)?i:typeof i=="number"?[i,i,i]:typeof i=="string"?[i]:null},r.prototype.applyStyles=function(i,e){var n,o,s;e===void 0&&(e=!1),i.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(i.fontStyle);var l=this.jsPDFDocument.internal.getFont(),h=l.fontStyle,p=l.fontName;if(i.font&&(p=i.font),i.fontStyle){h=i.fontStyle;var m=this.getFontList()[p];m&&m.indexOf(h)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(m[0]),h=m[0])}if(this.jsPDFDocument.setFont(p,h),i.fontSize&&this.jsPDFDocument.setFontSize(i.fontSize),!e){var f=r.unifyColor(i.fillColor);f&&(n=this.jsPDFDocument).setFillColor.apply(n,f),f=r.unifyColor(i.textColor),f&&(o=this.jsPDFDocument).setTextColor.apply(o,f),f=r.unifyColor(i.lineColor),f&&(s=this.jsPDFDocument).setDrawColor.apply(s,f),typeof i.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(i.lineWidth)}},r.prototype.splitTextToSize=function(i,e,n){return this.jsPDFDocument.splitTextToSize(i,e,n)},r.prototype.rect=function(i,e,n,o,s){return this.jsPDFDocument.rect(i,e,n,o,s)},r.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},r.prototype.getTextWidth=function(i){return this.jsPDFDocument.getTextWidth(i)},r.prototype.getDocument=function(){return this.jsPDFDocument},r.prototype.setPage=function(i){this.jsPDFDocument.setPage(i)},r.prototype.addPage=function(){return this.jsPDFDocument.addPage()},r.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},r.prototype.getGlobalOptions=function(){return A_e||{}},r.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},r.prototype.pageSize=function(){var i=this.jsPDFDocument.internal.pageSize;return i.width==null&&(i={width:i.getWidth(),height:i.getHeight()}),i},r.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},r.prototype.getLineHeightFactor=function(){var i=this.jsPDFDocument;return i.getLineHeightFactor?i.getLineHeightFactor():1.15},r.prototype.getLineHeight=function(i){return i/this.scaleFactor()*this.getLineHeightFactor()},r.prototype.pageNumber=function(){var i=this.jsPDFDocument.internal.getCurrentPageInfo();return i?i.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},r}(),KK=function(r,i){return KK=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},KK(r,i)};function P_e(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");KK(r,i);function e(){this.constructor=r}r.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}var R_e=function(r){P_e(i,r);function i(e){var n=r.call(this)||this;return n._element=e,n}return i}(Array);function uHe(r){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/r,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function hHe(r){var i={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return i[r]}function t6(r,i,e){e.applyStyles(i,!0);var n=Array.isArray(r)?r:[r],o=n.map(function(s){return e.getTextWidth(s)}).reduce(function(s,l){return Math.max(s,l)},0);return o}function F_e(r,i,e,n){var o=i.settings.tableLineWidth,s=i.settings.tableLineColor;r.applyStyles({lineWidth:o,lineColor:s});var l=L_e(o,!1);l&&r.rect(e.x,e.y,i.getWidth(r.pageSize().width),n.y-e.y,l)}function L_e(r,i){var e=r>0,n=i||i===0;return e&&n?"DF":e?"S":n?"F":null}function n6(r,i){var e,n,o,s;if(r=r||i,Array.isArray(r)){if(r.length>=4)return{top:r[0],right:r[1],bottom:r[2],left:r[3]};if(r.length===3)return{top:r[0],right:r[1],bottom:r[2],left:r[1]};if(r.length===2)return{top:r[0],right:r[1],bottom:r[0],left:r[1]};r.length===1?r=r[0]:r=i}return typeof r=="object"?(typeof r.vertical=="number"&&(r.top=r.vertical,r.bottom=r.vertical),typeof r.horizontal=="number"&&(r.right=r.horizontal,r.left=r.horizontal),{left:(e=r.left)!==null&&e!==void 0?e:i,top:(n=r.top)!==null&&n!==void 0?n:i,right:(o=r.right)!==null&&o!==void 0?o:i,bottom:(s=r.bottom)!==null&&s!==void 0?s:i}):(typeof r!="number"&&(r=i),{top:r,right:r,bottom:r,left:r})}function N_e(r,i){var e=n6(i.settings.margin,0);return r.pageSize().width-(e.left+e.right)}function pHe(r,i,e,n,o){var s={},l=1.3333333333333333,h=zK(i,function(H){return o.getComputedStyle(H).backgroundColor});h!=null&&(s.fillColor=h);var p=zK(i,function(H){return o.getComputedStyle(H).color});p!=null&&(s.textColor=p);var m=fHe(n,e);m&&(s.cellPadding=m);var f="borderTopColor",g=l*e,y=n.borderTopWidth;if(n.borderBottomWidth===y&&n.borderRightWidth===y&&n.borderLeftWidth===y){var _=(parseFloat(y)||0)/g;_&&(s.lineWidth=_)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/g,right:(parseFloat(n.borderRightWidth)||0)/g,bottom:(parseFloat(n.borderBottomWidth)||0)/g,left:(parseFloat(n.borderLeftWidth)||0)/g},s.lineWidth.top||(s.lineWidth.right?f="borderRightColor":s.lineWidth.bottom?f="borderBottomColor":s.lineWidth.left&&(f="borderLeftColor"));var w=zK(i,function(H){return o.getComputedStyle(H)[f]});w!=null&&(s.lineColor=w);var A=["left","right","center","justify"];A.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),A=["middle","bottom","top"],A.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var k=parseInt(n.fontSize||"");isNaN(k)||(s.fontSize=k/l);var R=mHe(n);R&&(s.fontStyle=R);var $=(n.fontFamily||"").toLowerCase();return r.indexOf($)!==-1&&(s.font=$),s}function mHe(r){var i="";return(r.fontWeight==="bold"||r.fontWeight==="bolder"||parseInt(r.fontWeight)>=700)&&(i="bold"),(r.fontStyle==="italic"||r.fontStyle==="oblique")&&(i+="italic"),i}function zK(r,i){var e=B_e(r,i);if(!e)return null;var n=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var o=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(o[0])||isNaN(o[1])||isNaN(o[2])?null:o}function B_e(r,i){var e=i(r);return e==="rgba(0, 0, 0, 0)"||e==="transparent"||e==="initial"||e==="inherit"?r.parentElement==null?null:B_e(r.parentElement,i):e}function fHe(r,i){var e=[r.paddingTop,r.paddingRight,r.paddingBottom,r.paddingLeft],n=96/(72/i),o=(parseInt(r.lineHeight)-parseInt(r.fontSize))/i/2,s=e.map(function(h){return parseInt(h||"0")/n}),l=n6(s,0);return o>l.top&&(l.top=o),o>l.bottom&&(l.bottom=o),l}function j_e(r,i,e,n,o){var s,l;n===void 0&&(n=!1),o===void 0&&(o=!1);var h;typeof i=="string"?h=e.document.querySelector(i):h=i;var p=Object.keys(r.getFontList()),m=r.scaleFactor(),f=[],g=[],y=[];if(!h)return console.error("Html table could not be found with input: ",i),{head:f,body:g,foot:y};for(var _=0;_<h.rows.length;_++){var w=h.rows[_],A=(l=(s=w?.parentElement)===null||s===void 0?void 0:s.tagName)===null||l===void 0?void 0:l.toLowerCase(),k=gHe(p,m,e,w,n,o);k&&(A==="thead"?f.push(k):A==="tfoot"?y.push(k):g.push(k))}return{head:f,body:g,foot:y}}function gHe(r,i,e,n,o,s){for(var l=new R_e(n),h=0;h<n.cells.length;h++){var p=n.cells[h],m=e.getComputedStyle(p);if(o||m.display!=="none"){var f=void 0;s&&(f=pHe(r,p,i,m,e)),l.push({rowSpan:p.rowSpan,colSpan:p.colSpan,styles:f,_element:p,content:_He(p)})}}var g=e.getComputedStyle(n);if(l.length>0&&(o||g.display!=="none"))return l}function _He(r){var i=r.cloneNode(!0);return i.innerHTML=i.innerHTML.replace(/\n/g,"").replace(/ +/g," "),i.innerHTML=i.innerHTML.split(/<br.*?>/).map(function(e){return e.trim()}).join(`
`),i.innerText||i.textContent||""}function yHe(r,i,e){for(var n=0,o=[r,i,e];n<o.length;n++){var s=o[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Ev(r,i,e,n,o){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(r),l=1;l<arguments.length;l++){var h=arguments[l];if(h!=null)for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(s[p]=h[p])}return s}function V_e(r,i){var e=new KE(r),n=e.getDocumentOptions(),o=e.getGlobalOptions();yHe(o,n,i);var s=Ev({},o,n,i),l;typeof window<"u"&&(l=window);var h=vHe(o,n,i),p=bHe(o,n,i),m=wHe(e,s),f=xHe(e,s,l);return{id:i.tableId,content:f,hooks:p,styles:h,settings:m}}function vHe(r,i,e){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},o=function(p){if(p==="columnStyles"){var m=r[p],f=i[p],g=e[p];n.columnStyles=Ev({},m,f,g)}else{var y=[r,i,e],_=y.map(function(w){return w[p]||{}});n[p]=Ev({},_[0],_[1],_[2])}},s=0,l=Object.keys(n);s<l.length;s++){var h=l[s];o(h)}return n}function bHe(r,i,e){for(var n=[r,i,e],o={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,l=n;s<l.length;s++){var h=l[s];h.didParseCell&&o.didParseCell.push(h.didParseCell),h.willDrawCell&&o.willDrawCell.push(h.willDrawCell),h.didDrawCell&&o.didDrawCell.push(h.didDrawCell),h.willDrawPage&&o.willDrawPage.push(h.willDrawPage),h.didDrawPage&&o.didDrawPage.push(h.didDrawPage)}return o}function wHe(r,i){var e,n,o,s,l,h,p,m,f,g,y,_,w=n6(i.margin,40/r.scaleFactor()),A=(e=CHe(r,i.startY))!==null&&e!==void 0?e:w.top,k;i.showFoot===!0?k="everyPage":i.showFoot===!1?k="never":k=(n=i.showFoot)!==null&&n!==void 0?n:"everyPage";var R;i.showHead===!0?R="everyPage":i.showHead===!1?R="never":R=(o=i.showHead)!==null&&o!==void 0?o:"everyPage";var $=(s=i.useCss)!==null&&s!==void 0?s:!1,H=i.theme||($?"plain":"striped"),oe=!!i.horizontalPageBreak,se=(l=i.horizontalPageBreakRepeat)!==null&&l!==void 0?l:null;return{includeHiddenHtml:(h=i.includeHiddenHtml)!==null&&h!==void 0?h:!1,useCss:$,theme:H,startY:A,margin:w,pageBreak:(p=i.pageBreak)!==null&&p!==void 0?p:"auto",rowPageBreak:(m=i.rowPageBreak)!==null&&m!==void 0?m:"auto",tableWidth:(f=i.tableWidth)!==null&&f!==void 0?f:"auto",showHead:R,showFoot:k,tableLineWidth:(g=i.tableLineWidth)!==null&&g!==void 0?g:0,tableLineColor:(y=i.tableLineColor)!==null&&y!==void 0?y:200,horizontalPageBreak:oe,horizontalPageBreakRepeat:se,horizontalPageBreakBehaviour:(_=i.horizontalPageBreakBehaviour)!==null&&_!==void 0?_:"afterAllRows"}}function CHe(r,i){var e=r.getLastAutoTable(),n=r.scaleFactor(),o=r.pageNumber(),s=!1;if(e&&e.startPageNumber){var l=e.startPageNumber+e.pageNumber-1;s=l===o}return typeof i=="number"?i:(i==null||i===!1)&&s&&e?.finalY!=null?e.finalY+20/n:null}function xHe(r,i,e){var n=i.head||[],o=i.body||[],s=i.foot||[];if(i.html){var l=i.includeHiddenHtml;if(e){var h=j_e(r,i.html,e,l,i.useCss)||{};n=h.head||n,o=h.body||n,s=h.foot||n}else console.error("Cannot parse html in non browser environment")}var p=i.columns||SHe(n,o,s);return{columns:p,head:n,body:o,foot:s}}function SHe(r,i,e){var n=r[0]||i[0]||e[0]||[],o=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var l=1,h;Array.isArray(n)?h=n[parseInt(s)]:h=n[s],typeof h=="object"&&!Array.isArray(h)&&(l=h?.colSpan||1);for(var p=0;p<l;p++){var m=void 0;Array.isArray(n)?m=o.length:m=s+(p>0?"_".concat(p):"");var f={dataKey:m};o.push(f)}}),o}var ZK=function(){function r(i,e,n){this.table=e,this.pageNumber=e.pageNumber,this.settings=e.settings,this.cursor=n,this.doc=i.getDocument()}return r}(),IHe=function(r){P_e(i,r);function i(e,n,o,s,l,h){var p=r.call(this,e,n,h)||this;return p.cell=o,p.row=s,p.column=l,p.section=s.section,p}return i}(ZK),THe=function(){function r(i,e){this.pageNumber=1,this.id=i.id,this.settings=i.settings,this.styles=i.styles,this.hooks=i.hooks,this.columns=e.columns,this.head=e.head,this.body=e.body,this.foot=e.foot}return r.prototype.getHeadHeight=function(i){return this.head.reduce(function(e,n){return e+n.getMaxCellHeight(i)},0)},r.prototype.getFootHeight=function(i){return this.foot.reduce(function(e,n){return e+n.getMaxCellHeight(i)},0)},r.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},r.prototype.callCellHooks=function(i,e,n,o,s,l){for(var h=0,p=e;h<p.length;h++){var m=p[h],f=new IHe(i,this,n,o,s,l),g=m(f)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],g)return!1}return!0},r.prototype.callEndPageHooks=function(i,e){i.applyStyles(i.userStyles);for(var n=0,o=this.hooks.didDrawPage;n<o.length;n++){var s=o[n];s(new ZK(i,this,e))}},r.prototype.callWillDrawPageHooks=function(i,e){for(var n=0,o=this.hooks.willDrawPage;n<o.length;n++){var s=o[n];s(new ZK(i,this,e))}},r.prototype.getWidth=function(i){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var e=this.columns.reduce(function(o,s){return o+s.wrappedWidth},0);return e}else{var n=this.settings.margin;return i-n.left-n.right}},r}(),$_e=function(){function r(i,e,n,o,s){s===void 0&&(s=!1),this.height=0,this.raw=i,i instanceof R_e&&(this.raw=i._element,this.element=i._element),this.index=e,this.section=n,this.cells=o,this.spansMultiplePages=s}return r.prototype.getMaxCellHeight=function(i){var e=this;return i.reduce(function(n,o){var s;return Math.max(n,((s=e.cells[o.index])===null||s===void 0?void 0:s.height)||0)},0)},r.prototype.hasRowSpan=function(i){var e=this;return i.filter(function(n){var o=e.cells[n.index];return o?o.rowSpan>1:!1}).length>0},r.prototype.canEntireRowFit=function(i,e){return this.getMaxCellHeight(e)<=i},r.prototype.getMinimumRowHeight=function(i,e){var n=this;return i.reduce(function(o,s){var l=n.cells[s.index];if(!l)return 0;var h=e.getLineHeight(l.styles.fontSize),p=l.padding("vertical"),m=p+h;return m>o?m:o},0)},r}(),U_e=function(){function r(i,e,n){var o;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=e,this.section=n,this.raw=i;var s=i;i!=null&&typeof i=="object"&&!Array.isArray(i)?(this.rowSpan=i.rowSpan||1,this.colSpan=i.colSpan||1,s=(o=i.content)!==null&&o!==void 0?o:i,i._element&&(this.raw=i._element)):(this.rowSpan=1,this.colSpan=1);var l=s!=null?""+s:"",h=/\r\n|\r|\n/g;this.text=l.split(h)}return r.prototype.getTextPos=function(){var i;if(this.styles.valign==="top")i=this.y+this.padding("top");else if(this.styles.valign==="bottom")i=this.y+this.height-this.padding("bottom");else{var e=this.height-this.padding("vertical");i=this.y+e/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var o=this.width-this.padding("horizontal");n=this.x+o/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:i}},r.prototype.getContentHeight=function(i,e){e===void 0&&(e=1.15);var n=Array.isArray(this.text)?this.text.length:1,o=this.styles.fontSize/i*e,s=n*o+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},r.prototype.padding=function(i){var e=n6(this.styles.cellPadding,0);return i==="vertical"?e.top+e.bottom:i==="horizontal"?e.left+e.right:e[i]},r}(),AHe=function(){function r(i,e,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=i,this.raw=e,this.index=n}return r.prototype.getMaxCustomCellWidth=function(i){for(var e=0,n=0,o=i.allRows();n<o.length;n++){var s=o[n],l=s.cells[this.index];l&&typeof l.styles.cellWidth=="number"&&(e=Math.max(e,l.styles.cellWidth))}return e},r}();function EHe(r,i){MHe(r,i);var e=[],n=0;i.columns.forEach(function(s){var l=s.getMaxCustomCellWidth(i);l?s.width=l:(s.width=s.wrappedWidth,e.push(s)),n+=s.width});var o=i.getWidth(r.pageSize().width)-n;o&&(o=QK(e,o,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),o&&(o=QK(e,o,function(s){return s.minWidth})),o=Math.abs(o),!i.settings.horizontalPageBreak&&o>.1/r.scaleFactor()&&(o=o<1?o:Math.round(o),console.warn("Of the table content, ".concat(o," units width could not fit page"))),kHe(i),OHe(i,r),DHe(i)}function MHe(r,i){var e=r.scaleFactor(),n=i.settings.horizontalPageBreak,o=N_e(r,i);i.allRows().forEach(function(s){for(var l=0,h=i.columns;l<h.length;l++){var p=h[l],m=s.cells[p.index];if(m){var f=i.hooks.didParseCell;i.callCellHooks(r,f,m,s,p,null);var g=m.padding("horizontal");m.contentWidth=t6(m.text,m.styles,r)+g;var y=t6(m.text.join(" ").split(/[^\S\u00A0]+/),m.styles,r);if(m.minReadableWidth=y+m.padding("horizontal"),typeof m.styles.cellWidth=="number")m.minWidth=m.styles.cellWidth,m.wrappedWidth=m.styles.cellWidth;else if(m.styles.cellWidth==="wrap"||n===!0)m.contentWidth>o?(m.minWidth=o,m.wrappedWidth=o):(m.minWidth=m.contentWidth,m.wrappedWidth=m.contentWidth);else{var _=10/e;m.minWidth=m.styles.minCellWidth||_,m.wrappedWidth=m.contentWidth,m.minWidth>m.wrappedWidth&&(m.wrappedWidth=m.minWidth)}}}}),i.allRows().forEach(function(s){for(var l=0,h=i.columns;l<h.length;l++){var p=h[l],m=s.cells[p.index];if(m&&m.colSpan===1)p.wrappedWidth=Math.max(p.wrappedWidth,m.wrappedWidth),p.minWidth=Math.max(p.minWidth,m.minWidth),p.minReadableWidth=Math.max(p.minReadableWidth,m.minReadableWidth);else{var f=i.styles.columnStyles[p.dataKey]||i.styles.columnStyles[p.index]||{},g=f.cellWidth||f.minCellWidth;g&&typeof g=="number"&&(p.minWidth=g,p.wrappedWidth=g)}m&&(m.colSpan>1&&!p.minWidth&&(p.minWidth=m.minWidth),m.colSpan>1&&!p.wrappedWidth&&(p.wrappedWidth=m.minWidth))}})}function QK(r,i,e){for(var n=i,o=r.reduce(function(_,w){return _+w.wrappedWidth},0),s=0;s<r.length;s++){var l=r[s],h=l.wrappedWidth/o,p=n*h,m=l.width+p,f=e(l),g=m<f?f:m;i-=g-l.width,l.width=g}if(i=Math.round(i*1e10)/1e10,i){var y=r.filter(function(_){return i<0?_.width>e(_):!0});y.length&&(i=QK(y,i,e))}return i}function DHe(r){for(var i={},e=1,n=r.allRows(),o=0;o<n.length;o++)for(var s=n[o],l=0,h=r.columns;l<h.length;l++){var p=h[l],m=i[p.index];if(e>1)e--,delete s.cells[p.index];else if(m)m.cell.height+=s.height,e=m.cell.colSpan,delete s.cells[p.index],m.left--,m.left<=1&&delete i[p.index];else{var f=s.cells[p.index];if(!f)continue;if(f.height=s.height,f.rowSpan>1){var g=n.length-o,y=f.rowSpan>g?g:f.rowSpan;i[p.index]={cell:f,left:y,row:s}}}}}function kHe(r){for(var i=r.allRows(),e=0;e<i.length;e++)for(var n=i[e],o=null,s=0,l=0,h=0;h<r.columns.length;h++){var p=r.columns[h];if(l-=1,l>1&&r.columns[h+1])s+=p.width,delete n.cells[p.index];else if(o){var m=o;delete n.cells[p.index],o=null,m.width=p.width+s}else{var m=n.cells[p.index];if(!m)continue;if(l=m.colSpan,s=0,m.colSpan>1){o=m,s+=p.width;continue}m.width=p.width+s}}}function OHe(r,i){for(var e={count:0,height:0},n=0,o=r.allRows();n<o.length;n++){for(var s=o[n],l=0,h=r.columns;l<h.length;l++){var p=h[l],m=s.cells[p.index];if(m){i.applyStyles(m.styles,!0);var f=m.width-m.padding("horizontal");if(m.styles.overflow==="linebreak")m.text=i.splitTextToSize(m.text,f+1/i.scaleFactor(),{fontSize:m.styles.fontSize});else if(m.styles.overflow==="ellipsize")m.text=E_e(m.text,f,m.styles,i,"...");else if(m.styles.overflow==="hidden")m.text=E_e(m.text,f,m.styles,i,"");else if(typeof m.styles.overflow=="function"){var g=m.styles.overflow(m.text,f);typeof g=="string"?m.text=[g]:m.text=g}m.contentHeight=m.getContentHeight(i.scaleFactor(),i.getLineHeightFactor());var y=m.contentHeight/m.rowSpan;m.rowSpan>1&&e.count*e.height<y*m.rowSpan?e={height:y,count:m.rowSpan}:e&&e.count>0&&e.height>y&&(y=e.height),y>s.height&&(s.height=y)}}e.count--}}function E_e(r,i,e,n,o){return r.map(function(s){return PHe(s,i,e,n,o)})}function PHe(r,i,e,n,o){var s=1e4*n.scaleFactor();if(i=Math.ceil(i*s)/s,i>=t6(r,e,n))return r;for(;i<t6(r+o,e,n)&&!(r.length<=1);)r=r.substring(0,r.length-1);return r.trim()+o}function z_e(r,i){var e=new KE(r),n=RHe(i,e.scaleFactor()),o=new THe(i,n);return EHe(e,o),e.applyStyles(e.userStyles),o}function RHe(r,i){var e=r.content,n=LHe(e.columns);if(e.head.length===0){var o=M_e(n,"head");o&&e.head.push(o)}if(e.foot.length===0){var o=M_e(n,"foot");o&&e.foot.push(o)}var s=r.settings.theme,l=r.styles;return{columns:n,head:GK("head",e.head,n,l,s,i),body:GK("body",e.body,n,l,s,i),foot:GK("foot",e.foot,n,l,s,i)}}function GK(r,i,e,n,o,s){var l={},h=i.map(function(p,m){for(var f=0,g={},y=0,_=0,w=0,A=e;w<A.length;w++){var k=A[w];if(l[k.index]==null||l[k.index].left===0)if(_===0){var R=void 0;Array.isArray(p)?R=p[k.index-y-f]:R=p[k.dataKey];var $={};typeof R=="object"&&!Array.isArray(R)&&($=R?.styles||{});var H=NHe(r,k,m,o,n,s,$),oe=new U_e(R,H,r);g[k.dataKey]=oe,g[k.index]=oe,_=oe.colSpan-1,l[k.index]={left:oe.rowSpan-1,times:_}}else _--,y++;else l[k.index].left--,_=l[k.index].times,f++}return new $_e(p,m,r,g)});return h}function M_e(r,i){var e={};return r.forEach(function(n){if(n.raw!=null){var o=FHe(i,n.raw);o!=null&&(e[n.dataKey]=o)}}),Object.keys(e).length>0?e:null}function FHe(r,i){if(r==="head"){if(typeof i=="object")return i.header||null;if(typeof i=="string"||typeof i=="number")return i}else if(r==="foot"&&typeof i=="object")return i.footer;return null}function LHe(r){return r.map(function(i,e){var n,o;return typeof i=="object"?o=(n=i.dataKey)!==null&&n!==void 0?n:e:o=e,new AHe(o,i,e)})}function NHe(r,i,e,n,o,s,l){var h=hHe(n),p;r==="head"?p=o.headStyles:r==="body"?p=o.bodyStyles:r==="foot"&&(p=o.footStyles);var m=Ev({},h.table,h[r],o.styles,p),f=o.columnStyles[i.dataKey]||o.columnStyles[i.index]||{},g=r==="body"?f:{},y=r==="body"&&e%2===0?Ev({},h.alternateRow,o.alternateRowStyles):{},_=uHe(s),w=Ev({},_,m,y,g);return Ev(w,l)}function BHe(r,i,e){var n;e===void 0&&(e={});var o=N_e(r,i),s=new Map,l=[],h=[],p=[];Array.isArray(i.settings.horizontalPageBreakRepeat)?p=i.settings.horizontalPageBreakRepeat:(typeof i.settings.horizontalPageBreakRepeat=="string"||typeof i.settings.horizontalPageBreakRepeat=="number")&&(p=[i.settings.horizontalPageBreakRepeat]),p.forEach(function(y){var _=i.columns.find(function(w){return w.dataKey===y||w.index===y});_&&!s.has(_.index)&&(s.set(_.index,!0),l.push(_.index),h.push(i.columns[_.index]),o-=_.wrappedWidth)});for(var m=!0,f=(n=e?.start)!==null&&n!==void 0?n:0;f<i.columns.length;){if(s.has(f)){f++;continue}var g=i.columns[f].wrappedWidth;if(m||o>=g)m=!1,l.push(f),h.push(i.columns[f]),o-=g;else break;f++}return{colIndexes:l,columns:h,lastIndex:f-1}}function jHe(r,i){for(var e=[],n=0;n<i.columns.length;n++){var o=BHe(r,i,{start:n});o.columns.length&&(e.push(o),n=o.lastIndex)}return e}function G_e(r,i){var e=i.settings,n=e.startY,o=e.margin,s={x:o.left,y:n},l=i.getHeadHeight(i.columns)+i.getFootHeight(i.columns),h=n+o.bottom+l;if(e.pageBreak==="avoid"){var p=i.body,m=p.reduce(function(y,_){return y+_.height},0);h+=m}var f=new KE(r);(e.pageBreak==="always"||e.startY!=null&&h>f.pageSize().height)&&(W_e(f),s.y=o.top),i.callWillDrawPageHooks(f,s);var g=Ev({},s);i.startPageNumber=f.pageNumber(),e.horizontalPageBreak?VHe(f,i,g,s):(f.applyStyles(f.userStyles),(e.showHead==="firstPage"||e.showHead==="everyPage")&&i.head.forEach(function(y){return Mv(f,i,y,s,i.columns)}),f.applyStyles(f.userStyles),i.body.forEach(function(y,_){var w=_===i.body.length-1;i6(f,i,y,w,g,s,i.columns)}),f.applyStyles(f.userStyles),(e.showFoot==="lastPage"||e.showFoot==="everyPage")&&i.foot.forEach(function(y){return Mv(f,i,y,s,i.columns)})),F_e(f,i,g,s),i.callEndPageHooks(f,s),i.finalY=s.y,r.lastAutoTable=i,f.applyStyles(f.userStyles)}function VHe(r,i,e,n){var o=jHe(r,i),s=i.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")o.forEach(function(m,f){r.applyStyles(r.userStyles),f>0?NP(r,i,e,n,m.columns,!0):D_e(r,i,n,m.columns),$He(r,i,e,n,m.columns),HK(r,i,n,m.columns)});else for(var l=-1,h=o[0],p=function(){var m=l;if(h){r.applyStyles(r.userStyles);var f=h.columns;l>=0?NP(r,i,e,n,f,!0):D_e(r,i,n,f),m=k_e(r,i,l+1,n,f),HK(r,i,n,f)}var g=m-l;o.slice(1).forEach(function(y){r.applyStyles(r.userStyles),NP(r,i,e,n,y.columns,!0),k_e(r,i,l+1,n,y.columns,g),HK(r,i,n,y.columns)}),l=m};l<i.body.length-1;)p()}function D_e(r,i,e,n){var o=i.settings;r.applyStyles(r.userStyles),(o.showHead==="firstPage"||o.showHead==="everyPage")&&i.head.forEach(function(s){return Mv(r,i,s,e,n)})}function $He(r,i,e,n,o){r.applyStyles(r.userStyles),i.body.forEach(function(s,l){var h=l===i.body.length-1;i6(r,i,s,h,e,n,o)})}function k_e(r,i,e,n,o,s){r.applyStyles(r.userStyles),s=s??i.body.length;var l=Math.min(e+s,i.body.length),h=-1;return i.body.slice(e,l).forEach(function(p,m){var f=e+m===i.body.length-1,g=H_e(r,i,f,n);p.canEntireRowFit(g,o)&&(Mv(r,i,p,n,o),h=e+m)}),h}function HK(r,i,e,n){var o=i.settings;r.applyStyles(r.userStyles),(o.showFoot==="lastPage"||o.showFoot==="everyPage")&&i.foot.forEach(function(s){return Mv(r,i,s,e,n)})}function UHe(r,i,e){var n=e.getLineHeight(r.styles.fontSize),o=r.padding("vertical"),s=Math.floor((i-o)/n);return Math.max(0,s)}function zHe(r,i,e,n){var o={};r.spansMultiplePages=!0,r.height=0;for(var s=0,l=0,h=e.columns;l<h.length;l++){var p=h[l],m=r.cells[p.index];if(m){Array.isArray(m.text)||(m.text=[m.text]);var f=new U_e(m.raw,m.styles,m.section);f=Ev(f,m),f.text=[];var g=UHe(m,i,n);m.text.length>g&&(f.text=m.text.splice(g,m.text.length));var y=n.scaleFactor(),_=n.getLineHeightFactor();m.contentHeight=m.getContentHeight(y,_),m.contentHeight>=i&&(m.contentHeight=i,f.styles.minCellHeight-=i),m.contentHeight>r.height&&(r.height=m.contentHeight),f.contentHeight=f.getContentHeight(y,_),f.contentHeight>s&&(s=f.contentHeight),o[p.index]=f}}var w=new $_e(r.raw,-1,r.section,o,!0);w.height=s;for(var A=0,k=e.columns;A<k.length;A++){var p=k[A],f=w.cells[p.index];f&&(f.height=w.height);var m=r.cells[p.index];m&&(m.height=r.height)}return w}function GHe(r,i,e,n){var o=r.pageSize().height,s=n.settings.margin,l=s.top+s.bottom,h=o-l;i.section==="body"&&(h-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var p=i.getMinimumRowHeight(n.columns,r),m=p<e;if(p>h)return console.error("Will not be able to print row ".concat(i.index," correctly since it's minimum height is larger than page height")),!0;if(!m)return!1;var f=i.hasRowSpan(n.columns),g=i.getMaxCellHeight(n.columns)>h;return g?(f&&console.error("The content of row ".concat(i.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(f||n.settings.rowPageBreak==="avoid")}function i6(r,i,e,n,o,s,l){var h=H_e(r,i,n,s);if(e.canEntireRowFit(h,l))Mv(r,i,e,s,l);else if(GHe(r,e,h,i)){var p=zHe(e,h,i,r);Mv(r,i,e,s,l),NP(r,i,o,s,l),i6(r,i,p,n,o,s,l)}else NP(r,i,o,s,l),i6(r,i,e,n,o,s,l)}function Mv(r,i,e,n,o){n.x=i.settings.margin.left;for(var s=0,l=o;s<l.length;s++){var h=l[s],p=e.cells[h.index];if(!p){n.x+=h.width;continue}r.applyStyles(p.styles),p.x=n.x,p.y=n.y;var m=i.callCellHooks(r,i.hooks.willDrawCell,p,e,h,n);if(m===!1){n.x+=h.width;continue}HHe(r,p,n);var f=p.getTextPos();O_e(p.text,f.x,f.y,{halign:p.styles.halign,valign:p.styles.valign,maxWidth:Math.ceil(p.width-p.padding("left")-p.padding("right"))},r.getDocument()),i.callCellHooks(r,i.hooks.didDrawCell,p,e,h,n),n.x+=h.width}n.y+=e.height}function HHe(r,i,e){var n=i.styles;if(r.getDocument().setFillColor(r.getDocument().getFillColor()),typeof n.lineWidth=="number"){var o=L_e(n.lineWidth,n.fillColor);o&&r.rect(i.x,e.y,i.width,i.height,o)}else typeof n.lineWidth=="object"&&(n.fillColor&&r.rect(i.x,e.y,i.width,i.height,"F"),WHe(r,i,e,n.lineWidth))}function WHe(r,i,e,n){var o,s,l,h;n.top&&(o=e.x,s=e.y,l=e.x+i.width,h=e.y,n.right&&(l+=.5*n.right),n.left&&(o-=.5*n.left),p(n.top,o,s,l,h)),n.bottom&&(o=e.x,s=e.y+i.height,l=e.x+i.width,h=e.y+i.height,n.right&&(l+=.5*n.right),n.left&&(o-=.5*n.left),p(n.bottom,o,s,l,h)),n.left&&(o=e.x,s=e.y,l=e.x,h=e.y+i.height,n.top&&(s-=.5*n.top),n.bottom&&(h+=.5*n.bottom),p(n.left,o,s,l,h)),n.right&&(o=e.x+i.width,s=e.y,l=e.x+i.width,h=e.y+i.height,n.top&&(s-=.5*n.top),n.bottom&&(h+=.5*n.bottom),p(n.right,o,s,l,h));function p(m,f,g,y,_){r.getDocument().setLineWidth(m),r.getDocument().line(f,g,y,_,"S")}}function H_e(r,i,e,n){var o=i.settings.margin.bottom,s=i.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&e)&&(o+=i.getFootHeight(i.columns)),r.pageSize().height-n.y-o}function NP(r,i,e,n,o,s){o===void 0&&(o=[]),s===void 0&&(s=!1),r.applyStyles(r.userStyles),i.settings.showFoot==="everyPage"&&!s&&i.foot.forEach(function(h){return Mv(r,i,h,n,o)}),i.callEndPageHooks(r,n);var l=i.settings.margin;F_e(r,i,e,n),W_e(r),i.pageNumber++,n.x=l.left,n.y=l.top,e.y=l.top,i.callWillDrawPageHooks(r,n),i.settings.showHead==="everyPage"&&(i.head.forEach(function(h){return Mv(r,i,h,n,o)}),r.applyStyles(r.userStyles))}function W_e(r){var i=r.pageNumber();r.setPage(i+1);var e=r.pageNumber();return e===i?(r.addPage(),!0):!1}function qHe(r){r.API.autoTable=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var n=i[0],o=V_e(this,n),s=z_e(this,o);return G_e(this,s),this},r.API.lastAutoTable=!1,r.API.autoTableText=function(i,e,n,o){O_e(i,e,n,o,this)},r.API.autoTableSetDefaults=function(i){return KE.setDefaults(i,this),this},r.autoTableSetDefaults=function(i,e){KE.setDefaults(i,e)},r.API.autoTableHtmlToJson=function(i,e){var n;if(e===void 0&&(e=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var o=new KE(this),s=j_e(o,i,window,e,!1),l=s.head,h=s.body,p=((n=l[0])===null||n===void 0?void 0:n.map(function(m){return m.content}))||[];return{columns:p,rows:h,data:h}}}var WK;function r6(r,i){var e=V_e(r,i),n=z_e(r,e);G_e(r,n)}try{typeof window<"u"&&window&&(qK=window,YK=qK.jsPDF||((WK=qK.jspdf)===null||WK===void 0?void 0:WK.jsPDF),YK&&qHe(YK))}catch(r){console.error("Could not apply autoTable plugin",r)}var qK,YK;var nn=ld(bE(),1);var D$=ld(q_e(),1),Yne=ld(K_e(),1);var tZ=class{constructor(i){this.propagationStopped,this.defaultPrevented,this.type=i,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}};var Ls=tZ;var Zg={PROPERTYCHANGE:"propertychange"};var iZ=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}},ZE=iZ;function Z_e(r,i,e){let n,o;e=e||gh;let s=0,l=r.length,h=!1;for(;s<l;)n=s+(l-s>>1),o=+e(r[n],i),o<0?s=n+1:(l=n,h=!o);return h?s:~s}function gh(r,i){return r>i?1:r<i?-1:0}function w1(r,i,e){if(r[0]<=i)return 0;let n=r.length;if(i<=r[n-1])return n-1;if(typeof e=="function"){for(let o=1;o<n;++o){let s=r[o];if(s===i)return o;if(s<i)return e(i,r[o-1],s)>0?o-1:o}return n-1}if(e>0){for(let o=1;o<n;++o)if(r[o]<i)return o-1;return n-1}if(e<0){for(let o=1;o<n;++o)if(r[o]<=i)return o;return n-1}for(let o=1;o<n;++o){if(r[o]==i)return o;if(r[o]<i)return r[o-1]-i<i-r[o]?o-1:o}return n-1}function Q_e(r,i,e){for(;i<e;){let n=r[i];r[i]=r[e],r[e]=n,++i,--e}}function mr(r,i){let e=Array.isArray(i)?i:[i],n=e.length;for(let o=0;o<n;o++)r[r.length]=e[o]}function Kd(r,i){let e=r.length;if(e!==i.length)return!1;for(let n=0;n<e;n++)if(r[n]!==i[n])return!1;return!0}function X_e(r,i,e){let n=i||gh;return r.every(function(o,s){if(s===0)return!0;let l=n(r[s-1],o);return!(l>0||e&&l===0)})}function Iu(){return!0}function If(){return!1}function Qg(){}function o6(r){let i=!1,e,n,o;return function(){let s=Array.prototype.slice.call(arguments);return(!i||this!==o||!Kd(s,n))&&(i=!0,o=this,n=s,e=r.apply(this,arguments)),e}}function QE(r){function i(){let e;try{e=r()}catch(n){return Promise.reject(n)}return e instanceof Promise?e:Promise.resolve(e)}return i()}var nZ=class extends ZE{constructor(i){super(),this.eventTarget_=i,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(i,e){if(!i||!e)return;let n=this.listeners_||(this.listeners_={}),o=n[i]||(n[i]=[]);o.includes(e)||o.push(e)}dispatchEvent(i){let e=typeof i=="string",n=e?i:i.type,o=this.listeners_&&this.listeners_[n];if(!o)return;let s=e?new Ls(i):i;s.target||(s.target=this.eventTarget_||this);let l=this.dispatching_||(this.dispatching_={}),h=this.pendingRemovals_||(this.pendingRemovals_={});n in l||(l[n]=0,h[n]=0),++l[n];let p;for(let m=0,f=o.length;m<f;++m)if("handleEvent"in o[m]?p=o[m].handleEvent(s):p=o[m].call(this,s),p===!1||s.propagationStopped){p=!1;break}if(--l[n]===0){let m=h[n];for(delete h[n];m--;)this.removeEventListener(n,Qg);delete l[n]}return p}disposeInternal(){this.listeners_&&xf(this.listeners_)}getListeners(i){return this.listeners_&&this.listeners_[i]||void 0}hasListener(i){return this.listeners_?i?i in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(i,e){if(!this.listeners_)return;let n=this.listeners_[i];if(!n)return;let o=n.indexOf(e);o!==-1&&(this.pendingRemovals_&&i in this.pendingRemovals_?(n[o]=Qg,++this.pendingRemovals_[i]):(n.splice(o,1),n.length===0&&delete this.listeners_[i]))}},P_=nZ;var Zi={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function $r(r,i,e,n,o){if(n&&n!==r&&(e=e.bind(n)),o){let l=e;e=function(){r.removeEventListener(i,e),l.apply(this,arguments)}}let s={target:r,type:i,listener:e};return r.addEventListener(i,e),s}function XE(r,i,e,n){return $r(r,i,e,n,!0)}function Fo(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),xf(r))}var JE=class extends P_{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Zi.CHANGE)}getRevision(){return this.revision_}onInternal(i,e){if(Array.isArray(i)){let n=i.length,o=new Array(n);for(let s=0;s<n;++s)o[s]=$r(this,i[s],e);return o}return $r(this,i,e)}onceInternal(i,e){let n;if(Array.isArray(i)){let o=i.length;n=new Array(o);for(let s=0;s<o;++s)n[s]=XE(this,i[s],e)}else n=XE(this,i,e);return e.ol_key=n,n}unInternal(i,e){let n=e.ol_key;if(n)_h(n);else if(Array.isArray(i))for(let o=0,s=i.length;o<s;++o)this.removeEventListener(i[o],e);else this.removeEventListener(i,e)}};JE.prototype.on;JE.prototype.once;JE.prototype.un;function _h(r){if(Array.isArray(r))for(let i=0,e=r.length;i<e;++i)Fo(r[i]);else Fo(r)}var s6=JE;function xn(){throw new Error("Unimplemented abstract method.")}var KHe=0;function Xi(r){return r.ol_uid||(r.ol_uid=String(++KHe))}var a6=class extends Ls{constructor(i,e,n){super(i),this.key=e,this.oldValue=n}},rZ=class extends s6{constructor(i){super(),this.on,this.once,this.un,Xi(this),this.values_=null,i!==void 0&&this.setProperties(i)}get(i){let e;return this.values_&&this.values_.hasOwnProperty(i)&&(e=this.values_[i]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(i,e){let n;n=`change:${i}`,this.hasListener(n)&&this.dispatchEvent(new a6(n,i,e)),n=Zg.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new a6(n,i,e))}addChangeListener(i,e){this.addEventListener(`change:${i}`,e)}removeChangeListener(i,e){this.removeEventListener(`change:${i}`,e)}set(i,e,n){let o=this.values_||(this.values_={});if(n)o[i]=e;else{let s=o[i];o[i]=e,s!==e&&this.notify(i,s)}}setProperties(i,e){for(let n in i)this.set(n,i[n],e)}applyProperties(i){i.values_&&Object.assign(this.values_||(this.values_={}),i.values_)}unset(i,e){if(this.values_&&i in this.values_){let n=this.values_[i];delete this.values_[i],Cd(this.values_)&&(this.values_=null),e||this.notify(i,n)}}},yc=rZ;function Nn(r,i){if(!r)throw new Error(i)}var oZ=class r extends yc{constructor(i){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),i)if(typeof i.getSimplifiedGeometry=="function"){let e=i;this.setGeometry(e)}else{let e=i;this.setProperties(e)}}clone(){let i=new r(this.hasProperties()?this.getProperties():null);i.setGeometryName(this.getGeometryName());let e=this.getGeometry();e&&i.setGeometry(e.clone());let n=this.getStyle();return n&&i.setStyle(n),i}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Fo(this.geometryChangeKey_),this.geometryChangeKey_=null);let i=this.getGeometry();i&&(this.geometryChangeKey_=$r(i,Zi.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(i){this.set(this.geometryName_,i)}setStyle(i){this.style_=i,this.styleFunction_=i?ZHe(i):void 0,this.changed()}setId(i){this.id_=i,this.changed()}setGeometryName(i){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=i,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function ZHe(r){if(typeof r=="function")return r;let i;return Array.isArray(r)?i=r:(Nn(typeof r.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),i=[r]),function(){return i}}var An=oZ;var eye=new Array(6);function Fc(){return[1,0,0,1,0,0]}function sZ(r){return aZ(r,1,0,0,1,0,0)}function eM(r,i){let e=r[0],n=r[1],o=r[2],s=r[3],l=r[4],h=r[5],p=i[0],m=i[1],f=i[2],g=i[3],y=i[4],_=i[5];return r[0]=e*p+o*m,r[1]=n*p+s*m,r[2]=e*f+o*g,r[3]=n*f+s*g,r[4]=e*y+o*_+l,r[5]=n*y+s*_+h,r}function aZ(r,i,e,n,o,s,l){return r[0]=i,r[1]=e,r[2]=n,r[3]=o,r[4]=s,r[5]=l,r}function tye(r,i){return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r}function Hs(r,i){let e=i[0],n=i[1];return i[0]=r[0]*e+r[2]*n+r[4],i[1]=r[1]*e+r[3]*n+r[5],i}function tM(r,i,e){return eM(r,aZ(eye,i,0,0,e,0,0))}function iye(r,i,e){return eM(r,aZ(eye,1,0,0,1,i,e))}function vc(r,i,e,n,o,s,l,h){let p=Math.sin(s),m=Math.cos(s);return r[0]=n*m,r[1]=o*p,r[2]=-n*p,r[3]=o*m,r[4]=l*n*m-h*n*p+i,r[5]=l*o*p+h*o*m+e,r}function C1(r,i){let e=QHe(i);Nn(e!==0,"Transformation matrix cannot be inverted");let n=i[0],o=i[1],s=i[2],l=i[3],h=i[4],p=i[5];return r[0]=l/e,r[1]=-o/e,r[2]=-s/e,r[3]=n/e,r[4]=(s*p-l*h)/e,r[5]=-(n*p-o*h)/e,r}function QHe(r){return r[0]*r[3]-r[1]*r[2]}var J_e=[1e6,1e6,1e6,1e6,2,2];function iM(r){return"matrix("+r.map((e,n)=>Math.round(e*J_e[n])/J_e[n]).join(", ")+")"}function Fp(r,i,e,n,o,s){s=s||[];let l=0;for(let h=i;h<e;h+=n){let p=r[h],m=r[h+1];s[l++]=o[0]*p+o[2]*m+o[4],s[l++]=o[1]*p+o[3]*m+o[5]}return s&&s.length!=l&&(s.length=l),s}function nM(r,i,e,n,o,s,l){l=l||[];let h=Math.cos(o),p=Math.sin(o),m=s[0],f=s[1],g=0;for(let y=i;y<e;y+=n){let _=r[y]-m,w=r[y+1]-f;l[g++]=m+_*h-w*p,l[g++]=f+_*p+w*h;for(let A=y+2;A<y+n;++A)l[g++]=r[A]}return l&&l.length!=g&&(l.length=g),l}function nye(r,i,e,n,o,s,l,h){h=h||[];let p=l[0],m=l[1],f=0;for(let g=i;g<e;g+=n){let y=r[g]-p,_=r[g+1]-m;h[f++]=p+o*y,h[f++]=m+s*_;for(let w=g+2;w<g+n;++w)h[f++]=r[w]}return h&&h.length!=f&&(h.length=f),h}function rye(r,i,e,n,o,s,l){l=l||[];let h=0;for(let p=i;p<e;p+=n){l[h++]=r[p]+o,l[h++]=r[p+1]+s;for(let m=p+2;m<p+n;++m)l[h++]=r[m]}return l&&l.length!=h&&(l.length=h),l}var oye=Fc(),lZ=class extends yc{constructor(){super(),this.extent_=Fs(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=o6((i,e,n)=>{if(!n)return this.getSimplifiedGeometry(e);let o=this.clone();return o.applyTransform(n),o.getSimplifiedGeometry(e)})}simplifyTransformed(i,e){return this.simplifyTransformedInternal(this.getRevision(),i,e)}clone(){return xn()}closestPointXY(i,e,n,o){return xn()}containsXY(i,e){let n=this.getClosestPoint([i,e]);return n[0]===i&&n[1]===e}getClosestPoint(i,e){return e=e||[NaN,NaN],this.closestPointXY(i[0],i[1],e,1/0),e}intersectsCoordinate(i){return this.containsXY(i[0],i[1])}computeExtent(i){return xn()}getExtent(i){if(this.extentRevision_!=this.getRevision()){let e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&xv(e),this.extentRevision_=this.getRevision()}return T0e(this.extent_,i)}rotate(i,e){xn()}scale(i,e,n){xn()}simplify(i){return this.getSimplifiedGeometry(i*i)}getSimplifiedGeometry(i){return xn()}getType(){return xn()}applyTransform(i){xn()}intersectsExtent(i){return xn()}translate(i,e){xn()}transform(i,e){let n=Vi(i),o=n.getUnits()=="tile-pixels"?function(s,l,h){let p=n.getExtent(),m=n.getWorldExtent(),f=is(m)/is(p);return vc(oye,m[0],m[3],f,-f,0,0,0),Fp(s,0,s.length,h,oye,l),Sv(n,e)(s,l,h)}:Sv(n,e);return this.applyTransform(o),this}},rM=lZ;var cZ=class extends rM{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(i){return PE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i)}getCoordinates(){return xn()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(i){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),i<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&i<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;let e=this.getSimplifiedGeometryInternal(i);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=i,this)}getSimplifiedGeometryInternal(i){return this}getStride(){return this.stride}setFlatCoordinates(i,e){this.stride=FS(i),this.layout=i,this.flatCoordinates=e}setCoordinates(i,e){xn()}setLayout(i,e,n){let o;if(i)o=FS(i);else{for(let s=0;s<n;++s){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}o=e.length,i=x1(o)}this.layout=i,this.stride=o}applyTransform(i){this.flatCoordinates&&(i(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(i,e){let n=this.getFlatCoordinates();if(n){let o=this.getStride();nM(n,0,n.length,o,i,e,n),this.changed()}}scale(i,e,n){e===void 0&&(e=i),n||(n=gc(this.getExtent()));let o=this.getFlatCoordinates();if(o){let s=this.getStride();nye(o,0,o.length,s,i,e,n,o),this.changed()}}translate(i,e){let n=this.getFlatCoordinates();if(n){let o=this.getStride();rye(n,0,n.length,o,i,e,n),this.changed()}}};function x1(r){let i;return r==2?i="XY":r==3?i="XYZ":r==4&&(i="XYZM"),i}function FS(r){let i;return r=="XY"?i=2:r=="XYZ"||r=="XYM"?i=3:r=="XYZM"&&(i=4),i}function sye(r,i,e){let n=r.getFlatCoordinates();if(!n)return null;let o=r.getStride();return Fp(n,0,n.length,o,i,e)}var Id=cZ;function l6(r,i,e,n){for(let o=0,s=e.length;o<s;++o)r[i++]=e[o];return i}function Dv(r,i,e,n){for(let o=0,s=e.length;o<s;++o){let l=e[o];for(let h=0;h<n;++h)r[i++]=l[h]}return i}function S1(r,i,e,n,o){o=o||[];let s=0;for(let l=0,h=e.length;l<h;++l){let p=Dv(r,i,e[l],n);o[s++]=p,i=p}return o.length=s,o}function c6(r,i,e,n,o){o=o||[];let s=0;for(let l=0,h=e.length;l<h;++l){let p=S1(r,i,e[l],n,o[s]);p.length===0&&(p[0]=i),o[s++]=p,i=p[p.length-1]}return o.length=s,o}var d6=class r extends Id{constructor(i,e,n){super(),n!==void 0&&e===void 0?this.setFlatCoordinates(n,i):(e=e||0,this.setCenterAndRadius(i,e,n))}clone(){let i=new r(this.flatCoordinates.slice(),void 0,this.layout);return i.applyProperties(this),i}closestPointXY(i,e,n,o){let s=this.flatCoordinates,l=i-s[0],h=e-s[1],p=l*l+h*h;if(p<o){if(p===0)for(let m=0;m<this.stride;++m)n[m]=s[m];else{let m=this.getRadius()/Math.sqrt(p);n[0]=s[0]+m*l,n[1]=s[1]+m*h;for(let f=2;f<this.stride;++f)n[f]=s[f]}return n.length=this.stride,p}return o}containsXY(i,e){let n=this.flatCoordinates,o=i-n[0],s=e-n[1];return o*o+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(i){let e=this.flatCoordinates,n=e[this.stride]-e[0];return Sd(e[0]-n,e[1]-n,e[0]+n,e[1]+n,i)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){let i=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return i*i+e*e}getType(){return"Circle"}intersectsExtent(i){let e=this.getExtent();if(Wo(i,e)){let n=this.getCenter();return i[0]<=n[0]&&i[2]>=n[0]||i[1]<=n[1]&&i[3]>=n[1]?!0:RE(i,this.intersectsCoordinate.bind(this))}return!1}setCenter(i){let e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],o=i.slice();o[e]=o[0]+n;for(let s=1;s<e;++s)o[e+s]=i[s];this.setFlatCoordinates(this.layout,o),this.changed()}setCenterAndRadius(i,e,n){this.setLayout(n,i,0),this.flatCoordinates||(this.flatCoordinates=[]);let o=this.flatCoordinates,s=l6(o,0,i,this.stride);o[s++]=o[0]+e;for(let l=1,h=this.stride;l<h;++l)o[s++]=o[l];o.length=s,this.changed()}getCoordinates(){return null}setCoordinates(i,e){}setRadius(i){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+i,this.changed()}rotate(i,e){let n=this.getCenter(),o=this.getStride();this.setCenter(nM(n,0,n.length,o,i,e,n)),this.changed()}};d6.prototype.transform;var LS=d6;var uZ=class r extends rM{constructor(i){super(),this.geometries_=i,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Fo),this.changeEventsKeys_.length=0}listenGeometriesChange_(){let i=this.geometries_;for(let e=0,n=i.length;e<n;++e)this.changeEventsKeys_.push($r(i[e],Zi.CHANGE,this.changed,this))}clone(){let i=new r(dZ(this.geometries_));return i.applyProperties(this),i}closestPointXY(i,e,n,o){if(o<kp(this.getExtent(),i,e))return o;let s=this.geometries_;for(let l=0,h=s.length;l<h;++l)o=s[l].closestPointXY(i,e,n,o);return o}containsXY(i,e){let n=this.geometries_;for(let o=0,s=n.length;o<s;++o)if(n[o].containsXY(i,e))return!0;return!1}computeExtent(i){xv(i);let e=this.geometries_;for(let n=0,o=e.length;n<o;++n)h1(i,e[n].getExtent());return i}getGeometries(){return dZ(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let i=[],e=this.geometries_;for(let n=0,o=e.length;n<o;++n)e[n].getType()===this.getType()?i=i.concat(e[n].getGeometriesArrayRecursive()):i.push(e[n]);return i}getSimplifiedGeometry(i){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),i<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&i<this.simplifiedGeometryMaxMinSquaredTolerance)return this;let e=[],n=this.geometries_,o=!1;for(let s=0,l=n.length;s<l;++s){let h=n[s],p=h.getSimplifiedGeometry(i);e.push(p),p!==h&&(o=!0)}return o?new r(e):(this.simplifiedGeometryMaxMinSquaredTolerance=i,this)}getType(){return"GeometryCollection"}intersectsExtent(i){let e=this.geometries_;for(let n=0,o=e.length;n<o;++n)if(e[n].intersectsExtent(i))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(i,e){let n=this.geometries_;for(let o=0,s=n.length;o<s;++o)n[o].rotate(i,e);this.changed()}scale(i,e,n){n||(n=gc(this.getExtent()));let o=this.geometries_;for(let s=0,l=o.length;s<l;++s)o[s].scale(i,e,n);this.changed()}setGeometries(i){this.setGeometriesArray(dZ(i))}setGeometriesArray(i){this.unlistenGeometriesChange_(),this.geometries_=i,this.listenGeometriesChange_(),this.changed()}applyTransform(i){let e=this.geometries_;for(let n=0,o=e.length;n<o;++n)e[n].applyTransform(i);this.changed()}translate(i,e){let n=this.geometries_;for(let o=0,s=n.length;o<s;++o)n[o].translate(i,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}};function dZ(r){return r.map(i=>i.clone())}var Yl=uZ;function aye(r,i,e,n,o,s,l){let h=r[i],p=r[i+1],m=r[e]-h,f=r[e+1]-p,g;if(m===0&&f===0)g=i;else{let y=((o-h)*m+(s-p)*f)/(m*m+f*f);if(y>1)g=e;else if(y>0){for(let _=0;_<n;++_)l[_]=xu(r[i+_],r[e+_],y);l.length=n;return}else g=i}for(let y=0;y<n;++y)l[y]=r[g+y];l.length=n}function BP(r,i,e,n,o){let s=r[i],l=r[i+1];for(i+=n;i<e;i+=n){let h=r[i],p=r[i+1],m=Op(s,l,h,p);m>o&&(o=m),s=h,l=p}return o}function jP(r,i,e,n,o){for(let s=0,l=e.length;s<l;++s){let h=e[s];o=BP(r,i,h,n,o),i=h}return o}function lye(r,i,e,n,o){for(let s=0,l=e.length;s<l;++s){let h=e[s];o=jP(r,i,h,n,o),i=h[h.length-1]}return o}function VP(r,i,e,n,o,s,l,h,p,m,f){if(i==e)return m;let g,y;if(o===0){if(y=Op(l,h,r[i],r[i+1]),y<m){for(g=0;g<n;++g)p[g]=r[i+g];return p.length=n,y}return m}f=f||[NaN,NaN];let _=i+n;for(;_<e;)if(aye(r,_-n,_,n,l,h,f),y=Op(l,h,f[0],f[1]),y<m){for(m=y,g=0;g<n;++g)p[g]=f[g];p.length=n,_+=n}else _+=n*Math.max((Math.sqrt(y)-Math.sqrt(m))/o|0,1);if(s&&(aye(r,e-n,i,n,l,h,f),y=Op(l,h,f[0],f[1]),y<m)){for(m=y,g=0;g<n;++g)p[g]=f[g];p.length=n}return m}function $P(r,i,e,n,o,s,l,h,p,m,f){f=f||[NaN,NaN];for(let g=0,y=e.length;g<y;++g){let _=e[g];m=VP(r,i,_,n,o,s,l,h,p,m,f),i=_}return m}function cye(r,i,e,n,o,s,l,h,p,m,f){f=f||[NaN,NaN];for(let g=0,y=e.length;g<y;++g){let _=e[g];m=$P(r,i,_,n,o,s,l,h,p,m,f),i=_[_.length-1]}return m}function NS(r,i,e,n,o,s,l){let h=(e-i)/n;if(h<3){for(;i<e;i+=n)s[l++]=r[i],s[l++]=r[i+1];return l}let p=new Array(h);p[0]=1,p[h-1]=1;let m=[i,e-n],f=0;for(;m.length>0;){let g=m.pop(),y=m.pop(),_=0,w=r[y],A=r[y+1],k=r[g],R=r[g+1];for(let $=y+n;$<g;$+=n){let H=r[$],oe=r[$+1],se=D0e(H,oe,w,A,k,R);se>_&&(f=$,_=se)}_>o&&(p[(f-i)/n]=1,y+n<f&&m.push(y,f),f+n<g&&m.push(f,g))}for(let g=0;g<h;++g)p[g]&&(s[l++]=r[i+g*n],s[l++]=r[i+g*n+1]);return l}function u6(r,i,e,n,o,s,l,h){for(let p=0,m=e.length;p<m;++p){let f=e[p];l=NS(r,i,f,n,o,s,l),h.push(l),i=f}return l}function I1(r,i){return i*Math.round(r/i)}function XHe(r,i,e,n,o,s,l){if(i==e)return l;let h=I1(r[i],o),p=I1(r[i+1],o);i+=n,s[l++]=h,s[l++]=p;let m,f;do if(m=I1(r[i],o),f=I1(r[i+1],o),i+=n,i==e)return s[l++]=m,s[l++]=f,l;while(m==h&&f==p);for(;i<e;){let g=I1(r[i],o),y=I1(r[i+1],o);if(i+=n,g==m&&y==f)continue;let _=m-h,w=f-p,A=g-h,k=y-p;if(_*k==w*A&&(_<0&&A<_||_==A||_>0&&A>_)&&(w<0&&k<w||w==k||w>0&&k>w)){m=g,f=y;continue}s[l++]=m,s[l++]=f,h=m,p=f,m=g,f=y}return s[l++]=m,s[l++]=f,l}function UP(r,i,e,n,o,s,l,h){for(let p=0,m=e.length;p<m;++p){let f=e[p];l=XHe(r,i,f,n,o,s,l),h.push(l),i=f}return l}function dye(r,i,e,n,o,s,l,h){for(let p=0,m=e.length;p<m;++p){let f=e[p],g=[];l=UP(r,i,f,n,o,s,l,g),h.push(g),i=f[f.length-1]}return l}function Lp(r,i,e,n,o){o=o!==void 0?o:[];let s=0;for(let l=i;l<e;l+=n)o[s++]=r.slice(l,l+n);return o.length=s,o}function T1(r,i,e,n,o){o=o!==void 0?o:[];let s=0;for(let l=0,h=e.length;l<h;++l){let p=e[l];o[s++]=Lp(r,i,p,n,o[s]),i=p}return o.length=s,o}function zP(r,i,e,n,o){o=o!==void 0?o:[];let s=0;for(let l=0,h=e.length;l<h;++l){let p=e[l];o[s++]=p.length===1&&p[0]===i?[]:T1(r,i,p,n,o[s]),i=p[p.length-1]}return o.length=s,o}function hZ(r,i,e,n){let o=0,s=r[e-n],l=r[e-n+1];for(;i<e;i+=n){let h=r[i],p=r[i+1];o+=l*h-s*p,s=h,l=p}return o/2}function pZ(r,i,e,n){let o=0;for(let s=0,l=e.length;s<l;++s){let h=e[s];o+=hZ(r,i,h,n),i=h}return o}function uye(r,i,e,n){let o=0;for(let s=0,l=e.length;s<l;++s){let h=e[s];o+=pZ(r,i,h,n),i=h[h.length-1]}return o}var mZ=class r extends Id{constructor(i,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(i[0])?this.setFlatCoordinates(e,i):this.setCoordinates(i,e)}clone(){return new r(this.flatCoordinates.slice(),this.layout)}closestPointXY(i,e,n,o){return o<kp(this.getExtent(),i,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(BP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),VP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,i,e,n,o))}getArea(){return hZ(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Lp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(i){let e=[];return e.length=NS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i,e,0),new r(e,"XY")}getType(){return"LinearRing"}intersectsExtent(i){return!1}setCoordinates(i,e){this.setLayout(e,i,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Dv(this.flatCoordinates,0,i,this.stride),this.changed()}},A1=mZ;function h6(r,i,e,n,o){let s;for(i+=n;i<e;i+=n)if(s=o(r.slice(i-n,i),r.slice(i,i+n)),s)return s;return!1}function BS(r,i,e,n,o,s,l){let h,p,m=(e-i)/n;if(m===1)h=i;else if(m===2)h=i,p=o;else if(m!==0){let f=r[i],g=r[i+1],y=0,_=[0];for(let k=i+n;k<e;k+=n){let R=r[k],$=r[k+1];y+=Math.sqrt((R-f)*(R-f)+($-g)*($-g)),_.push(y),f=R,g=$}let w=o*y,A=Z_e(_,w);A<0?(p=(w-_[-A-2])/(_[-A-1]-_[-A-2]),h=i+(-A-2)*n):h=i+A*n}l=l>1?l:2,s=s||new Array(l);for(let f=0;f<l;++f)s[f]=h===void 0?NaN:p===void 0?r[h+f]:xu(r[h+f],r[h+n+f],p);return s}function p6(r,i,e,n,o,s){if(e==i)return null;let l;if(o<r[i+n-1])return s?(l=r.slice(i,i+n),l[n-1]=o,l):null;if(r[e-1]<o)return s?(l=r.slice(e-n,e),l[n-1]=o,l):null;if(o==r[i+n-1])return r.slice(i,i+n);let h=i/n,p=e/n;for(;h<p;){let y=h+p>>1;o<r[(y+1)*n-1]?p=y:h=y+1}let m=r[h*n-1];if(o==m)return r.slice((h-1)*n,(h-1)*n+n);let f=r[(h+1)*n-1],g=(o-m)/(f-m);l=[];for(let y=0;y<n-1;++y)l.push(xu(r[(h-1)*n+y],r[h*n+y],g));return l.push(o),l}function hye(r,i,e,n,o,s,l){if(l)return p6(r,i,e[e.length-1],n,o,s);let h;if(o<r[n-1])return s?(h=r.slice(0,n),h[n-1]=o,h):null;if(r[r.length-1]<o)return s?(h=r.slice(r.length-n),h[n-1]=o,h):null;for(let p=0,m=e.length;p<m;++p){let f=e[p];if(i!=f){if(o<r[i+n-1])return null;if(o<=r[f-1])return p6(r,i,f,n,o,!1);i=f}}return null}function pye(r,i,e,n,o){return!RE(o,function(l){return!E1(r,i,e,n,l[0],l[1])})}function E1(r,i,e,n,o,s){let l=0,h=r[e-n],p=r[e-n+1];for(;i<e;i+=n){let m=r[i],f=r[i+1];p<=s?f>s&&(m-h)*(s-p)-(o-h)*(f-p)>0&&l++:f<=s&&(m-h)*(s-p)-(o-h)*(f-p)<0&&l--,h=m,p=f}return l!==0}function GP(r,i,e,n,o,s){if(e.length===0||!E1(r,i,e[0],n,o,s))return!1;for(let l=1,h=e.length;l<h;++l)if(E1(r,e[l-1],e[l],n,o,s))return!1;return!0}function mye(r,i,e,n,o,s){if(e.length===0)return!1;for(let l=0,h=e.length;l<h;++l){let p=e[l];if(GP(r,i,p,n,o,s))return!0;i=p[p.length-1]}return!1}function HP(r,i,e,n,o){let s=dK(Fs(),r,i,e,n);return Wo(o,s)?fc(o,s)||s[0]>=o[0]&&s[2]<=o[2]||s[1]>=o[1]&&s[3]<=o[3]?!0:h6(r,i,e,n,function(l,h){return A0e(o,l,h)}):!1}function fye(r,i,e,n,o){for(let s=0,l=e.length;s<l;++s){if(HP(r,i,e[s],n,o))return!0;i=e[s]}return!1}function fZ(r,i,e,n,o){return!!(HP(r,i,e,n,o)||E1(r,i,e,n,o[0],o[1])||E1(r,i,e,n,o[0],o[3])||E1(r,i,e,n,o[2],o[1])||E1(r,i,e,n,o[2],o[3]))}function gZ(r,i,e,n,o){if(!fZ(r,i,e[0],n,o))return!1;if(e.length===1)return!0;for(let s=1,l=e.length;s<l;++s)if(pye(r,e[s-1],e[s],n,o)&&!HP(r,e[s-1],e[s],n,o))return!1;return!0}function gye(r,i,e,n,o){for(let s=0,l=e.length;s<l;++s){let h=e[s];if(gZ(r,i,h,n,o))return!0;i=h[h.length-1]}return!1}function m6(r,i,e,n){let o=r[i],s=r[i+1],l=0;for(let h=i+n;h<e;h+=n){let p=r[h],m=r[h+1];l+=Math.sqrt((p-o)*(p-o)+(m-s)*(m-s)),o=p,s=m}return l}var _Z=class r extends Id{constructor(i,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(i[0])?this.setFlatCoordinates(e,i):this.setCoordinates(i,e)}appendCoordinate(i){mr(this.flatCoordinates,i),this.changed()}clone(){let i=new r(this.flatCoordinates.slice(),this.layout);return i.applyProperties(this),i}closestPointXY(i,e,n,o){return o<kp(this.getExtent(),i,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(BP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),VP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,i,e,n,o))}forEachSegment(i){return h6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i)}getCoordinateAtM(i,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,p6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i,e))}getCoordinates(){return Lp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(i,e){return BS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i,e,this.stride)}getLength(){return m6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(i){let e=[];return e.length=NS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i,e,0),new r(e,"XY")}getType(){return"LineString"}intersectsExtent(i){return HP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i)}setCoordinates(i,e){this.setLayout(e,i,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Dv(this.flatCoordinates,0,i,this.stride),this.changed()}},ao=_Z;var yZ=class r extends Id{constructor(i,e,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(i[0]))this.setCoordinates(i,e);else if(e!==void 0&&n)this.setFlatCoordinates(e,i),this.ends_=n;else{let o=i,s=[],l=[];for(let p=0,m=o.length;p<m;++p){let f=o[p];mr(s,f.getFlatCoordinates()),l.push(s.length)}let h=o.length===0?this.getLayout():o[0].getLayout();this.setFlatCoordinates(h,s),this.ends_=l}}appendLineString(i){mr(this.flatCoordinates,i.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let i=new r(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return i.applyProperties(this),i}closestPointXY(i,e,n,o){return o<kp(this.getExtent(),i,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(jP(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$P(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,i,e,n,o))}getCoordinateAtM(i,e,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,n=n!==void 0?n:!1,hye(this.flatCoordinates,0,this.ends_,this.stride,i,e,n))}getCoordinates(){return T1(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(i){return i<0||this.ends_.length<=i?null:new ao(this.flatCoordinates.slice(i===0?0:this.ends_[i-1],this.ends_[i]),this.layout)}getLineStrings(){let i=this.flatCoordinates,e=this.ends_,n=this.layout,o=[],s=0;for(let l=0,h=e.length;l<h;++l){let p=e[l],m=new ao(i.slice(s,p),n);o.push(m),s=p}return o}getFlatMidpoints(){let i=[],e=this.flatCoordinates,n=0,o=this.ends_,s=this.stride;for(let l=0,h=o.length;l<h;++l){let p=o[l],m=BS(e,n,p,s,.5);mr(i,m),n=p}return i}getSimplifiedGeometryInternal(i){let e=[],n=[];return e.length=u6(this.flatCoordinates,0,this.ends_,this.stride,i,e,0,n),new r(e,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(i){return fye(this.flatCoordinates,0,this.ends_,this.stride,i)}setCoordinates(i,e){this.setLayout(e,i,2),this.flatCoordinates||(this.flatCoordinates=[]);let n=S1(this.flatCoordinates,0,i,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}},Qa=yZ;var vZ=class r extends Id{constructor(i,e){super(),this.setCoordinates(i,e)}clone(){let i=new r(this.flatCoordinates.slice(),this.layout);return i.applyProperties(this),i}closestPointXY(i,e,n,o){let s=this.flatCoordinates,l=Op(i,e,s[0],s[1]);if(l<o){let h=this.stride;for(let p=0;p<h;++p)n[p]=s[p];return n.length=h,l}return o}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(i){return T_(this.flatCoordinates,i)}getType(){return"Point"}intersectsExtent(i){return kP(i,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(i,e){this.setLayout(e,i,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=l6(this.flatCoordinates,0,i,this.stride),this.changed()}},Kn=vZ;var bZ=class r extends Id{constructor(i,e){super(),e&&!Array.isArray(i[0])?this.setFlatCoordinates(e,i):this.setCoordinates(i,e)}appendPoint(i){mr(this.flatCoordinates,i.getFlatCoordinates()),this.changed()}clone(){let i=new r(this.flatCoordinates.slice(),this.layout);return i.applyProperties(this),i}closestPointXY(i,e,n,o){if(o<kp(this.getExtent(),i,e))return o;let s=this.flatCoordinates,l=this.stride;for(let h=0,p=s.length;h<p;h+=l){let m=Op(i,e,s[h],s[h+1]);if(m<o){o=m;for(let f=0;f<l;++f)n[f]=s[h+f];n.length=l}}return o}getCoordinates(){return Lp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(i){let e=this.flatCoordinates.length/this.stride;return i<0||e<=i?null:new Kn(this.flatCoordinates.slice(i*this.stride,(i+1)*this.stride),this.layout)}getPoints(){let i=this.flatCoordinates,e=this.layout,n=this.stride,o=[];for(let s=0,l=i.length;s<l;s+=n){let h=new Kn(i.slice(s,s+n),e);o.push(h)}return o}getType(){return"MultiPoint"}intersectsExtent(i){let e=this.flatCoordinates,n=this.stride;for(let o=0,s=e.length;o<s;o+=n){let l=e[o],h=e[o+1];if(kP(i,l,h))return!0}return!1}setCoordinates(i,e){this.setLayout(e,i,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Dv(this.flatCoordinates,0,i,this.stride),this.changed()}},Lc=bZ;function WP(r,i,e,n,o,s,l){let h,p,m,f,g,y,_,w=o[s+1],A=[];for(let $=0,H=e.length;$<H;++$){let oe=e[$];for(f=r[oe-n],y=r[oe-n+1],h=i;h<oe;h+=n)g=r[h],_=r[h+1],(w<=y&&_<=w||y<=w&&w<=_)&&(m=(w-y)/(_-y)*(g-f)+f,A.push(m)),f=g,y=_}let k=NaN,R=-1/0;for(A.sort(gh),f=A[0],h=1,p=A.length;h<p;++h){g=A[h];let $=Math.abs(g-f);$>R&&(m=(f+g)/2,GP(r,i,e,n,m,w)&&(k=m,R=$)),f=g}return isNaN(k)&&(k=o[s]),l?(l.push(k,w,R),l):[k,w,R]}function f6(r,i,e,n,o){let s=[];for(let l=0,h=e.length;l<h;++l){let p=e[l];s=WP(r,i,p,n,o,2*l,s),i=p[p.length-1]}return s}function _ye(r,i,e,n){for(;i<e-n;){for(let o=0;o<n;++o){let s=r[i+o];r[i+o]=r[e-n+o],r[e-n+o]=s}i+=n,e-=n}}function qP(r,i,e,n){let o=0,s=r[e-n],l=r[e-n+1];for(;i<e;i+=n){let h=r[i],p=r[i+1];o+=(h-s)*(p+l),s=h,l=p}return o===0?void 0:o>0}function YP(r,i,e,n,o){o=o!==void 0?o:!1;for(let s=0,l=e.length;s<l;++s){let h=e[s],p=qP(r,i,h,n);if(s===0){if(o&&p||!o&&!p)return!1}else if(o&&!p||!o&&p)return!1;i=h}return!0}function g6(r,i,e,n,o){for(let s=0,l=e.length;s<l;++s){let h=e[s];if(!YP(r,i,h,n,o))return!1;h.length&&(i=h[h.length-1])}return!0}function oM(r,i,e,n,o){o=o!==void 0?o:!1;for(let s=0,l=e.length;s<l;++s){let h=e[s],p=qP(r,i,h,n);(s===0?o&&p||!o&&!p:o&&!p||!o&&p)&&_ye(r,i,h,n),i=h}return i}function KP(r,i,e,n,o){for(let s=0,l=e.length;s<l;++s)i=oM(r,i,e[s],n,o);return i}function _6(r,i){let e=[],n=0,o=0,s;for(let l=0,h=i.length;l<h;++l){let p=i[l],m=qP(r,n,p,2);if(s===void 0&&(s=m),m===s)e.push(i.slice(o,l+1));else{if(e.length===0)continue;e[e.length-1].push(i[o])}o=l+1,n=p}return e}var sM=class r extends Id{constructor(i,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&n?(this.setFlatCoordinates(e,i),this.ends_=n):this.setCoordinates(i,e)}appendLinearRing(i){this.flatCoordinates?mr(this.flatCoordinates,i.getFlatCoordinates()):this.flatCoordinates=i.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let i=new r(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return i.applyProperties(this),i}closestPointXY(i,e,n,o){return o<kp(this.getExtent(),i,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(jP(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$P(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,i,e,n,o))}containsXY(i,e){return GP(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,i,e)}getArea(){return pZ(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(i){let e;return i!==void 0?(e=this.getOrientedFlatCoordinates().slice(),oM(e,0,this.ends_,this.stride,i)):e=this.flatCoordinates,T1(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){let i=gc(this.getExtent());this.flatInteriorPoint_=WP(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,i,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Kn(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(i){return i<0||this.ends_.length<=i?null:new A1(this.flatCoordinates.slice(i===0?0:this.ends_[i-1],this.ends_[i]),this.layout)}getLinearRings(){let i=this.layout,e=this.flatCoordinates,n=this.ends_,o=[],s=0;for(let l=0,h=n.length;l<h;++l){let p=n[l],m=new A1(e.slice(s,p),i);o.push(m),s=p}return o}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let i=this.flatCoordinates;YP(i,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=i:(this.orientedFlatCoordinates_=i.slice(),this.orientedFlatCoordinates_.length=oM(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(i){let e=[],n=[];return e.length=UP(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(i),e,0,n),new r(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(i){return gZ(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,i)}setCoordinates(i,e){this.setLayout(e,i,2),this.flatCoordinates||(this.flatCoordinates=[]);let n=S1(this.flatCoordinates,0,i,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}},Zo=sM;function y6(r,i,e,n){e=e||32;let o=[];for(let s=0;s<e;++s)mr(o,R0e(r,i,2*Math.PI*s/e,n));return o.push(o[0],o[1]),new sM(o,"XY",[o.length])}function wZ(r){if(km(r))throw new Error("Cannot create polygon from empty extent");let i=r[0],e=r[1],n=r[2],o=r[3],s=[i,e,i,o,n,o,n,e,i,e];return new sM(s,"XY",[s.length])}function jS(r,i,e){i=i||32;let n=r.getStride(),o=r.getLayout(),s=r.getCenter(),l=n*(i+1),h=new Array(l);for(let f=0;f<l;f+=n){h[f]=0,h[f+1]=0;for(let g=2;g<n;g++)h[f+g]=s[g]}let p=[h.length],m=new sM(h,o,p);return yye(m,s,r.getRadius(),e),m}function yye(r,i,e,n){let o=r.getFlatCoordinates(),s=r.getStride(),l=o.length/s-1,h=n||0;for(let p=0;p<=l;++p){let m=p*s,f=h+Pp(p,l)*2*Math.PI/l;o[m]=i[0]+e*Math.cos(f),o[m+1]=i[1]+e*Math.sin(f)}r.changed()}function v6(r,i,e,n){let o=[],s=Fs();for(let l=0,h=e.length;l<h;++l){let p=e[l];s=PE(r,i,p[0],n),o.push((s[0]+s[2])/2,(s[1]+s[3])/2),i=p[p.length-1]}return o}var CZ=class r extends Id{constructor(i,e,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(i[0])){let o=i,s=[],l=[];for(let h=0,p=o.length;h<p;++h){let m=o[h],f=s.length,g=m.getEnds();for(let y=0,_=g.length;y<_;++y)g[y]+=f;mr(s,m.getFlatCoordinates()),l.push(g)}e=o.length===0?this.getLayout():o[0].getLayout(),i=s,n=l}e!==void 0&&n?(this.setFlatCoordinates(e,i),this.endss_=n):this.setCoordinates(i,e)}appendPolygon(i){let e;if(!this.flatCoordinates)this.flatCoordinates=i.getFlatCoordinates().slice(),e=i.getEnds().slice(),this.endss_.push();else{let n=this.flatCoordinates.length;mr(this.flatCoordinates,i.getFlatCoordinates()),e=i.getEnds().slice();for(let o=0,s=e.length;o<s;++o)e[o]+=n}this.endss_.push(e),this.changed()}clone(){let i=this.endss_.length,e=new Array(i);for(let o=0;o<i;++o)e[o]=this.endss_[o].slice();let n=new r(this.flatCoordinates.slice(),this.layout,e);return n.applyProperties(this),n}closestPointXY(i,e,n,o){return o<kp(this.getExtent(),i,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(lye(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),cye(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,i,e,n,o))}containsXY(i,e){return mye(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,i,e)}getArea(){return uye(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(i){let e;return i!==void 0?(e=this.getOrientedFlatCoordinates().slice(),KP(e,0,this.endss_,this.stride,i)):e=this.flatCoordinates,zP(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){let i=v6(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=f6(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,i),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Lc(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let i=this.flatCoordinates;g6(i,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=i:(this.orientedFlatCoordinates_=i.slice(),this.orientedFlatCoordinates_.length=KP(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(i){let e=[],n=[];return e.length=dye(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(i),e,0,n),new r(e,"XY",n)}getPolygon(i){if(i<0||this.endss_.length<=i)return null;let e;if(i===0)e=0;else{let s=this.endss_[i-1];e=s[s.length-1]}let n=this.endss_[i].slice(),o=n[n.length-1];if(e!==0)for(let s=0,l=n.length;s<l;++s)n[s]-=e;return new Zo(this.flatCoordinates.slice(e,o),this.layout,n)}getPolygons(){let i=this.layout,e=this.flatCoordinates,n=this.endss_,o=[],s=0;for(let l=0,h=n.length;l<h;++l){let p=n[l].slice(),m=p[p.length-1];if(s!==0)for(let g=0,y=p.length;g<y;++g)p[g]-=s;let f=new Zo(e.slice(s,m),i,p);o.push(f),s=m}return o}getType(){return"MultiPolygon"}intersectsExtent(i){return gye(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,i)}setCoordinates(i,e){this.setLayout(e,i,3),this.flatCoordinates||(this.flatCoordinates=[]);let n=c6(this.flatCoordinates,0,i,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{let o=n[n.length-1];this.flatCoordinates.length=o.length===0?0:o[o.length-1]}this.changed()}},_l=CZ;var vye=Fc(),ZP=class r{constructor(i,e,n,o,s,l){this.styleFunction,this.extent_,this.id_=l,this.type_=i,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=s,this.squaredTolerance_,this.stride_=o,this.simplifiedGeometry_}get(i){return this.properties_[i]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?T_(this.flatCoordinates_):PE(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){let i=gc(this.getExtent());this.flatInteriorPoints_=WP(this.flatCoordinates_,0,this.ends_,2,i,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){let i=_6(this.flatCoordinates_,this.ends_),e=v6(this.flatCoordinates_,0,i,2);this.flatInteriorPoints_=f6(this.flatCoordinates_,0,i,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=BS(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];let i=this.flatCoordinates_,e=0,n=this.ends_;for(let o=0,s=n.length;o<s;++o){let l=n[o],h=BS(i,e,l,2,.5);mr(this.flatMidpoints_,h),e=l}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(i){return this}simplifyTransformed(i,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(i){i=Vi(i);let e=i.getExtent(),n=i.getWorldExtent();if(e&&n){let o=is(n)/is(e);vc(vye,n[0],n[3],o,-o,0,0,0),Fp(this.flatCoordinates_,0,this.flatCoordinates_.length,2,vye,this.flatCoordinates_)}}applyTransform(i){i(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new r(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=o6((i,e)=>{if(i===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);let n=this.simplifiedGeometry_.getFlatCoordinates(),o;switch(this.type_){case"LineString":n.length=NS(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,i,n,0),o=[n.length];break;case"MultiLineString":o=[],n.length=u6(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,i,n,0,o);break;case"Polygon":o=[],n.length=UP(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(i),n,0,o);break;default:}return o&&(this.simplifiedGeometry_=new r(this.type_,n,o,2,this.properties_,this.id_)),this.squaredTolerance_=i,this.simplifiedGeometry_}),this}};ZP.prototype.getFlatCoordinates=ZP.prototype.getOrientedFlatCoordinates;var Zc=ZP;var xZ=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=An,this.supportedMediaTypes=null}getReadOptions(i,e){if(e){let n=e.dataProjection?Vi(e.dataProjection):this.readProjection(i);e.extent&&n&&n.getUnits()==="tile-pixels"&&(n=Vi(n),n.setWorldExtent(e.extent)),e={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(i){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},i)}getType(){return xn()}readFeature(i,e){return xn()}readFeatures(i,e){return xn()}readGeometry(i,e){return xn()}readProjection(i){return xn()}writeFeature(i,e){return xn()}writeFeatures(i,e){return xn()}writeGeometry(i,e){return xn()}},R_=xZ;function Co(r,i,e){let n=e?Vi(e.featureProjection):null,o=e?Vi(e.dataProjection):null,s=r;if(n&&o&&!qd(n,o)){i&&(s=r.clone());let l=i?n:o,h=i?o:n;l.getUnits()==="tile-pixels"?s.transform(l,h):s.applyTransform(Sv(l,h))}if(i&&e&&e.decimals!==void 0){let l=Math.pow(10,e.decimals),h=function(p){for(let m=0,f=p.length;m<f;++m)p[m]=Math.round(p[m]*l)/l;return p};s===r&&(s=r.clone()),s.applyTransform(h)}return s}function aM(r,i){let e=i?Vi(i.featureProjection):null,n=i?Vi(i.dataProjection):null;return e&&n&&!qd(e,n)?Su(r,n,e):r}var e9e={Point:Kn,LineString:ao,Polygon:Zo,MultiPoint:Lc,MultiLineString:Qa,MultiPolygon:_l};function t9e(r,i,e){return Array.isArray(i[0])?(g6(r,0,i,e)||(r=r.slice(),KP(r,0,i,e)),r):(YP(r,0,i,e)||(r=r.slice(),oM(r,0,i,e)),r)}function SZ(r,i){let e=r.geometry;if(!e)return[];if(Array.isArray(e))return e.map(s=>SZ(li(Xe({},r),{geometry:s}))).flat();let n=e.type==="MultiPolygon"?"Polygon":e.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);let o=e.layout.length;return Co(new Zc(n,n==="Polygon"?t9e(e.flatCoordinates,e.ends,o):e.flatCoordinates,e.ends?.flat(),o,r.properties||{},r.id).enableSimplifyTransformed(),!1,i)}function b6(r,i){if(!r)return null;if(Array.isArray(r)){let n=r.map(o=>b6(o,i));return new Yl(n)}let e=e9e[r.type];return Co(new e(r.flatCoordinates,r.layout,r.ends),!1,i)}var IZ=class extends R_{constructor(){super()}getType(){return"json"}readFeature(i,e){return this.readFeatureFromObject(w6(i),this.getReadOptions(i,e))}readFeatures(i,e){return this.readFeaturesFromObject(w6(i),this.getReadOptions(i,e))}readFeatureFromObject(i,e){return xn()}readFeaturesFromObject(i,e){return xn()}readGeometry(i,e){return this.readGeometryFromObject(w6(i),this.getReadOptions(i,e))}readGeometryFromObject(i,e){return xn()}readProjection(i){return this.readProjectionFromObject(w6(i))}readProjectionFromObject(i){return xn()}writeFeature(i,e){return JSON.stringify(this.writeFeatureObject(i,e))}writeFeatureObject(i,e){return xn()}writeFeatures(i,e){return JSON.stringify(this.writeFeaturesObject(i,e))}writeFeaturesObject(i,e){return xn()}writeGeometry(i,e){return JSON.stringify(this.writeGeometryObject(i,e))}writeGeometryObject(i,e){return xn()}};function w6(r){if(typeof r=="string"){let i=JSON.parse(r);return i||null}return r!==null?r:null}var lM=IZ;var TZ=class extends lM{constructor(i){i=i||{},super(),this.dataProjection=Vi(i.dataProjection?i.dataProjection:"EPSG:4326"),i.featureProjection&&(this.defaultFeatureProjection=Vi(i.featureProjection)),i.featureClass&&(this.featureClass=i.featureClass),this.geometryName_=i.geometryName,this.extractGeometryName_=i.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(i,e){let n=null;i.type==="Feature"?n=i:n={type:"Feature",geometry:i,properties:null};let o=EZ(n.geometry,e);if(this.featureClass===Zc)return SZ({geometry:o,id:n.id,properties:n.properties},e);let s=new An;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&s.setGeometryName(n.geometry_name),s.setGeometry(b6(o,e)),"id"in n&&s.setId(n.id),n.properties&&s.setProperties(n.properties,!0),s}readFeaturesFromObject(i,e){let n=i,o=null;if(n.type==="FeatureCollection"){let s=i;o=[];let l=s.features;for(let h=0,p=l.length;h<p;++h){let m=this.readFeatureFromObject(l[h],e);m&&o.push(m)}}else o=[this.readFeatureFromObject(i,e)];return o.flat()}readGeometryFromObject(i,e){return i9e(i,e)}readProjectionFromObject(i){let e=i.crs,n;if(e)if(e.type=="name")n=Vi(e.properties.name);else if(e.type==="EPSG")n=Vi("EPSG:"+e.properties.code);else throw new Error("Unknown SRS type");else n=this.dataProjection;return n}writeFeatureObject(i,e){e=this.adaptOptions(e);let n={type:"Feature",geometry:null,properties:null},o=i.getId();if(o!==void 0&&(n.id=o),!i.hasProperties())return n;let s=i.getProperties(),l=i.getGeometry();return l&&(n.geometry=AZ(l,e),delete s[i.getGeometryName()]),Cd(s)||(n.properties=s),n}writeFeaturesObject(i,e){e=this.adaptOptions(e);let n=[];for(let o=0,s=i.length;o<s;++o)n.push(this.writeFeatureObject(i[o],e));return{type:"FeatureCollection",features:n}}writeGeometryObject(i,e){return AZ(i,this.adaptOptions(e))}};function EZ(r,i){if(!r)return null;let e;switch(r.type){case"Point":{e=r9e(r);break}case"LineString":{e=o9e(r);break}case"Polygon":{e=c9e(r);break}case"MultiPoint":{e=a9e(r);break}case"MultiLineString":{e=s9e(r);break}case"MultiPolygon":{e=l9e(r);break}case"GeometryCollection":{e=n9e(r);break}default:throw new Error("Unsupported GeoJSON type: "+r.type)}return e}function i9e(r,i){let e=EZ(r,i);return b6(e,i)}function n9e(r,i){return r.geometries.map(function(n){return EZ(n,i)})}function r9e(r){let i=r.coordinates;return{type:"Point",flatCoordinates:i,layout:x1(i.length)}}function o9e(r){let i=r.coordinates,e=i.flat();return{type:"LineString",flatCoordinates:e,ends:[e.length],layout:x1(i[0]?.length||2)}}function s9e(r){let i=r.coordinates,e=i[0]?.[0]?.length||2,n=[],o=S1(n,0,i,e);return{type:"MultiLineString",flatCoordinates:n,ends:o,layout:x1(e)}}function a9e(r){let i=r.coordinates;return{type:"MultiPoint",flatCoordinates:i.flat(),layout:x1(i[0]?.length||2)}}function l9e(r){let i=r.coordinates,e=[],n=i[0]?.[0]?.[0].length||2,o=c6(e,0,i,n);return{type:"MultiPolygon",flatCoordinates:e,ends:o,layout:x1(n)}}function c9e(r){let i=r.coordinates,e=[],n=i[0]?.[0]?.length,o=S1(e,0,i,n);return{type:"Polygon",flatCoordinates:e,ends:o,layout:x1(n)}}function AZ(r,i){r=Co(r,!0,i);let e=r.getType(),n;switch(e){case"Point":{n=f9e(r,i);break}case"LineString":{n=u9e(r,i);break}case"Polygon":{n=g9e(r,i);break}case"MultiPoint":{n=p9e(r,i);break}case"MultiLineString":{n=h9e(r,i);break}case"MultiPolygon":{n=m9e(r,i);break}case"GeometryCollection":{n=d9e(r,i);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return n}function d9e(r,i){return i=Object.assign({},i),delete i.featureProjection,{type:"GeometryCollection",geometries:r.getGeometriesArray().map(function(n){return AZ(n,i)})}}function u9e(r,i){return{type:"LineString",coordinates:r.getCoordinates()}}function h9e(r,i){return{type:"MultiLineString",coordinates:r.getCoordinates()}}function p9e(r,i){return{type:"MultiPoint",coordinates:r.getCoordinates()}}function m9e(r,i){let e;return i&&(e=i.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(e)}}function f9e(r,i){return{type:"Point",coordinates:r.getCoordinates()}}function g9e(r,i){let e;return i&&(e=i.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(e)}}var hs=TZ;var eQ={};am(eQ,{Circle:()=>yl,Fill:()=>sr,Icon:()=>Tu,IconImage:()=>kye,Image:()=>cM,RegularShape:()=>$p,Stroke:()=>ir,Style:()=>Mn,Text:()=>Pl});var en={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function MZ(r){return r[0]>0&&r[1]>0}function C6(r,i,e){return e===void 0&&(e=[0,0]),e[0]=r[0]*i+.5|0,e[1]=r[1]*i+.5|0,e}function Oa(r,i){return Array.isArray(r)?r:(i===void 0?i=[r,r]:(i[0]=r,i[1]=r),i)}var DZ=class r{constructor(i){this.opacity_=i.opacity,this.rotateWithView_=i.rotateWithView,this.rotation_=i.rotation,this.scale_=i.scale,this.scaleArray_=Oa(i.scale),this.displacement_=i.displacement,this.declutterMode_=i.declutterMode}clone(){let i=this.getScale();return new r({opacity:this.getOpacity(),scale:Array.isArray(i)?i.slice():i,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return xn()}getImage(i){return xn()}getHitDetectionImage(){return xn()}getPixelRatio(i){return 1}getImageState(){return xn()}getImageSize(){return xn()}getOrigin(){return xn()}getSize(){return xn()}setDisplacement(i){this.displacement_=i}setOpacity(i){this.opacity_=i}setRotateWithView(i){this.rotateWithView_=i}setRotation(i){this.rotation_=i}setScale(i){this.scale_=i,this.scaleArray_=Oa(i)}listenImageChange(i){xn()}load(){xn()}unlistenImageChange(i){xn()}ready(){return Promise.resolve()}},cM=DZ;var _9e={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},kv=_9e;var dM={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};dM.max=dM.whitepoint[2].D65;dM.rgb=function(r,i){i=i||dM.whitepoint[2].E;var e=r[0]/i[0],n=r[1]/i[1],o=r[2]/i[2],s,l,h;return s=e*3.240969941904521+n*-1.537383177570093+o*-.498610760293,l=e*-.96924363628087+n*1.87596750150772+o*.041555057407175,h=e*.055630079696993+n*-.20397695888897+o*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l=l*12.92,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:h=h*12.92,s=Math.min(Math.max(0,s),1),l=Math.min(Math.max(0,l),1),h=Math.min(Math.max(0,h),1),[s*255,l*255,h*255]};kv.xyz=function(r,i){var e=r[0]/255,n=r[1]/255,o=r[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92;var s=e*.41239079926595+n*.35758433938387+o*.18048078840183,l=e*.21263900587151+n*.71516867876775+o*.072192315360733,h=e*.019330818715591+n*.11919477979462+o*.95053215224966;return i=i||dM.whitepoint[2].E,[s*i[0],l*i[1],h*i[2]]};var Np=dM;var y9e={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(r,i,e){var n,o,s,l,h,p,m,f,g,y,_,w,A;if(s=r[0],l=r[1],h=r[2],s===0)return[0,0,0];var k=.0011070564598794539;return i=i||"D65",e=e||2,g=Np.whitepoint[e][i][0],y=Np.whitepoint[e][i][1],_=Np.whitepoint[e][i][2],w=4*g/(g+15*y+3*_),A=9*y/(g+15*y+3*_),n=l/(13*s)+w||0,o=h/(13*s)+A||0,m=s>8?y*Math.pow((s+16)/116,3):y*s*k,p=m*9*n/(4*o)||0,f=m*(12-3*n-20*o)/(4*o)||0,[p,m,f]}},x6=y9e;Np.luv=function(r,i,e){var n,o,s,l,h,p,m,f,g,y,_,w,A,k=.008856451679035631,R=903.2962962962961;i=i||"D65",e=e||2,g=Np.whitepoint[e][i][0],y=Np.whitepoint[e][i][1],_=Np.whitepoint[e][i][2],w=4*g/(g+15*y+3*_),A=9*y/(g+15*y+3*_),p=r[0],m=r[1],f=r[2],n=4*p/(p+15*m+3*f)||0,o=9*m/(p+15*m+3*f)||0;var $=m/y;return s=$<=k?R*$:116*Math.pow($,1/3)-16,l=13*s*(n-w),h=13*s*(o-A),[s,l,h]};var bye={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(r){var i=r[0],e=r[1],n=r[2],o,s,l;return l=n/360*2*Math.PI,o=e*Math.cos(l),s=e*Math.sin(l),[i,o,s]},xyz:function(r){return x6.xyz(bye.luv(r))}},wye=bye;x6.lchuv=function(r){var i=r[0],e=r[1],n=r[2],o=Math.sqrt(e*e+n*n),s=Math.atan2(n,e),l=s*360/2/Math.PI;return l<0&&(l+=360),[i,o,l]};Np.lchuv=function(r){return x6.lchuv(Np.luv(r))};var kZ={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var xye=v9e,Cye={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function v9e(r){var i,e=[],n=1,o;if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(r=String(r).toLowerCase(),kZ[r])e=kZ[r].slice(),o="rgb";else if(r==="transparent")n=0,o="rgb",e=[0,0,0];else if(r[0]==="#"){var s=r.slice(1),l=s.length,h=l<=4;n=1,h?(e=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],l===4&&(n=parseInt(s[3]+s[3],16)/255)):(e=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],l===8&&(n=parseInt(s[6]+s[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),o="rgb"}else if(i=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(r)){var p=i[1];o=p.replace(/a$/,"");var m=o==="cmyk"?4:o==="gray"?1:3;e=i[2].trim().split(/\s*[,\/]\s*|\s+/),o==="color"&&(o=e.shift()),e=e.map(function(f,g){if(f[f.length-1]==="%")return f=parseFloat(f)/100,g===3?f:o==="rgb"?f*255:o[0]==="h"||o[0]==="l"&&!g?f*100:o==="lab"?f*125:o==="lch"?g<2?f*150:f*360:o[0]==="o"&&!g?f:o==="oklab"?f*.4:o==="oklch"?g<2?f*.4:f*360:f;if(o[g]==="h"||g===2&&o[o.length-1]==="h"){if(Cye[f]!==void 0)return Cye[f];if(f.endsWith("deg"))return parseFloat(f);if(f.endsWith("turn"))return parseFloat(f)*360;if(f.endsWith("grad"))return parseFloat(f)*360/400;if(f.endsWith("rad"))return parseFloat(f)*180/Math.PI}return f==="none"?0:parseFloat(f)}),n=e.length>m?e.pop():1}else/[0-9](?:\s|\/|,)/.test(r)&&(e=r.match(/([0-9]+)/g).map(function(f){return parseFloat(f)}),o=r.match(/([a-z])/ig)?.join("")?.toLowerCase()||"rgb");return{space:o,values:e,alpha:n}}var b9e={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var i=r[0]/360,e=r[1]/100,n=r[2]/100,o,s,l,h,p,m=0;if(e===0)return p=n*255,[p,p,p];for(s=n<.5?n*(1+e):n+e-n*e,o=2*n-s,h=[0,0,0];m<3;)l=i+1/3*-(m-1),l<0?l++:l>1&&l--,p=6*l<1?o+(s-o)*6*l:2*l<1?s:3*l<2?o+(s-o)*(2/3-l)*6:o,h[m++]=p*255;return h}},S6=b9e;kv.hsl=function(r){var i=r[0]/255,e=r[1]/255,n=r[2]/255,o=Math.min(i,e,n),s=Math.max(i,e,n),l=s-o,h,p,m;return s===o?h=0:i===s?h=(e-n)/l:e===s?h=2+(n-i)/l:n===s&&(h=4+(i-e)/l),h=Math.min(h*60,360),h<0&&(h+=360),m=(o+s)/2,s===o?p=0:m<=.5?p=l/(s+o):p=l/(2-s-o),[h,p*100,m*100]};function OZ(r){Array.isArray(r)&&r.raw&&(r=String.raw(...arguments)),r instanceof Number&&(r=+r);var i,e,n,o=xye(r);if(!o.space)return[];let s=o.space[0]==="h"?S6.min:kv.min,l=o.space[0]==="h"?S6.max:kv.max;return i=Array(3),i[0]=Math.min(Math.max(o.values[0],s[0]),l[0]),i[1]=Math.min(Math.max(o.values[1],s[1]),l[1]),i[2]=Math.min(Math.max(o.values[2],s[2]),l[2]),o.space[0]==="h"&&(i=S6.rgb(i)),i.push(Math.min(Math.max(o.alpha,0),1)),i}function Sye(r){return typeof r=="string"?r:XP(r)}var w9e=1024,QP={},PZ=0;function Iye(r){if(r.length===4)return r;let i=r.slice();return i[3]=1,i}function RZ(r){let i=Np.lchuv(kv.xyz(r));return i[3]=r[3],i}function Tye(r){let i=Np.rgb(wye.xyz(r));return i[3]=r[3],i}function I6(r){if(QP.hasOwnProperty(r))return QP[r];if(PZ>=w9e){let e=0;for(let n in QP)e++&3||(delete QP[n],--PZ)}let i=OZ(r);if(i.length!==4)throw new Error('Failed to parse "'+r+'" as color');for(let e of i)if(isNaN(e))throw new Error('Failed to parse "'+r+'" as color');return FZ(i),QP[r]=i,++PZ,i}function Qc(r){return Array.isArray(r)?r:I6(r)}function FZ(r){return r[0]=ss(r[0]+.5|0,0,255),r[1]=ss(r[1]+.5|0,0,255),r[2]=ss(r[2]+.5|0,0,255),r[3]=ss(r[3],0,1),r}function XP(r){let i=r[0];i!=(i|0)&&(i=i+.5|0);let e=r[1];e!=(e|0)&&(e=e+.5|0);let n=r[2];n!=(n|0)&&(n=n+.5|0);let o=r[3]===void 0?1:Math.round(r[3]*1e3)/1e3;return"rgba("+i+","+e+","+n+","+o+")"}function Aye(r){try{return I6(r),!0}catch{return!1}}function Cs(r,i,e,n){let o;return e&&e.length?o=e.shift():Tj?o=new OffscreenCanvas(r||300,i||300):o=document.createElement("canvas"),r&&(o.width=r),i&&(o.height=i),o.getContext("2d",n)}var LZ;function JP(){return LZ||(LZ=Cs(1,1)),LZ}function Ov(r){let i=r.canvas;i.width=1,i.height=1,r.clearRect(0,0,1,1)}function NZ(r,i){let e=i.parentNode;e&&e.replaceChild(r,i)}function eR(r){return r&&r.parentNode?r.parentNode.removeChild(r):null}function Eye(r){for(;r.lastChild;)r.removeChild(r.lastChild)}function Mye(r,i){let e=r.childNodes;for(let n=0;;++n){let o=e[n],s=i[n];if(!o&&!s)break;if(o!==s){if(!o){r.appendChild(s);continue}if(!s){r.removeChild(o),--n;continue}r.insertBefore(s,o)}}}var BZ=class extends P_{constructor(i,e,n,o){super(),this.extent=i,this.pixelRatio_=n,this.resolution=e,this.state=typeof o=="function"?en.IDLE:o,this.image_=null,this.loader=typeof o=="function"?o:null}changed(){this.dispatchEvent(Zi.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==en.IDLE&&this.loader){this.state=en.LOADING,this.changed();let i=this.getResolution(),e=Array.isArray(i)?i[0]:i;QE(()=>this.loader(this.getExtent(),e,this.getPixelRatio())).then(n=>{"image"in n&&(this.image_=n.image),"extent"in n&&(this.extent=n.extent),"resolution"in n&&(this.resolution=n.resolution),"pixelRatio"in n&&(this.pixelRatio_=n.pixelRatio),(n instanceof HTMLImageElement||n instanceof ImageBitmap||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement)&&(this.image_=n),this.state=en.LOADED}).catch(n=>{this.state=en.ERROR,console.error(n)}).finally(()=>this.changed())}}setImage(i){this.image_=i}setResolution(i){this.resolution=i}};function Dye(r,i,e){let n=r,o=!0,s=!1,l=!1,h=[XE(n,Zi.LOAD,function(){l=!0,s||i()})];return n.src&&Aj?(s=!0,n.decode().then(function(){o&&i()}).catch(function(p){o&&(l?i():e())})):h.push(XE(n,Zi.ERROR,e)),function(){o=!1,h.forEach(Fo)}}function C9e(r,i){return new Promise((e,n)=>{function o(){l(),e(r)}function s(){l(),n(new Error("Image load error"))}function l(){r.removeEventListener("load",o),r.removeEventListener("error",s)}r.addEventListener("load",o),r.addEventListener("error",s),i&&(r.src=i)})}function jZ(r,i){return i&&(r.src=i),r.src&&Aj?new Promise((e,n)=>r.decode().then(()=>e(r)).catch(o=>r.complete&&r.width?e(r):n(o))):C9e(r)}function M1(r,i){return i&&(r.src=i),r.src&&Aj&&y0e?r.decode().then(()=>createImageBitmap(r)).catch(e=>{if(r.complete&&r.width)return r;throw e}):jZ(r)}var T6=BZ;var $Z=class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let i=0;for(let e in this.cache_){let n=this.cache_[e];!(i++&3)&&!n.hasListener()&&(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(i,e,n){let o=VZ(i,e,n);return o in this.cache_?this.cache_[o]:null}getPattern(i,e,n){let o=VZ(i,e,n);return o in this.patternCache_?this.patternCache_[o]:null}set(i,e,n,o,s){let l=VZ(i,e,n),h=l in this.cache_;this.cache_[l]=o,s&&(o.getImageState()===en.IDLE&&o.load(),o.getImageState()===en.LOADING?o.ready().then(()=>{this.patternCache_[l]=JP().createPattern(o.getImage(1),"repeat")}):this.patternCache_[l]=JP().createPattern(o.getImage(1),"repeat")),h||++this.cacheSize_}setSize(i){this.maxCacheSize_=i,this.expire()}};function VZ(r,i,e){let n=e?Qc(e):"null";return i+":"+r+":"+n}var Pm=new $Z;var tR=null,A6=class extends P_{constructor(i,e,n,o,s){super(),this.hitDetectionImage_=null,this.image_=i,this.crossOrigin_=n,this.canvas_={},this.color_=s,this.imageState_=o===void 0?en.IDLE:o,this.size_=i&&i.width&&i.height?[i.width,i.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===en.LOADED){tR||(tR=Cs(1,1,void 0,{willReadFrequently:!0})),tR.drawImage(this.image_,0,0);try{tR.getImageData(0,0,1,1),this.tainted_=!1}catch{tR=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Zi.CHANGE)}handleImageError_(){this.imageState_=en.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=en.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(i){return this.image_||this.initializeImage_(),this.replaceColor_(i),this.canvas_[i]?this.canvas_[i]:this.image_}getPixelRatio(i){return this.replaceColor_(i),this.canvas_[i]?i:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){let i=this.size_[0],e=this.size_[1],n=Cs(i,e);n.fillRect(0,0,i,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===en.IDLE){this.image_||this.initializeImage_(),this.imageState_=en.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&jZ(this.image_,this.src_).then(i=>{this.image_=i,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(i){if(!this.color_||this.canvas_[i]||this.imageState_!==en.LOADED)return;let e=this.image_,n=document.createElement("canvas");n.width=Math.ceil(e.width*i),n.height=Math.ceil(e.height*i);let o=n.getContext("2d");o.scale(i,i),o.drawImage(e,0,0),o.globalCompositeOperation="multiply",o.fillStyle=Sye(this.color_),o.fillRect(0,0,n.width/i,n.height/i),o.globalCompositeOperation="destination-in",o.drawImage(e,0,0),this.canvas_[i]=n}ready(){return this.ready_||(this.ready_=new Promise(i=>{this.imageState_===en.LOADED||this.imageState_===en.ERROR?i():this.addEventListener(Zi.CHANGE,function e(){(this.imageState_===en.LOADED||this.imageState_===en.ERROR)&&(this.removeEventListener(Zi.CHANGE,e),i())})})),this.ready_}};function uM(r,i,e,n,o,s){let l=i===void 0?void 0:Pm.get(i,e,o);return l||(l=new A6(r,r instanceof HTMLImageElement?r.src||void 0:i,e,n,o),Pm.set(i,e,o,l,s)),s&&l&&!Pm.getPattern(i,e,o)&&Pm.set(i,e,o,l,s),l}var kye=A6;function Bp(r){return r?Array.isArray(r)?XP(r):typeof r=="object"&&"src"in r?x9e(r):r:null}function x9e(r){if(!r.offset||!r.size)return Pm.getPattern(r.src,"anonymous",r.color);let i=r.src+":"+r.offset,e=Pm.getPattern(i,void 0,r.color);if(e)return e;let n=Pm.get(r.src,"anonymous",null);if(n.getImageState()!==en.LOADED)return null;let o=Cs(r.size[0],r.size[1]);return o.drawImage(n.getImage(1),r.offset[0],r.offset[1],r.size[0],r.size[1],0,0,r.size[0],r.size[1]),uM(o.canvas,i,void 0,en.LOADED,r.color,!0),Pm.getPattern(i,void 0,r.color)}var iR="ol-hidden";var F_="ol-unselectable";var hM="ol-control",UZ="ol-collapsed",S9e=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Oye=["style","variant","weight","size","lineHeight","family"],zZ=function(r){let i=r.match(S9e);if(!i)return null;let e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,o=Oye.length;n<o;++n){let s=i[n+1];s!==void 0&&(e[Oye[n]]=s)}return e.families=e.family.split(/,\s?/),e};var M6="10px sans-serif",Td="#000",N_="round",jp=[],Vp=0,B_="round",Pv=10,Rv="#000",D1="center",VS="middle",Fv=[0,0,0,0],Lv=1,L_=new yc,pM=null,GZ,HZ={},Pye=function(){let i="32px ",e=["monospace","serif"],n=e.length,o="wmytzilWMYTZIL@#/&?$%10\uF013",s,l;function h(m,f,g){let y=!0;for(let _=0;_<n;++_){let w=e[_];if(l=E6(m+" "+f+" "+i+w,o),g!=w){let A=E6(m+" "+f+" "+i+g+","+w,o);y=y&&A!=l}}return!!y}function p(){let m=!0,f=L_.getKeys();for(let g=0,y=f.length;g<y;++g){let _=f[g];L_.get(_)<100&&(h.apply(this,_.split(`
`))?(xf(HZ),pM=null,GZ=void 0,L_.set(_,100)):(L_.set(_,L_.get(_)+1,!0),m=!1))}m&&(clearInterval(s),s=void 0)}return function(m){let f=zZ(m);if(!f)return;let g=f.families;for(let y=0,_=g.length;y<_;++y){let w=g[y],A=f.style+`
`+f.weight+`
`+w;L_.get(A)===void 0&&(L_.set(A,100,!0),h(f.style,f.weight,w)||(L_.set(A,0,!0),s===void 0&&(s=setInterval(p,32))))}}}(),I9e=function(){let r;return function(i){let e=HZ[i];if(e==null){if(Tj){let n=zZ(i),o=Rye(i,"\u017Dg");e=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(o.actualBoundingBoxAscent+o.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=i,document.body.appendChild(r),e=r.offsetHeight,document.body.removeChild(r);HZ[i]=e}return e}}();function Rye(r,i){return pM||(pM=Cs(1,1)),r!=GZ&&(pM.font=r,GZ=pM.font),pM.measureText(i)}function E6(r,i){return Rye(r,i).width}function WZ(r,i,e){if(i in e)return e[i];let n=i.split(`
`).reduce((o,s)=>Math.max(o,E6(r,s)),0);return e[i]=n,n}function Fye(r,i){let e=[],n=[],o=[],s=0,l=0,h=0,p=0;for(let m=0,f=i.length;m<=f;m+=2){let g=i[m];if(g===`
`||m===f){s=Math.max(s,l),o.push(l),l=0,h+=p;continue}let y=i[m+1]||r.font,_=E6(y,g);e.push(_),l+=_;let w=I9e(y);n.push(w),p=Math.max(p,w)}return{width:s,height:h,widths:e,heights:n,lineWidths:o}}function Lye(r,i,e,n,o,s,l,h,p,m,f){r.save(),e!==1&&(r.globalAlpha===void 0?r.globalAlpha=g=>g.globalAlpha*=e:r.globalAlpha*=e),i&&r.transform.apply(r,i),n.contextInstructions?(r.translate(p,m),r.scale(f[0],f[1]),T9e(n,r)):f[0]<0||f[1]<0?(r.translate(p,m),r.scale(f[0],f[1]),r.drawImage(n,o,s,l,h,0,0,l,h)):r.drawImage(n,o,s,l,h,p,m,l*f[0],h*f[1]),r.restore()}function T9e(r,i){let e=r.contextInstructions;for(let n=0,o=e.length;n<o;n+=2)Array.isArray(e[n+1])?i[e[n]].apply(i,e[n+1]):i[e[n]]=e[n+1]}var qZ=class r extends cM{constructor(i){super({opacity:1,rotateWithView:i.rotateWithView!==void 0?i.rotateWithView:!1,rotation:i.rotation!==void 0?i.rotation:0,scale:i.scale!==void 0?i.scale:1,displacement:i.displacement!==void 0?i.displacement:[0,0],declutterMode:i.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=i.fill!==void 0?i.fill:null,this.origin_=[0,0],this.points_=i.points,this.radius_=i.radius,this.radius2_=i.radius2,this.angle_=i.angle!==void 0?i.angle:0,this.stroke_=i.stroke!==void 0?i.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?en.LOADING:en.LOADED,this.imageState_===en.LOADING&&this.ready().then(()=>this.imageState_=en.LOADED),this.render()}clone(){let i=this.getScale(),e=new r({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(i)?i.slice():i,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){let i=this.size_,e=this.getDisplacement(),n=this.getScaleArray();return[i[0]/2-e[0]/n[0],i[1]/2+e[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(i){this.fill_=i,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(i){let e=this.canvases_[i];if(!e){let n=this.renderOptions_,o=Cs(n.size*i,n.size*i);this.draw_(n,o,i),e=o.canvas,this.canvases_[i]=e}return e}getPixelRatio(i){return i}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(i){this.stroke_=i,this.render()}listenImageChange(i){}load(){}unlistenImageChange(i){}calculateLineJoinSize_(i,e,n){if(e===0||this.points_===1/0||i!=="bevel"&&i!=="miter")return e;let o=this.radius_,s=this.radius2_===void 0?o:this.radius2_;if(o<s){let ge=o;o=s,s=ge}let l=this.radius2_===void 0?this.points_:this.points_*2,h=2*Math.PI/l,p=s*Math.sin(h),m=Math.sqrt(s*s-p*p),f=o-m,g=Math.sqrt(p*p+f*f),y=g/p;if(i==="miter"&&y<=n)return y*e;let _=e/2/y,w=e/2*(f/g),k=Math.sqrt((o+_)*(o+_)+w*w)-o;if(this.radius2_===void 0||i==="bevel")return k*2;let R=o*Math.sin(h),$=Math.sqrt(o*o-R*R),H=s-$,se=Math.sqrt(R*R+H*H)/R;if(se<=n){let ge=se*e/2-s-o;return 2*Math.max(k,ge)}return k*2}createRenderOptions(){let i=N_,e=B_,n=0,o=null,s=0,l,h=0;this.stroke_&&(l=Bp(this.stroke_.getColor()??Rv),h=this.stroke_.getWidth()??Lv,o=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,e=this.stroke_.getLineJoin()??B_,i=this.stroke_.getLineCap()??N_,n=this.stroke_.getMiterLimit()??Pv);let p=this.calculateLineJoinSize_(e,h,n),m=Math.max(this.radius_,this.radius2_||0),f=Math.ceil(2*m+p);return{strokeStyle:l,strokeWidth:h,size:f,lineCap:i,lineDash:o,lineDashOffset:s,lineJoin:e,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();let i=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[i,i]}draw_(i,e,n){if(e.scale(n,n),e.translate(i.size/2,i.size/2),this.createPath_(e),this.fill_){let o=this.fill_.getColor();o===null&&(o=Td),e.fillStyle=Bp(o),e.fill()}i.strokeStyle&&(e.strokeStyle=i.strokeStyle,e.lineWidth=i.strokeWidth,i.lineDash&&(e.setLineDash(i.lineDash),e.lineDashOffset=i.lineDashOffset),e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.miterLimit=i.miterLimit,e.stroke())}createHitDetectionCanvas_(i){let e;if(this.fill_){let n=this.fill_.getColor(),o=0;typeof n=="string"&&(n=Qc(n)),n===null?o=1:Array.isArray(n)&&(o=n.length===4?n[3]:1),o===0&&(e=Cs(i.size,i.size),this.drawHitDetectionCanvas_(i,e))}return e?e.canvas:this.getImage(1)}createPath_(i){let e=this.points_,n=this.radius_;if(e===1/0)i.arc(0,0,n,0,2*Math.PI);else{let o=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(e*=2);let s=this.angle_-Math.PI/2,l=2*Math.PI/e;for(let h=0;h<e;h++){let p=s+h*l,m=h%2===0?n:o;i.lineTo(m*Math.cos(p),m*Math.sin(p))}i.closePath()}}drawHitDetectionCanvas_(i,e){e.translate(i.size/2,i.size/2),this.createPath_(e),e.fillStyle=Td,e.fill(),i.strokeStyle&&(e.strokeStyle=i.strokeStyle,e.lineWidth=i.strokeWidth,i.lineDash&&(e.setLineDash(i.lineDash),e.lineDashOffset=i.lineDashOffset),e.lineJoin=i.lineJoin,e.miterLimit=i.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}},$p=qZ;var YZ=class r extends $p{constructor(i){i=i||{radius:5},super({points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,scale:i.scale!==void 0?i.scale:1,rotation:i.rotation!==void 0?i.rotation:0,rotateWithView:i.rotateWithView!==void 0?i.rotateWithView:!1,displacement:i.displacement!==void 0?i.displacement:[0,0],declutterMode:i.declutterMode})}clone(){let i=this.getScale(),e=new r({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(i)?i.slice():i,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(i){this.radius_=i,this.render()}},yl=YZ;var KZ=class r{constructor(i){i=i||{},this.patternImage_=null,this.color_=null,i.color!==void 0&&this.setColor(i.color)}clone(){let i=this.getColor();return new r({color:Array.isArray(i)?i.slice():i||void 0})}getColor(){return this.color_}setColor(i){if(i!==null&&typeof i=="object"&&"src"in i){let e=uM(null,i.src,"anonymous",void 0,i.offset?null:i.color?i.color:null,!(i.offset&&i.size));e.ready().then(()=>{this.patternImage_=null}),e.getImageState()===en.IDLE&&e.load(),e.getImageState()===en.LOADING&&(this.patternImage_=e)}this.color_=i}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}},sr=KZ;function Nye(r,i,e,n){return e!==void 0&&n!==void 0?[e/r,n/i]:e!==void 0?e/r:n!==void 0?n/i:1}var ZZ=class r extends cM{constructor(i){i=i||{};let e=i.opacity!==void 0?i.opacity:1,n=i.rotation!==void 0?i.rotation:0,o=i.scale!==void 0?i.scale:1,s=i.rotateWithView!==void 0?i.rotateWithView:!1;super({opacity:e,rotation:n,scale:o,displacement:i.displacement!==void 0?i.displacement:[0,0],rotateWithView:s,declutterMode:i.declutterMode}),this.anchor_=i.anchor!==void 0?i.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=i.anchorOrigin!==void 0?i.anchorOrigin:"top-left",this.anchorXUnits_=i.anchorXUnits!==void 0?i.anchorXUnits:"fraction",this.anchorYUnits_=i.anchorYUnits!==void 0?i.anchorYUnits:"fraction",this.crossOrigin_=i.crossOrigin!==void 0?i.crossOrigin:null;let l=i.img!==void 0?i.img:null,h=i.src;Nn(!(h!==void 0&&l),"`image` and `src` cannot be provided at the same time"),(h===void 0||h.length===0)&&l&&(h=l.src||Xi(l)),Nn(h!==void 0&&h.length>0,"A defined and non-empty `src` or `image` must be provided"),Nn(!((i.width!==void 0||i.height!==void 0)&&i.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let p;if(i.src!==void 0?p=en.IDLE:l!==void 0&&(l instanceof HTMLImageElement?l.complete?p=l.src?en.LOADED:en.IDLE:p=en.LOADING:p=en.LOADED),this.color_=i.color!==void 0?Qc(i.color):null,this.iconImage_=uM(l,h,this.crossOrigin_,p,this.color_),this.offset_=i.offset!==void 0?i.offset:[0,0],this.offsetOrigin_=i.offsetOrigin!==void 0?i.offsetOrigin:"top-left",this.origin_=null,this.size_=i.size!==void 0?i.size:null,i.width!==void 0||i.height!==void 0){let m,f;if(i.size)[m,f]=i.size;else{let g=this.getImage(1);if(g.width&&g.height)m=g.width,f=g.height;else if(g instanceof HTMLImageElement){this.initialOptions_=i;let y=()=>{if(this.unlistenImageChange(y),!this.initialOptions_)return;let _=this.iconImage_.getSize();this.setScale(Nye(_[0],_[1],i.width,i.height))};this.listenImageChange(y);return}}m!==void 0&&this.setScale(Nye(m,f,i.width,i.height))}}clone(){let i,e,n;return this.initialOptions_?(e=this.initialOptions_.width,n=this.initialOptions_.height):(i=this.getScale(),i=Array.isArray(i)?i.slice():i),new r({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:i,width:e,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let i=this.normalizedAnchor_;if(!i){i=this.anchor_;let o=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!o)return null;i=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(i[0]*=o[0]),this.anchorYUnits_=="fraction"&&(i[1]*=o[1])}if(this.anchorOrigin_!="top-left"){if(!o)return null;i===this.anchor_&&(i=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(i[0]=-i[0]+o[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(i[1]=-i[1]+o[1])}this.normalizedAnchor_=i}let e=this.getDisplacement(),n=this.getScaleArray();return[i[0]-e[0]/n[0],i[1]+e[1]/n[1]]}setAnchor(i){this.anchor_=i,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(i){return this.iconImage_.getImage(i)}getPixelRatio(i){return this.iconImage_.getPixelRatio(i)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let i=this.offset_;if(this.offsetOrigin_!="top-left"){let e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;i=i.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(i[0]=n[0]-e[0]-i[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(i[1]=n[1]-e[1]-i[1])}return this.origin_=i,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){let i=this.getScaleArray();if(this.size_)return this.size_[0]*i[0];if(this.iconImage_.getImageState()==en.LOADED)return this.iconImage_.getSize()[0]*i[0]}getHeight(){let i=this.getScaleArray();if(this.size_)return this.size_[1]*i[1];if(this.iconImage_.getImageState()==en.LOADED)return this.iconImage_.getSize()[1]*i[1]}setScale(i){delete this.initialOptions_,super.setScale(i)}listenImageChange(i){this.iconImage_.addEventListener(Zi.CHANGE,i)}load(){this.iconImage_.load()}unlistenImageChange(i){this.iconImage_.removeEventListener(Zi.CHANGE,i)}ready(){return this.iconImage_.ready()}},Tu=ZZ;var QZ=class r{constructor(i){i=i||{},this.color_=i.color!==void 0?i.color:null,this.lineCap_=i.lineCap,this.lineDash_=i.lineDash!==void 0?i.lineDash:null,this.lineDashOffset_=i.lineDashOffset,this.lineJoin_=i.lineJoin,this.miterLimit_=i.miterLimit,this.width_=i.width}clone(){let i=this.getColor();return new r({color:Array.isArray(i)?i.slice():i||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(i){this.color_=i}setLineCap(i){this.lineCap_=i}setLineDash(i){this.lineDash_=i}setLineDashOffset(i){this.lineDashOffset_=i}setLineJoin(i){this.lineJoin_=i}setMiterLimit(i){this.miterLimit_=i}setWidth(i){this.width_=i}},ir=QZ;var k1=class r{constructor(i){i=i||{},this.geometry_=null,this.geometryFunction_=Bye,i.geometry!==void 0&&this.setGeometry(i.geometry),this.fill_=i.fill!==void 0?i.fill:null,this.image_=i.image!==void 0?i.image:null,this.renderer_=i.renderer!==void 0?i.renderer:null,this.hitDetectionRenderer_=i.hitDetectionRenderer!==void 0?i.hitDetectionRenderer:null,this.stroke_=i.stroke!==void 0?i.stroke:null,this.text_=i.text!==void 0?i.text:null,this.zIndex_=i.zIndex}clone(){let i=this.getGeometry();return i&&typeof i=="object"&&(i=i.clone()),new r({geometry:i??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(i){this.renderer_=i}setHitDetectionRenderer(i){this.hitDetectionRenderer_=i}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(i){this.fill_=i}getImage(){return this.image_}setImage(i){this.image_=i}getStroke(){return this.stroke_}setStroke(i){this.stroke_=i}getText(){return this.text_}setText(i){this.text_=i}getZIndex(){return this.zIndex_}setGeometry(i){typeof i=="function"?this.geometryFunction_=i:typeof i=="string"?this.geometryFunction_=function(e){return e.get(i)}:i?i!==void 0&&(this.geometryFunction_=function(){return i}):this.geometryFunction_=Bye,this.geometry_=i}setZIndex(i){this.zIndex_=i}};function jye(r){let i;if(typeof r=="function")i=r;else{let e;Array.isArray(r)?e=r:(Nn(typeof r.getZIndex=="function","Expected an `Style` or an array of `Style`"),e=[r]),i=function(){return e}}return i}var XZ=null;function Vye(r,i){if(!XZ){let e=new sr({color:"rgba(255,255,255,0.4)"}),n=new ir({color:"#3399CC",width:1.25});XZ=[new k1({image:new yl({fill:e,stroke:n,radius:5}),fill:e,stroke:n})]}return XZ}function mM(){let r={},i=[255,255,255,1],e=[0,153,255,1],n=3;return r.Polygon=[new k1({fill:new sr({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new k1({stroke:new ir({color:i,width:n+2})}),new k1({stroke:new ir({color:e,width:n})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new k1({image:new yl({radius:n*2,fill:new sr({color:e}),stroke:new ir({color:i,width:n/2})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function Bye(r){return r.getGeometry()}var Mn=k1;var A9e="#333",JZ=class r{constructor(i){i=i||{},this.font_=i.font,this.rotation_=i.rotation,this.rotateWithView_=i.rotateWithView,this.scale_=i.scale,this.scaleArray_=Oa(i.scale!==void 0?i.scale:1),this.text_=i.text,this.textAlign_=i.textAlign,this.justify_=i.justify,this.repeat_=i.repeat,this.textBaseline_=i.textBaseline,this.fill_=i.fill!==void 0?i.fill:new sr({color:A9e}),this.maxAngle_=i.maxAngle!==void 0?i.maxAngle:Math.PI/4,this.placement_=i.placement!==void 0?i.placement:"point",this.overflow_=!!i.overflow,this.stroke_=i.stroke!==void 0?i.stroke:null,this.offsetX_=i.offsetX!==void 0?i.offsetX:0,this.offsetY_=i.offsetY!==void 0?i.offsetY:0,this.backgroundFill_=i.backgroundFill?i.backgroundFill:null,this.backgroundStroke_=i.backgroundStroke?i.backgroundStroke:null,this.padding_=i.padding===void 0?null:i.padding,this.declutterMode_=i.declutterMode}clone(){let i=this.getScale();return new r({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(i)?i.slice():i,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(i){this.overflow_=i}setFont(i){this.font_=i}setMaxAngle(i){this.maxAngle_=i}setOffsetX(i){this.offsetX_=i}setOffsetY(i){this.offsetY_=i}setPlacement(i){this.placement_=i}setRepeat(i){this.repeat_=i}setRotateWithView(i){this.rotateWithView_=i}setFill(i){this.fill_=i}setRotation(i){this.rotation_=i}setScale(i){this.scale_=i,this.scaleArray_=Oa(i!==void 0?i:1)}setStroke(i){this.stroke_=i}setText(i){this.text_=i}setTextAlign(i){this.textAlign_=i}setJustify(i){this.justify_=i}setTextBaseline(i){this.textBaseline_=i}setBackgroundFill(i){this.backgroundFill_=i}setBackgroundStroke(i){this.backgroundStroke_=i}setPadding(i){this.padding_=i}},Pl=JZ;var mR={};am(mR,{EsriJSON:()=>Nv,GML:()=>gM,GPX:()=>GS,GeoJSON:()=>hs,IGC:()=>Xye,IIIFInfo:()=>eve,KML:()=>qS,MVT:()=>dR,OWS:()=>z6,Polyline:()=>Lve,TopoJSON:()=>H6,WFS:()=>U_,WKB:()=>Vbe,WKT:()=>z_,WMSCapabilities:()=>eV,WMSGetFeatureInfo:()=>pR,WMTSCapabilities:()=>tV});var E9e={Point:k9e,LineString:O9e,Polygon:L9e,MultiPoint:R9e,MultiLineString:P9e,MultiPolygon:F9e},M9e={Point:N9e,LineString:B9e,Polygon:j9e,MultiPoint:$9e,MultiLineString:V9e,MultiPolygon:U9e},tQ=class extends lM{constructor(i){i=i||{},super(),this.geometryName_=i.geometryName}readFeatureFromObject(i,e,n){let o=i,s=$ye(o.geometry,e),l=new An;if(this.geometryName_&&l.setGeometryName(this.geometryName_),l.setGeometry(s),o.attributes){l.setProperties(o.attributes,!0);let h=o.attributes[n];h!==void 0&&l.setId(h)}return l}readFeaturesFromObject(i,e){if(e=e||{},i.features){let n=i,o=[],s=n.features;for(let l=0,h=s.length;l<h;++l)o.push(this.readFeatureFromObject(s[l],e,i.objectIdFieldName));return o}return[this.readFeatureFromObject(i,e)]}readGeometryFromObject(i,e){return $ye(i,e)}readProjectionFromObject(i){if(i.spatialReference&&i.spatialReference.wkid!==void 0){let n=i.spatialReference.wkid;return Vi("EPSG:"+n)}return null}writeGeometryObject(i,e){return Uye(i,this.adaptOptions(e))}writeFeatureObject(i,e){e=this.adaptOptions(e);let n={};if(!i.hasProperties())return n.attributes={},n;let o=i.getProperties(),s=i.getGeometry();if(s){n.geometry=Uye(s,e);let l=e&&(e.dataProjection||e.featureProjection);l&&(n.geometry.spatialReference={wkid:Number(Vi(l).getCode().split(":").pop())}),delete o[i.getGeometryName()]}return Cd(o)?n.attributes={}:n.attributes=o,n}writeFeaturesObject(i,e){e=this.adaptOptions(e);let n=[];for(let o=0,s=i.length;o<s;++o)n.push(this.writeFeatureObject(i[o],e));return{features:n}}};function $ye(r,i){if(!r)return null;let e;if(typeof r.x=="number"&&typeof r.y=="number")e="Point";else if(r.points)e="MultiPoint";else if(r.paths)r.paths.length===1?e="LineString":e="MultiLineString";else if(r.rings){let o=r,s=fM(o),l=D9e(o.rings,s);l.length===1?(e="Polygon",r=Object.assign({},r,{rings:l[0]})):(e="MultiPolygon",r=Object.assign({},r,{rings:l}))}let n=E9e[e];return Co(n(r),!1,i)}function D9e(r,i){let e=[],n=[],o=[],s,l;for(s=0,l=r.length;s<l;++s)e.length=0,Dv(e,0,r[s],i.length),qP(e,0,e.length,i.length)?n.push([r[s]]):o.push(r[s]);for(;o.length;){let h=o.shift(),p=!1;for(s=n.length-1;s>=0;s--){let m=n[s][0];if(fc(new A1(m).getExtent(),new A1(h).getExtent())){n[s].push(h),p=!0;break}}p||n.push([h.reverse()])}return n}function k9e(r){let i;return r.m!==void 0&&r.z!==void 0?i=new Kn([r.x,r.y,r.z,r.m],"XYZM"):r.z!==void 0?i=new Kn([r.x,r.y,r.z],"XYZ"):r.m!==void 0?i=new Kn([r.x,r.y,r.m],"XYM"):i=new Kn([r.x,r.y]),i}function O9e(r){let i=fM(r);return new ao(r.paths[0],i)}function P9e(r){let i=fM(r);return new Qa(r.paths,i)}function fM(r){let i="XY";return r.hasZ===!0&&r.hasM===!0?i="XYZM":r.hasZ===!0?i="XYZ":r.hasM===!0&&(i="XYM"),i}function R9e(r){let i=fM(r);return new Lc(r.points,i)}function F9e(r){let i=fM(r);return new _l(r.rings,i)}function L9e(r){let i=fM(r);return new Zo(r.rings,i)}function N9e(r,i){let e=r.getCoordinates(),n,o=r.getLayout();if(o==="XYZ")n={x:e[0],y:e[1],z:e[2]};else if(o==="XYM")n={x:e[0],y:e[1],m:e[2]};else if(o==="XYZM")n={x:e[0],y:e[1],z:e[2],m:e[3]};else if(o==="XY")n={x:e[0],y:e[1]};else throw new Error("Invalid geometry layout");return n}function nR(r){let i=r.getLayout();return{hasZ:i==="XYZ"||i==="XYZM",hasM:i==="XYM"||i==="XYZM"}}function B9e(r,i){let e=nR(r);return{hasZ:e.hasZ,hasM:e.hasM,paths:[r.getCoordinates()]}}function j9e(r,i){let e=nR(r);return{hasZ:e.hasZ,hasM:e.hasM,rings:r.getCoordinates(!1)}}function V9e(r,i){let e=nR(r);return{hasZ:e.hasZ,hasM:e.hasM,paths:r.getCoordinates()}}function $9e(r,i){let e=nR(r);return{hasZ:e.hasZ,hasM:e.hasM,points:r.getCoordinates()}}function U9e(r,i){let e=nR(r),n=r.getCoordinates(!1),o=[];for(let s=0;s<n.length;s++)for(let l=n[s].length-1;l>=0;l--)o.push(n[s][l]);return{hasZ:e.hasZ,hasM:e.hasM,rings:o}}function Uye(r,i){let e=M9e[r.getType()];return e(Co(r,!0,i),i)}var Nv=tQ;var Xg="http://www.w3.org/2001/XMLSchema-instance";function fr(r,i){return US().createElementNS(r,i)}function Xc(r,i){return zye(r,i,[]).join("")}function zye(r,i,e){if(r.nodeType==Node.CDATA_SECTION_NODE||r.nodeType==Node.TEXT_NODE)i?e.push(String(r.nodeValue).replace(/(\r\n|\r|\n)/g,"")):e.push(r.nodeValue);else{let n;for(n=r.firstChild;n;n=n.nextSibling)zye(n,i,e)}return e}function Au(r){return"documentElement"in r}function Gye(r,i,e){return r.getAttributeNS(i,e)||""}function Eu(r){return new DOMParser().parseFromString(r,"application/xml")}function $S(r,i){return function(e,n){let o=r.call(i!==void 0?i:this,e,n);if(o!==void 0){let s=n[n.length-1];mr(s,o)}}}function _n(r,i){return function(e,n){let o=r.call(i!==void 0?i:this,e,n);o!==void 0&&n[n.length-1].push(o)}}function Vn(r,i){return function(e,n){let o=r.call(i!==void 0?i:this,e,n);o!==void 0&&(n[n.length-1]=o)}}function Ns(r,i,e){return function(n,o){let s=r.call(e!==void 0?e:this,n,o);if(s!==void 0){let l=o[o.length-1],h=i!==void 0?i:n.localName,p;h in l?p=l[h]:(p=[],l[h]=p),p.push(s)}}}function ct(r,i,e){return function(n,o){let s=r.call(e!==void 0?e:this,n,o);if(s!==void 0){let l=o[o.length-1],h=i!==void 0?i:n.localName;l[h]=s}}}function bt(r,i){return function(e,n,o){r.call(i!==void 0?i:this,e,n,o),o[o.length-1].node.appendChild(e)}}function rQ(r,i){let e,n;return function(o,s,l){if(e===void 0){e={};let h={};h[o.localName]=r,e[o.namespaceURI]=h,n=Pa(o.localName)}Hye(e,n,s,l)}}function Pa(r,i){return function(e,n,o){let l=n[n.length-1].node,h=r;h===void 0&&(h=o);let p=i!==void 0?i:l.namespaceURI;return fr(p,h)}}var bc=Pa();function yh(r,i){let e=i.length,n=new Array(e);for(let o=0;o<e;++o)n[o]=r[i[o]];return n}function ti(r,i,e){e=e!==void 0?e:{};let n,o;for(n=0,o=r.length;n<o;++n)e[r[n]]=i;return e}function Ad(r,i,e,n){let o;for(o=i.firstElementChild;o;o=o.nextElementSibling){let s=r[o.namespaceURI];if(s!==void 0){let l=s[o.localName];l!==void 0&&l.call(n,o,e)}}}function ri(r,i,e,n,o){return n.push(r),Ad(i,e,n,o),n.pop()}function Hye(r,i,e,n,o,s){let l=(o!==void 0?o:e).length,h,p;for(let m=0;m<l;++m)h=e[m],h!==void 0&&(p=i.call(s!==void 0?s:this,h,n,o!==void 0?o[m]:void 0),p!==void 0&&r[p.namespaceURI][p.localName].call(s,p,h,n))}function ur(r,i,e,n,o,s,l){return o.push(r),Hye(i,e,n,o,s,l),o.pop()}var iQ;function Wye(){return iQ===void 0&&typeof XMLSerializer<"u"&&(iQ=new XMLSerializer),iQ}var nQ;function US(){return nQ===void 0&&typeof document<"u"&&(nQ=document.implementation.createDocument("","",null)),nQ}var oQ=class extends R_{constructor(){super(),this.xmlSerializer_=Wye()}getType(){return"xml"}readFeature(i,e){if(!i)return null;if(typeof i=="string"){let n=Eu(i);return this.readFeatureFromDocument(n,e)}return Au(i)?this.readFeatureFromDocument(i,e):this.readFeatureFromNode(i,e)}readFeatureFromDocument(i,e){let n=this.readFeaturesFromDocument(i,e);return n.length>0?n[0]:null}readFeatureFromNode(i,e){return null}readFeatures(i,e){if(!i)return[];if(typeof i=="string"){let n=Eu(i);return this.readFeaturesFromDocument(n,e)}return Au(i)?this.readFeaturesFromDocument(i,e):this.readFeaturesFromNode(i,e)}readFeaturesFromDocument(i,e){let n=[];for(let o=i.firstChild;o;o=o.nextSibling)o.nodeType==Node.ELEMENT_NODE&&mr(n,this.readFeaturesFromNode(o,e));return n}readFeaturesFromNode(i,e){return xn()}readGeometry(i,e){if(!i)return null;if(typeof i=="string"){let n=Eu(i);return this.readGeometryFromDocument(n,e)}return Au(i)?this.readGeometryFromDocument(i,e):this.readGeometryFromNode(i,e)}readGeometryFromDocument(i,e){return null}readGeometryFromNode(i,e){return null}readProjection(i){if(!i)return null;if(typeof i=="string"){let e=Eu(i);return this.readProjectionFromDocument(e)}return Au(i)?this.readProjectionFromDocument(i):this.readProjectionFromNode(i)}readProjectionFromDocument(i){return this.dataProjection}readProjectionFromNode(i){return this.dataProjection}writeFeature(i,e){let n=this.writeFeatureNode(i,e);return this.xmlSerializer_.serializeToString(n)}writeFeatureNode(i,e){return null}writeFeatures(i,e){let n=this.writeFeaturesNode(i,e);return this.xmlSerializer_.serializeToString(n)}writeFeaturesNode(i,e){return null}writeGeometry(i,e){let n=this.writeGeometryNode(i,e);return this.xmlSerializer_.serializeToString(n)}writeGeometryNode(i,e){return null}},Tf=oQ;var Af="http://www.opengis.net/gml",z9e=/^\s*$/,Rl=class extends Tf{constructor(i){super(),i=i||{},this.featureType=i.featureType,this.featureNS=i.featureNS,this.srsName=i.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:_n(this.readFeaturesInternal),featureMembers:Vn(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(i,e){let n=i.localName,o=null;if(n=="FeatureCollection")o=ri([],this.FEATURE_COLLECTION_PARSERS,i,e,this);else if(n=="featureMembers"||n=="featureMember"||n=="member"){let s=e[0],l=s.featureType,h=s.featureNS,p="p",m="p0";if(!l&&i.childNodes){l=[],h={};for(let y=0,_=i.childNodes.length;y<_;++y){let w=i.childNodes[y];if(w.nodeType===1){let A=w.nodeName.split(":").pop();if(!l.includes(A)){let k="",R=0,$=w.namespaceURI;for(let H in h){if(h[H]===$){k=H;break}++R}k||(k=p+R,h[k]=$),l.push(k+":"+A)}}}n!="featureMember"&&(s.featureType=l,s.featureNS=h)}if(typeof h=="string"){let y=h;h={},h[m]=y}let f={},g=Array.isArray(l)?l:[l];for(let y in h){let _={};for(let w=0,A=g.length;w<A;++w)(g[w].includes(":")?g[w].split(":")[0]:m)===y&&(_[g[w].split(":").pop()]=n=="featureMembers"?_n(this.readFeatureElement,this):Vn(this.readFeatureElement,this));f[h[y]]=_}n=="featureMember"||n=="member"?o=ri(void 0,f,i,e):o=ri([],f,i,e)}return o===null&&(o=[]),o}readGeometryOrExtent(i,e){let n=e[0];return n.srsName=i.firstElementChild.getAttribute("srsName"),n.srsDimension=i.firstElementChild.getAttribute("srsDimension"),ri(null,this.GEOMETRY_PARSERS,i,e,this)}readExtentElement(i,e){let n=e[0],o=this.readGeometryOrExtent(i,e);return o?aM(o,n):void 0}readGeometryElement(i,e){let n=e[0],o=this.readGeometryOrExtent(i,e);return o?Co(o,!1,n):void 0}readFeatureElementInternal(i,e,n){let o,s={};for(let p=i.firstElementChild;p;p=p.nextElementSibling){let m,f=p.localName;p.childNodes.length===0||p.childNodes.length===1&&(p.firstChild.nodeType===3||p.firstChild.nodeType===4)?(m=Xc(p,!1),z9e.test(m)&&(m=void 0)):(n&&(m=f==="boundedBy"?this.readExtentElement(p,e):this.readGeometryElement(p,e)),m?f!=="boundedBy"&&(o=f):m=this.readFeatureElementInternal(p,e,!1));let g=p.attributes.length;if(g>0&&!(m instanceof rM)){m={_content_:m};for(let y=0;y<g;y++){let _=p.attributes[y].name;m[_]=p.attributes[y].value}}s[f]?(s[f]instanceof Array||(s[f]=[s[f]]),s[f].push(m)):s[f]=m}if(!n)return s;let l=new An(s);o&&l.setGeometryName(o);let h=i.getAttribute("fid")||Gye(i,this.namespace,"id");return h&&l.setId(h),l}readFeatureElement(i,e){return this.readFeatureElementInternal(i,e,!0)}readPoint(i,e){let n=this.readFlatCoordinatesFromNode(i,e);if(n)return new Kn(n,"XYZ")}readMultiPoint(i,e){let n=ri([],this.MULTIPOINT_PARSERS,i,e,this);if(n)return new Lc(n)}readMultiLineString(i,e){let n=ri([],this.MULTILINESTRING_PARSERS,i,e,this);if(n)return new Qa(n)}readMultiPolygon(i,e){let n=ri([],this.MULTIPOLYGON_PARSERS,i,e,this);if(n)return new _l(n)}pointMemberParser(i,e){Ad(this.POINTMEMBER_PARSERS,i,e,this)}lineStringMemberParser(i,e){Ad(this.LINESTRINGMEMBER_PARSERS,i,e,this)}polygonMemberParser(i,e){Ad(this.POLYGONMEMBER_PARSERS,i,e,this)}readLineString(i,e){let n=this.readFlatCoordinatesFromNode(i,e);if(n)return new ao(n,"XYZ")}readFlatLinearRing(i,e){let n=ri(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,i,e,this);if(n)return n}readLinearRing(i,e){let n=this.readFlatCoordinatesFromNode(i,e);if(n)return new A1(n,"XYZ")}readPolygon(i,e){let n=ri([null],this.FLAT_LINEAR_RINGS_PARSERS,i,e,this);if(n&&n[0]){let o=n[0],s=[o.length],l,h;for(l=1,h=n.length;l<h;++l)mr(o,n[l]),s.push(o.length);return new Zo(o,"XYZ",s)}}readFlatCoordinatesFromNode(i,e){return ri(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,i,e,this)}readGeometryFromNode(i,e){let n=this.readGeometryElement(i,[this.getReadOptions(i,e||{})]);return n||null}readFeaturesFromNode(i,e){let n={featureType:this.featureType,featureNS:this.featureNS};return n&&Object.assign(n,this.getReadOptions(i,e)),this.readFeaturesInternal(i,[n])||[]}readProjectionFromNode(i){return Vi(this.srsName?this.srsName:i.firstElementChild.getAttribute("srsName"))}};Rl.prototype.namespace=Af;Rl.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}};Rl.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}};Rl.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}};Rl.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:_n(Rl.prototype.pointMemberParser),pointMembers:_n(Rl.prototype.pointMemberParser)}};Rl.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:_n(Rl.prototype.lineStringMemberParser),lineStringMembers:_n(Rl.prototype.lineStringMemberParser)}};Rl.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:_n(Rl.prototype.polygonMemberParser),polygonMembers:_n(Rl.prototype.polygonMemberParser)}};Rl.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:_n(Rl.prototype.readFlatCoordinatesFromNode)}};Rl.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:_n(Rl.prototype.readLineString)}};Rl.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:_n(Rl.prototype.readPolygon)}};Rl.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Vn(Rl.prototype.readFlatLinearRing)}};var Zr=Rl;function Bv(r){let i=Xc(r,!1);return O1(i)}function O1(r){let i=/^\s*(true|1)|(false|0)\s*$/.exec(r);if(i)return i[1]!==void 0||!1}function rR(r){let i=Xc(r,!1),e=Date.parse(i);return isNaN(e)?void 0:e/1e3}function lo(r){let i=Xc(r,!1);return j_(i)}function j_(r){let i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(r);if(i)return parseFloat(i[1])}function ol(r){let i=Xc(r,!1);return Ef(i)}function Ef(r){let i=/^\s*(\d+)\s*$/.exec(r);if(i)return parseInt(i[1],10)}function bi(r){return Xc(r,!1).trim()}function zS(r,i){nr(r,i?"1":"0")}function qye(r,i){r.appendChild(US().createCDATASection(i))}function Yye(r,i){let e=new Date(i*1e3),n=e.getUTCFullYear()+"-"+LE(e.getUTCMonth()+1,2)+"-"+LE(e.getUTCDate(),2)+"T"+LE(e.getUTCHours(),2)+":"+LE(e.getUTCMinutes(),2)+":"+LE(e.getUTCSeconds(),2)+"Z";r.appendChild(US().createTextNode(n))}function vh(r,i){let e=i.toPrecision();r.appendChild(US().createTextNode(e))}function oR(r,i){let e=i.toString();r.appendChild(US().createTextNode(e))}function nr(r,i){r.appendChild(US().createTextNode(i))}var G9e=Af+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",H9e={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},qo=class extends Zr{constructor(i){i=i||{},super(i),this.FEATURE_COLLECTION_PARSERS[Af].featureMember=_n(this.readFeaturesInternal),this.schemaLocation=i.schemaLocation?i.schemaLocation:G9e}readFlatCoordinates(i,e){let n=Xc(i,!1).replace(/^\s*|\s*$/g,""),s=e[0].srsName,l="enu";if(s){let m=Vi(s);m&&(l=m.getAxisOrientation())}let h=n.trim().split(/\s+/),p=[];for(let m=0,f=h.length;m<f;m++){let g=h[m].split(/,+/),y=parseFloat(g[0]),_=parseFloat(g[1]),w=g.length===3?parseFloat(g[2]):0;l.substr(0,2)==="en"?p.push(y,_,w):p.push(_,y,w)}return p}readBox(i,e){let n=ri([null],this.BOX_PARSERS_,i,e,this);return Sd(n[1][0],n[1][1],n[1][3],n[1][4])}innerBoundaryIsParser(i,e){let n=ri(void 0,this.RING_PARSERS,i,e,this);n&&e[e.length-1].push(n)}outerBoundaryIsParser(i,e){let n=ri(void 0,this.RING_PARSERS,i,e,this);if(n){let o=e[e.length-1];o[0]=n}}GEOMETRY_NODE_FACTORY_(i,e,n){let o=e[e.length-1],s=o.multiSurface,l=o.surface,h=o.multiCurve;return Array.isArray(i)?n="Envelope":(n=i.getType(),n==="MultiPolygon"&&s===!0?n="MultiSurface":n==="Polygon"&&l===!0?n="Surface":n==="MultiLineString"&&h===!0&&(n="MultiCurve")),fr("http://www.opengis.net/gml",n)}writeFeatureElement(i,e,n){let o=e.getId();o&&i.setAttribute("fid",o);let s=n[n.length-1],l=s.featureNS,h=e.getGeometryName();s.serializers||(s.serializers={},s.serializers[l]={});let p=[],m=[];if(e.hasProperties()){let g=e.getProperties();for(let y in g){let _=g[y];_!==null&&(p.push(y),m.push(_),y==h||typeof _.getSimplifiedGeometry=="function"?y in s.serializers[l]||(s.serializers[l][y]=bt(this.writeGeometryElement,this)):y in s.serializers[l]||(s.serializers[l][y]=bt(nr)))}}let f=Object.assign({},s);f.node=i,ur(f,s.serializers,Pa(void 0,l),m,n,p)}writeCurveOrLineString(i,e,n){let s=n[n.length-1].srsName;if(i.nodeName!=="LineStringSegment"&&s&&i.setAttribute("srsName",s),i.nodeName==="LineString"||i.nodeName==="LineStringSegment"){let l=this.createCoordinatesNode_(i.namespaceURI);i.appendChild(l),this.writeCoordinates_(l,e,n)}else if(i.nodeName==="Curve"){let l=fr(i.namespaceURI,"segments");i.appendChild(l),this.writeCurveSegments_(l,e,n)}}writeLineStringOrCurveMember(i,e,n){let o=this.GEOMETRY_NODE_FACTORY_(e,n);o&&(i.appendChild(o),this.writeCurveOrLineString(o,e,n))}writeMultiCurveOrLineString(i,e,n){let o=n[n.length-1],s=o.hasZ,l=o.srsName,h=o.curve;l&&i.setAttribute("srsName",l);let p=e.getLineStrings();ur({node:i,hasZ:s,srsName:l,curve:h},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,p,n,void 0,this)}writeGeometryElement(i,e,n){let o=n[n.length-1],s=Object.assign({},o);s.node=i;let l;Array.isArray(e)?l=aM(e,o):l=Co(e,!0,o),ur(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[l],n,void 0,this)}createCoordinatesNode_(i){let e=fr(i,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e}writeCoordinates_(i,e,n){let o=n[n.length-1],s=o.hasZ,l=o.srsName,h=e.getCoordinates(),p=h.length,m=new Array(p);for(let f=0;f<p;++f){let g=h[f];m[f]=this.getCoords_(g,l,s)}nr(i,m.join(" "))}writeCurveSegments_(i,e,n){let o=fr(i.namespaceURI,"LineStringSegment");i.appendChild(o),this.writeCurveOrLineString(o,e,n)}writeSurfaceOrPolygon(i,e,n){let o=n[n.length-1],s=o.hasZ,l=o.srsName;if(i.nodeName!=="PolygonPatch"&&l&&i.setAttribute("srsName",l),i.nodeName==="Polygon"||i.nodeName==="PolygonPatch"){let h=e.getLinearRings();ur({node:i,hasZ:s,srsName:l},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,h,n,void 0,this)}else if(i.nodeName==="Surface"){let h=fr(i.namespaceURI,"patches");i.appendChild(h),this.writeSurfacePatches_(h,e,n)}}RING_NODE_FACTORY_(i,e,n){let o=e[e.length-1],s=o.node,l=o.exteriorWritten;return l===void 0&&(o.exteriorWritten=!0),fr(s.namespaceURI,l!==void 0?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(i,e,n){let o=fr(i.namespaceURI,"PolygonPatch");i.appendChild(o),this.writeSurfaceOrPolygon(o,e,n)}writeRing(i,e,n){let o=fr(i.namespaceURI,"LinearRing");i.appendChild(o),this.writeLinearRing(o,e,n)}getCoords_(i,e,n){let o="enu";e&&(o=Vi(e).getAxisOrientation());let s=o.substr(0,2)==="en"?i[0]+","+i[1]:i[1]+","+i[0];if(n){let l=i[2]||0;s+=","+l}return s}writePoint(i,e,n){let o=n[n.length-1],s=o.hasZ,l=o.srsName;l&&i.setAttribute("srsName",l);let h=this.createCoordinatesNode_(i.namespaceURI);i.appendChild(h);let p=e.getCoordinates(),m=this.getCoords_(p,l,s);nr(h,m)}writeMultiPoint(i,e,n){let o=n[n.length-1],s=o.hasZ,l=o.srsName;l&&i.setAttribute("srsName",l);let h=e.getPoints();ur({node:i,hasZ:s,srsName:l},this.POINTMEMBER_SERIALIZERS,Pa("pointMember"),h,n,void 0,this)}writePointMember(i,e,n){let o=fr(i.namespaceURI,"Point");i.appendChild(o),this.writePoint(o,e,n)}writeLinearRing(i,e,n){let s=n[n.length-1].srsName;s&&i.setAttribute("srsName",s);let l=this.createCoordinatesNode_(i.namespaceURI);i.appendChild(l),this.writeCoordinates_(l,e,n)}writeMultiSurfaceOrPolygon(i,e,n){let o=n[n.length-1],s=o.hasZ,l=o.srsName,h=o.surface;l&&i.setAttribute("srsName",l);let p=e.getPolygons();ur({node:i,hasZ:s,srsName:l,surface:h},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,p,n,void 0,this)}writeSurfaceOrPolygonMember(i,e,n){let o=this.GEOMETRY_NODE_FACTORY_(e,n);o&&(i.appendChild(o),this.writeSurfaceOrPolygon(o,e,n))}writeEnvelope(i,e,n){let s=n[n.length-1].srsName;s&&i.setAttribute("srsName",s);let l=["lowerCorner","upperCorner"],h=[e[0]+" "+e[1],e[2]+" "+e[3]];ur({node:i},this.ENVELOPE_SERIALIZERS,bc,h,n,l,this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(i,e,n){let o=e[e.length-1].node;return fr("http://www.opengis.net/gml",H9e[o.nodeName])}};qo.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Vn(qo.prototype.readFlatCoordinates)}};qo.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:qo.prototype.innerBoundaryIsParser,outerBoundaryIs:qo.prototype.outerBoundaryIsParser}};qo.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:_n(qo.prototype.readFlatCoordinates)}};qo.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Vn(Zr.prototype.readPoint),MultiPoint:Vn(Zr.prototype.readMultiPoint),LineString:Vn(Zr.prototype.readLineString),MultiLineString:Vn(Zr.prototype.readMultiLineString),LinearRing:Vn(Zr.prototype.readLinearRing),Polygon:Vn(Zr.prototype.readPolygon),MultiPolygon:Vn(Zr.prototype.readMultiPolygon),Box:Vn(qo.prototype.readBox)}};qo.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:bt(qo.prototype.writeCurveOrLineString),MultiCurve:bt(qo.prototype.writeMultiCurveOrLineString),Point:bt(qo.prototype.writePoint),MultiPoint:bt(qo.prototype.writeMultiPoint),LineString:bt(qo.prototype.writeCurveOrLineString),MultiLineString:bt(qo.prototype.writeMultiCurveOrLineString),LinearRing:bt(qo.prototype.writeLinearRing),Polygon:bt(qo.prototype.writeSurfaceOrPolygon),MultiPolygon:bt(qo.prototype.writeMultiSurfaceOrPolygon),Surface:bt(qo.prototype.writeSurfaceOrPolygon),MultiSurface:bt(qo.prototype.writeMultiSurfaceOrPolygon),Envelope:bt(qo.prototype.writeEnvelope)}};qo.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:bt(qo.prototype.writeLineStringOrCurveMember),curveMember:bt(qo.prototype.writeLineStringOrCurveMember)}};qo.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:bt(qo.prototype.writeRing),innerBoundaryIs:bt(qo.prototype.writeRing)}};qo.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:bt(qo.prototype.writePointMember)}};qo.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:bt(qo.prototype.writeSurfaceOrPolygonMember),polygonMember:bt(qo.prototype.writeSurfaceOrPolygonMember)}};qo.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:bt(nr),upperCorner:bt(nr)}};var Up=qo;var W9e=Af+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",q9e={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},Pn=class extends Zr{constructor(i){i=i||{},super(i),this.surface_=i.surface!==void 0?i.surface:!1,this.curve_=i.curve!==void 0?i.curve:!1,this.multiCurve_=i.multiCurve!==void 0?i.multiCurve:!0,this.multiSurface_=i.multiSurface!==void 0?i.multiSurface:!0,this.schemaLocation=i.schemaLocation?i.schemaLocation:W9e,this.hasZ=i.hasZ!==void 0?i.hasZ:!1}readMultiCurve(i,e){let n=ri([],this.MULTICURVE_PARSERS,i,e,this);if(n)return new Qa(n)}readFlatCurveRing(i,e){let n=ri([],this.MULTICURVE_PARSERS,i,e,this),o=[];for(let s=0,l=n.length;s<l;++s)mr(o,n[s].getFlatCoordinates());return o}readMultiSurface(i,e){let n=ri([],this.MULTISURFACE_PARSERS,i,e,this);if(n)return new _l(n)}curveMemberParser(i,e){Ad(this.CURVEMEMBER_PARSERS,i,e,this)}surfaceMemberParser(i,e){Ad(this.SURFACEMEMBER_PARSERS,i,e,this)}readPatch(i,e){return ri([null],this.PATCHES_PARSERS,i,e,this)}readSegment(i,e){return ri([],this.SEGMENTS_PARSERS,i,e,this)}readPolygonPatch(i,e){return ri([null],this.FLAT_LINEAR_RINGS_PARSERS,i,e,this)}readLineStringSegment(i,e){return ri([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,i,e,this)}interiorParser(i,e){let n=ri(void 0,this.RING_PARSERS,i,e,this);n&&e[e.length-1].push(n)}exteriorParser(i,e){let n=ri(void 0,this.RING_PARSERS,i,e,this);if(n){let o=e[e.length-1];o[0]=n}}readSurface(i,e){let n=ri([null],this.SURFACE_PARSERS,i,e,this);if(n&&n[0]){let o=n[0],s=[o.length],l,h;for(l=1,h=n.length;l<h;++l)mr(o,n[l]),s.push(o.length);return new Zo(o,"XYZ",s)}}readCurve(i,e){let n=ri([null],this.CURVE_PARSERS,i,e,this);if(n)return new ao(n,"XYZ")}readEnvelope(i,e){let n=ri([null],this.ENVELOPE_PARSERS,i,e,this);return Sd(n[1][0],n[1][1],n[2][0],n[2][1])}readFlatPos(i,e){let n=Xc(i,!1),o=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,s=[],l;for(;l=o.exec(n);)s.push(parseFloat(l[1])),n=n.substr(l[0].length);if(n!=="")return;let p=e[0].srsName,m="enu";if(p&&(m=Vi(p).getAxisOrientation()),m==="neu"){let g,y;for(g=0,y=s.length;g<y;g+=3){let _=s[g],w=s[g+1];s[g]=w,s[g+1]=_}}let f=s.length;if(f==2&&s.push(0),f!==0)return s}readFlatPosList(i,e){let n=Xc(i,!1).replace(/^\s*|\s*$/g,""),o=e[0],s=o.srsName,l=o.srsDimension,h="enu";s&&(h=Vi(s).getAxisOrientation());let p=n.split(/\s+/),m=2;i.getAttribute("srsDimension")?m=Ef(i.getAttribute("srsDimension")):i.getAttribute("dimension")?m=Ef(i.getAttribute("dimension")):i.parentNode.getAttribute("srsDimension")?m=Ef(i.parentNode.getAttribute("srsDimension")):l&&(m=Ef(l));let f,g,y,_=[];for(let w=0,A=p.length;w<A;w+=m)f=parseFloat(p[w]),g=parseFloat(p[w+1]),y=m===3?parseFloat(p[w+2]):0,h.substr(0,2)==="en"?_.push(f,g,y):_.push(g,f,y);return _}writePos_(i,e,n){let o=n[n.length-1],s=o.hasZ,l=s?"3":"2";i.setAttribute("srsDimension",l);let h=o.srsName,p="enu";h&&(p=Vi(h).getAxisOrientation());let m=e.getCoordinates(),f;if(p.substr(0,2)==="en"?f=m[0]+" "+m[1]:f=m[1]+" "+m[0],s){let g=m[2]||0;f+=" "+g}nr(i,f)}getCoords_(i,e,n){let o="enu";e&&(o=Vi(e).getAxisOrientation());let s=o.substr(0,2)==="en"?i[0]+" "+i[1]:i[1]+" "+i[0];if(n){let l=i[2]||0;s+=" "+l}return s}writePosList_(i,e,n){let o=n[n.length-1],s=o.hasZ,l=s?"3":"2";i.setAttribute("srsDimension",l);let h=o.srsName,p=e.getCoordinates(),m=p.length,f=new Array(m),g;for(let y=0;y<m;++y)g=p[y],f[y]=this.getCoords_(g,h,s);nr(i,f.join(" "))}writePoint(i,e,n){let s=n[n.length-1].srsName;s&&i.setAttribute("srsName",s);let l=fr(i.namespaceURI,"pos");i.appendChild(l),this.writePos_(l,e,n)}writeEnvelope(i,e,n){let s=n[n.length-1].srsName;s&&i.setAttribute("srsName",s);let l=["lowerCorner","upperCorner"],h=[e[0]+" "+e[1],e[2]+" "+e[3]];ur({node:i},this.ENVELOPE_SERIALIZERS,bc,h,n,l,this)}writeLinearRing(i,e,n){let s=n[n.length-1].srsName;s&&i.setAttribute("srsName",s);let l=fr(i.namespaceURI,"posList");i.appendChild(l),this.writePosList_(l,e,n)}RING_NODE_FACTORY_(i,e,n){let o=e[e.length-1],s=o.node,l=o.exteriorWritten;return l===void 0&&(o.exteriorWritten=!0),fr(s.namespaceURI,l!==void 0?"interior":"exterior")}writeSurfaceOrPolygon(i,e,n){let o=n[n.length-1],s=o.hasZ,l=o.srsName;if(i.nodeName!=="PolygonPatch"&&l&&i.setAttribute("srsName",l),i.nodeName==="Polygon"||i.nodeName==="PolygonPatch"){let h=e.getLinearRings();ur({node:i,hasZ:s,srsName:l},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,h,n,void 0,this)}else if(i.nodeName==="Surface"){let h=fr(i.namespaceURI,"patches");i.appendChild(h),this.writeSurfacePatches_(h,e,n)}}writeCurveOrLineString(i,e,n){let s=n[n.length-1].srsName;if(i.nodeName!=="LineStringSegment"&&s&&i.setAttribute("srsName",s),i.nodeName==="LineString"||i.nodeName==="LineStringSegment"){let l=fr(i.namespaceURI,"posList");i.appendChild(l),this.writePosList_(l,e,n)}else if(i.nodeName==="Curve"){let l=fr(i.namespaceURI,"segments");i.appendChild(l),this.writeCurveSegments_(l,e,n)}}writeMultiSurfaceOrPolygon(i,e,n){let o=n[n.length-1],s=o.hasZ,l=o.srsName,h=o.surface;l&&i.setAttribute("srsName",l);let p=e.getPolygons();ur({node:i,hasZ:s,srsName:l,surface:h},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,p,n,void 0,this)}writeMultiPoint(i,e,n){let o=n[n.length-1],s=o.srsName,l=o.hasZ;s&&i.setAttribute("srsName",s);let h=e.getPoints();ur({node:i,hasZ:l,srsName:s},this.POINTMEMBER_SERIALIZERS,Pa("pointMember"),h,n,void 0,this)}writeMultiCurveOrLineString(i,e,n){let o=n[n.length-1],s=o.hasZ,l=o.srsName,h=o.curve;l&&i.setAttribute("srsName",l);let p=e.getLineStrings();ur({node:i,hasZ:s,srsName:l,curve:h},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,p,n,void 0,this)}writeRing(i,e,n){let o=fr(i.namespaceURI,"LinearRing");i.appendChild(o),this.writeLinearRing(o,e,n)}writeSurfaceOrPolygonMember(i,e,n){let o=this.GEOMETRY_NODE_FACTORY_(e,n);o&&(i.appendChild(o),this.writeSurfaceOrPolygon(o,e,n))}writePointMember(i,e,n){let o=fr(i.namespaceURI,"Point");i.appendChild(o),this.writePoint(o,e,n)}writeLineStringOrCurveMember(i,e,n){let o=this.GEOMETRY_NODE_FACTORY_(e,n);o&&(i.appendChild(o),this.writeCurveOrLineString(o,e,n))}writeSurfacePatches_(i,e,n){let o=fr(i.namespaceURI,"PolygonPatch");i.appendChild(o),this.writeSurfaceOrPolygon(o,e,n)}writeCurveSegments_(i,e,n){let o=fr(i.namespaceURI,"LineStringSegment");i.appendChild(o),this.writeCurveOrLineString(o,e,n)}writeGeometryElement(i,e,n){let o=n[n.length-1],s=Object.assign({},o);s.node=i;let l;Array.isArray(e)?l=aM(e,o):l=Co(e,!0,o),ur(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[l],n,void 0,this)}writeFeatureElement(i,e,n){let o=e.getId();o&&i.setAttribute("fid",o);let s=n[n.length-1],l=s.featureNS,h=e.getGeometryName();s.serializers||(s.serializers={},s.serializers[l]={});let p=[],m=[];if(e.hasProperties()){let g=e.getProperties();for(let y in g){let _=g[y];_!==null&&(p.push(y),m.push(_),y==h||typeof _.getSimplifiedGeometry=="function"?y in s.serializers[l]||(s.serializers[l][y]=bt(this.writeGeometryElement,this)):y in s.serializers[l]||(s.serializers[l][y]=bt(nr)))}}let f=Object.assign({},s);f.node=i,ur(f,s.serializers,Pa(void 0,l),m,n,p)}writeFeatureMembers_(i,e,n){let o=n[n.length-1],s=o.featureType,l=o.featureNS,h={};h[l]={},h[l][s]=bt(this.writeFeatureElement,this);let p=Object.assign({},o);p.node=i,ur(p,h,Pa(s,l),e,n)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(i,e,n){let o=e[e.length-1].node;return fr(this.namespace,q9e[o.nodeName])}GEOMETRY_NODE_FACTORY_(i,e,n){let o=e[e.length-1],s=o.multiSurface,l=o.surface,h=o.curve,p=o.multiCurve;return Array.isArray(i)?n="Envelope":(n=i.getType(),n==="MultiPolygon"&&s===!0?n="MultiSurface":n==="Polygon"&&l===!0?n="Surface":n==="LineString"&&h===!0?n="Curve":n==="MultiLineString"&&p===!0&&(n="MultiCurve")),fr(this.namespace,n)}writeGeometryNode(i,e){e=this.adaptOptions(e);let n=fr(this.namespace,"geom"),o={node:n,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&Object.assign(o,e),this.writeGeometryElement(n,i,[o]),n}writeFeaturesNode(i,e){e=this.adaptOptions(e);let n=fr(this.namespace,"featureMembers");n.setAttributeNS(Xg,"xsi:schemaLocation",this.schemaLocation);let o={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&Object.assign(o,e),this.writeFeatureMembers_(n,i,[o]),n}};Pn.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Vn(Pn.prototype.readFlatPos),posList:Vn(Pn.prototype.readFlatPosList),coordinates:Vn(Up.prototype.readFlatCoordinates)}};Pn.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:Pn.prototype.interiorParser,exterior:Pn.prototype.exteriorParser}};Pn.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Vn(Zr.prototype.readPoint),MultiPoint:Vn(Zr.prototype.readMultiPoint),LineString:Vn(Zr.prototype.readLineString),MultiLineString:Vn(Zr.prototype.readMultiLineString),LinearRing:Vn(Zr.prototype.readLinearRing),Polygon:Vn(Zr.prototype.readPolygon),MultiPolygon:Vn(Zr.prototype.readMultiPolygon),Surface:Vn(Pn.prototype.readSurface),MultiSurface:Vn(Pn.prototype.readMultiSurface),Curve:Vn(Pn.prototype.readCurve),MultiCurve:Vn(Pn.prototype.readMultiCurve),Envelope:Vn(Pn.prototype.readEnvelope)}};Pn.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:_n(Pn.prototype.curveMemberParser),curveMembers:_n(Pn.prototype.curveMemberParser)}};Pn.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:_n(Pn.prototype.surfaceMemberParser),surfaceMembers:_n(Pn.prototype.surfaceMemberParser)}};Pn.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:_n(Zr.prototype.readLineString),Curve:_n(Pn.prototype.readCurve)}};Pn.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:_n(Zr.prototype.readPolygon),Surface:_n(Pn.prototype.readSurface)}};Pn.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:Vn(Pn.prototype.readPatch)}};Pn.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:Vn(Pn.prototype.readSegment)}};Pn.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:_n(Pn.prototype.readFlatPosList),upperCorner:_n(Pn.prototype.readFlatPosList)}};Pn.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:Vn(Pn.prototype.readPolygonPatch)}};Pn.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:$S(Pn.prototype.readLineStringSegment)}};Zr.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Vn(Zr.prototype.readFlatLinearRing),Ring:Vn(Pn.prototype.readFlatCurveRing)}};Pn.prototype.writeFeatures;Pn.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:bt(Pn.prototype.writeRing),interior:bt(Pn.prototype.writeRing)}};Pn.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:bt(nr),upperCorner:bt(nr)}};Pn.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:bt(Pn.prototype.writeSurfaceOrPolygonMember),polygonMember:bt(Pn.prototype.writeSurfaceOrPolygonMember)}};Pn.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:bt(Pn.prototype.writePointMember)}};Pn.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:bt(Pn.prototype.writeLineStringOrCurveMember),curveMember:bt(Pn.prototype.writeLineStringOrCurveMember)}};Pn.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:bt(Pn.prototype.writeCurveOrLineString),MultiCurve:bt(Pn.prototype.writeMultiCurveOrLineString),Point:bt(Pn.prototype.writePoint),MultiPoint:bt(Pn.prototype.writeMultiPoint),LineString:bt(Pn.prototype.writeCurveOrLineString),MultiLineString:bt(Pn.prototype.writeMultiCurveOrLineString),LinearRing:bt(Pn.prototype.writeLinearRing),Polygon:bt(Pn.prototype.writeSurfaceOrPolygon),MultiPolygon:bt(Pn.prototype.writeMultiSurfaceOrPolygon),Surface:bt(Pn.prototype.writeSurfaceOrPolygon),MultiSurface:bt(Pn.prototype.writeMultiSurfaceOrPolygon),Envelope:bt(Pn.prototype.writeEnvelope)}};var Lr=Pn;var sQ=Lr;sQ.prototype.writeFeatures;sQ.prototype.writeFeaturesNode;var gM=sQ;var vl=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],Y9e="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",K9e={rte:Kye,trk:Zye,wpt:Qye},Z9e=ti(vl,{rte:_n(Kye),trk:_n(Zye),wpt:_n(Qye)}),Q9e=ti(vl,{text:ct(bi,"linkText"),type:ct(bi,"linkType")}),X9e=ti(vl,{name:ct(bi),email:SWe,link:sR}),J9e=ti(vl,{name:ct(bi),desc:ct(bi),author:ct(wWe),copyright:ct(CWe),link:sR,time:ct(rR),keywords:ct(bi),bounds:xWe,extensions:D6}),eWe=ti(vl,{year:ct(ol),license:ct(bi)}),tWe=ti(vl,{rte:bt(EWe),trk:bt(MWe),wpt:bt(kWe)}),aQ=class extends Tf{constructor(i){super(),i=i||{},this.dataProjection=Vi("EPSG:4326"),this.readExtensions_=i.readExtensions}handleReadExtensions_(i){i||(i=[]);for(let e=0,n=i.length;e<n;++e){let o=i[e];if(this.readExtensions_){let s=o.get("extensionsNode_")||null;this.readExtensions_(o,s)}o.set("extensionsNode_",void 0)}}readMetadata(i){return i?typeof i=="string"?this.readMetadataFromDocument(Eu(i)):Au(i)?this.readMetadataFromDocument(i):this.readMetadataFromNode(i):null}readMetadataFromDocument(i){for(let e=i.firstChild;e;e=e.nextSibling)if(e.nodeType===Node.ELEMENT_NODE){let n=this.readMetadataFromNode(e);if(n)return n}return null}readMetadataFromNode(i){if(!vl.includes(i.namespaceURI))return null;for(let e=i.firstElementChild;e;e=e.nextElementSibling)if(vl.includes(e.namespaceURI)&&e.localName==="metadata")return ri({},J9e,e,[]);return null}readFeatureFromNode(i,e){if(!vl.includes(i.namespaceURI))return null;let n=K9e[i.localName];if(!n)return null;let o=n(i,[this.getReadOptions(i,e)]);return o?(this.handleReadExtensions_([o]),o):null}readFeaturesFromNode(i,e){if(!vl.includes(i.namespaceURI))return[];if(i.localName=="gpx"){let n=ri([],Z9e,i,[this.getReadOptions(i,e)]);return n?(this.handleReadExtensions_(n),n):[]}return[]}writeFeaturesNode(i,e){e=this.adaptOptions(e);let n=fr("http://www.topografix.com/GPX/1/1","gpx");return n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Xg),n.setAttributeNS(Xg,"xsi:schemaLocation",Y9e),n.setAttribute("version","1.1"),n.setAttribute("creator","OpenLayers"),ur({node:n},tWe,bWe,i,[e]),n}},iWe=ti(vl,{name:ct(bi),cmt:ct(bi),desc:ct(bi),src:ct(bi),link:sR,number:ct(ol),extensions:D6,type:ct(bi),rtept:IWe}),nWe=ti(vl,{ele:ct(lo),time:ct(rR)}),rWe=ti(vl,{name:ct(bi),cmt:ct(bi),desc:ct(bi),src:ct(bi),link:sR,number:ct(ol),type:ct(bi),extensions:D6,trkseg:AWe}),oWe=ti(vl,{trkpt:TWe}),sWe=ti(vl,{ele:ct(lo),time:ct(rR)}),aWe=ti(vl,{ele:ct(lo),time:ct(rR),magvar:ct(lo),geoidheight:ct(lo),name:ct(bi),cmt:ct(bi),desc:ct(bi),src:ct(bi),link:sR,sym:ct(bi),type:ct(bi),fix:ct(bi),sat:ct(ol),hdop:ct(lo),vdop:ct(lo),pdop:ct(lo),ageofdgpsdata:ct(lo),dgpsid:ct(ol),extensions:D6}),lWe=["text","type"],cWe=ti(vl,{text:bt(nr),type:bt(nr)}),dWe=ti(vl,["name","cmt","desc","src","link","number","type","rtept"]),uWe=ti(vl,{name:bt(nr),cmt:bt(nr),desc:bt(nr),src:bt(nr),link:bt(dQ),number:bt(oR),type:bt(nr),rtept:rQ(bt(uQ))}),hWe=ti(vl,["ele","time"]),pWe=ti(vl,["name","cmt","desc","src","link","number","type","trkseg"]),mWe=ti(vl,{name:bt(nr),cmt:bt(nr),desc:bt(nr),src:bt(nr),link:bt(dQ),number:bt(oR),type:bt(nr),trkseg:rQ(bt(DWe))}),fWe=Pa("trkpt"),gWe=ti(vl,{trkpt:bt(uQ)}),_We=ti(vl,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),yWe=ti(vl,{ele:bt(vh),time:bt(Yye),magvar:bt(vh),geoidheight:bt(vh),name:bt(nr),cmt:bt(nr),desc:bt(nr),src:bt(nr),link:bt(dQ),sym:bt(nr),type:bt(nr),fix:bt(nr),sat:bt(oR),hdop:bt(vh),vdop:bt(vh),pdop:bt(vh),ageofdgpsdata:bt(vh),dgpsid:bt(oR)}),vWe={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function bWe(r,i,e){let n=r.getGeometry();if(n){let o=vWe[n.getType()];if(o){let s=i[i.length-1].node;return fr(s.namespaceURI,o)}}}function lQ(r,i,e,n){return r.push(parseFloat(e.getAttribute("lon")),parseFloat(e.getAttribute("lat"))),"ele"in n?(r.push(n.ele),delete n.ele,i.hasZ=!0):r.push(0),"time"in n?(r.push(n.time),delete n.time,i.hasM=!0):r.push(0),r}function cQ(r,i,e){let n="XY",o=2;if(r.hasZ&&r.hasM?(n="XYZM",o=4):r.hasZ?(n="XYZ",o=3):r.hasM&&(n="XYM",o=3),o!==4){for(let s=0,l=i.length/4;s<l;s++)i[s*o]=i[s*4],i[s*o+1]=i[s*4+1],r.hasZ&&(i[s*o+2]=i[s*4+2]),r.hasM&&(i[s*o+2]=i[s*4+3]);if(i.length=i.length/4*o,e)for(let s=0,l=e.length;s<l;s++)e[s]=e[s]/4*o}return n}function wWe(r,i){let e=ri({},X9e,r,i);if(e)return e}function CWe(r,i){let e=ri({},eWe,r,i);if(e){let n=r.getAttribute("author");return n!==null&&(e.author=n),e}}function xWe(r,i){let e=i[i.length-1],n=r.getAttribute("minlat"),o=r.getAttribute("minlon"),s=r.getAttribute("maxlat"),l=r.getAttribute("maxlon");o!==null&&n!==null&&l!==null&&s!==null&&(e.bounds=[[parseFloat(o),parseFloat(n)],[parseFloat(l),parseFloat(s)]])}function SWe(r,i){let e=i[i.length-1],n=r.getAttribute("id"),o=r.getAttribute("domain");n!==null&&o!==null&&(e.email=`${n}@${o}`)}function sR(r,i){let e=i[i.length-1],n=r.getAttribute("href");n!==null&&(e.link=n),Ad(Q9e,r,i)}function D6(r,i){let e=i[i.length-1];e.extensionsNode_=r}function IWe(r,i){let e=ri({},nWe,r,i);if(e){let n=i[i.length-1],o=n.flatCoordinates,s=n.layoutOptions;lQ(o,s,r,e)}}function TWe(r,i){let e=ri({},sWe,r,i);if(e){let n=i[i.length-1],o=n.flatCoordinates,s=n.layoutOptions;lQ(o,s,r,e)}}function AWe(r,i){let e=i[i.length-1];Ad(oWe,r,i);let n=e.flatCoordinates;e.ends.push(n.length)}function Kye(r,i){let e=i[0],n=ri({flatCoordinates:[],layoutOptions:{}},iWe,r,i);if(!n)return;let o=n.flatCoordinates;delete n.flatCoordinates;let s=n.layoutOptions;delete n.layoutOptions;let l=cQ(s,o),h=new ao(o,l);Co(h,!1,e);let p=new An(h);return p.setProperties(n,!0),p}function Zye(r,i){let e=i[0],n=ri({flatCoordinates:[],ends:[],layoutOptions:{}},rWe,r,i);if(!n)return;let o=n.flatCoordinates;delete n.flatCoordinates;let s=n.ends;delete n.ends;let l=n.layoutOptions;delete n.layoutOptions;let h=cQ(l,o,s),p=new Qa(o,h,s);Co(p,!1,e);let m=new An(p);return m.setProperties(n,!0),m}function Qye(r,i){let e=i[0],n=ri({},aWe,r,i);if(!n)return;let o={},s=lQ([],o,r,n),l=cQ(o,s),h=new Kn(s,l);Co(h,!1,e);let p=new An(h);return p.setProperties(n,!0),p}function dQ(r,i,e){r.setAttribute("href",i);let o=e[e.length-1].properties,s=[o.linkText,o.linkType];ur({node:r},cWe,bc,s,e,lWe)}function uQ(r,i,e){let n=e[e.length-1],s=n.node.namespaceURI,l=n.properties;switch(r.setAttributeNS(null,"lat",String(i[1])),r.setAttributeNS(null,"lon",String(i[0])),n.geometryLayout){case"XYZM":i[3]!==0&&(l.time=i[3]);case"XYZ":i[2]!==0&&(l.ele=i[2]);break;case"XYM":i[2]!==0&&(l.time=i[2]);break;default:}let p=r.nodeName=="rtept"?hWe[s]:_We[s],m=yh(l,p);ur({node:r,properties:l},yWe,bc,m,e,p)}function EWe(r,i,e){let n=e[0],o=i.getProperties(),s={node:r};s.properties=o;let l=i.getGeometry();if(l.getType()=="LineString"){let f=Co(l,!0,n);s.geometryLayout=f.getLayout(),o.rtept=f.getCoordinates()}let h=e[e.length-1].node,p=dWe[h.namespaceURI],m=yh(o,p);ur(s,uWe,bc,m,e,p)}function MWe(r,i,e){let n=e[0],o=i.getProperties(),s={node:r};s.properties=o;let l=i.getGeometry();if(l.getType()=="MultiLineString"){let f=Co(l,!0,n);o.trkseg=f.getLineStrings()}let h=e[e.length-1].node,p=pWe[h.namespaceURI],m=yh(o,p);ur(s,mWe,bc,m,e,p)}function DWe(r,i,e){let n={node:r};n.geometryLayout=i.getLayout(),n.properties={},ur(n,gWe,fWe,i.getCoordinates(),e)}function kWe(r,i,e){let n=e[0],o=e[e.length-1];o.properties=i.getProperties();let s=i.getGeometry();if(s.getType()=="Point"){let l=Co(s,!0,n);o.geometryLayout=l.getLayout(),uQ(r,l.getCoordinates(),e)}}var GS=aQ;var hQ=class extends R_{constructor(){super()}getType(){return"text"}readFeature(i,e){return this.readFeatureFromText(k6(i),this.adaptOptions(e))}readFeatureFromText(i,e){return xn()}readFeatures(i,e){return this.readFeaturesFromText(k6(i),this.adaptOptions(e))}readFeaturesFromText(i,e){return xn()}readGeometry(i,e){return this.readGeometryFromText(k6(i),this.adaptOptions(e))}readGeometryFromText(i,e){return xn()}readProjection(i){return this.readProjectionFromText(k6(i))}readProjectionFromText(i){return this.dataProjection}writeFeature(i,e){return this.writeFeatureText(i,this.adaptOptions(e))}writeFeatureText(i,e){return xn()}writeFeatures(i,e){return this.writeFeaturesText(i,this.adaptOptions(e))}writeFeaturesText(i,e){return xn()}writeGeometry(i,e){return this.writeGeometryText(i,this.adaptOptions(e))}writeGeometryText(i,e){return xn()}};function k6(r){return typeof r=="string"?r:""}var _M=hQ;var OWe=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,PWe=/^H.([A-Z]{3}).*?:(.*)/,RWe=/^HFDTE(\d{2})(\d{2})(\d{2})/,FWe=/\r\n|\r|\n/,pQ=class extends _M{constructor(i){super(),i=i||{},this.dataProjection=Vi("EPSG:4326"),this.altitudeMode_=i.altitudeMode?i.altitudeMode:"none"}readFeatureFromText(i,e){let n=this.altitudeMode_,o=i.split(FWe),s={},l=[],h=2e3,p=0,m=1,f=-1,g,y;for(g=0,y=o.length;g<y;++g){let k=o[g],R;if(k.charAt(0)=="B"){if(R=OWe.exec(k),R){let $=parseInt(R[1],10),H=parseInt(R[2],10),oe=parseInt(R[3],10),se=parseInt(R[4],10)+parseInt(R[5],10)/6e4;R[6]=="S"&&(se=-se);let ge=parseInt(R[7],10)+parseInt(R[8],10)/6e4;if(R[9]=="W"&&(ge=-ge),l.push(ge,se),n!="none"){let pe;n=="gps"?pe=parseInt(R[11],10):n=="barometric"?pe=parseInt(R[12],10):pe=0,l.push(pe)}let ue=Date.UTC(h,p,m,$,H,oe);ue<f&&(ue=Date.UTC(h,p,m+1,$,H,oe)),l.push(ue/1e3),f=ue}}else k.charAt(0)=="H"&&(R=RWe.exec(k),R?(m=parseInt(R[1],10),p=parseInt(R[2],10)-1,h=2e3+parseInt(R[3],10)):(R=PWe.exec(k),R&&(s[R[1]]=R[2].trim())))}if(l.length===0)return null;let _=n=="none"?"XYM":"XYZM",w=new ao(l,_),A=new An(Co(w,!1,e));return A.setProperties(s,!0),A}readFeaturesFromText(i,e){let n=this.readFeatureFromText(i,e);return n?[n]:[]}},Xye=pQ;var ep={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"},HS={};HS[ep.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}};HS[ep.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}};HS[ep.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}};HS.none={none:{supports:[],formats:[],qualities:[]}};var LWe=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,Jye=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,NWe=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;function BWe(r){let i=r.getComplianceLevelSupportedFeatures();return i===void 0&&(i=HS[ep.VERSION1].level0),{url:r.imageInfo["@id"]===void 0?void 0:r.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:i.supports,formats:[...i.formats,r.imageInfo.formats===void 0?[]:r.imageInfo.formats],qualities:[...i.qualities,r.imageInfo.qualities===void 0?[]:r.imageInfo.qualities],resolutions:r.imageInfo.scale_factors,tileSize:r.imageInfo.tile_width!==void 0?r.imageInfo.tile_height!==void 0?[r.imageInfo.tile_width,r.imageInfo.tile_height]:[r.imageInfo.tile_width,r.imageInfo.tile_width]:r.imageInfo.tile_height!=null?[r.imageInfo.tile_height,r.imageInfo.tile_height]:void 0}}function jWe(r){let i=r.getComplianceLevelSupportedFeatures(),e=Array.isArray(r.imageInfo.profile)&&r.imageInfo.profile.length>1,n=e&&r.imageInfo.profile[1].supports?r.imageInfo.profile[1].supports:[],o=e&&r.imageInfo.profile[1].formats?r.imageInfo.profile[1].formats:[],s=e&&r.imageInfo.profile[1].qualities?r.imageInfo.profile[1].qualities:[];return{url:r.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:r.imageInfo.sizes===void 0?void 0:r.imageInfo.sizes.map(function(l){return[l.width,l.height]}),tileSize:r.imageInfo.tiles===void 0?void 0:[r.imageInfo.tiles.map(function(l){return l.width})[0],r.imageInfo.tiles.map(function(l){return l.height===void 0?l.width:l.height})[0]],resolutions:r.imageInfo.tiles===void 0?void 0:r.imageInfo.tiles.map(function(l){return l.scaleFactors})[0],supports:[...i.supports,...n],formats:[...i.formats,...o],qualities:[...i.qualities,...s]}}function VWe(r){let i=r.getComplianceLevelSupportedFeatures(),e=r.imageInfo.extraFormats===void 0?i.formats:[...i.formats,...r.imageInfo.extraFormats],n=r.imageInfo.preferredFormats!==void 0&&Array.isArray(r.imageInfo.preferredFormats)&&r.imageInfo.preferredFormats.length>0?r.imageInfo.preferredFormats.filter(function(o){return["jpg","png","gif"].includes(o)}).reduce(function(o,s){return o===void 0&&e.includes(s)?s:o},void 0):void 0;return{url:r.imageInfo.id,sizes:r.imageInfo.sizes===void 0?void 0:r.imageInfo.sizes.map(function(o){return[o.width,o.height]}),tileSize:r.imageInfo.tiles===void 0?void 0:[r.imageInfo.tiles.map(function(o){return o.width})[0],r.imageInfo.tiles.map(function(o){return o.height})[0]],resolutions:r.imageInfo.tiles===void 0?void 0:r.imageInfo.tiles.map(function(o){return o.scaleFactors})[0],supports:r.imageInfo.extraFeatures===void 0?i.supports:[...i.supports,...r.imageInfo.extraFeatures],formats:e,qualities:r.imageInfo.extraQualities===void 0?i.qualities:[...i.qualities,...r.imageInfo.extraQualities],preferredFormat:n}}var O6={};O6[ep.VERSION1]=BWe;O6[ep.VERSION2]=jWe;O6[ep.VERSION3]=VWe;var mQ=class{constructor(i){this.setImageInfo(i)}setImageInfo(i){typeof i=="string"?this.imageInfo=JSON.parse(i):this.imageInfo=i}getImageApiVersion(){if(this.imageInfo===void 0)return;let i=this.imageInfo["@context"]||"ol-no-context";typeof i=="string"&&(i=[i]);for(let e=0;e<i.length;e++)switch(i[e]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return ep.VERSION1;case"http://iiif.io/api/image/2/context.json":return ep.VERSION2;case"http://iiif.io/api/image/3/context.json":return ep.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(ep.VERSION1)&&this.imageInfo.identifier)return ep.VERSION1;break;default:}Nn(!1,"Cannot determine IIIF Image API version from provided image information JSON")}getComplianceLevelEntryFromProfile(i){if(!(this.imageInfo===void 0||this.imageInfo.profile===void 0))switch(i===void 0&&(i=this.getImageApiVersion()),i){case ep.VERSION1:if(LWe.test(this.imageInfo.profile))return this.imageInfo.profile;break;case ep.VERSION3:if(NWe.test(this.imageInfo.profile))return this.imageInfo.profile;break;case ep.VERSION2:if(typeof this.imageInfo.profile=="string"&&Jye.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&typeof this.imageInfo.profile[0]=="string"&&Jye.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0];break;default:}}getComplianceLevelFromProfile(i){let e=this.getComplianceLevelEntryFromProfile(i);if(e===void 0)return;let n=e.match(/level[0-2](?:\.json)?$/g);return Array.isArray(n)?n[0].replace(".json",""):void 0}getComplianceLevelSupportedFeatures(){if(this.imageInfo===void 0)return;let i=this.getImageApiVersion(),e=this.getComplianceLevelFromProfile(i);return e===void 0?HS.none.none:HS[i][e]}getTileSourceOptions(i){let e=i||{},n=this.getImageApiVersion();if(n===void 0)return;let o=n===void 0?void 0:O6[n](this);if(o!==void 0)return{url:o.url,version:n,size:[this.imageInfo.width,this.imageInfo.height],sizes:o.sizes,format:e.format!==void 0&&o.formats.includes(e.format)?e.format:o.preferredFormat!==void 0?o.preferredFormat:"jpg",supports:o.supports,quality:e.quality&&o.qualities.includes(e.quality)?e.quality:o.qualities.includes("native")?"native":"default",resolutions:Array.isArray(o.resolutions)?o.resolutions.sort(function(s,l){return l-s}):void 0,tileSize:o.tileSize}}},eve=mQ;var jv=["http://www.google.com/kml/ext/2.2"],Bn=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],$We="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",tve={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},UWe=ti(Bn,{ExtendedData:wve,Region:Cve,MultiGeometry:ct(yve,"geometry"),LineString:ct(gve,"geometry"),LinearRing:ct(_ve,"geometry"),Point:ct(vve,"geometry"),Polygon:ct(bve,"geometry"),Style:ct(IQ),StyleMap:Sqe,address:ct(bi),description:ct(bi),name:ct(bi),open:ct(Bv),phoneNumber:ct(bi),styleUrl:ct(uve),visibility:ct(Bv)},ti(jv,{MultiTrack:ct(uqe,"geometry"),Track:ct(fve,"geometry")})),zWe=ti(Bn,{ExtendedData:wve,Region:Cve,Link:Lqe,address:ct(bi),description:ct(bi),name:ct(bi),open:ct(Bv),phoneNumber:ct(bi),visibility:ct(Bv)}),GWe=ti(Bn,{href:ct(dve)}),HWe=ti(Bn,{Altitude:ct(lo),Longitude:ct(lo),Latitude:ct(lo),Tilt:ct(lo),AltitudeMode:ct(bi),Heading:ct(lo),Roll:ct(lo)}),ave=ti(Bn,{LatLonAltBox:Mqe,Lod:kqe}),WWe=ti(Bn,["Document","Placemark"]),qWe=ti(Bn,{Document:bt(Gqe),Placemark:bt(Ive)}),yM,R6=null;var _Q,aR,lR,cR,L6,yQ=null;var xQ,vQ=null;var bQ,WS=null;var ive=null;var wQ=null;function N6(r){return 32/Math.min(r[0],r[1])}function YWe(){yM=[255,255,255,1],R6=new sr({color:yM}),_Q=[20,2],aR="pixels",lR="pixels",cR=[64,64],L6="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",yQ=new Tu({anchor:_Q,anchorOrigin:"bottom-left",anchorXUnits:aR,anchorYUnits:lR,crossOrigin:"anonymous",rotation:0,scale:N6(cR),size:cR,src:L6}),xQ="NO_IMAGE",vQ=new ir({color:yM,width:1}),bQ=new ir({color:[51,51,51,1],width:2}),WS=new Pl({font:"bold 16px Helvetica",fill:R6,stroke:bQ,scale:.8}),ive=new Mn({fill:R6,image:yQ,text:WS,stroke:vQ,zIndex:0}),wQ=[ive]}var P6;function KWe(r){return r}var CQ=class extends Tf{constructor(i){super(),i=i||{},wQ||YWe(),this.dataProjection=Vi("EPSG:4326"),this.defaultStyle_=i.defaultStyle?i.defaultStyle:wQ,this.extractStyles_=i.extractStyles!==void 0?i.extractStyles:!0,this.writeStyles_=i.writeStyles!==void 0?i.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=i.showPointNames!==void 0?i.showPointNames:!0,this.crossOrigin_=i.crossOrigin!==void 0?i.crossOrigin:"anonymous",this.iconUrlFunction_=i.iconUrlFunction?i.iconUrlFunction:KWe,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(i,e){let n=ti(Bn,{Document:$S(this.readDocumentOrFolder_,this),Folder:$S(this.readDocumentOrFolder_,this),Placemark:_n(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),o=ri([],n,i,e,this);if(o)return o}readPlacemark_(i,e){let n=ri({geometry:null},UWe,i,e,this);if(!n)return;let o=new An,s=i.getAttribute("id");s!==null&&o.setId(s);let l=e[0],h=n.geometry;if(h&&Co(h,!1,l),o.setGeometry(h),delete n.geometry,this.extractStyles_){let p=n.Style,m=n.styleUrl,f=QWe(p,m,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);o.setStyle(f)}return delete n.Style,o.setProperties(n,!0),o}readSharedStyle_(i,e){let n=i.getAttribute("id");if(n!==null){let o=IQ.call(this,i,e);if(o){let s,l=i.baseURI;(!l||l=="about:blank")&&(l=window.location.href),l?s=new URL("#"+n,l).href:s="#"+n,this.sharedStyles_[s]=o}}}readSharedStyleMap_(i,e){let n=i.getAttribute("id");if(n===null)return;let o=pve.call(this,i,e);if(!o)return;let s,l=i.baseURI;(!l||l=="about:blank")&&(l=window.location.href),l?s=new URL("#"+n,l).href:s="#"+n,this.sharedStyles_[s]=o}readFeatureFromNode(i,e){if(!Bn.includes(i.namespaceURI))return null;let n=this.readPlacemark_(i,[this.getReadOptions(i,e)]);return n||null}readFeaturesFromNode(i,e){if(!Bn.includes(i.namespaceURI))return[];let n,o=i.localName;if(o=="Document"||o=="Folder")return n=this.readDocumentOrFolder_(i,[this.getReadOptions(i,e)]),n||[];if(o=="Placemark"){let s=this.readPlacemark_(i,[this.getReadOptions(i,e)]);return s?[s]:[]}if(o=="kml"){n=[];for(let s=i.firstElementChild;s;s=s.nextElementSibling){let l=this.readFeaturesFromNode(s,e);l&&mr(n,l)}return n}return[]}readName(i){if(i){if(typeof i=="string"){let e=Eu(i);return this.readNameFromDocument(e)}return Au(i)?this.readNameFromDocument(i):this.readNameFromNode(i)}}readNameFromDocument(i){for(let e=i.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){let n=this.readNameFromNode(e);if(n)return n}}readNameFromNode(i){for(let e=i.firstElementChild;e;e=e.nextElementSibling)if(Bn.includes(e.namespaceURI)&&e.localName=="name")return bi(e);for(let e=i.firstElementChild;e;e=e.nextElementSibling){let n=e.localName;if(Bn.includes(e.namespaceURI)&&(n=="Document"||n=="Folder"||n=="Placemark"||n=="kml")){let o=this.readNameFromNode(e);if(o)return o}}}readNetworkLinks(i){let e=[];if(typeof i=="string"){let n=Eu(i);mr(e,this.readNetworkLinksFromDocument(n))}else Au(i)?mr(e,this.readNetworkLinksFromDocument(i)):mr(e,this.readNetworkLinksFromNode(i));return e}readNetworkLinksFromDocument(i){let e=[];for(let n=i.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&mr(e,this.readNetworkLinksFromNode(n));return e}readNetworkLinksFromNode(i){let e=[];for(let n=i.firstElementChild;n;n=n.nextElementSibling)if(Bn.includes(n.namespaceURI)&&n.localName=="NetworkLink"){let o=ri({},zWe,n,[]);e.push(o)}for(let n=i.firstElementChild;n;n=n.nextElementSibling){let o=n.localName;Bn.includes(n.namespaceURI)&&(o=="Document"||o=="Folder"||o=="kml")&&mr(e,this.readNetworkLinksFromNode(n))}return e}readRegion(i){let e=[];if(typeof i=="string"){let n=Eu(i);mr(e,this.readRegionFromDocument(n))}else Au(i)?mr(e,this.readRegionFromDocument(i)):mr(e,this.readRegionFromNode(i));return e}readRegionFromDocument(i){let e=[];for(let n=i.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&mr(e,this.readRegionFromNode(n));return e}readRegionFromNode(i){let e=[];for(let n=i.firstElementChild;n;n=n.nextElementSibling)if(Bn.includes(n.namespaceURI)&&n.localName=="Region"){let o=ri({},ave,n,[]);e.push(o)}for(let n=i.firstElementChild;n;n=n.nextElementSibling){let o=n.localName;Bn.includes(n.namespaceURI)&&(o=="Document"||o=="Folder"||o=="kml")&&mr(e,this.readRegionFromNode(n))}return e}readCamera(i){let e=[];if(typeof i=="string"){let n=Eu(i);mr(e,this.readCameraFromDocument(n))}else Au(i)?mr(e,this.readCameraFromDocument(i)):mr(e,this.readCameraFromNode(i));return e}readCameraFromDocument(i){let e=[];for(let n=i.firstChild;n;n=n.nextSibling)n.nodeType===Node.ELEMENT_NODE&&mr(e,this.readCameraFromNode(n));return e}readCameraFromNode(i){let e=[];for(let n=i.firstElementChild;n;n=n.nextElementSibling)if(Bn.includes(n.namespaceURI)&&n.localName==="Camera"){let o=ri({},HWe,n,[]);e.push(o)}for(let n=i.firstElementChild;n;n=n.nextElementSibling){let o=n.localName;Bn.includes(n.namespaceURI)&&(o==="Document"||o==="Folder"||o==="Placemark"||o==="kml")&&mr(e,this.readCameraFromNode(n))}return e}writeFeaturesNode(i,e){e=this.adaptOptions(e);let n=fr(Bn[4],"kml"),o="http://www.w3.org/2000/xmlns/";n.setAttributeNS(o,"xmlns:gx",jv[0]),n.setAttributeNS(o,"xmlns:xsi",Xg),n.setAttributeNS(Xg,"xsi:schemaLocation",$We);let s={node:n},l={};i.length>1?l.Document=i:i.length==1&&(l.Placemark=i[0]);let h=WWe[n.namespaceURI],p=yh(l,h);return ur(s,qWe,bc,p,[e],h,this),n}};function ZWe(r,i){let e=[0,0],n="start",o=r.getImage();if(o){let h=o.getSize();if(h&&h.length==2){let p=o.getScaleArray(),m=o.getAnchor();e[0]=p[0]*(h[0]-m[0]),e[1]=p[1]*(h[1]/2-m[1]),n="left"}}let s=r.getText();return s?(s=s.clone(),s.setFont(s.getFont()||WS.getFont()),s.setScale(s.getScale()||WS.getScale()),s.setFill(s.getFill()||WS.getFill()),s.setStroke(s.getStroke()||bQ)):s=WS.clone(),s.setText(i),s.setOffsetX(e[0]),s.setOffsetY(e[1]),s.setTextAlign(n),new Mn({image:o,text:s})}function QWe(r,i,e,n,o){return function(s,l){let h=o,p="",m=[];if(h){let g=s.getGeometry();if(g)if(g instanceof Yl)m=g.getGeometriesArrayRecursive().filter(function(y){let _=y.getType();return _==="Point"||_==="MultiPoint"}),h=m.length>0;else{let y=g.getType();h=y==="Point"||y==="MultiPoint"}}h&&(p=s.get("name"),h=h&&!!p,h&&/&[^&]+;/.test(p)&&(P6||(P6=document.createElement("textarea")),P6.innerHTML=p,p=P6.value));let f=e;if(r?f=r:i&&(f=lve(i,e,n)),h){let g=ZWe(f[0],p);if(m.length>0){g.setGeometry(new Yl(m));let y=new Mn({geometry:f[0].getGeometry(),image:null,fill:f[0].getFill(),stroke:f[0].getStroke(),text:null});return[g,y].concat(f.slice(1))}return g}return f}}function lve(r,i,e){return Array.isArray(r)?r:typeof r=="string"?lve(e[r],i,e):i}function B6(r){let i=Xc(r,!1),e=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(i);if(e){let n=e[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}}function cve(r){let i=Xc(r,!1),e=[];i=i.replace(/\s*,\s*/g,",");let n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i,o;for(;o=n.exec(i);){let s=parseFloat(o[1]),l=parseFloat(o[2]),h=o[3]?parseFloat(o[3]):0;e.push(s,l,h),i=i.substr(o[0].length)}if(i==="")return e}function dve(r){let i=Xc(r,!1).trim(),e=r.baseURI;return(!e||e=="about:blank")&&(e=window.location.href),e?new URL(i,e).href:i}function uve(r){let i=Xc(r,!1).trim().replace(/^(?!.*#)/,"#"),e=r.baseURI;return(!e||e=="about:blank")&&(e=window.location.href),e?new URL(i,e).href:i}function XWe(r){let i=r.getAttribute("xunits"),e=r.getAttribute("yunits"),n;return i!=="insetPixels"?e!=="insetPixels"?n="bottom-left":n="top-left":e!=="insetPixels"?n="bottom-right":n="top-right",{x:parseFloat(r.getAttribute("x")),xunits:tve[i],y:parseFloat(r.getAttribute("y")),yunits:tve[e],origin:n}}function hve(r){return lo(r)}var JWe=ti(Bn,{Pair:xqe});function pve(r,i){return ri(void 0,JWe,r,i,this)}var eqe=ti(Bn,{Icon:ct(mqe),color:ct(B6),heading:ct(lo),hotSpot:ct(XWe),scale:ct(hve)});function tqe(r,i){let e=ri({},eqe,r,i);if(!e)return;let n=i[i.length-1],o="Icon"in e?e.Icon:{},s=!("Icon"in e)||Object.keys(o).length>0,l,h=o.href;h?l=h:s&&(l=L6);let p,m,f,g="bottom-left",y=e.hotSpot;y?(p=[y.x,y.y],m=y.xunits,f=y.yunits,g=y.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(l)&&(l.includes("pushpin")?(p=_Q,m=aR,f=lR):l.includes("arrow-reverse")?(p=[54,42],m=aR,f=lR):l.includes("paddle")&&(p=[32,1],m=aR,f=lR));let _,w=o.x,A=o.y;w!==void 0&&A!==void 0&&(_=[w,A]);let k,R=o.w,$=o.h;R!==void 0&&$!==void 0&&(k=[R,$]);let H,oe=e.heading;oe!==void 0&&(H=Sf(oe));let se=e.scale,ge=e.color;if(s){l==L6&&(k=cR);let ue=new Tu({anchor:p,anchorOrigin:g,anchorXUnits:m,anchorYUnits:f,crossOrigin:this.crossOrigin_,offset:_,offsetOrigin:"bottom-left",rotation:H,scale:se,size:k,src:this.iconUrlFunction_(l),color:ge}),pe=ue.getScaleArray()[0],Ce=ue.getSize();if(Ce===null){let _e=ue.getImageState();if(_e===en.IDLE||_e===en.LOADING){let de=function(){let te=ue.getImageState();if(!(te===en.IDLE||te===en.LOADING)){let Se=ue.getSize();if(Se&&Se.length==2){let Te=N6(Se);ue.setScale(pe*Te)}ue.unlistenImageChange(de)}};ue.listenImageChange(de),_e===en.IDLE&&ue.load()}}else if(Ce.length==2){let _e=N6(Ce);ue.setScale(pe*_e)}n.imageStyle=ue}else n.imageStyle=xQ}var iqe=ti(Bn,{color:ct(B6),scale:ct(hve)});function nqe(r,i){let e=ri({},iqe,r,i);if(!e)return;let n=i[i.length-1],o=new Pl({fill:new sr({color:"color"in e?e.color:yM}),scale:e.scale});n.textStyle=o}var rqe=ti(Bn,{color:ct(B6),width:ct(lo)});function oqe(r,i){let e=ri({},rqe,r,i);if(!e)return;let n=i[i.length-1],o=new ir({color:"color"in e?e.color:yM,width:"width"in e?e.width:1});n.strokeStyle=o}var sqe=ti(Bn,{color:ct(B6),fill:ct(Bv),outline:ct(Bv)});function aqe(r,i){let e=ri({},sqe,r,i);if(!e)return;let n=i[i.length-1],o=new sr({color:"color"in e?e.color:yM});n.fillStyle=o;let s=e.fill;s!==void 0&&(n.fill=s);let l=e.outline;l!==void 0&&(n.outline=l)}var lqe=ti(Bn,{coordinates:Vn(cve)});function mve(r,i){return ri(null,lqe,r,i)}function cqe(r,i){let n=i[i.length-1].coordinates,o=Xc(r,!1),l=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(o);if(l){let h=parseFloat(l[1]),p=parseFloat(l[2]),m=parseFloat(l[3]);n.push([h,p,m])}else n.push([])}var dqe=ti(jv,{Track:_n(fve)});function uqe(r,i){let e=ri([],dqe,r,i);if(e)return new Qa(e)}var hqe=ti(Bn,{when:Nqe},ti(jv,{coord:cqe}));function fve(r,i){let e=ri({coordinates:[],whens:[]},hqe,r,i);if(!e)return;let n=[],o=e.coordinates,s=e.whens;for(let l=0,h=Math.min(o.length,s.length);l<h;++l)o[l].length==3&&n.push(o[l][0],o[l][1],o[l][2],s[l]);return new ao(n,"XYZM")}var pqe=ti(Bn,{href:ct(dve)},ti(jv,{x:ct(lo),y:ct(lo),w:ct(lo),h:ct(lo)}));function mqe(r,i){let e=ri({},pqe,r,i);return e||null}var fqe=ti(Bn,{coordinates:Vn(cve)});function SQ(r,i){return ri(null,fqe,r,i)}var j6=ti(Bn,{extrude:ct(Bv),tessellate:ct(Bv),altitudeMode:ct(bi)});function gve(r,i){let e=ri({},j6,r,i),n=SQ(r,i);if(n){let o=new ao(n,"XYZ");return o.setProperties(e,!0),o}}function _ve(r,i){let e=ri({},j6,r,i),n=SQ(r,i);if(n){let o=new Zo(n,"XYZ",[n.length]);return o.setProperties(e,!0),o}}var gqe=ti(Bn,{LineString:_n(gve),LinearRing:_n(_ve),MultiGeometry:_n(yve),Point:_n(vve),Polygon:_n(bve)});function yve(r,i){let e=ri([],gqe,r,i);if(!e)return null;if(e.length===0)return new Yl(e);let n,o=!0,s=e[0].getType(),l;for(let h=1,p=e.length;h<p;++h)if(l=e[h],l.getType()!=s){o=!1;break}if(o){let h,p;if(s=="Point"){let m=e[0];h=m.getLayout(),p=m.getFlatCoordinates();for(let f=1,g=e.length;f<g;++f)l=e[f],mr(p,l.getFlatCoordinates());n=new Lc(p,h),fQ(n,e)}else if(s=="LineString")n=new Qa(e),fQ(n,e);else if(s=="Polygon")n=new _l(e),fQ(n,e);else if(s=="GeometryCollection")n=new Yl(e);else throw new Error("Unknown geometry type found")}else n=new Yl(e);return n}function vve(r,i){let e=ri({},j6,r,i),n=SQ(r,i);if(n){let o=new Kn(n,"XYZ");return o.setProperties(e,!0),o}}var _qe=ti(Bn,{innerBoundaryIs:Pqe,outerBoundaryIs:Fqe});function bve(r,i){let e=ri({},j6,r,i),n=ri([null],_qe,r,i);if(n&&n[0]){let o=n[0],s=[o.length];for(let h=1,p=n.length;h<p;++h)mr(o,n[h]),s.push(o.length);let l=new Zo(o,"XYZ",s);return l.setProperties(e,!0),l}}var yqe=ti(Bn,{IconStyle:tqe,LabelStyle:nqe,LineStyle:oqe,PolyStyle:aqe});function IQ(r,i){let e=ri({},yqe,r,i,this);if(!e)return null;let n="fillStyle"in e?e.fillStyle:R6,o=e.fill;o!==void 0&&!o&&(n=null);let s;"imageStyle"in e?e.imageStyle!=xQ&&(s=e.imageStyle):s=yQ;let l="textStyle"in e?e.textStyle:WS,h="strokeStyle"in e?e.strokeStyle:vQ,p=e.outline;return p!==void 0&&!p?[new Mn({geometry:function(m){let f=m.getGeometry(),g=f.getType();if(g==="GeometryCollection"){let y=f;return new Yl(y.getGeometriesArrayRecursive().filter(function(_){let w=_.getType();return w!=="Polygon"&&w!=="MultiPolygon"}))}if(g!=="Polygon"&&g!=="MultiPolygon")return f},fill:n,image:s,stroke:h,text:l,zIndex:void 0}),new Mn({geometry:function(m){let f=m.getGeometry(),g=f.getType();if(g==="GeometryCollection"){let y=f;return new Yl(y.getGeometriesArrayRecursive().filter(function(_){let w=_.getType();return w==="Polygon"||w==="MultiPolygon"}))}if(g==="Polygon"||g==="MultiPolygon")return f},fill:n,stroke:null,zIndex:void 0})]:[new Mn({fill:n,image:s,stroke:h,text:l,zIndex:void 0})]}function fQ(r,i){let e=i.length,n=new Array(i.length),o=new Array(i.length),s=new Array(i.length),l,h,p;l=!1,h=!1,p=!1;for(let m=0;m<e;++m){let f=i[m];n[m]=f.get("extrude"),o[m]=f.get("tessellate"),s[m]=f.get("altitudeMode"),l=l||n[m]!==void 0,h=h||o[m]!==void 0,p=p||s[m]}l&&r.set("extrude",n),h&&r.set("tessellate",o),p&&r.set("altitudeMode",s)}var vqe=ti(Bn,{displayName:ct(bi),value:ct(bi)});function bqe(r,i){let e=r.getAttribute("name");Ad(vqe,r,i);let n=i[i.length-1];e&&n.displayName?n[e]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:e!==null?n[e]=n.value:n.displayName!==null&&(n[n.displayName]=n.value),delete n.value}var wqe=ti(Bn,{Data:bqe,SchemaData:Tqe});function wve(r,i){Ad(wqe,r,i)}function Cve(r,i){Ad(ave,r,i)}var Cqe=ti(Bn,{Style:ct(IQ),key:ct(bi),styleUrl:ct(uve)});function xqe(r,i){let e=ri({},Cqe,r,i,this);if(!e)return;let n=e.key;if(n&&n=="normal"){let o=e.styleUrl;o&&(i[i.length-1]=o);let s=e.Style;s&&(i[i.length-1]=s)}}function Sqe(r,i){let e=pve.call(this,r,i);if(!e)return;let n=i[i.length-1];if(Array.isArray(e))n.Style=e;else if(typeof e=="string")n.styleUrl=e;else throw new Error("`styleMapValue` has an unknown type")}var Iqe=ti(Bn,{SimpleData:Aqe});function Tqe(r,i){Ad(Iqe,r,i)}function Aqe(r,i){let e=r.getAttribute("name");if(e!==null){let n=bi(r),o=i[i.length-1];o[e]=n}}var Eqe=ti(Bn,{altitudeMode:ct(bi),minAltitude:ct(lo),maxAltitude:ct(lo),north:ct(lo),south:ct(lo),east:ct(lo),west:ct(lo)});function Mqe(r,i){let e=ri({},Eqe,r,i);if(!e)return;let n=i[i.length-1],o=[parseFloat(e.west),parseFloat(e.south),parseFloat(e.east),parseFloat(e.north)];n.extent=o,n.altitudeMode=e.altitudeMode,n.minAltitude=parseFloat(e.minAltitude),n.maxAltitude=parseFloat(e.maxAltitude)}var Dqe=ti(Bn,{minLodPixels:ct(lo),maxLodPixels:ct(lo),minFadeExtent:ct(lo),maxFadeExtent:ct(lo)});function kqe(r,i){let e=ri({},Dqe,r,i);if(!e)return;let n=i[i.length-1];n.minLodPixels=parseFloat(e.minLodPixels),n.maxLodPixels=parseFloat(e.maxLodPixels),n.minFadeExtent=parseFloat(e.minFadeExtent),n.maxFadeExtent=parseFloat(e.maxFadeExtent)}var Oqe=ti(Bn,{LinearRing:_n(mve)});function Pqe(r,i){let e=ri([],Oqe,r,i);e.length>0&&i[i.length-1].push(...e)}var Rqe=ti(Bn,{LinearRing:Vn(mve)});function Fqe(r,i){let e=ri(void 0,Rqe,r,i);if(e){let n=i[i.length-1];n[0]=e}}function Lqe(r,i){Ad(GWe,r,i)}function Nqe(r,i){let n=i[i.length-1].whens,o=Xc(r,!1),s=Date.parse(o);n.push(isNaN(s)?0:s)}function V6(r,i){let e=Qc(i),o=[(e.length==4?e[3]:1)*255,e[2],e[1],e[0]];for(let s=0;s<4;++s){let l=Math.floor(o[s]).toString(16);o[s]=l.length==1?"0"+l:l}nr(r,o.join(""))}function Bqe(r,i,e){let n=e[e.length-1],o=n.layout,s=n.stride,l;if(o=="XY"||o=="XYM")l=2;else if(o=="XYZ"||o=="XYZM")l=3;else throw new Error("Invalid geometry layout");let h=i.length,p="";if(h>0){p+=i[0];for(let m=1;m<l;++m)p+=","+i[m];for(let m=s;m<h;m+=s){p+=" "+i[m];for(let f=1;f<l;++f)p+=","+i[m+f]}}nr(r,p)}var F6=ti(Bn,{Data:bt(jqe),value:bt($qe),displayName:bt(Vqe)});function jqe(r,i,e){r.setAttribute("name",i.name);let n={node:r},o=i.value;typeof o=="object"?(o!==null&&o.displayName&&ur(n,F6,bc,[o.displayName],e,["displayName"]),o!==null&&o.value&&ur(n,F6,bc,[o.value],e,["value"])):ur(n,F6,bc,[o],e,["value"])}function Vqe(r,i){qye(r,i)}function $qe(r,i){nr(r,i)}var Uqe=ti(Bn,{Placemark:bt(Ive)}),zqe=function(r,i,e){let n=i[i.length-1].node;return fr(n.namespaceURI,"Placemark")};function Gqe(r,i,e){ur({node:r},Uqe,zqe,i,e,void 0,this)}var Hqe=Pa("Data");function Wqe(r,i,e){let n={node:r},o=i.names,s=i.values,l=o.length;for(let h=0;h<l;h++)ur(n,F6,Hqe,[{name:o[h],value:s[h]}],e)}var nve=ti(Bn,["href"],ti(jv,["x","y","w","h"])),rve=ti(Bn,{href:bt(nr)},ti(jv,{x:bt(vh),y:bt(vh),w:bt(vh),h:bt(vh)})),qqe=function(r,i,e){return fr(jv[0],"gx:"+e)};function Yqe(r,i,e){let n={node:r},o=e[e.length-1].node,s=nve[o.namespaceURI],l=yh(i,s);ur(n,rve,bc,l,e,s),s=nve[jv[0]],l=yh(i,s),ur(n,rve,qqe,l,e,s)}var Kqe=ti(Bn,["scale","heading","Icon","color","hotSpot"]),Zqe=ti(Bn,{Icon:bt(Yqe),color:bt(V6),heading:bt(vh),hotSpot:bt(xYe),scale:bt(Ave)});function Qqe(r,i,e){let n={node:r},o={},s=i.getSrc(),l=i.getSize(),h=i.getImageSize(),p={href:s};if(l){p.w=l[0],p.h=l[1];let k=i.getAnchor(),R=i.getOrigin();if(R&&h&&R[0]!==0&&R[1]!==l[1]&&(p.x=R[0],p.y=h[1]-(R[1]+l[1])),k&&(k[0]!==l[0]/2||k[1]!==l[1]/2)){let $={x:k[0],xunits:"pixels",y:l[1]-k[1],yunits:"pixels"};o.hotSpot=$}}o.Icon=p;let m=i.getScaleArray()[0],f=l;if(f===null&&(f=cR),f.length==2){let k=N6(f);m=m/k}m!==1&&(o.scale=m);let g=i.getRotation();g!==0&&(o.heading=g);let y=i.getColor();y&&(o.color=y);let _=e[e.length-1].node,w=Kqe[_.namespaceURI],A=yh(o,w);ur(n,Zqe,bc,A,e,w)}var Xqe=ti(Bn,["color","scale"]),Jqe=ti(Bn,{color:bt(V6),scale:bt(Ave)});function eYe(r,i,e){let n={node:r},o={},s=i.getFill();s&&(o.color=s.getColor());let l=i.getScale();l&&l!==1&&(o.scale=l);let h=e[e.length-1].node,p=Xqe[h.namespaceURI],m=yh(o,p);ur(n,Jqe,bc,m,e,p)}var tYe=ti(Bn,["color","width"]),iYe=ti(Bn,{color:bt(V6),width:bt(vh)});function nYe(r,i,e){let n={node:r},o={color:i.getColor(),width:Number(i.getWidth())||1},s=e[e.length-1].node,l=tYe[s.namespaceURI],h=yh(o,l);ur(n,iYe,bc,h,e,l)}var rYe={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},xve=function(r,i,e){if(r){let n=i[i.length-1].node;return fr(n.namespaceURI,rYe[r.getType()])}},oYe=Pa("Point"),sYe=Pa("LineString"),aYe=Pa("LinearRing"),lYe=Pa("Polygon"),cYe=ti(Bn,{LineString:bt(vM),Point:bt(vM),Polygon:bt(Tve),GeometryCollection:bt(Sve)});function Sve(r,i,e){let n={node:r},o=i.getType(),s=[],l;if(o==="GeometryCollection")i.getGeometriesArrayRecursive().forEach(function(h){let p=h.getType();if(p==="MultiPoint")s=s.concat(h.getPoints());else if(p==="MultiLineString")s=s.concat(h.getLineStrings());else if(p==="MultiPolygon")s=s.concat(h.getPolygons());else if(p==="Point"||p==="LineString"||p==="Polygon")s.push(h);else throw new Error("Unknown geometry type")}),l=xve;else if(o==="MultiPoint")s=i.getPoints(),l=oYe;else if(o==="MultiLineString")s=i.getLineStrings(),l=sYe;else if(o==="MultiPolygon")s=i.getPolygons(),l=lYe;else throw new Error("Unknown geometry type");ur(n,cYe,l,s,e)}var dYe=ti(Bn,{LinearRing:bt(vM)});function ove(r,i,e){ur({node:r},dYe,aYe,[i],e)}var gQ=ti(Bn,{ExtendedData:bt(Wqe),MultiGeometry:bt(Sve),LineString:bt(vM),LinearRing:bt(vM),Point:bt(vM),Polygon:bt(Tve),Style:bt(CYe),address:bt(nr),description:bt(nr),name:bt(nr),open:bt(zS),phoneNumber:bt(nr),styleUrl:bt(nr),visibility:bt(zS)}),uYe=ti(Bn,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),hYe=Pa("ExtendedData");function Ive(r,i,e){let n={node:r};i.getId()&&r.setAttribute("id",i.getId());let o=i.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[i.getGeometryName()]=1;let l=Object.keys(o||{}).sort().filter(function(_){return!s[_]}),h=i.getStyleFunction();if(h){let _=h(i,0);if(_){let w=Array.isArray(_)?_:[_],A=w;if(i.getGeometry()&&(A=w.filter(function(k){let R=k.getGeometryFunction()(i);if(R){let $=R.getType();return $==="GeometryCollection"?R.getGeometriesArrayRecursive().filter(function(H){let oe=H.getType();return oe==="Point"||oe==="MultiPoint"}).length:$==="Point"||$==="MultiPoint"}})),this.writeStyles_){let k=w,R=w;i.getGeometry()&&(k=w.filter(function($){let H=$.getGeometryFunction()(i);if(H){let oe=H.getType();return oe==="GeometryCollection"?H.getGeometriesArrayRecursive().filter(function(se){let ge=se.getType();return ge==="LineString"||ge==="MultiLineString"}).length:oe==="LineString"||oe==="MultiLineString"}}),R=w.filter(function($){let H=$.getGeometryFunction()(i);if(H){let oe=H.getType();return oe==="GeometryCollection"?H.getGeometriesArrayRecursive().filter(function(se){let ge=se.getType();return ge==="Polygon"||ge==="MultiPolygon"}).length:oe==="Polygon"||oe==="MultiPolygon"}})),o.Style={pointStyles:A,lineStyles:k,polyStyles:R}}if(A.length&&o.name===void 0){let k=A[0].getText();k&&(o.name=k.getText())}}}let p=e[e.length-1].node,m=uYe[p.namespaceURI],f=yh(o,m);if(ur(n,gQ,bc,f,e,m),l.length>0){let _=yh(o,l);ur(n,gQ,hYe,[{names:l,values:_}],e)}let g=e[0],y=i.getGeometry();y&&(y=Co(y,!0,g)),ur(n,gQ,xve,[y],e)}var pYe=ti(Bn,["extrude","tessellate","altitudeMode","coordinates"]),mYe=ti(Bn,{extrude:bt(zS),tessellate:bt(zS),altitudeMode:bt(nr),coordinates:bt(Bqe)});function vM(r,i,e){let n=i.getFlatCoordinates(),o={node:r};o.layout=i.getLayout(),o.stride=i.getStride();let s=i.getProperties();s.coordinates=n;let l=e[e.length-1].node,h=pYe[l.namespaceURI],p=yh(s,h);ur(o,mYe,bc,p,e,h)}var fYe=ti(Bn,["color","fill","outline"]),sve=ti(Bn,{outerBoundaryIs:bt(ove),innerBoundaryIs:bt(ove)}),gYe=Pa("innerBoundaryIs"),_Ye=Pa("outerBoundaryIs");function Tve(r,i,e){let n=i.getLinearRings(),o=n.shift(),s={node:r};ur(s,sve,gYe,n,e),ur(s,sve,_Ye,[o],e)}var yYe=ti(Bn,{color:bt(V6),fill:bt(zS),outline:bt(zS)});function vYe(r,i,e){let n={node:r},o=i.getFill(),s=i.getStroke(),l={color:o?o.getColor():void 0,fill:o?void 0:!1,outline:s?void 0:!1},h=e[e.length-1].node,p=fYe[h.namespaceURI],m=yh(l,p);ur(n,yYe,bc,m,e,p)}function Ave(r,i){vh(r,Math.round(i*1e6)/1e6)}var bYe=ti(Bn,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),wYe=ti(Bn,{IconStyle:bt(Qqe),LabelStyle:bt(eYe),LineStyle:bt(nYe),PolyStyle:bt(vYe)});function CYe(r,i,e){let n={node:r},o={};if(i.pointStyles.length){let p=i.pointStyles[0].getText();p&&(o.LabelStyle=p);let m=i.pointStyles[0].getImage();m&&typeof m.getSrc=="function"&&(o.IconStyle=m)}if(i.lineStyles.length){let p=i.lineStyles[0].getStroke();p&&(o.LineStyle=p)}if(i.polyStyles.length){let p=i.polyStyles[0].getStroke();p&&!o.LineStyle&&(o.LineStyle=p),o.PolyStyle=i.polyStyles[0]}let s=e[e.length-1].node,l=bYe[s.namespaceURI],h=yh(o,l);ur(n,wYe,bc,h,e,l)}function xYe(r,i){r.setAttribute("x",String(i.x)),r.setAttribute("y",String(i.y)),r.setAttribute("xunits",i.xunits),r.setAttribute("yunits",i.yunits)}var qS=CQ;var Fve=ld(Rve(),1);var EQ=class extends R_{constructor(i){super(),i=i||{},this.dataProjection=new Cf({code:"",units:"tile-pixels"}),this.featureClass_=i.featureClass?i.featureClass:Zc,this.geometryName_=i.geometryName,this.layerName_=i.layerName?i.layerName:"layer",this.layers_=i.layers?i.layers:null,this.idProperty_=i.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(i,e,n,o){i.pos=e.geometry;let s=i.readVarint()+i.pos,l=1,h=0,p=0,m=0,f=0,g=0;for(;i.pos<s;){if(!h){let y=i.readVarint();l=y&7,h=y>>3}if(h--,l===1||l===2)p+=i.readSVarint(),m+=i.readSVarint(),l===1&&f>g&&(o.push(f),g=f),n.push(p,m),f+=2;else if(l===7)f>g&&(n.push(n[g],n[g+1]),f+=2);else throw new Error("Invalid command found in the PBF")}f>g&&(o.push(f),g=f)}createFeature_(i,e,n){let o=e.type;if(o===0)return null;let s,l=e.properties,h;this.idProperty_?(h=l[this.idProperty_],delete l[this.idProperty_]):h=e.id,l[this.layerName_]=e.layer.name;let p=[],m=[];this.readRawGeometry_(i,e,p,m);let f=HYe(o,m.length);if(this.featureClass_===Zc)s=new this.featureClass_(f,p,m,2,l,h),s.transform(n.dataProjection);else{let g;if(f=="Polygon"){let w=_6(p,m);g=w.length>1?new _l(p,"XY",w):new Zo(p,"XY",m)}else g=f==="Point"?new Kn(p,"XY"):f==="LineString"?new ao(p,"XY"):f==="MultiPoint"?new Lc(p,"XY"):f==="MultiLineString"?new Qa(p,"XY",m):null;let y=this.featureClass_;s=new y,this.geometryName_&&s.setGeometryName(this.geometryName_);let _=Co(g,!1,n);s.setGeometry(_),h!==void 0&&s.setId(h),s.setProperties(l,!0)}return s}getType(){return"arraybuffer"}readFeatures(i,e){let n=this.layers_;e=this.adaptOptions(e);let o=Vi(e.dataProjection);o.setWorldExtent(e.extent),e.dataProjection=o;let s=new Fve.default(i),l=s.readFields($Ye,{}),h=[];for(let p in l){if(n&&!n.includes(p))continue;let m=l[p],f=m?[0,0,m.extent,m.extent]:null;o.setExtent(f);for(let g=0,y=m.length;g<y;++g){let _=GYe(s,m,g),w=this.createFeature_(s,_,e);w!==null&&h.push(w)}}return h}readProjection(i){return this.dataProjection}setLayers(i){this.layers_=i}};function $Ye(r,i,e){if(r===3){let n={keys:[],values:[],features:[]},o=e.readVarint()+e.pos;e.readFields(UYe,n,o),n.length=n.features.length,n.length&&(i[n.name]=n)}}function UYe(r,i,e){if(r===15)i.version=e.readVarint();else if(r===1)i.name=e.readString();else if(r===5)i.extent=e.readVarint();else if(r===2)i.features.push(e.pos);else if(r===3)i.keys.push(e.readString());else if(r===4){let n=null,o=e.readVarint()+e.pos;for(;e.pos<o;)r=e.readVarint()>>3,n=r===1?e.readString():r===2?e.readFloat():r===3?e.readDouble():r===4?e.readVarint64():r===5?e.readVarint():r===6?e.readSVarint():r===7?e.readBoolean():null;i.values.push(n)}}function zYe(r,i,e){if(r==1)i.id=e.readVarint();else if(r==2){let n=e.readVarint()+e.pos;for(;e.pos<n;){let o=i.layer.keys[e.readVarint()],s=i.layer.values[e.readVarint()];i.properties[o]=s}}else r==3?i.type=e.readVarint():r==4&&(i.geometry=e.pos)}function GYe(r,i,e){r.pos=i.features[e];let n=r.readVarint()+r.pos,o={layer:i,type:0,properties:{}};return r.readFields(zYe,o,n),o}function HYe(r,i){let e;return r===1?e=i===1?"Point":"MultiPoint":r===2?e=i===1?"LineString":"MultiLineString":r===3&&(e="Polygon"),e}var dR=EQ;var MQ=class{read(i){if(!i)return null;if(typeof i=="string"){let e=Eu(i);return this.readFromDocument(e)}return Au(i)?this.readFromDocument(i):this.readFromNode(i)}readFromDocument(i){for(let e=i.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null}readFromNode(i){xn()}},CM=MQ;var WYe="http://www.w3.org/1999/xlink";function $v(r){return r.getAttributeNS(WYe,"href")}var zp=[null,"http://www.opengis.net/ows/1.1"],qYe=ti(zp,{ServiceIdentification:ct(_Ke),ServiceProvider:ct(vKe),OperationsMetadata:ct(fKe)}),DQ=class extends CM{constructor(){super()}readFromNode(i){let e=ri({},qYe,i,[]);return e||null}},YYe=ti(zp,{DeliveryPoint:ct(bi),City:ct(bi),AdministrativeArea:ct(bi),PostalCode:ct(bi),Country:ct(bi),ElectronicMailAddress:ct(bi)}),KYe=ti(zp,{Value:Ns(bKe)}),ZYe=ti(zp,{AllowedValues:ct(lKe)}),QYe=ti(zp,{Phone:ct(gKe),Address:ct(aKe)}),XYe=ti(zp,{HTTP:ct(pKe)}),JYe=ti(zp,{Get:Ns(hKe),Post:void 0}),eKe=ti(zp,{DCP:ct(uKe)}),tKe=ti(zp,{Operation:mKe}),iKe=ti(zp,{Voice:ct(bi),Facsimile:ct(bi)}),nKe=ti(zp,{Constraint:Ns(cKe)}),rKe=ti(zp,{IndividualName:ct(bi),PositionName:ct(bi),ContactInfo:ct(dKe)}),oKe=ti(zp,{Abstract:ct(bi),AccessConstraints:ct(bi),Fees:ct(bi),Title:ct(bi),ServiceTypeVersion:ct(bi),ServiceType:ct(bi)}),sKe=ti(zp,{ProviderName:ct(bi),ProviderSite:ct($v),ServiceContact:ct(yKe)});function aKe(r,i){return ri({},YYe,r,i)}function lKe(r,i){return ri({},KYe,r,i)}function cKe(r,i){let e=r.getAttribute("name");if(e)return ri({name:e},ZYe,r,i)}function dKe(r,i){return ri({},QYe,r,i)}function uKe(r,i){return ri({},XYe,r,i)}function hKe(r,i){let e=$v(r);if(e)return ri({href:e},nKe,r,i)}function pKe(r,i){return ri({},JYe,r,i)}function mKe(r,i){let e=r.getAttribute("name"),n=ri({},eKe,r,i);if(!n)return;let o=i[i.length-1];o[e]=n}function fKe(r,i){return ri({},tKe,r,i)}function gKe(r,i){return ri({},iKe,r,i)}function _Ke(r,i){return ri({},oKe,r,i)}function yKe(r,i){return ri({},rKe,r,i)}function vKe(r,i){return ri({},sKe,r,i)}function bKe(r,i){return bi(r)}var z6=DQ;function kQ(r,i,e,n,o,s){o!==void 0?(o=o,s=s!==void 0?s:0):(o=[],s=0);let l=i;for(;l<e;){let h=r[l++];o[s++]=r[l++],o[s++]=h;for(let p=2;p<n;++p)o[s++]=r[l++]}return o.length=s,o}var OQ=class extends _M{constructor(i){super(),i=i||{},this.dataProjection=Vi("EPSG:4326"),this.factor_=i.factor?i.factor:1e5,this.geometryLayout_=i.geometryLayout?i.geometryLayout:"XY"}readFeatureFromText(i,e){let n=this.readGeometryFromText(i,e);return new An(n)}readFeaturesFromText(i,e){return[this.readFeatureFromText(i,e)]}readGeometryFromText(i,e){let n=FS(this.geometryLayout_),o=CKe(i,n,this.factor_);kQ(o,0,o.length,n,o);let s=Lp(o,0,o.length,n),l=new ao(s,this.geometryLayout_);return Co(l,!1,this.adaptOptions(e))}writeFeatureText(i,e){let n=i.getGeometry();if(n)return this.writeGeometryText(n,e);throw new Error("Expected `feature` to have a geometry")}writeFeaturesText(i,e){return this.writeFeatureText(i[0],e)}writeGeometryText(i,e){i=Co(i,!0,this.adaptOptions(e));let n=i.getFlatCoordinates(),o=i.getStride();return kQ(n,0,n.length,o,n),wKe(n,o,this.factor_)}};function wKe(r,i,e){e=e||1e5;let n,o=new Array(i);for(n=0;n<i;++n)o[n]=0;for(let s=0,l=r.length;s<l;)for(n=0;n<i;++n,++s){let h=r[s],p=h-o[n];o[n]=h,r[s]=p}return xKe(r,e)}function CKe(r,i,e){e=e||1e5;let n,o=new Array(i);for(n=0;n<i;++n)o[n]=0;let s=SKe(r,e);for(let l=0,h=s.length;l<h;)for(n=0;n<i;++n,++l)o[n]+=s[l],s[l]=o[n];return s}function xKe(r,i){i=i||1e5;for(let e=0,n=r.length;e<n;++e)r[e]=Math.round(r[e]*i);return IKe(r)}function SKe(r,i){i=i||1e5;let e=TKe(r);for(let n=0,o=e.length;n<o;++n)e[n]/=i;return e}function IKe(r){for(let i=0,e=r.length;i<e;++i){let n=r[i];r[i]=n<0?~(n<<1):n<<1}return AKe(r)}function TKe(r){let i=EKe(r);for(let e=0,n=i.length;e<n;++e){let o=i[e];i[e]=o&1?~(o>>1):o>>1}return i}function AKe(r){let i="";for(let e=0,n=r.length;e<n;++e)i+=MKe(r[e]);return i}function EKe(r){let i=[],e=0,n=0;for(let o=0,s=r.length;o<s;++o){let l=r.charCodeAt(o)-63;e|=(l&31)<<n,l<32?(i.push(e),e=0,n=0):n+=5}return i}function MKe(r){let i,e="";for(;r>=32;)i=(32|r&31)+63,e+=String.fromCharCode(i),r>>=5;return i=r+63,e+=String.fromCharCode(i),e}var Lve=OQ;var PQ=class extends lM{constructor(i){super(),i=i||{},this.layerName_=i.layerName,this.layers_=i.layers?i.layers:null,this.dataProjection=Vi(i.dataProjection?i.dataProjection:"EPSG:4326")}readFeaturesFromObject(i,e){if(i.type=="Topology"){let n=i,o,s=null,l=null;n.transform&&(o=n.transform,s=o.scale,l=o.translate);let h=n.arcs;o&&BKe(h,s,l);let p=[],m=n.objects,f=this.layerName_,g;for(let y in m)this.layers_&&!this.layers_.includes(y)||(m[y].type==="GeometryCollection"?(g=m[y],p.push.apply(p,NKe(g,h,s,l,f,y,e))):(g=m[y],p.push(Nve(g,h,s,l,f,y,e))));return p}return[]}readProjectionFromObject(i){return this.dataProjection}},DKe={Point:kKe,LineString:PKe,Polygon:FKe,MultiPoint:OKe,MultiLineString:RKe,MultiPolygon:LKe};function G6(r,i){let e=[],n;for(let o=0,s=r.length;o<s;++o)if(n=r[o],o>0&&e.pop(),n>=0){let l=i[n];for(let h=0,p=l.length;h<p;++h)e.push(l[h].slice(0))}else{let l=i[~n];for(let h=l.length-1;h>=0;--h)e.push(l[h].slice(0))}return e}function kKe(r,i,e){let n=r.coordinates;return i&&e&&RQ(n,i,e),new Kn(n)}function OKe(r,i,e){let n=r.coordinates;if(i&&e)for(let o=0,s=n.length;o<s;++o)RQ(n[o],i,e);return new Lc(n)}function PKe(r,i){let e=G6(r.arcs,i);return new ao(e)}function RKe(r,i){let e=[];for(let n=0,o=r.arcs.length;n<o;++n)e[n]=G6(r.arcs[n],i);return new Qa(e)}function FKe(r,i){let e=[];for(let n=0,o=r.arcs.length;n<o;++n)e[n]=G6(r.arcs[n],i);return new Zo(e)}function LKe(r,i){let e=[];for(let n=0,o=r.arcs.length;n<o;++n){let s=r.arcs[n],l=[];for(let h=0,p=s.length;h<p;++h)l[h]=G6(s[h],i);e[n]=l}return new _l(e)}function NKe(r,i,e,n,o,s,l){let h=r.geometries,p=[];for(let m=0,f=h.length;m<f;++m)p[m]=Nve(h[m],i,e,n,o,s,l);return p}function Nve(r,i,e,n,o,s,l){let h=null,p=r.type;if(p){let g=DKe[p];p==="Point"||p==="MultiPoint"?h=g(r,e,n):h=g(r,i),h=Co(h,!1,l)}let m=new An({geometry:h});r.id!==void 0&&m.setId(r.id);let f=r.properties;return o&&(f||(f={}),f[o]=s),f&&m.setProperties(f,!0),m}function BKe(r,i,e){for(let n=0,o=r.length;n<o;++n)jKe(r[n],i,e)}function jKe(r,i,e){let n=0,o=0;for(let s=0,l=r.length;s<l;++s){let h=r[s];n+=h[0],o+=h[1],h[0]=n,h[1]=o,RQ(h,i,e)}}function RQ(r,i,e){r[0]=r[0]*i[0]+e[0],r[1]=r[1]*i[1]+e[1]}var H6=PQ;var as=class extends Lr{constructor(i){i=i||{},super(i),this.schemaLocation=i.schemaLocation?i.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(i,e,n){let o=n[n.length-1];n[n.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},o),super.writeGeometryElement(i,e,n)}};as.prototype.namespace="http://www.opengis.net/gml/3.2";as.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:Vn(Lr.prototype.readFlatPos),posList:Vn(Lr.prototype.readFlatPosList),coordinates:Vn(Up.prototype.readFlatCoordinates)}};as.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:Lr.prototype.interiorParser,exterior:Lr.prototype.exteriorParser}};as.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Vn(Zr.prototype.readPoint),MultiPoint:Vn(Zr.prototype.readMultiPoint),LineString:Vn(Zr.prototype.readLineString),MultiLineString:Vn(Zr.prototype.readMultiLineString),LinearRing:Vn(Zr.prototype.readLinearRing),Polygon:Vn(Zr.prototype.readPolygon),MultiPolygon:Vn(Zr.prototype.readMultiPolygon),Surface:Vn(as.prototype.readSurface),MultiSurface:Vn(Lr.prototype.readMultiSurface),Curve:Vn(as.prototype.readCurve),MultiCurve:Vn(Lr.prototype.readMultiCurve),Envelope:Vn(as.prototype.readEnvelope)}};as.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:_n(Lr.prototype.curveMemberParser),curveMembers:_n(Lr.prototype.curveMemberParser)}};as.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:_n(Lr.prototype.surfaceMemberParser),surfaceMembers:_n(Lr.prototype.surfaceMemberParser)}};as.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:_n(Zr.prototype.readLineString),Curve:_n(Lr.prototype.readCurve)}};as.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:_n(Zr.prototype.readPolygon),Surface:_n(Lr.prototype.readSurface)}};as.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:Vn(Lr.prototype.readPatch)}};as.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:Vn(Lr.prototype.readSegment)}};as.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:_n(Lr.prototype.readFlatPosList),upperCorner:_n(Lr.prototype.readFlatPosList)}};as.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:Vn(Lr.prototype.readPolygonPatch)}};as.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:$S(Lr.prototype.readLineStringSegment)}};as.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:_n(Zr.prototype.pointMemberParser),pointMembers:_n(Zr.prototype.pointMemberParser)}};as.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:_n(Zr.prototype.lineStringMemberParser),lineStringMembers:_n(Zr.prototype.lineStringMemberParser)}};as.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:_n(Zr.prototype.polygonMemberParser),polygonMembers:_n(Zr.prototype.polygonMemberParser)}};as.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:_n(Zr.prototype.readFlatCoordinatesFromNode)}};as.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:_n(Zr.prototype.readLineString)}};as.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:_n(Zr.prototype.readPolygon)}};as.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:Vn(Zr.prototype.readFlatLinearRing),Ring:Vn(as.prototype.readFlatCurveRing)}};as.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:bt(Lr.prototype.writeRing),interior:bt(Lr.prototype.writeRing)}};as.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:bt(nr),upperCorner:bt(nr)}};as.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:bt(Lr.prototype.writeSurfaceOrPolygonMember),polygonMember:bt(Lr.prototype.writeSurfaceOrPolygonMember)}};as.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:bt(Lr.prototype.writePointMember)}};as.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:bt(Lr.prototype.writeLineStringOrCurveMember),curveMember:bt(Lr.prototype.writeLineStringOrCurveMember)}};as.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:bt(Lr.prototype.writeCurveOrLineString),MultiCurve:bt(Lr.prototype.writeMultiCurveOrLineString),Point:bt(as.prototype.writePoint),MultiPoint:bt(Lr.prototype.writeMultiPoint),LineString:bt(Lr.prototype.writeCurveOrLineString),MultiLineString:bt(Lr.prototype.writeMultiCurveOrLineString),LinearRing:bt(Lr.prototype.writeLinearRing),Polygon:bt(Lr.prototype.writeSurfaceOrPolygon),MultiPolygon:bt(Lr.prototype.writeMultiSurfaceOrPolygon),Surface:bt(Lr.prototype.writeSurfaceOrPolygon),MultiSurface:bt(Lr.prototype.writeMultiSurfaceOrPolygon),Envelope:bt(Lr.prototype.writeEnvelope)}};var xM=as;var FQ=class{constructor(i){this.tagName_=i}getTagName(){return this.tagName_}},V_=FQ;var LQ=class extends V_{constructor(i,e){super(i),this.conditions=e,Nn(this.conditions.length>=2,"At least 2 conditions are required")}},W6=LQ;var NQ=class extends W6{constructor(i){super("And",Array.prototype.slice.call(arguments))}},Bve=NQ;var BQ=class extends V_{constructor(i,e,n){if(super("BBOX"),this.geometryName=i,this.extent=e,e.length!==4)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");this.srsName=n}},jve=BQ;var jQ=class extends V_{constructor(i,e,n,o){super(i),this.geometryName=e||"the_geom",this.geometry=n,this.srsName=o}},SM=jQ;var VQ=class extends SM{constructor(i,e,n){super("Contains",i,e,n)}},Vve=VQ;var $Q=class extends V_{constructor(i,e){super(i),this.propertyName=e}},$_=$Q;var UQ=class extends $_{constructor(i,e,n){super("During",i),this.begin=e,this.end=n}},$ve=UQ;var zQ=class extends $_{constructor(i,e,n,o){super(i,e),this.expression=n,this.matchCase=o}},Mf=zQ;var GQ=class extends Mf{constructor(i,e,n){super("PropertyIsEqualTo",i,e,n)}},Uve=GQ;var HQ=class extends Mf{constructor(i,e){super("PropertyIsGreaterThan",i,e)}},zve=HQ;var WQ=class extends Mf{constructor(i,e){super("PropertyIsGreaterThanOrEqualTo",i,e)}},Gve=WQ;var qQ=class extends SM{constructor(i,e,n){super("Intersects",i,e,n)}},Hve=qQ;var YQ=class extends $_{constructor(i,e,n){super("PropertyIsBetween",i),this.lowerBoundary=e,this.upperBoundary=n}},Wve=YQ;var KQ=class extends $_{constructor(i,e,n,o,s,l){super("PropertyIsLike",i),this.pattern=e,this.wildCard=n!==void 0?n:"*",this.singleChar=o!==void 0?o:".",this.escapeChar=s!==void 0?s:"!",this.matchCase=l}},qve=KQ;var ZQ=class extends $_{constructor(i){super("PropertyIsNull",i)}},Yve=ZQ;var QQ=class extends Mf{constructor(i,e){super("PropertyIsLessThan",i,e)}},Kve=QQ;var XQ=class extends Mf{constructor(i,e){super("PropertyIsLessThanOrEqualTo",i,e)}},Zve=XQ;var JQ=class extends V_{constructor(i){super("Not"),this.condition=i}},Qve=JQ;var eX=class extends Mf{constructor(i,e,n){super("PropertyIsNotEqualTo",i,e,n)}},Xve=eX;var tX=class extends W6{constructor(i){super("Or",Array.prototype.slice.call(arguments))}},Jve=tX;var iX=class extends SM{constructor(i,e,n){super("Within",i,e,n)}},ebe=iX;function uR(r){let i=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(Bve,i))}function tbe(r){let i=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(Jve,i))}function ibe(r){return new Qve(r)}function hR(r,i,e){return new jve(r,i,e)}function nbe(r,i,e){return new Vve(r,i,e)}function rbe(r,i,e){return new Hve(r,i,e)}function obe(r,i,e){return new ebe(r,i,e)}function sbe(r,i,e){return new Uve(r,i,e)}function abe(r,i,e){return new Xve(r,i,e)}function lbe(r,i){return new Kve(r,i)}function cbe(r,i){return new Zve(r,i)}function dbe(r,i){return new zve(r,i)}function ube(r,i){return new Gve(r,i)}function hbe(r){return new Yve(r)}function pbe(r,i,e){return new Wve(r,i,e)}function mbe(r,i,e,n,o,s){return new qve(r,i,e,n,o,s)}function fbe(r,i,e){return new $ve(r,i,e)}var gbe={"http://www.opengis.net/gml":{boundedBy:ct(Zr.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:_n(Zr.prototype.readFeaturesInternal)}},$Ke={"http://www.opengis.net/wfs":{totalInserted:ct(ol),totalUpdated:ct(ol),totalDeleted:ct(ol)},"http://www.opengis.net/wfs/2.0":{totalInserted:ct(ol),totalUpdated:ct(ol),totalDeleted:ct(ol)}},UKe={"http://www.opengis.net/wfs":{TransactionSummary:ct(ybe,"transactionSummary"),InsertResults:ct(bbe,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:ct(ybe,"transactionSummary"),InsertResults:ct(bbe,"insertIds")}},zKe={"http://www.opengis.net/wfs":{PropertyName:bt(nr)},"http://www.opengis.net/wfs/2.0":{PropertyName:bt(nr)}},Lbe={"http://www.opengis.net/wfs":{Insert:bt(wbe),Update:bt(xbe),Delete:bt(Cbe),Property:bt(Sbe),Native:bt(Ibe)},"http://www.opengis.net/wfs/2.0":{Insert:bt(wbe),Update:bt(xbe),Delete:bt(Cbe),Property:bt(Sbe),Native:bt(Ibe)}},Nbe="feature",oX="http://www.w3.org/2000/xmlns/",sX={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},nX={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},aX={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},_be={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},lX={"2.0.0":xM,"1.1.0":Lr,"1.0.0":Up},GKe="1.1.0",rX=class extends Tf{constructor(i){super(),i=i||{},this.version_=i.version?i.version:GKe,this.featureType_=i.featureType,this.featureNS_=i.featureNS,this.gmlFormat_=i.gmlFormat?i.gmlFormat:new lX[this.version_],this.schemaLocation_=i.schemaLocation?i.schemaLocation:_be[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(i){this.featureType_=i}readFeaturesFromNode(i,e){let n={node:i};Object.assign(n,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(n,this.getReadOptions(i,e||{}));let o=[n],s;this.version_==="2.0.0"?s=gbe:s=this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let l=ri([],s,i,o,this.gmlFormat_);return l||(l=[]),l}readTransactionResponse(i){if(i){if(typeof i=="string"){let e=Eu(i);return this.readTransactionResponseFromDocument(e)}return Au(i)?this.readTransactionResponseFromDocument(i):this.readTransactionResponseFromNode(i)}}readFeatureCollectionMetadata(i){if(i){if(typeof i=="string"){let e=Eu(i);return this.readFeatureCollectionMetadataFromDocument(e)}return Au(i)?this.readFeatureCollectionMetadataFromDocument(i):this.readFeatureCollectionMetadataFromNode(i)}}readFeatureCollectionMetadataFromDocument(i){for(let e=i.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)}readFeatureCollectionMetadataFromNode(i){let e={},n=Ef(i.getAttribute("numberOfFeatures"));return e.numberOfFeatures=n,ri(e,gbe,i,[],this.gmlFormat_)}readTransactionResponseFromDocument(i){for(let e=i.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)}readTransactionResponseFromNode(i){return ri({},UKe,i,[])}writeGetFeature(i){let e=fr(nX[this.version_],"GetFeature");e.setAttribute("service","WFS"),e.setAttribute("version",this.version_),i.handle&&e.setAttribute("handle",i.handle),i.outputFormat&&e.setAttribute("outputFormat",i.outputFormat),i.maxFeatures!==void 0&&e.setAttribute("maxFeatures",String(i.maxFeatures)),i.resultType&&e.setAttribute("resultType",i.resultType),i.startIndex!==void 0&&e.setAttribute("startIndex",String(i.startIndex)),i.count!==void 0&&e.setAttribute("count",String(i.count)),i.viewParams!==void 0&&e.setAttribute("viewParams",i.viewParams),e.setAttributeNS(Xg,"xsi:schemaLocation",this.schemaLocation_);let n={node:e};if(Object.assign(n,{version:this.version_,srsName:i.srsName,featureNS:i.featureNS?i.featureNS:this.featureNS_,featurePrefix:i.featurePrefix,propertyNames:i.propertyNames?i.propertyNames:[]}),Nn(Array.isArray(i.featureTypes),"`options.featureTypes` must be an Array"),typeof i.featureTypes[0]=="string"){let o=i.filter;i.bbox&&(Nn(i.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),o=this.combineBboxAndFilter(i.geometryName,i.bbox,i.srsName,o)),Object.assign(n,{geometryName:i.geometryName,filter:o}),Fbe(e,i.featureTypes,[n])}else i.featureTypes.forEach(o=>{let s=this.combineBboxAndFilter(o.geometryName,o.bbox,i.srsName,i.filter);Object.assign(n,{geometryName:o.geometryName,filter:s}),Fbe(e,[o.name],[n])});return e}combineBboxAndFilter(i,e,n,o){let s=hR(i,e,n);return o?uR(o,s):s}writeTransaction(i,e,n,o){let s=[],l=o.version?o.version:this.version_,h=fr(nX[l],"Transaction");h.setAttribute("service","WFS"),h.setAttribute("version",l);let p;o&&(p=o.gmlOptions?o.gmlOptions:{},o.handle&&h.setAttribute("handle",o.handle)),h.setAttributeNS(Xg,"xsi:schemaLocation",_be[l]);let m=HKe(h,p,l,o);return i&&q6("Insert",i,s,m),e&&q6("Update",e,s,m),n&&q6("Delete",n,s,m),o.nativeElements&&q6("Native",o.nativeElements,s,m),h}readProjectionFromDocument(i){for(let e=i.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null}readProjectionFromNode(i){if(i.firstElementChild&&i.firstElementChild.firstElementChild){i=i.firstElementChild.firstElementChild;for(let e=i.firstElementChild;e;e=e.nextElementSibling)if(!(e.childNodes.length===0||e.childNodes.length===1&&e.firstChild.nodeType===3)){let n=[{}];return this.gmlFormat_.readGeometryElement(e,n),Vi(n.pop().srsName)}}return null}};function HKe(r,i,e,n){let o=n.featurePrefix?n.featurePrefix:Nbe,s;return e==="1.0.0"?s=2:e==="1.1.0"?s=3:e==="2.0.0"&&(s=3.2),Object.assign({node:r},{version:e,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:o,gmlVersion:s,hasZ:n.hasZ,srsName:n.srsName},i)}function q6(r,i,e,n){ur(n,Lbe,Pa(r),i,e)}function ybe(r,i){return ri({},$Ke,r,i)}var WKe={"http://www.opengis.net/ogc":{FeatureId:_n(function(r,i){return r.getAttribute("fid")})},"http://www.opengis.net/ogc/1.1":{FeatureId:_n(function(r,i){return r.getAttribute("fid")})}};function vbe(r,i){Ad(WKe,r,i)}var qKe={"http://www.opengis.net/wfs":{Feature:vbe},"http://www.opengis.net/wfs/2.0":{Feature:vbe}};function bbe(r,i){return ri([],qKe,r,i)}function wbe(r,i,e){let n=e[e.length-1],o=n.featureType,s=n.featureNS,l=n.gmlVersion,h=fr(s,o);r.appendChild(h),l===2?Up.prototype.writeFeatureElement(h,i,e):l===3?Lr.prototype.writeFeatureElement(h,i,e):xM.prototype.writeFeatureElement(h,i,e)}function Bbe(r,i,e){let o=e[e.length-1].version,s=sX[o],l=fr(s,"Filter"),h=fr(s,"FeatureId");l.appendChild(h),h.setAttribute("fid",i),r.appendChild(l)}function cX(r,i){r=r||Nbe;let e=r+":";return i.startsWith(e)?i:e+i}function Cbe(r,i,e){let n=e[e.length-1];Nn(i.getId()!==void 0,"Features must have an id set");let o=n.featureType,s=n.featurePrefix,l=n.featureNS,h=cX(s,o);r.setAttribute("typeName",h),r.setAttributeNS(oX,"xmlns:"+s,l);let p=i.getId();p!==void 0&&Bbe(r,p,e)}function xbe(r,i,e){let n=e[e.length-1];Nn(i.getId()!==void 0,"Features must have an id set");let o=n.version,s=n.featureType,l=n.featurePrefix,h=n.featureNS,p=cX(l,s),m=i.getGeometryName();r.setAttribute("typeName",p),r.setAttributeNS(oX,"xmlns:"+l,h);let f=i.getId();if(f!==void 0){let g=i.getKeys(),y=[];for(let _=0,w=g.length;_<w;_++){let A=i.get(g[_]);if(A!==void 0){let k=g[_];A&&typeof A.getSimplifiedGeometry=="function"&&(k=m),y.push({name:k,value:A})}}ur({version:o,gmlVersion:n.gmlVersion,node:r,hasZ:n.hasZ,srsName:n.srsName},Lbe,Pa("Property"),y,e),Bbe(r,f,e)}}function Sbe(r,i,e){let n=e[e.length-1],o=n.version,s=nX[o],h=fr(s,o==="2.0.0"?"ValueReference":"Name"),p=n.gmlVersion;if(r.appendChild(h),nr(h,i.name),i.value!==void 0&&i.value!==null){let m=fr(s,"Value");r.appendChild(m),i.value&&typeof i.value.getSimplifiedGeometry=="function"?p===2?Up.prototype.writeGeometryElement(m,i.value,e):p===3?Lr.prototype.writeGeometryElement(m,i.value,e):xM.prototype.writeGeometryElement(m,i.value,e):nr(m,i.value)}}function Ibe(r,i,e){i.vendorId&&r.setAttribute("vendorId",i.vendorId),i.safeToIgnore!==void 0&&r.setAttribute("safeToIgnore",String(i.safeToIgnore)),i.value!==void 0&&nr(r,i.value)}var Q6={"http://www.opengis.net/wfs":{Query:bt(Tbe)},"http://www.opengis.net/wfs/2.0":{Query:bt(Tbe)},"http://www.opengis.net/ogc":{During:bt(Mbe),And:bt(Y6),Or:bt(Y6),Not:bt(Dbe),BBOX:bt(Abe),Contains:bt(P1),Intersects:bt(P1),Within:bt(P1),DWithin:bt(Ebe),PropertyIsEqualTo:bt(Df),PropertyIsNotEqualTo:bt(Df),PropertyIsLessThan:bt(Df),PropertyIsLessThanOrEqualTo:bt(Df),PropertyIsGreaterThan:bt(Df),PropertyIsGreaterThanOrEqualTo:bt(Df),PropertyIsNull:bt(kbe),PropertyIsBetween:bt(Obe),PropertyIsLike:bt(Pbe)},"http://www.opengis.net/fes/2.0":{During:bt(Mbe),And:bt(Y6),Or:bt(Y6),Not:bt(Dbe),BBOX:bt(Abe),Contains:bt(P1),Disjoint:bt(P1),Intersects:bt(P1),ResourceId:bt(KKe),Within:bt(P1),DWithin:bt(Ebe),PropertyIsEqualTo:bt(Df),PropertyIsNotEqualTo:bt(Df),PropertyIsLessThan:bt(Df),PropertyIsLessThanOrEqualTo:bt(Df),PropertyIsGreaterThan:bt(Df),PropertyIsGreaterThanOrEqualTo:bt(Df),PropertyIsNull:bt(kbe),PropertyIsBetween:bt(Obe),PropertyIsLike:bt(Pbe)}};function Tbe(r,i,e){let n=e[e.length-1],o=n.version,s=n.featurePrefix,l=n.featureNS,h=n.propertyNames,p=n.srsName,m;s?m=cX(s,i):m=i;let f;o==="2.0.0"?f="typeNames":f="typeName",r.setAttribute(f,m),p&&r.setAttribute("srsName",p),l&&r.setAttributeNS(oX,"xmlns:"+s,l);let g=Object.assign({},n);g.node=r,ur(g,zKe,Pa("PropertyName"),h,e);let y=n.filter;if(y){let _=fr(X6(o),"Filter");r.appendChild(_),YKe(_,y,e)}}function YKe(r,i,e){let n=e[e.length-1],o={node:r};Object.assign(o,{context:n}),ur(o,Q6,Pa(i.getTagName()),[i],e)}function Abe(r,i,e){let n=e[e.length-1],s=n.context.version;n.srsName=i.srsName;let l=lX[s];IM(s,r,i.geometryName),l.prototype.writeGeometryElement(r,i.extent,e)}function KKe(r,i,e){r.setAttribute("rid",i.rid)}function P1(r,i,e){let n=e[e.length-1],s=n.context.version;n.srsName=i.srsName;let l=lX[s];IM(s,r,i.geometryName),l.prototype.writeGeometryElement(r,i.geometry,e)}function Ebe(r,i,e){let s=e[e.length-1].context.version;P1(r,i,e);let l=fr(X6(s),"Distance");nr(l,i.distance.toString()),s==="2.0.0"?l.setAttribute("uom",i.unit):l.setAttribute("units",i.unit),r.appendChild(l)}function Mbe(r,i,e){let s=e[e.length-1].context.version;K6(aX[s],"ValueReference",r,i.propertyName);let l=fr(Af,"TimePeriod");r.appendChild(l);let h=fr(Af,"begin");l.appendChild(h),Rbe(h,i.begin);let p=fr(Af,"end");l.appendChild(p),Rbe(p,i.end)}function Y6(r,i,e){let o=e[e.length-1].context,s={node:r};Object.assign(s,{context:o});let l=i.conditions;for(let h=0,p=l.length;h<p;++h){let m=l[h];ur(s,Q6,Pa(m.getTagName()),[m],e)}}function Dbe(r,i,e){let o=e[e.length-1].context,s={node:r};Object.assign(s,{context:o});let l=i.condition;ur(s,Q6,Pa(l.getTagName()),[l],e)}function Df(r,i,e){let s=e[e.length-1].context.version;i.matchCase!==void 0&&r.setAttribute("matchCase",i.matchCase.toString()),IM(s,r,i.propertyName),Z6(s,r,""+i.expression)}function kbe(r,i,e){let s=e[e.length-1].context.version;IM(s,r,i.propertyName)}function Obe(r,i,e){let s=e[e.length-1].context.version,l=X6(s);IM(s,r,i.propertyName);let h=fr(l,"LowerBoundary");r.appendChild(h),Z6(s,h,""+i.lowerBoundary);let p=fr(l,"UpperBoundary");r.appendChild(p),Z6(s,p,""+i.upperBoundary)}function Pbe(r,i,e){let s=e[e.length-1].context.version;r.setAttribute("wildCard",i.wildCard),r.setAttribute("singleChar",i.singleChar),r.setAttribute("escapeChar",i.escapeChar),i.matchCase!==void 0&&r.setAttribute("matchCase",i.matchCase.toString()),IM(s,r,i.propertyName),Z6(s,r,""+i.pattern)}function K6(r,i,e,n){let o=fr(r,i);nr(o,n),e.appendChild(o)}function Z6(r,i,e){K6(X6(r),"Literal",i,e)}function IM(r,i,e){r==="2.0.0"?K6(aX[r],"ValueReference",i,e):K6(sX[r],"PropertyName",i,e)}function Rbe(r,i){let e=fr(Af,"TimeInstant");r.appendChild(e);let n=fr(Af,"timePosition");e.appendChild(n),nr(n,i)}function Fbe(r,i,e){let n=e[e.length-1],o=Object.assign({},n);o.node=r,ur(o,Q6,Pa("Query"),i,e)}function X6(r){let i;return r==="2.0.0"?i=aX[r]:i=sX[r],i}var U_=rX;var Bs={POINT:1,LINE_STRING:2,POLYGON:3,MULTI_POINT:4,MULTI_LINE_STRING:5,MULTI_POLYGON:6,GEOMETRY_COLLECTION:7,POLYHEDRAL_SURFACE:15,TIN:16,TRIANGLE:17},J6=class{constructor(i){this.view_=i,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"}readUint8(){return this.view_.getUint8(this.pos_++)}readUint32(i){return this.view_.getUint32((this.pos_+=4)-4,i!==void 0?i:this.isLittleEndian_)}readDouble(i){return this.view_.getFloat64((this.pos_+=8)-8,i!==void 0?i:this.isLittleEndian_)}readPoint(){let i=[];return i.push(this.readDouble()),i.push(this.readDouble()),this.hasZ_&&i.push(this.readDouble()),this.hasM_&&i.push(this.readDouble()),i}readLineString(){let i=this.readUint32(),e=[];for(let n=0;n<i;n++)e.push(this.readPoint());return e}readPolygon(){let i=this.readUint32(),e=[];for(let n=0;n<i;n++)e.push(this.readLineString());return e}readWkbHeader(i){let n=this.readUint8()>0,o=this.readUint32(n),s=Math.floor((o&268435455)/1e3),l=!!(o&2147483648)||s===1||s===3,h=!!(o&1073741824)||s===2||s===3,p=!!(o&536870912),m=(o&268435455)%1e3,f=["XY",l?"Z":"",h?"M":""].join(""),g=p?this.readUint32(n):null;if(i!==void 0&&i!==m)throw new Error("Unexpected WKB geometry type "+m);if(this.initialized_){if(this.isLittleEndian_!==n)throw new Error("Inconsistent endian");if(this.layout_!==f)throw new Error("Inconsistent geometry layout");if(g&&this.srid_!==g)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=n,this.hasZ_=l,this.hasM_=h,this.layout_=f,this.srid_=g,this.initialized_=!0;return m}readWkbPayload(i){switch(i){case Bs.POINT:return this.readPoint();case Bs.LINE_STRING:return this.readLineString();case Bs.POLYGON:case Bs.TRIANGLE:return this.readPolygon();case Bs.MULTI_POINT:return this.readMultiPoint();case Bs.MULTI_LINE_STRING:return this.readMultiLineString();case Bs.MULTI_POLYGON:case Bs.POLYHEDRAL_SURFACE:case Bs.TIN:return this.readMultiPolygon();case Bs.GEOMETRY_COLLECTION:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+i+" is found")}}readWkbBlock(i){return this.readWkbPayload(this.readWkbHeader(i))}readWkbCollection(i,e){let n=this.readUint32(),o=[];for(let s=0;s<n;s++){let l=i.call(this,e);l&&o.push(l)}return o}readMultiPoint(){return this.readWkbCollection(this.readWkbBlock,Bs.POINT)}readMultiLineString(){return this.readWkbCollection(this.readWkbBlock,Bs.LINE_STRING)}readMultiPolygon(){return this.readWkbCollection(this.readWkbBlock,Bs.POLYGON)}readGeometryCollection(){return this.readWkbCollection(this.readGeometry)}readGeometry(){let i=this.readWkbHeader(),e=this.readWkbPayload(i);switch(i){case Bs.POINT:return new Kn(e,this.layout_);case Bs.LINE_STRING:return new ao(e,this.layout_);case Bs.POLYGON:case Bs.TRIANGLE:return new Zo(e,this.layout_);case Bs.MULTI_POINT:return new Lc(e,this.layout_);case Bs.MULTI_LINE_STRING:return new Qa(e,this.layout_);case Bs.MULTI_POLYGON:case Bs.POLYHEDRAL_SURFACE:case Bs.TIN:return new _l(e,this.layout_);case Bs.GEOMETRY_COLLECTION:return new Yl(e);default:return null}}getSrid(){return this.srid_}},dX=class{constructor(i){i=i||{},this.layout_=i.layout,this.isLittleEndian_=i.littleEndian!==!1,this.isEWKB_=i.ewkb!==!1,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},i.nodata)}writeUint8(i){this.writeQueue_.push([1,i])}writeUint32(i){this.writeQueue_.push([4,i])}writeDouble(i){this.writeQueue_.push([8,i])}writePoint(i,e){let n=Object.assign.apply(null,e.split("").map((o,s)=>({[o]:i[s]})));for(let o of this.layout_)this.writeDouble(o in n?n[o]:this.nodata_[o])}writeLineString(i,e){this.writeUint32(i.length);for(let n=0;n<i.length;n++)this.writePoint(i[n],e)}writePolygon(i,e){this.writeUint32(i.length);for(let n=0;n<i.length;n++)this.writeLineString(i[n],e)}writeWkbHeader(i,e){i%=1e3,this.layout_.includes("Z")&&(i+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(i+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(e)&&(i|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(i),this.isEWKB_&&Number.isInteger(e)&&this.writeUint32(e)}writeMultiPoint(i,e){this.writeUint32(i.length);for(let n=0;n<i.length;n++)this.writeWkbHeader(1),this.writePoint(i[n],e)}writeMultiLineString(i,e){this.writeUint32(i.length);for(let n=0;n<i.length;n++)this.writeWkbHeader(2),this.writeLineString(i[n],e)}writeMultiPolygon(i,e){this.writeUint32(i.length);for(let n=0;n<i.length;n++)this.writeWkbHeader(3),this.writePolygon(i[n],e)}writeGeometryCollection(i){this.writeUint32(i.length);for(let e=0;e<i.length;e++)this.writeGeometry(i[e])}findMinimumLayout(i,e="XYZM"){let n=(o,s)=>o===s?o:o==="XYZM"?s:s==="XYZM"?o:"XY";if(i instanceof Id)return n(i.getLayout(),e);if(i instanceof Yl){let o=i.getGeometriesArray();for(let s=0;s<o.length&&e!=="XY";s++)e=this.findMinimumLayout(o[s],e)}return e}writeGeometry(i,e){let n={Point:Bs.POINT,LineString:Bs.LINE_STRING,Polygon:Bs.POLYGON,MultiPoint:Bs.MULTI_POINT,MultiLineString:Bs.MULTI_LINE_STRING,MultiPolygon:Bs.MULTI_POLYGON,GeometryCollection:Bs.GEOMETRY_COLLECTION},o=i.getType(),s=n[o];if(!s)throw new Error("GeometryType "+o+" is not supported");this.layout_||(this.layout_=this.findMinimumLayout(i)),this.writeWkbHeader(s,e),i instanceof Id?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[o].call(this,i.getCoordinates(),i.getLayout()):i instanceof Yl&&this.writeGeometryCollection(i.getGeometriesArray())}getBuffer(){let i=this.writeQueue_.reduce((s,l)=>s+l[0],0),e=new ArrayBuffer(i),n=new DataView(e),o=0;return this.writeQueue_.forEach(s=>{switch(s[0]){case 1:n.setUint8(o,s[1]);break;case 4:n.setUint32(o,s[1],this.isLittleEndian_);break;case 8:n.setFloat64(o,s[1],this.isLittleEndian_);break;default:break}o+=s[0]}),e}},uX=class extends R_{constructor(i){super(),i=i||{},this.splitCollection=!!i.splitCollection,this.viewCache_=null,this.hex_=i.hex!==!1,this.littleEndian_=i.littleEndian!==!1,this.ewkb_=i.ewkb!==!1,this.layout_=i.geometryLayout,this.nodataZ_=i.nodataZ||0,this.nodataM_=i.nodataM||0,this.srid_=i.srid}getType(){return this.hex_?"text":"arraybuffer"}readFeature(i,e){return new An({geometry:this.readGeometry(i,e)})}readFeatures(i,e){let n=[],o=this.readGeometry(i,e);return this.splitCollection&&o instanceof Yl?n=o.getGeometriesArray():n=[o],n.map(s=>new An({geometry:s}))}readGeometry(i,e){let n=jbe(i);if(!n)return null;let s=new J6(n).readGeometry();return this.viewCache_=n,e=this.getReadOptions(i,e),this.viewCache_=null,Co(s,!1,e)}readProjection(i){let e=this.viewCache_||jbe(i);if(!e)return;let n=new J6(e);return n.readWkbHeader(),n.getSrid()&&Vi("EPSG:"+n.getSrid())||void 0}writeFeature(i,e){return this.writeGeometry(i.getGeometry(),e)}writeFeatures(i,e){return this.writeGeometry(new Yl(i.map(n=>n.getGeometry())),e)}writeGeometry(i,e){e=this.adaptOptions(e);let n=new dX({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}}),o=Number.isInteger(this.srid_)?Number(this.srid_):null;if(this.srid_!==!1&&!Number.isInteger(this.srid_)){let l=e.dataProjection&&Vi(e.dataProjection);if(l){let h=l.getCode();h.startsWith("EPSG:")&&(o=Number(h.substring(5)))}}n.writeGeometry(Co(i,!0,e),o);let s=n.getBuffer();return this.hex_?ZKe(s):s}};function ZKe(r){let i=new Uint8Array(r);return Array.from(i.values()).map(e=>(e<16?"0":"")+Number(e).toString(16).toUpperCase()).join("")}function QKe(r){let i=new Uint8Array(r.length/2);for(let e=0;e<r.length/2;e++)i[e]=parseInt(r.substr(e*2,2),16);return new DataView(i.buffer)}function jbe(r){return typeof r=="string"?QKe(r):ArrayBuffer.isView(r)?r instanceof DataView?r:new DataView(r.buffer,r.byteOffset,r.byteLength):r instanceof ArrayBuffer?new DataView(r):null}var Vbe=uX;var XKe={POINT:Kn,LINESTRING:ao,POLYGON:Zo,MULTIPOINT:Lc,MULTILINESTRING:Qa,MULTIPOLYGON:_l},$be="EMPTY",Ube="Z",zbe="M",JKe="ZM",Ss={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},eZe={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"},hX=class{constructor(i){this.wkt=i,this.index_=-1}isAlpha_(i){return i>="a"&&i<="z"||i>="A"&&i<="Z"}isNumeric_(i,e){return e=e!==void 0?e:!1,i>="0"&&i<="9"||i=="."&&!e}isWhiteSpace_(i){return i==" "||i=="	"||i=="\r"||i==`
`}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){let i=this.nextChar_(),e=this.index_,n=i,o;if(i=="(")o=Ss.LEFT_PAREN;else if(i==",")o=Ss.COMMA;else if(i==")")o=Ss.RIGHT_PAREN;else if(this.isNumeric_(i)||i=="-")o=Ss.NUMBER,n=this.readNumber_();else if(this.isAlpha_(i))o=Ss.TEXT,n=this.readText_();else{if(this.isWhiteSpace_(i))return this.nextToken();if(i==="")o=Ss.EOF;else throw new Error("Unexpected character: "+i)}return{position:e,value:n,type:o}}readNumber_(){let i,e=this.index_,n=!1,o=!1;do i=="."?n=!0:(i=="e"||i=="E")&&(o=!0),i=this.nextChar_();while(this.isNumeric_(i,n)||!o&&(i=="e"||i=="E")||o&&(i=="-"||i=="+"));return parseFloat(this.wkt.substring(e,this.index_--))}readText_(){let i,e=this.index_;do i=this.nextChar_();while(this.isAlpha_(i));return this.wkt.substring(e,this.index_--).toUpperCase()}},pX=class{constructor(i){this.lexer_=i,this.token_={position:0,type:Ss.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(i){return this.token_.type==i}match(i){let e=this.isTokenType(i);return e&&this.consume_(),e}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let i="XY",e=this.token_;if(this.isTokenType(Ss.TEXT)){let n=e.value;n===Ube?i="XYZ":n===zbe?i="XYM":n===JKe&&(i="XYZM"),i!=="XY"&&this.consume_()}return i}parseGeometryCollectionText_(){if(this.match(Ss.LEFT_PAREN)){let i=[];do i.push(this.parseGeometry_());while(this.match(Ss.COMMA));if(this.match(Ss.RIGHT_PAREN))return i}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(Ss.LEFT_PAREN)){let i=this.parsePoint_();if(this.match(Ss.RIGHT_PAREN))return i}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(Ss.LEFT_PAREN)){let i=this.parsePointList_();if(this.match(Ss.RIGHT_PAREN))return i}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(Ss.LEFT_PAREN)){let i=this.parseLineStringTextList_();if(this.match(Ss.RIGHT_PAREN))return i}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(Ss.LEFT_PAREN)){let i;if(this.token_.type==Ss.LEFT_PAREN?i=this.parsePointTextList_():i=this.parsePointList_(),this.match(Ss.RIGHT_PAREN))return i}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(Ss.LEFT_PAREN)){let i=this.parseLineStringTextList_();if(this.match(Ss.RIGHT_PAREN))return i}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(Ss.LEFT_PAREN)){let i=this.parsePolygonTextList_();if(this.match(Ss.RIGHT_PAREN))return i}throw new Error(this.formatErrorMessage_())}parsePoint_(){let i=[],e=this.layout_.length;for(let n=0;n<e;++n){let o=this.token_;if(this.match(Ss.NUMBER))i.push(o.value);else break}if(i.length==e)return i;throw new Error(this.formatErrorMessage_())}parsePointList_(){let i=[this.parsePoint_()];for(;this.match(Ss.COMMA);)i.push(this.parsePoint_());return i}parsePointTextList_(){let i=[this.parsePointText_()];for(;this.match(Ss.COMMA);)i.push(this.parsePointText_());return i}parseLineStringTextList_(){let i=[this.parseLineStringText_()];for(;this.match(Ss.COMMA);)i.push(this.parseLineStringText_());return i}parsePolygonTextList_(){let i=[this.parsePolygonText_()];for(;this.match(Ss.COMMA);)i.push(this.parsePolygonText_());return i}isEmptyGeometry_(){let i=this.isTokenType(Ss.TEXT)&&this.token_.value==$be;return i&&this.consume_(),i}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){let i=this.token_;if(this.match(Ss.TEXT)){let e=i.value;this.layout_=this.parseGeometryLayout_();let n=this.isEmptyGeometry_();if(e=="GEOMETRYCOLLECTION"){if(n)return new Yl([]);let l=this.parseGeometryCollectionText_();return new Yl(l)}let o=XKe[e];if(!o)throw new Error("Invalid geometry type: "+e);let s;if(n)e=="POINT"?s=[NaN,NaN]:s=[];else switch(e){case"POINT":{s=this.parsePointText_();break}case"LINESTRING":{s=this.parseLineStringText_();break}case"POLYGON":{s=this.parsePolygonText_();break}case"MULTIPOINT":{s=this.parseMultiPointText_();break}case"MULTILINESTRING":{s=this.parseMultiLineStringText_();break}case"MULTIPOLYGON":{s=this.parseMultiPolygonText_();break}default:break}return new o(s,this.layout_)}throw new Error(this.formatErrorMessage_())}},mX=class extends _M{constructor(i){super(),i=i||{},this.splitCollection_=i.splitCollection!==void 0?i.splitCollection:!1}parse_(i){let e=new hX(i);return new pX(e).parse()}readFeatureFromText(i,e){let n=this.readGeometryFromText(i,e),o=new An;return o.setGeometry(n),o}readFeaturesFromText(i,e){let n=[],o=this.readGeometryFromText(i,e);this.splitCollection_&&o.getType()=="GeometryCollection"?n=o.getGeometriesArray():n=[o];let s=[];for(let l=0,h=n.length;l<h;++l){let p=new An;p.setGeometry(n[l]),s.push(p)}return s}readGeometryFromText(i,e){let n=this.parse_(i);return Co(n,!1,e)}writeFeatureText(i,e){let n=i.getGeometry();return n?this.writeGeometryText(n,e):""}writeFeaturesText(i,e){if(i.length==1)return this.writeFeatureText(i[0],e);let n=[];for(let s=0,l=i.length;s<l;++s)n.push(i[s].getGeometry());let o=new Yl(n);return this.writeGeometryText(o,e)}writeGeometryText(i,e){return Wbe(Co(i,!0,e))}};function Gbe(r){let i=r.getCoordinates();return i.length===0?"":i.join(" ")}function tZe(r){let i=[],e=r.getPoints();for(let n=0,o=e.length;n<o;++n)i.push("("+Gbe(e[n])+")");return i.join(",")}function iZe(r){let i=[],e=r.getGeometries();for(let n=0,o=e.length;n<o;++n)i.push(Wbe(e[n]));return i.join(",")}function fX(r){let i=r.getCoordinates(),e=[];for(let n=0,o=i.length;n<o;++n)e.push(i[n].join(" "));return e.join(",")}function nZe(r){let i=[],e=r.getLineStrings();for(let n=0,o=e.length;n<o;++n)i.push("("+fX(e[n])+")");return i.join(",")}function Hbe(r){let i=[],e=r.getLinearRings();for(let n=0,o=e.length;n<o;++n)i.push("("+fX(e[n])+")");return i.join(",")}function rZe(r){let i=[],e=r.getPolygons();for(let n=0,o=e.length;n<o;++n)i.push("("+Hbe(e[n])+")");return i.join(",")}function oZe(r){let i=r.getLayout(),e="";return(i==="XYZ"||i==="XYZM")&&(e+=Ube),(i==="XYM"||i==="XYZM")&&(e+=zbe),e}var sZe={Point:Gbe,LineString:fX,Polygon:Hbe,MultiPoint:tZe,MultiLineString:nZe,MultiPolygon:rZe,GeometryCollection:iZe};function Wbe(r){let i=r.getType(),e=sZe[i],n=e(r),o=eZe[i];if(typeof r.getFlatCoordinates=="function"){let s=oZe(r);s.length>0&&(o+=" "+s)}return n.length===0?o+" "+$be:o+"("+n+")"}var z_=mX;var Mu=[null,"http://www.opengis.net/wms"],aZe=ti(Mu,{Service:ct(AZe),Capability:ct(TZe)}),lZe=ti(Mu,{Request:ct(RZe),Exception:ct(kZe),Layer:ct(OZe)}),_X=class extends CM{constructor(){super(),this.version=void 0}readFromNode(i){this.version=i.getAttribute("version").trim();let e=ri({version:this.version},aZe,i,[]);return e||null}},cZe=ti(Mu,{Name:ct(bi),Title:ct(bi),Abstract:ct(bi),KeywordList:ct(Zbe),OnlineResource:ct($v),ContactInformation:ct(EZe),Fees:ct(bi),AccessConstraints:ct(bi),LayerLimit:ct(ol),MaxWidth:ct(ol),MaxHeight:ct(ol)}),dZe=ti(Mu,{ContactPersonPrimary:ct(MZe),ContactPosition:ct(bi),ContactAddress:ct(DZe),ContactVoiceTelephone:ct(bi),ContactFacsimileTelephone:ct(bi),ContactElectronicMailAddress:ct(bi)}),uZe=ti(Mu,{ContactPerson:ct(bi),ContactOrganization:ct(bi)}),hZe=ti(Mu,{AddressType:ct(bi),Address:ct(bi),City:ct(bi),StateOrProvince:ct(bi),PostCode:ct(bi),Country:ct(bi)}),pZe=ti(Mu,{Format:_n(bi)}),qbe=ti(Mu,{Name:ct(bi),Title:ct(bi),Abstract:ct(bi),KeywordList:ct(Zbe),CRS:Ns(bi),EX_GeographicBoundingBox:ct(IZe),BoundingBox:Ns(SZe),Dimension:Ns(PZe),Attribution:ct(xZe),AuthorityURL:Ns(NZe),Identifier:Ns(bi),MetadataURL:Ns(BZe),DataURL:Ns(Uv),FeatureListURL:Ns(Uv),Style:Ns(jZe),MinScaleDenominator:ct(lo),MaxScaleDenominator:ct(lo),Layer:Ns(Ybe)}),mZe=ti(Mu,{Title:ct(bi),OnlineResource:ct($v),LogoURL:ct(Kbe)}),fZe=ti(Mu,{westBoundLongitude:ct(lo),eastBoundLongitude:ct(lo),southBoundLatitude:ct(lo),northBoundLatitude:ct(lo)}),gZe=ti(Mu,{GetCapabilities:ct(gX),GetMap:ct(gX),GetFeatureInfo:ct(gX)}),_Ze=ti(Mu,{Format:Ns(bi),DCPType:Ns(FZe)}),yZe=ti(Mu,{HTTP:ct(LZe)}),vZe=ti(Mu,{Get:ct(Uv),Post:ct(Uv)}),bZe=ti(Mu,{Name:ct(bi),Title:ct(bi),Abstract:ct(bi),LegendURL:Ns(Kbe),StyleSheetURL:ct(Uv),StyleURL:ct(Uv)}),wZe=ti(Mu,{Format:ct(bi),OnlineResource:ct($v)}),CZe=ti(Mu,{Keyword:_n(bi)});function xZe(r,i){return ri({},mZe,r,i)}function SZe(r,i){let e=[j_(r.getAttribute("minx")),j_(r.getAttribute("miny")),j_(r.getAttribute("maxx")),j_(r.getAttribute("maxy"))],n=[j_(r.getAttribute("resx")),j_(r.getAttribute("resy"))];return{crs:r.getAttribute("CRS"),extent:e,res:n}}function IZe(r,i){let e=ri({},fZe,r,i);if(!e)return;let n=e.westBoundLongitude,o=e.southBoundLatitude,s=e.eastBoundLongitude,l=e.northBoundLatitude;if(!(n===void 0||o===void 0||s===void 0||l===void 0))return[n,o,s,l]}function TZe(r,i){return ri({},lZe,r,i)}function AZe(r,i){return ri({},cZe,r,i)}function EZe(r,i){return ri({},dZe,r,i)}function MZe(r,i){return ri({},uZe,r,i)}function DZe(r,i){return ri({},hZe,r,i)}function kZe(r,i){return ri([],pZe,r,i)}function OZe(r,i){let e=ri({},qbe,r,i);return e.Layer===void 0?Object.assign(e,Ybe(r,i)):e}function Ybe(r,i){let e=i[i.length-1],n=ri({},qbe,r,i);if(!n)return;let o=O1(r.getAttribute("queryable"));o===void 0&&(o=e.queryable),n.queryable=o!==void 0?o:!1;let s=Ef(r.getAttribute("cascaded"));s===void 0&&(s=e.cascaded),n.cascaded=s;let l=O1(r.getAttribute("opaque"));l===void 0&&(l=e.opaque),n.opaque=l!==void 0?l:!1;let h=O1(r.getAttribute("noSubsets"));h===void 0&&(h=e.noSubsets),n.noSubsets=h!==void 0?h:!1;let p=j_(r.getAttribute("fixedWidth"));p||(p=e.fixedWidth),n.fixedWidth=p;let m=j_(r.getAttribute("fixedHeight"));return m||(m=e.fixedHeight),n.fixedHeight=m,["Style","CRS","AuthorityURL"].forEach(function(y){if(y in e){let _=n[y]||[];n[y]=_.concat(e[y])}}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(y){if(!(y in n)){let _=e[y];n[y]=_}}),n}function PZe(r,i){return{name:r.getAttribute("name"),units:r.getAttribute("units"),unitSymbol:r.getAttribute("unitSymbol"),default:r.getAttribute("default"),multipleValues:O1(r.getAttribute("multipleValues")),nearestValue:O1(r.getAttribute("nearestValue")),current:O1(r.getAttribute("current")),values:bi(r)}}function Uv(r,i){return ri({},wZe,r,i)}function RZe(r,i){return ri({},gZe,r,i)}function FZe(r,i){return ri({},yZe,r,i)}function LZe(r,i){return ri({},vZe,r,i)}function gX(r,i){return ri({},_Ze,r,i)}function Kbe(r,i){let e=Uv(r,i);if(e){let n=[Ef(r.getAttribute("width")),Ef(r.getAttribute("height"))];return e.size=n,e}}function NZe(r,i){let e=Uv(r,i);if(e)return e.name=r.getAttribute("name"),e}function BZe(r,i){let e=Uv(r,i);if(e)return e.type=r.getAttribute("type"),e}function jZe(r,i){return ri({},bZe,r,i)}function Zbe(r,i){return ri([],CZe,r,i)}var eV=_X;var VZe="_feature",$Ze="_layer",yX=class extends Tf{constructor(i){super(),i=i||{},this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new Up,this.layers_=i.layers?i.layers:null}getLayers(){return this.layers_}setLayers(i){this.layers_=i}readFeatures_(i,e){i.setAttribute("namespaceURI",this.featureNS_);let n=i.localName,o=[];if(i.childNodes.length===0)return o;if(n=="msGMLOutput")for(let s=0,l=i.childNodes.length;s<l;s++){let h=i.childNodes[s];if(h.nodeType!==Node.ELEMENT_NODE)continue;let p=h,m=e[0],f=$Ze,g=p.localName.replace(f,"");if(this.layers_&&!this.layers_.includes(g))continue;let y=g+VZe;m.featureType=y,m.featureNS=this.featureNS_;let _={};_[y]=_n(this.gmlFormat_.readFeatureElement,this.gmlFormat_);let w=ti([m.featureNS,null],_);p.setAttribute("namespaceURI",this.featureNS_);let A=ri([],w,p,e,this.gmlFormat_);A&&mr(o,A)}if(n=="FeatureCollection"){let s=ri([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,i,[{}],this.gmlFormat_);s&&(o=s)}return o}readFeaturesFromNode(i,e){let n={};return e&&Object.assign(n,this.getReadOptions(i,e)),this.readFeatures_(i,[n])}},pR=yX;var G_=[null,"http://www.opengis.net/wmts/1.0"],TM=[null,"http://www.opengis.net/ows/1.1"],UZe=ti(G_,{Contents:ct(XZe)}),vX=class extends CM{constructor(){super(),this.owsParser_=new z6}readFromNode(i){let e=i.getAttribute("version");e&&(e=e.trim());let n=this.owsParser_.readFromNode(i);return n?(n.version=e,n=ri(n,UZe,i,[]),n||null):null}},zZe=ti(G_,{Layer:Ns(JZe),TileMatrixSet:Ns(eQe)}),GZe=ti(G_,{Style:Ns(tQe),Format:Ns(bi),TileMatrixSetLink:Ns(iQe),Dimension:Ns(nQe),ResourceURL:Ns(rQe)},ti(TM,{Title:ct(bi),Abstract:ct(bi),WGS84BoundingBox:ct(Xbe),BoundingBox:Ns(oQe),Identifier:ct(bi)})),HZe=ti(G_,{LegendURL:Ns(sQe)},ti(TM,{Title:ct(bi),Identifier:ct(bi)})),WZe=ti(G_,{TileMatrixSet:ct(bi),TileMatrixSetLimits:ct(lQe)}),qZe=ti(G_,{TileMatrixLimits:_n(cQe)}),YZe=ti(G_,{TileMatrix:ct(bi),MinTileRow:ct(ol),MaxTileRow:ct(ol),MinTileCol:ct(ol),MaxTileCol:ct(ol)}),KZe=ti(G_,{Default:ct(bi),Value:Ns(bi)},ti(TM,{Identifier:ct(bi)})),Qbe=ti(TM,{LowerCorner:_n(bX),UpperCorner:_n(bX)}),ZZe=ti(G_,{WellKnownScaleSet:ct(bi),TileMatrix:Ns(aQe)},ti(TM,{SupportedCRS:ct(bi),Identifier:ct(bi),BoundingBox:ct(Xbe)})),QZe=ti(G_,{TopLeftCorner:ct(bX),ScaleDenominator:ct(lo),TileWidth:ct(ol),TileHeight:ct(ol),MatrixWidth:ct(ol),MatrixHeight:ct(ol)},ti(TM,{Identifier:ct(bi)}));function XZe(r,i){return ri({},zZe,r,i)}function JZe(r,i){return ri({},GZe,r,i)}function eQe(r,i){return ri({},ZZe,r,i)}function tQe(r,i){let e=ri({},HZe,r,i);if(!e)return;let n=r.getAttribute("isDefault")==="true";return e.isDefault=n,e}function iQe(r,i){return ri({},WZe,r,i)}function nQe(r,i){return ri({},KZe,r,i)}function rQe(r,i){let e=r.getAttribute("format"),n=r.getAttribute("template"),o=r.getAttribute("resourceType"),s={};return e&&(s.format=e),n&&(s.template=n),o&&(s.resourceType=o),s}function Xbe(r,i){let e=ri([],Qbe,r,i);if(e.length==2)return mc(e)}function oQe(r,i){let e=r.getAttribute("crs"),n=ri([],Qbe,r,i);if(n.length==2)return{extent:mc(n),crs:e}}function sQe(r,i){let e={};return e.format=r.getAttribute("format"),e.href=$v(r),e}function bX(r,i){let e=bi(r).split(/\s+/);if(!e||e.length!=2)return;let n=+e[0],o=+e[1];if(!(isNaN(n)||isNaN(o)))return[n,o]}function aQe(r,i){return ri({},QZe,r,i)}function lQe(r,i){return ri([],qZe,r,i)}function cQe(r,i){return ri({},YZe,r,i)}var tV=vX;var sl={ADD:"add",REMOVE:"remove"};var Jbe={LENGTH:"length"},AM=class extends Ls{constructor(i,e,n){super(i),this.element=e,this.index=n}},wX=class extends yc{constructor(i,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=i||[],this.unique_)for(let n=0,o=this.array_.length;n<o;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(i){for(let e=0,n=i.length;e<n;++e)this.push(i[e]);return this}forEach(i){let e=this.array_;for(let n=0,o=e.length;n<o;++n)i(e[n],n,e)}getArray(){return this.array_}item(i){return this.array_[i]}getLength(){return this.get(Jbe.LENGTH)}insertAt(i,e){if(i<0||i>this.getLength())throw new Error("Index out of bounds: "+i);this.unique_&&this.assertUnique_(e),this.array_.splice(i,0,e),this.updateLength_(),this.dispatchEvent(new AM(sl.ADD,e,i))}pop(){return this.removeAt(this.getLength()-1)}push(i){this.unique_&&this.assertUnique_(i);let e=this.getLength();return this.insertAt(e,i),this.getLength()}remove(i){let e=this.array_;for(let n=0,o=e.length;n<o;++n)if(e[n]===i)return this.removeAt(n)}removeAt(i){if(i<0||i>=this.getLength())return;let e=this.array_[i];return this.array_.splice(i,1),this.updateLength_(),this.dispatchEvent(new AM(sl.REMOVE,e,i)),e}setAt(i,e){let n=this.getLength();if(i>=n){this.insertAt(i,e);return}if(i<0)throw new Error("Index out of bounds: "+i);this.unique_&&this.assertUnique_(e,i);let o=this.array_[i];this.array_[i]=e,this.dispatchEvent(new AM(sl.REMOVE,o,i)),this.dispatchEvent(new AM(sl.ADD,e,i))}updateLength_(){this.set(Jbe.LENGTH,this.array_.length)}assertUnique_(i,e){for(let n=0,o=this.array_.length;n<o;++n)if(this.array_[n]===i&&n!==e)throw new Error("Duplicate item added to a unique collection")}},al=wX;var ewe=ld(iV(),1);var SX=class{constructor(i){this.rbush_=new ewe.default(i),this.items_={}}insert(i,e){let n={minX:i[0],minY:i[1],maxX:i[2],maxY:i[3],value:e};this.rbush_.insert(n),this.items_[Xi(e)]=n}load(i,e){let n=new Array(e.length);for(let o=0,s=e.length;o<s;o++){let l=i[o],h=e[o],p={minX:l[0],minY:l[1],maxX:l[2],maxY:l[3],value:h};n[o]=p,this.items_[Xi(h)]=p}this.rbush_.load(n)}remove(i){let e=Xi(i),n=this.items_[e];return delete this.items_[e],this.rbush_.remove(n)!==null}update(i,e){let n=this.items_[Xi(e)],o=[n.minX,n.minY,n.maxX,n.maxY];Dm(o,i)||(this.remove(e),this.insert(i,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(i){let e={minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]};return this.rbush_.search(e).map(function(o){return o.value})}forEach(i){return this.forEach_(this.getAll(),i)}forEachInExtent(i,e){return this.forEach_(this.getInExtent(i),e)}forEach_(i,e){let n;for(let o=0,s=i.length;o<s;o++)if(n=e(i[o]),n)return n;return n}isEmpty(){return Cd(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(i){let e=this.rbush_.toJSON();return Sd(e.minX,e.minY,e.maxX,e.maxY,i)}concat(i){this.rbush_.load(i.rbush_.all());for(let e in i.items_)this.items_[e]=i.items_[e]}},fR=SX;var IX=class extends yc{constructor(i){super(),this.projection=Vi(i.projection),this.attributions_=twe(i.attributions),this.attributionsCollapsible_=i.attributionsCollapsible!==void 0?i.attributionsCollapsible:!0,this.loading=!1,this.state_=i.state!==void 0?i.state:"ready",this.wrapX_=i.wrapX!==void 0?i.wrapX:!1,this.interpolate_=!!i.interpolate,this.viewResolver=null,this.viewRejector=null;let e=this;this.viewPromise_=new Promise(function(n,o){e.viewResolver=n,e.viewRejector=o})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(i){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(i){this.attributions_=twe(i),this.changed()}setState(i){this.state_=i,this.changed()}};function twe(r){return r?Array.isArray(r)?function(i){return r}:typeof r=="function"?r:function(i){return[r]}:null}var EM=IX;var bh={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function iwe(r,i){return[[-1/0,-1/0,1/0,1/0]]}function TX(r,i){return[r]}var uQe=!1;function AX(r,i,e,n,o,s,l){let h=new XMLHttpRequest;h.open("GET",typeof r=="function"?r(e,n,o):r,!0),i.getType()=="arraybuffer"&&(h.responseType="arraybuffer"),h.withCredentials=uQe,h.onload=function(p){if(!h.status||h.status>=200&&h.status<300){let m=i.getType(),f;m=="json"?f=JSON.parse(h.responseText):m=="text"?f=h.responseText:m=="xml"?(f=h.responseXML,f||(f=new DOMParser().parseFromString(h.responseText,"application/xml"))):m=="arraybuffer"&&(f=h.response),f?s(i.readFeatures(f,{extent:e,featureProjection:o}),i.readProjection(f)):l()}else l()},h.onerror=l,h.send()}function EX(r,i){return function(e,n,o,s,l){let h=this;AX(r,i,e,n,o,function(p,m){h.addFeatures(p),s!==void 0&&s(p)},l||Qg)}}var H_=class extends Ls{constructor(i,e,n){super(i),this.feature=e,this.features=n}},MX=class extends EM{constructor(i){i=i||{},super({attributions:i.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:i.wrapX!==void 0?i.wrapX:!0}),this.on,this.once,this.un,this.loader_=Qg,this.format_=i.format,this.overlaps_=i.overlaps===void 0?!0:i.overlaps,this.url_=i.url,i.loader!==void 0?this.loader_=i.loader:this.url_!==void 0&&(Nn(this.format_,"`format` must be set when `url` is set"),this.loader_=EX(this.url_,this.format_)),this.strategy_=i.strategy!==void 0?i.strategy:iwe;let e=i.useSpatialIndex!==void 0?i.useSpatialIndex:!0;this.featuresRtree_=e?new fR:null,this.loadedExtentsRtree_=new fR,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,o;Array.isArray(i.features)?o=i.features:i.features&&(n=i.features,o=n.getArray()),!e&&n===void 0&&(n=new al(o)),o!==void 0&&this.addFeaturesInternal(o),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(i){this.addFeatureInternal(i),this.changed()}addFeatureInternal(i){let e=Xi(i);if(!this.addToIndex_(e,i)){this.featuresCollection_&&this.featuresCollection_.remove(i);return}this.setupChangeEvents_(e,i);let n=i.getGeometry();if(n){let o=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,i)}else this.nullGeometryFeatures_[e]=i;this.dispatchEvent(new H_(bh.ADDFEATURE,i))}setupChangeEvents_(i,e){e instanceof Zc||(this.featureChangeKeys_[i]=[$r(e,Zi.CHANGE,this.handleFeatureChange_,this),$r(e,Zg.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(i,e){let n=!0;if(e.getId()!==void 0){let o=String(e.getId());if(!(o in this.idIndex_))this.idIndex_[o]=e;else if(e instanceof Zc){let s=this.idIndex_[o];s instanceof Zc?Array.isArray(s)?s.push(e):this.idIndex_[o]=[s,e]:n=!1}else n=!1}return n&&(Nn(!(i in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[i]=e),n}addFeatures(i){this.addFeaturesInternal(i),this.changed()}addFeaturesInternal(i){let e=[],n=[],o=[];for(let s=0,l=i.length;s<l;s++){let h=i[s],p=Xi(h);this.addToIndex_(p,h)&&n.push(h)}for(let s=0,l=n.length;s<l;s++){let h=n[s],p=Xi(h);this.setupChangeEvents_(p,h);let m=h.getGeometry();if(m){let f=m.getExtent();e.push(f),o.push(h)}else this.nullGeometryFeatures_[p]=h}if(this.featuresRtree_&&this.featuresRtree_.load(e,o),this.hasListener(bh.ADDFEATURE))for(let s=0,l=n.length;s<l;s++)this.dispatchEvent(new H_(bh.ADDFEATURE,n[s]))}bindFeaturesCollection_(i){let e=!1;this.addEventListener(bh.ADDFEATURE,function(n){e||(e=!0,i.push(n.feature),e=!1)}),this.addEventListener(bh.REMOVEFEATURE,function(n){e||(e=!0,i.remove(n.feature),e=!1)}),i.addEventListener(sl.ADD,n=>{e||(e=!0,this.addFeature(n.element),e=!1)}),i.addEventListener(sl.REMOVE,n=>{e||(e=!0,this.removeFeature(n.element),e=!1)}),this.featuresCollection_=i}clear(i){if(i){for(let n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Fo);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){let n=o=>{this.removeFeatureInternal(o)};this.featuresRtree_.forEach(n);for(let o in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[o])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};let e=new H_(bh.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(i){if(this.featuresRtree_)return this.featuresRtree_.forEach(i);this.featuresCollection_&&this.featuresCollection_.forEach(i)}forEachFeatureAtCoordinateDirect(i,e){let n=[i[0],i[1],i[0],i[1]];return this.forEachFeatureInExtent(n,function(o){let s=o.getGeometry();if(s instanceof Zc||s.intersectsCoordinate(i))return e(o)})}forEachFeatureInExtent(i,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(i,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(i,e){return this.forEachFeatureInExtent(i,function(n){let o=n.getGeometry();if(o instanceof Zc||o.intersectsExtent(i)){let s=e(n);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let i;return this.featuresCollection_?i=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(i=this.featuresRtree_.getAll(),Cd(this.nullGeometryFeatures_)||mr(i,Object.values(this.nullGeometryFeatures_))),i}getFeaturesAtCoordinate(i){let e=[];return this.forEachFeatureAtCoordinateDirect(i,function(n){e.push(n)}),e}getFeaturesInExtent(i,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(i);let o=M0e(i,e);return[].concat(...o.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(i,e){let n=i[0],o=i[1],s=null,l=[NaN,NaN],h=1/0,p=[-1/0,-1/0,1/0,1/0];return e=e||Iu,this.featuresRtree_.forEachInExtent(p,function(m){if(e(m)){let f=m.getGeometry(),g=h;if(h=f instanceof Zc?0:f.closestPointXY(n,o,l,h),h<g){s=m;let y=Math.sqrt(h);p[0]=n-y,p[1]=o-y,p[2]=n+y,p[3]=o+y}}}),s}getExtent(i){return this.featuresRtree_.getExtent(i)}getFeatureById(i){let e=this.idIndex_[i.toString()];return e!==void 0?e:null}getFeatureByUid(i){let e=this.uidIndex_[i];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(i){let e=i.target,n=Xi(e),o=e.getGeometry();if(!o)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);else{let l=o.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(l,e)):this.featuresRtree_&&this.featuresRtree_.update(l,e)}let s=e.getId();if(s!==void 0){let l=s.toString();this.idIndex_[l]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[l]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new H_(bh.CHANGEFEATURE,e))}hasFeature(i){let e=i.getId();return e!==void 0?e in this.idIndex_:Xi(i)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Cd(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(i,e,n){let o=this.loadedExtentsRtree_,s=this.strategy_(i,e,n);for(let l=0,h=s.length;l<h;++l){let p=s[l];o.forEachInExtent(p,function(f){return fc(f.extent,p)})||(++this.loadingExtentsCount_,this.dispatchEvent(new H_(bh.FEATURESLOADSTART)),this.loader_.call(this,p,e,n,f=>{--this.loadingExtentsCount_,this.dispatchEvent(new H_(bh.FEATURESLOADEND,void 0,f))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new H_(bh.FEATURESLOADERROR))}),o.insert(p,{extent:p.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(i){let e=this.loadedExtentsRtree_,n;e.forEachInExtent(i,function(o){if(Dm(o.extent,i))return n=o,!0}),n&&e.remove(n)}removeFeatures(i){let e=[];for(let n=0,o=i.length;n<o;++n){let s=i[n],l=this.removeFeatureInternal(s);l&&e.push(l)}e.length>0&&this.changed()}removeFeature(i){if(!i)return;this.removeFeatureInternal(i)&&this.changed()}removeFeatureInternal(i){let e=Xi(i);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(i);let n=this.featureChangeKeys_[e];if(!n)return;n.forEach(Fo),delete this.featureChangeKeys_[e];let o=i.getId();return o!==void 0&&delete this.idIndex_[o.toString()],delete this.uidIndex_[e],this.hasListener(bh.REMOVEFEATURE)&&this.dispatchEvent(new H_(bh.REMOVEFEATURE,i)),i}removeFromIdIndex_(i){let e=!1;for(let n in this.idIndex_){let o=this.idIndex_[n];if(i instanceof Zc&&Array.isArray(o)&&o.includes(i))o.splice(o.indexOf(i),1);else if(this.idIndex_[n]===i){delete this.idIndex_[n],e=!0;break}}return e}setLoader(i){this.loader_=i}setUrl(i){Nn(this.format_,"`format` must be set when `url` is set"),this.url_=i,this.setLoader(EX(i,this.format_))}},tp=MX;var Gi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function DX(r){return Math.pow(r,3)}function Nc(r){return 1-DX(1-r)}function nwe(r){return 3*r*r-2*r*r*r}function rwe(r){return r}var kX=class extends P_{constructor(i,e,n){super(),n=n||{},this.tileCoord=i,this.state=e,this.interimTile=null,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(Zi.CHANGE)}release(){this.state===Gi.ERROR&&this.setState(Gi.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let i=this.interimTile;if(!i)return this;do{if(i.getState()==Gi.LOADED)return this.transition_=0,i;i=i.interimTile}while(i);return this}refreshInterimChain(){let i=this.interimTile;if(!i)return;let e=this;do{if(i.getState()==Gi.LOADED){i.interimTile=null;break}i.getState()==Gi.LOADING?e=i:i.getState()==Gi.IDLE?e.interimTile=i.interimTile:e=i,i=e.interimTile}while(i)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(i){if(this.state!==Gi.ERROR&&this.state>i)throw new Error("Tile load sequence violation");this.state=i,this.changed()}load(){xn()}getAlpha(i,e){if(!this.transition_)return 1;let n=this.transitionStarts_[i];if(!n)n=e,this.transitionStarts_[i]=n;else if(n===-1)return 1;let o=e-n+1e3/60;return o>=this.transition_?1:DX(o/this.transition_)}inTransition(i){return this.transition_?this.transitionStarts_[i]!==-1:!1}endTransition(i){this.transition_&&(this.transitionStarts_[i]=-1)}},R1=kX;var OX=class extends R1{constructor(i,e,n,o,s,l){super(i,e,l),this.crossOrigin_=o,this.src_=n,this.key=n,this.image_=new Image,o!==null&&(this.image_.crossOrigin=o),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(i){this.image_=i,this.state=Gi.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Gi.ERROR,this.unlistenImage_(),this.image_=hQe(),this.changed()}handleImageLoad_(){let i=this.image_;i.naturalWidth&&i.naturalHeight?this.state=Gi.LOADED:this.state=Gi.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Gi.ERROR&&(this.state=Gi.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Gi.IDLE&&(this.state=Gi.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Dye(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};function hQe(){let r=Cs(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}var nV=OX;var pQe=10,swe=.25,PX=class{constructor(i,e,n,o,s,l){this.sourceProj_=i,this.targetProj_=e;let h={},p=Sv(this.targetProj_,this.sourceProj_);this.transformInv_=function($){let H=$[0]+"/"+$[1];return h[H]||(h[H]=p($)),h[H]},this.maxSourceExtent_=o,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&or(o)>=or(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?or(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?or(this.targetProj_.getExtent()):null;let m=Cu(n),f=ES(n),g=AS(n),y=TS(n),_=this.transformInv_(m),w=this.transformInv_(f),A=this.transformInv_(g),k=this.transformInv_(y),R=pQe+(l?Math.max(0,Math.ceil(Math.log2(p1(n)/(l*l*256*256)))):0);if(this.addQuad_(m,f,g,y,_,w,A,k,R),this.wrapsXInSource_){let $=1/0;this.triangles_.forEach(function(H,oe,se){$=Math.min($,H.source[0][0],H.source[1][0],H.source[2][0])}),this.triangles_.forEach(H=>{if(Math.max(H.source[0][0],H.source[1][0],H.source[2][0])-$>this.sourceWorldWidth_/2){let oe=[[H.source[0][0],H.source[0][1]],[H.source[1][0],H.source[1][1]],[H.source[2][0],H.source[2][1]]];oe[0][0]-$>this.sourceWorldWidth_/2&&(oe[0][0]-=this.sourceWorldWidth_),oe[1][0]-$>this.sourceWorldWidth_/2&&(oe[1][0]-=this.sourceWorldWidth_),oe[2][0]-$>this.sourceWorldWidth_/2&&(oe[2][0]-=this.sourceWorldWidth_);let se=Math.min(oe[0][0],oe[1][0],oe[2][0]);Math.max(oe[0][0],oe[1][0],oe[2][0])-se<this.sourceWorldWidth_/2&&(H.source=oe)}})}h={}}addTriangle_(i,e,n,o,s,l){this.triangles_.push({source:[o,s,l],target:[i,e,n]})}addQuad_(i,e,n,o,s,l,h,p,m){let f=mc([s,l,h,p]),g=this.sourceWorldWidth_?or(f)/this.sourceWorldWidth_:null,y=this.sourceWorldWidth_,_=this.sourceProj_.canWrapX()&&g>.5&&g<1,w=!1;if(m>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){let k=mc([i,e,n,o]);w=or(k)/this.targetWorldWidth_>swe||w}!_&&this.sourceProj_.isGlobal()&&g&&(w=g>swe||w)}if(!w&&this.maxSourceExtent_&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3])&&!Wo(f,this.maxSourceExtent_))return;let A=0;if(!w&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(h[0])||!isFinite(h[1])||!isFinite(p[0])||!isFinite(p[1]))){if(m>0)w=!0;else if(A=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(l[0])||!isFinite(l[1])?4:0)+(!isFinite(h[0])||!isFinite(h[1])?2:0)+(!isFinite(p[0])||!isFinite(p[1])?1:0),A!=1&&A!=2&&A!=4&&A!=8)return}if(m>0){if(!w){let k=[(i[0]+n[0])/2,(i[1]+n[1])/2],R=this.transformInv_(k),$;_?$=(Pp(s[0],y)+Pp(h[0],y))/2-Pp(R[0],y):$=(s[0]+h[0])/2-R[0];let H=(s[1]+h[1])/2-R[1];w=$*$+H*H>this.errorThresholdSquared_}if(w){if(Math.abs(i[0]-n[0])<=Math.abs(i[1]-n[1])){let k=[(e[0]+n[0])/2,(e[1]+n[1])/2],R=this.transformInv_(k),$=[(o[0]+i[0])/2,(o[1]+i[1])/2],H=this.transformInv_($);this.addQuad_(i,e,k,$,s,l,R,H,m-1),this.addQuad_($,k,n,o,H,R,h,p,m-1)}else{let k=[(i[0]+e[0])/2,(i[1]+e[1])/2],R=this.transformInv_(k),$=[(n[0]+o[0])/2,(n[1]+o[1])/2],H=this.transformInv_($);this.addQuad_(i,k,$,o,s,R,H,p,m-1),this.addQuad_(k,e,n,$,R,l,h,H,m-1)}return}}if(_){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}A&11||this.addTriangle_(i,n,o,s,h,p),A&14||this.addTriangle_(i,n,e,s,h,l),A&&(A&13||this.addTriangle_(e,o,i,l,p,s),A&7||this.addTriangle_(e,o,n,l,p,h))}calculateSourceExtent(){let i=Fs();return this.triangles_.forEach(function(e,n,o){let s=e.source;IS(i,s[0]),IS(i,s[1]),IS(i,s[2])}),i}getTriangles(){return this.triangles_}},rV=PX;var RX,YS=[];function awe(r,i,e,n,o){r.beginPath(),r.moveTo(0,0),r.lineTo(i,e),r.lineTo(n,o),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(i,n)+1,Math.max(e,o)),r.restore()}function FX(r,i){return Math.abs(r[i*4]-210)>2||Math.abs(r[i*4+3]-.75*255)>2}function mQe(){if(RX===void 0){let r=Cs(6,6,YS);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",awe(r,4,5,4,0),awe(r,4,5,0,5);let i=r.getImageData(0,0,3,3).data;RX=FX(i,0)||FX(i,4)||FX(i,8),Ov(r),YS.push(r.canvas)}return RX}function MM(r,i,e,n){let o=us(e,i,r),s=DS(i,n,e),l=i.getMetersPerUnit();l!==void 0&&(s*=l);let h=r.getMetersPerUnit();h!==void 0&&(s/=h);let p=r.getExtent();if(!p||Mm(p,o)){let m=DS(r,s,o)/s;isFinite(m)&&m>0&&(s/=m)}return s}function lwe(r,i,e,n){let o=gc(e),s=MM(r,i,o,n);return(!isFinite(s)||s<=0)&&RE(e,function(l){return s=MM(r,i,l,n),isFinite(s)&&s>0}),s}function oV(r,i,e,n,o,s,l,h,p,m,f,g,y,_){let w=Cs(Math.round(e*r),Math.round(e*i),YS);if(g||(w.imageSmoothingEnabled=!1),p.length===0)return w.canvas;w.scale(e,e);function A(se){return Math.round(se*e)/e}w.globalCompositeOperation="lighter";let k=Fs();p.forEach(function(se,ge,ue){h1(k,se.extent)});let R,$=e/n,H=(g?1:1+Math.pow(2,-24))/$;if(!y||p.length!==1||m!==0){if(R=Cs(Math.round(or(k)*$),Math.round(is(k)*$),YS),g||(R.imageSmoothingEnabled=!1),o&&_){let se=(o[0]-k[0])*$,ge=-(o[3]-k[3])*$,ue=or(o)*$,pe=is(o)*$;R.rect(se,ge,ue,pe),R.clip()}p.forEach(function(se,ge,ue){let pe=(se.extent[0]-k[0])*$,Ce=-(se.extent[3]-k[3])*$,_e=or(se.extent)*$,de=is(se.extent)*$;se.image.width>0&&se.image.height>0&&R.drawImage(se.image,m,m,se.image.width-2*m,se.image.height-2*m,g?pe:Math.round(pe),g?Ce:Math.round(Ce),g?_e:Math.round(pe+_e)-Math.round(pe),g?de:Math.round(Ce+de)-Math.round(Ce))})}let oe=Cu(l);return h.getTriangles().forEach(function(se,ge,ue){let pe=se.source,Ce=se.target,_e=pe[0][0],de=pe[0][1],te=pe[1][0],Se=pe[1][1],Te=pe[2][0],De=pe[2][1],Le=A((Ce[0][0]-oe[0])/s),Me=A(-(Ce[0][1]-oe[1])/s),ze=A((Ce[1][0]-oe[0])/s),Ve=A(-(Ce[1][1]-oe[1])/s),$e=A((Ce[2][0]-oe[0])/s),nt=A(-(Ce[2][1]-oe[1])/s),be=_e,we=de;_e=0,de=0,te-=be,Se-=we,Te-=be,De-=we;let ke=[[te,Se,0,0,ze-Le],[Te,De,0,0,$e-Le],[0,0,te,Se,Ve-Me],[0,0,Te,De,nt-Me]],et=k0e(ke);if(!et)return;if(w.save(),w.beginPath(),mQe()||!g){w.moveTo(ze,Ve);let at=4,_t=Le-ze,ht=Me-Ve;for(let Zt=0;Zt<at;Zt++)w.lineTo(ze+A((Zt+1)*_t/at),Ve+A(Zt*ht/(at-1))),Zt!=at-1&&w.lineTo(ze+A((Zt+1)*_t/at),Ve+A((Zt+1)*ht/(at-1)));w.lineTo($e,nt)}else w.moveTo(ze,Ve),w.lineTo(Le,Me),w.lineTo($e,nt);w.clip(),w.transform(et[0],et[2],et[1],et[3],Le,Me),w.translate(k[0]-be,k[3]-we);let Qe;if(R)Qe=R.canvas,w.scale(H,-H);else{let at=p[0],_t=at.extent;Qe=at.image,w.scale(or(_t)/Qe.width,-is(_t)/Qe.height)}w.drawImage(Qe,0,0),w.restore()}),R&&(Ov(R),YS.push(R.canvas)),f&&(w.save(),w.globalCompositeOperation="source-over",w.strokeStyle="black",w.lineWidth=1,h.getTriangles().forEach(function(se,ge,ue){let pe=se.target,Ce=(pe[0][0]-oe[0])/s,_e=-(pe[0][1]-oe[1])/s,de=(pe[1][0]-oe[0])/s,te=-(pe[1][1]-oe[1])/s,Se=(pe[2][0]-oe[0])/s,Te=-(pe[2][1]-oe[1])/s;w.beginPath(),w.moveTo(de,te),w.lineTo(Ce,_e),w.lineTo(Se,Te),w.closePath(),w.stroke()}),w.restore()),w.canvas}var LX=class extends R1{constructor(i,e,n,o,s,l,h,p,m,f,g,y){super(s,Gi.IDLE,y),this.renderEdges_=g!==void 0?g:!1,this.pixelRatio_=h,this.gutter_=p,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=o,this.wrappedTileCoord_=l||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;let _=o.getTileCoordExtent(this.wrappedTileCoord_),w=this.targetTileGrid_.getExtent(),A=this.sourceTileGrid_.getExtent(),k=w?ch(_,w):_;if(p1(k)===0){this.state=Gi.EMPTY;return}let R=i.getExtent();R&&(A?A=ch(A,R):A=R);let $=o.getResolution(this.wrappedTileCoord_[0]),H=lwe(i,n,k,$);if(!isFinite(H)||H<=0){this.state=Gi.EMPTY;return}let oe=f!==void 0?f:.5;if(this.triangulation_=new rV(i,n,k,A,H*oe,$),this.triangulation_.getTriangles().length===0){this.state=Gi.EMPTY;return}this.sourceZ_=e.getZForResolution(H);let se=this.triangulation_.calculateSourceExtent();if(A&&(i.canWrapX()?(se[1]=ss(se[1],A[1],A[3]),se[3]=ss(se[3],A[1],A[3])):se=ch(se,A)),!p1(se))this.state=Gi.EMPTY;else{let ge=e.getTileRangeForExtentAndZ(se,this.sourceZ_);for(let ue=ge.minX;ue<=ge.maxX;ue++)for(let pe=ge.minY;pe<=ge.maxY;pe++){let Ce=m(this.sourceZ_,ue,pe,h);Ce&&this.sourceTiles_.push(Ce)}this.sourceTiles_.length===0&&(this.state=Gi.EMPTY)}}getImage(){return this.canvas_}reproject_(){let i=[];if(this.sourceTiles_.forEach(e=>{e&&e.getState()==Gi.LOADED&&i.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}),this.sourceTiles_.length=0,i.length===0)this.state=Gi.ERROR;else{let e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),o=typeof n=="number"?n:n[0],s=typeof n=="number"?n:n[1],l=this.targetTileGrid_.getResolution(e),h=this.sourceTileGrid_.getResolution(this.sourceZ_),p=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=oV(o,s,this.pixelRatio_,h,this.sourceTileGrid_.getExtent(),l,p,this.triangulation_,i,this.gutter_,this.renderEdges_,this.interpolate),this.state=Gi.LOADED}this.changed()}load(){if(this.state==Gi.IDLE){this.state=Gi.LOADING,this.changed();let i=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(e=>{let n=e.getState();if(n==Gi.IDLE||n==Gi.LOADING){i++;let o=$r(e,Zi.CHANGE,function(s){let l=e.getState();(l==Gi.LOADED||l==Gi.ERROR||l==Gi.EMPTY)&&(Fo(o),i--,i===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}),i===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,n,o){e.getState()==Gi.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Fo),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Ov(this.canvas_.getContext("2d")),YS.push(this.canvas_),this.canvas_=null),super.release()}},gR=LX;var NX=class{constructor(i){this.highWaterMark=i!==void 0?i:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(i){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(i){return this.entries_.hasOwnProperty(i)}forEach(i){let e=this.oldest_;for(;e;)i(e.value_,e.key_,this),e=e.newer}get(i,e){let n=this.entries_[i];return Nn(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(i){let e=this.entries_[i];return Nn(e!==void 0,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[i],--this.count_,e.value_}getCount(){return this.count_}getKeys(){let i=new Array(this.count_),e=0,n;for(n=this.newest_;n;n=n.older)i[e++]=n.key_;return i}getValues(){let i=new Array(this.count_),e=0,n;for(n=this.newest_;n;n=n.older)i[e++]=n.value_;return i}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(i){return this.entries_[i]?.value_}pop(){let i=this.oldest_;return delete this.entries_[i.key_],i.newer&&(i.newer.older=null),this.oldest_=i.newer,this.oldest_||(this.newest_=null),--this.count_,i.value_}replace(i,e){this.get(i),this.entries_[i].value_=e}set(i,e){Nn(!(i in this.entries_),"Tried to set a value for a key that is used already");let n={key_:i,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[i]=n,++this.count_}setSize(i){this.highWaterMark=i}},cwe=NX;function BX(r,i,e,n){return n!==void 0?(n[0]=r,n[1]=i,n[2]=e,n):[r,i,e]}function W_(r,i,e){return r+"/"+i+"/"+e}function sV(r){return W_(r[0],r[1],r[2])}function dwe(r){let[i,e,n]=r.substring(r.lastIndexOf("/")+1,r.length).split(",").map(Number);return W_(i,e,n)}function aV(r){return r.split("/").map(Number)}function lV(r){return(r[1]<<r[0])+r[2]}function uwe(r,i){let e=r[0],n=r[1],o=r[2];if(i.getMinZoom()>e||e>i.getMaxZoom())return!1;let s=i.getFullTileRange(e);return s?s.containsXY(n,o):!0}var jX=class extends cwe{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(i){for(;this.canExpireCache()&&!(this.peekLast().getKey()in i);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;let i=this.peekFirstKey(),n=aV(i)[0];this.forEach(o=>{o.tileCoord[0]!==n&&(this.remove(sV(o.tileCoord)),o.release())})}},DM=jX;var cV={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};var dV=class{constructor(i,e,n,o){this.minX=i,this.maxX=e,this.minY=n,this.maxY=o}contains(i){return this.containsXY(i[1],i[2])}containsTileRange(i){return this.minX<=i.minX&&i.maxX<=this.maxX&&this.minY<=i.minY&&i.maxY<=this.maxY}containsXY(i,e){return this.minX<=i&&i<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(i){return this.minX==i.minX&&this.minY==i.minY&&this.maxX==i.maxX&&this.maxY==i.maxY}extend(i){i.minX<this.minX&&(this.minX=i.minX),i.maxX>this.maxX&&(this.maxX=i.maxX),i.minY<this.minY&&(this.minY=i.minY),i.maxY>this.maxY&&(this.maxY=i.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(i){return this.minX<=i.maxX&&this.maxX>=i.minX&&this.minY<=i.maxY&&this.maxY>=i.minY}};function KS(r,i,e,n,o){return o!==void 0?(o.minX=r,o.maxX=i,o.minY=e,o.maxY=n,o):new dV(r,i,e,n)}var uV=dV;var kM=[0,0,0],F1=5,VX=class{constructor(i){this.minZoom=i.minZoom!==void 0?i.minZoom:0,this.resolutions_=i.resolutions,Nn(X_e(this.resolutions_,(o,s)=>s-o,!0),"`resolutions` must be sorted in descending order");let e;if(!i.origins){for(let o=0,s=this.resolutions_.length-1;o<s;++o)if(!e)e=this.resolutions_[o]/this.resolutions_[o+1];else if(this.resolutions_[o]/this.resolutions_[o+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=i.origin!==void 0?i.origin:null,this.origins_=null,i.origins!==void 0&&(this.origins_=i.origins,Nn(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));let n=i.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Cu(n)),Nn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,i.tileSizes!==void 0&&(this.tileSizes_=i.tileSizes,Nn(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=i.tileSize!==void 0?i.tileSize:this.tileSizes_?null:256,Nn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],i.sizes!==void 0?this.fullTileRanges_=i.sizes.map((o,s)=>{let l=new uV(Math.min(0,o[0]),Math.max(o[0]-1,-1),Math.min(0,o[1]),Math.max(o[1]-1,-1));if(n){let h=this.getTileRangeForExtentAndZ(n,s);l.minX=Math.max(h.minX,l.minX),l.maxX=Math.min(h.maxX,l.maxX),l.minY=Math.max(h.minY,l.minY),l.maxY=Math.min(h.maxY,l.maxY)}return l}):n&&this.calculateTileRanges_(n)}forEachTileCoord(i,e,n){let o=this.getTileRangeForExtentAndZ(i,e);for(let s=o.minX,l=o.maxX;s<=l;++s)for(let h=o.minY,p=o.maxY;h<=p;++h)n([e,s,h])}forEachTileCoordParentTileRange(i,e,n,o){let s,l,h,p=null,m=i[0]-1;for(this.zoomFactor_===2?(l=i[1],h=i[2]):p=this.getTileCoordExtent(i,o);m>=this.minZoom;){if(l!==void 0&&h!==void 0?(l=Math.floor(l/2),h=Math.floor(h/2),s=KS(l,l,h,h,n)):s=this.getTileRangeForExtentAndZ(p,m,n),e(m,s))return!0;--m}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(i){return this.origin_?this.origin_:this.origins_[i]}getResolution(i){return this.resolutions_[i]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(i,e,n){if(i[0]<this.maxZoom){if(this.zoomFactor_===2){let s=i[1]*2,l=i[2]*2;return KS(s,s+1,l,l+1,e)}let o=this.getTileCoordExtent(i,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,i[0]+1,e)}return null}getTileRangeForTileCoordAndZ(i,e,n){if(e>this.maxZoom||e<this.minZoom)return null;let o=i[0],s=i[1],l=i[2];if(e===o)return KS(s,l,s,l,n);if(this.zoomFactor_){let p=Math.pow(this.zoomFactor_,e-o),m=Math.floor(s*p),f=Math.floor(l*p);if(e<o)return KS(m,m,f,f,n);let g=Math.floor(p*(s+1))-1,y=Math.floor(p*(l+1))-1;return KS(m,g,f,y,n)}let h=this.getTileCoordExtent(i,this.tmpExtent_);return this.getTileRangeForExtentAndZ(h,e,n)}getTileRangeForExtentAndZ(i,e,n){this.getTileCoordForXYAndZ_(i[0],i[3],e,!1,kM);let o=kM[1],s=kM[2];this.getTileCoordForXYAndZ_(i[2],i[1],e,!0,kM);let l=kM[1],h=kM[2];return KS(o,l,s,h,n)}getTileCoordCenter(i){let e=this.getOrigin(i[0]),n=this.getResolution(i[0]),o=Oa(this.getTileSize(i[0]),this.tmpSize_);return[e[0]+(i[1]+.5)*o[0]*n,e[1]-(i[2]+.5)*o[1]*n]}getTileCoordExtent(i,e){let n=this.getOrigin(i[0]),o=this.getResolution(i[0]),s=Oa(this.getTileSize(i[0]),this.tmpSize_),l=n[0]+i[1]*s[0]*o,h=n[1]-(i[2]+1)*s[1]*o,p=l+s[0]*o,m=h+s[1]*o;return Sd(l,h,p,m,e)}getTileCoordForCoordAndResolution(i,e,n){return this.getTileCoordForXYAndResolution_(i[0],i[1],e,!1,n)}getTileCoordForXYAndResolution_(i,e,n,o,s){let l=this.getZForResolution(n),h=n/this.getResolution(l),p=this.getOrigin(l),m=Oa(this.getTileSize(l),this.tmpSize_),f=h*(i-p[0])/n/m[0],g=h*(p[1]-e)/n/m[1];return o?(f=A_(f,F1)-1,g=A_(g,F1)-1):(f=m1(f,F1),g=m1(g,F1)),BX(l,f,g,s)}getTileCoordForXYAndZ_(i,e,n,o,s){let l=this.getOrigin(n),h=this.getResolution(n),p=Oa(this.getTileSize(n),this.tmpSize_),m=(i-l[0])/h/p[0],f=(l[1]-e)/h/p[1];return o?(m=A_(m,F1)-1,f=A_(f,F1)-1):(m=m1(m,F1),f=m1(f,F1)),BX(n,m,f,s)}getTileCoordForCoordAndZ(i,e,n){return this.getTileCoordForXYAndZ_(i[0],i[1],e,!1,n)}getTileCoordResolution(i){return this.resolutions_[i[0]]}getTileSize(i){return this.tileSize_?this.tileSize_:this.tileSizes_[i]}getFullTileRange(i){return this.fullTileRanges_?this.fullTileRanges_[i]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,i):null}getZForResolution(i,e){let n=w1(this.resolutions_,i,e||0);return ss(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(i,e){return fZ(e,0,e.length,2,this.getTileCoordExtent(i))}calculateTileRanges_(i){let e=this.resolutions_.length,n=new Array(e);for(let o=this.minZoom;o<e;++o)n[o]=this.getTileRangeForExtentAndZ(i,o);this.fullTileRanges_=n}},zv=VX;var hV=class extends zv{constructor(i){super({extent:i.extent,origin:i.origin,origins:i.origins,resolutions:i.resolutions,tileSize:i.tileSize,tileSizes:i.tileSizes,sizes:i.sizes}),this.matrixIds_=i.matrixIds}getMatrixId(i){return this.matrixIds_[i]}getMatrixIds(){return this.matrixIds_}},pwe=hV;function mwe(r,i,e){let n=[],o=[],s=[],l=[],h=[];e=e!==void 0?e:[];let p="SupportedCRS",m="TileMatrix",f="Identifier",g="ScaleDenominator",y="TopLeftCorner",_="TileWidth",w="TileHeight",A=r[p],k=Vi(A),R=k.getMetersPerUnit(),$=k.getAxisOrientation().substr(0,2)=="ne";return r[m].sort(function(H,oe){return oe[g]-H[g]}),r[m].forEach(function(H){let oe;if(e.length>0?oe=e.find(function(se){return H[f]==se[m]?!0:H[f].includes(":")?!1:r[f]+":"+H[f]===se[m]}):oe=!0,oe){o.push(H[f]);let se=H[g]*28e-5/R,ge=H[_],ue=H[w];$?s.push([H[y][1],H[y][0]]):s.push(H[y]),n.push(se),l.push(ge==ue?ge:[ge,ue]),h.push([H.MatrixWidth,H.MatrixHeight])}}),new hV({extent:i,origins:s,resolutions:n,matrixIds:o,tileSizes:l,sizes:h})}function pV(r){let i=r.getDefaultTileGrid();return i||(i=yQe(r),r.setDefaultTileGrid(i)),i}function fwe(r,i,e){let n=i[0],o=r.getTileCoordCenter(i),s=OM(e);if(!Mm(s,o)){let l=or(s),h=Math.ceil((s[0]-o[0])/l);return o[0]+=l*h,r.getTileCoordForCoordAndZ(o,n)}return i}function _Qe(r,i,e,n){n=n!==void 0?n:"top-left";let o=gwe(r,i,e);return new zv({extent:r,origin:S0e(r,n),resolutions:o,tileSize:e})}function mV(r){let i=r||{},e=i.extent||Vi("EPSG:3857").getExtent(),n={extent:e,minZoom:i.minZoom,tileSize:i.tileSize,resolutions:gwe(e,i.maxZoom,i.tileSize,i.maxResolution)};return new zv(n)}function gwe(r,i,e,n){i=i!==void 0?i:42,e=Oa(e!==void 0?e:256);let o=is(r),s=or(r);n=n>0?n:Math.max(s/e[0],o/e[1]);let l=i+1,h=new Array(l);for(let p=0;p<l;++p)h[p]=n/Math.pow(2,p);return h}function yQe(r,i,e,n){let o=OM(r);return _Qe(o,i,e,n)}function OM(r){r=Vi(r);let i=r.getExtent();if(!i){let e=180*Dp.degrees/r.getMetersPerUnit();i=Sd(-e,-e,e,e)}return i}var $X=class extends EM{constructor(i){super({attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,projection:i.projection,state:i.state,wrapX:i.wrapX,interpolate:i.interpolate}),this.on,this.once,this.un,this.opaque_=i.opaque!==void 0?i.opaque:!1,this.tilePixelRatio_=i.tilePixelRatio!==void 0?i.tilePixelRatio:1,this.tileGrid=i.tileGrid!==void 0?i.tileGrid:null;let e=[256,256];this.tileGrid&&Oa(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new DM(i.cacheSize||0),this.tmpSize=[0,0],this.key_=i.key||"",this.tileOptions={transition:i.transition,interpolate:i.interpolate},this.zDirection=i.zDirection?i.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(i,e){let n=this.getTileCacheForProjection(i);n&&n.expireCache(e)}forEachLoadedTile(i,e,n,o){let s=this.getTileCacheForProjection(i);if(!s)return!1;let l=!0,h,p,m;for(let f=n.minX;f<=n.maxX;++f)for(let g=n.minY;g<=n.maxY;++g)p=W_(e,f,g),m=!1,s.containsKey(p)&&(h=s.get(p),m=h.getState()===Gi.LOADED,m&&(m=o(h)!==!1)),m||(l=!1);return l}getGutterForProjection(i){return 0}getKey(){return this.key_}setKey(i){this.key_!==i&&(this.key_=i,this.changed())}getOpaque(i){return this.opaque_}getResolutions(i){let e=i?this.getTileGridForProjection(i):this.tileGrid;return e?e.getResolutions():null}getTile(i,e,n,o,s){return xn()}getTileGrid(){return this.tileGrid}getTileGridForProjection(i){return this.tileGrid?this.tileGrid:pV(i)}getTileCacheForProjection(i){let e=this.getProjection();return Nn(e===null||qd(e,i),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(i){return this.tilePixelRatio_}getTilePixelSize(i,e,n){let o=this.getTileGridForProjection(n),s=this.getTilePixelRatio(e),l=Oa(o.getTileSize(i),this.tmpSize);return s==1?l:C6(l,s,this.tmpSize)}getTileCoordForTileUrlFunction(i,e){e=e!==void 0?e:this.getProjection();let n=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(i=fwe(n,i,e)),uwe(i,n)?i:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(i,e){let n=this.getTileCacheForProjection(e);i>n.highWaterMark&&(n.highWaterMark=i)}useTile(i,e,n,o){}},fV=class extends Ls{constructor(i,e){super(i),this.tile=e}},_we=$X;function vQe(r,i){let e=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,s=/\{-y\}/g;return function(l,h,p){if(l)return r.replace(e,l[0].toString()).replace(n,l[1].toString()).replace(o,l[2].toString()).replace(s,function(){let m=l[0],f=i.getFullTileRange(m);if(!f)throw new Error("The {-y} placeholder requires a tile grid with extent");return(f.getHeight()-l[2]-1).toString()})}}function ywe(r,i){let e=r.length,n=new Array(e);for(let o=0;o<e;++o)n[o]=vQe(r[o],i);return gV(n)}function gV(r){return r.length===1?r[0]:function(i,e,n){if(!i)return;let o=lV(i),s=Pp(o,r.length);return r[s](i,e,n)}}function _V(r){let i=[],e=/\{([a-z])-([a-z])\}/.exec(r);if(e){let n=e[1].charCodeAt(0),o=e[2].charCodeAt(0),s;for(s=n;s<=o;++s)i.push(r.replace(e[0],String.fromCharCode(s)));return i}if(e=/\{(\d+)-(\d+)\}/.exec(r),e){let n=parseInt(e[2],10);for(let o=parseInt(e[1],10);o<=n;o++)i.push(r.replace(e[0],o.toString()));return i}return i.push(r),i}var UX=class r extends _we{constructor(i){super({attributions:i.attributions,cacheSize:i.cacheSize,opaque:i.opaque,projection:i.projection,state:i.state,tileGrid:i.tileGrid,tilePixelRatio:i.tilePixelRatio,wrapX:i.wrapX,transition:i.transition,interpolate:i.interpolate,key:i.key,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===r.prototype.tileUrlFunction,this.tileLoadFunction=i.tileLoadFunction,i.tileUrlFunction&&(this.tileUrlFunction=i.tileUrlFunction),this.urls=null,i.urls?this.setUrls(i.urls):i.url&&this.setUrl(i.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(i){let e=i.target,n=Xi(e),o=e.getState(),s;o==Gi.LOADING?(this.tileLoadingKeys_[n]=!0,s=cV.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],s=o==Gi.ERROR?cV.TILELOADERROR:o==Gi.LOADED?cV.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new fV(s,e))}setTileLoadFunction(i){this.tileCache.clear(),this.tileLoadFunction=i,this.changed()}setTileUrlFunction(i,e){this.tileUrlFunction=i,this.tileCache.pruneExceptNewestZ(),typeof e<"u"?this.setKey(e):this.changed()}setUrl(i){let e=_V(i);this.urls=e,this.setUrls(e)}setUrls(i){this.urls=i;let e=i.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(ywe(i,this.tileGrid),e):this.setKey(e)}tileUrlFunction(i,e,n){}useTile(i,e,n){let o=W_(i,e,n);this.tileCache.containsKey(o)&&this.tileCache.get(o)}},yV=UX;var zX=class extends yV{constructor(i){super({attributions:i.attributions,cacheSize:i.cacheSize,opaque:i.opaque,projection:i.projection,state:i.state,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction?i.tileLoadFunction:bQe,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:i.wrapX,transition:i.transition,interpolate:i.interpolate!==void 0?i.interpolate:!0,key:i.key,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection}),this.crossOrigin=i.crossOrigin!==void 0?i.crossOrigin:null,this.tileClass=i.tileClass!==void 0?i.tileClass:nV,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=i.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(let i in this.tileCacheForProjection)if(this.tileCacheForProjection[i].canExpireCache())return!0;return!1}expireCache(i,e){let n=this.getTileCacheForProjection(i);this.tileCache.expireCache(this.tileCache==n?e:{});for(let o in this.tileCacheForProjection){let s=this.tileCacheForProjection[o];s.expireCache(s==n?e:{})}}getGutterForProjection(i){return this.getProjection()&&i&&!qd(this.getProjection(),i)?0:this.getGutter()}getGutter(){return 0}getKey(){let i=super.getKey();return this.getInterpolate()||(i+=":disable-interpolation"),i}getOpaque(i){return this.getProjection()&&i&&!qd(this.getProjection(),i)?!1:super.getOpaque(i)}getTileGridForProjection(i){let e=this.getProjection();if(this.tileGrid&&(!e||qd(e,i)))return this.tileGrid;let n=Xi(i);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=pV(i)),this.tileGridForProjection[n]}getTileCacheForProjection(i){let e=this.getProjection();if(!e||qd(e,i))return this.tileCache;let n=Xi(i);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new DM(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(i,e,n,o,s,l){let h=[i,e,n],p=this.getTileCoordForTileUrlFunction(h,s),m=p?this.tileUrlFunction(p,o,s):void 0,f=new this.tileClass(h,m!==void 0?Gi.IDLE:Gi.EMPTY,m!==void 0?m:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=l,f.addEventListener(Zi.CHANGE,this.handleTileChange.bind(this)),f}getTile(i,e,n,o,s){let l=this.getProjection();if(!l||!s||qd(l,s))return this.getTileInternal(i,e,n,o,l||s);let h=this.getTileCacheForProjection(s),p=[i,e,n],m,f=sV(p);h.containsKey(f)&&(m=h.get(f));let g=this.getKey();if(m&&m.key==g)return m;let y=this.getTileGridForProjection(l),_=this.getTileGridForProjection(s),w=this.getTileCoordForTileUrlFunction(p,s),A=new gR(l,y,s,_,p,w,this.getTilePixelRatio(o),this.getGutter(),(k,R,$,H)=>this.getTileInternal(k,R,$,H,l),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return A.key=g,m?(A.interimTile=m,A.refreshInterimChain(),h.replace(f,A)):h.set(f,A),A}getTileInternal(i,e,n,o,s){let l=null,h=W_(i,e,n),p=this.getKey();if(!this.tileCache.containsKey(h))l=this.createTile_(i,e,n,o,s,p),this.tileCache.set(h,l);else if(l=this.tileCache.get(h),l.key!=p){let m=l;l=this.createTile_(i,e,n,o,s,p),m.getState()==Gi.IDLE?l.interimTile=m.interimTile:l.interimTile=m,l.refreshInterimChain(),this.tileCache.replace(h,l)}return l}setRenderReprojectionEdges(i){if(this.renderReprojectionEdges_!=i){this.renderReprojectionEdges_=i;for(let e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}setTileGridForProjection(i,e){let n=Vi(i);if(n){let o=Xi(n);o in this.tileGridForProjection||(this.tileGridForProjection[o]=e)}}clear(){super.clear();for(let i in this.tileCacheForProjection)this.tileCacheForProjection[i].clear()}};function bQe(r,i){r.getImage().src=i}var PM=zX;var GX=class extends PM{constructor(i){i=i||{};let e=i.projection!==void 0?i.projection:"EPSG:3857",n=i.tileGrid!==void 0?i.tileGrid:mV({extent:OM(e),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});super({attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:i.interpolate,opaque:i.opaque,projection:e,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection}),this.gutter_=i.gutter!==void 0?i.gutter:0}getGutter(){return this.gutter_}},L1=GX;var wQe='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',HX=class extends L1{constructor(i){i=i||{};let e;i.attributions!==void 0?e=i.attributions:e=[wQe];let n=i.crossOrigin!==void 0?i.crossOrigin:"anonymous",o=i.url!==void 0?i.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:i.cacheSize,crossOrigin:n,interpolate:i.interpolate,maxZoom:i.maxZoom!==void 0?i.maxZoom:19,opaque:i.opaque!==void 0?i.opaque:!0,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,transition:i.transition,url:o,wrapX:i.wrapX,zDirection:i.zDirection})}},vwe=HX;var qX=[null],CQe=ti(qX,{nd:AQe,tag:bwe}),xQe=ti(qX,{node:IQe,way:TQe}),WX=class extends Tf{constructor(){super(),this.dataProjection=Vi("EPSG:4326")}readFeaturesFromNode(i,e){if(e=this.getReadOptions(i,e),i.localName=="osm"){let n=ri({nodes:{},ways:[],features:[]},xQe,i,[e]);for(let o=0;o<n.ways.length;o++){let s=n.ways[o],l=s.flatCoordinates;if(!l.length)for(let m=0,f=s.ndrefs.length;m<f;m++){let g=n.nodes[s.ndrefs[m]];mr(l,g)}let h;s.ndrefs[0]==s.ndrefs[s.ndrefs.length-1]?h=new Zo(l,"XY",[l.length]):h=new ao(l,"XY"),Co(h,!1,e);let p=new An(h);s.id!==void 0&&p.setId(s.id),p.setProperties(s.tags,!0),n.features.push(p)}if(n.features)return n.features}return[]}},SQe=ti(qX,{tag:bwe});function IQe(r,i){let e=i[0],n=i[i.length-1],o=r.getAttribute("id"),s=[parseFloat(r.getAttribute("lon")),parseFloat(r.getAttribute("lat"))];n.nodes[o]=s;let l=ri({tags:{}},SQe,r,i);if(!Cd(l.tags)){let h=new Kn(s);Co(h,!1,e);let p=new An(h);o!==void 0&&p.setId(o),p.setProperties(l.tags,!0),n.features.push(p)}}function TQe(r,i){let e=r.getAttribute("id"),n=ri({id:e,ndrefs:[],flatCoordinates:[],tags:{}},CQe,r,i);i[i.length-1].ways.push(n)}function AQe(r,i){let e=i[i.length-1];e.ndrefs.push(r.getAttribute("ref")),r.hasAttribute("lon")&&r.hasAttribute("lat")&&(e.flatCoordinates.push(parseFloat(r.getAttribute("lon"))),e.flatCoordinates.push(parseFloat(r.getAttribute("lat"))))}function bwe(r,i){let e=i[i.length-1];e.tags[r.getAttribute("k")]=r.getAttribute("v")}var wwe=WX;function _R(r){return Array.isArray(r)?Math.min(...r):r}var YX=class extends T6{constructor(i,e,n,o,s,l,h){let p=i.getExtent();p&&i.canWrapX()&&(p=p.slice(),p[0]=-1/0,p[2]=1/0);let m=e.getExtent();m&&e.canWrapX()&&(m=m.slice(),m[0]=-1/0,m[2]=1/0);let f=m?ch(n,m):n,g=gc(f),y=MM(i,e,g,o),_=.5,w=new rV(i,e,f,p,y*_,o),A=w.calculateSourceExtent(),k=km(A)?null:l(A,y,s),R=k?en.IDLE:en.EMPTY,$=k?k.getPixelRatio():1;super(n,o,$,R),this.targetProj_=e,this.maxSourceExtent_=p,this.triangulation_=w,this.targetResolution_=o,this.targetExtent_=n,this.sourceImage_=k,this.sourcePixelRatio_=$,this.interpolate_=h,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==en.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){let i=this.sourceImage_.getState();if(i==en.LOADED){let e=or(this.targetExtent_)/this.targetResolution_,n=is(this.targetExtent_)/this.targetResolution_;this.canvas_=oV(e,n,this.sourcePixelRatio_,_R(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=i,this.changed()}load(){if(this.state==en.IDLE){this.state=en.LOADING,this.changed();let i=this.sourceImage_.getState();i==en.LOADED||i==en.ERROR?this.reproject_():(this.sourceListenerKey_=$r(this.sourceImage_,Zi.CHANGE,function(e){let n=this.sourceImage_.getState();(n==en.LOADED||n==en.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){Fo(this.sourceListenerKey_),this.sourceListenerKey_=null}},Cwe=YX;var KX={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"},ZX=class extends Ls{constructor(i,e){super(i),this.image=e}},QX=class extends EM{constructor(i){super({attributions:i.attributions,projection:i.projection,state:i.state,interpolate:i.interpolate!==void 0?i.interpolate:!0}),this.on,this.once,this.un,this.loader=i.loader||null,this.resolutions_=i.resolutions!==void 0?i.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=i.loader?i.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(i){this.resolutions_=i}findNearestResolution(i){let e=this.getResolutions();if(e){let n=w1(e,i,0);i=e[n]}return i}getImage(i,e,n,o){let s=this.getProjection();if(!s||!o||qd(s,o))return s&&(o=s),this.getImageInternal(i,e,n,o);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&qd(this.reprojectedImage_.getProjection(),o)&&this.reprojectedImage_.getResolution()==e&&Dm(this.reprojectedImage_.getExtent(),i))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Cwe(s,o,i,e,n,(l,h,p)=>this.getImageInternal(l,h,p,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(i,e,n,o){if(this.loader){let s=yR(i,e,n,1),l=this.findNearestResolution(e);if(this.image&&(this.static_||this.wantedProjection_===o&&(this.wantedExtent_&&fc(this.wantedExtent_,s)||fc(this.image.getExtent(),s))&&(this.wantedResolution_&&_R(this.wantedResolution_)===l||_R(this.image.getResolution())===l)))return this.image;this.wantedProjection_=o,this.wantedExtent_=s,this.wantedResolution_=l,this.image=new T6(s,l,n,this.loader),this.image.addEventListener(Zi.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(i){let e=i.target,n;switch(e.getState()){case en.LOADING:this.loading=!0,n=KX.IMAGELOADSTART;break;case en.LOADED:this.loading=!1,n=KX.IMAGELOADEND;break;case en.ERROR:this.loading=!1,n=KX.IMAGELOADERROR;break;default:return}this.hasListener(n)&&this.dispatchEvent(new ZX(n,e))}};function vV(r,i){r.getImage().src=i}function yR(r,i,e,n){let o=i/e,s=gc(r),l=A_(or(r)/o,4),h=A_(is(r)/o,4),p=A_((n-1)*l/2,4),m=l+2*p,f=A_((n-1)*h/2,4),g=h+2*f;return Ug(s,o,0,[m,g])}var bV=QX;function N1(r,i){let e=[];Object.keys(i).forEach(function(o){i[o]!==null&&i[o]!==void 0&&e.push(o+"="+encodeURIComponent(i[o]))});let n=e.join("&");return r=r.replace(/[?&]$/,""),r+=r.includes("?")?"&":"?",r+n}var Swe="1.3.0",xwe=[101,101];function Iwe(r,i,e,n,o){o.WIDTH=e[0],o.HEIGHT=e[1];let s=n.getAxisOrientation(),l,h=pK(o.VERSION,"1.3")>=0;return o[h?"CRS":"SRS"]=n.getCode(),h&&s.substr(0,2)=="ne"?l=[i[1],i[0],i[3],i[2]]:l=i,o.BBOX=l.join(","),N1(r,o)}function EQe(r,i,e,n,o,s,l){s=Object.assign({REQUEST:"GetMap"},s);let h=i/e,p=[FE(or(r)/h,4),FE(is(r)/h,4)];if(e!=1)switch(l){case"geoserver":let f=90*e+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+f:s.FORMAT_OPTIONS="dpi:"+f;break;case"mapserver":s.MAP_RESOLUTION=90*e;break;case"carmentaserver":case"qgis":s.DPI=90*e;break;default:throw new Error("Unknown `serverType` configured")}return Iwe(o,r,p,n,s)}function Twe(r,i){return Object.assign({REQUEST:i,SERVICE:"WMS",VERSION:Swe,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},r)}function Awe(r){let i=r.hidpi===void 0?!0:r.hidpi,e=Vi(r.projection||"EPSG:3857"),n=r.ratio||1.5,o=r.load||M1;return(s,l,h)=>{s=yR(s,l,h,n),h!=1&&(!i||r.serverType===void 0)&&(h=1);let p=EQe(s,l,h,e,r.url,Twe(r.params,"GetMap"),r.serverType),m=new Image;return r.crossOrigin!==null&&(m.crossOrigin=r.crossOrigin),o(m,p).then(f=>({image:f,extent:s,pixelRatio:h}))}}function Ewe(r,i,e){if(r.url===void 0)return;let n=Vi(r.projection||"EPSG:3857"),o=Ug(i,e,0,xwe),s={QUERY_LAYERS:r.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(s,Twe(r.params,"GetFeatureInfo"),r.params);let l=m1((i[0]-o[0])/e,4),h=m1((o[3]-i[1])/e,4),p=pK(s.VERSION,"1.3")>=0;return s[p?"I":"X"]=l,s[p?"J":"Y"]=h,Iwe(r.url,o,xwe,n,s)}function Mwe(r,i){if(r.url===void 0)return;let e={SERVICE:"WMS",VERSION:Swe,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(r.params===void 0||r.params.LAYER===void 0){let n=r.params.LAYERS;if(!(!Array.isArray(n)||n.length===1))return;e.LAYER=n}if(i!==void 0){let n=Vi(r.projection||"EPSG:3857").getMetersPerUnit()||1,o=28e-5;e.SCALE=i*n/o}return Object.assign(e,r.params),N1(r.url,e)}var XX=class extends bV{constructor(i){i=i||{},super({attributions:i.attributions,interpolate:i.interpolate,projection:i.projection,resolutions:i.resolutions}),this.crossOrigin_=i.crossOrigin!==void 0?i.crossOrigin:null,this.url_=i.url,this.imageLoadFunction_=i.imageLoadFunction!==void 0?i.imageLoadFunction:vV,this.params_=Object.assign({},i.params),this.serverType_=i.serverType,this.hidpi_=i.hidpi!==void 0?i.hidpi:!0,this.renderedRevision_=0,this.ratio_=i.ratio!==void 0?i.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(i,e,n,o){let s=Vi(n),l=this.getProjection();l&&l!==s&&(e=MM(l,s,i,e),i=us(i,s,l));let h={url:this.url_,params:Xe(Xe({},this.params_),o),projection:l||s};return Ewe(h,i,e)}getLegendUrl(i,e){return Mwe({url:this.url_,params:Xe(Xe({},this.params_),e)},i)}getParams(){return this.params_}getImageInternal(i,e,n,o){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==o)&&(this.loaderProjection_=o,this.loader=Awe({crossOrigin:this.crossOrigin_,params:this.params_,projection:o,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,l)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,l),M1(s))})),super.getImageInternal(i,e,n,o))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(i){this.imageLoadFunction_=i,this.changed()}setUrl(i){i!=this.url_&&(this.url_=i,this.loader=null,this.changed())}updateParams(i){Object.assign(this.params_,i),this.changed()}changed(){this.image=null,super.changed()}},Dwe=XX;var JX=class extends PM{constructor(i){let e=i.requestEncoding!==void 0?i.requestEncoding:"KVP",n=i.tileGrid,o=i.urls;o===void 0&&i.url!==void 0&&(o=_V(i.url)),super({attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:i.interpolate,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:n,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,urls:o,wrapX:i.wrapX!==void 0?i.wrapX:!1,transition:i.transition,zDirection:i.zDirection}),this.version_=i.version!==void 0?i.version:"1.0.0",this.format_=i.format!==void 0?i.format:"image/jpeg",this.dimensions_=i.dimensions!==void 0?i.dimensions:{},this.layer_=i.layer,this.matrixSet_=i.matrixSet,this.style_=i.style,this.requestEncoding_=e,this.setKey(this.getKeyForDimensions_()),o&&o.length>0&&(this.tileUrlFunction=gV(o.map(this.createFromWMTSTemplate.bind(this))))}setUrls(i){this.urls=i;let e=i.join(`
`);this.setTileUrlFunction(gV(i.map(this.createFromWMTSTemplate.bind(this))),e)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){let i=this.urls?this.urls.slice(0):[];for(let e in this.dimensions_)i.push(e+"-"+this.dimensions_[e]);return i.join("/")}updateDimensions(i){Object.assign(this.dimensions_,i),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(i){let e=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e=="KVP"&&Object.assign(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),i=e=="KVP"?N1(i,n):i.replace(/\{(\w+?)\}/g,function(l,h){return h.toLowerCase()in n?n[h.toLowerCase()]:l});let o=this.tileGrid,s=this.dimensions_;return function(l,h,p){if(!l)return;let m={TileMatrix:o.getMatrixId(l[0]),TileCol:l[1],TileRow:l[2]};Object.assign(m,s);let f=i;return e=="KVP"?f=N1(f,m):f=f.replace(/\{(\w+?)\}/g,function(g,y){return m[y]}),f}}},kwe=JX;function Owe(r,i){let n=r.Contents.Layer?.find(function(te){return te.Identifier==i.layer});if(!n)return null;let o=r.Contents.TileMatrixSet,s;n.TileMatrixSetLink.length>1?"projection"in i?s=n.TileMatrixSetLink.findIndex(function(te){let Te=o.find(function(Me){return Me.Identifier==te.TileMatrixSet}).SupportedCRS,De=Vi(Te),Le=Vi(i.projection);return De&&Le?qd(De,Le):Te==i.projection}):s=n.TileMatrixSetLink.findIndex(function(te){return te.TileMatrixSet==i.matrixSet}):s=0,s<0&&(s=0);let l=n.TileMatrixSetLink[s].TileMatrixSet,h=n.TileMatrixSetLink[s].TileMatrixSetLimits,p=n.Format[0];"format"in i&&(p=i.format),s=n.Style.findIndex(function(te){return"style"in i?te.Title==i.style:te.isDefault}),s<0&&(s=0);let m=n.Style[s].Identifier,f={};"Dimension"in n&&n.Dimension.forEach(function(te,Se,Te){let De=te.Identifier,Le=te.Default;Le===void 0&&(Le=te.Value[0]),f[De]=Le});let y=r.Contents.TileMatrixSet.find(function(te){return te.Identifier==l}),_,w=y.SupportedCRS;if(w&&(_=Vi(w)),"projection"in i){let te=Vi(i.projection);te&&(!_||qd(te,_))&&(_=te)}let A=!1,k=_.getAxisOrientation().substr(0,2)=="ne",R=y.TileMatrix[0],$={MinTileCol:0,MinTileRow:0,MaxTileCol:R.MatrixWidth-1,MaxTileRow:R.MatrixHeight-1};if(h){$=h[h.length-1];let te=y.TileMatrix.find(Se=>Se.Identifier===$.TileMatrix||y.Identifier+":"+Se.Identifier===$.TileMatrix);te&&(R=te)}let H=R.ScaleDenominator*28e-5/_.getMetersPerUnit(),oe=k?[R.TopLeftCorner[1],R.TopLeftCorner[0]]:R.TopLeftCorner,se=R.TileWidth*H,ge=R.TileHeight*H,ue=y.BoundingBox;ue&&k&&(ue=[ue[1],ue[0],ue[3],ue[2]]);let pe=[oe[0]+se*$.MinTileCol,oe[1]-ge*(1+$.MaxTileRow),oe[0]+se*(1+$.MaxTileCol),oe[1]-ge*$.MinTileRow];if(ue!==void 0&&!fc(ue,pe)){let te=n.WGS84BoundingBox,Se=Vi("EPSG:4326").getExtent();if(pe=ue,te)A=te[0]===Se[0]&&te[2]===Se[2];else{let Te=Su(ue,y.SupportedCRS,"EPSG:4326");A=Te[0]-1e-10<=Se[0]&&Te[2]+1e-10>=Se[2]}}let Ce=mwe(y,pe,h),_e=[],de=i.requestEncoding;if(de=de!==void 0?de:"","OperationsMetadata"in r&&"GetTile"in r.OperationsMetadata){let te=r.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let Se=0,Te=te.length;Se<Te;++Se)if(te[Se].Constraint){let Le=te[Se].Constraint.find(function(Me){return Me.name=="GetEncoding"}).AllowedValues.Value;if(de===""&&(de=Le[0]),de==="KVP")Le.includes("KVP")&&_e.push(te[Se].href);else break}else te[Se].href&&(de="KVP",_e.push(te[Se].href))}return _e.length===0&&(de="REST",n.ResourceURL.forEach(function(te){te.resourceType==="tile"&&(p=te.format,_e.push(te.template))})),{urls:_e,layer:i.layer,matrixSet:l,format:p,projection:_,requestEncoding:de,tileGrid:Ce,style:m,dimensions:f,wrapX:A,crossOrigin:i.crossOrigin}}var eJ=class extends L1{constructor(i){super({attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,maxZoom:i.maxZoom!==void 0?i.maxZoom:18,minZoom:i.minZoom,projection:i.projection,transition:i.transition,wrapX:i.wrapX,zDirection:i.zDirection}),this.account_=i.account,this.mapId_=i.map||"",this.config_=i.config||{},this.templateCache_={},this.initializeMap_()}getConfig(){return this.config_}updateConfig(i){Object.assign(this.config_,i),this.initializeMap_()}setConfig(i){this.config_=i||{},this.initializeMap_()}initializeMap_(){let i=JSON.stringify(this.config_);if(this.templateCache_[i]){this.applyTemplate_(this.templateCache_[i]);return}let e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);let n=new XMLHttpRequest;n.addEventListener("load",this.handleInitResponse_.bind(this,i)),n.addEventListener("error",this.handleInitError_.bind(this)),n.open("POST",e),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify(this.config_))}handleInitResponse_(i,e){let n=e.target;if(!n.status||n.status>=200&&n.status<300){let o;try{o=JSON.parse(n.responseText)}catch{this.setState("error");return}this.applyTemplate_(o),this.templateCache_[i]=o,this.setState("ready")}else this.setState("error")}handleInitError_(i){this.setState("error")}applyTemplate_(i){let e="https://"+i.cdn_url.https+"/"+this.account_+"/api/v1/map/"+i.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)}},Pwe=eJ;function tJ(r,i,e,n,o,s){let l=o.getCode().split(/:(?=\d+$)/).pop(),h=e/n,p=[FE(or(i)/h,4),FE(is(i)/h,4)];s.SIZE=p[0]+","+p[1],s.BBOX=i.join(","),s.BBOXSR=l,s.IMAGESR=l,s.DPI=Math.round(s.DPI?s.DPI*n:90*n);let m=r.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return N1(m,s)}function Rwe(r){let i=r.load?r.load:M1,e=Vi(r.projection||"EPSG:3857");return function(n,o,s){s=r.hidpi?s:1;let l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,r.params),n=yR(n,o,s,r.ratio);let h=tJ(r.url,n,o,s,e,l),p=new Image;return r.crossOrigin!==null&&(p.crossOrigin=r.crossOrigin),i(p,h).then(m=>{let f=or(n)/m.width*s;return{image:m,extent:n,resolution:f,pixelRatio:s}})}}var iJ=class extends bV{constructor(i){i=i||{},super({attributions:i.attributions,interpolate:i.interpolate,projection:i.projection,resolutions:i.resolutions}),this.crossOrigin_=i.crossOrigin!==void 0?i.crossOrigin:null,this.hidpi_=i.hidpi!==void 0?i.hidpi:!0,this.url_=i.url,this.imageLoadFunction_=i.imageLoadFunction!==void 0?i.imageLoadFunction:vV,this.params_=Object.assign({},i.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=i.ratio!==void 0?i.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(i,e,n,o){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==o)&&(this.loaderProjection_=o,this.loader=Rwe({crossOrigin:this.crossOrigin_,params:this.params_,projection:o,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,l)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,l),M1(s))})),super.getImageInternal(i,e,n,o))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(i){this.imageLoadFunction_=i,this.changed()}setUrl(i){i!=this.url_&&(this.url_=i,this.loader=null,this.changed())}updateParams(i){Object.assign(this.params_,i),this.changed()}changed(){this.image=null,super.changed()}},Fwe=iJ;var nJ=class extends PM{constructor(i){i=i||{},super({attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:i.interpolate,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,zDirection:i.zDirection}),this.params_=Object.assign({},i.params),this.hidpi_=i.hidpi!==void 0?i.hidpi:!0,this.tmpExtent_=Fs(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let i=0,e=[];for(let n in this.params_)e[i++]=n+"-"+this.params_[n];return e.join("/")}getParams(){return this.params_}getRequestUrl_(i,e,n,o,s,l){let h=this.urls;if(!h)return;let p;if(h.length==1)p=h[0];else{let m=Pp(lV(i),h.length);p=h[m]}return tJ(p,n,(this.tileGrid||this.getTileGridForProjection(s)).getResolution(i[0]),o,s,l)}getTilePixelRatio(i){return this.hidpi_?i:1}updateParams(i){Object.assign(this.params_,i),this.setKey(this.getKeyForParams_())}tileUrlFunction(i,e,n){let o=this.getTileGrid();if(o||(o=this.getTileGridForProjection(n)),o.getResolutions().length<=i[0])return;e!=1&&!this.hidpi_&&(e=1);let s=o.getTileCoordExtent(i,this.tmpExtent_),l=Oa(o.getTileSize(i[0]),this.tmpSize);e!=1&&(l=C6(l,e,this.tmpSize));let h={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(h,this.params_),this.getRequestUrl_(i,l,s,e,n,h)}},Lwe=nJ;var rJ=class extends L1{constructor(i){i=i||{},super({opaque:!1,projection:i.projection,tileGrid:i.tileGrid,wrapX:i.wrapX!==void 0?i.wrapX:!0,zDirection:i.zDirection,url:i.template||"z:{z} x:{x} y:{y}",tileLoadFunction:(e,n)=>{let o=e.getTileCoord()[0],s=Oa(this.tileGrid.getTileSize(o)),l=Cs(s[0],s[1]);l.strokeStyle="grey",l.strokeRect(.5,.5,s[0]+.5,s[1]+.5),l.fillStyle="grey",l.strokeStyle="white",l.textAlign="center",l.textBaseline="middle",l.font="24px sans-serif",l.lineWidth=4,l.strokeText(n,s[0]/2,s[1]/2,s[0]),l.fillText(n,s[0]/2,s[1]/2,s[0]),e.setImage(l.canvas)}})}},Nwe=rJ;var oJ=class extends R1{constructor(i,e,n,o,s,l){super(i,e,l),this.extent=null,this.format_=o,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=n,this.key=n}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Gi.IDLE&&(this.setState(Gi.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(i,e){this.setFeatures(i)}onError(){this.setState(Gi.ERROR)}setFeatures(i){this.features_=i,this.setState(Gi.LOADED)}setLoader(i){this.loader_=i}},Bwe=oJ;var jwe=[],sJ=class extends R1{constructor(i,e,n,o){super(i,e,{transition:0}),this.context_={},this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=o.bind(void 0,this),this.wrappedTileCoord=n}getContext(i){let e=Xi(i);return e in this.context_||(this.context_[e]=Cs(1,1,jwe)),this.context_[e]}hasContext(i){return Xi(i)in this.context_}getImage(i){return this.hasContext(i)?this.getContext(i).canvas:null}getReplayState(i){let e=Xi(i);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}load(){this.getSourceTiles()}release(){for(let i in this.context_){let e=this.context_[i];Ov(e),jwe.push(e.canvas),delete this.context_[i]}super.release()}},Vwe=sJ;var aJ=class extends yV{constructor(i){let e=i.projection||"EPSG:3857",n=i.extent||OM(e),o=i.tileGrid||mV({extent:n,maxResolution:i.maxResolution,maxZoom:i.maxZoom!==void 0?i.maxZoom:22,minZoom:i.minZoom,tileSize:i.tileSize||512});super({attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,cacheSize:i.cacheSize,interpolate:!0,opaque:!1,projection:e,state:i.state,tileGrid:o,tileLoadFunction:i.tileLoadFunction?i.tileLoadFunction:MQe,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:i.wrapX===void 0?!0:i.wrapX,transition:i.transition,zDirection:i.zDirection===void 0?1:i.zDirection}),this.format_=i.format?i.format:null,this.sourceTileCache=new DM(this.tileCache.highWaterMark),this.overlaps_=i.overlaps==null?!0:i.overlaps,this.tileClass=i.tileClass?i.tileClass:Bwe,this.tileGrids_={}}getFeaturesInExtent(i){let e=[],n=this.tileCache;if(n.getCount()===0)return e;let o=aV(n.peekFirstKey())[0],s=this.tileGrid;return n.forEach(function(l){if(l.tileCoord[0]!==o||l.getState()!==Gi.LOADED)return;let h=l.getSourceTiles();for(let p=0,m=h.length;p<m;++p){let f=h[p],g=f.tileCoord;if(Wo(i,s.getTileCoordExtent(g))){let y=f.getFeatures();if(y)for(let _=0,w=y.length;_<w;++_){let A=y[_],k=A.getGeometry();Wo(i,k.getExtent())&&e.push(A)}}}}),e}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(i,e){let n=this.getTileCacheForProjection(i),o=Object.keys(e).reduce((s,l)=>{let h=dwe(l),p=n.peek(h);if(p){let m=p.sourceTiles;for(let f=0,g=m.length;f<g;++f)s[m[f].getKey()]=!0}return s},{});super.expireCache(i,e),this.sourceTileCache.expireCache(o)}getSourceTiles(i,e,n){if(n.getState()===Gi.IDLE){n.setState(Gi.LOADING);let o=n.wrappedTileCoord,s=this.getTileGridForProjection(e),l=s.getTileCoordExtent(o),h=o[0],p=s.getResolution(h);xd(l,-p,l);let m=this.tileGrid,f=m.getExtent();f&&ch(l,f,l);let g=m.getZForResolution(p,this.zDirection);m.forEachTileCoord(l,g,y=>{let _=this.tileUrlFunction(y,i,e),w=this.sourceTileCache.containsKey(_)?this.sourceTileCache.get(_):new this.tileClass(y,_?Gi.IDLE:Gi.EMPTY,_,this.format_,this.tileLoadFunction);n.sourceTiles.push(w);let A=w.getState();if(A<Gi.LOADED){let k=R=>{this.handleTileChange(R);let $=w.getState();if($===Gi.LOADED||$===Gi.ERROR){let H=w.getKey();H in n.errorTileKeys?w.getState()===Gi.LOADED&&delete n.errorTileKeys[H]:n.loadingSourceTiles--,$===Gi.ERROR?n.errorTileKeys[H]=!0:w.removeEventListener(Zi.CHANGE,k),n.loadingSourceTiles===0&&n.setState(Cd(n.errorTileKeys)?Gi.LOADED:Gi.ERROR)}};w.addEventListener(Zi.CHANGE,k),n.loadingSourceTiles++}A===Gi.IDLE&&(w.extent=m.getTileCoordExtent(y),w.projection=e,w.resolution=m.getResolution(y[0]),this.sourceTileCache.set(_,w),w.load())}),n.loadingSourceTiles||n.setState(n.sourceTiles.some(y=>y.getState()===Gi.ERROR)?Gi.ERROR:Gi.LOADED)}return n.sourceTiles}getTile(i,e,n,o,s){let l=W_(i,e,n),h=this.getKey(),p;if(this.tileCache.containsKey(l)&&(p=this.tileCache.get(l),p.key===h))return p;let m=[i,e,n],f=this.getTileCoordForTileUrlFunction(m,s),g=this.getTileGrid().getExtent(),y=this.getTileGridForProjection(s);if(f&&g){let A=y.getTileCoordExtent(f);xd(A,-y.getResolution(i),A),Wo(g,A)||(f=null)}let _=!0;if(f!==null){let A=this.tileGrid,k=y.getResolution(i),R=A.getZForResolution(k,1),$=y.getTileCoordExtent(f);xd($,-k,$),A.forEachTileCoord($,R,H=>{_=_&&!this.tileUrlFunction(H,o,s)})}let w=new Vwe(m,_?Gi.EMPTY:Gi.IDLE,f,this.getSourceTiles.bind(this,o,s));return w.key=h,p?(w.interimTile=p,w.refreshInterimChain(),this.tileCache.replace(l,w)):this.tileCache.set(l,w),w}getTileGridForProjection(i){let e=i.getCode(),n=this.tileGrids_[e];if(!n){let o=this.tileGrid,s=o.getResolutions().slice(),l=s.map(function(m,f){return o.getOrigin(f)}),h=s.map(function(m,f){return o.getTileSize(f)}),p=43;for(let m=s.length;m<p;++m)s.push(s[m-1]/2),l.push(l[m-1]),h.push(h[m-1]);n=new zv({extent:o.getExtent(),origins:l,resolutions:s,tileSizes:h}),this.tileGrids_[e]=n}return n}getTilePixelRatio(i){return i}getTilePixelSize(i,e,n){let o=this.getTileGridForProjection(n),s=Oa(o.getTileSize(i),this.tmpSize);return[Math.round(s[0]*e),Math.round(s[1]*e)]}updateCacheSize(i,e){super.updateCacheSize(i*2,e),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(e).highWaterMark}},lJ=aJ;function MQe(r,i){r.setLoader(function(e,n,o){AX(i,r.getFormat(),e,n,o,r.onLoad.bind(r),r.onError.bind(r))})}var cJ=class extends tp{constructor(i){super({attributions:i.attributions,wrapX:i.wrapX}),this.resolution=void 0,this.distance=i.distance!==void 0?i.distance:20,this.minDistance=i.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=i.geometryFunction||function(e){let n=e.getGeometry();return Nn(!n||n.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),n},this.createCustomCluster_=i.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(i.source||null)}clear(i){this.features.length=0,super.clear(i)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(i,e,n){this.source.loadFeatures(i,e,n),e!==this.resolution&&(this.resolution=e,this.refresh())}setDistance(i){this.updateDistance(i,this.minDistance)}setMinDistance(i){this.updateDistance(this.distance,i)}getMinDistance(){return this.minDistance}setSource(i){this.source&&this.source.removeEventListener(Zi.CHANGE,this.boundRefresh_),this.source=i,i&&i.addEventListener(Zi.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(i,e){let n=i===0?0:Math.min(e,i)/i,o=i!==this.distance||this.interpolationRatio!==n;this.distance=i,this.minDistance=e,this.interpolationRatio=n,o&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;let i=Fs(),e=this.distance*this.resolution,n=this.source.getFeatures(),o={};for(let s=0,l=n.length;s<l;s++){let h=n[s];if(!(Xi(h)in o)){let p=this.geometryFunction(h);if(p){let m=p.getCoordinates();T_(m,i),xd(i,e,i);let f=this.source.getFeaturesInExtent(i).filter(function(g){let y=Xi(g);return y in o?!1:(o[y]=!0,!0)});this.features.push(this.createCluster(f,i))}}}}createCluster(i,e){let n=[0,0];for(let h=i.length-1;h>=0;--h){let p=this.geometryFunction(i[h]);p?Rj(n,p.getCoordinates()):i.splice(h,1)}Fj(n,1/i.length);let o=gc(e),s=this.interpolationRatio,l=new Kn([n[0]*(1-s)+o[0]*s,n[1]*(1-s)+o[1]*s]);return this.createCustomCluster_?this.createCustomCluster_(l,i):new An({geometry:l,features:i})}},wV=cJ;var Is={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var dJ=class extends yc{constructor(i){super(),this.on,this.once,this.un,this.background_=i.background;let e=Object.assign({},i);typeof i.properties=="object"&&(delete e.properties,Object.assign(e,i.properties)),e[Is.OPACITY]=i.opacity!==void 0?i.opacity:1,Nn(typeof e[Is.OPACITY]=="number","Layer opacity must be a number"),e[Is.VISIBLE]=i.visible!==void 0?i.visible:!0,e[Is.Z_INDEX]=i.zIndex,e[Is.MAX_RESOLUTION]=i.maxResolution!==void 0?i.maxResolution:1/0,e[Is.MIN_RESOLUTION]=i.minResolution!==void 0?i.minResolution:0,e[Is.MIN_ZOOM]=i.minZoom!==void 0?i.minZoom:-1/0,e[Is.MAX_ZOOM]=i.maxZoom!==void 0?i.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(i){let e=this.state_||{layer:this,managed:i===void 0?!0:i},n=this.getZIndex();return e.opacity=ss(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=n===void 0&&!e.managed?1/0:n,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(i){return xn()}getLayerStatesArray(i){return xn()}getExtent(){return this.get(Is.EXTENT)}getMaxResolution(){return this.get(Is.MAX_RESOLUTION)}getMinResolution(){return this.get(Is.MIN_RESOLUTION)}getMinZoom(){return this.get(Is.MIN_ZOOM)}getMaxZoom(){return this.get(Is.MAX_ZOOM)}getOpacity(){return this.get(Is.OPACITY)}getSourceState(){return xn()}getVisible(){return this.get(Is.VISIBLE)}getZIndex(){return this.get(Is.Z_INDEX)}setBackground(i){this.background_=i,this.changed()}setExtent(i){this.set(Is.EXTENT,i)}setMaxResolution(i){this.set(Is.MAX_RESOLUTION,i)}setMinResolution(i){this.set(Is.MIN_RESOLUTION,i)}setMaxZoom(i){this.set(Is.MAX_ZOOM,i)}setMinZoom(i){this.set(Is.MIN_ZOOM,i)}setOpacity(i){Nn(typeof i=="number","Layer opacity must be a number"),this.set(Is.OPACITY,i)}setVisible(i){this.set(Is.VISIBLE,i)}setZIndex(i){this.set(Is.Z_INDEX,i)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},CV=dJ;var Du={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var Ws={ANIMATING:0,INTERACTING:1};var kf={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function uJ(r,i,e){return function(n,o,s,l,h){if(!n)return;if(!o&&!i)return n;let p=i?0:s[0]*o,m=i?0:s[1]*o,f=h?h[0]:0,g=h?h[1]:0,y=r[0]+p/2+f,_=r[2]-p/2+f,w=r[1]+m/2+g,A=r[3]-m/2+g;y>_&&(y=(_+y)/2,_=y),w>A&&(w=(A+w)/2,A=w);let k=ss(n[0],y,_),R=ss(n[1],w,A);if(l&&e&&o){let $=30*o;k+=-$*Math.log(1+Math.max(0,y-n[0])/$)+$*Math.log(1+Math.max(0,n[0]-_)/$),R+=-$*Math.log(1+Math.max(0,w-n[1])/$)+$*Math.log(1+Math.max(0,n[1]-A)/$)}return[k,R]}}function $we(r){return r}function hJ(r,i,e,n){let o=or(i)/e[0],s=is(i)/e[1];return n?Math.min(r,Math.max(o,s)):Math.min(r,Math.min(o,s))}function pJ(r,i,e){let n=Math.min(r,i),o=50;return n*=Math.log(1+o*Math.max(0,r/i-1))/o+1,e&&(n=Math.max(n,e),n/=Math.log(1+o*Math.max(0,e/r-1))/o+1),ss(n,e/2,i*2)}function Uwe(r,i,e,n){return i=i!==void 0?i:!0,function(o,s,l,h){if(o!==void 0){let p=r[0],m=r[r.length-1],f=e?hJ(p,e,l,n):p;if(h)return i?pJ(o,f,m):ss(o,m,f);let g=Math.min(f,o),y=Math.floor(w1(r,g,s));return r[y]>f&&y<r.length-1?r[y+1]:r[y]}}}function zwe(r,i,e,n,o,s){return n=n!==void 0?n:!0,e=e!==void 0?e:0,function(l,h,p,m){if(l!==void 0){let f=o?hJ(i,o,p,s):i;if(m)return n?pJ(l,f,e):ss(l,e,f);let g=1e-9,y=Math.ceil(Math.log(i/f)/Math.log(r)-g),_=-h*(.5-g)+.5,w=Math.min(f,l),A=Math.floor(Math.log(i/w)/Math.log(r)+_),k=Math.max(y,A),R=i/Math.pow(r,k);return ss(R,e,f)}}}function mJ(r,i,e,n,o){return e=e!==void 0?e:!0,function(s,l,h,p){if(s!==void 0){let m=n?hJ(r,n,h,o):r;return!e||!p?ss(s,i,m):pJ(s,m,i)}}}function RM(r){if(r!==void 0)return 0}function fJ(r){if(r!==void 0)return r}function Gwe(r){let i=2*Math.PI/r;return function(e,n){if(n)return e;if(e!==void 0)return e=Math.floor(e/i+.5)*i,e}}function Hwe(r){let i=r===void 0?Sf(5):r;return function(e,n){return n||e===void 0?e:Math.abs(e)<=i?0:e}}var gJ=0,yJ=class extends yc{constructor(i){super(),this.on,this.once,this.un,i=Object.assign({},i),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=jj(i.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,i.projection&&_K(),i.center&&(i.center=Ta(i.center,this.projection_)),i.extent&&(i.extent=dh(i.extent,this.projection_)),this.applyOptions_(i)}applyOptions_(i){let e=Object.assign({},i);for(let h in kf)delete e[h];this.setProperties(e,!0);let n=kQe(i);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=i.resolutions,this.padding_=i.padding,this.minZoom_=n.minZoom;let o=DQe(i),s=n.constraint,l=OQe(i);this.constraints_={center:o,resolution:s,rotation:l},this.setRotation(i.rotation!==void 0?i.rotation:0),this.setCenterInternal(i.center!==void 0?i.center:null),i.resolution!==void 0?this.setResolution(i.resolution):i.zoom!==void 0&&this.setZoom(i.zoom)}get padding(){return this.padding_}set padding(i){let e=this.padding_;this.padding_=i;let n=this.getCenterInternal();if(n){let o=i||[0,0,0,0];e=e||[0,0,0,0];let s=this.getResolution(),l=s/2*(o[3]-e[3]+e[1]-o[1]),h=s/2*(o[0]-e[0]+e[2]-o[2]);this.setCenterInternal([n[0]+l,n[1]-h])}}getUpdatedOptions_(i){let e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,i)}animate(i){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);let e=new Array(arguments.length);for(let n=0;n<e.length;++n){let o=arguments[n];o.center&&(o=Object.assign({},o),o.center=Ta(o.center,this.getProjection())),o.anchor&&(o=Object.assign({},o),o.anchor=Ta(o.anchor,this.getProjection())),e[n]=o}this.animateInternal.apply(this,e)}animateInternal(i){let e=arguments.length,n;e>1&&typeof arguments[e-1]=="function"&&(n=arguments[e-1],--e);let o=0;for(;o<e&&!this.isDef();++o){let f=arguments[o];f.center&&this.setCenterInternal(f.center),f.zoom!==void 0?this.setZoom(f.zoom):f.resolution&&this.setResolution(f.resolution),f.rotation!==void 0&&this.setRotation(f.rotation)}if(o===e){n&&xV(n,!0);return}let s=Date.now(),l=this.targetCenter_.slice(),h=this.targetResolution_,p=this.targetRotation_,m=[];for(;o<e;++o){let f=arguments[o],g={start:s,complete:!1,anchor:f.anchor,duration:f.duration!==void 0?f.duration:1e3,easing:f.easing||nwe,callback:n};if(f.center&&(g.sourceCenter=l,g.targetCenter=f.center.slice(),l=g.targetCenter),f.zoom!==void 0?(g.sourceResolution=h,g.targetResolution=this.getResolutionForZoom(f.zoom),h=g.targetResolution):f.resolution&&(g.sourceResolution=h,g.targetResolution=f.resolution,h=g.targetResolution),f.rotation!==void 0){g.sourceRotation=p;let y=Pp(f.rotation-p+Math.PI,2*Math.PI)-Math.PI;g.targetRotation=p+y,p=g.targetRotation}PQe(g)?g.complete=!0:s+=g.duration,m.push(g)}this.animations_.push(m),this.setHint(Ws.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Ws.ANIMATING]>0}getInteracting(){return this.hints_[Ws.INTERACTING]>0}cancelAnimations(){this.setHint(Ws.ANIMATING,-this.hints_[Ws.ANIMATING]);let i;for(let e=0,n=this.animations_.length;e<n;++e){let o=this.animations_[e];if(o[0].callback&&xV(o[0].callback,!1),!i)for(let s=0,l=o.length;s<l;++s){let h=o[s];if(!h.complete){i=h.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=i,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;let i=Date.now(),e=!1;for(let n=this.animations_.length-1;n>=0;--n){let o=this.animations_[n],s=!0;for(let l=0,h=o.length;l<h;++l){let p=o[l];if(p.complete)continue;let m=i-p.start,f=p.duration>0?m/p.duration:1;f>=1?(p.complete=!0,f=1):s=!1;let g=p.easing(f);if(p.sourceCenter){let y=p.sourceCenter[0],_=p.sourceCenter[1],w=p.targetCenter[0],A=p.targetCenter[1];this.nextCenter_=p.targetCenter;let k=y+g*(w-y),R=_+g*(A-_);this.targetCenter_=[k,R]}if(p.sourceResolution&&p.targetResolution){let y=g===1?p.targetResolution:p.sourceResolution+g*(p.targetResolution-p.sourceResolution);if(p.anchor){let _=this.getViewportSize_(this.getRotation()),w=this.constraints_.resolution(y,0,_,!0);this.targetCenter_=this.calculateCenterZoom(w,p.anchor)}this.nextResolution_=p.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(p.sourceRotation!==void 0&&p.targetRotation!==void 0){let y=g===1?Pp(p.targetRotation+Math.PI,2*Math.PI)-Math.PI:p.sourceRotation+g*(p.targetRotation-p.sourceRotation);if(p.anchor){let _=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(_,p.anchor)}this.nextRotation_=p.targetRotation,this.targetRotation_=y}if(this.applyTargetState_(!0),e=!0,!p.complete)break}if(s){this.animations_[n]=null,this.setHint(Ws.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;let l=o[0].callback;l&&xV(l,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(i,e){let n,o=this.getCenterInternal();return o!==void 0&&(n=[o[0]-e[0],o[1]-e[1]],NE(n,i-this.getRotation()),Rj(n,e)),n}calculateCenterZoom(i,e){let n,o=this.getCenterInternal(),s=this.getResolution();if(o!==void 0&&s!==void 0){let l=e[0]-i*(e[0]-o[0])/s,h=e[1]-i*(e[1]-o[1])/s;n=[l,h]}return n}getViewportSize_(i){let e=this.viewportSize_;if(i){let n=e[0],o=e[1];return[Math.abs(n*Math.cos(i))+Math.abs(o*Math.sin(i)),Math.abs(n*Math.sin(i))+Math.abs(o*Math.cos(i))]}return e}setViewportSize(i){this.viewportSize_=Array.isArray(i)?i.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){let i=this.getCenterInternal();return i&&Iv(i,this.getProjection())}getCenterInternal(){return this.get(kf.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(i){return i!==void 0?(i[0]=this.hints_[0],i[1]=this.hints_[1],i):this.hints_.slice()}calculateExtent(i){let e=this.calculateExtentInternal(i);return E_(e,this.getProjection())}calculateExtentInternal(i){i=i||this.getViewportSizeMinusPadding_();let e=this.getCenterInternal();Nn(e,"The view center is not defined");let n=this.getResolution();Nn(n!==void 0,"The view resolution is not defined");let o=this.getRotation();return Nn(o!==void 0,"The view rotation is not defined"),Ug(e,n,o,i)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(i){this.applyOptions_(this.getUpdatedOptions_({maxZoom:i}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(i){this.applyOptions_(this.getUpdatedOptions_({minZoom:i}))}setConstrainResolution(i){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:i}))}getProjection(){return this.projection_}getResolution(){return this.get(kf.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(i,e){return this.getResolutionForExtentInternal(dh(i,this.getProjection()),e)}getResolutionForExtentInternal(i,e){e=e||this.getViewportSizeMinusPadding_();let n=or(i)/e[0],o=is(i)/e[1];return Math.max(n,o)}getResolutionForValueFunction(i){i=i||2;let e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(e/n)/Math.log(i);return function(s){return e/Math.pow(i,s*o)}}getRotation(){return this.get(kf.ROTATION)}getValueForResolutionFunction(i){let e=Math.log(i||2),n=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,s=Math.log(n/o)/e;return function(l){return Math.log(n/l)/e/s}}getViewportSizeMinusPadding_(i){let e=this.getViewportSize_(i),n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){let i=this.getProjection(),e=this.getResolution(),n=this.getRotation(),o=this.getCenterInternal(),s=this.padding_;if(s){let l=this.getViewportSizeMinusPadding_();o=_J(o,this.getViewportSize_(),[l[0]/2+s[3],l[1]/2+s[0]],e,n)}return{center:o.slice(0),projection:i!==void 0?i:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let i,e=this.getResolution();return e!==void 0&&(i=this.getZoomForResolution(e)),i}getZoomForResolution(i){let e=this.minZoom_||0,n,o;if(this.resolutions_){let s=w1(this.resolutions_,i,1);e=s,n=this.resolutions_[s],s==this.resolutions_.length-1?o=2:o=n/this.resolutions_[s+1]}else n=this.maxResolution_,o=this.zoomFactor_;return e+Math.log(n/i)/Math.log(o)}getResolutionForZoom(i){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;let e=ss(Math.floor(i),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,ss(i-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,i-this.minZoom_)}fit(i,e){let n;if(Nn(Array.isArray(i)||typeof i.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(i)){Nn(!km(i),"Cannot fit empty extent provided as `geometry`");let o=dh(i,this.getProjection());n=wZ(o)}else if(i.getType()==="Circle"){let o=dh(i.getExtent(),this.getProjection());n=wZ(o),n.rotate(this.getRotation(),gc(o))}else{let o=Kc();o?n=i.clone().transform(o,this.getProjection()):n=i}this.fitInternal(n,e)}rotatedExtentForGeometry(i){let e=this.getRotation(),n=Math.cos(e),o=Math.sin(-e),s=i.getFlatCoordinates(),l=i.getStride(),h=1/0,p=1/0,m=-1/0,f=-1/0;for(let g=0,y=s.length;g<y;g+=l){let _=s[g]*n-s[g+1]*o,w=s[g]*o+s[g+1]*n;h=Math.min(h,_),p=Math.min(p,w),m=Math.max(m,_),f=Math.max(f,w)}return[h,p,m,f]}fitInternal(i,e){e=e||{};let n=e.size;n||(n=this.getViewportSizeMinusPadding_());let o=e.padding!==void 0?e.padding:[0,0,0,0],s=e.nearest!==void 0?e.nearest:!1,l;e.minResolution!==void 0?l=e.minResolution:e.maxZoom!==void 0?l=this.getResolutionForZoom(e.maxZoom):l=0;let h=this.rotatedExtentForGeometry(i),p=this.getResolutionForExtentInternal(h,[n[0]-o[1]-o[3],n[1]-o[0]-o[2]]);p=isNaN(p)?l:Math.max(p,l),p=this.getConstrainedResolution(p,s?0:1);let m=this.getRotation(),f=Math.sin(m),g=Math.cos(m),y=gc(h);y[0]+=(o[1]-o[3])/2*p,y[1]+=(o[0]-o[2])/2*p;let _=y[0]*g-y[1]*f,w=y[1]*g+y[0]*f,A=this.getConstrainedCenter([_,w],p),k=e.callback?e.callback:Qg;e.duration!==void 0?this.animateInternal({resolution:p,center:A,duration:e.duration,easing:e.easing},k):(this.targetResolution_=p,this.targetCenter_=A,this.applyTargetState_(!1,!0),xV(k,!0))}centerOn(i,e,n){this.centerOnInternal(Ta(i,this.getProjection()),e,n)}centerOnInternal(i,e,n){this.setCenterInternal(_J(i,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(i,e,n,o){let s,l=this.padding_;if(l&&i){let h=this.getViewportSizeMinusPadding_(-n),p=_J(i,o,[h[0]/2+l[3],h[1]/2+l[0]],e,n);s=[i[0]-p[0],i[1]-p[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(i){let e=Iv(this.targetCenter_,this.getProjection());this.setCenter([e[0]+i[0],e[1]+i[1]])}adjustCenterInternal(i){let e=this.targetCenter_;this.setCenterInternal([e[0]+i[0],e[1]+i[1]])}adjustResolution(i,e){e=e&&Ta(e,this.getProjection()),this.adjustResolutionInternal(i,e)}adjustResolutionInternal(i,e){let n=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*i,0,o,n);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=i,this.applyTargetState_()}adjustZoom(i,e){this.adjustResolution(Math.pow(this.zoomFactor_,-i),e)}adjustRotation(i,e){e&&(e=Ta(e,this.getProjection())),this.adjustRotationInternal(i,e)}adjustRotationInternal(i,e){let n=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+i,n);e&&(this.targetCenter_=this.calculateCenterRotate(o,e)),this.targetRotation_+=i,this.applyTargetState_()}setCenter(i){this.setCenterInternal(i&&Ta(i,this.getProjection()))}setCenterInternal(i){this.targetCenter_=i,this.applyTargetState_()}setHint(i,e){return this.hints_[i]+=e,this.changed(),this.hints_[i]}setResolution(i){this.targetResolution_=i,this.applyTargetState_()}setRotation(i){this.targetRotation_=i,this.applyTargetState_()}setZoom(i){this.setResolution(this.getResolutionForZoom(i))}applyTargetState_(i,e){let n=this.getAnimating()||this.getInteracting()||e,o=this.constraints_.rotation(this.targetRotation_,n),s=this.getViewportSize_(o),l=this.constraints_.resolution(this.targetResolution_,0,s,n),h=this.constraints_.center(this.targetCenter_,l,s,n,this.calculateCenterShift(this.targetCenter_,l,o,s));this.get(kf.ROTATION)!==o&&this.set(kf.ROTATION,o),this.get(kf.RESOLUTION)!==l&&(this.set(kf.RESOLUTION,l),this.set("zoom",this.getZoom(),!0)),(!h||!this.get(kf.CENTER)||!Jh(this.get(kf.CENTER),h))&&this.set(kf.CENTER,h),this.getAnimating()&&!i&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(i,e,n){i=i!==void 0?i:200;let o=e||0,s=this.constraints_.rotation(this.targetRotation_),l=this.getViewportSize_(s),h=this.constraints_.resolution(this.targetResolution_,o,l),p=this.constraints_.center(this.targetCenter_,h,l,!1,this.calculateCenterShift(this.targetCenter_,h,s,l));if(i===0&&!this.cancelAnchor_){this.targetResolution_=h,this.targetRotation_=s,this.targetCenter_=p,this.applyTargetState_();return}n=n||(i===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==h||this.getRotation()!==s||!this.getCenterInternal()||!Jh(this.getCenterInternal(),p))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:p,resolution:h,duration:i,easing:Nc,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Ws.INTERACTING,1)}endInteraction(i,e,n){n=n&&Ta(n,this.getProjection()),this.endInteractionInternal(i,e,n)}endInteractionInternal(i,e,n){this.getInteracting()&&(this.setHint(Ws.INTERACTING,-1),this.resolveConstraints(i,e,n))}getConstrainedCenter(i,e){let n=this.getViewportSize_(this.getRotation());return this.constraints_.center(i,e||this.getResolution(),n)}getConstrainedZoom(i,e){let n=this.getResolutionForZoom(i);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(i,e){e=e||0;let n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(i,e,n)}};function xV(r,i){setTimeout(function(){r(i)},0)}function DQe(r){if(r.extent!==void 0){let e=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return uJ(r.extent,r.constrainOnlyCenter,e)}let i=jj(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&i.isGlobal()){let e=i.getExtent().slice();return e[0]=-1/0,e[2]=1/0,uJ(e,!1,!1)}return $we}function kQe(r){let i,e,n,l=r.minZoom!==void 0?r.minZoom:gJ,h=r.maxZoom!==void 0?r.maxZoom:28,p=r.zoomFactor!==void 0?r.zoomFactor:2,m=r.multiWorld!==void 0?r.multiWorld:!1,f=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,g=r.showFullExtent!==void 0?r.showFullExtent:!1,y=jj(r.projection,"EPSG:3857"),_=y.getExtent(),w=r.constrainOnlyCenter,A=r.extent;if(!m&&!A&&y.isGlobal()&&(w=!1,A=_),r.resolutions!==void 0){let k=r.resolutions;e=k[l],n=k[h]!==void 0?k[h]:k[k.length-1],r.constrainResolution?i=Uwe(k,f,!w&&A,g):i=mJ(e,n,f,!w&&A,g)}else{let R=(_?Math.max(or(_),is(_)):360*Dp.degrees/y.getMetersPerUnit())/256/Math.pow(2,gJ),$=R/Math.pow(2,28-gJ);e=r.maxResolution,e!==void 0?l=0:e=R/Math.pow(p,l),n=r.minResolution,n===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?n=e/Math.pow(p,h):n=R/Math.pow(p,h):n=$),h=l+Math.floor(Math.log(e/n)/Math.log(p)),n=e/Math.pow(p,h-l),r.constrainResolution?i=zwe(p,e,n,f,!w&&A,g):i=mJ(e,n,f,!w&&A,g)}return{constraint:i,maxResolution:e,minResolution:n,minZoom:l,zoomFactor:p}}function OQe(r){if(r.enableRotation!==void 0?r.enableRotation:!0){let e=r.constrainRotation;return e===void 0||e===!0?Hwe():e===!1?fJ:typeof e=="number"?Gwe(e):fJ}return RM}function PQe(r){return!(r.sourceCenter&&r.targetCenter&&!Jh(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function _J(r,i,e,n,o){let s=Math.cos(-o),l=Math.sin(-o),h=r[0]*s-r[1]*l,p=r[1]*s+r[0]*l;h+=(i[0]/2-e[0])*n,p+=(e[1]-i[1]/2)*n,l=-l;let m=h*s-p*l,f=p*s+h*l;return[m,f]}var Rm=yJ;var vJ=class extends CV{constructor(i){let e=Object.assign({},i);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,i.render&&(this.render=i.render),i.map&&this.setMap(i.map),this.addChangeListener(Is.SOURCE,this.handleSourcePropertyChange_);let n=i.source?i.source:null;this.setSource(n)}getLayersArray(i){return i=i||[],i.push(this),i}getLayerStatesArray(i){return i=i||[],i.push(this.getLayerState()),i}getSource(){return this.get(Is.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){let i=this.getSource();return i?i.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Fo(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;let i=this.getSource();i&&(this.sourceChangeKey_=$r(i,Zi.CHANGE,this.handleSourceChange_,this),i.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(i){return this.renderer_?this.renderer_.getFeatures(i):Promise.resolve([])}getData(i){return!this.renderer_||!this.rendered?null:this.renderer_.getData(i)}isVisible(i){let e,n=this.getMapInternal();!i&&n&&(i=n.getView()),i instanceof Rm?e={viewState:i.getState(),extent:i.calculateExtent()}:e=i,!e.layerStatesArray&&n&&(e.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let o;e.layerStatesArray?o=e.layerStatesArray.find(l=>l.layer===this):o=this.getLayerState();let s=this.getExtent();return vR(o,e.viewState)&&(!s||Wo(s,e.extent))}getAttributions(i){if(!this.isVisible(i))return[];let e,n=this.getSource();if(n&&(e=n.getAttributions()),!e)return[];let o=i instanceof Rm?i.getViewStateAndExtent():i,s=e(o);return Array.isArray(s)||(s=[s]),s}render(i,e){let n=this.getRenderer();return n.prepareFrame(i)?(this.rendered=!0,n.renderFrame(i,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(i,e){}renderDeferred(i){let e=this.getRenderer();e&&e.renderDeferred(i)}setMapInternal(i){i||this.unrender(),this.set(Is.MAP,i)}getMapInternal(){return this.get(Is.MAP)}setMap(i){this.mapPrecomposeKey_&&(Fo(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),i||this.changed(),this.mapRenderKey_&&(Fo(this.mapRenderKey_),this.mapRenderKey_=null),i&&(this.mapPrecomposeKey_=$r(i,Du.PRECOMPOSE,function(e){let o=e.frameState.layerStatesArray,s=this.getLayerState(!1);Nn(!o.some(function(l){return l.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),o.push(s)},this),this.mapRenderKey_=$r(this,Zi.CHANGE,i.render,i),this.changed())}setSource(i){this.set(Is.SOURCE,i)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function vR(r,i){if(!r.visible)return!1;let e=i.resolution;if(e<r.minResolution||e>=r.maxResolution)return!1;let n=i.zoom;return n>r.minZoom&&n<=r.maxZoom}var Hv=vJ;var n1e=ld(iV(),1);var FM=0,LM=0,Kl=1<<FM++,Wn=1<<FM++,Gp=1<<FM++,Jc=1<<FM++,q_=1<<FM++,wh=Math.pow(2,FM)-1,qwe={[Kl]:"boolean",[Wn]:"number",[Gp]:"string",[Jc]:"color",[q_]:"number[]"},RQe=Object.keys(qwe).map(Number).sort(gh);function ku(r){let i=[];for(let e of RQe)FQe(r,e)&&i.push(qwe[e]);return i.length===0?"untyped":i.length<3?i.join(" or "):i.slice(0,-1).join(", ")+", or "+i[i.length-1]}function FQe(r,i){return(r&i)===i}function e0(r,i){return!!(r&i)}function SV(r,i){return r===i}var Jg=class{constructor(i,e){this.type=i,this.value=e}},bJ=class{constructor(i,e,...n){this.type=i,this.operator=e,this.args=n}};function wJ(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function LQe(r){switch(r){case"string":return Gp;case"color":return Jc;case"number":return Wn;case"boolean":return Kl;case"number[]":return q_;default:throw new Error(`Unrecognized type hint: ${r}`)}}function Ts(r,i,e){switch(typeof r){case"boolean":return new Jg(Kl,r);case"number":return new Jg(Wn,r);case"string":{let o=Gp;return Aye(r)&&(o|=Jc),SV(o&e,LM)||(o&=e),new Jg(o,r)}default:}if(!Array.isArray(r))throw new Error("Expression must be an array or a primitive value");if(r.length===0)throw new Error("Empty expression");if(typeof r[0]=="string")return YQe(r,i,e);for(let o of r)if(typeof o!="number")throw new Error("Expected an array of numbers");let n=q_;return(r.length===3||r.length===4)&&(n|=Jc),e&&(n&=e),new Jg(n,r)}var gi={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},NQe={[gi.Get]:Qr(([r,i])=>i!==void 0?LQe(i.value):wh,Ao(1,2),BQe),[gi.Var]:Qr(([r])=>r.type,Ao(1,1),jQe),[gi.Id]:Qr(Wn|Gp,bR,VQe),[gi.Concat]:Qr(Gp,Ao(2,1/0),ps(wh)),[gi.GeometryType]:Qr(Gp,bR,$Qe),[gi.Resolution]:Qr(Wn,bR),[gi.Zoom]:Qr(Wn,bR),[gi.Time]:Qr(Wn,bR),[gi.Any]:Qr(Kl,Ao(2,1/0),ps(Kl)),[gi.All]:Qr(Kl,Ao(2,1/0),ps(Kl)),[gi.Not]:Qr(Kl,Ao(1,1),ps(Kl)),[gi.Equal]:Qr(Kl,Ao(2,2),ps(wh),B1),[gi.NotEqual]:Qr(Kl,Ao(2,2),ps(wh),B1),[gi.GreaterThan]:Qr(Kl,Ao(2,2),ps(wh),B1),[gi.GreaterThanOrEqualTo]:Qr(Kl,Ao(2,2),ps(wh),B1),[gi.LessThan]:Qr(Kl,Ao(2,2),ps(wh),B1),[gi.LessThanOrEqualTo]:Qr(Kl,Ao(2,2),ps(wh),B1),[gi.Multiply]:Qr(r=>{let i=Wn|Jc;for(let e=0;e<r.length;e++)i&=r[e].type;return i},Ao(2,1/0),ps(Wn|Jc),B1),[gi.Coalesce]:Qr(r=>{let i=wh;for(let e=1;e<r.length;e+=2)i&=r[e].type;return i&=r[r.length-1].type,i},Ao(2,1/0),ps(wh),B1),[gi.Divide]:Qr(Wn,Ao(2,2),ps(Wn)),[gi.Add]:Qr(Wn,Ao(2,1/0),ps(Wn)),[gi.Subtract]:Qr(Wn,Ao(2,2),ps(Wn)),[gi.Clamp]:Qr(Wn,Ao(3,3),ps(Wn)),[gi.Mod]:Qr(Wn,Ao(2,2),ps(Wn)),[gi.Pow]:Qr(Wn,Ao(2,2),ps(Wn)),[gi.Abs]:Qr(Wn,Ao(1,1),ps(Wn)),[gi.Floor]:Qr(Wn,Ao(1,1),ps(Wn)),[gi.Ceil]:Qr(Wn,Ao(1,1),ps(Wn)),[gi.Round]:Qr(Wn,Ao(1,1),ps(Wn)),[gi.Sin]:Qr(Wn,Ao(1,1),ps(Wn)),[gi.Cos]:Qr(Wn,Ao(1,1),ps(Wn)),[gi.Atan]:Qr(Wn,Ao(1,2),ps(Wn)),[gi.Sqrt]:Qr(Wn,Ao(1,1),ps(Wn)),[gi.Match]:Qr(r=>{let i=wh;for(let e=2;e<r.length;e+=2)i&=r[e].type;return i&=r[r.length-1].type,i},Ao(4,1/0),Wwe,zQe),[gi.Between]:Qr(Kl,Ao(3,3),ps(Wn)),[gi.Interpolate]:Qr(r=>{let i=Jc|Wn;for(let e=3;e<r.length;e+=2)i&=r[e].type;return i},Ao(6,1/0),Wwe,GQe),[gi.Case]:Qr(r=>{let i=wh;for(let e=1;e<r.length;e+=2)i&=r[e].type;return i&=r[r.length-1].type,i},Ao(3,1/0),UQe,HQe),[gi.In]:Qr(Kl,Ao(2,2),WQe),[gi.Number]:Qr(Wn,Ao(1,1/0),ps(wh)),[gi.String]:Qr(Gp,Ao(1,1/0),ps(wh)),[gi.Array]:Qr(r=>r.length===3||r.length===4?q_|Jc:q_,Ao(1,1/0),ps(Wn)),[gi.Color]:Qr(Jc,Ao(1,4),ps(Wn)),[gi.Band]:Qr(Wn,Ao(1,3),ps(Wn)),[gi.Palette]:Qr(Jc,Ao(2,2),qQe),[gi.ToString]:Qr(Gp,Ao(1,1),ps(Kl|Wn|Gp|Jc))};function BQe(r,i){let e=Ts(r[1],i);if(!(e instanceof Jg))throw new Error("Expected a literal argument for get operation");if(typeof e.value!="string")throw new Error("Expected a string argument for get operation");if(i.properties.add(e.value),r.length===3){let n=Ts(r[2],i);return[e,n]}return[e]}function jQe(r,i,e,n){let o=r[1];if(typeof o!="string")throw new Error("Expected a string argument for var operation");if(i.variables.add(o),!("variables"in i.style)||i.style.variables[o]===void 0)return[new Jg(wh,o)];let s=i.style.variables[o],l=Ts(s,i);if(l.value=o,n&&!e0(n,l.type))throw new Error(`The variable ${o} has type ${ku(l.type)} but the following type was expected: ${ku(n)}`);return[l]}function VQe(r,i){i.featureId=!0}function $Qe(r,i){i.geometryType=!0}function bR(r,i){let e=r[0];if(r.length!==1)throw new Error(`Expected no arguments for ${e} operation`);return[]}function Ao(r,i){return function(e,n){let o=e[0],s=e.length-1;if(r===i){if(s!==r){let l=r===1?"":"s";throw new Error(`Expected ${r} argument${l} for ${o}, got ${s}`)}}else if(s<r||s>i){let l=i===1/0?`${r} or more`:`${r} to ${i}`;throw new Error(`Expected ${l} arguments for ${o}, got ${s}`)}}}function ps(r){return function(i,e){let n=i[0],o=i.length-1,s=new Array(o);for(let l=0;l<o;++l){let h=Ts(i[l+1],e);if(!e0(r,h.type)){let p=ku(r),m=ku(h.type);throw new Error(`Unexpected type for argument ${l} of ${n} operation, got ${p} but expected ${m}`)}h.type&=r,s[l]=h}return s}}function B1(r,i,e){let n=r[0],o=r.length-1,s=wh;for(let h=0;h<e.length;++h)s&=e[h].type;if(s===LM)throw new Error(`No common type could be found for arguments of ${n} operation`);let l=new Array(o);for(let h=0;h<o;++h)l[h]=Ts(r[h+1],i,s);return l}function UQe(r,i){let e=r[0],n=r.length-1;if(n%2===0)throw new Error(`An odd amount of arguments was expected for operation ${e}, got ${JSON.stringify(n)} instead`)}function Wwe(r,i){let e=r[0],n=r.length-1;if(n%2===1)throw new Error(`An even amount of arguments was expected for operation ${e}, got ${JSON.stringify(n)} instead`)}function zQe(r,i,e,n){let o=r.length-1,l=Ts(r[1],i).type,h=Ts(r[r.length-1],i),p=n!==void 0?n&h.type:h.type,m=new Array(o-2);for(let g=0;g<o-2;g+=2){let y=Ts(r[g+2],i),_=Ts(r[g+3],i);l&=y.type,p&=_.type,m[g]=y,m[g+1]=_}let f=Gp|Wn|Kl;if(!e0(f,l))throw new Error(`Expected an input of type ${ku(f)} for the interpolate operation, got ${ku(l)} instead`);if(SV(p,LM))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(r));for(let g=0;g<o-2;g+=2){let y=Ts(r[g+2],i,l),_=Ts(r[g+3],i,p);m[g]=y,m[g+1]=_}return[Ts(r[1],i,l),...m,Ts(r[r.length-1],i,p)]}function GQe(r,i,e,n){let o=r[1],s;switch(o[0]){case"linear":s=1;break;case"exponential":if(s=o[1],typeof s!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(s)} instead`);break;default:s=null}if(!s)throw new Error(`Invalid interpolation type: ${JSON.stringify(o)}`);s=Ts(s,i);let l=Ts(r[2],i);if(!e0(Wn,l.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${ku(l.type)} instead`);l=Ts(r[2],i,Wn);let h=new Array(r.length-3);for(let p=0;p<h.length;p+=2){let m=Ts(r[p+3],i);if(!e0(Wn,m.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${ku(m.type)} at position ${p+2} instead`);let f=Ts(r[p+4],i);if(!e0(Wn|Jc,f.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${ku(f.type)} at position ${p+3} instead`);m=Ts(r[p+3],i,Wn),f=Ts(r[p+4],i,Wn|Jc),h[p]=m,h[p+1]=f}return[s,l,...h]}function HQe(r,i,e,n){let o=Ts(r[r.length-1],i),s=n!==void 0?n&o.type:o.type,l=new Array(r.length-1);for(let h=0;h<l.length-1;h+=2){let p=Ts(r[h+1],i),m=Ts(r[h+2],i);if(!e0(Kl,p.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${ku(p.type)} at position ${h} instead`);s&=m.type,l[h]=p,l[h+1]=m}if(SV(s,LM))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(r));for(let h=0;h<l.length-1;h+=2)l[h+1]=Ts(r[h+2],i,s);return l[l.length-1]=Ts(r[r.length-1],i,s),l}function WQe(r,i){let e=r[2];if(!Array.isArray(e))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof e[0]=="string"){if(e[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(e[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');e=e[1]}let n=Gp|Wn,o=new Array(e.length);for(let l=0;l<o.length;l++){let h=Ts(e[l],i);n&=h.type,o[l]=h}if(SV(n,LM))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(r));return[Ts(r[1],i,n),...o]}function qQe(r,i){let e=Ts(r[1],i,Wn);if(e.type!==Wn)throw new Error(`The first argument of palette must be an number, got ${ku(e.type)} instead`);let n=r[2];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");let o=new Array(n.length);for(let s=0;s<o.length;s++){let l=Ts(n[s],i,Jc);if(!(l instanceof Jg))throw new Error(`The palette color at index ${s} must be a literal value`);if(!e0(l.type,Jc))throw new Error(`The palette color at index ${s} should be of type color, got ${ku(l.type)} instead`);o[s]=l}return[e,...o]}function Qr(r,...i){return function(e,n,o){let s=e[0],l=[];for(let p=0;p<i.length;p++)l=i[p](e,n,l,o)||l;let h=typeof r=="function"?r(l):r;if(o!==void 0){if(!e0(h,o))throw new Error(`The following expression was expected to return ${ku(o)}, but returns ${ku(h)} instead: ${JSON.stringify(e)}`);h&=o}if(h===LM)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(e)}`);return new bJ(h,s,...l)}}function YQe(r,i,e){let n=r[0],o=NQe[n];if(!o)throw new Error(`Unknown operator: ${n}`);return o(r,i,e)}function CJ(r){if(!r)return"";let i=r.getType();switch(i){case"Point":case"LineString":case"Polygon":return i;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return i.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return CJ(r.getGeometries()[0]);default:return""}}function xJ(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Y_(r,i,e){let n=Ts(r,e);if(!e0(i,n.type)){let o=ku(i),s=ku(n.type);throw new Error(`Expected expression to be of type ${o}, got ${s}`)}return t0(n,e)}function t0(r,i){if(r instanceof Jg){if(r.type===Jc&&typeof r.value=="string"){let n=I6(r.value);return function(){return n}}return function(){return r.value}}let e=r.operator;switch(e){case gi.Number:case gi.String:case gi.Coalesce:return KQe(r,i);case gi.Get:case gi.Var:return ZQe(r,i);case gi.Id:return n=>n.featureId;case gi.GeometryType:return n=>n.geometryType;case gi.Concat:{let n=r.args.map(o=>t0(o,i));return o=>"".concat(...n.map(s=>s(o).toString()))}case gi.Resolution:return n=>n.resolution;case gi.Any:case gi.All:case gi.Between:case gi.In:case gi.Not:return XQe(r,i);case gi.Equal:case gi.NotEqual:case gi.LessThan:case gi.LessThanOrEqualTo:case gi.GreaterThan:case gi.GreaterThanOrEqualTo:return QQe(r,i);case gi.Multiply:case gi.Divide:case gi.Add:case gi.Subtract:case gi.Clamp:case gi.Mod:case gi.Pow:case gi.Abs:case gi.Floor:case gi.Ceil:case gi.Round:case gi.Sin:case gi.Cos:case gi.Atan:case gi.Sqrt:return JQe(r,i);case gi.Case:return eXe(r,i);case gi.Match:return tXe(r,i);case gi.Interpolate:return iXe(r,i);case gi.ToString:return nXe(r,i);default:throw new Error(`Unsupported operator ${e}`)}}function KQe(r,i){let e=r.operator,n=r.args.length,o=new Array(n);for(let s=0;s<n;++s)o[s]=t0(r.args[s],i);switch(e){case gi.Coalesce:return s=>{for(let l=0;l<n;++l){let h=o[l](s);if(typeof h<"u"&&h!==null)return h}throw new Error("Expected one of the values to be non-null")};case gi.Number:case gi.String:return s=>{for(let l=0;l<n;++l){let h=o[l](s);if(typeof h===e)return h}throw new Error(`Expected one of the values to be a ${e}`)};default:throw new Error(`Unsupported assertion operator ${e}`)}}function ZQe(r,i){let n=r.args[0].value;switch(r.operator){case gi.Get:return o=>o.properties[n];case gi.Var:return o=>o.variables[n];default:throw new Error(`Unsupported accessor operator ${r.operator}`)}}function QQe(r,i){let e=r.operator,n=t0(r.args[0],i),o=t0(r.args[1],i);switch(e){case gi.Equal:return s=>n(s)===o(s);case gi.NotEqual:return s=>n(s)!==o(s);case gi.LessThan:return s=>n(s)<o(s);case gi.LessThanOrEqualTo:return s=>n(s)<=o(s);case gi.GreaterThan:return s=>n(s)>o(s);case gi.GreaterThanOrEqualTo:return s=>n(s)>=o(s);default:throw new Error(`Unsupported comparison operator ${e}`)}}function XQe(r,i){let e=r.operator,n=r.args.length,o=new Array(n);for(let s=0;s<n;++s)o[s]=t0(r.args[s],i);switch(e){case gi.Any:return s=>{for(let l=0;l<n;++l)if(o[l](s))return!0;return!1};case gi.All:return s=>{for(let l=0;l<n;++l)if(!o[l](s))return!1;return!0};case gi.Between:return s=>{let l=o[0](s),h=o[1](s),p=o[2](s);return l>=h&&l<=p};case gi.In:return s=>{let l=o[0](s);for(let h=1;h<n;++h)if(l===o[h](s))return!0;return!1};case gi.Not:return s=>!o[0](s);default:throw new Error(`Unsupported logical operator ${e}`)}}function JQe(r,i){let e=r.operator,n=r.args.length,o=new Array(n);for(let s=0;s<n;++s)o[s]=t0(r.args[s],i);switch(e){case gi.Multiply:return s=>{let l=1;for(let h=0;h<n;++h)l*=o[h](s);return l};case gi.Divide:return s=>o[0](s)/o[1](s);case gi.Add:return s=>{let l=0;for(let h=0;h<n;++h)l+=o[h](s);return l};case gi.Subtract:return s=>o[0](s)-o[1](s);case gi.Clamp:return s=>{let l=o[0](s),h=o[1](s);if(l<h)return h;let p=o[2](s);return l>p?p:l};case gi.Mod:return s=>o[0](s)%o[1](s);case gi.Pow:return s=>Math.pow(o[0](s),o[1](s));case gi.Abs:return s=>Math.abs(o[0](s));case gi.Floor:return s=>Math.floor(o[0](s));case gi.Ceil:return s=>Math.ceil(o[0](s));case gi.Round:return s=>Math.round(o[0](s));case gi.Sin:return s=>Math.sin(o[0](s));case gi.Cos:return s=>Math.cos(o[0](s));case gi.Atan:return n===2?s=>Math.atan2(o[0](s),o[1](s)):s=>Math.atan(o[0](s));case gi.Sqrt:return s=>Math.sqrt(o[0](s));default:throw new Error(`Unsupported numeric operator ${e}`)}}function eXe(r,i){let e=r.args.length,n=new Array(e);for(let o=0;o<e;++o)n[o]=t0(r.args[o],i);return o=>{for(let s=0;s<e-1;s+=2)if(n[s](o))return n[s+1](o);return n[e-1](o)}}function tXe(r,i){let e=r.args.length,n=new Array(e);for(let o=0;o<e;++o)n[o]=t0(r.args[o],i);return o=>{let s=n[0](o);for(let l=1;l<e;l+=2)if(s===n[l](o))return n[l+1](o);return n[e-1](o)}}function iXe(r,i){let e=r.args.length,n=new Array(e);for(let o=0;o<e;++o)n[o]=t0(r.args[o],i);return o=>{let s=n[0](o),l=n[1](o),h,p;for(let m=2;m<e;m+=2){let f=n[m](o),g=n[m+1](o),y=Array.isArray(g);if(y&&(g=Iye(g)),f>=l)return m===2?g:y?rXe(s,l,h,p,f,g):wR(s,l,h,p,f,g);h=f,p=g}return p}}function nXe(r,i){let e=r.operator,n=r.args.length,o=new Array(n);for(let s=0;s<n;++s)o[s]=t0(r.args[s],i);switch(e){case gi.ToString:return s=>{let l=o[0](s);return r.args[0].type===Jc?XP(l):l.toString()};default:throw new Error(`Unsupported convert operator ${e}`)}}function wR(r,i,e,n,o,s){let l=o-e;if(l===0)return n;let h=i-e,p=r===1?h/l:(Math.pow(r,h)-1)/(Math.pow(r,l)-1);return n+p*(s-n)}function rXe(r,i,e,n,o,s){if(o-e===0)return n;let h=RZ(n),p=RZ(s),m=p[2]-h[2];m>180?m-=360:m<-180&&(m+=360);let f=[wR(r,i,e,h[0],o,p[0]),wR(r,i,e,h[1],o,p[1]),h[2]+wR(r,i,e,0,o,m),wR(r,i,e,n[3],o,s[3])];return FZ(Tye(f))}function oXe(r){return!0}function Qwe(r){let i=wJ(),e=sXe(r,i),n=xJ();return function(o,s){if(n.properties=o.getPropertiesInternal(),n.resolution=s,i.featureId){let l=o.getId();l!==void 0?n.featureId=l:n.featureId=null}return i.geometryType&&(n.geometryType=CJ(o.getGeometry())),e(n)}}function TJ(r){let i=wJ(),e=r.length,n=new Array(e);for(let l=0;l<e;++l)n[l]=SJ(r[l],i);let o=xJ(),s=new Array(e);return function(l,h){if(o.properties=l.getPropertiesInternal(),o.resolution=h,i.featureId){let m=l.getId();m!==void 0?o.featureId=m:o.featureId=null}let p=0;for(let m=0;m<e;++m){let f=n[m](o);f&&(s[p]=f,p+=1)}return s.length=p,s}}function sXe(r,i){let e=r.length,n=new Array(e);for(let o=0;o<e;++o){let s=r[o],l="filter"in s?Y_(s.filter,Kl,i):oXe,h;if(Array.isArray(s.style)){let p=s.style.length;h=new Array(p);for(let m=0;m<p;++m)h[m]=SJ(s.style[m],i)}else h=[SJ(s.style,i)];n[o]={filter:l,styles:h}}return function(o){let s=[],l=!1;for(let h=0;h<e;++h){let p=n[h].filter;if(p(o)&&!(r[h].else&&l)){l=!0;for(let m of n[h].styles){let f=m(o);f&&s.push(f)}}}return s}}function SJ(r,i){let e=CR(r,"",i),n=xR(r,"",i),o=aXe(r,i),s=lXe(r,i),l=Hp(r,"z-index",i);if(!e&&!n&&!o&&!s&&!Cd(r))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(r));let h=new Mn;return function(p){let m=!0;if(e){let f=e(p);f&&(m=!1),h.setFill(f)}if(n){let f=n(p);f&&(m=!1),h.setStroke(f)}if(o){let f=o(p);f&&(m=!1),h.setText(f)}if(s){let f=s(p);f&&(m=!1),h.setImage(f)}return l&&h.setZIndex(l(p)),m?null:h}}function CR(r,i,e){let n;if(i+"fill-pattern-src"in r?n=hXe(r,i+"fill-",e):n=AJ(r,i+"fill-color",e),!n)return null;let o=new sr;return function(s){let l=n(s);return l==="none"?null:(o.setColor(l),o)}}function xR(r,i,e){let n=Hp(r,i+"stroke-width",e),o=AJ(r,i+"stroke-color",e);if(!n&&!o)return null;let s=Wv(r,i+"stroke-line-cap",e),l=Wv(r,i+"stroke-line-join",e),h=Xwe(r,i+"stroke-line-dash",e),p=Hp(r,i+"stroke-line-dash-offset",e),m=Hp(r,i+"stroke-miter-limit",e),f=new ir;return function(g){if(o){let y=o(g);if(y==="none")return null;f.setColor(y)}if(n&&f.setWidth(n(g)),s){let y=s(g);if(y!=="butt"&&y!=="round"&&y!=="square")throw new Error("Expected butt, round, or square line cap");f.setLineCap(y)}if(l){let y=l(g);if(y!=="bevel"&&y!=="round"&&y!=="miter")throw new Error("Expected bevel, round, or miter line join");f.setLineJoin(y)}return h&&f.setLineDash(h(g)),p&&f.setLineDashOffset(p(g)),m&&f.setMiterLimit(m(g)),f}}function aXe(r,i){let e="text-",n=Wv(r,e+"value",i);if(!n)return null;let o=CR(r,e,i),s=CR(r,e+"background-",i),l=xR(r,e,i),h=xR(r,e+"background-",i),p=Wv(r,e+"font",i),m=Hp(r,e+"max-angle",i),f=Hp(r,e+"offset-x",i),g=Hp(r,e+"offset-y",i),y=SR(r,e+"overflow",i),_=Wv(r,e+"placement",i),w=Hp(r,e+"repeat",i),A=AV(r,e+"scale",i),k=SR(r,e+"rotate-with-view",i),R=Hp(r,e+"rotation",i),$=Wv(r,e+"align",i),H=Wv(r,e+"justify",i),oe=Wv(r,e+"baseline",i),se=Xwe(r,e+"padding",i),ge=EV(r,e+"declutter-mode"),ue=new Pl({declutterMode:ge});return function(pe){if(ue.setText(n(pe)),o&&ue.setFill(o(pe)),s&&ue.setBackgroundFill(s(pe)),l&&ue.setStroke(l(pe)),h&&ue.setBackgroundStroke(h(pe)),p&&ue.setFont(p(pe)),m&&ue.setMaxAngle(m(pe)),f&&ue.setOffsetX(f(pe)),g&&ue.setOffsetY(g(pe)),y&&ue.setOverflow(y(pe)),_){let Ce=_(pe);if(Ce!=="point"&&Ce!=="line")throw new Error("Expected point or line for text-placement");ue.setPlacement(Ce)}if(w&&ue.setRepeat(w(pe)),A&&ue.setScale(A(pe)),k&&ue.setRotateWithView(k(pe)),R&&ue.setRotation(R(pe)),$){let Ce=$(pe);if(Ce!=="left"&&Ce!=="center"&&Ce!=="right"&&Ce!=="end"&&Ce!=="start")throw new Error("Expected left, right, center, start, or end for text-align");ue.setTextAlign(Ce)}if(H){let Ce=H(pe);if(Ce!=="left"&&Ce!=="right"&&Ce!=="center")throw new Error("Expected left, right, or center for text-justify");ue.setJustify(Ce)}if(oe){let Ce=oe(pe);if(Ce!=="bottom"&&Ce!=="top"&&Ce!=="middle"&&Ce!=="alphabetic"&&Ce!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");ue.setTextBaseline(Ce)}return se&&ue.setPadding(se(pe)),ue}}function lXe(r,i){return"icon-src"in r?cXe(r,i):"shape-points"in r?dXe(r,i):"circle-radius"in r?uXe(r,i):null}function cXe(r,i){let e="icon-",n=e+"src",o=Jwe(r[n],n),s=IV(r,e+"anchor",i),l=AV(r,e+"scale",i),h=Hp(r,e+"opacity",i),p=IV(r,e+"displacement",i),m=Hp(r,e+"rotation",i),f=SR(r,e+"rotate-with-view",i),g=Kwe(r,e+"anchor-origin"),y=Zwe(r,e+"anchor-x-units"),_=Zwe(r,e+"anchor-y-units"),w=gXe(r,e+"color"),A=mXe(r,e+"cross-origin"),k=fXe(r,e+"offset"),R=Kwe(r,e+"offset-origin"),$=TV(r,e+"width"),H=TV(r,e+"height"),oe=pXe(r,e+"size"),se=EV(r,e+"declutter-mode"),ge=new Tu({src:o,anchorOrigin:g,anchorXUnits:y,anchorYUnits:_,color:w,crossOrigin:A,offset:k,offsetOrigin:R,height:H,width:$,size:oe,declutterMode:se});return function(ue){return h&&ge.setOpacity(h(ue)),p&&ge.setDisplacement(p(ue)),m&&ge.setRotation(m(ue)),f&&ge.setRotateWithView(f(ue)),l&&ge.setScale(l(ue)),s&&ge.setAnchor(s(ue)),ge}}function dXe(r,i){let e="shape-",n=e+"points",o=e+"radius",s=IJ(r[n],n),l=IJ(r[o],o),h=CR(r,e,i),p=xR(r,e,i),m=AV(r,e+"scale",i),f=IV(r,e+"displacement",i),g=Hp(r,e+"rotation",i),y=SR(r,e+"rotate-with-view",i),_=TV(r,e+"radius2"),w=TV(r,e+"angle"),A=EV(r,e+"declutter-mode"),k=new $p({points:s,radius:l,radius2:_,angle:w,declutterMode:A});return function(R){return h&&k.setFill(h(R)),p&&k.setStroke(p(R)),f&&k.setDisplacement(f(R)),g&&k.setRotation(g(R)),y&&k.setRotateWithView(y(R)),m&&k.setScale(m(R)),k}}function uXe(r,i){let e="circle-",n=CR(r,e,i),o=xR(r,e,i),s=Hp(r,e+"radius",i),l=AV(r,e+"scale",i),h=IV(r,e+"displacement",i),p=Hp(r,e+"rotation",i),m=SR(r,e+"rotate-with-view",i),f=EV(r,e+"declutter-mode"),g=new yl({radius:5,declutterMode:f});return function(y){return s&&g.setRadius(s(y)),n&&g.setFill(n(y)),o&&g.setStroke(o(y)),h&&g.setDisplacement(h(y)),p&&g.setRotation(p(y)),m&&g.setRotateWithView(m(y)),l&&g.setScale(l(y)),g}}function Hp(r,i,e){if(!(i in r))return;let n=Y_(r[i],Wn,e);return function(o){return IJ(n(o),i)}}function Wv(r,i,e){if(!(i in r))return null;let n=Y_(r[i],Gp,e);return function(o){return Jwe(n(o),i)}}function hXe(r,i,e){let n=Wv(r,i+"pattern-src",e),o=Ywe(r,i+"pattern-offset",e),s=Ywe(r,i+"pattern-size",e),l=AJ(r,i+"color",e);return function(h){return{src:n(h),offset:o&&o(h),size:s&&s(h),color:l&&l(h)}}}function SR(r,i,e){if(!(i in r))return null;let n=Y_(r[i],Kl,e);return function(o){let s=n(o);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${i}`);return s}}function AJ(r,i,e){if(!(i in r))return null;let n=Y_(r[i],Jc|Gp,e);return function(o){return e1e(n(o),i)}}function Xwe(r,i,e){if(!(i in r))return null;let n=Y_(r[i],q_,e);return function(o){return IR(n(o),i)}}function IV(r,i,e){if(!(i in r))return null;let n=Y_(r[i],q_,e);return function(o){let s=IR(n(o),i);if(s.length!==2)throw new Error(`Expected two numbers for ${i}`);return s}}function Ywe(r,i,e){if(!(i in r))return null;let n=Y_(r[i],q_,e);return function(o){return t1e(n(o),i)}}function AV(r,i,e){if(!(i in r))return null;let n=Y_(r[i],q_|Wn,e);return function(o){return _Xe(n(o),i)}}function TV(r,i){let e=r[i];if(e!==void 0){if(typeof e!="number")throw new Error(`Expected a number for ${i}`);return e}}function pXe(r,i){let e=r[i];if(e!==void 0){if(typeof e=="number")return Oa(e);if(!Array.isArray(e))throw new Error(`Expected a number or size array for ${i}`);if(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")throw new Error(`Expected a number or size array for ${i}`);return e}}function mXe(r,i){let e=r[i];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${i}`);return e}}function Kwe(r,i){let e=r[i];if(e!==void 0){if(e!=="bottom-left"&&e!=="bottom-right"&&e!=="top-left"&&e!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${i}`);return e}}function Zwe(r,i){let e=r[i];if(e!==void 0){if(e!=="pixels"&&e!=="fraction")throw new Error(`Expected pixels or fraction for ${i}`);return e}}function fXe(r,i){let e=r[i];if(e!==void 0)return IR(e,i)}function EV(r,i){let e=r[i];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${i}`);if(e!=="declutter"&&e!=="obstacle"&&e!=="none")throw new Error(`Expected declutter, obstacle, or none for ${i}`);return e}}function gXe(r,i){let e=r[i];if(e!==void 0)return e1e(e,i)}function IR(r,i){if(!Array.isArray(r))throw new Error(`Expected an array for ${i}`);let e=r.length;for(let n=0;n<e;++n)if(typeof r[n]!="number")throw new Error(`Expected an array of numbers for ${i}`);return r}function Jwe(r,i){if(typeof r!="string")throw new Error(`Expected a string for ${i}`);return r}function IJ(r,i){if(typeof r!="number")throw new Error(`Expected a number for ${i}`);return r}function e1e(r,i){if(typeof r=="string")return r;let e=IR(r,i),n=e.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${i}`);return e}function t1e(r,i){let e=IR(r,i);if(e.length!==2)throw new Error(`Expected an array of two numbers for ${i}`);return e}function _Xe(r,i){return typeof r=="number"?r:t1e(r,i)}var i1e={RENDER_ORDER:"renderOrder"},EJ=class extends Hv{constructor(i){i=i||{};let e=Object.assign({},i);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=i.declutter?String(i.declutter):void 0,this.renderBuffer_=i.renderBuffer!==void 0?i.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(i.style),this.updateWhileAnimating_=i.updateWhileAnimating!==void 0?i.updateWhileAnimating:!1,this.updateWhileInteracting_=i.updateWhileInteracting!==void 0?i.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(i){return super.getFeatures(i)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(i1e.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(i,e){let n=this.getDeclutter();n in i.declutter||(i.declutter[n]=new n1e.default(9)),this.getRenderer().renderDeclutter(i,e)}setRenderOrder(i){this.set(i1e.RENDER_ORDER,i)}setStyle(i){this.style_=yXe(i),this.styleFunction_=i===null?void 0:jye(this.style_),this.changed()}};function yXe(r){if(r===void 0)return Vye;if(!r)return null;if(typeof r=="function"||r instanceof Mn)return r;if(!Array.isArray(r))return TJ([r]);if(r.length===0)return[];let i=r.length,e=r[0];if(e instanceof Mn){let o=new Array(i);for(let s=0;s<i;++s){let l=r[s];if(!(l instanceof Mn))throw new Error("Expected a list of style instances");o[s]=l}return o}if("style"in e){let o=new Array(i);for(let s=0;s<i;++s){let l=r[s];if(!("style"in l))throw new Error("Expected a list of rules with a style property");o[s]=l}return Qwe(o)}return TJ(r)}var NM=EJ;var TR={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},AR=[TR.FILL],K_=[TR.STROKE],qv=[TR.BEGIN_PATH],MJ=[TR.CLOSE_PATH],ar=TR;var DJ=class{drawCustom(i,e,n,o,s){}drawGeometry(i){}setStyle(i){}drawCircle(i,e,n){}drawFeature(i,e,n){}drawGeometryCollection(i,e,n){}drawLineString(i,e,n){}drawMultiLineString(i,e,n){}drawMultiPoint(i,e,n){}drawMultiPolygon(i,e,n){}drawPoint(i,e,n){}drawPolygon(i,e,n){}drawText(i,e,n){}setFillStrokeStyle(i,e){}setImageStyle(i,e){}setTextStyle(i,e){}},MV=DJ;var kJ=class extends MV{constructor(i,e,n,o){super(),this.tolerance=i,this.maxExtent=e,this.pixelRatio=o,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(i){let e=this.pixelRatio;return e==1?i:i.map(function(n){return n*e})}appendFlatPointCoordinates(i,e){let n=this.getBufferedMaxExtent(),o=this.tmpCoordinate_,s=this.coordinates,l=s.length;for(let h=0,p=i.length;h<p;h+=e)o[0]=i[h],o[1]=i[h+1],Mm(n,o)&&(s[l++]=o[0],s[l++]=o[1]);return l}appendFlatLineCoordinates(i,e,n,o,s,l){let h=this.coordinates,p=h.length,m=this.getBufferedMaxExtent();l&&(e+=o);let f=i[e],g=i[e+1],y=this.tmpCoordinate_,_=!0,w,A,k;for(w=e+o;w<n;w+=o)y[0]=i[w],y[1]=i[w+1],k=kj(m,y),k!==A?(_&&(h[p++]=f,h[p++]=g,_=!1),h[p++]=y[0],h[p++]=y[1]):k===Yc.INTERSECTING?(h[p++]=y[0],h[p++]=y[1],_=!1):_=!0,f=y[0],g=y[1],A=k;return(s&&_||w===e+o)&&(h[p++]=f,h[p++]=g),p}drawCustomCoordinates_(i,e,n,o,s){for(let l=0,h=n.length;l<h;++l){let p=n[l],m=this.appendFlatLineCoordinates(i,e,p,o,!1,!1);s.push(m),e=p}return e}drawCustom(i,e,n,o,s){this.beginGeometry(i,e,s);let l=i.getType(),h=i.getStride(),p=this.coordinates.length,m,f,g,y,_;switch(l){case"MultiPolygon":m=i.getOrientedFlatCoordinates(),y=[];let w=i.getEndss();_=0;for(let A=0,k=w.length;A<k;++A){let R=[];_=this.drawCustomCoordinates_(m,_,w[A],h,R),y.push(R)}this.instructions.push([ar.CUSTOM,p,y,i,n,zP,s]),this.hitDetectionInstructions.push([ar.CUSTOM,p,y,i,o||n,zP,s]);break;case"Polygon":case"MultiLineString":g=[],m=l=="Polygon"?i.getOrientedFlatCoordinates():i.getFlatCoordinates(),_=this.drawCustomCoordinates_(m,0,i.getEnds(),h,g),this.instructions.push([ar.CUSTOM,p,g,i,n,T1,s]),this.hitDetectionInstructions.push([ar.CUSTOM,p,g,i,o||n,T1,s]);break;case"LineString":case"Circle":m=i.getFlatCoordinates(),f=this.appendFlatLineCoordinates(m,0,m.length,h,!1,!1),this.instructions.push([ar.CUSTOM,p,f,i,n,Lp,s]),this.hitDetectionInstructions.push([ar.CUSTOM,p,f,i,o||n,Lp,s]);break;case"MultiPoint":m=i.getFlatCoordinates(),f=this.appendFlatPointCoordinates(m,h),f>p&&(this.instructions.push([ar.CUSTOM,p,f,i,n,Lp,s]),this.hitDetectionInstructions.push([ar.CUSTOM,p,f,i,o||n,Lp,s]));break;case"Point":m=i.getFlatCoordinates(),this.coordinates.push(m[0],m[1]),f=this.coordinates.length,this.instructions.push([ar.CUSTOM,p,f,i,n,void 0,s]),this.hitDetectionInstructions.push([ar.CUSTOM,p,f,i,o||n,void 0,s]);break;default:}this.endGeometry(e)}beginGeometry(i,e,n){this.beginGeometryInstruction1_=[ar.BEGIN_GEOMETRY,e,0,i,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ar.BEGIN_GEOMETRY,e,0,i,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){let i=this.hitDetectionInstructions;i.reverse();let e,n=i.length,o,s,l=-1;for(e=0;e<n;++e)o=i[e],s=o[0],s==ar.END_GEOMETRY?l=e:s==ar.BEGIN_GEOMETRY&&(o[2]=e,Q_e(this.hitDetectionInstructions,l,e),l=-1)}setFillStrokeStyle(i,e){let n=this.state;if(i){let o=i.getColor();n.fillPatternScale=o&&typeof o=="object"&&"src"in o?this.pixelRatio:1,n.fillStyle=Bp(o||Td)}else n.fillStyle=void 0;if(e){let o=e.getColor();n.strokeStyle=Bp(o||Rv);let s=e.getLineCap();n.lineCap=s!==void 0?s:N_;let l=e.getLineDash();n.lineDash=l?l.slice():jp;let h=e.getLineDashOffset();n.lineDashOffset=h||Vp;let p=e.getLineJoin();n.lineJoin=p!==void 0?p:B_;let m=e.getWidth();n.lineWidth=m!==void 0?m:Lv;let f=e.getMiterLimit();n.miterLimit=f!==void 0?f:Pv,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(i){let e=i.fillStyle,n=[ar.SET_FILL_STYLE,e];return typeof e!="string"&&n.push(i.fillPatternScale),n}applyStroke(i){this.instructions.push(this.createStroke(i))}createStroke(i){return[ar.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth*this.pixelRatio,i.lineCap,i.lineJoin,i.miterLimit,this.applyPixelRatio(i.lineDash),i.lineDashOffset*this.pixelRatio]}updateFillStyle(i,e){let n=i.fillStyle;(typeof n!="string"||i.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(e.call(this,i)),i.currentFillStyle=n)}updateStrokeStyle(i,e){let n=i.strokeStyle,o=i.lineCap,s=i.lineDash,l=i.lineDashOffset,h=i.lineJoin,p=i.lineWidth,m=i.miterLimit;(i.currentStrokeStyle!=n||i.currentLineCap!=o||s!=i.currentLineDash&&!Kd(i.currentLineDash,s)||i.currentLineDashOffset!=l||i.currentLineJoin!=h||i.currentLineWidth!=p||i.currentMiterLimit!=m)&&(n!==void 0&&e.call(this,i),i.currentStrokeStyle=n,i.currentLineCap=o,i.currentLineDash=s,i.currentLineDashOffset=l,i.currentLineJoin=h,i.currentLineWidth=p,i.currentMiterLimit=m)}endGeometry(i){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;let e=[ar.END_GEOMETRY,i];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Oj(this.maxExtent),this.maxLineWidth>0)){let i=this.resolution*(this.maxLineWidth+1)/2;xd(this.bufferedMaxExtent_,i,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}},Z_=kJ;var OJ=class extends Z_{constructor(i,e,n,o){super(i,e,n,o),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(i,e,n){if(!this.image_||this.maxExtent&&!Mm(this.maxExtent,i.getFlatCoordinates()))return;this.beginGeometry(i,e,n);let o=i.getFlatCoordinates(),s=i.getStride(),l=this.coordinates.length,h=this.appendFlatPointCoordinates(o,s);this.instructions.push([ar.DRAW_IMAGE,l,h,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ar.DRAW_IMAGE,l,h,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(i,e,n){if(!this.image_)return;this.beginGeometry(i,e,n);let o=i.getFlatCoordinates(),s=[];for(let p=0,m=o.length;p<m;p+=i.getStride())(!this.maxExtent||Mm(this.maxExtent,o.slice(p,p+2)))&&s.push(o[p],o[p+1]);let l=this.coordinates.length,h=this.appendFlatPointCoordinates(s,2);this.instructions.push([ar.DRAW_IMAGE,l,h,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ar.DRAW_IMAGE,l,h,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(i,e){let n=i.getAnchor(),o=i.getSize(),s=i.getOrigin();this.imagePixelRatio_=i.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=i.getHitDetectionImage(),this.image_=i.getImage(this.pixelRatio),this.height_=o[1],this.opacity_=i.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=i.getRotateWithView(),this.rotation_=i.getRotation(),this.scale_=i.getScaleArray(),this.width_=o[0],this.declutterMode_=i.getDeclutterMode(),this.declutterImageWithText_=e}},r1e=OJ;var PJ=class extends Z_{constructor(i,e,n,o){super(i,e,n,o)}drawFlatCoordinates_(i,e,n,o){let s=this.coordinates.length,l=this.appendFlatLineCoordinates(i,e,n,o,!1,!1),h=[ar.MOVE_TO_LINE_TO,s,l];return this.instructions.push(h),this.hitDetectionInstructions.push(h),n}drawLineString(i,e,n){let o=this.state,s=o.strokeStyle,l=o.lineWidth;if(s===void 0||l===void 0)return;this.updateStrokeStyle(o,this.applyStroke),this.beginGeometry(i,e,n),this.hitDetectionInstructions.push([ar.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,jp,Vp],qv);let h=i.getFlatCoordinates(),p=i.getStride();this.drawFlatCoordinates_(h,0,h.length,p),this.hitDetectionInstructions.push(K_),this.endGeometry(e)}drawMultiLineString(i,e,n){let o=this.state,s=o.strokeStyle,l=o.lineWidth;if(s===void 0||l===void 0)return;this.updateStrokeStyle(o,this.applyStroke),this.beginGeometry(i,e,n),this.hitDetectionInstructions.push([ar.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,jp,Vp],qv);let h=i.getEnds(),p=i.getFlatCoordinates(),m=i.getStride(),f=0;for(let g=0,y=h.length;g<y;++g)f=this.drawFlatCoordinates_(p,f,h[g],m);this.hitDetectionInstructions.push(K_),this.endGeometry(e)}finish(){let i=this.state;return i.lastStroke!=null&&i.lastStroke!=this.coordinates.length&&this.instructions.push(K_),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(i){i.lastStroke!=null&&i.lastStroke!=this.coordinates.length&&(this.instructions.push(K_),i.lastStroke=this.coordinates.length),i.lastStroke=0,super.applyStroke(i),this.instructions.push(qv)}},o1e=PJ;var RJ=class extends Z_{constructor(i,e,n,o){super(i,e,n,o)}drawFlatCoordinatess_(i,e,n,o){let s=this.state,l=s.fillStyle!==void 0,h=s.strokeStyle!==void 0,p=n.length;this.instructions.push(qv),this.hitDetectionInstructions.push(qv);for(let m=0;m<p;++m){let f=n[m],g=this.coordinates.length,y=this.appendFlatLineCoordinates(i,e,f,o,!0,!h),_=[ar.MOVE_TO_LINE_TO,g,y];this.instructions.push(_),this.hitDetectionInstructions.push(_),h&&(this.instructions.push(MJ),this.hitDetectionInstructions.push(MJ)),e=f}return l&&(this.instructions.push(AR),this.hitDetectionInstructions.push(AR)),h&&(this.instructions.push(K_),this.hitDetectionInstructions.push(K_)),e}drawCircle(i,e,n){let o=this.state,s=o.fillStyle,l=o.strokeStyle;if(s===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(i,e,n),o.fillStyle!==void 0&&this.hitDetectionInstructions.push([ar.SET_FILL_STYLE,Td]),o.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ar.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,jp,Vp]);let h=i.getFlatCoordinates(),p=i.getStride(),m=this.coordinates.length;this.appendFlatLineCoordinates(h,0,h.length,p,!1,!1);let f=[ar.CIRCLE,m];this.instructions.push(qv,f),this.hitDetectionInstructions.push(qv,f),o.fillStyle!==void 0&&(this.instructions.push(AR),this.hitDetectionInstructions.push(AR)),o.strokeStyle!==void 0&&(this.instructions.push(K_),this.hitDetectionInstructions.push(K_)),this.endGeometry(e)}drawPolygon(i,e,n){let o=this.state,s=o.fillStyle,l=o.strokeStyle;if(s===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(i,e,n),o.fillStyle!==void 0&&this.hitDetectionInstructions.push([ar.SET_FILL_STYLE,Td]),o.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ar.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,jp,Vp]);let h=i.getEnds(),p=i.getOrientedFlatCoordinates(),m=i.getStride();this.drawFlatCoordinatess_(p,0,h,m),this.endGeometry(e)}drawMultiPolygon(i,e,n){let o=this.state,s=o.fillStyle,l=o.strokeStyle;if(s===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(i,e,n),o.fillStyle!==void 0&&this.hitDetectionInstructions.push([ar.SET_FILL_STYLE,Td]),o.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ar.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,jp,Vp]);let h=i.getEndss(),p=i.getOrientedFlatCoordinates(),m=i.getStride(),f=0;for(let g=0,y=h.length;g<y;++g)f=this.drawFlatCoordinatess_(p,f,h[g],m);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;let i=this.tolerance;if(i!==0){let e=this.coordinates;for(let n=0,o=e.length;n<o;++n)e[n]=I1(e[n],i)}return super.finish()}setFillStrokeStyles_(){let i=this.state;i.fillStyle!==void 0&&this.updateFillStyle(i,this.createFill),i.strokeStyle!==void 0&&this.updateStrokeStyle(i,this.applyStroke)}},FJ=RJ;function s1e(r,i,e,n,o){let s=[],l=e,h=0,p=i.slice(e,2);for(;h<r&&l+o<n;){let[m,f]=p.slice(-2),g=i[l+o],y=i[l+o+1],_=Math.sqrt((g-m)*(g-m)+(y-f)*(y-f));if(h+=_,h>=r){let w=(r-h+_)/_,A=xu(m,g,w),k=xu(f,y,w);p.push(A,k),s.push(p),p=[A,k],h==r&&(l+=o),h=0}else if(h<r)p.push(i[l+o],i[l+o+1]),l+=o;else{let w=_-h,A=xu(m,g,w/_),k=xu(f,y,w/_);p.push(A,k),s.push(p),p=[A,k],h=0,l+=o}}return h>0&&s.push(p),s}function a1e(r,i,e,n,o){let s=e,l=e,h=0,p=0,m=e,f,g,y,_,w,A,k,R,$,H;for(g=e;g<n;g+=o){let oe=i[g],se=i[g+1];w!==void 0&&($=oe-w,H=se-A,_=Math.sqrt($*$+H*H),k!==void 0&&(p+=y,f=Math.acos((k*$+R*H)/(y*_)),f>r&&(p>h&&(h=p,s=m,l=g),p=0,m=g-o)),y=_,k=$,R=H),w=oe,A=se}return p+=_,p>h?[m,g]:[s,l]}var ER={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},LJ=class extends Z_{constructor(i,e,n,o){super(i,e,n,o),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Td]={fillStyle:Td},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){let i=super.finish();return i.textStates=this.textStates,i.fillStates=this.fillStates,i.strokeStates=this.strokeStates,i}drawText(i,e,n){let o=this.textFillState_,s=this.textStrokeState_,l=this.textState_;if(this.text_===""||!l||!o&&!s)return;let h=this.coordinates,p=h.length,m=i.getType(),f=null,g=i.getStride();if(l.placement==="line"&&(m=="LineString"||m=="MultiLineString"||m=="Polygon"||m=="MultiPolygon")){if(!Wo(this.maxExtent,i.getExtent()))return;let y;if(f=i.getFlatCoordinates(),m=="LineString")y=[f.length];else if(m=="MultiLineString")y=i.getEnds();else if(m=="Polygon")y=i.getEnds().slice(0,1);else if(m=="MultiPolygon"){let k=i.getEndss();y=[];for(let R=0,$=k.length;R<$;++R)y.push(k[R][0])}this.beginGeometry(i,e,n);let _=l.repeat,w=_?void 0:l.textAlign,A=0;for(let k=0,R=y.length;k<R;++k){let $;_?$=s1e(_*this.resolution,f,A,y[k],g):$=[f.slice(A,y[k])];for(let H=0,oe=$.length;H<oe;++H){let se=$[H],ge=0,ue=se.length;if(w==null){let Ce=a1e(l.maxAngle,se,0,se.length,2);ge=Ce[0],ue=Ce[1]}for(let Ce=ge;Ce<ue;Ce+=g)h.push(se[Ce],se[Ce+1]);let pe=h.length;A=y[k],this.drawChars_(p,pe),p=pe}}this.endGeometry(e)}else{let y=l.overflow?null:[];switch(m){case"Point":case"MultiPoint":f=i.getFlatCoordinates();break;case"LineString":f=i.getFlatMidpoint();break;case"Circle":f=i.getCenter();break;case"MultiLineString":f=i.getFlatMidpoints(),g=2;break;case"Polygon":f=i.getFlatInteriorPoint(),l.overflow||y.push(f[2]/this.resolution),g=3;break;case"MultiPolygon":let $=i.getFlatInteriorPoints();f=[];for(let H=0,oe=$.length;H<oe;H+=3)l.overflow||y.push($[H+2]/this.resolution),f.push($[H],$[H+1]);if(f.length===0)return;g=2;break;default:}let _=this.appendFlatPointCoordinates(f,g);if(_===p)return;if(y&&(_-p)/2!==f.length/g){let $=p/2;y=y.filter((H,oe)=>{let se=h[($+oe)*2]===f[oe*g]&&h[($+oe)*2+1]===f[oe*g+1];return se||--$,se})}this.saveTextStates_(),(l.backgroundFill||l.backgroundStroke)&&(this.setFillStrokeStyle(l.backgroundFill,l.backgroundStroke),l.backgroundFill&&this.updateFillStyle(this.state,this.createFill),l.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(i,e,n);let w=l.padding;if(w!=Fv&&(l.scale[0]<0||l.scale[1]<0)){let $=l.padding[0],H=l.padding[1],oe=l.padding[2],se=l.padding[3];l.scale[0]<0&&(H=-H,se=-se),l.scale[1]<0&&($=-$,oe=-oe),w=[$,H,oe,se]}let A=this.pixelRatio;this.instructions.push([ar.DRAW_IMAGE,p,_,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,w==Fv?Fv:w.map(function($){return $*A}),!!l.backgroundFill,!!l.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);let k=1/A,R=this.state.fillStyle;l.backgroundFill&&(this.state.fillStyle=Td,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([ar.DRAW_IMAGE,p,_,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[k,k],NaN,this.declutterMode_,this.declutterImageWithText_,w,!!l.backgroundFill,!!l.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Td:this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),l.backgroundFill&&(this.state.fillStyle=R,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}}saveTextStates_(){let i=this.textStrokeState_,e=this.textState_,n=this.textFillState_,o=this.strokeKey_;i&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:i.strokeStyle,lineCap:i.lineCap,lineDashOffset:i.lineDashOffset,lineWidth:i.lineWidth,lineJoin:i.lineJoin,miterLimit:i.miterLimit,lineDash:i.lineDash}));let s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||D1,justify:e.justify,textBaseline:e.textBaseline||VS,scale:e.scale});let l=this.fillKey_;n&&(l in this.fillStates||(this.fillStates[l]={fillStyle:n.fillStyle}))}drawChars_(i,e){let n=this.textStrokeState_,o=this.textState_,s=this.strokeKey_,l=this.textKey_,h=this.fillKey_;this.saveTextStates_();let p=this.pixelRatio,m=ER[o.textBaseline],f=this.textOffsetY_*p,g=this.text_,y=n?n.lineWidth*Math.abs(o.scale[0])/2:0;this.instructions.push([ar.DRAW_CHARS,i,e,m,o.overflow,h,o.maxAngle,p,f,s,y*p,g,l,1,this.declutterMode_]),this.hitDetectionInstructions.push([ar.DRAW_CHARS,i,e,m,o.overflow,h&&Td,o.maxAngle,p,f,s,y*p,g,l,1/p,this.declutterMode_])}setTextStyle(i,e){let n,o,s;if(!i)this.text_="";else{let l=i.getFill();l?(o=this.textFillState_,o||(o={},this.textFillState_=o),o.fillStyle=Bp(l.getColor()||Td)):(o=null,this.textFillState_=o);let h=i.getStroke();if(!h)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);let w=h.getLineDash(),A=h.getLineDashOffset(),k=h.getWidth(),R=h.getMiterLimit();s.lineCap=h.getLineCap()||N_,s.lineDash=w?w.slice():jp,s.lineDashOffset=A===void 0?Vp:A,s.lineJoin=h.getLineJoin()||B_,s.lineWidth=k===void 0?Lv:k,s.miterLimit=R===void 0?Pv:R,s.strokeStyle=Bp(h.getColor()||Rv)}n=this.textState_;let p=i.getFont()||M6;Pye(p);let m=i.getScaleArray();n.overflow=i.getOverflow(),n.font=p,n.maxAngle=i.getMaxAngle(),n.placement=i.getPlacement(),n.textAlign=i.getTextAlign(),n.repeat=i.getRepeat(),n.justify=i.getJustify(),n.textBaseline=i.getTextBaseline()||VS,n.backgroundFill=i.getBackgroundFill(),n.backgroundStroke=i.getBackgroundStroke(),n.padding=i.getPadding()||Fv,n.scale=m===void 0?[1,1]:m;let f=i.getOffsetX(),g=i.getOffsetY(),y=i.getRotateWithView(),_=i.getRotation();this.text_=i.getText()||"",this.textOffsetX_=f===void 0?0:f,this.textOffsetY_=g===void 0?0:g,this.textRotateWithView_=y===void 0?!1:y,this.textRotation_=_===void 0?0:_,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Xi(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=o&&o.fillStyle?typeof o.fillStyle=="string"?o.fillStyle:"|"+Xi(o.fillStyle):""}this.declutterMode_=i.getDeclutterMode(),this.declutterImageWithText_=e}},l1e=LJ;var vXe={Circle:FJ,Default:Z_,Image:r1e,LineString:o1e,Polygon:FJ,Text:l1e},NJ=class{constructor(i,e,n,o){this.tolerance_=i,this.maxExtent_=e,this.pixelRatio_=o,this.resolution_=n,this.buildersByZIndex_={}}finish(){let i={};for(let e in this.buildersByZIndex_){i[e]=i[e]||{};let n=this.buildersByZIndex_[e];for(let o in n){let s=n[o].finish();i[e][o]=s}}return i}getBuilder(i,e){let n=i!==void 0?i.toString():"0",o=this.buildersByZIndex_[n];o===void 0&&(o={},this.buildersByZIndex_[n]=o);let s=o[e];if(s===void 0){let l=vXe[e];s=new l(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),o[e]=s}return s}},DV=NJ;var BJ=class extends s6{constructor(i){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=i,this.declutterExecutorGroup=null}getFeatures(i){return xn()}getData(i){return null}prepareFrame(i){return xn()}renderFrame(i,e){return xn()}loadedTileCallback(i,e,n){i[e]||(i[e]={}),i[e][n.tileCoord.toString()]=n}createLoadedTileFinder(i,e,n){return(o,s)=>{let l=this.loadedTileCallback.bind(this,n,o);return i.forEachLoadedTile(e,o,s,l)}}forEachFeatureAtCoordinate(i,e,n,o,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(i){let e=i.target;(e.getState()===en.LOADED||e.getState()===en.ERROR)&&this.renderIfReadyAndVisible()}loadImage(i){let e=i.getState();return e!=en.LOADED&&e!=en.ERROR&&i.addEventListener(Zi.CHANGE,this.boundHandleImageChange_),e==en.IDLE&&(i.load(),e=i.getState()),e==en.LOADED}renderIfReadyAndVisible(){let i=this.getLayer();i&&i.getVisible()&&i.getSourceState()==="ready"&&i.changed()}renderDeferred(i){}disposeInternal(){delete this.layer_,super.disposeInternal()}},c1e=BJ;var jJ=class extends Ls{constructor(i,e,n,o){super(i),this.inversePixelTransform=e,this.frameState=n,this.context=o}},kV=jJ;var VJ=class{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(CanvasRenderingContext2D.prototype,{get:(i,e)=>{if(typeof JP()[e]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e),this.pushMethodArgs_},set:(i,e,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e,n),!0)})}pushMethodArgs_=(...i)=>(this.instructions_[this.zIndex+this.offset_].push(i),this);getContext(){return this.context_}draw(i){this.instructions_.forEach(e=>{for(let n=0,o=e.length;n<o;n+=2){let s=e[n],l=e[n+1];if(typeof i[s]=="function")i[s](...l);else{if(typeof l=="function"){i[s]=l(i);continue}i[s]=l}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}},BM=VJ;var UJ=[],jM=null;function bXe(){jM=Cs(1,1,void 0,{willReadFrequently:!0})}var $J=class extends c1e{constructor(i){super(i),this.container=null,this.renderedResolution,this.tempTransform=Fc(),this.pixelTransform=Fc(),this.inversePixelTransform=Fc(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(i,e,n){jM||bXe(),jM.clearRect(0,0,1,1);let o;try{jM.drawImage(i,e,n,1,1,0,0,1,1),o=jM.getImageData(0,0,1,1).data}catch{return jM=null,null}return o}getBackground(i){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(i.viewState.resolution)),n||void 0}useContainer(i,e,n){let o=this.getLayer().getClassName(),s,l;if(i&&i.className===o&&(!n||i&&i.style.backgroundColor&&Kd(Qc(i.style.backgroundColor),Qc(n)))){let h=i.firstElementChild;h instanceof HTMLCanvasElement&&(l=h.getContext("2d"))}if(l&&l.canvas.style.transform===e?(this.container=i,this.context=l,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=o;let h=s.style;h.position="absolute",h.width="100%",h.height="100%",l=Cs();let p=l.canvas;s.appendChild(p),h=p.style,h.position="absolute",h.left="0",h.transformOrigin="top left",this.container=s,this.context=l}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(i,e,n){let o=Cu(n),s=ES(n),l=AS(n),h=TS(n);Hs(e.coordinateToPixelTransform,o),Hs(e.coordinateToPixelTransform,s),Hs(e.coordinateToPixelTransform,l),Hs(e.coordinateToPixelTransform,h);let p=this.inversePixelTransform;Hs(p,o),Hs(p,s),Hs(p,l),Hs(p,h),i.save(),i.beginPath(),i.moveTo(Math.round(o[0]),Math.round(o[1])),i.lineTo(Math.round(s[0]),Math.round(s[1])),i.lineTo(Math.round(l[0]),Math.round(l[1])),i.lineTo(Math.round(h[0]),Math.round(h[1])),i.clip()}dispatchRenderEvent_(i,e,n){let o=this.getLayer();if(o.hasListener(i)){let s=new kV(i,this.inversePixelTransform,n,e);o.dispatchEvent(s)}}preRender(i,e){this.frameState=e,!e.declutter&&this.dispatchRenderEvent_(Du.PRERENDER,i,e)}postRender(i,e){e.declutter||this.dispatchRenderEvent_(Du.POSTRENDER,i,e)}renderDeferredInternal(i){}getRenderContext(i){return i.declutter&&!this.deferredContext_&&(this.deferredContext_=new BM),i.declutter?this.deferredContext_.getContext():this.context}renderDeferred(i){i.declutter&&(this.dispatchRenderEvent_(Du.PRERENDER,this.context,i),i.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(i),this.dispatchRenderEvent_(Du.POSTRENDER,this.context,i))}getRenderTransform(i,e,n,o,s,l,h){let p=s/2,m=l/2,f=o/e,g=-f,y=-i[0]+h,_=-i[1];return vc(this.tempTransform,p,m,f,g,-n,y,_)}disposeInternal(){delete this.frameState,super.disposeInternal()}},VM=$J;function d1e(r,i,e,n,o,s,l,h,p,m,f,g){let y=r[i],_=r[i+1],w=0,A=0,k=0,R=0;function $(){w=y,A=_,i+=n,y=r[i],_=r[i+1],R+=k,k=Math.sqrt((y-w)*(y-w)+(_-A)*(_-A))}do $();while(i<e-n&&R+k<s);let H=k===0?0:(s-R)/k,oe=xu(w,y,H),se=xu(A,_,H),ge=i-n,ue=R,pe=s+h*p(m,o,f);for(;i<e-n&&R+k<pe;)$();H=k===0?0:(pe-R)/k;let Ce=xu(w,y,H),_e=xu(A,_,H),de;if(g){let Le=[oe,se,Ce,_e];nM(Le,0,4,2,g,Le,Le),de=Le[0]>Le[2]}else de=oe>Ce;let te=Math.PI,Se=[],Te=ge+n===i;i=ge,k=0,R=ue,y=r[i],_=r[i+1];let De;if(Te){$(),De=Math.atan2(_-A,y-w),de&&(De+=De>0?-te:te);let Le=(Ce+oe)/2,Me=(_e+se)/2;return Se[0]=[Le,Me,(pe-s)/2,De,o],Se}o=o.replace(/\n/g," ");for(let Le=0,Me=o.length;Le<Me;){$();let ze=Math.atan2(_-A,y-w);if(de&&(ze+=ze>0?-te:te),De!==void 0){let ke=ze-De;if(ke+=ke>te?-2*te:ke<-te?2*te:0,Math.abs(ke)>l)return null}De=ze;let Ve=Le,$e=0;for(;Le<Me;++Le){let ke=de?Me-Le-1:Le,et=h*p(m,o[ke],f);if(i+n<e&&R+k<s+$e+et/2)break;$e+=et}if(Le===Ve)continue;let nt=de?o.substring(Me-Ve,Me-Le):o.substring(Ve,Le);H=k===0?0:(s+$e/2-R)/k;let be=xu(w,y,H),we=xu(A,_,H);Se.push([be,we,$e/2,ze,nt]),s+=$e}return Se}var $M=Fs(),j1=[],Yv=[],Kv=[],V1=[];function u1e(r){return r[3].declutterBox}var h1e=new RegExp("[\u0591-\u08FF\uFB1D-\uFDFF\uFE70-\uFEFC\u0800-\u0FFF\uE800-\uEFFF]");function zJ(r,i){return i==="start"?i=h1e.test(r)?"right":"left":i==="end"&&(i=h1e.test(r)?"left":"right"),ER[i]}function wXe(r,i,e){return e>0&&r.push(`
`,""),r.push(i,""),r}var GJ=class{constructor(i,e,n,o,s){this.overlaps=n,this.pixelRatio=e,this.resolution=i,this.alignAndScaleFill_,this.instructions=o.instructions,this.coordinates=o.coordinates,this.coordinateCache_={},this.renderedTransform_=Fc(),this.hitDetectionInstructions=o.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=o.fillStates||{},this.strokeStates=o.strokeStates||{},this.textStates=o.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new BM:null}getZIndexContext(){return this.zIndexContext_}createLabel(i,e,n,o){let s=i+e+n+o;if(this.labels_[s])return this.labels_[s];let l=o?this.strokeStates[o]:null,h=n?this.fillStates[n]:null,p=this.textStates[e],m=this.pixelRatio,f=[p.scale[0]*m,p.scale[1]*m],g=Array.isArray(i),y=p.justify?ER[p.justify]:zJ(Array.isArray(i)?i[0]:i,p.textAlign||D1),_=o&&l.lineWidth?l.lineWidth:0,w=g?i:i.split(`
`).reduce(wXe,[]),{width:A,height:k,widths:R,heights:$,lineWidths:H}=Fye(p,w),oe=A+_,se=[],ge=(oe+2)*f[0],ue=(k+_)*f[1],pe={width:ge<0?Math.floor(ge):Math.ceil(ge),height:ue<0?Math.floor(ue):Math.ceil(ue),contextInstructions:se};(f[0]!=1||f[1]!=1)&&se.push("scale",f),o&&(se.push("strokeStyle",l.strokeStyle),se.push("lineWidth",_),se.push("lineCap",l.lineCap),se.push("lineJoin",l.lineJoin),se.push("miterLimit",l.miterLimit),se.push("setLineDash",[l.lineDash]),se.push("lineDashOffset",l.lineDashOffset)),n&&se.push("fillStyle",h.fillStyle),se.push("textBaseline","middle"),se.push("textAlign","center");let Ce=.5-y,_e=y*oe+Ce*_,de=[],te=[],Se=0,Te=0,De=0,Le=0,Me;for(let ze=0,Ve=w.length;ze<Ve;ze+=2){let $e=w[ze];if($e===`
`){Te+=Se,Se=0,_e=y*oe+Ce*_,++Le;continue}let nt=w[ze+1]||p.font;nt!==Me&&(o&&de.push("font",nt),n&&te.push("font",nt),Me=nt),Se=Math.max(Se,$[De]);let be=[$e,_e+Ce*R[De]+y*(R[De]-H[Le]),.5*(_+Se)+Te];_e+=R[De],o&&de.push("strokeText",be),n&&te.push("fillText",be),++De}return Array.prototype.push.apply(se,de),Array.prototype.push.apply(se,te),this.labels_[s]=pe,pe}replayTextBackground_(i,e,n,o,s,l,h){i.beginPath(),i.moveTo.apply(i,e),i.lineTo.apply(i,n),i.lineTo.apply(i,o),i.lineTo.apply(i,s),i.lineTo.apply(i,e),l&&(this.alignAndScaleFill_=l[2],this.fill_(i)),h&&(this.setStrokeStyle_(i,h),i.stroke())}calculateImageOrLabelDimensions_(i,e,n,o,s,l,h,p,m,f,g,y,_,w,A,k){h*=y[0],p*=y[1];let R=n-h,$=o-p,H=s+m>i?i-m:s,oe=l+f>e?e-f:l,se=w[3]+H*y[0]+w[1],ge=w[0]+oe*y[1]+w[2],ue=R-w[3],pe=$-w[0];(A||g!==0)&&(j1[0]=ue,V1[0]=ue,j1[1]=pe,Yv[1]=pe,Yv[0]=ue+se,Kv[0]=Yv[0],Kv[1]=pe+ge,V1[1]=Kv[1]);let Ce;return g!==0?(Ce=vc(Fc(),n,o,1,1,g,-n,-o),Hs(Ce,j1),Hs(Ce,Yv),Hs(Ce,Kv),Hs(Ce,V1),Sd(Math.min(j1[0],Yv[0],Kv[0],V1[0]),Math.min(j1[1],Yv[1],Kv[1],V1[1]),Math.max(j1[0],Yv[0],Kv[0],V1[0]),Math.max(j1[1],Yv[1],Kv[1],V1[1]),$M)):Sd(Math.min(ue,ue+se),Math.min(pe,pe+ge),Math.max(ue,ue+se),Math.max(pe,pe+ge),$M),_&&(R=Math.round(R),$=Math.round($)),{drawImageX:R,drawImageY:$,drawImageW:H,drawImageH:oe,originX:m,originY:f,declutterBox:{minX:$M[0],minY:$M[1],maxX:$M[2],maxY:$M[3],value:k},canvasTransform:Ce,scale:y}}replayImageOrLabel_(i,e,n,o,s,l,h){let p=!!(l||h),m=o.declutterBox,f=h?h[2]*o.scale[0]/2:0;return m.minX-f<=e[0]&&m.maxX+f>=0&&m.minY-f<=e[1]&&m.maxY+f>=0&&(p&&this.replayTextBackground_(i,j1,Yv,Kv,V1,l,h),Lye(i,o.canvasTransform,s,n,o.originX,o.originY,o.drawImageW,o.drawImageH,o.drawImageX,o.drawImageY,o.scale)),!0}fill_(i){let e=this.alignAndScaleFill_;if(e){let n=Hs(this.renderedTransform_,[0,0]),o=512*this.pixelRatio;i.save(),i.translate(n[0]%o,n[1]%o),e!==1&&i.scale(e,e),i.rotate(this.viewRotation_)}i.fill(),e&&i.restore()}setStrokeStyle_(i,e){i.strokeStyle=e[1],i.lineWidth=e[2],i.lineCap=e[3],i.lineJoin=e[4],i.miterLimit=e[5],i.lineDashOffset=e[7],i.setLineDash(e[6])}drawLabelWithPointPlacement_(i,e,n,o){let s=this.textStates[e],l=this.createLabel(i,e,o,n),h=this.strokeStates[n],p=this.pixelRatio,m=zJ(Array.isArray(i)?i[0]:i,s.textAlign||D1),f=ER[s.textBaseline||VS],g=h&&h.lineWidth?h.lineWidth:0,y=l.width/p-2*s.scale[0],_=m*y+2*(.5-m)*g,w=f*l.height/p+2*(.5-f)*g;return{label:l,anchorX:_,anchorY:w}}execute_(i,e,n,o,s,l,h,p){let m=this.zIndexContext_,f;this.pixelCoordinates_&&Kd(n,this.renderedTransform_)?f=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),f=Fp(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),tye(this.renderedTransform_,n));let g=0,y=o.length,_=0,w,A,k,R,$,H,oe,se,ge,ue,pe,Ce,_e,de=0,te=0,Se=null,Te=null,De=this.coordinateCache_,Le=this.viewRotation_,Me=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,ze={context:i,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Le},Ve=this.instructions!=o||this.overlaps?0:200,$e,nt,be,we;for(;g<y;){let ke=o[g];switch(ke[0]){case ar.BEGIN_GEOMETRY:$e=ke[1],we=ke[3],$e.getGeometry()?h!==void 0&&!Wo(h,we.getExtent())?g=ke[2]+1:++g:g=ke[2],m&&(m.zIndex=ke[4]);break;case ar.BEGIN_PATH:de>Ve&&(this.fill_(i),de=0),te>Ve&&(i.stroke(),te=0),!de&&!te&&(i.beginPath(),$=NaN,H=NaN),++g;break;case ar.CIRCLE:_=ke[1];let Qe=f[_],at=f[_+1],_t=f[_+2],ht=f[_+3],Zt=_t-Qe,Tt=ht-at,me=Math.sqrt(Zt*Zt+Tt*Tt);i.moveTo(Qe+me,at),i.arc(Qe,at,me,0,2*Math.PI,!0),++g;break;case ar.CLOSE_PATH:i.closePath(),++g;break;case ar.CUSTOM:_=ke[1],w=ke[2];let Ct=ke[3],pt=ke[4],Pe=ke[5];ze.geometry=Ct,ze.feature=$e,g in De||(De[g]=[]);let ye=De[g];Pe?Pe(f,_,w,2,ye):(ye[0]=f[_],ye[1]=f[_+1],ye.length=2),m&&(m.zIndex=ke[6]),pt(ye,ze),++g;break;case ar.DRAW_IMAGE:_=ke[1],w=ke[2],ge=ke[3],A=ke[4],k=ke[5];let lt=ke[6],Ot=ke[7],ut=ke[8],ot=ke[9],Rt=ke[10],Lt=ke[11],Nt=ke[12],ni=ke[13];R=ke[14]||"declutter";let wi=ke[15];if(!ge&&ke.length>=20){ue=ke[19],pe=ke[20],Ce=ke[21],_e=ke[22];let Xo=this.drawLabelWithPointPlacement_(ue,pe,Ce,_e);ge=Xo.label,ke[3]=ge;let uo=ke[23];A=(Xo.anchorX-uo)*this.pixelRatio,ke[4]=A;let Rn=ke[24];k=(Xo.anchorY-Rn)*this.pixelRatio,ke[5]=k,lt=ge.height,ke[6]=lt,ni=ge.width,ke[13]=ni}let vi;ke.length>25&&(vi=ke[25]);let Hi,Ei,Li;ke.length>17?(Hi=ke[16],Ei=ke[17],Li=ke[18]):(Hi=Fv,Ei=!1,Li=!1),Rt&&Me?Lt+=Le:!Rt&&!Me&&(Lt-=Le);let $i=0;for(;_<w;_+=2){if(vi&&vi[$i++]<ni/this.pixelRatio)continue;let Xo=this.calculateImageOrLabelDimensions_(ge.width,ge.height,f[_],f[_+1],ni,lt,A,k,ut,ot,Lt,Nt,s,Hi,Ei||Li,$e),uo=[i,e,ge,Xo,Ot,Ei?Se:null,Li?Te:null];if(p){let Rn,Ra,Pi;if(wi){let Ur=w-_;if(!wi[Ur]){wi[Ur]={args:uo,declutterMode:R};continue}let Zn=wi[Ur];Rn=Zn.args,Ra=Zn.declutterMode,delete wi[Ur],Pi=u1e(Rn)}let Vs,wl;if(Rn&&(Ra!=="declutter"||!p.collides(Pi))&&(Vs=!0),(R!=="declutter"||!p.collides(Xo.declutterBox))&&(wl=!0),Ra==="declutter"&&R==="declutter"){let Ur=Vs&&wl;Vs=Ur,wl=Ur}Vs&&(Ra!=="none"&&p.insert(Pi),this.replayImageOrLabel_.apply(this,Rn)),wl&&(R!=="none"&&p.insert(Xo.declutterBox),this.replayImageOrLabel_.apply(this,uo))}else this.replayImageOrLabel_.apply(this,uo)}++g;break;case ar.DRAW_CHARS:let Wt=ke[1],Sr=ke[2],En=ke[3],ro=ke[4];_e=ke[5];let yr=ke[6],Ir=ke[7],Mo=ke[8];Ce=ke[9];let kn=ke[10];ue=ke[11],pe=ke[12];let Lo=[ke[13],ke[13]];R=ke[14]||"declutter";let rr=this.textStates[pe],gr=rr.font,cs=[rr.scale[0]*Ir,rr.scale[1]*Ir],Mi;gr in this.widths_?Mi=this.widths_[gr]:(Mi={},this.widths_[gr]=Mi);let pr=m6(f,Wt,Sr,2),_o=Math.abs(cs[0])*WZ(gr,ue,Mi);if(ro||_o<=pr){let Xo=this.textStates[pe].textAlign,uo=(pr-_o)*zJ(ue,Xo),Rn=d1e(f,Wt,Sr,2,ue,uo,yr,Math.abs(cs[0]),WZ,gr,Mi,Me?0:this.viewRotation_);e:if(Rn){let Ra=[],Pi,Vs,wl,Ur,Zn;if(Ce)for(Pi=0,Vs=Rn.length;Pi<Vs;++Pi){Zn=Rn[Pi],wl=Zn[4],Ur=this.createLabel(wl,pe,"",Ce),A=Zn[2]+(cs[0]<0?-kn:kn),k=En*Ur.height+(.5-En)*2*kn*cs[1]/cs[0]-Mo;let ho=this.calculateImageOrLabelDimensions_(Ur.width,Ur.height,Zn[0],Zn[1],Ur.width,Ur.height,A,k,0,0,Zn[3],Lo,!1,Fv,!1,$e);if(p&&R==="declutter"&&p.collides(ho.declutterBox))break e;Ra.push([i,e,Ur,ho,1,null,null])}if(_e)for(Pi=0,Vs=Rn.length;Pi<Vs;++Pi){Zn=Rn[Pi],wl=Zn[4],Ur=this.createLabel(wl,pe,_e,""),A=Zn[2],k=En*Ur.height-Mo;let ho=this.calculateImageOrLabelDimensions_(Ur.width,Ur.height,Zn[0],Zn[1],Ur.width,Ur.height,A,k,0,0,Zn[3],Lo,!1,Fv,!1,$e);if(p&&R==="declutter"&&p.collides(ho.declutterBox))break e;Ra.push([i,e,Ur,ho,1,null,null])}p&&R!=="none"&&p.load(Ra.map(u1e));for(let ho=0,$s=Ra.length;ho<$s;++ho)this.replayImageOrLabel_.apply(this,Ra[ho])}}++g;break;case ar.END_GEOMETRY:if(l!==void 0){$e=ke[1];let Xo=l($e,we);if(Xo)return Xo}++g;break;case ar.FILL:Ve?de++:this.fill_(i),++g;break;case ar.MOVE_TO_LINE_TO:for(_=ke[1],w=ke[2],nt=f[_],be=f[_+1],oe=nt+.5|0,se=be+.5|0,(oe!==$||se!==H)&&(i.moveTo(nt,be),$=oe,H=se),_+=2;_<w;_+=2)nt=f[_],be=f[_+1],oe=nt+.5|0,se=be+.5|0,(_==w-2||oe!==$||se!==H)&&(i.lineTo(nt,be),$=oe,H=se);++g;break;case ar.SET_FILL_STYLE:Se=ke,this.alignAndScaleFill_=ke[2],de&&(this.fill_(i),de=0,te&&(i.stroke(),te=0)),i.fillStyle=ke[1],++g;break;case ar.SET_STROKE_STYLE:Te=ke,te&&(i.stroke(),te=0),this.setStrokeStyle_(i,ke),++g;break;case ar.STROKE:Ve?te++:i.stroke(),++g;break;default:++g;break}}de&&this.fill_(i),te&&i.stroke()}execute(i,e,n,o,s,l){this.viewRotation_=o,this.execute_(i,e,n,this.instructions,s,void 0,void 0,l)}executeHitDetection(i,e,n,o,s){return this.viewRotation_=n,this.execute_(i,[i.canvas.width,i.canvas.height],e,this.hitDetectionInstructions,!0,o,s)}},p1e=GJ;var UM=["Polygon","Circle","LineString","Image","Text","Default"],zM=["Image","Text"],m1e=UM.filter(r=>!zM.includes(r)),WJ=class{constructor(i,e,n,o,s,l,h){this.maxExtent_=i,this.overlaps_=o,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=l,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Fc(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,h)}clip(i,e){let n=this.getClipCoords(e);i.beginPath(),i.moveTo(n[0],n[1]),i.lineTo(n[2],n[3]),i.lineTo(n[4],n[5]),i.lineTo(n[6],n[7]),i.clip()}createExecutors_(i,e){for(let n in i){let o=this.executorsByZIndex_[n];o===void 0&&(o={},this.executorsByZIndex_[n]=o);let s=i[n];for(let l in s){let h=s[l];o[l]=new p1e(this.resolution_,this.pixelRatio_,this.overlaps_,h,e)}}}hasExecutors(i){for(let e in this.executorsByZIndex_){let n=this.executorsByZIndex_[e];for(let o=0,s=i.length;o<s;++o)if(i[o]in n)return!0}return!1}forEachFeatureAtCoordinate(i,e,n,o,s,l){o=Math.round(o);let h=o*2+1,p=vc(this.hitDetectionTransform_,o+.5,o+.5,1/e,-1/e,-n,-i[0],-i[1]),m=!this.hitDetectionContext_;m&&(this.hitDetectionContext_=Cs(h,h,void 0,{willReadFrequently:!0}));let f=this.hitDetectionContext_;f.canvas.width!==h||f.canvas.height!==h?(f.canvas.width=h,f.canvas.height=h):m||f.clearRect(0,0,h,h);let g;this.renderBuffer_!==void 0&&(g=Fs(),IS(g,i),xd(g,e*(this.renderBuffer_+o),g));let y=CXe(o),_;function w(se,ge){let ue=f.getImageData(0,0,h,h).data;for(let pe=0,Ce=y.length;pe<Ce;pe++)if(ue[y[pe]]>0){if(!l||_!=="Image"&&_!=="Text"||l.includes(se)){let _e=(y[pe]-3)/4,de=o-_e%h,te=o-(_e/h|0),Se=s(se,ge,de*de+te*te);if(Se)return Se}f.clearRect(0,0,h,h);break}}let A=Object.keys(this.executorsByZIndex_).map(Number);A.sort(gh);let k,R,$,H,oe;for(k=A.length-1;k>=0;--k){let se=A[k].toString();for($=this.executorsByZIndex_[se],R=UM.length-1;R>=0;--R)if(_=UM[R],H=$[_],H!==void 0&&(oe=H.executeHitDetection(f,p,n,w,g),oe))return oe}}getClipCoords(i){let e=this.maxExtent_;if(!e)return null;let n=e[0],o=e[1],s=e[2],l=e[3],h=[n,o,n,l,s,l,s,o];return Fp(h,0,8,2,i,h),h}isEmpty(){return Cd(this.executorsByZIndex_)}execute(i,e,n,o,s,l,h){let p=Object.keys(this.executorsByZIndex_).map(Number);p.sort(gh),l=l||UM;let m,f,g,y,_,w;for(h&&p.reverse(),m=0,f=p.length;m<f;++m){let A=p[m].toString();for(_=this.executorsByZIndex_[A],g=0,y=l.length;g<y;++g){let k=l[g];if(w=_[k],w!==void 0){let R=h===null?void 0:w.getZIndexContext(),$=R?R.getContext():i,H=this.maxExtent_&&k!=="Image"&&k!=="Text";if(H&&($.save(),this.clip($,n)),w.execute($,e,n,o,s,h),H&&$.restore(),R){R.offset();let oe=p[m];this.deferredZIndexContexts_[oe]||(this.deferredZIndexContexts_[oe]=[]),this.deferredZIndexContexts_[oe].push(R)}}}}this.renderedContext_=i}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){let i=this.deferredZIndexContexts_,e=Object.keys(i).map(Number).sort(gh);for(let n=0,o=e.length;n<o;++n)i[e[n]].forEach(s=>{s.draw(this.renderedContext_),s.clear()})}},HJ={};function CXe(r){if(HJ[r]!==void 0)return HJ[r];let i=r*2+1,e=r*r,n=new Array(e+1);for(let s=0;s<=r;++s)for(let l=0;l<=r;++l){let h=s*s+l*l;if(h>e)break;let p=n[h];p||(p=[],n[h]=p),p.push(((r+s)*i+(r+l))*4+3),s>0&&p.push(((r-s)*i+(r+l))*4+3),l>0&&(p.push(((r+s)*i+(r-l))*4+3),s>0&&p.push(((r-s)*i+(r-l))*4+3))}let o=[];for(let s=0,l=n.length;s<l;++s)n[s]&&o.push(...n[s]);return HJ[r]=o,o}var OV=WJ;var qJ=class extends MV{constructor(i,e,n,o,s,l,h){super(),this.context_=i,this.pixelRatio_=e,this.extent_=n,this.transform_=o,this.transformRotation_=o?MS(Math.atan2(o[1],o[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=l,this.userTransform_=h,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Fc()}drawImages_(i,e,n,o){if(!this.image_)return;let s=Fp(i,e,n,o,this.transform_,this.pixelCoordinates_),l=this.context_,h=this.tmpLocalTransform_,p=l.globalAlpha;this.imageOpacity_!=1&&(l.globalAlpha=p*this.imageOpacity_);let m=this.imageRotation_;this.transformRotation_===0&&(m-=this.viewRotation_),this.imageRotateWithView_&&(m+=this.viewRotation_);for(let f=0,g=s.length;f<g;f+=2){let y=s[f]-this.imageAnchorX_,_=s[f+1]-this.imageAnchorY_;if(m!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){let w=y+this.imageAnchorX_,A=_+this.imageAnchorY_;vc(h,w,A,1,1,m,-w,-A),l.save(),l.transform.apply(l,h),l.translate(w,A),l.scale(this.imageScale_[0],this.imageScale_[1]),l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),l.restore()}else l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,_,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(l.globalAlpha=p)}drawText_(i,e,n,o){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);let s=Fp(i,e,n,o,this.transform_,this.pixelCoordinates_),l=this.context_,h=this.textRotation_;for(this.transformRotation_===0&&(h-=this.viewRotation_),this.textRotateWithView_&&(h+=this.viewRotation_);e<n;e+=o){let p=s[e]+this.textOffsetX_,m=s[e+1]+this.textOffsetY_;h!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(l.save(),l.translate(p-this.textOffsetX_,m-this.textOffsetY_),l.rotate(h),l.translate(this.textOffsetX_,this.textOffsetY_),l.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&l.strokeText(this.text_,0,0),this.textFillState_&&l.fillText(this.text_,0,0),l.restore()):(this.textStrokeState_&&l.strokeText(this.text_,p,m),this.textFillState_&&l.fillText(this.text_,p,m))}}moveToLineTo_(i,e,n,o,s){let l=this.context_,h=Fp(i,e,n,o,this.transform_,this.pixelCoordinates_);l.moveTo(h[0],h[1]);let p=h.length;s&&(p-=2);for(let m=2;m<p;m+=2)l.lineTo(h[m],h[m+1]);return s&&l.closePath(),n}drawRings_(i,e,n,o){for(let s=0,l=n.length;s<l;++s)e=this.moveToLineTo_(i,e,n[s],o,!0);return e}drawCircle(i){if(this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wo(this.extent_,i.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=sye(i,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],o=e[3]-e[1],s=Math.sqrt(n*n+o*o),l=this.context_;l.beginPath(),l.arc(e[0],e[1],s,0,2*Math.PI),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}this.text_!==""&&this.drawText_(i.getCenter(),0,2,2)}}setStyle(i){this.setFillStrokeStyle(i.getFill(),i.getStroke()),this.setImageStyle(i.getImage()),this.setTextStyle(i.getText())}setTransform(i){this.transform_=i}drawGeometry(i){switch(i.getType()){case"Point":this.drawPoint(i);break;case"LineString":this.drawLineString(i);break;case"Polygon":this.drawPolygon(i);break;case"MultiPoint":this.drawMultiPoint(i);break;case"MultiLineString":this.drawMultiLineString(i);break;case"MultiPolygon":this.drawMultiPolygon(i);break;case"GeometryCollection":this.drawGeometryCollection(i);break;case"Circle":this.drawCircle(i);break;default:}}drawFeature(i,e){let n=e.getGeometryFunction()(i);n&&(this.setStyle(e),this.drawGeometry(n))}drawGeometryCollection(i){let e=i.getGeometriesArray();for(let n=0,o=e.length;n<o;++n)this.drawGeometry(e[n])}drawPoint(i){this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=i.getFlatCoordinates(),n=i.getStride();this.image_&&this.drawImages_(e,0,e.length,n),this.text_!==""&&this.drawText_(e,0,e.length,n)}drawMultiPoint(i){this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=i.getFlatCoordinates(),n=i.getStride();this.image_&&this.drawImages_(e,0,e.length,n),this.text_!==""&&this.drawText_(e,0,e.length,n)}drawLineString(i){if(this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wo(this.extent_,i.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let e=this.context_,n=i.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,i.getStride(),!1),e.stroke()}if(this.text_!==""){let e=i.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(i){this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=i.getExtent();if(Wo(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let n=this.context_,o=i.getFlatCoordinates(),s=0,l=i.getEnds(),h=i.getStride();n.beginPath();for(let p=0,m=l.length;p<m;++p)s=this.moveToLineTo_(o,s,l[p],h,!1);n.stroke()}if(this.text_!==""){let n=i.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(i){if(this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wo(this.extent_,i.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=this.context_;e.beginPath(),this.drawRings_(i.getOrientedFlatCoordinates(),0,i.getEnds(),i.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){let e=i.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(i){if(this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wo(this.extent_,i.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=this.context_,n=i.getOrientedFlatCoordinates(),o=0,s=i.getEndss(),l=i.getStride();e.beginPath();for(let h=0,p=s.length;h<p;++h){let m=s[h];o=this.drawRings_(n,o,m,l)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){let e=i.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(i){let e=this.context_,n=this.contextFillState_;n?n.fillStyle!=i.fillStyle&&(n.fillStyle=i.fillStyle,e.fillStyle=i.fillStyle):(e.fillStyle=i.fillStyle,this.contextFillState_={fillStyle:i.fillStyle})}setContextStrokeState_(i){let e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=i.lineCap&&(n.lineCap=i.lineCap,e.lineCap=i.lineCap),Kd(n.lineDash,i.lineDash)||e.setLineDash(n.lineDash=i.lineDash),n.lineDashOffset!=i.lineDashOffset&&(n.lineDashOffset=i.lineDashOffset,e.lineDashOffset=i.lineDashOffset),n.lineJoin!=i.lineJoin&&(n.lineJoin=i.lineJoin,e.lineJoin=i.lineJoin),n.lineWidth!=i.lineWidth&&(n.lineWidth=i.lineWidth,e.lineWidth=i.lineWidth),n.miterLimit!=i.miterLimit&&(n.miterLimit=i.miterLimit,e.miterLimit=i.miterLimit),n.strokeStyle!=i.strokeStyle&&(n.strokeStyle=i.strokeStyle,e.strokeStyle=i.strokeStyle)):(e.lineCap=i.lineCap,e.setLineDash(i.lineDash),e.lineDashOffset=i.lineDashOffset,e.lineJoin=i.lineJoin,e.lineWidth=i.lineWidth,e.miterLimit=i.miterLimit,e.strokeStyle=i.strokeStyle,this.contextStrokeState_={lineCap:i.lineCap,lineDash:i.lineDash,lineDashOffset:i.lineDashOffset,lineJoin:i.lineJoin,lineWidth:i.lineWidth,miterLimit:i.miterLimit,strokeStyle:i.strokeStyle})}setContextTextState_(i){let e=this.context_,n=this.contextTextState_,o=i.textAlign?i.textAlign:D1;n?(n.font!=i.font&&(n.font=i.font,e.font=i.font),n.textAlign!=o&&(n.textAlign=o,e.textAlign=o),n.textBaseline!=i.textBaseline&&(n.textBaseline=i.textBaseline,e.textBaseline=i.textBaseline)):(e.font=i.font,e.textAlign=o,e.textBaseline=i.textBaseline,this.contextTextState_={font:i.font,textAlign:o,textBaseline:i.textBaseline})}setFillStrokeStyle(i,e){if(!i)this.fillState_=null;else{let n=i.getColor();this.fillState_={fillStyle:Bp(n||Td)}}if(!e)this.strokeState_=null;else{let n=e.getColor(),o=e.getLineCap(),s=e.getLineDash(),l=e.getLineDashOffset(),h=e.getLineJoin(),p=e.getWidth(),m=e.getMiterLimit(),f=s||jp;this.strokeState_={lineCap:o!==void 0?o:N_,lineDash:this.pixelRatio_===1?f:f.map(g=>g*this.pixelRatio_),lineDashOffset:(l||Vp)*this.pixelRatio_,lineJoin:h!==void 0?h:B_,lineWidth:(p!==void 0?p:Lv)*this.pixelRatio_,miterLimit:m!==void 0?m:Pv,strokeStyle:Bp(n||Rv)}}}setImageStyle(i){let e;if(!i||!(e=i.getSize())){this.image_=null;return}let n=i.getPixelRatio(this.pixelRatio_),o=i.getAnchor(),s=i.getOrigin();this.image_=i.getImage(this.pixelRatio_),this.imageAnchorX_=o[0]*n,this.imageAnchorY_=o[1]*n,this.imageHeight_=e[1]*n,this.imageOpacity_=i.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=i.getRotateWithView(),this.imageRotation_=i.getRotation();let l=i.getScaleArray();this.imageScale_=[l[0]*this.pixelRatio_/n,l[1]*this.pixelRatio_/n],this.imageWidth_=e[0]*n}setTextStyle(i){if(!i)this.text_="";else{let e=i.getFill();if(!e)this.textFillState_=null;else{let _=e.getColor();this.textFillState_={fillStyle:Bp(_||Td)}}let n=i.getStroke();if(!n)this.textStrokeState_=null;else{let _=n.getColor(),w=n.getLineCap(),A=n.getLineDash(),k=n.getLineDashOffset(),R=n.getLineJoin(),$=n.getWidth(),H=n.getMiterLimit();this.textStrokeState_={lineCap:w!==void 0?w:N_,lineDash:A||jp,lineDashOffset:k||Vp,lineJoin:R!==void 0?R:B_,lineWidth:$!==void 0?$:Lv,miterLimit:H!==void 0?H:Pv,strokeStyle:Bp(_||Rv)}}let o=i.getFont(),s=i.getOffsetX(),l=i.getOffsetY(),h=i.getRotateWithView(),p=i.getRotation(),m=i.getScaleArray(),f=i.getText(),g=i.getTextAlign(),y=i.getTextBaseline();this.textState_={font:o!==void 0?o:M6,textAlign:g!==void 0?g:D1,textBaseline:y!==void 0?y:VS},this.text_=f!==void 0?Array.isArray(f)?f.reduce((_,w,A)=>_+=A%2?" ":w,""):f:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=l!==void 0?this.pixelRatio_*l:0,this.textRotateWithView_=h!==void 0?h:!1,this.textRotation_=p!==void 0?p:0,this.textScale_=[this.pixelRatio_*m[0],this.pixelRatio_*m[1]]}}},PV=qJ;var ip=.5;function RV(r,i,e,n,o,s,l,h,p){let m=p?E_(o,p):o,f=r[0]*ip,g=r[1]*ip,y=Cs(f,g);y.imageSmoothingEnabled=!1;let _=y.canvas,w=new PV(y,ip,o,null,l,h,p?Gg(Kc(),p):null),A=e.length,k=Math.floor((256*256*256-1)/A),R={};for(let H=1;H<=A;++H){let oe=e[H-1],se=oe.getStyleFunction()||n;if(!se)continue;let ge=se(oe,s);if(!ge)continue;Array.isArray(ge)||(ge=[ge]);let pe=(H*k).toString(16).padStart(7,"#00000");for(let Ce=0,_e=ge.length;Ce<_e;++Ce){let de=ge[Ce],te=de.getGeometryFunction()(oe);if(!te||!Wo(m,te.getExtent()))continue;let Se=de.clone(),Te=Se.getFill();Te&&Te.setColor(pe);let De=Se.getStroke();De&&(De.setColor(pe),De.setLineDash(null)),Se.setText(void 0);let Le=de.getImage();if(Le){let $e=Le.getImageSize();if(!$e)continue;let nt=Cs($e[0],$e[1],void 0,{alpha:!1}),be=nt.canvas;nt.fillStyle=pe,nt.fillRect(0,0,be.width,be.height),Se.setImage(new Tu({img:be,anchor:Le.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Le.getOrigin(),opacity:1,size:Le.getSize(),scale:Le.getScale(),rotation:Le.getRotation(),rotateWithView:Le.getRotateWithView()}))}let Me=Se.getZIndex()||0,ze=R[Me];ze||(ze={},R[Me]=ze,ze.Polygon=[],ze.Circle=[],ze.LineString=[],ze.Point=[]);let Ve=te.getType();if(Ve==="GeometryCollection"){let $e=te.getGeometriesArrayRecursive();for(let nt=0,be=$e.length;nt<be;++nt){let we=$e[nt];ze[we.getType().replace("Multi","")].push(we,Se)}}else ze[Ve.replace("Multi","")].push(te,Se)}}let $=Object.keys(R).map(Number).sort(gh);for(let H=0,oe=$.length;H<oe;++H){let se=R[$[H]];for(let ge in se){let ue=se[ge];for(let pe=0,Ce=ue.length;pe<Ce;pe+=2){w.setStyle(ue[pe+1]);for(let _e=0,de=i.length;_e<de;++_e)w.setTransform(i[_e]),w.drawGeometry(ue[pe])}}}return y.getImageData(0,0,_.width,_.height)}function FV(r,i,e){let n=[];if(e){let o=Math.floor(Math.round(r[0])*ip),s=Math.floor(Math.round(r[1])*ip),l=(ss(o,0,e.width-1)+ss(s,0,e.height-1)*e.width)*4,h=e.data[l],p=e.data[l+1],f=e.data[l+2]+256*(p+256*h),g=Math.floor((256*256*256-1)/i.length);f&&f%g===0&&n.push(i[f/g-1])}return n}var xXe=.5,f1e={Point:DXe,LineString:AXe,Polygon:OXe,MultiPoint:kXe,MultiLineString:EXe,MultiPolygon:MXe,GeometryCollection:TXe,Circle:SXe};function g1e(r,i){return parseInt(Xi(r),10)-parseInt(Xi(i),10)}function ZS(r,i){let e=YJ(r,i);return e*e}function YJ(r,i){return xXe*r/i}function SXe(r,i,e,n,o){let s=e.getFill(),l=e.getStroke();if(s||l){let p=r.getBuilder(e.getZIndex(),"Circle");p.setFillStrokeStyle(s,l),p.drawCircle(i,n,o)}let h=e.getText();if(h&&h.getText()){let p=r.getBuilder(e.getZIndex(),"Text");p.setTextStyle(h),p.drawText(i,n)}}function GM(r,i,e,n,o,s,l,h){let p=[],m=e.getImage();if(m){let y=!0,_=m.getImageState();_==en.LOADED||_==en.ERROR?y=!1:_==en.IDLE&&m.load(),y&&p.push(m.ready())}let f=e.getFill();f&&f.loading()&&p.push(f.ready());let g=p.length>0;return g&&Promise.all(p).then(()=>o(null)),IXe(r,i,e,n,s,l,h),g}function IXe(r,i,e,n,o,s,l){let h=e.getGeometryFunction()(i);if(!h)return;let p=h.simplifyTransformed(n,o);if(e.getRenderer())_1e(r,p,e,i,l);else{let f=f1e[p.getType()];f(r,p,e,i,l,s)}}function _1e(r,i,e,n,o){if(i.getType()=="GeometryCollection"){let l=i.getGeometries();for(let h=0,p=l.length;h<p;++h)_1e(r,l[h],e,n,o);return}r.getBuilder(e.getZIndex(),"Default").drawCustom(i,n,e.getRenderer(),e.getHitDetectionRenderer(),o)}function TXe(r,i,e,n,o,s){let l=i.getGeometriesArray(),h,p;for(h=0,p=l.length;h<p;++h){let m=f1e[l[h].getType()];m(r,l[h],e,n,o,s)}}function AXe(r,i,e,n,o){let s=e.getStroke();if(s){let h=r.getBuilder(e.getZIndex(),"LineString");h.setFillStrokeStyle(null,s),h.drawLineString(i,n,o)}let l=e.getText();if(l&&l.getText()){let h=r.getBuilder(e.getZIndex(),"Text");h.setTextStyle(l),h.drawText(i,n,o)}}function EXe(r,i,e,n,o){let s=e.getStroke();if(s){let h=r.getBuilder(e.getZIndex(),"LineString");h.setFillStrokeStyle(null,s),h.drawMultiLineString(i,n,o)}let l=e.getText();if(l&&l.getText()){let h=r.getBuilder(e.getZIndex(),"Text");h.setTextStyle(l),h.drawText(i,n,o)}}function MXe(r,i,e,n,o){let s=e.getFill(),l=e.getStroke();if(l||s){let p=r.getBuilder(e.getZIndex(),"Polygon");p.setFillStrokeStyle(s,l),p.drawMultiPolygon(i,n,o)}let h=e.getText();if(h&&h.getText()){let p=r.getBuilder(e.getZIndex(),"Text");p.setTextStyle(h),p.drawText(i,n,o)}}function DXe(r,i,e,n,o,s){let l=e.getImage(),h=e.getText(),p=h&&h.getText(),m=s&&l&&p?{}:void 0;if(l){if(l.getImageState()!=en.LOADED)return;let f=r.getBuilder(e.getZIndex(),"Image");f.setImageStyle(l,m),f.drawPoint(i,n,o)}if(p){let f=r.getBuilder(e.getZIndex(),"Text");f.setTextStyle(h,m),f.drawText(i,n,o)}}function kXe(r,i,e,n,o,s){let l=e.getImage(),h=l&&l.getOpacity()!==0,p=e.getText(),m=p&&p.getText(),f=s&&h&&m?{}:void 0;if(h){if(l.getImageState()!=en.LOADED)return;let g=r.getBuilder(e.getZIndex(),"Image");g.setImageStyle(l,f),g.drawMultiPoint(i,n,o)}if(m){let g=r.getBuilder(e.getZIndex(),"Text");g.setTextStyle(p,f),g.drawText(i,n,o)}}function OXe(r,i,e,n,o){let s=e.getFill(),l=e.getStroke();if(s||l){let p=r.getBuilder(e.getZIndex(),"Polygon");p.setFillStrokeStyle(s,l),p.drawPolygon(i,n,o)}let h=e.getText();if(h&&h.getText()){let p=r.getBuilder(e.getZIndex(),"Text");p.setTextStyle(h),p.drawText(i,n,o)}}var KJ=class extends VM{constructor(i){super(i),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Fs(),this.wrappedRenderedExtent_=Fs(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(i,e,n){let o=e.extent,s=e.viewState,l=s.center,h=s.resolution,p=s.projection,m=s.rotation,f=p.getExtent(),g=this.getLayer().getSource(),y=this.getLayer().getDeclutter(),_=e.pixelRatio,w=e.viewHints,A=!(w[Ws.ANIMATING]||w[Ws.INTERACTING]),k=this.context,R=Math.round(or(o)/h*_),$=Math.round(is(o)/h*_),H=g.getWrapX()&&p.canWrapX(),oe=H?or(f):null,se=H?Math.ceil((o[2]-f[2])/oe)+1:1,ge=H?Math.floor((o[0]-f[0])/oe):0;do{let ue=this.getRenderTransform(l,h,m,_,R,$,ge*oe);i.execute(k,[k.canvas.width,k.canvas.height],ue,m,A,n===void 0?UM:n?zM:m1e,n?y&&e.declutter[y]:void 0)}while(++ge<se)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Cs(this.context.canvas.width,this.context.canvas.height,UJ))}resetDrawContext_(){if(this.opacity_!==1){let i=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=i,Ov(this.context),UJ.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(i){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,i,!0)}renderDeferredInternal(i){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.resetDrawContext_())}renderFrame(i,e){let n=i.pixelRatio,o=i.layerStatesArray[i.layerIndex];this.opacity_=o.opacity;let s=i.extent,l=i.viewState.resolution,h=Math.round(or(s)/l*n),p=Math.round(is(s)/l*n);vc(this.pixelTransform,i.size[0]/2,i.size[1]/2,1/n,1/n,0,-h/2,-p/2),C1(this.inversePixelTransform,this.pixelTransform);let m=iM(this.pixelTransform);this.useContainer(e,m,this.getBackground(i));let f=this.context,g=f.canvas,y=this.replayGroup_,_=y&&!y.isEmpty();if(!_&&!(this.getLayer().hasListener(Du.PRERENDER)||this.getLayer().hasListener(Du.POSTRENDER)))return null;g.width!=h||g.height!=p?(g.width=h,g.height=p,g.style.transform!==m&&(g.style.transform=m)):this.containerReused||f.clearRect(0,0,h,p),this.setDrawContext_(),this.preRender(f,i);let w=i.viewState,A=w.projection,k=!1;if(_&&o.extent&&this.clipping){let R=dh(o.extent,A);_=Wo(R,i.extent),k=_&&!fc(R,i.extent),k&&this.clipUnrotated(f,i,R)}return _&&this.renderWorlds(y,i,this.getLayer().getDeclutter()?!1:void 0),k&&f.restore(),this.postRender(f,i),this.renderedRotation_!==w.rotation&&(this.renderedRotation_=w.rotation,this.hitDetectionImageData_=null),i.declutter||this.resetDrawContext_(),this.container}getFeatures(i){return new Promise(e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){let n=[this.context.canvas.width,this.context.canvas.height];Hs(this.pixelTransform,n);let o=this.renderedCenter_,s=this.renderedResolution_,l=this.renderedRotation_,h=this.renderedProjection_,p=this.wrappedRenderedExtent_,m=this.getLayer(),f=[],g=n[0]*ip,y=n[1]*ip;f.push(this.getRenderTransform(o,s,l,ip,g,y,0).slice());let _=m.getSource(),w=h.getExtent();if(_.getWrapX()&&h.canWrapX()&&!fc(w,p)){let k=p[0],R=or(w),$=0,H;for(;k<w[0];)--$,H=R*$,f.push(this.getRenderTransform(o,s,l,ip,g,y,H).slice()),k+=R;for($=0,k=p[2];k>w[2];)++$,H=R*$,f.push(this.getRenderTransform(o,s,l,ip,g,y,H).slice()),k-=R}let A=Kc();this.hitDetectionImageData_=RV(n,f,this.renderedFeatures_,m.getStyleFunction(),p,s,l,ZS(s,this.renderedPixelRatio_),A?h:null)}e(FV(i,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(i,e,n,o,s){if(!this.replayGroup_)return;let l=e.viewState.resolution,h=e.viewState.rotation,p=this.getLayer(),m={},f=function(w,A,k){let R=Xi(w),$=m[R];if($){if($!==!0&&k<$.distanceSq){if(k===0)return m[R]=!0,s.splice(s.lastIndexOf($),1),o(w,p,A);$.geometry=A,$.distanceSq=k}}else{if(k===0)return m[R]=!0,o(w,p,A);s.push(m[R]={feature:w,layer:p,geometry:A,distanceSq:k,callback:o})}},g,y=[this.replayGroup_],_=this.getLayer().getDeclutter();return y.some(w=>g=w.forEachFeatureAtCoordinate(i,l,h,n,f,_&&e.declutter[_]?e.declutter[_].all().map(A=>A.value):null)),g}handleFontsChanged(){let i=this.getLayer();i.getVisible()&&this.replayGroup_&&i.changed()}handleStyleImageChange_(i){this.renderIfReadyAndVisible()}prepareFrame(i){let e=this.getLayer(),n=e.getSource();if(!n)return!1;let o=i.viewHints[Ws.ANIMATING],s=i.viewHints[Ws.INTERACTING],l=e.getUpdateWhileAnimating(),h=e.getUpdateWhileInteracting();if(this.ready&&!l&&o||!h&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;let p=i.extent,m=i.viewState,f=m.projection,g=m.resolution,y=i.pixelRatio,_=e.getRevision(),w=e.getRenderBuffer(),A=e.getRenderOrder();A===void 0&&(A=g1e);let k=m.center.slice(),R=xd(p,w*g),$=R.slice(),H=[R.slice()],oe=f.getExtent();if(n.getWrapX()&&f.canWrapX()&&!fc(oe,i.extent)){let De=or(oe),Le=Math.max(or(R)/2,De);R[0]=oe[0]-Le,R[2]=oe[2]+Le,BE(k,f);let Me=uK(H[0],f);Me[0]<oe[0]&&Me[2]<oe[2]?H.push([Me[0]+De,Me[1],Me[2]+De,Me[3]]):Me[0]>oe[0]&&Me[2]>oe[2]&&H.push([Me[0]-De,Me[1],Me[2]-De,Me[3]])}if(this.ready&&this.renderedResolution_==g&&this.renderedRevision_==_&&this.renderedRenderOrder_==A&&fc(this.wrappedRenderedExtent_,R))return Kd(this.renderedExtent_,$)||(this.hitDetectionImageData_=null,this.renderedExtent_=$),this.renderedCenter_=k,this.replayGroupChanged=!1,!0;this.replayGroup_=null;let se=new DV(YJ(g,y),R,g,y),ge=Kc(),ue;if(ge){for(let De=0,Le=H.length;De<Le;++De){let Me=H[De],ze=E_(Me,f);n.loadFeatures(ze,B0e(g,f),ge)}ue=Gg(ge,f)}else for(let De=0,Le=H.length;De<Le;++De)n.loadFeatures(H[De],g,f);let pe=ZS(g,y),Ce=!0,_e=(De,Le)=>{let Me,ze=De.getStyleFunction()||e.getStyleFunction();if(ze&&(Me=ze(De,g)),Me){let Ve=this.renderFeature(De,pe,Me,se,ue,this.getLayer().getDeclutter(),Le);Ce=Ce&&!Ve}},de=E_(R,f),te=n.getFeaturesInExtent(de);A&&te.sort(A);for(let De=0,Le=te.length;De<Le;++De)_e(te[De],De);this.renderedFeatures_=te,this.ready=Ce;let Se=se.finish(),Te=new OV(R,g,y,n.getOverlaps(),Se,e.getRenderBuffer(),!!i.declutter);return this.renderedResolution_=g,this.renderedRevision_=_,this.renderedRenderOrder_=A,this.renderedExtent_=$,this.wrappedRenderedExtent_=R,this.renderedCenter_=k,this.renderedProjection_=f,this.renderedPixelRatio_=y,this.replayGroup_=Te,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(i,e,n,o,s,l,h){if(!n)return!1;let p=!1;if(Array.isArray(n))for(let m=0,f=n.length;m<f;++m)p=GM(o,i,n[m],e,this.boundHandleStyleImageChange_,s,l,h)||p;else p=GM(o,i,n,e,this.boundHandleStyleImageChange_,s,l,h);return p}},y1e=KJ;var ZJ=class extends NM{constructor(i){super(i)}createRenderer(){return new y1e(this)}},i0=ZJ;function v1e(r){if(!(r.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");let i=r.inversePixelTransform[0],e=r.inversePixelTransform[1],n=Math.sqrt(i*i+e*e),o=r.frameState,s=eM(r.inversePixelTransform.slice(),o.coordinateToPixelTransform),l=ZS(o.viewState.resolution,n),h,p=Kc();return p&&(h=Gg(p,o.viewState.projection)),new PV(r.context,n,o.extent,s,o.viewState.rotation,l,h)}function MR(r,i){return Hs(r.inversePixelTransform,i.slice(0))}var n0=class extends Ls{constructor(i,e){super(i),this.layer=e}},QJ={LAYERS:"layers"},XJ=class r extends CV{constructor(i){i=i||{};let e=Object.assign({},i);delete e.layers;let n=i.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(QJ.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new al(n.slice(),{unique:!0}):Nn(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new al(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Fo),this.layersListenerKeys_.length=0;let i=this.getLayers();this.layersListenerKeys_.push($r(i,sl.ADD,this.handleLayersAdd_,this),$r(i,sl.REMOVE,this.handleLayersRemove_,this));for(let n in this.listenerKeys_)this.listenerKeys_[n].forEach(Fo);xf(this.listenerKeys_);let e=i.getArray();for(let n=0,o=e.length;n<o;n++){let s=e[n];this.registerLayerListeners_(s),this.dispatchEvent(new n0("addlayer",s))}this.changed()}registerLayerListeners_(i){let e=[$r(i,Zg.PROPERTYCHANGE,this.handleLayerChange_,this),$r(i,Zi.CHANGE,this.handleLayerChange_,this)];i instanceof r&&e.push($r(i,"addlayer",this.handleLayerGroupAdd_,this),$r(i,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Xi(i)]=e}handleLayerGroupAdd_(i){this.dispatchEvent(new n0("addlayer",i.layer))}handleLayerGroupRemove_(i){this.dispatchEvent(new n0("removelayer",i.layer))}handleLayersAdd_(i){let e=i.element;this.registerLayerListeners_(e),this.dispatchEvent(new n0("addlayer",e)),this.changed()}handleLayersRemove_(i){let e=i.element,n=Xi(e);this.listenerKeys_[n].forEach(Fo),delete this.listenerKeys_[n],this.dispatchEvent(new n0("removelayer",e)),this.changed()}getLayers(){return this.get(QJ.LAYERS)}setLayers(i){let e=this.getLayers();if(e){let n=e.getArray();for(let o=0,s=n.length;o<s;++o)this.dispatchEvent(new n0("removelayer",n[o]))}this.set(QJ.LAYERS,i)}getLayersArray(i){return i=i!==void 0?i:[],this.getLayers().forEach(function(e){e.getLayersArray(i)}),i}getLayerStatesArray(i){let e=i!==void 0?i:[],n=e.length;this.getLayers().forEach(function(l){l.getLayerStatesArray(e)});let o=this.getLayerState(),s=o.zIndex;!i&&o.zIndex===void 0&&(s=0);for(let l=n,h=e.length;l<h;l++){let p=e[l];p.opacity*=o.opacity,p.visible=p.visible&&o.visible,p.maxResolution=Math.min(p.maxResolution,o.maxResolution),p.minResolution=Math.max(p.minResolution,o.minResolution),p.minZoom=Math.max(p.minZoom,o.minZoom),p.maxZoom=Math.min(p.maxZoom,o.maxZoom),o.extent!==void 0&&(p.extent!==void 0?p.extent=ch(p.extent,o.extent):p.extent=o.extent),p.zIndex===void 0&&(p.zIndex=s)}return e}getSourceState(){return"ready"}},r0=XJ;var QS={ACTIVE:"active"};var JJ=class extends yc{constructor(i){super(),this.on,this.once,this.un,i&&i.handleEvent&&(this.handleEvent=i.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(QS.ACTIVE)}getMap(){return this.map_}handleEvent(i){return!0}setActive(i){this.set(QS.ACTIVE,i)}setMap(i){this.map_=i}};function b1e(r,i,e){let n=r.getCenterInternal();if(n){let o=[n[0]+i[0],n[1]+i[1]];r.animateInternal({duration:e!==void 0?e:250,easing:rwe,center:r.getConstrainedCenter(o)})}}function HM(r,i,e,n){let o=r.getZoom();if(o===void 0)return;let s=r.getConstrainedZoom(o+i),l=r.getResolutionForZoom(s);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:l,anchor:e,duration:n!==void 0?n:250,easing:Nc})}var Of=JJ;var no={SINGLECLICK:"singleclick",CLICK:Zi.CLICK,DBLCLICK:Zi.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var eee=class extends Of{constructor(i){i=i||{},super(i),i.handleDownEvent&&(this.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(this.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(this.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(this.handleUpEvent=i.handleUpEvent),i.stopDown&&(this.stopDown=i.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(i){return!1}handleDragEvent(i){}handleEvent(i){if(!i.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(i),this.handlingDownUpSequence){if(i.type==no.POINTERDRAG)this.handleDragEvent(i),i.originalEvent.preventDefault();else if(i.type==no.POINTERUP){let n=this.handleUpEvent(i);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(i.type==no.POINTERDOWN){let n=this.handleDownEvent(i);this.handlingDownUpSequence=n,e=this.stopDown(n)}else i.type==no.POINTERMOVE&&this.handleMoveEvent(i);return!e}handleMoveEvent(i){}handleUpEvent(i){return!1}stopDown(i){return i}updateTrackedPointers_(i){i.activePointers&&(this.targetPointers=i.activePointers)}};function WM(r){let i=r.length,e=0,n=0;for(let o=0;o<i;o++)e+=r[o].clientX,n+=r[o].clientY;return{clientX:e/i,clientY:n/i}}var Ch=eee;var tee=class extends ZE{constructor(i){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+i,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){let i=this.startPixel_,e=this.endPixel_,n="px",o=this.element_.style;o.left=Math.min(i[0],e[0])+n,o.top=Math.min(i[1],e[1])+n,o.width=Math.abs(e[0]-i[0])+n,o.height=Math.abs(e[1]-i[1])+n}setMap(i){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);let e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=i,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(i,e){this.startPixel_=i,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){let i=this.startPixel_,e=this.endPixel_,o=[i,[i[0],e[1]],e,[e[0],i[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new Zo([o])}getGeometry(){return this.geometry_}},w1e=tee;function DR(r){let i=arguments;return function(e){let n=!0;for(let o=0,s=i.length;o<s&&(n=n&&i[o](e),!!n);++o);return n}}var C1e=function(r){let i=r.originalEvent;return i.altKey&&!(i.metaKey||i.ctrlKey)&&!i.shiftKey},x1e=function(r){let i=r.originalEvent;return i.altKey&&!(i.metaKey||i.ctrlKey)&&i.shiftKey},PXe=function(r){let i=r.map.getTargetElement(),e=r.map.getOwnerDocument().activeElement;return i.contains(e)},LV=function(r){return r.map.getTargetElement().hasAttribute("tabindex")?PXe(r):!0},Zv=Iu,S1e=function(r){return r.type==no.CLICK},NV=function(r){let i=r.originalEvent;return i.button==0&&!(_0e&&MP&&i.ctrlKey)},kR=If;var BV=function(r){return r.type==no.SINGLECLICK},I1e=function(r){return r.type==no.DBLCLICK},qM=function(r){let i=r.originalEvent;return!i.altKey&&!(i.metaKey||i.ctrlKey)&&!i.shiftKey};var T1e=function(r){let i=r.originalEvent;return MP?i.metaKey:i.ctrlKey},YM=function(r){let i=r.originalEvent;return!i.altKey&&!(i.metaKey||i.ctrlKey)&&i.shiftKey},jV=function(r){let i=r.originalEvent,e=i.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!i.target.isContentEditable},VV=function(r){let i=r.originalEvent;return Nn(i!==void 0,"mapBrowserEvent must originate from a pointer event"),i.pointerType=="mouse"};var $V=function(r){let i=r.originalEvent;return Nn(i!==void 0,"mapBrowserEvent must originate from a pointer event"),i.isPrimary&&i.button===0};var UV={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},OR=class extends Ls{constructor(i,e,n){super(i),this.coordinate=e,this.mapBrowserEvent=n}},iee=class extends Ch{constructor(i){super(),this.on,this.once,this.un,i=i||{},this.box_=new w1e(i.className||"ol-dragbox"),this.minArea_=i.minArea!==void 0?i.minArea:64,i.onBoxEnd&&(this.onBoxEnd=i.onBoxEnd),this.startPixel_=null,this.condition_=i.condition?i.condition:NV,this.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(i,e,n){let o=n[0]-e[0],s=n[1]-e[1];return o*o+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(i){this.box_.setPixels(this.startPixel_,i.pixel),this.dispatchEvent(new OR(UV.BOXDRAG,i.coordinate,i))}handleUpEvent(i){this.box_.setMap(null);let e=this.boxEndCondition_(i,this.startPixel_,i.pixel);return e&&this.onBoxEnd(i),this.dispatchEvent(new OR(e?UV.BOXEND:UV.BOXCANCEL,i.coordinate,i)),!1}handleDownEvent(i){return this.condition_(i)?(this.startPixel_=i.pixel,this.box_.setMap(i.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new OR(UV.BOXSTART,i.coordinate,i)),!0):!1}onBoxEnd(i){}},zV=iee;function z1e(r){let i=r.cloneNode(!0),e=i.querySelectorAll("[id]"),n=r.nodeName.toLowerCase();i.removeAttribute("id");for(let o=0;o<e.length;o++)e[o].removeAttribute("id");return n==="canvas"?M1e(r,i):(n==="input"||n==="select"||n==="textarea")&&E1e(r,i),A1e("canvas",r,i,M1e),A1e("input, textarea, select",r,i,E1e),i}function A1e(r,i,e,n){let o=i.querySelectorAll(r);if(o.length){let s=e.querySelectorAll(r);for(let l=0;l<o.length;l++)n(o[l],s[l])}}var FXe=0;function E1e(r,i){i.type!=="file"&&(i.value=r.value),i.type==="radio"&&i.name&&(i.name=`mat-clone-${i.name}-${FXe++}`)}function M1e(r,i){let e=i.getContext("2d");if(e)try{e.drawImage(r,0,0)}catch{}}function dee(r){let i=r.getBoundingClientRect();return{top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height,x:i.x,y:i.y}}function ree(r,i,e){let{top:n,bottom:o,left:s,right:l}=r;return e>=n&&e<=o&&i>=s&&i<=l}function RR(r,i,e){r.top+=i,r.bottom=r.top+r.height,r.left+=e,r.right=r.left+r.width}function D1e(r,i,e,n){let{top:o,right:s,bottom:l,left:h,width:p,height:m}=r,f=p*i,g=m*i;return n>o-g&&n<l+g&&e>h-f&&e<s+f}var qV=class{constructor(i){this._document=i,this.positions=new Map}clear(){this.positions.clear()}cache(i){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),i.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:dee(e)})})}handleScroll(i){let e=Hc(i),n=this.positions.get(e);if(!n)return null;let o=n.scrollPosition,s,l;if(e===this._document){let m=this.getViewportScrollPosition();s=m.top,l=m.left}else s=e.scrollTop,l=e.scrollLeft;let h=o.top-s,p=o.left-l;return this.positions.forEach((m,f)=>{m.clientRect&&e!==f&&e.contains(f)&&RR(m.clientRect,h,p)}),o.top=s,o.left=l,{top:h,left:p}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function G1e(r,i){let e=r.rootNodes;if(e.length===1&&e[0].nodeType===i.ELEMENT_NODE)return e[0];let n=i.createElement("div");return e.forEach(o=>n.appendChild(o)),n}function uee(r,i,e){for(let n in i)if(i.hasOwnProperty(n)){let o=i[n];o?r.setProperty(n,o,e?.has(n)?"important":""):r.removeProperty(n)}return r}function KM(r,i){let e=i?"":"none";uee(r.style,{"touch-action":i?"":"none","-webkit-user-drag":i?"":"none","-webkit-tap-highlight-color":i?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function k1e(r,i,e){uee(r.style,{position:i?"":"fixed",top:i?"":"0",opacity:i?"":"0",left:i?"":"-999em"},e)}function YV(r,i){return i&&i!="none"?r+" "+i:r}function O1e(r,i){r.style.width=`${i.width}px`,r.style.height=`${i.height}px`,r.style.transform=KV(i.left,i.top)}function KV(r,i){return`translate3d(${Math.round(r)}px, ${Math.round(i)}px, 0)`}function P1e(r){let i=r.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(r)*i}function LXe(r){let i=getComputedStyle(r),e=nee(i,"transition-property"),n=e.find(h=>h==="transform"||h==="all");if(!n)return 0;let o=e.indexOf(n),s=nee(i,"transition-duration"),l=nee(i,"transition-delay");return P1e(s[o])+P1e(l[o])}function nee(r,i){return r.getPropertyValue(i).split(",").map(n=>n.trim())}var NXe=new Set(["position"]),oee=class{get element(){return this._preview}constructor(i,e,n,o,s,l,h,p,m){this._document=i,this._rootElement=e,this._direction=n,this._initialDomRect=o,this._previewTemplate=s,this._previewClass=l,this._pickupPositionOnPage=h,this._initialTransform=p,this._zIndex=m}attach(i){this._preview=this._createPreview(),i.appendChild(this._preview),R1e(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(i){this._preview.style.transform=i}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(i){this._preview.classList.add(i)}getTransitionDuration(){return LXe(this._preview)}addEventListener(i,e){this._preview.addEventListener(i,e)}removeEventListener(i,e){this._preview.removeEventListener(i,e)}_createPreview(){let i=this._previewTemplate,e=this._previewClass,n=i?i.template:null,o;if(n&&i){let s=i.matchSize?this._initialDomRect:null,l=i.viewContainer.createEmbeddedView(n,i.context);l.detectChanges(),o=G1e(l,this._document),this._previewEmbeddedView=l,i.matchSize?O1e(o,s):o.style.transform=KV(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else o=z1e(this._rootElement),O1e(o,this._initialDomRect),this._initialTransform&&(o.style.transform=this._initialTransform);return uee(o.style,{"pointer-events":"none",margin:R1e(o)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},NXe),KM(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("popover","manual"),o.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(s=>o.classList.add(s)):o.classList.add(e)),o}};function R1e(r){return"showPopover"in r}var F1e=Ul({passive:!0}),GV=Ul({passive:!1}),L1e=Ul({passive:!1,capture:!0}),BXe=800,N1e=new Set(["position"]),see=class{get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(i){i!==this._disabled&&(this._disabled=i,this._toggleNativeDragInteractions(),this._handles.forEach(e=>KM(e,i)))}constructor(i,e,n,o,s,l){this._config=e,this._document=n,this._ngZone=o,this._viewportRuler=s,this._dragDropRegistry=l,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=Vl(!1),this._moveEvents=new Dt,this._pointerMoveSubscription=pn.EMPTY,this._pointerUpSubscription=pn.EMPTY,this._scrollSubscription=pn.EMPTY,this._resizeSubscription=pn.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this.scale=1,this._disabled=!1,this.beforeStarted=new Dt,this.started=new Dt,this.released=new Dt,this.ended=new Dt,this.entered=new Dt,this.exited=new Dt,this.dropped=new Dt,this.moved=this._moveEvents,this._pointerDown=h=>{if(this.beforeStarted.next(),this._handles.length){let p=this._getTargetHandle(h);p&&!this._disabledHandles.has(p)&&!this.disabled&&this._initializeDragSequence(p,h)}else this.disabled||this._initializeDragSequence(this._rootElement,h)},this._pointerMove=h=>{let p=this._getPointerPositionOnPage(h);if(!this._hasStartedDragging()){let f=Math.abs(p.x-this._pickupPositionOnPage.x),g=Math.abs(p.y-this._pickupPositionOnPage.y);if(f+g>=this._config.dragStartThreshold){let _=Date.now()>=this._dragStartTime+this._getDragStartDelay(h),w=this._dropContainer;if(!_){this._endDragSequence(h);return}(!w||!w.isDragging()&&!w.isReceiving())&&(h.cancelable&&h.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(h)))}return}h.cancelable&&h.preventDefault();let m=this._getConstrainedPointerPosition(p);if(this._hasMoved=!0,this._lastKnownPointerPosition=p,this._updatePointerDirectionDelta(m),this._dropContainer)this._updateActiveDropContainer(m,p);else{let f=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,g=this._activeTransform;g.x=m.x-f.x+this._passiveTransform.x,g.y=m.y-f.y+this._passiveTransform.y,this._applyRootElementTransform(g.x,g.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:m,event:h,distance:this._getDragDistance(m),delta:this._pointerDirectionDelta})})},this._pointerUp=h=>{this._endDragSequence(h)},this._nativeDragStart=h=>{if(this._handles.length){let p=this._getTargetHandle(h);p&&!this._disabledHandles.has(p)&&!this.disabled&&h.preventDefault()}else this.disabled||h.preventDefault()},this.withRootElement(i).withParent(e.parentDragRef||null),this._parentPositions=new qV(n),l.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(i){this._handles=i.map(n=>ac(n)),this._handles.forEach(n=>KM(n,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&e.add(n)}),this._disabledHandles=e,this}withPreviewTemplate(i){return this._previewTemplate=i,this}withPlaceholderTemplate(i){return this._placeholderTemplate=i,this}withRootElement(i){let e=ac(i);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,GV),e.addEventListener("touchstart",this._pointerDown,F1e),e.addEventListener("dragstart",this._nativeDragStart,GV)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(i){return this._boundaryElement=i?ac(i):null,this._resizeSubscription.unsubscribe(),i&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(i){return this._parentDragRef=i,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(i){!this._disabledHandles.has(i)&&this._handles.indexOf(i)>-1&&(this._disabledHandles.add(i),KM(i,!0))}enableHandle(i){this._disabledHandles.has(i)&&(this._disabledHandles.delete(i),KM(i,this.disabled))}withDirection(i){return this._direction=i,this}_withDropContainer(i){this._dropContainer=i}getFreeDragPosition(){let i=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:i.x,y:i.y}}setFreeDragPosition(i){return this._activeTransform={x:0,y:0},this._passiveTransform.x=i.x,this._passiveTransform.y=i.y,this._dropContainer||this._applyRootElementTransform(i.x,i.y),this}withPreviewContainer(i){return this._previewContainer=i,this}_sortFromLastPointerPosition(){let i=this._lastKnownPointerPosition;i&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(i),i)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._getShadowRoot()?.removeEventListener("selectstart",j1e,L1e)}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(i){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:i}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(i),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(i);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:i})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(i){PR(i)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),n=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{e.addEventListener("selectstart",j1e,L1e)}),n){let o=this._rootElement,s=o.parentNode,l=this._placeholder=this._createPlaceholderElement(),h=this._anchor=this._anchor||this._document.createComment("");s.insertBefore(h,o),this._initialTransform=o.style.transform||"",this._preview=new oee(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3),this._preview.attach(this._getPreviewInsertionPoint(s,e)),k1e(o,!1,N1e),this._document.body.appendChild(s.replaceChild(l,o)),this.started.next({source:this,event:i}),n.start(),this._initialContainer=n,this._initialIndex=n.getItemIndex(this)}else this.started.next({source:this,event:i}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(n?n.getScrollableParents():[])}_initializeDragSequence(i,e){this._parentDragRef&&e.stopPropagation();let n=this.isDragging(),o=PR(e),s=!o&&e.button!==0,l=this._rootElement,h=Hc(e),p=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+BXe>Date.now(),m=o?yx(e):_x(e);if(h&&h.draggable&&e.type==="mousedown"&&e.preventDefault(),n||s||p||m)return;if(this._handles.length){let y=l.style;this._rootElementTapHighlight=y.webkitTapHighlightColor||"",y.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(y=>this._updateOnScroll(y)),this._boundaryElement&&(this._boundaryRect=dee(this._boundaryElement));let f=this._previewTemplate;this._pickupPositionInElement=f&&f.template&&!f.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,i,e);let g=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:g.x,y:g.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(i){k1e(this._rootElement,!0,N1e),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,n=e.getItemIndex(this),o=this._getPointerPositionOnPage(i),s=this._getDragDistance(o),l=e._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:s,dropPoint:o,event:i}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:l,distance:s,dropPoint:o,event:i}),e.drop(this,n,this._initialIndex,this._initialContainer,l,s,o,i),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:i,y:e},{x:n,y:o}){let s=this._initialContainer._getSiblingContainerFromPosition(this,i,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,i,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,o),this._dropContainer._sortItem(this,i,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(i,e):this._applyPreviewTransform(i-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let i=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(i.left,i.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{let o=l=>{(!l||this._preview&&Hc(l)===this._preview.element&&l.propertyName==="transform")&&(this._preview?.removeEventListener("transitionend",o),n(),clearTimeout(s))},s=setTimeout(o,e*1.5);this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){let i=this._placeholderTemplate,e=i?i.template:null,n;return e?(this._placeholderRef=i.viewContainer.createEmbeddedView(e,i.context),this._placeholderRef.detectChanges(),n=G1e(this._placeholderRef,this._document)):n=z1e(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(i,e,n){let o=e===this._rootElement?null:e,s=o?o.getBoundingClientRect():i,l=PR(n)?n.targetTouches[0]:n,h=this._getViewportScrollPosition(),p=l.pageX-s.left-h.left,m=l.pageY-s.top-h.top;return{x:s.left-i.left+p,y:s.top-i.top+m}}_getPointerPositionOnPage(i){let e=this._getViewportScrollPosition(),n=PR(i)?i.touches[0]||i.changedTouches[0]||{pageX:0,pageY:0}:i,o=n.pageX-e.left,s=n.pageY-e.top;if(this._ownerSVGElement){let l=this._ownerSVGElement.getScreenCTM();if(l){let h=this._ownerSVGElement.createSVGPoint();return h.x=o,h.y=s,h.matrixTransform(l.inverse())}}return{x:o,y:s}}_getConstrainedPointerPosition(i){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:n,y:o}=this.constrainPosition?this.constrainPosition(i,this,this._initialDomRect,this._pickupPositionInElement):i;if(this.lockAxis==="x"||e==="x"?o=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(n=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:s,y:l}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,h=this._boundaryRect,{width:p,height:m}=this._getPreviewRect(),f=h.top+l,g=h.bottom-(m-l),y=h.left+s,_=h.right-(p-s);n=B1e(n,y,_),o=B1e(o,f,g)}return{x:n,y:o}}_updatePointerDirectionDelta(i){let{x:e,y:n}=i,o=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,l=Math.abs(e-s.x),h=Math.abs(n-s.y);return l>this._config.pointerDirectionChangeThreshold&&(o.x=e>s.x?1:-1,s.x=e),h>this._config.pointerDirectionChangeThreshold&&(o.y=n>s.y?1:-1,s.y=n),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let i=this._handles.length>0||!this.isDragging();i!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=i,KM(this._rootElement,i))}_removeRootElementListeners(i){i.removeEventListener("mousedown",this._pointerDown,GV),i.removeEventListener("touchstart",this._pointerDown,F1e),i.removeEventListener("dragstart",this._nativeDragStart,GV)}_applyRootElementTransform(i,e){let n=1/this.scale,o=KV(i*n,e*n),s=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=s.transform&&s.transform!="none"?s.transform:""),s.transform=YV(o,this._initialTransform)}_applyPreviewTransform(i,e){let n=this._previewTemplate?.template?void 0:this._initialTransform,o=KV(i,e);this._preview.setTransform(YV(o,n))}_getDragDistance(i){let e=this._pickupPositionOnPage;return e?{x:i.x-e.x,y:i.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:i,y:e}=this._passiveTransform;if(i===0&&e===0||this.isDragging()||!this._boundaryElement)return;let n=this._rootElement.getBoundingClientRect(),o=this._boundaryElement.getBoundingClientRect();if(o.width===0&&o.height===0||n.width===0&&n.height===0)return;let s=o.left-n.left,l=n.right-o.right,h=o.top-n.top,p=n.bottom-o.bottom;o.width>n.width?(s>0&&(i+=s),l>0&&(i-=l)):i=0,o.height>n.height?(h>0&&(e+=h),p>0&&(e-=p)):e=0,(i!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:i})}_getDragStartDelay(i){let e=this.dragStartDelay;return typeof e=="number"?e:PR(i)?e.touch:e?e.mouse:0}_updateOnScroll(i){let e=this._parentPositions.handleScroll(i);if(e){let n=Hc(i);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&RR(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=eA(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(i,e){let n=this._previewContainer||"global";if(n==="parent")return i;if(n==="global"){let o=this._document;return e||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return ac(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_getTargetHandle(i){return this._handles.find(e=>i.target&&(i.target===e||e.contains(i.target)))}};function B1e(r,i,e){return Math.max(i,Math.min(e,r))}function PR(r){return r.type[0]==="t"}function j1e(r){r.preventDefault()}function QV(r,i,e){let n=V1e(i,r.length-1),o=V1e(e,r.length-1);if(n===o)return;let s=r[n],l=o<n?-1:1;for(let h=n;h!==o;h+=l)r[h]=r[h+l];r[o]=s}function V1e(r,i){return Math.max(0,Math.min(i,r))}var ZV=class{constructor(i){this._dragDropRegistry=i,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(i){this.withItems(i)}sort(i,e,n,o){let s=this._itemPositions,l=this._getItemIndexFromPointerPosition(i,e,n,o);if(l===-1&&s.length>0)return null;let h=this.orientation==="horizontal",p=s.findIndex(k=>k.drag===i),m=s[l],f=s[p].clientRect,g=m.clientRect,y=p>l?1:-1,_=this._getItemOffsetPx(f,g,y),w=this._getSiblingOffsetPx(p,s,y),A=s.slice();return QV(s,p,l),s.forEach((k,R)=>{if(A[R]===k)return;let $=k.drag===i,H=$?_:w,oe=$?i.getPlaceholderElement():k.drag.getRootElement();k.offset+=H;let se=Math.round(k.offset*(1/k.drag.scale));h?(oe.style.transform=YV(`translate3d(${se}px, 0, 0)`,k.initialTransform),RR(k.clientRect,0,H)):(oe.style.transform=YV(`translate3d(0, ${se}px, 0)`,k.initialTransform),RR(k.clientRect,H,0))}),this._previousSwap.overlaps=ree(g,e,n),this._previousSwap.drag=m.drag,this._previousSwap.delta=h?o.x:o.y,{previousIndex:p,currentIndex:l}}enter(i,e,n,o){let s=o==null||o<0?this._getItemIndexFromPointerPosition(i,e,n):o,l=this._activeDraggables,h=l.indexOf(i),p=i.getPlaceholderElement(),m=l[s];if(m===i&&(m=l[s+1]),!m&&(s==null||s===-1||s<l.length-1)&&this._shouldEnterAsFirstChild(e,n)&&(m=l[0]),h>-1&&l.splice(h,1),m&&!this._dragDropRegistry.isDragging(m)){let f=m.getRootElement();f.parentElement.insertBefore(p,f),l.splice(s,0,i)}else this._element.appendChild(p),l.push(i);p.style.transform="",this._cacheItemPositions()}withItems(i){this._activeDraggables=i.slice(),this._cacheItemPositions()}withSortPredicate(i){this._sortPredicate=i}reset(){this._activeDraggables?.forEach(i=>{let e=i.getRootElement();if(e){let n=this._itemPositions.find(o=>o.drag===i)?.initialTransform;e.style.transform=n||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(i){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===i)}updateOnScroll(i,e){this._itemPositions.forEach(({clientRect:n})=>{RR(n,i,e)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}withElementContainer(i){this._element=i}_cacheItemPositions(){let i=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let n=e.getVisibleElement();return{drag:e,offset:0,initialTransform:n.style.transform||"",clientRect:dee(n)}}).sort((e,n)=>i?e.clientRect.left-n.clientRect.left:e.clientRect.top-n.clientRect.top)}_getItemOffsetPx(i,e,n){let o=this.orientation==="horizontal",s=o?e.left-i.left:e.top-i.top;return n===-1&&(s+=o?e.width-i.width:e.height-i.height),s}_getSiblingOffsetPx(i,e,n){let o=this.orientation==="horizontal",s=e[i].clientRect,l=e[i+n*-1],h=s[o?"width":"height"]*n;if(l){let p=o?"left":"top",m=o?"right":"bottom";n===-1?h-=l.clientRect[p]-s[m]:h+=s[p]-l.clientRect[m]}return h}_shouldEnterAsFirstChild(i,e){if(!this._activeDraggables.length)return!1;let n=this._itemPositions,o=this.orientation==="horizontal";if(n[0].drag!==this._activeDraggables[0]){let l=n[n.length-1].clientRect;return o?i>=l.right:e>=l.bottom}else{let l=n[0].clientRect;return o?i<=l.left:e<=l.top}}_getItemIndexFromPointerPosition(i,e,n,o){let s=this.orientation==="horizontal",l=this._itemPositions.findIndex(({drag:h,clientRect:p})=>{if(h===i)return!1;if(o){let m=s?o.x:o.y;if(h===this._previousSwap.drag&&this._previousSwap.overlaps&&m===this._previousSwap.delta)return!1}return s?e>=Math.floor(p.left)&&e<Math.floor(p.right):n>=Math.floor(p.top)&&n<Math.floor(p.bottom)});return l===-1||!this._sortPredicate(l,i)?-1:l}},aee=class{constructor(i,e){this._document=i,this._dragDropRegistry=e,this._previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1},this._relatedNodes=[]}start(i){let e=this._element.childNodes;this._relatedNodes=[];for(let n=0;n<e.length;n++){let o=e[n];this._relatedNodes.push([o,o.nextSibling])}this.withItems(i)}sort(i,e,n,o){let s=this._getItemIndexFromPointerPosition(i,e,n),l=this._previousSwap;if(s===-1||this._activeItems[s]===i)return null;let h=this._activeItems[s];if(l.drag===h&&l.overlaps&&l.deltaX===o.x&&l.deltaY===o.y)return null;let p=this.getItemIndex(i),m=i.getPlaceholderElement(),f=h.getRootElement();s>p?f.after(m):f.before(m),QV(this._activeItems,p,s);let g=this._getRootNode().elementFromPoint(e,n);return l.deltaX=o.x,l.deltaY=o.y,l.drag=h,l.overlaps=f===g||f.contains(g),{previousIndex:p,currentIndex:s}}enter(i,e,n,o){let s=o==null||o<0?this._getItemIndexFromPointerPosition(i,e,n):o;s===-1&&(s=this._getClosestItemIndexToPointer(i,e,n));let l=this._activeItems[s],h=this._activeItems.indexOf(i);h>-1&&this._activeItems.splice(h,1),l&&!this._dragDropRegistry.isDragging(l)?(this._activeItems.splice(s,0,i),l.getRootElement().before(i.getPlaceholderElement())):(this._activeItems.push(i),this._element.appendChild(i.getPlaceholderElement()))}withItems(i){this._activeItems=i.slice()}withSortPredicate(i){this._sortPredicate=i}reset(){let i=this._element,e=this._previousSwap;for(let n=this._relatedNodes.length-1;n>-1;n--){let[o,s]=this._relatedNodes[n];o.parentNode===i&&o.nextSibling!==s&&(s===null?i.appendChild(o):s.parentNode===i&&i.insertBefore(o,s))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(i){return this._activeItems.indexOf(i)}updateOnScroll(){this._activeItems.forEach(i=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(i){i!==this._element&&(this._element=i,this._rootNode=void 0)}_getItemIndexFromPointerPosition(i,e,n){let o=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(n)),s=o?this._activeItems.findIndex(l=>{let h=l.getRootElement();return o===h||h.contains(o)}):-1;return s===-1||!this._sortPredicate(s,i)?-1:s}_getRootNode(){return this._rootNode||(this._rootNode=eA(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(i,e,n){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let o=1/0,s=-1;for(let l=0;l<this._activeItems.length;l++){let h=this._activeItems[l];if(h!==i){let{x:p,y:m}=h.getRootElement().getBoundingClientRect(),f=Math.hypot(e-p,n-m);f<o&&(o=f,s=l)}}return s}},$1e=.05,H1e=.05,Pf=function(r){return r[r.NONE=0]="NONE",r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r}(Pf||{}),np=function(r){return r[r.NONE=0]="NONE",r[r.LEFT=1]="LEFT",r[r.RIGHT=2]="RIGHT",r}(np||{}),lee=class{constructor(i,e,n,o,s){this._dragDropRegistry=e,this._ngZone=o,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new Dt,this.entered=new Dt,this.exited=new Dt,this.dropped=new Dt,this.sorted=new Dt,this.receivingStarted=new Dt,this.receivingStopped=new Dt,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=pn.EMPTY,this._verticalScrollDirection=Pf.NONE,this._horizontalScrollDirection=np.NONE,this._stopScrollTimers=new Dt,this._cachedShadowRoot=null,this._scrollableElements=[],this._direction="ltr",this._startScrollInterval=()=>{this._stopScrolling(),qb(0,h5).pipe(rn(this._stopScrollTimers)).subscribe(()=>{let h=this._scrollNode,p=this.autoScrollStep;this._verticalScrollDirection===Pf.UP?h.scrollBy(0,-p):this._verticalScrollDirection===Pf.DOWN&&h.scrollBy(0,p),this._horizontalScrollDirection===np.LEFT?h.scrollBy(-p,0):this._horizontalScrollDirection===np.RIGHT&&h.scrollBy(p,0)})};let l=this.element=ac(i);this._document=n,this.withOrientation("vertical").withElementContainer(l),e.registerDropContainer(this),this._parentPositions=new qV(n)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(i,e,n,o){this._draggingStarted(),o==null&&this.sortingDisabled&&(o=this._draggables.indexOf(i)),this._sortStrategy.enter(i,e,n,o),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:i,container:this,currentIndex:this.getItemIndex(i)})}exit(i){this._reset(),this.exited.next({item:i,container:this})}drop(i,e,n,o,s,l,h,p={}){this._reset(),this.dropped.next({item:i,currentIndex:e,previousIndex:n,container:this,previousContainer:o,isPointerOverContainer:s,distance:l,dropPoint:h,event:p})}withItems(i){let e=this._draggables;return this._draggables=i,i.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(e.filter(o=>o.isDragging()).every(o=>i.indexOf(o)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(i){return this._direction=i,this._sortStrategy instanceof ZV&&(this._sortStrategy.direction=i),this}connectedTo(i){return this._siblings=i.slice(),this}withOrientation(i){if(i==="mixed")this._sortStrategy=new aee(this._document,this._dragDropRegistry);else{let e=new ZV(this._dragDropRegistry);e.direction=this._direction,e.orientation=i,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,n)=>this.sortPredicate(e,n,this)),this}withScrollableParents(i){let e=this._container;return this._scrollableElements=i.indexOf(e)===-1?[e,...i]:i.slice(),this}withElementContainer(i){if(i===this._container)return this;let e=ac(this.element),n=this._scrollableElements.indexOf(this._container),o=this._scrollableElements.indexOf(i);return n>-1&&this._scrollableElements.splice(n,1),o>-1&&this._scrollableElements.splice(o,1),this._sortStrategy&&this._sortStrategy.withElementContainer(i),this._cachedShadowRoot=null,this._scrollableElements.unshift(i),this._container=i,this}getScrollableParents(){return this._scrollableElements}getItemIndex(i){return this._isDragging?this._sortStrategy.getItemIndex(i):this._draggables.indexOf(i)}isReceiving(){return this._activeSiblings.size>0}_sortItem(i,e,n,o){if(this.sortingDisabled||!this._domRect||!D1e(this._domRect,$1e,e,n))return;let s=this._sortStrategy.sort(i,e,n,o);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:i})}_startScrollingIfNecessary(i,e){if(this.autoScrollDisabled)return;let n,o=Pf.NONE,s=np.NONE;if(this._parentPositions.positions.forEach((l,h)=>{h===this._document||!l.clientRect||n||D1e(l.clientRect,$1e,i,e)&&([o,s]=jXe(h,l.clientRect,this._direction,i,e),(o||s)&&(n=h))}),!o&&!s){let{width:l,height:h}=this._viewportRuler.getViewportSize(),p={width:l,height:h,top:0,right:l,bottom:h,left:0};o=W1e(p,e),s=q1e(p,i),n=window}n&&(o!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=s,this._scrollNode=n,(o||s)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let i=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=i.msScrollSnapType||i.scrollSnapType||"",i.scrollSnapType=i.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let i=this._container.style;i.scrollSnapType=i.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(i,e){return this._domRect!=null&&ree(this._domRect,i,e)}_getSiblingContainerFromPosition(i,e,n){return this._siblings.find(o=>o._canReceive(i,e,n))}_canReceive(i,e,n){if(!this._domRect||!ree(this._domRect,e,n)||!this.enterPredicate(i,this))return!1;let o=this._getShadowRoot().elementFromPoint(e,n);return o?o===this._container||this._container.contains(o):!1}_startReceiving(i,e){let n=this._activeSiblings;!n.has(i)&&e.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(n.add(i),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:i,receiver:this,items:e}))}_stopReceiving(i){this._activeSiblings.delete(i),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:i,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(i=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(i);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let i=eA(this._container);this._cachedShadowRoot=i||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let i=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,i))}};function W1e(r,i){let{top:e,bottom:n,height:o}=r,s=o*H1e;return i>=e-s&&i<=e+s?Pf.UP:i>=n-s&&i<=n+s?Pf.DOWN:Pf.NONE}function q1e(r,i){let{left:e,right:n,width:o}=r,s=o*H1e;return i>=e-s&&i<=e+s?np.LEFT:i>=n-s&&i<=n+s?np.RIGHT:np.NONE}function jXe(r,i,e,n,o){let s=W1e(i,o),l=q1e(i,n),h=Pf.NONE,p=np.NONE;if(s){let m=r.scrollTop;s===Pf.UP?m>0&&(h=Pf.UP):r.scrollHeight-m>r.clientHeight&&(h=Pf.DOWN)}if(l){let m=r.scrollLeft;e==="rtl"?l===np.RIGHT?m<0&&(p=np.RIGHT):r.scrollWidth+m>r.clientWidth&&(p=np.LEFT):l===np.LEFT?m>0&&(p=np.LEFT):r.scrollWidth-m>r.clientWidth&&(p=np.RIGHT)}return[h,p]}var HV=Ul({passive:!1,capture:!0}),WV=new Set,VXe=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=gt({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],standalone:!0,features:[yt],decls:0,vars:0,template:function(n,o){},styles:["@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}"],encapsulation:2,changeDetection:0})}}return r})(),$Xe=(()=>{class r{constructor(e,n){this._ngZone=e,this._appRef=Et(fs),this._environmentInjector=Et(zc),this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=Vl([]),this._globalListeners=new Map,this._draggingPredicate=o=>o.isDragging(),this.pointerMove=new Dt,this.pointerUp=new Dt,this.scroll=new Dt,this._preventDefaultWhileDragging=o=>{this._activeDragInstances().length>0&&o.preventDefault()},this._persistentTouchmoveListener=o=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))},this._document=n}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,HV)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,HV)}startDragging(e,n){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._loadResets(),this._activeDragInstances.update(o=>[...o,e]),this._activeDragInstances().length===1)){let o=n.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:HV}),o||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:HV}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,l)=>{this._document.addEventListener(l,s.handler,s.options)})})}}stopDragging(e){this._activeDragInstances.update(n=>{let o=n.indexOf(e);return o>-1?(n.splice(o,1),[...n]):n}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let n=[this.scroll];return e&&e!==this._document&&n.push(new si(o=>this._ngZone.runOutsideAngular(()=>{let l=h=>{this._activeDragInstances().length&&o.next(h)};return e.addEventListener("scroll",l,!0),()=>{e.removeEventListener("scroll",l,!0)}}))),vr(...n)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,n)=>{this._document.removeEventListener(n,e.handler,e.options)}),this._globalListeners.clear()}_loadResets(){if(!WV.has(this._appRef)){WV.add(this._appRef);let e=K3(VXe,{environmentInjector:this._environmentInjector});this._appRef.onDestroy(()=>{WV.delete(this._appRef),WV.size===0&&e.destroy()})}}static{this.\u0275fac=function(n){return new(n||r)(xe(ci),xe(Ui))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),UXe={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Y1e=(()=>{class r{constructor(e,n,o,s){this._document=e,this._ngZone=n,this._viewportRuler=o,this._dragDropRegistry=s}createDrag(e,n=UXe){return new see(e,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new lee(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static{this.\u0275fac=function(n){return new(n||r)(xe(Ui),xe(ci),xe(gu),xe($Xe))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),cee=new At("CDK_DRAG_PARENT");var K1e=new At("CdkDragHandle"),Z1e=(()=>{class r{get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._stateChanges.next(this)}constructor(e,n){this.element=e,this._parentDrag=n,this._stateChanges=new Dt,this._disabled=!1,n?._addHandle(this)}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(cee,12))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",Xt]},standalone:!0,features:[Bi([{provide:K1e,useExisting:r}]),an]})}}return r})(),Q1e=new At("CDK_DRAG_CONFIG"),zXe="cdk-drag",X1e=new At("CdkDropList"),J1e=(()=>{class r{static{this._dragInstances=[]}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}constructor(e,n,o,s,l,h,p,m,f,g,y){this.element=e,this.dropContainer=n,this._ngZone=s,this._viewContainerRef=l,this._dir=p,this._changeDetectorRef=f,this._selfHandle=g,this._parentDrag=y,this._destroyed=new Dt,this._handles=new mt([]),this.scale=1,this.started=new it,this.released=new it,this.ended=new it,this.entered=new it,this.exited=new it,this.dropped=new it,this.moved=new si(_=>{let w=this._dragRef.moved.pipe($t(A=>({source:this,pointerPosition:A.pointerPosition,event:A.event,delta:A.delta,distance:A.distance}))).subscribe(_);return()=>{w.unsubscribe()}}),this._injector=Et(yn),this._dragRef=m.createDrag(e,{dragStartThreshold:h&&h.dragStartThreshold!=null?h.dragStartThreshold:5,pointerDirectionChangeThreshold:h&&h.pointerDirectionChangeThreshold!=null?h.pointerDirectionChangeThreshold:5,zIndex:h?.zIndex}),this._dragRef.data=this,r._dragInstances.push(this),h&&this._assignDefaults(h),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this),n._dropListRef.beforeStarted.pipe(rn(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){ks(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let n=e.rootElementSelector,o=e.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,o&&!o.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);let e=r._dragInstances.indexOf(this);e>-1&&r._dragInstances.splice(e,1),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let n=this._handles.getValue();n.push(e),this._handles.next(n)}_removeHandle(e){let n=this._handles.getValue(),o=n.indexOf(e);o>-1&&(n.splice(o,1),this._handles.next(n))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,n=e;this.rootElementSelector&&(n=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(n||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):ac(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let n=this._dir,o=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,l=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof o=="object"&&o?o:pd(o),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(l).withPreviewContainer(this.previewContainer||"global"),n&&e.withDirection(n.value)}}),e.beforeStarted.pipe(Tn(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let n=this.element.nativeElement.parentElement;for(;n;){if(n.classList.contains(zXe)){e.withParent(r._dragInstances.find(o=>o.element.nativeElement===n)?._dragRef||null);break}n=n.parentElement}})}_handleEvents(e){e.started.subscribe(n=>{this.started.emit({source:this,event:n.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(n=>{this.released.emit({source:this,event:n.event})}),e.ended.subscribe(n=>{this.ended.emit({source:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(n=>{this.entered.emit({container:n.container.data,item:this,currentIndex:n.currentIndex})}),e.exited.subscribe(n=>{this.exited.emit({container:n.container.data,item:this})}),e.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,isPointerOverContainer:n.isPointerOverContainer,item:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event})})}_assignDefaults(e){let{lockAxis:n,dragStartDelay:o,constrainPosition:s,previewClass:l,boundaryElement:h,draggingDisabled:p,rootElementSelector:m,previewContainer:f}=e;this.disabled=p??!1,this.dragStartDelay=o||0,n&&(this.lockAxis=n),s&&(this.constrainPosition=s),l&&(this.previewClass=l),h&&(this.boundaryElement=h),m&&(this.rootElementSelector=m),f&&(this.previewContainer=f)}_setupHandlesListener(){this._handles.pipe(br(e=>{let n=e.map(o=>o.element);this._selfHandle&&this.rootElementSelector&&n.push(this.element),this._dragRef.withHandles(n)}),jr(e=>vr(...e.map(n=>n._stateChanges.pipe(yo(n))))),rn(this._destroyed)).subscribe(e=>{let n=this._dragRef,o=e.element.nativeElement;e.disabled?n.disableHandle(o):n.enableHandle(o)})}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(X1e,12),ie(Ui),ie(ci),ie(Io),ie(Q1e,8),ie(To,8),ie(Y1e),ie(Ti),ie(K1e,10),ie(cee,12))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(n,o){n&2&&oi("cdk-drag-disabled",o.disabled)("cdk-drag-dragging",o._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Xt],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",Oo]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[Bi([{provide:cee,useExisting:r}]),an,Jn]})}}return r})(),U1e=new At("CdkDropListGroup");var GXe=0,eCe=(()=>{class r{static{this._dropLists=[]}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}constructor(e,n,o,s,l,h,p){this.element=e,this._changeDetectorRef=o,this._scrollDispatcher=s,this._dir=l,this._group=h,this._destroyed=new Dt,this.connectedTo=[],this.id=`cdk-drop-list-${GXe++}`,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new it,this.entered=new it,this.exited=new it,this.sorted=new it,this._unsortedItems=new Set,this._dropListRef=n.createDropList(e),this._dropListRef.data=this,p&&this._assignDefaults(p),this._dropListRef.enterPredicate=(m,f)=>this.enterPredicate(m.data,f.data),this._dropListRef.sortPredicate=(m,f,g)=>this.sortPredicate(m,f.data,g.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),r._dropLists.push(this),h&&h._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,n)=>e._dragRef.getVisibleElement().compareDocumentPosition(n._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let e=r._dropLists.indexOf(this);e>-1&&r._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(yo(this._dir.value),rn(this._destroyed)).subscribe(n=>e.withDirection(n)),e.beforeStarted.subscribe(()=>{let n=vw(this.connectedTo).map(o=>{if(typeof o=="string"){let s=r._dropLists.find(l=>l.id===o);return s}return o});if(this._group&&this._group._items.forEach(o=>{n.indexOf(o)===-1&&n.push(o)}),!this._scrollableParentsResolved){let o=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(o),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let o=this.element.nativeElement.querySelector(this.elementContainerSelector);e.withElementContainer(o)}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=pd(this.autoScrollStep,2),e.connectedTo(n.filter(o=>o&&o!==this).map(o=>o._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(n=>{this.entered.emit({container:this,item:n.item.data,currentIndex:n.currentIndex})}),e.exited.subscribe(n=>{this.exited.emit({container:this,item:n.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(n=>{this.sorted.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,container:this,item:n.item.data})}),e.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,item:n.item.data,isPointerOverContainer:n.isPointerOverContainer,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),vr(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){let{lockAxis:n,draggingDisabled:o,sortingDisabled:s,listAutoScrollDisabled:l,listOrientation:h}=e;this.disabled=o??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=l??!1,this.orientation=h||"vertical",n&&(this.lockAxis=n)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(Y1e),ie(Ti),ie(Lg),ie(To,8),ie(U1e,12),ie(Q1e,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(n,o){n&2&&(yi("id",o.id),oi("cdk-drop-list-disabled",o.disabled)("cdk-drop-list-dragging",o._dropListRef.isDragging())("cdk-drop-list-receiving",o._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",Xt],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",Xt],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",Xt],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[Bi([{provide:U1e,useValue:void 0},{provide:X1e,useExisting:r}]),an]})}}return r})();var rp=63710088e-1,HXe={centimeters:rp*100,centimetres:rp*100,degrees:rp/111325,feet:rp*3.28084,inches:rp*39.37,kilometers:rp/1e3,kilometres:rp/1e3,meters:rp,metres:rp,miles:rp/1609.344,millimeters:rp*1e3,millimetres:rp*1e3,nauticalmiles:rp/1852,radians:1,yards:rp*1.0936},Ypi={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/rp,yards:1.0936133};function FR(r,i,e){e===void 0&&(e={});var n={type:"Feature"};return(e.id===0||e.id)&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.properties=i||{},n.geometry=r,n}function Qv(r,i,e){if(e===void 0&&(e={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!hee(r[0])||!hee(r[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:r};return FR(n,i,e)}function $1(r,i){i===void 0&&(i={});var e={type:"FeatureCollection"};return i.id&&(e.id=i.id),i.bbox&&(e.bbox=i.bbox),e.features=r,e}function tCe(r,i){i===void 0&&(i="kilometers");var e=HXe[i];if(!e)throw new Error(i+" units is invalid");return r*e}function iCe(r){var i=r%360;return i<0&&(i+=360),i}function LR(r){var i=r%360;return i*Math.PI/180}function hee(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function ZM(r,i,e){if(r!==null)for(var n,o,s,l,h,p,m,f=0,g=0,y,_=r.type,w=_==="FeatureCollection",A=_==="Feature",k=w?r.features.length:1,R=0;R<k;R++){m=w?r.features[R].geometry:A?r.geometry:r,y=m?m.type==="GeometryCollection":!1,h=y?m.geometries.length:1;for(var $=0;$<h;$++){var H=0,oe=0;if(l=y?m.geometries[$]:m,l!==null){p=l.coordinates;var se=l.type;switch(f=e&&(se==="Polygon"||se==="MultiPolygon")?1:0,se){case null:break;case"Point":if(i(p,g,R,H,oe)===!1)return!1;g++,H++;break;case"LineString":case"MultiPoint":for(n=0;n<p.length;n++){if(i(p[n],g,R,H,oe)===!1)return!1;g++,se==="MultiPoint"&&H++}se==="LineString"&&H++;break;case"Polygon":case"MultiLineString":for(n=0;n<p.length;n++){for(o=0;o<p[n].length-f;o++){if(i(p[n][o],g,R,H,oe)===!1)return!1;g++}se==="MultiLineString"&&H++,se==="Polygon"&&oe++}se==="Polygon"&&H++;break;case"MultiPolygon":for(n=0;n<p.length;n++){for(oe=0,o=0;o<p[n].length;o++){for(s=0;s<p[n][o].length-f;s++){if(i(p[n][o][s],g,R,H,oe)===!1)return!1;g++}oe++}H++}break;case"GeometryCollection":for(n=0;n<l.geometries.length;n++)if(ZM(l.geometries[n],i,e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function NR(r,i){if(r.type==="Feature")i(r,0);else if(r.type==="FeatureCollection")for(var e=0;e<r.features.length&&i(r.features[e],e)!==!1;e++);}function WXe(r){var i=[];return r.type==="FeatureCollection"?NR(r,function(e){ZM(e,function(n){i.push(Qv(n,e.properties))})}):ZM(r,function(e){i.push(Qv(e,r.properties))}),$1(i)}var rCe=WXe;function pee(r){var i=[1/0,1/0,-1/0,-1/0];return ZM(r,function(e){i[0]>e[0]&&(i[0]=e[0]),i[1]>e[1]&&(i[1]=e[1]),i[2]<e[0]&&(i[2]=e[0]),i[3]<e[1]&&(i[3]=e[1])}),i}pee.default=pee;var oCe=pee;function qXe(r,i){i===void 0&&(i={});var e=oCe(r),n=(e[0]+e[2])/2,o=(e[1]+e[3])/2;return Qv([n,o],i.properties,i)}var sCe=qXe;function YXe(r){if(!r)throw new Error("geojson is required");switch(r.type){case"Feature":return aCe(r);case"FeatureCollection":return KXe(r);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return mee(r);default:throw new Error("unknown GeoJSON type")}}function aCe(r){var i={type:"Feature"};return Object.keys(r).forEach(function(e){switch(e){case"type":case"properties":case"geometry":return;default:i[e]=r[e]}}),i.properties=lCe(r.properties),i.geometry=mee(r.geometry),i}function lCe(r){var i={};return r&&Object.keys(r).forEach(function(e){var n=r[e];typeof n=="object"?n===null?i[e]=null:Array.isArray(n)?i[e]=n.map(function(o){return o}):i[e]=lCe(n):i[e]=n}),i}function KXe(r){var i={type:"FeatureCollection"};return Object.keys(r).forEach(function(e){switch(e){case"type":case"features":return;default:i[e]=r[e]}}),i.features=r.features.map(function(e){return aCe(e)}),i}function mee(r){var i={type:r.type};return r.bbox&&(i.bbox=r.bbox),r.type==="GeometryCollection"?(i.geometries=r.geometries.map(function(e){return mee(e)}),i):(i.coordinates=cCe(r.coordinates),i)}function cCe(r){var i=r;return typeof i[0]!="object"?i.slice():i.map(function(e){return cCe(e)})}var dCe=YXe;function BR(r){if(!r)throw new Error("coord is required");if(!Array.isArray(r)){if(r.type==="Feature"&&r.geometry!==null&&r.geometry.type==="Point")return r.geometry.coordinates;if(r.type==="Point")return r.coordinates}if(Array.isArray(r)&&r.length>=2&&!Array.isArray(r[0])&&!Array.isArray(r[1]))return r;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function uCe(r){return r.type==="Feature"?r.geometry:r}function ZXe(r,i,e){e===void 0&&(e={});var n=BR(r),o=BR(i),s=LR(o[1]-n[1]),l=LR(o[0]-n[0]),h=LR(n[1]),p=LR(o[1]),m=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(h)*Math.cos(p);return tCe(2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m)),e.units)}var hCe=ZXe;function QXe(r,i){if(!r)throw new Error("targetPoint is required");if(!i)throw new Error("points is required");var e,n=1/0,o=0;return NR(i,function(s,l){var h=hCe(r,s);h<n&&(o=l,n=h)}),e=dCe(i.features[o]),e.properties.featureIndex=o,e.properties.distanceToPoint=n,e}var pCe=QXe;function fee(r,i,e){if(e===void 0&&(e={}),!r)throw new Error("point is required");if(!i)throw new Error("polygon is required");var n=BR(r),o=uCe(i),s=o.type,l=i.bbox,h=o.coordinates;if(l&&XXe(n,l)===!1)return!1;s==="Polygon"&&(h=[h]);for(var p=!1,m=0;m<h.length&&!p;m++)if(mCe(n,h[m][0],e.ignoreBoundary)){for(var f=!1,g=1;g<h[m].length&&!f;)mCe(n,h[m][g],!e.ignoreBoundary)&&(f=!0),g++;f||(p=!0)}return p}function mCe(r,i,e){var n=!1;i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]&&(i=i.slice(0,i.length-1));for(var o=0,s=i.length-1;o<i.length;s=o++){var l=i[o][0],h=i[o][1],p=i[s][0],m=i[s][1],f=r[1]*(l-p)+h*(p-r[0])+m*(r[0]-l)===0&&(l-r[0])*(p-r[0])<=0&&(h-r[1])*(m-r[1])<=0;if(f)return!e;var g=h>r[1]!=m>r[1]&&r[0]<(p-l)*(r[1]-h)/(m-h)+l;g&&(n=!n)}return n}function XXe(r,i){return i[0]<=r[0]&&i[1]<=r[1]&&i[2]>=r[0]&&i[3]>=r[1]}function JXe(r){for(var i=eJe(r),e=sCe(i),n=!1,o=0;!n&&o<i.features.length;){var s=i.features[o].geometry,l,h,p,m,f,g,y,_=!1;if(s.type==="Point")e.geometry.coordinates[0]===s.coordinates[0]&&e.geometry.coordinates[1]===s.coordinates[1]&&(n=!0);else if(s.type==="MultiPoint"){var w=!1;for(y=0;!w&&y<s.coordinates.length;)e.geometry.coordinates[0]===s.coordinates[y][0]&&e.geometry.coordinates[1]===s.coordinates[y][1]&&(n=!0,w=!0),y++}else if(s.type==="LineString")for(y=0;!_&&y<s.coordinates.length-1;)l=e.geometry.coordinates[0],h=e.geometry.coordinates[1],p=s.coordinates[y][0],m=s.coordinates[y][1],f=s.coordinates[y+1][0],g=s.coordinates[y+1][1],fCe(l,h,p,m,f,g)&&(_=!0,n=!0),y++;else if(s.type==="MultiLineString")for(var A=0;A<s.coordinates.length;){_=!1,y=0;for(var k=s.coordinates[A];!_&&y<k.length-1;)l=e.geometry.coordinates[0],h=e.geometry.coordinates[1],p=k[y][0],m=k[y][1],f=k[y+1][0],g=k[y+1][1],fCe(l,h,p,m,f,g)&&(_=!0,n=!0),y++;A++}else(s.type==="Polygon"||s.type==="MultiPolygon")&&fee(e,s)&&(n=!0);o++}if(n)return e;var R=$1([]);for(o=0;o<i.features.length;o++)R.features=R.features.concat(rCe(i.features[o]).features);return Qv(pCe(e,R).geometry.coordinates)}function eJe(r){return r.type!=="FeatureCollection"?r.type!=="Feature"?$1([FR(r)]):$1([r]):r}function fCe(r,i,e,n,o,s){var l=Math.sqrt((o-e)*(o-e)+(s-n)*(s-n)),h=Math.sqrt((r-e)*(r-e)+(i-n)*(i-n)),p=Math.sqrt((o-r)*(o-r)+(s-i)*(s-i));return l===h+p}var jR=JXe;var tJe=["switch"],iJe=["*"];function nJe(r,i){r&1&&(ne(0,"span",10),jl(),ne(1,"svg",12),wt(2,"path",13),ce(),ne(3,"svg",14),wt(4,"path",15),ce()())}var rJe=new At("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1,disabledInteractive:!1})}),oJe={provide:Gc,useExisting:Go(()=>QM),multi:!0},XV=class{constructor(i,e){this.source=i,this.checked=e}},sJe=0,QM=(()=>{class r{_createChangeEvent(e){return new XV(this,e)}get buttonId(){return`${this.id||this._uniqueId}-button`}focus(){this._switchElement.nativeElement.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(e,n,o,s,l,h){this._elementRef=e,this._focusMonitor=n,this._changeDetectorRef=o,this.defaults=l,this._onChange=p=>{},this._onTouched=()=>{},this._validatorOnChange=()=>{},this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this.change=new it,this.toggleChange=new it,this.tabIndex=parseInt(s)||0,this.color=l.color||"accent",this._noopAnimations=h==="NoopAnimations",this.id=this._uniqueId=`mat-mdc-slide-toggle-${++sJe}`,this.hideIcon=l.hideIcon??!1,this.disabledInteractive=l.disabledInteractive??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e==="keyboard"||e==="program"?(this._focused=!0,this._changeDetectorRef.markForCheck()):e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(e){e.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorOnChange=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.disabled||(this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new XV(this,this.checked))))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(il),ie(Ti),oc("tabindex"),ie(rJe),ie(so,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-slide-toggle"]],viewQuery:function(n,o){if(n&1&&Ni(tJe,5),n&2){let s;Yt(s=Kt())&&(o._switchElement=s.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(n,o){n&2&&(hd("id",o.id),yi("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),Hr(o.color?"mat-"+o.color:""),oi("mat-mdc-slide-toggle-focused",o._focused)("mat-mdc-slide-toggle-checked",o.checked)("_mat-animation-noopable",o._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",Xt],color:"color",disabled:[2,"disabled","disabled",Xt],disableRipple:[2,"disableRipple","disableRipple",Xt],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Oo(e)],checked:[2,"checked","checked",Xt],hideIcon:[2,"hideIcon","hideIcon",Xt],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Xt]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],standalone:!0,features:[Bi([oJe,{provide:bp,useExisting:r,multi:!0}]),an,Jn,yt],ngContentSelectors:iJe,decls:13,vars:27,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(n,o){if(n&1){let s=dt();Qi(),ne(0,"div",1)(1,"button",2,0),Oe("click",function(){return Re(s),Fe(o._handleClick())}),wt(3,"span",3),ne(4,"span",4)(5,"span",5)(6,"span",6),wt(7,"span",7),ce(),ne(8,"span",8),wt(9,"span",9),ce(),We(10,nJe,5,0,"span",10),ce()()(),ne(11,"label",11),Oe("click",function(h){return Re(s),Fe(h.stopPropagation())}),pi(12),ce()()}if(n&2){let s=ji(2);ee("labelPosition",o.labelPosition),q(),oi("mdc-switch--selected",o.checked)("mdc-switch--unselected",!o.checked)("mdc-switch--checked",o.checked)("mdc-switch--disabled",o.disabled)("mat-mdc-slide-toggle-disabled-interactive",o.disabledInteractive),ee("tabIndex",o.disabled&&!o.disabledInteractive?-1:o.tabIndex)("disabled",o.disabled&&!o.disabledInteractive),yi("id",o.buttonId)("name",o.name)("aria-label",o.ariaLabel)("aria-labelledby",o._getAriaLabelledBy())("aria-describedby",o.ariaDescribedby)("aria-required",o.required||null)("aria-checked",o.checked)("aria-disabled",o.disabled&&o.disabledInteractive?"true":null),q(8),ee("matRippleTrigger",s)("matRippleDisabled",o.disableRipple||o.disabled)("matRippleCentered",!0),q(),vn(o.hideIcon?-1:10),q(),ee("for",o.buttonId),yi("id",o._labelId)}},dependencies:[fd,hA],styles:['.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mdc-switch-track-width)}.mdc-switch.mdc-switch--disabled{cursor:default;pointer-events:none}.mdc-switch.mat-mdc-slide-toggle-disabled-interactive{pointer-events:auto}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mdc-switch-track-height);border-radius:var(--mdc-switch-track-shape, var(--mat-app-corner-full))}.mdc-switch--disabled.mdc-switch .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-switch-track-outline-width);border-color:var(--mat-switch-track-outline-color, var(--mat-app-outline))}.cdk-high-contrast-active .mdc-switch__track::before,.cdk-high-contrast-active .mdc-switch__track::after{border-color:currentColor}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-switch-selected-track-outline-width);border-color:var(--mat-switch-selected-track-outline-color)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-switch-disabled-unselected-track-outline-width);border-color:var(--mat-switch-disabled-unselected-track-outline-color, var(--mat-app-on-surface))}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mdc-switch-unselected-track-color, var(--mat-app-surface-variant))}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, var(--mat-app-surface-variant))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, var(--mat-app-surface-variant))}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, var(--mat-app-surface-variant))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::before,.mdc-switch.mdc-switch--disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, var(--mat-app-surface-variant))}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mdc-switch-selected-track-color, var(--mat-app-primary))}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, var(--mat-app-primary))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, var(--mat-app-primary))}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, var(--mat-app-primary))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::after,.mdc-switch.mdc-switch--disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, var(--mat-app-on-surface))}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mdc-switch-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mdc-switch-handle-width);height:var(--mdc-switch-handle-height);border-radius:var(--mdc-switch-handle-shape, var(--mat-app-corner-full))}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size);height:var(--mat-switch-unselected-handle-size);margin:var(--mat-switch-unselected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size);height:var(--mat-switch-selected-handle-size);margin:var(--mat-switch-selected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size);height:var(--mat-switch-with-icon-handle-size)}.mat-mdc-slide-toggle .mdc-switch:active:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size);height:var(--mat-switch-pressed-handle-size)}.mat-mdc-slide-toggle .mdc-switch--selected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}.cdk-high-contrast-active .mdc-switch__handle::before,.cdk-high-contrast-active .mdc-switch__handle::after{border-color:currentColor}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mat-app-on-primary))}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, var(--mat-app-primary-container))}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, var(--mat-app-primary-container))}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, var(--mat-app-primary-container))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:hover:not(:focus):not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:focus:not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:active .mdc-switch__handle::after,.mdc-switch--selected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, var(--mat-app-surface))}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, var(--mat-app-outline))}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, var(--mat-app-on-surface-variant))}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, var(--mat-app-on-surface-variant))}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, var(--mat-app-on-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, var(--mat-app-on-surface))}.mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__shadow,.mdc-switch.mdc-switch--disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mdc-switch-state-layer-size);height:var(--mdc-switch-state-layer-size)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch--disabled .mdc-switch__ripple::after{display:none}.mat-mdc-slide-toggle-disabled-interactive .mdc-switch__ripple::after{display:block}.mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:focus .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:active .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:hover:not(:focus) .mdc-switch__ripple::after,.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-focus-state-layer-color, var(--mat-app-on-surface))}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-pressed-state-layer-color, var(--mat-app-on-surface));opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-selected-hover-state-layer-color, var(--mat-app-primary))}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-selected-focus-state-layer-color, var(--mat-app-primary))}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-selected-pressed-state-layer-color, var(--mat-app-primary));opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size);fill:var(--mdc-switch-unselected-icon-color, var(--mat-app-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mat-app-surface-variant))}.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size);fill:var(--mdc-switch-selected-icon-color, var(--mat-app-on-primary-container))}.mdc-switch--selected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mat-app-on-surface))}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{-webkit-user-select:none;user-select:none;display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-switch-label-text-color, var(--mat-app-on-surface));font-family:var(--mat-switch-label-text-font, var(--mat-app-body-medium-font));line-height:var(--mat-switch-label-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-switch-label-text-size, var(--mat-app-body-medium-size));letter-spacing:var(--mat-switch-label-text-tracking, var(--mat-app-body-medium-tracking));font-weight:var(--mat-switch-label-text-weight, var(--mat-app-body-medium-weight))}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}'],encapsulation:2,changeDetection:0})}}return r})();var JV=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[QM,on,on]})}}return r})();var gee=class extends Of{constructor(i){super(),i=i||{},this.delta_=i.delta?i.delta:1,this.duration_=i.duration!==void 0?i.duration:250}handleEvent(i){let e=!1;if(i.type==no.DBLCLICK){let n=i.originalEvent,o=i.map,s=i.coordinate,l=n.shiftKey?-this.delta_:this.delta_,h=o.getView();HM(h,l,s,this.duration_),n.preventDefault(),e=!0}return!e}},gCe=gee;var _ee=class extends Ch{constructor(i){super({stopDown:If}),i=i||{},this.kinetic_=i.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;let e=i.condition?i.condition:DR(qM,$V);this.condition_=i.onFocusOnly?DR(LV,e):e,this.noKinetic_=!1}handleDragEvent(i){let e=i.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());let n=this.targetPointers,o=e.getEventPixel(WM(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(o[0],o[1]),this.lastCentroid){let s=[this.lastCentroid[0]-o[0],o[1]-this.lastCentroid[1]],h=i.map.getView();Fj(s,h.getResolution()),NE(s,h.getRotation()),h.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=o,this.lastPointersCount_=n.length,i.originalEvent.preventDefault()}handleUpEvent(i){let e=i.map,n=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){let o=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),l=n.getCenterInternal(),h=e.getPixelFromCoordinateInternal(l),p=e.getCoordinateFromPixelInternal([h[0]-o*Math.cos(s),h[1]-o*Math.sin(s)]);n.animateInternal({center:n.getConstrainedCenter(p),duration:500,easing:Nc})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(i){if(this.targetPointers.length>0&&this.condition_(i)){let n=i.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},_Ce=_ee;var yee=class extends Ch{constructor(i){i=i||{},super({stopDown:If}),this.condition_=i.condition?i.condition:x1e,this.lastAngle_=void 0,this.duration_=i.duration!==void 0?i.duration:250}handleDragEvent(i){if(!VV(i))return;let e=i.map,n=e.getView();if(n.getConstraints().rotation===RM)return;let o=e.getSize(),s=i.pixel,l=Math.atan2(o[1]/2-s[1],s[0]-o[0]/2);if(this.lastAngle_!==void 0){let h=l-this.lastAngle_;n.adjustRotationInternal(-h)}this.lastAngle_=l}handleUpEvent(i){return VV(i)?(i.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(i){return VV(i)&&NV(i)&&this.condition_(i)?(i.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}},yCe=yee;var vee=class extends zV{constructor(i){i=i||{};let e=i.condition?i.condition:YM;super({condition:e,className:i.className||"ol-dragzoom",minArea:i.minArea}),this.duration_=i.duration!==void 0?i.duration:200,this.out_=i.out!==void 0?i.out:!1}onBoxEnd(i){let n=this.getMap().getView(),o=this.getGeometry();if(this.out_){let s=n.rotatedExtentForGeometry(o),l=n.getResolutionForExtentInternal(s),h=n.getResolution()/l;o=o.clone(),o.scale(h*h)}n.fitInternal(o,{duration:this.duration_,easing:Nc})}},vCe=vee;var bee=class extends Ls{constructor(i,e,n){super(i),this.map=e,this.frameState=n!==void 0?n:null}},U1=bee;var wee=class extends U1{constructor(i,e,n,o,s,l){super(i,e,s),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=o!==void 0?o:!1,this.activePointers=l}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(i){this.pixel_=i}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(i){this.coordinate_=i}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},Rf=wee;var e8={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},XM=class extends Ls{constructor(i,e){super(i),this.feature=e}};function lJe(r,i){let e=[];for(let n=0;n<i.length;++n){let s=i[n].getGeometry();bCe(r,s,e)}return e}function t8(r,i){return Op(r[0],r[1],i[0],i[1])}function JM(r,i){let e=r.length;return i<0?r[i+e]:i>=e?r[i-e]:r[i]}function i8(r,i,e){let n,o;i<e?(n=i,o=e):(n=e,o=i);let s=Math.ceil(n),l=Math.floor(o);if(s>l){let p=e2(r,n),m=e2(r,o);return t8(p,m)}let h=0;if(n<s){let p=e2(r,n),m=JM(r,s);h+=t8(p,m)}if(l<o){let p=JM(r,l),m=e2(r,o);h+=t8(p,m)}for(let p=s;p<l-1;++p){let m=JM(r,p),f=JM(r,p+1);h+=t8(m,f)}return h}function bCe(r,i,e){if(i instanceof ao){n8(r,i.getCoordinates(),!1,e);return}if(i instanceof Qa){let n=i.getCoordinates();for(let o=0,s=n.length;o<s;++o)n8(r,n[o],!1,e);return}if(i instanceof Zo){let n=i.getCoordinates();for(let o=0,s=n.length;o<s;++o)n8(r,n[o],!0,e);return}if(i instanceof _l){let n=i.getCoordinates();for(let o=0,s=n.length;o<s;++o){let l=n[o];for(let h=0,p=l.length;h<p;++h)n8(r,l[h],!0,e)}return}if(i instanceof Yl){let n=i.getGeometries();for(let o=0;o<n.length;++o)bCe(r,n[o],e);return}}var Cee={index:-1,endIndex:NaN};function cJe(r,i,e,n){let o=r[0],s=r[1],l=1/0,h=-1,p=NaN;for(let g=0;g<i.targets.length;++g){let y=i.targets[g],_=y.coordinates,w=1/0,A;for(let k=0;k<_.length-1;++k){let R=_[k],$=_[k+1],H=wCe(o,s,R,$);H.squaredDistance<w&&(w=H.squaredDistance,A=k+H.along)}w<l&&(l=w,y.ring&&i.targetIndex===g&&(y.endIndex>y.startIndex?A<y.startIndex&&(A+=_.length):y.endIndex<y.startIndex&&A>y.startIndex&&(A-=_.length)),p=A,h=g)}let m=i.targets[h],f=m.ring;if(i.targetIndex===h&&f){let g=e2(m.coordinates,p),y=e.getPixelFromCoordinate(g);g1(y,i.startPx)>n&&(f=!1)}if(f){let g=m.coordinates,y=g.length,_=m.startIndex,w=p;if(_<w){let A=i8(g,_,w);i8(g,_,w-y)<A&&(p-=y)}else{let A=i8(g,_,w);i8(g,_,w+y)<A&&(p+=y)}}return Cee.index=h,Cee.endIndex=p,Cee}function n8(r,i,e,n){let o=r[0],s=r[1];for(let l=0,h=i.length-1;l<h;++l){let p=i[l],m=i[l+1],f=wCe(o,s,p,m);if(f.squaredDistance===0){let g=l+f.along;n.push({coordinates:i,ring:e,startIndex:g,endIndex:g});return}}}var xee={along:0,squaredDistance:0};function wCe(r,i,e,n){let o=e[0],s=e[1],l=n[0],h=n[1],p=l-o,m=h-s,f=0,g=o,y=s;return(p!==0||m!==0)&&(f=ss(((r-o)*p+(i-s)*m)/(p*p+m*m),0,1),g+=p*f,y+=m*f),xee.along=f,xee.squaredDistance=MS(Op(r,i,g,y),10),xee}function e2(r,i){let e=r.length,n=Math.floor(i),o=i-n;n>=e?n-=e:n<0&&(n+=e);let s=n+1;s>=e&&(s-=e);let l=r[n],h=l[0],p=l[1],m=r[s],f=m[0]-h,g=m[1]-p;return[h+f*o,p+g*o]}var See=class extends Ch{constructor(i){let e=i;e.stopDown||(e.stopDown=If),super(e),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=i.source?i.source:null,this.features_=i.features?i.features:null,this.snapTolerance_=i.snapTolerance?i.snapTolerance:12,this.type_=i.type,this.mode_=uJe(this.type_),this.stopClick_=!!i.stopClick,this.minPoints_=i.minPoints?i.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:i.maxPoints?i.maxPoints:1/0,this.finishCondition_=i.finishCondition?i.finishCondition:Iu,this.geometryLayout_=i.geometryLayout?i.geometryLayout:"XY";let n=i.geometryFunction;if(!n){let o=this.mode_;if(o==="Circle")n=function(s,l,h){let p=l||new LS([NaN,NaN]),m=Ta(s[0],h),f=f1(m,Ta(s[s.length-1],h));p.setCenterAndRadius(m,Math.sqrt(f),this.geometryLayout_);let g=Kc();return g&&p.transform(h,g),p};else{let s;o==="Point"?s=Kn:o==="LineString"?s=ao:o==="Polygon"&&(s=Zo),n=function(l,h,p){return h?o==="Polygon"?l[0].length?h.setCoordinates([l[0].concat([l[0][0]])],this.geometryLayout_):h.setCoordinates([],this.geometryLayout_):h.setCoordinates(l,this.geometryLayout_):h=new s(l,this.geometryLayout_),h}}}this.geometryFunction_=n,this.dragVertexDelay_=i.dragVertexDelay!==void 0?i.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=i.clickTolerance?i.clickTolerance*i.clickTolerance:36,this.overlay_=new i0({source:new tp({useSpatialIndex:!1,wrapX:i.wrapX?i.wrapX:!1}),style:i.style?i.style:dJe(),updateWhileInteracting:!0}),this.geometryName_=i.geometryName,this.condition_=i.condition?i.condition:qM,this.freehandCondition_,i.freehand?this.freehandCondition_=Zv:this.freehandCondition_=i.freehandCondition?i.freehandCondition:YM,this.traceCondition_,this.setTrace(i.trace||!1),this.traceState_={active:!1},this.traceSource_=i.traceSource||i.source||null,this.addChangeListener(QS.ACTIVE,this.updateState_)}setTrace(i){let e;i?i===!0?e=Zv:e=i:e=kR,this.traceCondition_=e}setMap(i){super.setMap(i),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(i){i.originalEvent.type===Zi.CONTEXTMENU&&i.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(i);let e=i.type===no.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&i.type===no.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=i.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&i.type===no.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(i.coordinate),n=!1):this.freehand_&&i.type===no.POINTERDOWN?n=!1:e&&this.getPointerCount()<2?(n=i.type===no.POINTERMOVE,n&&this.freehand_?(this.handlePointerMove_(i),this.shouldHandle_&&i.originalEvent.preventDefault()):(i.originalEvent.pointerType==="mouse"||i.type===no.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(i)):i.type===no.DBLCLICK&&(n=!1),super.handleEvent(i)&&n}handleDownEvent(i){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=i.pixel,this.finishCoordinate_||this.startDrawing_(i.coordinate),!0):this.condition_(i)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Rf(no.POINTERMOVE,i.map,i.originalEvent,!1,i.frameState))},this.dragVertexDelay_),this.downPx_=i.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(i){if(!this.traceSource_||!this.traceCondition_(i))return;if(this.traceState_.active){this.deactivateTrace_();return}let e=this.getMap(),n=e.getCoordinateFromPixel([i.pixel[0]-this.snapTolerance_,i.pixel[1]+this.snapTolerance_]),o=e.getCoordinateFromPixel([i.pixel[0]+this.snapTolerance_,i.pixel[1]-this.snapTolerance_]),s=mc([n,o]),l=this.traceSource_.getFeaturesInExtent(s);if(l.length===0)return;let h=lJe(i.coordinate,l);h.length&&(this.traceState_={active:!0,startPx:i.pixel.slice(),targets:h,targetIndex:-1})}addOrRemoveTracedCoordinates_(i,e){let n=i.startIndex<=i.endIndex,o=i.startIndex<=e;n===o?n&&e>i.endIndex||!n&&e<i.endIndex?this.addTracedCoordinates_(i,i.endIndex,e):(n&&e<i.endIndex||!n&&e>i.endIndex)&&this.removeTracedCoordinates_(e,i.endIndex):(this.removeTracedCoordinates_(i.startIndex,i.endIndex),this.addTracedCoordinates_(i,i.startIndex,e))}removeTracedCoordinates_(i,e){if(i===e)return;let n=0;if(i<e){let o=Math.ceil(i),s=Math.floor(e);s===e&&(s-=1),n=s-o+1}else{let o=Math.floor(i),s=Math.ceil(e);s===e&&(s+=1),n=o-s+1}n>0&&this.removeLastPoints_(n)}addTracedCoordinates_(i,e,n){if(e===n)return;let o=[];if(e<n){let s=Math.ceil(e),l=Math.floor(n);l===n&&(l-=1);for(let h=s;h<=l;++h)o.push(JM(i.coordinates,h))}else{let s=Math.floor(e),l=Math.ceil(n);l===n&&(l+=1);for(let h=s;h>=l;--h)o.push(JM(i.coordinates,h))}o.length&&this.appendCoordinates(o)}updateTrace_(i){let e=this.traceState_;if(!e.active||e.targetIndex===-1&&g1(e.startPx,i.pixel)<this.snapTolerance_)return;let n=cJe(i.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==n.index){if(e.targetIndex!==-1){let p=e.targets[e.targetIndex];this.removeTracedCoordinates_(p.startIndex,p.endIndex)}let h=e.targets[n.index];this.addTracedCoordinates_(h,h.startIndex,n.endIndex)}else{let h=e.targets[e.targetIndex];this.addOrRemoveTracedCoordinates_(h,n.endIndex)}e.targetIndex=n.index;let o=e.targets[e.targetIndex];o.endIndex=n.endIndex;let s=e2(o.coordinates,o.endIndex),l=this.getMap().getPixelFromCoordinate(s);i.coordinate=s,i.pixel=[Math.round(l[0]),Math.round(l[1])]}handleUpEvent(i){let e=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(i);let n=this.traceState_.active;if(this.toggleTraceState_(i),this.shouldHandle_){let o=!this.finishCoordinate_;o&&this.startDrawing_(i.coordinate),!o&&this.freehand_?this.finishDrawing():!this.freehand_&&(!o||this.mode_==="Point")&&(this.atFinish_(i.pixel,n)?this.finishCondition_(i)&&this.finishDrawing():this.addToDrawing_(i.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&i.preventDefault(),e}handlePointerMove_(i){if(this.pointerType_=i.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){let e=this.downPx_,n=i.pixel,o=e[0]-n[0],s=e[1]-n[1],l=o*o+s*s;if(this.shouldHandle_=this.freehand_?l>this.squaredClickTolerance_:l<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(i.coordinate.slice());return}this.updateTrace_(i),this.modifyDrawing_(i.coordinate)}atFinish_(i,e){let n=!1;if(this.sketchFeature_){let o=!1,s=[this.finishCoordinate_],l=this.mode_;if(l==="Point")n=!0;else if(l==="Circle")n=this.sketchCoords_.length===2;else if(l==="LineString")o=!e&&this.sketchCoords_.length>this.minPoints_;else if(l==="Polygon"){let h=this.sketchCoords_;o=h[0].length>this.minPoints_,s=[h[0][0],h[0][h[0].length-2]],e?s=[h[0][0]]:s=[h[0][0],h[0][h[0].length-2]]}if(o){let h=this.getMap();for(let p=0,m=s.length;p<m;p++){let f=s[p],g=h.getPixelFromCoordinate(f),y=i[0]-g[0],_=i[1]-g[1],w=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(y*y+_*_)<=w,n){this.finishCoordinate_=f;break}}}}return n}createOrUpdateSketchPoint_(i){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(i):(this.sketchPoint_=new An(new Kn(i)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(i){this.sketchLine_||(this.sketchLine_=new An);let e=i.getLinearRing(0),n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),n.changed()):(n=new ao(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(n))}startDrawing_(i){let e=this.getMap().getView().getProjection(),n=FS(this.geometryLayout_);for(;i.length<n;)i.push(0);this.finishCoordinate_=i,this.mode_==="Point"?this.sketchCoords_=i.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[i.slice(),i.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[i.slice(),i.slice()],this.sketchLineCoords_&&(this.sketchLine_=new An(new ao(this.sketchLineCoords_)));let o=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new An,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(o),this.updateSketchFeatures_(),this.dispatchEvent(new XM(e8.DRAWSTART,this.sketchFeature_))}modifyDrawing_(i){let e=this.getMap(),n=this.sketchFeature_.getGeometry(),o=e.getView().getProjection(),s=FS(this.geometryLayout_),l,h;for(;i.length<s;)i.push(0);this.mode_==="Point"?h=this.sketchCoords_:this.mode_==="Polygon"?(l=this.sketchCoords_[0],h=l[l.length-1],this.atFinish_(e.getPixelFromCoordinate(i))&&(i=this.finishCoordinate_.slice())):(l=this.sketchCoords_,h=l[l.length-1]),h[0]=i[0],h[1]=i[1],this.geometryFunction_(this.sketchCoords_,n,o),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(i),n.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(n):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(i){let e=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),o,s,l=this.mode_;return l==="LineString"||l==="Circle"?(this.finishCoordinate_=i.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():o=!0),s.push(i.slice()),this.geometryFunction_(s,e,n)):l==="Polygon"&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():o=!0),s.push(i.slice()),o&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,e,n)),this.createOrUpdateSketchPoint_(i.slice()),this.updateSketchFeatures_(),o?this.finishDrawing():this.sketchFeature_}removeLastPoints_(i){if(!this.sketchFeature_)return;let e=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),o=this.mode_;for(let s=0;s<i;++s){let l;if(o==="LineString"||o==="Circle"){if(l=this.sketchCoords_,l.splice(-2,1),l.length>=2){this.finishCoordinate_=l[l.length-2].slice();let h=this.finishCoordinate_.slice();l[l.length-1]=h,this.createOrUpdateSketchPoint_(h)}this.geometryFunction_(l,e,n),e.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if(o==="Polygon"){l=this.sketchCoords_[0],l.splice(-2,1);let h=this.sketchLine_.getGeometry();if(l.length>=2){let p=l[l.length-2].slice();l[l.length-1]=p,this.createOrUpdateSketchPoint_(p)}h.setCoordinates(l),this.geometryFunction_(this.sketchCoords_,e,n)}if(l.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){let i=this.abortDrawing_();if(!i)return null;let e=this.sketchCoords_,n=i.getGeometry(),o=this.getMap().getView().getProjection();return this.mode_==="LineString"?(e.pop(),this.geometryFunction_(e,n,o)):this.mode_==="Polygon"&&(e[0].pop(),this.geometryFunction_(e,n,o),e=n.getCoordinates()),this.type_==="MultiPoint"?i.setGeometry(new Lc([e])):this.type_==="MultiLineString"?i.setGeometry(new Qa([e])):this.type_==="MultiPolygon"&&i.setGeometry(new _l([e])),this.dispatchEvent(new XM(e8.DRAWEND,i)),this.features_&&this.features_.push(i),this.source_&&this.source_.addFeature(i),i}abortDrawing_(){this.finishCoordinate_=null;let i=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),i}abortDrawing(){let i=this.abortDrawing_();i&&this.dispatchEvent(new XM(e8.DRAWABORT,i))}appendCoordinates(i){let e=this.mode_,n=!this.sketchFeature_;n&&this.startDrawing_(i[0]);let o;if(e==="LineString"||e==="Circle")o=this.sketchCoords_;else if(e==="Polygon")o=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;n&&o.shift(),o.pop();for(let l=0;l<i.length;l++)this.addToDrawing_(i[l]);let s=i[i.length-1];this.sketchFeature_=this.addToDrawing_(s),this.modifyDrawing_(s)}extend(i){let n=i.getGeometry();this.sketchFeature_=i,this.sketchCoords_=n.getCoordinates();let o=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=o.slice(),this.sketchCoords_.push(o.slice()),this.sketchPoint_=new An(new Kn(o)),this.updateSketchFeatures_(),this.dispatchEvent(new XM(e8.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){let i=[];this.sketchFeature_&&i.push(this.sketchFeature_),this.sketchLine_&&i.push(this.sketchLine_),this.sketchPoint_&&i.push(this.sketchPoint_);let e=this.overlay_.getSource();e.clear(!0),e.addFeatures(i)}updateState_(){let i=this.getMap(),e=this.getActive();(!i||!e)&&this.abortDrawing(),this.overlay_.setMap(e?i:null)}};function dJe(){let r=mM();return function(i,e){return r[i.getGeometry().getType()]}}function uJe(r){switch(r){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+r)}}var VR=See;var z1={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};var Iee=class extends Of{constructor(i){super(),i=i||{},this.defaultCondition_=function(e){return qM(e)&&jV(e)},this.condition_=i.condition!==void 0?i.condition:this.defaultCondition_,this.duration_=i.duration!==void 0?i.duration:100,this.pixelDelta_=i.pixelDelta!==void 0?i.pixelDelta:128}handleEvent(i){let e=!1;if(i.type==Zi.KEYDOWN){let n=i.originalEvent,o=n.key;if(this.condition_(i)&&(o==z1.DOWN||o==z1.LEFT||o==z1.RIGHT||o==z1.UP)){let l=i.map.getView(),h=l.getResolution()*this.pixelDelta_,p=0,m=0;o==z1.DOWN?m=-h:o==z1.LEFT?p=-h:o==z1.RIGHT?p=h:m=h;let f=[p,m];NE(f,l.getRotation()),b1e(l,f,this.duration_),n.preventDefault(),e=!0}}return!e}},CCe=Iee;var Tee=class extends Of{constructor(i){super(),i=i||{},this.condition_=i.condition?i.condition:function(e){return!T1e(e)&&jV(e)},this.delta_=i.delta?i.delta:1,this.duration_=i.duration!==void 0?i.duration:100}handleEvent(i){let e=!1;if(i.type==Zi.KEYDOWN||i.type==Zi.KEYPRESS){let n=i.originalEvent,o=n.key;if(this.condition_(i)&&(o==="+"||o==="-")){let s=i.map,l=o==="+"?this.delta_:-this.delta_,h=s.getView();HM(h,l,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}},xCe=Tee;var Q_={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};var SCe=0,$R=1,ICe=[0,0,0,0],t2=[],Aee={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},UR=class extends Ls{constructor(i,e,n){super(i),this.features=e,this.mapBrowserEvent=n}},Eee=class extends Ch{constructor(i){super(i),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=i.condition?i.condition:$V,this.defaultDeleteCondition_=function(n){return C1e(n)&&BV(n)},this.deleteCondition_=i.deleteCondition?i.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=i.insertVertexCondition?i.insertVertexCondition:Zv,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new fR,this.pixelTolerance_=i.pixelTolerance!==void 0?i.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new i0({source:new tp({useSpatialIndex:!1,wrapX:!!i.wrapX}),style:i.style?i.style:pJe(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let e;if(i.features?e=i.features:i.source&&(this.source_=i.source,e=new al(this.source_.getFeatures()),this.source_.addEventListener(bh.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(bh.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!e)throw new Error("The modify interaction requires features, a source or a layer");i.hitDetection&&(this.hitDetection_=i.hitDetection),this.features_=e,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(sl.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(sl.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=i.snapToPointer===void 0?!this.hitDetection_:i.snapToPointer}addFeature_(i){let e=i.getGeometry();if(e){let o=this.SEGMENT_WRITERS_[e.getType()];o&&o(i,e)}let n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),i.addEventListener(Zi.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(i,e){if(!this.featuresBeingModified_){this.featuresBeingModified_=new al;let n=this.featuresBeingModified_.getArray();for(let o=0,s=e.length;o<s;++o){let l=e[o];for(let h=0,p=l.length;h<p;++h){let m=l[h].feature;m&&!n.includes(m)&&this.featuresBeingModified_.push(m)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new UR(Aee.MODIFYSTART,this.featuresBeingModified_,i))}}removeFeature_(i){this.removeFeatureSegmentData_(i),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),i.removeEventListener(Zi.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(i){let e=this.rBush_,n=[];e.forEach(function(o){i===o.feature&&n.push(o)});for(let o=n.length-1;o>=0;--o){let s=n[o];for(let l=this.dragSegments_.length-1;l>=0;--l)this.dragSegments_[l][0]===s&&this.dragSegments_.splice(l,1);e.remove(s)}}setActive(i){this.vertexFeature_&&!i&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(i)}setMap(i){this.overlay_.setMap(i),super.setMap(i)}getOverlay(){return this.overlay_}handleSourceAdd_(i){i.feature&&this.features_.push(i.feature)}handleSourceRemove_(i){i.feature&&this.features_.remove(i.feature)}handleFeatureAdd_(i){this.addFeature_(i.element)}handleFeatureChange_(i){if(!this.changingFeature_){let e=i.target;this.removeFeature_(e),this.addFeature_(e)}}handleFeatureRemove_(i){this.removeFeature_(i.element)}writePointGeometry_(i,e){let n=e.getCoordinates(),o={feature:i,geometry:e,segment:[n,n]};this.rBush_.insert(e.getExtent(),o)}writeMultiPointGeometry_(i,e){let n=e.getCoordinates();for(let o=0,s=n.length;o<s;++o){let l=n[o],h={feature:i,geometry:e,depth:[o],index:o,segment:[l,l]};this.rBush_.insert(e.getExtent(),h)}}writeLineStringGeometry_(i,e){let n=e.getCoordinates();for(let o=0,s=n.length-1;o<s;++o){let l=n.slice(o,o+2),h={feature:i,geometry:e,index:o,segment:l};this.rBush_.insert(mc(l),h)}}writeMultiLineStringGeometry_(i,e){let n=e.getCoordinates();for(let o=0,s=n.length;o<s;++o){let l=n[o];for(let h=0,p=l.length-1;h<p;++h){let m=l.slice(h,h+2),f={feature:i,geometry:e,depth:[o],index:h,segment:m};this.rBush_.insert(mc(m),f)}}}writePolygonGeometry_(i,e){let n=e.getCoordinates();for(let o=0,s=n.length;o<s;++o){let l=n[o];for(let h=0,p=l.length-1;h<p;++h){let m=l.slice(h,h+2),f={feature:i,geometry:e,depth:[o],index:h,segment:m};this.rBush_.insert(mc(m),f)}}}writeMultiPolygonGeometry_(i,e){let n=e.getCoordinates();for(let o=0,s=n.length;o<s;++o){let l=n[o];for(let h=0,p=l.length;h<p;++h){let m=l[h];for(let f=0,g=m.length-1;f<g;++f){let y=m.slice(f,f+2),_={feature:i,geometry:e,depth:[h,o],index:f,segment:y};this.rBush_.insert(mc(y),_)}}}}writeCircleGeometry_(i,e){let n=e.getCenter(),o={feature:i,geometry:e,index:SCe,segment:[n,n]},s={feature:i,geometry:e,index:$R,segment:[n,n]},l=[o,s];o.featureSegments=l,s.featureSegments=l,this.rBush_.insert(T_(n),o);let h=e,p=Kc();if(p&&this.getMap()){let m=this.getMap().getView().getProjection();h=h.clone().transform(p,m),h=jS(h).transform(m,p)}this.rBush_.insert(h.getExtent(),s)}writeGeometryCollectionGeometry_(i,e){let n=e.getGeometriesArray();for(let o=0;o<n.length;++o){let s=n[o],l=this.SEGMENT_WRITERS_[s.getType()];l(i,s)}}createOrUpdateVertexFeature_(i,e,n){let o=this.vertexFeature_;return o?o.getGeometry().setCoordinates(i):(o=new An(new Kn(i)),this.vertexFeature_=o,this.overlay_.getSource().addFeature(o)),o.set("features",e),o.set("geometries",n),o}handleEvent(i){if(!i.originalEvent)return!0;this.lastPointerEvent_=i;let e;return!i.map.getView().getInteracting()&&i.type==no.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(i),this.vertexFeature_&&this.deleteCondition_(i)&&(i.type!=no.SINGLECLICK||!this.ignoreNextSingleClick_?e=this.removePoint():e=!0),i.type==no.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(i)&&!e}handleDragEvent(i){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(i,this.dragSegments_);let e=[i.coordinate[0]+this.delta_[0],i.coordinate[1]+this.delta_[1]],n=[],o=[];for(let s=0,l=this.dragSegments_.length;s<l;++s){let h=this.dragSegments_[s],p=h[0],m=p.feature;n.includes(m)||n.push(m);let f=p.geometry;o.includes(f)||o.push(f);let g=p.depth,y,_=p.segment,w=h[1];for(;e.length<f.getStride();)e.push(_[w][e.length]);switch(f.getType()){case"Point":y=e,_[0]=e,_[1]=e;break;case"MultiPoint":y=f.getCoordinates(),y[p.index]=e,_[0]=e,_[1]=e;break;case"LineString":y=f.getCoordinates(),y[p.index+w]=e,_[w]=e;break;case"MultiLineString":y=f.getCoordinates(),y[g[0]][p.index+w]=e,_[w]=e;break;case"Polygon":y=f.getCoordinates(),y[g[0]][p.index+w]=e,_[w]=e;break;case"MultiPolygon":y=f.getCoordinates(),y[g[1]][g[0]][p.index+w]=e,_[w]=e;break;case"Circle":if(_[0]=e,_[1]=e,p.index===SCe)this.changingFeature_=!0,f.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;let A=i.map.getView().getProjection(),k=g1(Ta(f.getCenter(),A),Ta(e,A)),R=Kc();if(R){let $=f.clone().transform(R,A);$.setRadius(k),k=$.transform(A,R).getRadius()}f.setRadius(k),this.changingFeature_=!1}break;default:}y&&this.setGeometryCoordinates_(f,y)}this.createOrUpdateVertexFeature_(e,n,o)}handleDownEvent(i){if(!this.condition_(i))return!1;let e=i.coordinate;this.handlePointerAtPixel_(i.pixel,i.map,e),this.dragSegments_.length=0,this.featuresBeingModified_=null;let n=this.vertexFeature_;if(n){let o=i.map.getView().getProjection(),s=[],l=n.getGeometry().getCoordinates(),h=mc([l]),p=this.rBush_.getInExtent(h),m={};p.sort(hJe);for(let f=0,g=p.length;f<g;++f){let y=p[f],_=y.segment,w=Xi(y.geometry),A=y.depth;if(A&&(w+="-"+A.join("-")),m[w]||(m[w]=new Array(2)),y.geometry.getType()==="Circle"&&y.index===$R){let k=ACe(e,y,o);Jh(k,l)&&!m[w][0]&&(this.dragSegments_.push([y,0]),m[w][0]=y);continue}if(Jh(_[0],l)&&!m[w][0]){this.dragSegments_.push([y,0]),m[w][0]=y;continue}if(Jh(_[1],l)&&!m[w][1]){if(m[w][0]&&m[w][0].index===0){let k=y.geometry.getCoordinates();switch(y.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":k=k[A[1]];case"Polygon":if(y.index!==k[A[0]].length-2)continue;break;default:}}this.dragSegments_.push([y,1]),m[w][1]=y;continue}Xi(_)in this.vertexSegments_&&!m[w][0]&&!m[w][1]&&this.insertVertexCondition_(i)&&s.push(y)}s.length&&this.willModifyFeatures_(i,[s]);for(let f=s.length-1;f>=0;--f)this.insertVertex_(s[f],l)}return!!this.vertexFeature_}handleUpEvent(i){for(let e=this.dragSegments_.length-1;e>=0;--e){let n=this.dragSegments_[e][0],o=n.geometry;if(o.getType()==="Circle"){let s=o.getCenter(),l=n.featureSegments[0],h=n.featureSegments[1];l.segment[0]=s,l.segment[1]=s,h.segment[0]=s,h.segment[1]=s,this.rBush_.update(T_(s),l);let p=o,m=Kc();if(m){let f=i.map.getView().getProjection();p=p.clone().transform(m,f),p=jS(p).transform(f,m)}this.rBush_.update(p.getExtent(),h)}else this.rBush_.update(mc(n.segment),n)}return this.featuresBeingModified_&&(this.dispatchEvent(new UR(Aee.MODIFYEND,this.featuresBeingModified_,i)),this.featuresBeingModified_=null),!1}handlePointerMove_(i){this.lastPixel_=i.pixel,this.handlePointerAtPixel_(i.pixel,i.map,i.coordinate)}handlePointerAtPixel_(i,e,n){let o=n||e.getCoordinateFromPixel(i),s=e.getView().getProjection(),l=function(m,f){return TCe(o,m,s)-TCe(o,f,s)},h,p;if(this.hitDetection_){let m=typeof this.hitDetection_=="object"?f=>f===this.hitDetection_:void 0;e.forEachFeatureAtPixel(i,(f,g,y)=>{y&&y.getType()==="Point"&&(y=new Kn(Iv(y.getCoordinates(),s)));let _=y||f.getGeometry();if(f instanceof An&&this.features_.getArray().includes(f)){p=_;let w=f.getGeometry().getFlatCoordinates().slice(0,2);h=[{feature:f,geometry:p,segment:[w,w]}]}return!0},{layerFilter:m})}if(!h){let m=dh(T_(o,ICe),s),f=e.getView().getResolution()*this.pixelTolerance_,g=E_(xd(m,f,ICe),s);h=this.rBush_.getInExtent(g)}if(h&&h.length>0){let m=h.sort(l)[0],f=m.segment,g=ACe(o,m,s),y=e.getPixelFromCoordinate(g),_=g1(i,y);if(p||_<=this.pixelTolerance_){let w={};if(w[Xi(f)]=!0,this.snapToPointer_||(this.delta_[0]=g[0]-o[0],this.delta_[1]=g[1]-o[1]),m.geometry.getType()==="Circle"&&m.index===$R)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(g,[m.feature],[m.geometry]);else{let A=e.getPixelFromCoordinate(f[0]),k=e.getPixelFromCoordinate(f[1]),R=f1(y,A),$=f1(y,k);_=Math.sqrt(Math.min(R,$)),this.snappedToVertex_=_<=this.pixelTolerance_,this.snappedToVertex_&&(g=R>$?f[1]:f[0]),this.createOrUpdateVertexFeature_(g,[m.feature],[m.geometry]);let H={};H[Xi(m.geometry)]=!0;for(let oe=1,se=h.length;oe<se;++oe){let ge=h[oe].segment;if(Jh(f[0],ge[0])&&Jh(f[1],ge[1])||Jh(f[0],ge[1])&&Jh(f[1],ge[0])){let ue=Xi(h[oe].geometry);ue in H||(H[ue]=!0,w[Xi(ge)]=!0)}else break}}this.vertexSegments_=w;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(i,e){let n=i.segment,o=i.feature,s=i.geometry,l=i.depth,h=i.index,p;for(;e.length<s.getStride();)e.push(0);switch(s.getType()){case"MultiLineString":p=s.getCoordinates(),p[l[0]].splice(h+1,0,e);break;case"Polygon":p=s.getCoordinates(),p[l[0]].splice(h+1,0,e);break;case"MultiPolygon":p=s.getCoordinates(),p[l[1]][l[0]].splice(h+1,0,e);break;case"LineString":p=s.getCoordinates(),p.splice(h+1,0,e);break;default:return}this.setGeometryCoordinates_(s,p);let m=this.rBush_;m.remove(i),this.updateSegmentIndices_(s,h,l,1);let f={segment:[n[0],e],feature:o,geometry:s,depth:l,index:h};m.insert(mc(f.segment),f),this.dragSegments_.push([f,1]);let g={segment:[e,n[1]],feature:o,geometry:s,depth:l,index:h+1};m.insert(mc(g.segment),g),this.dragSegments_.push([g,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=no.POINTERDRAG){let i=this.lastPointerEvent_;this.willModifyFeatures_(i,this.dragSegments_);let e=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new UR(Aee.MODIFYEND,this.featuresBeingModified_,i)),this.featuresBeingModified_=null,e}return!1}removeVertex_(){let i=this.dragSegments_,e={},n=!1,o,s,l,h,p,m,f,g,y,_,w;for(p=i.length-1;p>=0;--p)l=i[p],_=l[0],w=Xi(_.feature),_.depth&&(w+="-"+_.depth.join("-")),w in e||(e[w]={}),l[1]===0?(e[w].right=_,e[w].index=_.index):l[1]==1&&(e[w].left=_,e[w].index=_.index+1);for(w in e){switch(y=e[w].right,f=e[w].left,m=e[w].index,g=m-1,f!==void 0?_=f:_=y,g<0&&(g=0),h=_.geometry,s=h.getCoordinates(),o=s,n=!1,h.getType()){case"MultiLineString":s[_.depth[0]].length>2&&(s[_.depth[0]].splice(m,1),n=!0);break;case"LineString":s.length>2&&(s.splice(m,1),n=!0);break;case"MultiPolygon":o=o[_.depth[1]];case"Polygon":o=o[_.depth[0]],o.length>4&&(m==o.length-1&&(m=0),o.splice(m,1),n=!0,m===0&&(o.pop(),o.push(o[0]),g=o.length-1));break;default:}if(n){this.setGeometryCoordinates_(h,s);let A=[];if(f!==void 0&&(this.rBush_.remove(f),A.push(f.segment[0])),y!==void 0&&(this.rBush_.remove(y),A.push(y.segment[1])),f!==void 0&&y!==void 0){let k={depth:_.depth,feature:_.feature,geometry:_.geometry,index:g,segment:A};this.rBush_.insert(mc(k.segment),k)}this.updateSegmentIndices_(h,m,_.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),i.length=0}}return n}setGeometryCoordinates_(i,e){this.changingFeature_=!0,i.setCoordinates(e),this.changingFeature_=!1}updateSegmentIndices_(i,e,n,o){this.rBush_.forEachInExtent(i.getExtent(),function(s){s.geometry===i&&(n===void 0||s.depth===void 0||Kd(s.depth,n))&&s.index>e&&(s.index+=o)})}};function hJe(r,i){return r.index-i.index}function TCe(r,i,e){let n=i.geometry;if(n.getType()==="Circle"){let s=n;if(i.index===$R){let l=Kc();l&&(s=s.clone().transform(l,e));let h=f1(s.getCenter(),Ta(r,e)),p=Math.sqrt(h)-s.getRadius();return p*p}}let o=Ta(r,e);return t2[0]=Ta(i.segment[0],e),t2[1]=Ta(i.segment[1],e),O0e(o,t2)}function ACe(r,i,e){let n=i.geometry;if(n.getType()==="Circle"&&i.index===$R){let s=n,l=Kc();return l&&(s=s.clone().transform(l,e)),Iv(s.getClosestPoint(Ta(r,e)),e)}let o=Ta(r,e);return t2[0]=Ta(i.segment[0],e),t2[1]=Ta(i.segment[1],e),Iv(mK(o,t2),e)}function pJe(){let r=mM();return function(i,e){return r.Point}}var Mee=Eee;var Dee=class extends Of{constructor(i){i=i||{},super(i),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=i.maxDelta!==void 0?i.maxDelta:1,this.duration_=i.duration!==void 0?i.duration:250,this.timeout_=i.timeout!==void 0?i.timeout:80,this.useAnchor_=i.useAnchor!==void 0?i.useAnchor:!0,this.constrainResolution_=i.constrainResolution!==void 0?i.constrainResolution:!1;let e=i.condition?i.condition:Zv;this.condition_=i.onFocusOnly?DR(LV,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;let i=this.getMap();if(!i)return;i.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(i){if(!this.condition_(i)||i.type!==Zi.WHEEL)return!0;let n=i.map,o=i.originalEvent;o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=i.coordinate);let s;if(i.type==Zi.WHEEL&&(s=o.deltaY,g0e&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=Ij),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;let l=Date.now();this.startTime_===void 0&&(this.startTime_=l),(!this.mode_||l-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");let h=n.getView();if(this.mode_==="trackpad"&&!(h.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(h.getAnimating()&&h.cancelAnimations(),h.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),h.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=l,!1;this.totalDelta_+=s;let p=Math.max(this.timeout_-(l-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),p),!1}handleWheelZoom_(i){let e=i.getView();e.getAnimating()&&e.cancelAnimations();let n=-ss(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),HM(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(i){this.useAnchor_=i,i||(this.lastAnchor_=null)}},ECe=Dee;var kee=class extends Ch{constructor(i){i=i||{};let e=i;e.stopDown||(e.stopDown=If),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=i.threshold!==void 0?i.threshold:.3,this.duration_=i.duration!==void 0?i.duration:250}handleDragEvent(i){let e=0,n=this.targetPointers[0],o=this.targetPointers[1],s=Math.atan2(o.clientY-n.clientY,o.clientX-n.clientX);if(this.lastAngle_!==void 0){let p=s-this.lastAngle_;this.rotationDelta_+=p,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=p}this.lastAngle_=s;let l=i.map,h=l.getView();h.getConstraints().rotation!==RM&&(this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(WM(this.targetPointers))),this.rotating_&&(l.render(),h.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(i){return this.targetPointers.length<2?(i.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(i){if(this.targetPointers.length>=2){let e=i.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}},MCe=kee;var Oee=class extends Ch{constructor(i){i=i||{};let e=i;e.stopDown||(e.stopDown=If),super(e),this.anchor_=null,this.duration_=i.duration!==void 0?i.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(i){let e=1,n=this.targetPointers[0],o=this.targetPointers[1],s=n.clientX-o.clientX,l=n.clientY-o.clientY,h=Math.sqrt(s*s+l*l);this.lastDistance_!==void 0&&(e=this.lastDistance_/h),this.lastDistance_=h;let p=i.map,m=p.getView();e!=1&&(this.lastScaleDelta_=e),this.anchor_=p.getCoordinateFromPixelInternal(p.getEventPixel(WM(this.targetPointers))),p.render(),m.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(i){if(this.targetPointers.length<2){let n=i.map.getView(),o=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,o),!1}return!0}handleDownEvent(i){if(this.targetPointers.length>=2){let e=i.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}},DCe=Oee;var mJe={SELECT:"select"},Pee=class extends Ls{constructor(i,e,n,o){super(i),this.selected=e,this.deselected=n,this.mapBrowserEvent=o}},r8={},Ree=class r extends Of{constructor(i){super(),this.on,this.once,this.un,i=i||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=i.condition?i.condition:BV,this.addCondition_=i.addCondition?i.addCondition:kR,this.removeCondition_=i.removeCondition?i.removeCondition:kR,this.toggleCondition_=i.toggleCondition?i.toggleCondition:YM,this.multi_=i.multi?i.multi:!1,this.filter_=i.filter?i.filter:Iu,this.hitTolerance_=i.hitTolerance?i.hitTolerance:0,this.style_=i.style!==void 0?i.style:fJe(),this.features_=i.features||new al;let e;if(i.layers)if(typeof i.layers=="function")e=i.layers;else{let n=i.layers;e=function(o){return n.includes(o)}}else e=Iu;this.layerFilter_=e,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(i,e){this.featureLayerAssociation_[Xi(i)]=e}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(i){return this.featureLayerAssociation_[Xi(i)]}setHitTolerance(i){this.hitTolerance_=i}setMap(i){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(i),i?(this.features_.addEventListener(sl.ADD,this.boundAddFeature_),this.features_.addEventListener(sl.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(sl.ADD,this.boundAddFeature_),this.features_.removeEventListener(sl.REMOVE,this.boundRemoveFeature_))}addFeature_(i){let e=i.element;if(this.style_&&this.applySelectedStyle_(e),!this.getLayer(e)){let n=this.getMap().getAllLayers().find(function(o){if(o instanceof i0&&o.getSource()&&o.getSource().hasFeature(e))return o});n&&this.addFeatureLayerAssociation_(e,n)}}removeFeature_(i){this.style_&&this.restorePreviousStyle_(i.element)}getStyle(){return this.style_}applySelectedStyle_(i){let e=Xi(i);e in r8||(r8[e]=i.getStyle()),i.setStyle(this.style_)}restorePreviousStyle_(i){let e=this.getMap().getInteractions().getArray();for(let o=e.length-1;o>=0;--o){let s=e[o];if(s!==this&&s instanceof r&&s.getStyle()&&s.getFeatures().getArray().lastIndexOf(i)!==-1){i.setStyle(s.getStyle());return}}let n=Xi(i);i.setStyle(r8[n]),delete r8[n]}removeFeatureLayerAssociation_(i){delete this.featureLayerAssociation_[Xi(i)]}handleEvent(i){if(!this.condition_(i))return!0;let e=this.addCondition_(i),n=this.removeCondition_(i),o=this.toggleCondition_(i),s=!e&&!n&&!o,l=i.map,h=this.getFeatures(),p=[],m=[];if(s){xf(this.featureLayerAssociation_),l.forEachFeatureAtPixel(i.pixel,(f,g)=>{if(!(!(f instanceof An)||!this.filter_(f,g)))return this.addFeatureLayerAssociation_(f,g),m.push(f),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let f=h.getLength()-1;f>=0;--f){let g=h.item(f),y=m.indexOf(g);y>-1?m.splice(y,1):(h.remove(g),p.push(g))}m.length!==0&&h.extend(m)}else{l.forEachFeatureAtPixel(i.pixel,(f,g)=>{if(!(!(f instanceof An)||!this.filter_(f,g)))return(e||o)&&!h.getArray().includes(f)?(this.addFeatureLayerAssociation_(f,g),m.push(f)):(n||o)&&h.getArray().includes(f)&&(p.push(f),this.removeFeatureLayerAssociation_(f)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let f=p.length-1;f>=0;--f)h.remove(p[f]);h.extend(m)}return(m.length>0||p.length>0)&&this.dispatchEvent(new Pee(mJe.SELECT,m,p,i)),!0}};function fJe(){let r=mM();return mr(r.Polygon,r.LineString),mr(r.GeometryCollection,r.LineString),function(i){return i.getGeometry()?r[i.getGeometry().getType()]:null}}var i2=Ree;var Fee={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},zR=class extends Ls{constructor(i,e,n,o,s){super(i),this.features=e,this.coordinate=n,this.startCoordinate=o,this.mapBrowserEvent=s}},Lee=class extends Ch{constructor(i){i=i||{},super(i),this.on,this.once,this.un,this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=i.features!==void 0?i.features:null;let e;if(i.layers&&!this.features_)if(typeof i.layers=="function")e=i.layers;else{let n=i.layers;e=function(o){return n.includes(o)}}else e=Iu;this.layerFilter_=e,this.filter_=i.filter&&!this.features_?i.filter:Iu,this.hitTolerance_=i.hitTolerance?i.hitTolerance:0,this.condition_=i.condition?i.condition:Zv,this.lastFeature_=null,this.addChangeListener(QS.ACTIVE,this.handleActiveChanged_)}handleDownEvent(i){if(!i.originalEvent||!this.condition_(i))return!1;if(this.lastFeature_=this.featuresAtPixel_(i.pixel,i.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=i.coordinate,this.lastCoordinate_=i.coordinate,this.handleMoveEvent(i);let e=this.features_||new al([this.lastFeature_]);return this.dispatchEvent(new zR(Fee.TRANSLATESTART,e,i.coordinate,this.startCoordinate_,i)),!0}return!1}handleUpEvent(i){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(i);let e=this.features_||new al([this.lastFeature_]);return this.dispatchEvent(new zR(Fee.TRANSLATEEND,e,i.coordinate,this.startCoordinate_,i)),this.startCoordinate_=null,!0}return!1}handleDragEvent(i){if(this.lastCoordinate_){let e=i.coordinate,n=i.map.getView().getProjection(),o=Ta(e,n),s=Ta(this.lastCoordinate_,n),l=o[0]-s[0],h=o[1]-s[1],p=this.features_||new al([this.lastFeature_]),m=Kc();p.forEach(function(f){let g=f.getGeometry();m?(g.transform(m,n),g.translate(l,h),g.transform(n,m)):g.translate(l,h),f.setGeometry(g)}),this.lastCoordinate_=e,this.dispatchEvent(new zR(Fee.TRANSLATING,p,e,this.startCoordinate_,i))}}handleMoveEvent(i){let e=i.map.getViewport();this.featuresAtPixel_(i.pixel,i.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(i,e){return e.forEachFeatureAtPixel(i,(n,o)=>{if(!(!(n instanceof An)||!this.filter_(n,o))&&!(this.features_&&!this.features_.getArray().includes(n)))return n},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(i){this.hitTolerance_=i}setMap(i){let e=this.getMap();super.setMap(i),this.updateState_(e)}handleActiveChanged_(){this.updateState_(null)}updateState_(i){let e=this.getMap(),n=this.getActive();(!e||!n)&&(e=e||i,e&&e.getViewport().classList.remove("ol-grab","ol-grabbing"))}},Nee=Lee;var Bee=class{constructor(i,e,n){this.decay_=i,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(i,e){this.points_.push(i,e,Date.now())}end(){if(this.points_.length<6)return!1;let i=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<i)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>i;)n-=3;let o=this.points_[e+2]-this.points_[n+2];if(o<1e3/60)return!1;let s=this.points_[e]-this.points_[n],l=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(l,s),this.initialVelocity_=Math.sqrt(s*s+l*l)/o,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},kCe=Bee;function GR(r){r=r||{};let i=new al,e=new kCe(-.005,.05,100);return(r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0)&&i.push(new yCe),(r.doubleClickZoom!==void 0?r.doubleClickZoom:!0)&&i.push(new gCe({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan!==void 0?r.dragPan:!0)&&i.push(new _Ce({onFocusOnly:r.onFocusOnly,kinetic:e})),(r.pinchRotate!==void 0?r.pinchRotate:!0)&&i.push(new MCe),(r.pinchZoom!==void 0?r.pinchZoom:!0)&&i.push(new DCe({duration:r.zoomDuration})),(r.keyboard!==void 0?r.keyboard:!0)&&(i.push(new CCe),i.push(new xCe({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0)&&i.push(new ECe({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom!==void 0?r.shiftDragZoom:!0)&&i.push(new vCe({duration:r.zoomDuration})),i}var jee=class extends ZE{constructor(i){super(),this.map_=i}dispatchRenderEvent(i,e){xn()}calculateMatrices2D(i){let e=i.viewState,n=i.coordinateToPixelTransform,o=i.pixelToCoordinateTransform;vc(n,i.size[0]/2,i.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),C1(o,n)}forEachFeatureAtCoordinate(i,e,n,o,s,l,h,p){let m,f=e.viewState;function g(oe,se,ge,ue){return s.call(l,se,oe?ge:null,ue)}let y=f.projection,_=BE(i.slice(),y),w=[[0,0]];if(y.canWrapX()&&o){let oe=y.getExtent(),se=or(oe);w.push([-se,0],[se,0])}let A=e.layerStatesArray,k=A.length,R=[],$=[];for(let oe=0;oe<w.length;oe++)for(let se=k-1;se>=0;--se){let ge=A[se],ue=ge.layer;if(ue.hasRenderer()&&vR(ge,f)&&h.call(p,ue)){let pe=ue.getRenderer(),Ce=ue.getSource();if(pe&&Ce){let _e=Ce.getWrapX()?_:i,de=g.bind(null,ge.managed);$[0]=_e[0]+w[oe][0],$[1]=_e[1]+w[oe][1],m=pe.forEachFeatureAtCoordinate($,e,n,de,R)}if(m)return m}}if(R.length===0)return;let H=1/R.length;return R.forEach((oe,se)=>oe.distanceSq+=se*H),R.sort((oe,se)=>oe.distanceSq-se.distanceSq),R.some(oe=>m=oe.callback(oe.feature,oe.layer,oe.geometry)),m}hasFeatureAtCoordinate(i,e,n,o,s,l){return this.forEachFeatureAtCoordinate(i,e,n,o,Iu,this,s,l)!==void 0}getMap(){return this.map_}renderFrame(i){xn()}scheduleExpireIconCache(i){Pm.canExpireCache()&&i.postRenderFunctions.push(_Je)}};function _Je(r,i){Pm.expire()}var OCe=jee;var Vee=class extends OCe{constructor(i){super(i),this.fontChangeListenerKey_=$r(L_,Zg.PROPERTYCHANGE,i.redrawText.bind(i)),this.element_=document.createElement("div");let e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=F_+" ol-layers";let n=i.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(i,e){let n=this.getMap();if(n.hasListener(i)){let o=new kV(i,void 0,e);n.dispatchEvent(o)}}disposeInternal(){Fo(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(i){if(!i){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(i),this.dispatchRenderEvent(Du.PRECOMPOSE,i);let e=i.layerStatesArray.sort(function(h,p){return h.zIndex-p.zIndex});e.some(h=>h.layer instanceof NM&&h.layer.getDeclutter())&&(i.declutter={});let o=i.viewState;this.children_.length=0;let s=[],l=null;for(let h=0,p=e.length;h<p;++h){let m=e[h];i.layerIndex=h;let f=m.layer,g=f.getSourceState();if(!vR(m,o)||g!="ready"&&g!="undefined"){f.unrender();continue}let y=f.render(i,l);y&&(y!==l&&(this.children_.push(y),l=y),s.push(m))}this.declutter(i,s),Mye(this.element_,this.children_),this.dispatchRenderEvent(Du.POSTCOMPOSE,i),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(i)}declutter(i,e){for(let n=e.length-1;n>=0;--n){let o=e[n],s=o.layer;s.getDeclutter()&&s.renderDeclutter(i,o)}e.forEach(n=>n.layer.renderDeferred(i))}},PCe=Vee;var HR={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var $ee=class extends P_{constructor(i,e){super(i),this.map_=i,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;let n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=$r(n,HR.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=$r(n,HR.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Zi.TOUCHMOVE,this.boundHandleTouchMove_,Ej?{passive:!1}:!1)}emulateClick_(i){let e=new Rf(no.CLICK,this.map_,i);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Rf(no.DBLCLICK,this.map_,i),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;let n=new Rf(no.SINGLECLICK,this.map_,i);this.dispatchEvent(n)},250)}updateActivePointers_(i){let e=i,n=e.pointerId;if(e.type==no.POINTERUP||e.type==no.POINTERCANCEL){delete this.trackedTouches_[n];for(let o in this.trackedTouches_)if(this.trackedTouches_[o].target!==e.target){delete this.trackedTouches_[o];break}}else(e.type==no.POINTERDOWN||e.type==no.POINTERMOVE)&&(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(i){this.updateActivePointers_(i);let e=new Rf(no.POINTERUP,this.map_,i,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(i)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Fo),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(i){return i.button===0}handlePointerDown_(i){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(i);let e=new Rf(no.POINTERDOWN,this.map_,i,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(i.type,i),Object.defineProperty(this.down_,"target",{writable:!1,value:i.target}),this.dragListenerKeys_.length===0){let n=this.map_.getOwnerDocument();this.dragListenerKeys_.push($r(n,no.POINTERMOVE,this.handlePointerMove_,this),$r(n,no.POINTERUP,this.handlePointerUp_,this),$r(this.element_,no.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push($r(this.element_.getRootNode(),no.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(i){if(this.isMoving_(i)){this.updateActivePointers_(i),this.dragging_=!0;let e=new Rf(no.POINTERDRAG,this.map_,i,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(i){this.originalPointerMoveEvent_=i;let e=!!(this.down_&&this.isMoving_(i));this.dispatchEvent(new Rf(no.POINTERMOVE,this.map_,i,e))}handleTouchMove_(i){let e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof i.cancelable!="boolean"||i.cancelable===!0)&&i.preventDefault()}isMoving_(i){return this.dragging_||Math.abs(i.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(i.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Fo(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Zi.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Fo(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Fo),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},RCe=$ee;var Ou={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var WR=1/0,Uee=class{constructor(i,e){this.priorityFunction_=i,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,xf(this.queuedElements_)}dequeue(){let i=this.elements_,e=this.priorities_,n=i[0];i.length==1?(i.length=0,e.length=0):(i[0]=i.pop(),e[0]=e.pop(),this.siftUp_(0));let o=this.keyFunction_(n);return delete this.queuedElements_[o],n}enqueue(i){Nn(!(this.keyFunction_(i)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");let e=this.priorityFunction_(i);return e!=WR?(this.elements_.push(i),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(i)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(i){return i*2+1}getRightChildIndex_(i){return i*2+2}getParentIndex_(i){return i-1>>1}heapify_(){let i;for(i=(this.elements_.length>>1)-1;i>=0;i--)this.siftUp_(i)}isEmpty(){return this.elements_.length===0}isKeyQueued(i){return i in this.queuedElements_}isQueued(i){return this.isKeyQueued(this.keyFunction_(i))}siftUp_(i){let e=this.elements_,n=this.priorities_,o=e.length,s=e[i],l=n[i],h=i;for(;i<o>>1;){let p=this.getLeftChildIndex_(i),m=this.getRightChildIndex_(i),f=m<o&&n[m]<n[p]?m:p;e[i]=e[f],n[i]=n[f],i=f}e[i]=s,n[i]=l,this.siftDown_(h,i)}siftDown_(i,e){let n=this.elements_,o=this.priorities_,s=n[e],l=o[e];for(;e>i;){let h=this.getParentIndex_(e);if(o[h]>l)n[e]=n[h],o[e]=o[h],e=h;else break}n[e]=s,o[e]=l}reprioritize(){let i=this.priorityFunction_,e=this.elements_,n=this.priorities_,o=0,s=e.length,l,h,p;for(h=0;h<s;++h)l=e[h],p=i(l),p==WR?delete this.queuedElements_[this.keyFunction_(l)]:(n[o]=p,e[o++]=l);e.length=o,n.length=o,this.heapify_()}},FCe=Uee;var zee=class extends FCe{constructor(i,e){super(function(n){return i.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(i){let e=super.enqueue(i);return e&&i[0].addEventListener(Zi.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(i){let e=i.target,n=e.getState();if(n===Gi.LOADED||n===Gi.ERROR||n===Gi.EMPTY){n!==Gi.ERROR&&e.removeEventListener(Zi.CHANGE,this.boundHandleTileChange_);let o=e.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(i,e){let n=0,o,s,l;for(;this.tilesLoading_<i&&n<e&&this.getCount()>0;)s=this.dequeue()[0],l=s.getKey(),o=s.getState(),o===Gi.IDLE&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++n,s.load())}},LCe=zee;function NCe(r,i,e,n,o){if(!r||!(e in r.wantedTiles))return WR;if(!r.wantedTiles[e][i.getKey()])return WR;let s=r.viewState.center,l=n[0]-s[0],h=n[1]-s[1];return 65536*Math.log(o)+Math.sqrt(l*l+h*h)/o}var Gee=class extends yc{constructor(i){super();let e=i.element;e&&!i.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],i.render&&(this.render=i.render),i.target&&this.setTarget(i.target)}disposeInternal(){eR(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(i){this.map_&&eR(this.element);for(let e=0,n=this.listenerKeys.length;e<n;++e)Fo(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=i,i&&((this.target_?this.target_:i.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Qg&&this.listenerKeys.push($r(i,Q_.POSTRENDER,this.render,this)),i.render())}render(i){}setTarget(i){this.target_=typeof i=="string"?document.getElementById(i):i}},G1=Gee;var Hee=class extends G1{constructor(i){i=i||{},super({element:document.createElement("div"),render:i.render,target:i.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=i.collapsed!==void 0?i.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=i.collapsible!==void 0,this.collapsible_=i.collapsible!==void 0?i.collapsible:!0,this.collapsible_||(this.collapsed_=!1);let e=i.className!==void 0?i.className:"ol-attribution",n=i.tipLabel!==void 0?i.tipLabel:"Attributions",o=i.expandClassName!==void 0?i.expandClassName:e+"-expand",s=i.collapseLabel!==void 0?i.collapseLabel:"\u203A",l=i.collapseClassName!==void 0?i.collapseClassName:e+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=l):this.collapseLabel_=s;let h=i.label!==void 0?i.label:"i";typeof h=="string"?(this.label_=document.createElement("span"),this.label_.textContent=h,this.label_.className=o):this.label_=h;let p=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(p),this.toggleButton_.addEventListener(Zi.CLICK,this.handleClick_.bind(this),!1);let m=e+" "+F_+" "+hM+(this.collapsed_&&this.collapsible_?" "+UZ:"")+(this.collapsible_?"":" ol-uncollapsible"),f=this.element;f.className=m,f.appendChild(this.toggleButton_),f.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(i){let e=Array.from(new Set(this.getMap().getAllLayers().flatMap(o=>o.getAttributions(i)))),n=!this.getMap().getAllLayers().some(o=>o.getSource()&&o.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(n),e}updateElement_(i){return st(this,null,function*(){if(!i){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let e=yield Promise.all(this.collectSourceAttributions_(i).map(o=>QE(()=>o))),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Kd(e,this.renderedAttributions_)){Eye(this.ulElement_);for(let o=0,s=e.length;o<s;++o){let l=document.createElement("li");l.innerHTML=e[o],this.ulElement_.appendChild(l)}this.renderedAttributions_=e}})}handleClick_(i){i.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(UZ),this.collapsed_?NZ(this.collapseLabel_,this.label_):NZ(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(i){this.collapsible_!==i&&(this.collapsible_=i,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(i){this.userCollapsed_=i,!(!this.collapsible_||this.collapsed_===i)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(i){this.updateElement_(i.frameState)}},XS=Hee;var Wee=class extends G1{constructor(i){i=i||{},super({element:document.createElement("div"),render:i.render,target:i.target});let e=i.className!==void 0?i.className:"ol-rotate",n=i.label!==void 0?i.label:"\u21E7",o=i.compassClassName!==void 0?i.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=o,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(o));let s=i.tipLabel?i.tipLabel:"Reset rotation",l=document.createElement("button");l.className=e+"-reset",l.setAttribute("type","button"),l.title=s,l.appendChild(this.label_),l.addEventListener(Zi.CLICK,this.handleClick_.bind(this),!1);let h=e+" "+F_+" "+hM,p=this.element;p.className=h,p.appendChild(l),this.callResetNorth_=i.resetNorth?i.resetNorth:void 0,this.duration_=i.duration!==void 0?i.duration:250,this.autoHide_=i.autoHide!==void 0?i.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(iR)}handleClick_(i){i.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){let e=this.getMap().getView();if(!e)return;let n=e.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:Nc}):e.setRotation(0))}render(i){let e=i.frameState;if(!e)return;let n=e.viewState.rotation;if(n!=this.rotation_){let o="rotate("+n+"rad)";if(this.autoHide_){let s=this.element.classList.contains(iR);!s&&n===0?this.element.classList.add(iR):s&&n!==0&&this.element.classList.remove(iR)}this.label_.style.transform=o}this.rotation_=n}},BCe=Wee;var qee=class extends G1{constructor(i){i=i||{},super({element:document.createElement("div"),target:i.target});let e=i.className!==void 0?i.className:"ol-zoom",n=i.delta!==void 0?i.delta:1,o=i.zoomInClassName!==void 0?i.zoomInClassName:e+"-in",s=i.zoomOutClassName!==void 0?i.zoomOutClassName:e+"-out",l=i.zoomInLabel!==void 0?i.zoomInLabel:"+",h=i.zoomOutLabel!==void 0?i.zoomOutLabel:"\u2013",p=i.zoomInTipLabel!==void 0?i.zoomInTipLabel:"Zoom in",m=i.zoomOutTipLabel!==void 0?i.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=o,f.setAttribute("type","button"),f.title=p,f.appendChild(typeof l=="string"?document.createTextNode(l):l),f.addEventListener(Zi.CLICK,this.handleClick_.bind(this,n),!1);let g=document.createElement("button");g.className=s,g.setAttribute("type","button"),g.title=m,g.appendChild(typeof h=="string"?document.createTextNode(h):h),g.addEventListener(Zi.CLICK,this.handleClick_.bind(this,-n),!1);let y=e+" "+F_+" "+hM,_=this.element;_.className=y,_.appendChild(f),_.appendChild(g),this.duration_=i.duration!==void 0?i.duration:250}handleClick_(i,e){e.preventDefault(),this.zoomByDelta_(i)}zoomByDelta_(i){let n=this.getMap().getView();if(!n)return;let o=n.getZoom();if(o!==void 0){let s=n.getConstrainedZoom(o+i);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:s,duration:this.duration_,easing:Nc})):n.setZoom(s)}}},jCe=qee;function VCe(r){r=r||{};let i=new al;return(r.zoom!==void 0?r.zoom:!0)&&i.push(new jCe(r.zoomOptions)),(r.rotate!==void 0?r.rotate:!0)&&i.push(new BCe(r.rotateOptions)),(r.attribution!==void 0?r.attribution:!0)&&i.push(new XS(r.attributionOptions)),i}function $Ce(r){if(r instanceof Hv){r.setMapInternal(null);return}r instanceof r0&&r.getLayers().forEach($Ce)}function UCe(r,i){if(r instanceof Hv){r.setMapInternal(i);return}if(r instanceof r0){let e=r.getLayers().getArray();for(let n=0,o=e.length;n<o;++n)UCe(e[n],i)}}var Yee=class extends yc{constructor(i){super(),i=i||{},this.on,this.once,this.un;let e=yJe(i);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=i.maxTilesLoading!==void 0?i.maxTilesLoading:16,this.pixelRatio_=i.pixelRatio!==void 0?i.pixelRatio:Ij,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Fc(),this.pixelToCoordinateTransform_=Fc(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=i.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||VCe(),this.interactions=e.interactions||GR({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new LCe(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Ou.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Ou.VIEW,this.handleViewChanged_),this.addChangeListener(Ou.SIZE,this.handleSizeChanged_),this.addChangeListener(Ou.TARGET,this.handleTargetChanged_),this.setProperties(e.values);let n=this;i.view&&!(i.view instanceof Rm)&&i.view.then(function(o){n.setView(new Rm(o))}),this.controls.addEventListener(sl.ADD,o=>{o.element.setMap(this)}),this.controls.addEventListener(sl.REMOVE,o=>{o.element.setMap(null)}),this.interactions.addEventListener(sl.ADD,o=>{o.element.setMap(this)}),this.interactions.addEventListener(sl.REMOVE,o=>{o.element.setMap(null)}),this.overlays_.addEventListener(sl.ADD,o=>{this.addOverlayInternal_(o.element)}),this.overlays_.addEventListener(sl.REMOVE,o=>{let s=o.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],o.element.setMap(null)}),this.controls.forEach(o=>{o.setMap(this)}),this.interactions.forEach(o=>{o.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(i){this.getControls().push(i)}addInteraction(i){this.getInteractions().push(i)}addLayer(i){this.getLayerGroup().getLayers().push(i)}handleLayerAdd_(i){UCe(i.layer,this)}addOverlay(i){this.getOverlays().push(i)}addOverlayInternal_(i){let e=i.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=i),i.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(i,e,n){if(!this.frameState_||!this.renderer_)return;let o=this.getCoordinateFromPixelInternal(i);n=n!==void 0?n:{};let s=n.hitTolerance!==void 0?n.hitTolerance:0,l=n.layerFilter!==void 0?n.layerFilter:Iu,h=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,s,h,e,null,l,null)}getFeaturesAtPixel(i,e){let n=[];return this.forEachFeatureAtPixel(i,function(o){n.push(o)},e),n}getAllLayers(){let i=[];function e(n){n.forEach(function(o){o instanceof r0?e(o.getLayers()):i.push(o)})}return e(this.getLayers()),i}hasFeatureAtPixel(i,e){if(!this.frameState_||!this.renderer_)return!1;let n=this.getCoordinateFromPixelInternal(i);e=e!==void 0?e:{};let o=e.layerFilter!==void 0?e.layerFilter:Iu,s=e.hitTolerance!==void 0?e.hitTolerance:0,l=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,s,l,o,null)}getEventCoordinate(i){return this.getCoordinateFromPixel(this.getEventPixel(i))}getEventCoordinateInternal(i){return this.getCoordinateFromPixelInternal(this.getEventPixel(i))}getEventPixel(i){let n=this.viewport_.getBoundingClientRect(),o=this.getSize(),s=n.width/o[0],l=n.height/o[1],h="changedTouches"in i?i.changedTouches[0]:i;return[(h.clientX-n.left)/s,(h.clientY-n.top)/l]}getTarget(){return this.get(Ou.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(i){return Iv(this.getCoordinateFromPixelInternal(i),this.getView().getProjection())}getCoordinateFromPixelInternal(i){let e=this.frameState_;return e?Hs(e.pixelToCoordinateTransform,i.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(i){let e=this.overlayIdIndex_[i.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Ou.LAYERGROUP)}setLayers(i){let e=this.getLayerGroup();if(i instanceof al){e.setLayers(i);return}let n=e.getLayers();n.clear(),n.extend(i)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){let i=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=i.length;e<n;++e){let o=i[e];if(!o.visible)continue;let s=o.layer.getRenderer();if(s&&!s.ready)return!0;let l=o.layer.getSource();if(l&&l.loading)return!0}return!1}getPixelFromCoordinate(i){let e=Ta(i,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(i){let e=this.frameState_;return e?Hs(e.coordinateToPixelTransform,i.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Ou.SIZE)}getView(){return this.get(Ou.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){let i=this.getTargetElement();return i?i.ownerDocument:document}getTilePriority(i,e,n,o){return NCe(this.frameState_,i,e,n,o)}handleBrowserEvent(i,e){e=e||i.type;let n=new Rf(e,this,i);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(i){if(!this.frameState_)return;let e=i.originalEvent,n=e.type;if(n===HR.POINTERDOWN||n===Zi.WHEEL||n===Zi.KEYDOWN){let o=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():o,l=e.target;if(this.overlayContainerStopEvent_.contains(l)||!(s===o?o.documentElement:s).contains(l))return}if(i.frameState=this.frameState_,this.dispatchEvent(i)!==!1){let o=this.getInteractions().getArray().slice();for(let s=o.length-1;s>=0;s--){let l=o[s];if(l.getMap()!==this||!l.getActive()||!this.getTargetElement())continue;if(!l.handleEvent(i)||i.propagationStopped)break}}}handlePostRender(){let i=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let o=this.maxTilesLoading_,s=o;if(i){let l=i.viewHints;if(l[Ws.ANIMATING]||l[Ws.INTERACTING]){let h=Date.now()-i.time>8;o=h?0:8,s=h?0:2}}e.getTilesLoading()<o&&(e.reprioritize(),e.loadMoreTiles(o,s))}i&&this.renderer_&&!i.animate&&(this.renderComplete_===!0?(this.hasListener(Du.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Du.RENDERCOMPLETE,i),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new U1(Q_.LOADEND,this,i)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new U1(Q_.LOADSTART,this,i))));let n=this.postRenderFunctions_;for(let o=0,s=n.length;o<s;++o)n[o](this,i);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,o=this.targetChangeHandlerKeys_.length;n<o;++n)Fo(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Zi.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Zi.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,eR(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);let n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}let i=this.getTarget(),e=typeof i=="string"?document.getElementById(i):i;if(this.targetElement_=e,!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new PCe(this)),this.mapBrowserEventHandler_=new RCe(this,this.moveTolerance_);for(let s in no)this.mapBrowserEventHandler_.addEventListener(no[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Zi.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Zi.WHEEL,this.boundHandleBrowserEvent_,Ej?{passive:!1}:!1);let n=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[$r(n,Zi.KEYDOWN,this.handleBrowserEvent,this),$r(n,Zi.KEYPRESS,this.handleBrowserEvent,this)];let o=e.getRootNode();o instanceof ShadowRoot&&this.resizeObserver_.observe(o.host),this.resizeObserver_.observe(e)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Fo(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Fo(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);let i=this.getView();i&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=$r(i,Zg.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=$r(i,Zi.CHANGE,this.handleViewPropertyChanged_,this),i.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Fo),this.layerGroupPropertyListenerKeys_=null);let i=this.getLayerGroup();i&&(this.handleLayerAdd_(new n0("addlayer",i)),this.layerGroupPropertyListenerKeys_=[$r(i,Zg.PROPERTYCHANGE,this.render,this),$r(i,Zi.CHANGE,this.render,this),$r(i,"addlayer",this.handleLayerAdd_,this),$r(i,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){let i=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=i.length;e<n;++e){let o=i[e].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(i){return this.getControls().remove(i)}removeInteraction(i){return this.getInteractions().remove(i)}removeLayer(i){return this.getLayerGroup().getLayers().remove(i)}handleLayerRemove_(i){$Ce(i.layer)}removeOverlay(i){return this.getOverlays().remove(i)}renderFrame_(i){let e=this.getSize(),n=this.getView(),o=this.frameState_,s=null;if(e!==void 0&&MZ(e)&&n&&n.isDef()){let l=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=n.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Ug(h.center,h.resolution,h.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:i,usedTiles:{},viewState:h,viewHints:l,wantedTiles:{},mapId:Xi(this),renderTargets:{}},h.nextCenter&&h.nextResolution){let p=isNaN(h.nextRotation)?h.rotation:h.nextRotation;s.nextExtent=Ug(h.nextCenter,h.nextResolution,p,e)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),o&&(!this.previousExtent_||!km(this.previousExtent_)&&!Dm(s.extent,this.previousExtent_))&&(this.dispatchEvent(new U1(Q_.MOVESTART,this,o)),this.previousExtent_=xv(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Ws.ANIMATING]&&!s.viewHints[Ws.INTERACTING]&&!Dm(s.extent,this.previousExtent_)&&(this.dispatchEvent(new U1(Q_.MOVEEND,this,s)),Oj(s.extent,this.previousExtent_))),this.dispatchEvent(new U1(Q_.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(Q_.LOADSTART)||this.hasListener(Q_.LOADEND)||this.hasListener(Du.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(i){let e=this.getLayerGroup();e&&this.handleLayerRemove_(new n0("removelayer",e)),this.set(Ou.LAYERGROUP,i)}setSize(i){this.set(Ou.SIZE,i)}setTarget(i){this.set(Ou.TARGET,i)}setView(i){if(!i||i instanceof Rm){this.set(Ou.VIEW,i);return}this.set(Ou.VIEW,new Rm);let e=this;i.then(function(n){e.setView(new Rm(n))})}updateSize(){let i=this.getTargetElement(),e;if(i){let o=getComputedStyle(i),s=i.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),l=i.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth);!isNaN(s)&&!isNaN(l)&&(e=[s,l],!MZ(e)&&(i.offsetWidth||i.offsetHeight||i.getClientRects().length)&&Lj("No map visible because the map container's width or height are 0."))}let n=this.getSize();e&&(!n||!Kd(e,n))&&(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(i){let e=this.getView();e&&e.setViewportSize(i)}};function yJe(r){let i=null;r.keyboardEventTarget!==void 0&&(i=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);let e={},n=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new r0({layers:r.layers});e[Ou.LAYERGROUP]=n,e[Ou.TARGET]=r.target,e[Ou.VIEW]=r.view instanceof Rm?r.view:new Rm;let o;r.controls!==void 0&&(Array.isArray(r.controls)?o=new al(r.controls.slice()):(Nn(typeof r.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),o=r.controls));let s;r.interactions!==void 0&&(Array.isArray(r.interactions)?s=new al(r.interactions.slice()):(Nn(typeof r.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=r.interactions));let l;return r.overlays!==void 0?Array.isArray(r.overlays)?l=new al(r.overlays.slice()):(Nn(typeof r.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),l=r.overlays):l=new al,{controls:o,interactions:s,keyboardEventTarget:i,overlays:l,values:e}}var o8=Yee;var Kee="units",vJe=[1,2,5],qR=25.4/.28,Zee=class extends G1{constructor(i){i=i||{};let e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:i.render,target:i.target}),this.on,this.once,this.un;let n=i.className!==void 0?i.className:i.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+F_,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=i.minWidth!==void 0?i.minWidth:64,this.maxWidth_=i.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(Kee,this.handleUnitsChanged_),this.setUnits(i.units||"metric"),this.scaleBar_=i.bar||!1,this.scaleBarSteps_=i.steps||4,this.scaleBarText_=i.text||!1,this.dpi_=i.dpi||void 0}getUnits(){return this.get(Kee)}handleUnitsChanged_(){this.updateElement_()}setUnits(i){this.set(Kee,i)}setDpi(i){this.dpi_=i}updateElement_(){let i=this.viewState_;if(!i){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let e=i.center,n=i.projection,o=this.getUnits(),s=o=="degrees"?"degrees":"m",l=DS(n,i.resolution,e,s),h=this.minWidth_*(this.dpi_||qR)/qR,p=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||qR)/qR:void 0,m=h*l,f="";if(o=="degrees"){let H=Dp.degrees;m*=H,m<H/60?(f="\u2033",l*=3600):m<H?(f="\u2032",l*=60):f="\xB0"}else if(o=="imperial")m<.9144?(f="in",l/=.0254):m<1609.344?(f="ft",l/=.3048):(f="mi",l/=1609.344);else if(o=="nautical")l/=1852,f="NM";else if(o=="metric")m<1e-6?(f="nm",l*=1e9):m<.001?(f="\u03BCm",l*=1e6):m<1?(f="mm",l*=1e3):m<1e3?f="m":(f="km",l/=1e3);else if(o=="us")m<.9144?(f="in",l*=39.37):m<1609.344?(f="ft",l/=.30480061):(f="mi",l/=1609.3472);else throw new Error("Invalid units");let g=3*Math.floor(Math.log(h*l)/Math.log(10)),y,_,w,A,k,R;for(;;){w=Math.floor(g/3);let H=Math.pow(10,w);if(y=vJe[(g%3+3)%3]*H,_=Math.round(y/l),isNaN(_)){this.element.style.display="none",this.renderedVisible_=!1;return}if(p!==void 0&&_>=p){y=A,_=k,w=R;break}else if(_>=h)break;A=y,k=_,R=w,++g}let $=this.scaleBar_?this.createScaleBar(_,y,f):y.toFixed(w<0?-w:0)+" "+f;this.renderedHTML_!=$&&(this.innerElement_.innerHTML=$,this.renderedHTML_=$),this.renderedWidth_!=_&&(this.innerElement_.style.width=_+"px",this.renderedWidth_=_),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(i,e,n){let o=this.getScaleForResolution(),s=o<1?Math.round(1/o).toLocaleString()+" : 1":"1 : "+Math.round(o).toLocaleString(),l=this.scaleBarSteps_,h=i/l,p=[this.createMarker("absolute")];for(let f=0;f<l;++f){let g=f%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";p.push(`<div><div class="ol-scale-singlebar ${g}" style="width: ${h}px;"></div>`+this.createMarker("relative")+(f%2===0||l===2?this.createStepText(f,i,!1,e,n):"")+"</div>")}return p.push(this.createStepText(l,i,!0,e,n)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${i}px;">`+s+"</div>":"")+p.join("")}createMarker(i){return`<div class="ol-scale-step-marker" style="position: ${i}; top: ${i==="absolute"?3:-10}px;"></div>`}createStepText(i,e,n,o,s){let h=(i===0?0:Math.round(o/this.scaleBarSteps_*i*100)/100)+(i===0?"":" "+s),p=i===0?-3:e/this.scaleBarSteps_*-1,m=i===0?0:e/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${p}px;text-align: ${i===0?"left":"center"};min-width: ${m}px;left: ${n?e+"px":"unset"};">`+h+"</div>"}getScaleForResolution(){let i=DS(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),e=this.dpi_||qR,n=1e3/25.4;return i*n*e}render(i){let e=i.frameState;e?this.viewState_=e.viewState:this.viewState_=null,this.updateElement_()}},Qee=Zee;var bJe=null;function Xee(r){bJe=r;let i=Object.keys(r.defs),e=i.length,n,o;for(n=0;n<e;++n){let s=i[n];if(!Vi(s)){let l=r.defs(s),h=l.units;!h&&l.projName==="longlat"&&(h="degrees"),vK(new Cf({code:s,axisOrientation:l.axis,metersPerUnit:l.to_meter,units:h}))}}for(n=0;n<e;++n){let s=i[n],l=Vi(s);for(o=0;o<e;++o){let h=i[o],p=Vi(h);if(!Dj(s,h))if(r.defs[s]===r.defs[h])Nj([l,p]);else{let m=r(s,h);N0e(l,p,bK(l,p,m.forward),bK(p,l,m.inverse))}}}}function zCe(r){r("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),r("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),r("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var i=1;i<=60;++i)r("EPSG:"+(32600+i),"+proj=utm +zone="+i+" +datum=WGS84 +units=m"),r("EPSG:"+(32700+i),"+proj=utm +zone="+i+" +south +datum=WGS84 +units=m");r.WGS84=r["EPSG:4326"],r["EPSG:3785"]=r["EPSG:3857"],r.GOOGLE=r["EPSG:3857"],r["EPSG:900913"]=r["EPSG:3857"],r["EPSG:102113"]=r["EPSG:3857"]}var o0=1,s0=2,Xv=3,GCe=4,YR=5,Jee=6378137,HCe=6356752314e-3,ete=.0066943799901413165,JS=484813681109536e-20,ui=Math.PI/2,WCe=.16666666666666666,qCe=.04722222222222222,YCe=.022156084656084655,Oi=1e-10,wc=.017453292519943295,Wp=57.29577951308232,ns=Math.PI/4,H1=Math.PI*2,Zl=3.14159265359;var qp={};qp.greenwich=0;qp.lisbon=-9.131906111111;qp.paris=2.337229166667;qp.bogota=-74.080916666667;qp.madrid=-3.687938888889;qp.rome=12.452333333333;qp.bern=7.439583333333;qp.jakarta=106.807719444444;qp.ferro=-17.666666666667;qp.brussels=4.367975;qp.stockholm=18.058277777778;qp.athens=23.7163375;qp.oslo=10.722916666667;var KCe=qp;var ZCe={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var QCe=/[\s_\-\/\(\)]/g;function Fm(r,i){if(r[i])return r[i];for(var e=Object.keys(r),n=i.toLowerCase().replace(QCe,""),o=-1,s,l;++o<e.length;)if(s=e[o],l=s.toLowerCase().replace(QCe,""),l===n)return r[s]}function KR(r){var i={},e=r.split("+").map(function(h){return h.trim()}).filter(function(h){return h}).reduce(function(h,p){var m=p.split("=");return m.push(!0),h[m[0].toLowerCase()]=m[1],h},{}),n,o,s,l={proj:"projName",datum:"datumCode",rf:function(h){i.rf=parseFloat(h)},lat_0:function(h){i.lat0=h*wc},lat_1:function(h){i.lat1=h*wc},lat_2:function(h){i.lat2=h*wc},lat_ts:function(h){i.lat_ts=h*wc},lon_0:function(h){i.long0=h*wc},lon_1:function(h){i.long1=h*wc},lon_2:function(h){i.long2=h*wc},alpha:function(h){i.alpha=parseFloat(h)*wc},gamma:function(h){i.rectified_grid_angle=parseFloat(h)*wc},lonc:function(h){i.longc=h*wc},x_0:function(h){i.x0=parseFloat(h)},y_0:function(h){i.y0=parseFloat(h)},k_0:function(h){i.k0=parseFloat(h)},k:function(h){i.k0=parseFloat(h)},a:function(h){i.a=parseFloat(h)},b:function(h){i.b=parseFloat(h)},r:function(h){i.a=i.b=parseFloat(h)},r_a:function(){i.R_A=!0},zone:function(h){i.zone=parseInt(h,10)},south:function(){i.utmSouth=!0},towgs84:function(h){i.datum_params=h.split(",").map(function(p){return parseFloat(p)})},to_meter:function(h){i.to_meter=parseFloat(h)},units:function(h){i.units=h;var p=Fm(ZCe,h);p&&(i.to_meter=p.to_meter)},from_greenwich:function(h){i.from_greenwich=h*wc},pm:function(h){var p=Fm(KCe,h);i.from_greenwich=(p||parseFloat(h))*wc},nadgrids:function(h){h==="@null"?i.datumCode="none":i.nadgrids=h},axis:function(h){var p="ewnsud";h.length===3&&p.indexOf(h.substr(0,1))!==-1&&p.indexOf(h.substr(1,1))!==-1&&p.indexOf(h.substr(2,1))!==-1&&(i.axis=h)},approx:function(){i.approx=!0}};for(n in e)o=e[n],n in l?(s=l[n],typeof s=="function"?s(o):i[s]=o):i[n]=o;return typeof i.datumCode=="string"&&i.datumCode!=="WGS84"&&(i.datumCode=i.datumCode.toLowerCase()),i}var tte=class{static getId(i){let e=i.find(n=>Array.isArray(n)&&n[0]==="ID");return e&&e.length>=3?{authority:e[1],code:parseInt(e[2],10)}:null}static convertUnit(i,e="unit"){if(!i||i.length<3)return{type:e,name:"unknown",conversion_factor:null};let n=i[1],o=parseFloat(i[2])||null,s=i.find(h=>Array.isArray(h)&&h[0]==="ID"),l=s?{authority:s[1],code:parseInt(s[2],10)}:null;return{type:e,name:n,conversion_factor:o,id:l}}static convertAxis(i){let e=i[1]||"Unknown",n,o=e.match(/^\((.)\)$/);if(o){let m=o[1].toUpperCase();if(m==="E")n="east";else if(m==="N")n="north";else if(m==="U")n="up";else throw new Error(`Unknown axis abbreviation: ${m}`)}else n=i[2]?i[2].toLowerCase():"unknown";let s=i.find(m=>Array.isArray(m)&&m[0]==="ORDER"),l=s?parseInt(s[1],10):null,h=i.find(m=>Array.isArray(m)&&(m[0]==="LENGTHUNIT"||m[0]==="ANGLEUNIT"||m[0]==="SCALEUNIT")),p=this.convertUnit(h);return{name:e,direction:n,unit:p,order:l}}static extractAxes(i){return i.filter(e=>Array.isArray(e)&&e[0]==="AXIS").map(e=>this.convertAxis(e)).sort((e,n)=>(e.order||0)-(n.order||0))}static convert(i,e={}){switch(i[0]){case"PROJCRS":e.type="ProjectedCRS",e.name=i[1],e.base_crs=i.find(_=>Array.isArray(_)&&_[0]==="BASEGEOGCRS")?this.convert(i.find(_=>Array.isArray(_)&&_[0]==="BASEGEOGCRS")):null,e.conversion=i.find(_=>Array.isArray(_)&&_[0]==="CONVERSION")?this.convert(i.find(_=>Array.isArray(_)&&_[0]==="CONVERSION")):null;let n=i.find(_=>Array.isArray(_)&&_[0]==="CS");n&&(e.coordinate_system={type:n[1],axis:this.extractAxes(i)});let o=i.find(_=>Array.isArray(_)&&_[0]==="LENGTHUNIT");if(o){let _=this.convertUnit(o);e.coordinate_system.unit=_}e.id=this.getId(i);break;case"BASEGEOGCRS":case"GEOGCRS":e.type="GeographicCRS",e.name=i[1];let s=i.find(_=>Array.isArray(_)&&(_[0]==="DATUM"||_[0]==="ENSEMBLE"));if(s){let _=this.convert(s);s[0]==="ENSEMBLE"?e.datum_ensemble=_:e.datum=_;let w=i.find(A=>Array.isArray(A)&&A[0]==="PRIMEM");w&&w[1]!=="Greenwich"&&(_.prime_meridian={name:w[1],longitude:parseFloat(w[2])})}e.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(i)},e.id=this.getId(i);break;case"DATUM":e.type="GeodeticReferenceFrame",e.name=i[1],e.ellipsoid=i.find(_=>Array.isArray(_)&&_[0]==="ELLIPSOID")?this.convert(i.find(_=>Array.isArray(_)&&_[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":e.type="DatumEnsemble",e.name=i[1],e.members=i.filter(_=>Array.isArray(_)&&_[0]==="MEMBER").map(_=>({type:"DatumEnsembleMember",name:_[1],id:this.getId(_)}));let l=i.find(_=>Array.isArray(_)&&_[0]==="ENSEMBLEACCURACY");l&&(e.accuracy=parseFloat(l[1]));let h=i.find(_=>Array.isArray(_)&&_[0]==="ELLIPSOID");h&&(e.ellipsoid=this.convert(h)),e.id=this.getId(i);break;case"ELLIPSOID":e.type="Ellipsoid",e.name=i[1],e.semi_major_axis=parseFloat(i[2]),e.inverse_flattening=parseFloat(i[3]);let p=i.find(_=>Array.isArray(_)&&_[0]==="LENGTHUNIT")?this.convert(i.find(_=>Array.isArray(_)&&_[0]==="LENGTHUNIT"),e):null;break;case"CONVERSION":e.type="Conversion",e.name=i[1],e.method=i.find(_=>Array.isArray(_)&&_[0]==="METHOD")?this.convert(i.find(_=>Array.isArray(_)&&_[0]==="METHOD")):null,e.parameters=i.filter(_=>Array.isArray(_)&&_[0]==="PARAMETER").map(_=>this.convert(_));break;case"METHOD":e.type="Method",e.name=i[1],e.id=this.getId(i);break;case"PARAMETER":e.type="Parameter",e.name=i[1],e.value=parseFloat(i[2]),e.unit=this.convertUnit(i.find(_=>Array.isArray(_)&&(_[0]==="LENGTHUNIT"||_[0]==="ANGLEUNIT"||_[0]==="SCALEUNIT"))),e.id=this.getId(i);break;case"BOUNDCRS":e.type="BoundCRS";let m=i.find(_=>Array.isArray(_)&&_[0]==="SOURCECRS");if(m){let _=m.find(w=>Array.isArray(w));e.source_crs=_?this.convert(_):null}let f=i.find(_=>Array.isArray(_)&&_[0]==="TARGETCRS");if(f){let _=f.find(w=>Array.isArray(w));e.target_crs=_?this.convert(_):null}let g=i.find(_=>Array.isArray(_)&&_[0]==="ABRIDGEDTRANSFORMATION");g?e.transformation=this.convert(g):e.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(e.type="Transformation",e.name=i[1],e.method=i.find(_=>Array.isArray(_)&&_[0]==="METHOD")?this.convert(i.find(_=>Array.isArray(_)&&_[0]==="METHOD")):null,e.parameters=i.filter(_=>Array.isArray(_)&&(_[0]==="PARAMETER"||_[0]==="PARAMETERFILE")).map(_=>{if(_[0]==="PARAMETER")return this.convert(_);if(_[0]==="PARAMETERFILE")return{name:_[1],value:_[2],id:{authority:"EPSG",code:8656}}}),e.parameters.length===7){let _=e.parameters[6];_.name==="Scale difference"&&(_.value=Math.round((_.value-1)*1e12)/1e6)}e.id=this.getId(i);break;case"AXIS":e.coordinate_system||(e.coordinate_system={type:"unspecified",axis:[]}),e.coordinate_system.axis.push(this.convertAxis(i));break;case"LENGTHUNIT":let y=this.convertUnit(i,"LinearUnit");e.coordinate_system&&e.coordinate_system.axis&&e.coordinate_system.axis.forEach(_=>{_.unit||(_.unit=y)}),y.conversion_factor&&y.conversion_factor!==1&&e.semi_major_axis&&(e.semi_major_axis={value:e.semi_major_axis,unit:y});break;default:e.keyword=i[0];break}return e}},s8=tte;var ite=class extends s8{static convert(i,e={}){return super.convert(i,e),e.coordinate_system&&e.coordinate_system.subtype==="Cartesian"&&delete e.coordinate_system,e.usage&&delete e.usage,e}},XCe=ite;var nte=class extends s8{static convert(i,e={}){super.convert(i,e);let n=i.find(s=>Array.isArray(s)&&s[0]==="CS");n&&(e.coordinate_system={subtype:n[1],axis:this.extractAxes(i)});let o=i.find(s=>Array.isArray(s)&&s[0]==="USAGE");if(o){let s=o.find(p=>Array.isArray(p)&&p[0]==="SCOPE"),l=o.find(p=>Array.isArray(p)&&p[0]==="AREA"),h=o.find(p=>Array.isArray(p)&&p[0]==="BBOX");e.usage={},s&&(e.usage.scope=s[1]),l&&(e.usage.area=l[1]),h&&(e.usage.bbox=h.slice(1))}return e}},JCe=nte;function CJe(r){return r.find(i=>Array.isArray(i)&&i[0]==="USAGE")?"2019":(r.find(i=>Array.isArray(i)&&i[0]==="CS")||r[0]==="BOUNDCRS"||r[0]==="PROJCRS"||r[0]==="GEOGCRS","2015")}function exe(r){return(CJe(r)==="2019"?JCe:XCe).convert(r)}function txe(r){let i=r.toUpperCase();return i.includes("PROJCRS")||i.includes("GEOGCRS")||i.includes("BOUNDCRS")||i.includes("VERTCRS")||i.includes("LENGTHUNIT")||i.includes("ANGLEUNIT")||i.includes("SCALEUNIT")?"WKT2":(i.includes("PROJCS")||i.includes("GEOGCS")||i.includes("LOCAL_CS")||i.includes("VERT_CS")||i.includes("UNIT"),"WKT1")}var ixe=TJe,ZR=1,nxe=2,rxe=3,a8=4,oxe=5,rte=-1,xJe=/\s/,SJe=/[A-Za-z]/,IJe=/[A-Za-z84_]/,l8=/[,\]]/,sxe=/[\d\.E\-\+]/;function Jv(r){if(typeof r!="string")throw new Error("not a string");this.text=r.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=ZR}Jv.prototype.readCharicter=function(){var r=this.text[this.place++];if(this.state!==a8)for(;xJe.test(r);){if(this.place>=this.text.length)return;r=this.text[this.place++]}switch(this.state){case ZR:return this.neutral(r);case nxe:return this.keyword(r);case a8:return this.quoted(r);case oxe:return this.afterquote(r);case rxe:return this.number(r);case rte:return}};Jv.prototype.afterquote=function(r){if(r==='"'){this.word+='"',this.state=a8;return}if(l8.test(r)){this.word=this.word.trim(),this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in afterquote yet, index '+this.place)};Jv.prototype.afterItem=function(r){if(r===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=ZR;return}if(r==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=ZR,this.currentObject=this.stack.pop(),this.currentObject||(this.state=rte);return}};Jv.prototype.number=function(r){if(sxe.test(r)){this.word+=r;return}if(l8.test(r)){this.word=parseFloat(this.word),this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in number yet, index '+this.place)};Jv.prototype.quoted=function(r){if(r==='"'){this.state=oxe;return}this.word+=r};Jv.prototype.keyword=function(r){if(IJe.test(r)){this.word+=r;return}if(r==="["){var i=[];i.push(this.word),this.level++,this.root===null?this.root=i:this.currentObject.push(i),this.stack.push(this.currentObject),this.currentObject=i,this.state=ZR;return}if(l8.test(r)){this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in keyword yet, index '+this.place)};Jv.prototype.neutral=function(r){if(SJe.test(r)){this.word=r,this.state=nxe;return}if(r==='"'){this.word="",this.state=a8;return}if(sxe.test(r)){this.word=r,this.state=rxe;return}if(l8.test(r)){this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in neutral yet, index '+this.place)};Jv.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===rte)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function TJe(r){var i=new Jv(r);return i.output()}function ote(r,i,e){Array.isArray(i)&&(e.unshift(i),i=null);var n=i?{}:r,o=e.reduce(function(s,l){return eI(l,s),s},n);i&&(r[i]=o)}function eI(r,i){if(!Array.isArray(r)){i[r]=!0;return}var e=r.shift();if(e==="PARAMETER"&&(e=r.shift()),r.length===1){if(Array.isArray(r[0])){i[e]={},eI(r[0],i[e]);return}i[e]=r[0];return}if(!r.length){i[e]=!0;return}if(e==="TOWGS84"){i[e]=r;return}if(e==="AXIS"){e in i||(i[e]=[]),i[e].push(r);return}Array.isArray(e)||(i[e]={});var n;switch(e){case"UNIT":case"PRIMEM":case"VERT_DATUM":i[e]={name:r[0].toLowerCase(),convert:r[1]},r.length===3&&eI(r[2],i[e]);return;case"SPHEROID":case"ELLIPSOID":i[e]={name:r[0],a:r[1],rf:r[2]},r.length===4&&eI(r[3],i[e]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":r[0]=["name",r[0]],ote(i,e,r);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":r[0]=["name",r[0]],ote(i,e,r),i[e].type=e;return;default:for(n=-1;++n<r.length;)if(!Array.isArray(r[n]))return eI(r,i[e]);return ote(i,e,r)}}var AJe=.017453292519943295;function Ff(r){return r*AJe}function c8(r){let i=(r.projName||"").toLowerCase().replace(/_/g," ");!r.long0&&r.longc&&(i==="albers conic equal area"||i==="lambert azimuthal equal area")&&(r.long0=r.longc),!r.lat_ts&&r.lat1&&(i==="stereographic south pole"||i==="polar stereographic (variant b)")?(r.lat0=Ff(r.lat1>0?90:-90),r.lat_ts=r.lat1,delete r.lat1):!r.lat_ts&&r.lat0&&(i==="polar stereographic"||i==="polar stereographic (variant a)")&&(r.lat_ts=r.lat0,r.lat0=Ff(r.lat0>0?90:-90),delete r.lat1)}function axe(r){let i={units:null,to_meter:void 0};return typeof r=="string"?(i.units=r.toLowerCase(),i.units==="metre"&&(i.units="meter"),i.units==="meter"&&(i.to_meter=1)):r&&r.name&&(i.units=r.name.toLowerCase(),i.units==="metre"&&(i.units="meter"),i.to_meter=r.conversion_factor),i}function lxe(r){return typeof r=="object"?r.value*r.unit.conversion_factor:r}function cxe(r,i){r.ellipsoid.radius?(i.a=r.ellipsoid.radius,i.rf=0):(i.a=lxe(r.ellipsoid.semi_major_axis),r.ellipsoid.inverse_flattening!==void 0?i.rf=r.ellipsoid.inverse_flattening:r.ellipsoid.semi_major_axis!==void 0&&r.ellipsoid.semi_minor_axis!==void 0&&(i.rf=i.a/(i.a-lxe(r.ellipsoid.semi_minor_axis))))}function QR(r,i={}){return!r||typeof r!="object"?r:r.type==="BoundCRS"?(QR(r.source_crs,i),r.transformation&&(r.transformation.method&&r.transformation.method.name==="NTv2"?i.nadgrids=r.transformation.parameters[0].value:i.datum_params=r.transformation.parameters.map(e=>e.value)),i):(Object.keys(r).forEach(e=>{let n=r[e];if(n!==null)switch(e){case"name":if(i.srsCode)break;i.name=n,i.srsCode=n;break;case"type":n==="GeographicCRS"?i.projName="longlat":n==="ProjectedCRS"&&r.conversion&&r.conversion.method&&(i.projName=r.conversion.method.name);break;case"datum":case"datum_ensemble":n.ellipsoid&&(i.ellps=n.ellipsoid.name,cxe(n,i)),n.prime_meridian&&(i.from_greenwich=n.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":i.ellps=n.name,cxe(n,i);break;case"prime_meridian":i.long0=(n.longitude||0)*Math.PI/180;break;case"coordinate_system":if(n.axis){if(i.axis=n.axis.map(o=>{let s=o.direction;if(s==="east")return"e";if(s==="north")return"n";if(s==="west")return"w";if(s==="south")return"s";throw new Error(`Unknown axis direction: ${s}`)}).join("")+"u",n.unit){let{units:o,to_meter:s}=axe(n.unit);i.units=o,i.to_meter=s}else if(n.axis[0]&&n.axis[0].unit){let{units:o,to_meter:s}=axe(n.axis[0].unit);i.units=o,i.to_meter=s}}break;case"id":n.authority&&n.code&&(i.title=n.authority+":"+n.code);break;case"conversion":n.method&&n.method.name&&(i.projName=n.method.name),n.parameters&&n.parameters.forEach(o=>{let s=o.name.toLowerCase().replace(/\s+/g,"_"),l=o.value;o.unit&&o.unit.conversion_factor?i[s]=l*o.unit.conversion_factor:o.unit==="degree"?i[s]=l*Math.PI/180:i[s]=l});break;case"unit":n.name&&(i.units=n.name.toLowerCase(),i.units==="metre"&&(i.units="meter")),n.conversion_factor&&(i.to_meter=n.conversion_factor);break;case"base_crs":QR(n,i),i.datumCode=n.id?n.id.authority+"_"+n.id.code:n.name;break;default:break}}),i.latitude_of_false_origin!==void 0&&(i.lat0=i.latitude_of_false_origin),i.longitude_of_false_origin!==void 0&&(i.long0=i.longitude_of_false_origin),i.latitude_of_standard_parallel!==void 0&&(i.lat0=i.latitude_of_standard_parallel,i.lat1=i.latitude_of_standard_parallel),i.latitude_of_1st_standard_parallel!==void 0&&(i.lat1=i.latitude_of_1st_standard_parallel),i.latitude_of_2nd_standard_parallel!==void 0&&(i.lat2=i.latitude_of_2nd_standard_parallel),i.latitude_of_projection_centre!==void 0&&(i.lat0=i.latitude_of_projection_centre),i.longitude_of_projection_centre!==void 0&&(i.longc=i.longitude_of_projection_centre),i.easting_at_false_origin!==void 0&&(i.x0=i.easting_at_false_origin),i.northing_at_false_origin!==void 0&&(i.y0=i.northing_at_false_origin),i.latitude_of_natural_origin!==void 0&&(i.lat0=i.latitude_of_natural_origin),i.longitude_of_natural_origin!==void 0&&(i.long0=i.longitude_of_natural_origin),i.longitude_of_origin!==void 0&&(i.long0=i.longitude_of_origin),i.false_easting!==void 0&&(i.x0=i.false_easting),i.easting_at_projection_centre&&(i.x0=i.easting_at_projection_centre),i.false_northing!==void 0&&(i.y0=i.false_northing),i.northing_at_projection_centre&&(i.y0=i.northing_at_projection_centre),i.standard_parallel_1!==void 0&&(i.lat1=i.standard_parallel_1),i.standard_parallel_2!==void 0&&(i.lat2=i.standard_parallel_2),i.scale_factor_at_natural_origin!==void 0&&(i.k0=i.scale_factor_at_natural_origin),i.scale_factor_at_projection_centre!==void 0&&(i.k0=i.scale_factor_at_projection_centre),i.scale_factor_on_pseudo_standard_parallel!==void 0&&(i.k0=i.scale_factor_on_pseudo_standard_parallel),i.azimuth!==void 0&&(i.alpha=i.azimuth),i.azimuth_at_projection_centre!==void 0&&(i.alpha=i.azimuth_at_projection_centre),i.angle_from_rectified_to_skew_grid&&(i.rectified_grid_angle=i.angle_from_rectified_to_skew_grid),c8(i),i)}var EJe=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function MJe(r,i){var e=i[0],n=i[1];!(e in r)&&n in r&&(r[e]=r[n],i.length===3&&(r[e]=i[2](r[e])))}function dxe(r){for(var i=Object.keys(r),e=0,n=i.length;e<n;++e){var o=i[e];EJe.indexOf(o)!==-1&&DJe(r[o]),typeof r[o]=="object"&&dxe(r[o])}}function DJe(r){if(r.AUTHORITY){var i=Object.keys(r.AUTHORITY)[0];i&&i in r.AUTHORITY&&(r.title=i+":"+r.AUTHORITY[i])}if(r.type==="GEOGCS"?r.projName="longlat":r.type==="LOCAL_CS"?(r.projName="identity",r.local=!0):typeof r.PROJECTION=="object"?r.projName=Object.keys(r.PROJECTION)[0]:r.projName=r.PROJECTION,r.AXIS){for(var e="",n=0,o=r.AXIS.length;n<o;++n){var s=[r.AXIS[n][0].toLowerCase(),r.AXIS[n][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?e+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?e+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?e+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(r.axis=e)}r.UNIT&&(r.units=r.UNIT.name.toLowerCase(),r.units==="metre"&&(r.units="meter"),r.UNIT.convert&&(r.type==="GEOGCS"?r.DATUM&&r.DATUM.SPHEROID&&(r.to_meter=r.UNIT.convert*r.DATUM.SPHEROID.a):r.to_meter=r.UNIT.convert));var l=r.GEOGCS;r.type==="GEOGCS"&&(l=r),l&&(l.DATUM?r.datumCode=l.DATUM.name.toLowerCase():r.datumCode=l.name.toLowerCase(),r.datumCode.slice(0,2)==="d_"&&(r.datumCode=r.datumCode.slice(2)),r.datumCode==="new_zealand_1949"&&(r.datumCode="nzgd49"),(r.datumCode==="wgs_1984"||r.datumCode==="world_geodetic_system_1984")&&(r.PROJECTION==="Mercator_Auxiliary_Sphere"&&(r.sphere=!0),r.datumCode="wgs84"),r.datumCode==="belge_1972"&&(r.datumCode="rnb72"),l.DATUM&&l.DATUM.SPHEROID&&(r.ellps=l.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),r.ellps.toLowerCase().slice(0,13)==="international"&&(r.ellps="intl"),r.a=l.DATUM.SPHEROID.a,r.rf=parseFloat(l.DATUM.SPHEROID.rf,10)),l.DATUM&&l.DATUM.TOWGS84&&(r.datum_params=l.DATUM.TOWGS84),~r.datumCode.indexOf("osgb_1936")&&(r.datumCode="osgb36"),~r.datumCode.indexOf("osni_1952")&&(r.datumCode="osni52"),(~r.datumCode.indexOf("tm65")||~r.datumCode.indexOf("geodetic_datum_of_1965"))&&(r.datumCode="ire65"),r.datumCode==="ch1903+"&&(r.datumCode="ch1903"),~r.datumCode.indexOf("israel")&&(r.datumCode="isr93")),r.b&&!isFinite(r.b)&&(r.b=r.a),r.rectified_grid_angle&&(r.rectified_grid_angle=Ff(r.rectified_grid_angle));function h(f){var g=r.to_meter||1;return f*g}var p=function(f){return MJe(r,f)},m=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Ff],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Ff],["x0","false_easting",h],["y0","false_northing",h],["long0","central_meridian",Ff],["lat0","latitude_of_origin",Ff],["lat0","standard_parallel_1",Ff],["lat1","standard_parallel_1",Ff],["lat2","standard_parallel_2",Ff],["azimuth","Azimuth"],["alpha","azimuth",Ff],["srsCode","name"]];m.forEach(p),c8(r)}function XR(r){if(typeof r=="object")return QR(r);let i=txe(r);var e=ixe(r);if(i==="WKT2"){let s=exe(e);return QR(s)}var n=e[0],o={};return eI(e,o),dxe(o),o[n]}function Lf(r){var i=this;if(arguments.length===2){var e=arguments[1];typeof e=="string"?e.charAt(0)==="+"?Lf[r]=KR(arguments[1]):Lf[r]=XR(arguments[1]):Lf[r]=e}else if(arguments.length===1){if(Array.isArray(r))return r.map(function(n){return Array.isArray(n)?Lf.apply(i,n):Lf(n)});if(typeof r=="string"){if(r in Lf)return Lf[r]}else"EPSG"in r?Lf["EPSG:"+r.EPSG]=r:"ESRI"in r?Lf["ESRI:"+r.ESRI]=r:"IAU2000"in r?Lf["IAU2000:"+r.IAU2000]=r:console.log(r);return}}zCe(Lf);var n2=Lf;function kJe(r){return typeof r=="string"}function OJe(r){return r in n2}function PJe(r){return r.indexOf("+")!==0&&r.indexOf("[")!==-1||typeof r=="object"&&!("srsCode"in r)}var RJe=["3857","900913","3785","102113"];function FJe(r){var i=Fm(r,"authority");if(i){var e=Fm(i,"epsg");return e&&RJe.indexOf(e)>-1}}function LJe(r){var i=Fm(r,"extension");if(i)return Fm(i,"proj4")}function NJe(r){return r[0]==="+"}function BJe(r){if(kJe(r)){if(OJe(r))return n2[r];if(PJe(r)){var i=XR(r);if(FJe(i))return n2["EPSG:3857"];var e=LJe(i);return e?KR(e):i}if(NJe(r))return KR(r)}else return"projName"in r?r:XR(r)}var uxe=BJe;function ste(r,i){r=r||{};var e,n;if(!i)return r;for(n in i)e=i[n],e!==void 0&&(r[n]=e);return r}function xh(r,i,e){var n=r*i;return e/Math.sqrt(1-n*n)}function X_(r){return r<0?-1:1}function Di(r){return Math.abs(r)<=Zl?r:r-X_(r)*H1}function op(r,i,e){var n=r*e,o=.5*r;return n=Math.pow((1-n)/(1+n),o),Math.tan(.5*(ui-i))/n}function eb(r,i){for(var e=.5*r,n,o,s=ui-2*Math.atan(i),l=0;l<=15;l++)if(n=r*Math.sin(s),o=ui-2*Math.atan(i*Math.pow((1-n)/(1+n),e))-s,s+=o,Math.abs(o)<=1e-10)return s;return-9999}function jJe(){var r=this.b/this.a;this.es=1-r*r,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=xh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function VJe(r){var i=r.x,e=r.y;if(e*Wp>90&&e*Wp<-90&&i*Wp>180&&i*Wp<-180)return null;var n,o;if(Math.abs(Math.abs(e)-ui)<=Oi)return null;if(this.sphere)n=this.x0+this.a*this.k0*Di(i-this.long0),o=this.y0+this.a*this.k0*Math.log(Math.tan(ns+.5*e));else{var s=Math.sin(e),l=op(this.e,e,s);n=this.x0+this.a*this.k0*Di(i-this.long0),o=this.y0-this.a*this.k0*Math.log(l)}return r.x=n,r.y=o,r}function $Je(r){var i=r.x-this.x0,e=r.y-this.y0,n,o;if(this.sphere)o=ui-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var s=Math.exp(-e/(this.a*this.k0));if(o=eb(this.e,s),o===-9999)return null}return n=Di(this.long0+i/(this.a*this.k0)),r.x=n,r.y=o,r}var UJe=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"],hxe={init:jJe,forward:VJe,inverse:$Je,names:UJe};function zJe(){}function pxe(r){return r}var GJe=["longlat","identity"],mxe={init:zJe,forward:pxe,inverse:pxe,names:GJe};var HJe=[hxe,mxe],tI={},r2=[];function fxe(r,i){var e=r2.length;return r.names?(r2[e]=r,r.names.forEach(function(n){tI[n.toLowerCase()]=e}),this):(console.log(i),!0)}function ate(r){return r.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function WJe(r){if(!r)return!1;var i=r.toLowerCase();if(typeof tI[i]<"u"&&r2[tI[i]]||(i=ate(i),i in tI&&r2[tI[i]]))return r2[tI[i]]}function qJe(){HJe.forEach(fxe)}var gxe={start:qJe,add:fxe,get:WJe};var YJe={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},lte=YJe;var KJe=lte.WGS84;function _xe(r,i,e,n){var o=r*r,s=i*i,l=(o-s)/o,h=0;n?(r*=1-l*(WCe+l*(qCe+l*YCe)),o=r*r,l=0):h=Math.sqrt(l);var p=(o-s)/s;return{es:l,e:h,ep2:p}}function yxe(r,i,e,n,o){if(!r){var s=Fm(lte,n);s||(s=KJe),r=s.a,i=s.b,e=s.rf}return e&&!i&&(i=(1-1/e)*r),(e===0||Math.abs(r-i)<Oi)&&(o=!0,i=r),{a:r,b:i,rf:e,sphere:o}}var u8={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(vxe in u8)d8=u8[vxe],d8.datumName&&(u8[d8.datumName]=d8);var d8,vxe,bxe=u8;function ZJe(r,i,e,n,o,s,l){var h={};return r===void 0||r==="none"?h.datum_type=YR:h.datum_type=GCe,i&&(h.datum_params=i.map(parseFloat),(h.datum_params[0]!==0||h.datum_params[1]!==0||h.datum_params[2]!==0)&&(h.datum_type=o0),h.datum_params.length>3&&(h.datum_params[3]!==0||h.datum_params[4]!==0||h.datum_params[5]!==0||h.datum_params[6]!==0)&&(h.datum_type=s0,h.datum_params[3]*=JS,h.datum_params[4]*=JS,h.datum_params[5]*=JS,h.datum_params[6]=h.datum_params[6]/1e6+1)),l&&(h.datum_type=Xv,h.grids=l),h.a=e,h.b=n,h.es=o,h.ep2=s,h}var wxe=ZJe;var dte={};function ute(r,i,e){return i instanceof ArrayBuffer?QJe(r,i,e):{ready:XJe(r,i)}}function QJe(r,i,e){var n=!0;e!==void 0&&e.includeErrorFields===!1&&(n=!1);var o=new DataView(i),s=eet(o),l=tet(o,s),h=iet(o,l,s,n),p={header:l,subgrids:h};return dte[r]=p,p}function XJe(r,i){return st(this,null,function*(){for(var e=[],n=yield i.getImageCount(),o=n-1;o>=0;o--){var s=yield i.getImage(o),l=yield s.readRasters(),h=l,p=[s.getWidth(),s.getHeight()],m=s.getBoundingBox().map(Cxe),f=[s.fileDirectory.ModelPixelScale[0],s.fileDirectory.ModelPixelScale[1]].map(Cxe),g=m[0]+(p[0]-1)*f[0],y=m[3]-(p[1]-1)*f[1],_=h[0],w=h[1],A=[];for(let $=p[1]-1;$>=0;$--)for(let H=p[0]-1;H>=0;H--){var k=$*p[0]+H;A.push([-W1(w[k]),W1(_[k])])}e.push({del:f,lim:p,ll:[-g,y],cvs:A})}var R={header:{nSubgrids:n},subgrids:e};return dte[r]=R,R})}function xxe(r){if(r===void 0)return null;var i=r.split(",");return i.map(JJe)}function JJe(r){if(r.length===0)return null;var i=r[0]==="@";return i&&(r=r.slice(1)),r==="null"?{name:"null",mandatory:!i,grid:null,isNull:!0}:{name:r,mandatory:!i,grid:dte[r]||null,isNull:!1}}function Cxe(r){return r*Math.PI/180}function W1(r){return r/3600*Math.PI/180}function eet(r){var i=r.getInt32(8,!1);return i===11?!1:(i=r.getInt32(8,!0),i!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function tet(r,i){return{nFields:r.getInt32(8,i),nSubgridFields:r.getInt32(24,i),nSubgrids:r.getInt32(40,i),shiftType:cte(r,56,64).trim(),fromSemiMajorAxis:r.getFloat64(120,i),fromSemiMinorAxis:r.getFloat64(136,i),toSemiMajorAxis:r.getFloat64(152,i),toSemiMinorAxis:r.getFloat64(168,i)}}function cte(r,i,e){return String.fromCharCode.apply(null,new Uint8Array(r.buffer.slice(i,e)))}function iet(r,i,e,n){for(var o=176,s=[],l=0;l<i.nSubgrids;l++){var h=ret(r,o,e),p=oet(r,o,h,e,n),m=Math.round(1+(h.upperLongitude-h.lowerLongitude)/h.longitudeInterval),f=Math.round(1+(h.upperLatitude-h.lowerLatitude)/h.latitudeInterval);s.push({ll:[W1(h.lowerLongitude),W1(h.lowerLatitude)],del:[W1(h.longitudeInterval),W1(h.latitudeInterval)],lim:[m,f],count:h.gridNodeCount,cvs:net(p)});var g=16;n===!1&&(g=8),o+=176+h.gridNodeCount*g}return s}function net(r){return r.map(function(i){return[W1(i.longitudeShift),W1(i.latitudeShift)]})}function ret(r,i,e){return{name:cte(r,i+8,i+16).trim(),parent:cte(r,i+24,i+24+8).trim(),lowerLatitude:r.getFloat64(i+72,e),upperLatitude:r.getFloat64(i+88,e),lowerLongitude:r.getFloat64(i+104,e),upperLongitude:r.getFloat64(i+120,e),latitudeInterval:r.getFloat64(i+136,e),longitudeInterval:r.getFloat64(i+152,e),gridNodeCount:r.getInt32(i+168,e)}}function oet(r,i,e,n,o){var s=i+176,l=16;o===!1&&(l=8);for(var h=[],p=0;p<e.gridNodeCount;p++){var m={latitudeShift:r.getFloat32(s+p*l,n),longitudeShift:r.getFloat32(s+p*l+4,n)};o!==!1&&(m.latitudeAccuracy=r.getFloat32(s+p*l+8,n),m.longitudeAccuracy=r.getFloat32(s+p*l+12,n)),h.push(m)}return h}function o2(r,i){if(!(this instanceof o2))return new o2(r);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,i=i||function(m){if(m)throw m};var e=uxe(r);if(typeof e!="object"){i("Could not parse to valid json: "+r);return}var n=o2.projections.get(e.projName);if(!n){i("Could not get projection name from: "+r);return}if(e.datumCode&&e.datumCode!=="none"){var o=Fm(bxe,e.datumCode);o&&(e.datum_params=e.datum_params||(o.towgs84?o.towgs84.split(","):null),e.ellps=o.ellipse,e.datumName=o.datumName?o.datumName:e.datumCode)}e.k0=e.k0||1,e.axis=e.axis||"enu",e.ellps=e.ellps||"wgs84",e.lat1=e.lat1||e.lat0;var s=yxe(e.a,e.b,e.rf,e.ellps,e.sphere),l=_xe(s.a,s.b,s.rf,e.R_A),h=xxe(e.nadgrids),p=e.datum||wxe(e.datumCode,e.datum_params,s.a,s.b,l.es,l.ep2,h);ste(this,e),ste(this,n),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=l.es,this.e=l.e,this.ep2=l.ep2,this.datum=p,"init"in this&&typeof this.init=="function"&&this.init(),i(null,this)}o2.projections=gxe;o2.projections.start();var tb=o2;function Sxe(r,i){return r.datum_type!==i.datum_type||r.a!==i.a||Math.abs(r.es-i.es)>5e-11?!1:r.datum_type===o0?r.datum_params[0]===i.datum_params[0]&&r.datum_params[1]===i.datum_params[1]&&r.datum_params[2]===i.datum_params[2]:r.datum_type===s0?r.datum_params[0]===i.datum_params[0]&&r.datum_params[1]===i.datum_params[1]&&r.datum_params[2]===i.datum_params[2]&&r.datum_params[3]===i.datum_params[3]&&r.datum_params[4]===i.datum_params[4]&&r.datum_params[5]===i.datum_params[5]&&r.datum_params[6]===i.datum_params[6]:!0}function h8(r,i,e){var n=r.x,o=r.y,s=r.z?r.z:0,l,h,p,m;if(o<-ui&&o>-1.001*ui)o=-ui;else if(o>ui&&o<1.001*ui)o=ui;else{if(o<-ui)return{x:-1/0,y:-1/0,z:r.z};if(o>ui)return{x:1/0,y:1/0,z:r.z}}return n>Math.PI&&(n-=2*Math.PI),h=Math.sin(o),m=Math.cos(o),p=h*h,l=e/Math.sqrt(1-i*p),{x:(l+s)*m*Math.cos(n),y:(l+s)*m*Math.sin(n),z:(l*(1-i)+s)*h}}function p8(r,i,e,n){var o=1e-12,s=o*o,l=30,h,p,m,f,g,y,_,w,A,k,R,$,H,oe=r.x,se=r.y,ge=r.z?r.z:0,ue,pe,Ce;if(h=Math.sqrt(oe*oe+se*se),p=Math.sqrt(oe*oe+se*se+ge*ge),h/e<o){if(ue=0,p/e<o)return pe=ui,Ce=-n,{x:r.x,y:r.y,z:r.z}}else ue=Math.atan2(se,oe);m=ge/p,f=h/p,g=1/Math.sqrt(1-i*(2-i)*f*f),w=f*(1-i)*g,A=m*g,H=0;do H++,_=e/Math.sqrt(1-i*A*A),Ce=h*w+ge*A-_*(1-i*A*A),y=i*_/(_+Ce),g=1/Math.sqrt(1-y*(2-y)*f*f),k=f*(1-y)*g,R=m*g,$=R*w-k*A,w=k,A=R;while($*$>s&&H<l);return pe=Math.atan(R/Math.abs(k)),{x:ue,y:pe,z:Ce}}function Ixe(r,i,e){if(i===o0)return{x:r.x+e[0],y:r.y+e[1],z:r.z+e[2]};if(i===s0){var n=e[0],o=e[1],s=e[2],l=e[3],h=e[4],p=e[5],m=e[6];return{x:m*(r.x-p*r.y+h*r.z)+n,y:m*(p*r.x+r.y-l*r.z)+o,z:m*(-h*r.x+l*r.y+r.z)+s}}}function Txe(r,i,e){if(i===o0)return{x:r.x-e[0],y:r.y-e[1],z:r.z-e[2]};if(i===s0){var n=e[0],o=e[1],s=e[2],l=e[3],h=e[4],p=e[5],m=e[6],f=(r.x-n)/m,g=(r.y-o)/m,y=(r.z-s)/m;return{x:f+p*g-h*y,y:-p*f+g+l*y,z:h*f-l*g+y}}}function m8(r){return r===o0||r===s0}function Mxe(r,i,e){if(Sxe(r,i)||r.datum_type===YR||i.datum_type===YR)return e;var n=r.a,o=r.es;if(r.datum_type===Xv){var s=Axe(r,!1,e);if(s!==0)return;n=Jee,o=ete}var l=i.a,h=i.b,p=i.es;if(i.datum_type===Xv&&(l=Jee,h=HCe,p=ete),o===p&&n===l&&!m8(r.datum_type)&&!m8(i.datum_type))return e;if(e=h8(e,o,n),m8(r.datum_type)&&(e=Ixe(e,r.datum_type,r.datum_params)),m8(i.datum_type)&&(e=Txe(e,i.datum_type,i.datum_params)),e=p8(e,p,l,h),i.datum_type===Xv){var m=Axe(i,!0,e);if(m!==0)return}return e}function Axe(r,i,e){if(r.grids===null||r.grids.length===0)return console.log("Grid shift grids not found"),-1;var n={x:-e.x,y:e.y},o={x:Number.NaN,y:Number.NaN},s=[];e:for(var l=0;l<r.grids.length;l++){var h=r.grids[l];if(s.push(h.name),h.isNull){o=n;break}if(h.grid===null){if(h.mandatory)return console.log("Unable to find mandatory grid '"+h.name+"'"),-1;continue}for(var p=h.grid.subgrids,m=0,f=p.length;m<f;m++){var g=p[m],y=(Math.abs(g.del[1])+Math.abs(g.del[0]))/1e4,_=g.ll[0]-y,w=g.ll[1]-y,A=g.ll[0]+(g.lim[0]-1)*g.del[0]+y,k=g.ll[1]+(g.lim[1]-1)*g.del[1]+y;if(!(w>n.y||_>n.x||k<n.y||A<n.x)&&(o=set(n,i,g),!isNaN(o.x)))break e}}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*Wp+" "+n.y*Wp+" tried: '"+s+"'"),-1):(e.x=-o.x,e.y=o.y,0)}function set(r,i,e){var n={x:Number.NaN,y:Number.NaN};if(isNaN(r.x))return n;var o={x:r.x,y:r.y};o.x-=e.ll[0],o.y-=e.ll[1],o.x=Di(o.x-Math.PI)+Math.PI;var s=Exe(o,e);if(i){if(isNaN(s.x))return n;s.x=o.x-s.x,s.y=o.y-s.y;var l=9,h=1e-12,p,m;do{if(m=Exe(s,e),isNaN(m.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}p={x:o.x-(m.x+s.x),y:o.y-(m.y+s.y)},s.x+=p.x,s.y+=p.y}while(l--&&Math.abs(p.x)>h&&Math.abs(p.y)>h);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=Di(s.x+e.ll[0]),n.y=s.y+e.ll[1]}else isNaN(s.x)||(n.x=r.x+s.x,n.y=r.y+s.y);return n}function Exe(r,i){var e={x:r.x/i.del[0],y:r.y/i.del[1]},n={x:Math.floor(e.x),y:Math.floor(e.y)},o={x:e.x-1*n.x,y:e.y-1*n.y},s={x:Number.NaN,y:Number.NaN},l;if(n.x<0||n.x>=i.lim[0]||n.y<0||n.y>=i.lim[1])return s;l=n.y*i.lim[0]+n.x;var h={x:i.cvs[l][0],y:i.cvs[l][1]};l++;var p={x:i.cvs[l][0],y:i.cvs[l][1]};l+=i.lim[0];var m={x:i.cvs[l][0],y:i.cvs[l][1]};l--;var f={x:i.cvs[l][0],y:i.cvs[l][1]},g=o.x*o.y,y=o.x*(1-o.y),_=(1-o.x)*(1-o.y),w=(1-o.x)*o.y;return s.x=_*h.x+y*p.x+w*f.x+g*m.x,s.y=_*h.y+y*p.y+w*f.y+g*m.y,s}function hte(r,i,e){var n=e.x,o=e.y,s=e.z||0,l,h,p,m={};for(p=0;p<3;p++)if(!(i&&p===2&&e.z===void 0))switch(p===0?(l=n,"ew".indexOf(r.axis[p])!==-1?h="x":h="y"):p===1?(l=o,"ns".indexOf(r.axis[p])!==-1?h="y":h="x"):(l=s,h="z"),r.axis[p]){case"e":m[h]=l;break;case"w":m[h]=-l;break;case"n":m[h]=l;break;case"s":m[h]=-l;break;case"u":e[h]!==void 0&&(m.z=l);break;case"d":e[h]!==void 0&&(m.z=-l);break;default:return null}return m}function f8(r){var i={x:r[0],y:r[1]};return r.length>2&&(i.z=r[2]),r.length>3&&(i.m=r[3]),i}function kxe(r){Dxe(r.x),Dxe(r.y)}function Dxe(r){if(typeof Number.isFinite=="function"){if(Number.isFinite(r))return;throw new TypeError("coordinates must be finite numbers")}if(typeof r!="number"||r!==r||!isFinite(r))throw new TypeError("coordinates must be finite numbers")}function aet(r,i){return(r.datum.datum_type===o0||r.datum.datum_type===s0||r.datum.datum_type===Xv)&&i.datumCode!=="WGS84"||(i.datum.datum_type===o0||i.datum.datum_type===s0||i.datum.datum_type===Xv)&&r.datumCode!=="WGS84"}function iI(r,i,e,n){var o;Array.isArray(e)?e=f8(e):e={x:e.x,y:e.y,z:e.z,m:e.m};var s=e.z!==void 0;if(kxe(e),r.datum&&i.datum&&aet(r,i)&&(o=new tb("WGS84"),e=iI(r,o,e,n),r=o),n&&r.axis!=="enu"&&(e=hte(r,!1,e)),r.projName==="longlat")e={x:e.x*wc,y:e.y*wc,z:e.z||0};else if(r.to_meter&&(e={x:e.x*r.to_meter,y:e.y*r.to_meter,z:e.z||0}),e=r.inverse(e),!e)return;if(r.from_greenwich&&(e.x+=r.from_greenwich),e=Mxe(r.datum,i.datum,e),!!e)return e=e,i.from_greenwich&&(e={x:e.x-i.from_greenwich,y:e.y,z:e.z||0}),i.projName==="longlat"?e={x:e.x*Wp,y:e.y*Wp,z:e.z||0}:(e=i.forward(e),i.to_meter&&(e={x:e.x/i.to_meter,y:e.y/i.to_meter,z:e.z||0})),n&&i.axis!=="enu"?hte(i,!0,e):(e&&!s&&delete e.z,e)}var Oxe=tb("WGS84");function pte(r,i,e,n){var o,s,l;return Array.isArray(e)?(o=iI(r,i,e,n)||{x:NaN,y:NaN},e.length>2?typeof r.name<"u"&&r.name==="geocent"||typeof i.name<"u"&&i.name==="geocent"?typeof o.z=="number"?[o.x,o.y,o.z].concat(e.slice(3)):[o.x,o.y,e[2]].concat(e.slice(3)):[o.x,o.y].concat(e.slice(2)):[o.x,o.y]):(s=iI(r,i,e,n),l=Object.keys(e),l.length===2||l.forEach(function(h){if(typeof r.name<"u"&&r.name==="geocent"||typeof i.name<"u"&&i.name==="geocent"){if(h==="x"||h==="y"||h==="z")return}else if(h==="x"||h==="y")return;s[h]=e[h]}),s)}function g8(r){return r instanceof tb?r:typeof r=="object"&&"oProj"in r?r.oProj:tb(r)}function cet(r,i,e){var n,o,s=!1,l;return typeof i>"u"?(o=g8(r),n=Oxe,s=!0):(typeof i.x<"u"||Array.isArray(i))&&(e=i,o=g8(r),n=Oxe,s=!0),n||(n=g8(r)),o||(o=g8(i)),e?pte(n,o,e):(l={forward:function(h,p){return pte(n,o,h,p)},inverse:function(h,p){return pte(o,n,h,p)}},s&&(l.oProj=o),l)}var Pxe=cet;var Rxe=6,Lxe="AJSAJS",Nxe="AFAFAF",s2=65,Yp=73,Nf=79,JR=86,eF=90,Bxe={forward:fte,inverse:det,toPoint:gte};function fte(r,i){return i=i||5,pet(uet({lat:r[1],lon:r[0]}),i)}function det(r){var i=_te(Vxe(r.toUpperCase()));return i.lat&&i.lon?[i.lon,i.lat,i.lon,i.lat]:[i.left,i.bottom,i.right,i.top]}function gte(r){var i=_te(Vxe(r.toUpperCase()));return i.lat&&i.lon?[i.lon,i.lat]:[(i.left+i.right)/2,(i.top+i.bottom)/2]}function mte(r){return r*(Math.PI/180)}function Fxe(r){return 180*(r/Math.PI)}function uet(r){var i=r.lat,e=r.lon,n=6378137,o=.00669438,s=.9996,l,h,p,m,f,g,y,_=mte(i),w=mte(e),A,k;k=Math.floor((e+180)/6)+1,e===180&&(k=60),i>=56&&i<64&&e>=3&&e<12&&(k=32),i>=72&&i<84&&(e>=0&&e<9?k=31:e>=9&&e<21?k=33:e>=21&&e<33?k=35:e>=33&&e<42&&(k=37)),l=(k-1)*6-180+3,A=mte(l),h=o/(1-o),p=n/Math.sqrt(1-o*Math.sin(_)*Math.sin(_)),m=Math.tan(_)*Math.tan(_),f=h*Math.cos(_)*Math.cos(_),g=Math.cos(_)*(w-A),y=n*((1-o/4-3*o*o/64-5*o*o*o/256)*_-(3*o/8+3*o*o/32+45*o*o*o/1024)*Math.sin(2*_)+(15*o*o/256+45*o*o*o/1024)*Math.sin(4*_)-35*o*o*o/3072*Math.sin(6*_));var R=s*p*(g+(1-m+f)*g*g*g/6+(5-18*m+m*m+72*f-58*h)*g*g*g*g*g/120)+5e5,$=s*(y+p*Math.tan(_)*(g*g/2+(5-m+9*f+4*f*f)*g*g*g*g/24+(61-58*m+m*m+600*f-330*h)*g*g*g*g*g*g/720));return i<0&&($+=1e7),{northing:Math.round($),easting:Math.round(R),zoneNumber:k,zoneLetter:het(i)}}function _te(r){var i=r.northing,e=r.easting,n=r.zoneLetter,o=r.zoneNumber;if(o<0||o>60)return null;var s=.9996,l=6378137,h=.00669438,p,m=(1-Math.sqrt(1-h))/(1+Math.sqrt(1-h)),f,g,y,_,w,A,k,R,$,H=e-5e5,oe=i;n<"N"&&(oe-=1e7),k=(o-1)*6-180+3,p=h/(1-h),A=oe/s,R=A/(l*(1-h/4-3*h*h/64-5*h*h*h/256)),$=R+(3*m/2-27*m*m*m/32)*Math.sin(2*R)+(21*m*m/16-55*m*m*m*m/32)*Math.sin(4*R)+151*m*m*m/96*Math.sin(6*R),f=l/Math.sqrt(1-h*Math.sin($)*Math.sin($)),g=Math.tan($)*Math.tan($),y=p*Math.cos($)*Math.cos($),_=l*(1-h)/Math.pow(1-h*Math.sin($)*Math.sin($),1.5),w=H/(f*s);var se=$-f*Math.tan($)/_*(w*w/2-(5+3*g+10*y-4*y*y-9*p)*w*w*w*w/24+(61+90*g+298*y+45*g*g-252*p-3*y*y)*w*w*w*w*w*w/720);se=Fxe(se);var ge=(w-(1+2*g+y)*w*w*w/6+(5-2*y+28*g-3*y*y+8*p+24*g*g)*w*w*w*w*w/120)/Math.cos($);ge=k+Fxe(ge);var ue;if(r.accuracy){var pe=_te({northing:r.northing+r.accuracy,easting:r.easting+r.accuracy,zoneLetter:r.zoneLetter,zoneNumber:r.zoneNumber});ue={top:pe.lat,right:pe.lon,bottom:se,left:ge}}else ue={lat:se,lon:ge};return ue}function het(r){var i="Z";return 84>=r&&r>=72?i="X":72>r&&r>=64?i="W":64>r&&r>=56?i="V":56>r&&r>=48?i="U":48>r&&r>=40?i="T":40>r&&r>=32?i="S":32>r&&r>=24?i="R":24>r&&r>=16?i="Q":16>r&&r>=8?i="P":8>r&&r>=0?i="N":0>r&&r>=-8?i="M":-8>r&&r>=-16?i="L":-16>r&&r>=-24?i="K":-24>r&&r>=-32?i="J":-32>r&&r>=-40?i="H":-40>r&&r>=-48?i="G":-48>r&&r>=-56?i="F":-56>r&&r>=-64?i="E":-64>r&&r>=-72?i="D":-72>r&&r>=-80&&(i="C"),i}function pet(r,i){var e="00000"+r.easting,n="00000"+r.northing;return r.zoneNumber+r.zoneLetter+met(r.easting,r.northing,r.zoneNumber)+e.substr(e.length-5,i)+n.substr(n.length-5,i)}function met(r,i,e){var n=jxe(e),o=Math.floor(r/1e5),s=Math.floor(i/1e5)%20;return fet(o,s,n)}function jxe(r){var i=r%Rxe;return i===0&&(i=Rxe),i}function fet(r,i,e){var n=e-1,o=Lxe.charCodeAt(n),s=Nxe.charCodeAt(n),l=o+r-1,h=s+i,p=!1;l>eF&&(l=l-eF+s2-1,p=!0),(l===Yp||o<Yp&&l>Yp||(l>Yp||o<Yp)&&p)&&l++,(l===Nf||o<Nf&&l>Nf||(l>Nf||o<Nf)&&p)&&(l++,l===Yp&&l++),l>eF&&(l=l-eF+s2-1),h>JR?(h=h-JR+s2-1,p=!0):p=!1,(h===Yp||s<Yp&&h>Yp||(h>Yp||s<Yp)&&p)&&h++,(h===Nf||s<Nf&&h>Nf||(h>Nf||s<Nf)&&p)&&(h++,h===Yp&&h++),h>JR&&(h=h-JR+s2-1);var m=String.fromCharCode(l)+String.fromCharCode(h);return m}function Vxe(r){if(r&&r.length===0)throw"MGRSPoint coverting from nothing";for(var i=r.length,e=null,n="",o,s=0;!/[A-Z]/.test(o=r.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+r;n+=o,s++}var l=parseInt(n,10);if(s===0||s+3>i)throw"MGRSPoint bad conversion from: "+r;var h=r.charAt(s++);if(h<="A"||h==="B"||h==="Y"||h>="Z"||h==="I"||h==="O")throw"MGRSPoint zone letter "+h+" not handled: "+r;e=r.substring(s,s+=2);for(var p=jxe(l),m=get(e.charAt(0),p),f=_et(e.charAt(1),p);f<yet(h);)f+=2e6;var g=i-s;if(g%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+r;var y=g/2,_=0,w=0,A,k,R,$,H;return y>0&&(A=1e5/Math.pow(10,y),k=r.substring(s,s+y),_=parseFloat(k)*A,R=r.substring(s+y),w=parseFloat(R)*A),$=_+m,H=w+f,{easting:$,northing:H,zoneLetter:h,zoneNumber:l,accuracy:A}}function get(r,i){for(var e=Lxe.charCodeAt(i-1),n=1e5,o=!1;e!==r.charCodeAt(0);){if(e++,e===Yp&&e++,e===Nf&&e++,e>eF){if(o)throw"Bad character: "+r;e=s2,o=!0}n+=1e5}return n}function _et(r,i){if(r>"V")throw"MGRSPoint given invalid Northing "+r;for(var e=Nxe.charCodeAt(i-1),n=0,o=!1;e!==r.charCodeAt(0);){if(e++,e===Yp&&e++,e===Nf&&e++,e>JR){if(o)throw"Bad character: "+r;e=s2,o=!0}n+=1e5}return n}function yet(r){var i;switch(r){case"C":i=11e5;break;case"D":i=2e6;break;case"E":i=28e5;break;case"F":i=37e5;break;case"G":i=46e5;break;case"H":i=55e5;break;case"J":i=64e5;break;case"K":i=73e5;break;case"L":i=82e5;break;case"M":i=91e5;break;case"N":i=0;break;case"P":i=8e5;break;case"Q":i=17e5;break;case"R":i=26e5;break;case"S":i=35e5;break;case"T":i=44e5;break;case"U":i=53e5;break;case"V":i=62e5;break;case"W":i=7e6;break;case"X":i=79e5;break;default:i=-1}if(i>=0)return i;throw"Invalid zone letter: "+r}function a2(r,i,e){if(!(this instanceof a2))return new a2(r,i,e);if(Array.isArray(r))this.x=r[0],this.y=r[1],this.z=r[2]||0;else if(typeof r=="object")this.x=r.x,this.y=r.y,this.z=r.z||0;else if(typeof r=="string"&&typeof i>"u"){var n=r.split(",");this.x=parseFloat(n[0]),this.y=parseFloat(n[1]),this.z=parseFloat(n[2])||0}else this.x=r,this.y=i,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}a2.fromMGRS=function(r){return new a2(gte(r))};a2.prototype.toMGRS=function(r){return fte([this.x,this.y],r)};var $xe=a2;var vet=1,bet=.25,Uxe=.046875,zxe=.01953125,Gxe=.01068115234375,wet=.75,Cet=.46875,xet=.013020833333333334,Iet=.007120768229166667,Tet=.3645833333333333,Aet=.005696614583333333,Eet=.3076171875;function l2(r){var i=[];i[0]=vet-r*(bet+r*(Uxe+r*(zxe+r*Gxe))),i[1]=r*(wet-r*(Uxe+r*(zxe+r*Gxe)));var e=r*r;return i[2]=e*(Cet-r*(xet+r*Iet)),e*=r,i[3]=e*(Tet-r*Aet),i[4]=e*r*Eet,i}function J_(r,i,e,n){return e*=i,i*=i,n[0]*r-e*(n[1]+i*(n[2]+i*(n[3]+i*n[4])))}var Met=20;function c2(r,i,e){for(var n=1/(1-i),o=r,s=Met;s;--s){var l=Math.sin(o),h=1-i*l*l;if(h=(J_(o,l,Math.cos(o),e)-r)*(h*Math.sqrt(h))*n,o-=h,Math.abs(h)<Oi)return o}return o}function Det(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=l2(this.es),this.ml0=J_(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function ket(r){var i=r.x,e=r.y,n=Di(i-this.long0),o,s,l,h=Math.sin(e),p=Math.cos(e);if(this.es){var f=p*n,g=Math.pow(f,2),y=this.ep2*Math.pow(p,2),_=Math.pow(y,2),w=Math.abs(p)>Oi?Math.tan(e):0,A=Math.pow(w,2),k=Math.pow(A,2);o=1-this.es*Math.pow(h,2),f=f/Math.sqrt(o);var R=J_(e,h,p,this.en);s=this.a*(this.k0*f*(1+g/6*(1-A+y+g/20*(5-18*A+k+14*y-58*A*y+g/42*(61+179*k-k*A-479*A)))))+this.x0,l=this.a*(this.k0*(R-this.ml0+h*n*f/2*(1+g/12*(5-A+9*y+4*_+g/30*(61+k-58*A+270*y-330*A*y+g/56*(1385+543*k-k*A-3111*A))))))+this.y0}else{var m=p*Math.sin(n);if(Math.abs(Math.abs(m)-1)<Oi)return 93;if(s=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,l=p*Math.cos(n)/Math.sqrt(1-Math.pow(m,2)),m=Math.abs(l),m>=1){if(m-1>Oi)return 93;l=0}else l=Math.acos(l);e<0&&(l=-l),l=this.a*this.k0*(l-this.lat0)+this.y0}return r.x=s,r.y=l,r}function Oet(r){var i,e,n,o,s=(r.x-this.x0)*(1/this.a),l=(r.y-this.y0)*(1/this.a);if(this.es)if(i=this.ml0+l/this.k0,e=c2(i,this.es,this.en),Math.abs(e)<ui){var g=Math.sin(e),y=Math.cos(e),_=Math.abs(y)>Oi?Math.tan(e):0,w=this.ep2*Math.pow(y,2),A=Math.pow(w,2),k=Math.pow(_,2),R=Math.pow(k,2);i=1-this.es*Math.pow(g,2);var $=s*Math.sqrt(i)/this.k0,H=Math.pow($,2);i=i*_,n=e-i*H/(1-this.es)*.5*(1-H/12*(5+3*k-9*w*k+w-4*A-H/30*(61+90*k-252*w*k+45*R+46*w-H/56*(1385+3633*k+4095*R+1574*R*k)))),o=Di(this.long0+$*(1-H/6*(1+2*k+w-H/20*(5+28*k+24*R+8*w*k+6*w-H/42*(61+662*k+1320*R+720*R*k))))/y)}else n=ui*X_(l),o=0;else{var h=Math.exp(s/this.k0),p=.5*(h-1/h),m=this.lat0+l/this.k0,f=Math.cos(m);i=Math.sqrt((1-Math.pow(f,2))/(1+Math.pow(p,2))),n=Math.asin(i),l<0&&(n=-n),p===0&&f===0?o=0:o=Di(Math.atan2(p,f)+this.long0)}return r.x=o,r.y=n,r}var Pet=["Fast_Transverse_Mercator","Fast Transverse Mercator"],d2={init:Det,forward:ket,inverse:Oet,names:Pet};function _8(r){var i=Math.exp(r);return i=(i-1/i)/2,i}function ed(r,i){r=Math.abs(r),i=Math.abs(i);var e=Math.max(r,i),n=Math.min(r,i)/(e||1);return e*Math.sqrt(1+Math.pow(n,2))}function Hxe(r){var i=1+r,e=i-1;return e===0?r:r*Math.log(i)/e}function Wxe(r){var i=Math.abs(r);return i=Hxe(i*(1+i/(ed(1,i)+1))),r<0?-i:i}function y8(r,i){for(var e=2*Math.cos(2*i),n=r.length-1,o=r[n],s=0,l;--n>=0;)l=-s+e*o+r[n],s=o,o=l;return i+l*Math.sin(2*i)}function qxe(r,i){for(var e=2*Math.cos(i),n=r.length-1,o=r[n],s=0,l;--n>=0;)l=-s+e*o+r[n],s=o,o=l;return Math.sin(i)*l}function Yxe(r){var i=Math.exp(r);return i=(i+1/i)/2,i}function yte(r,i,e){for(var n=Math.sin(i),o=Math.cos(i),s=_8(e),l=Yxe(e),h=2*o*l,p=-2*n*s,m=r.length-1,f=r[m],g=0,y=0,_=0,w,A;--m>=0;)w=y,A=g,y=f,g=_,f=-w+h*y-p*g+r[m],_=-A+p*y+h*g;return h=n*l,p=o*s,[h*f-p*_,h*_+p*f]}function Ret(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(d2.init.apply(this),this.forward=d2.forward,this.inverse=d2.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var r=this.es/(1+Math.sqrt(1-this.es)),i=r/(2-r),e=i;this.cgb[0]=i*(2+i*(-2/3+i*(-2+i*(116/45+i*(26/45+i*(-2854/675)))))),this.cbg[0]=i*(-2+i*(2/3+i*(4/3+i*(-82/45+i*(32/45+i*(4642/4725)))))),e=e*i,this.cgb[1]=e*(7/3+i*(-8/5+i*(-227/45+i*(2704/315+i*(2323/945))))),this.cbg[1]=e*(5/3+i*(-16/15+i*(-13/9+i*(904/315+i*(-1522/945))))),e=e*i,this.cgb[2]=e*(56/15+i*(-136/35+i*(-1262/105+i*(73814/2835)))),this.cbg[2]=e*(-26/15+i*(34/21+i*(8/5+i*(-12686/2835)))),e=e*i,this.cgb[3]=e*(4279/630+i*(-332/35+i*(-399572/14175))),this.cbg[3]=e*(1237/630+i*(-12/5+i*(-24832/14175))),e=e*i,this.cgb[4]=e*(4174/315+i*(-144838/6237)),this.cbg[4]=e*(-734/315+i*(109598/31185)),e=e*i,this.cgb[5]=e*(601676/22275),this.cbg[5]=e*(444337/155925),e=Math.pow(i,2),this.Qn=this.k0/(1+i)*(1+e*(1/4+e*(1/64+e/256))),this.utg[0]=i*(-.5+i*(2/3+i*(-37/96+i*(1/360+i*(81/512+i*(-96199/604800)))))),this.gtu[0]=i*(.5+i*(-2/3+i*(5/16+i*(41/180+i*(-127/288+i*(7891/37800)))))),this.utg[1]=e*(-1/48+i*(-1/15+i*(437/1440+i*(-46/105+i*(1118711/3870720))))),this.gtu[1]=e*(13/48+i*(-3/5+i*(557/1440+i*(281/630+i*(-1983433/1935360))))),e=e*i,this.utg[2]=e*(-17/480+i*(37/840+i*(209/4480+i*(-5569/90720)))),this.gtu[2]=e*(61/240+i*(-103/140+i*(15061/26880+i*(167603/181440)))),e=e*i,this.utg[3]=e*(-4397/161280+i*(11/504+i*(830251/7257600))),this.gtu[3]=e*(49561/161280+i*(-179/168+i*(6601661/7257600))),e=e*i,this.utg[4]=e*(-4583/161280+i*(108847/3991680)),this.gtu[4]=e*(34729/80640+i*(-3418889/1995840)),e=e*i,this.utg[5]=e*(-20648693/638668800),this.gtu[5]=e*(212378941/319334400);var n=y8(this.cbg,this.lat0);this.Zb=-this.Qn*(n+qxe(this.gtu,2*n))}function Fet(r){var i=Di(r.x-this.long0),e=r.y;e=y8(this.cbg,e);var n=Math.sin(e),o=Math.cos(e),s=Math.sin(i),l=Math.cos(i);e=Math.atan2(n,l*o),i=Math.atan2(s*o,ed(n,o*l)),i=Wxe(Math.tan(i));var h=yte(this.gtu,2*e,2*i);e=e+h[0],i=i+h[1];var p,m;return Math.abs(i)<=2.623395162778?(p=this.a*(this.Qn*i)+this.x0,m=this.a*(this.Qn*e+this.Zb)+this.y0):(p=1/0,m=1/0),r.x=p,r.y=m,r}function Let(r){var i=(r.x-this.x0)*(1/this.a),e=(r.y-this.y0)*(1/this.a);e=(e-this.Zb)/this.Qn,i=i/this.Qn;var n,o;if(Math.abs(i)<=2.623395162778){var s=yte(this.utg,2*e,2*i);e=e+s[0],i=i+s[1],i=Math.atan(_8(i));var l=Math.sin(e),h=Math.cos(e),p=Math.sin(i),m=Math.cos(i);e=Math.atan2(l*m,ed(p,m*h)),i=Math.atan2(p,m*h),n=Di(i+this.long0),o=y8(this.cgb,e)}else n=1/0,o=1/0;return r.x=n,r.y=o,r}var Net=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"],u2={init:Ret,forward:Fet,inverse:Let,names:Net};function Kxe(r,i){if(r===void 0){if(r=Math.floor((Di(i)+Math.PI)*30/Math.PI)+1,r<0)return 0;if(r>60)return 60}return r}var Bet="etmerc";function jet(){var r=Kxe(this.zone,this.long0);if(r===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(r)-183)*wc,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,u2.init.apply(this),this.forward=u2.forward,this.inverse=u2.inverse}var Vet=["Universal Transverse Mercator System","utm"],Zxe={init:jet,names:Vet,dependsOn:Bet};function v8(r,i){return Math.pow((1-r)/(1+r),i)}var $et=20;function Uet(){var r=Math.sin(this.lat0),i=Math.cos(this.lat0);i*=i,this.rc=Math.sqrt(1-this.es)/(1-this.es*r*r),this.C=Math.sqrt(1+this.es*i*i/(1-this.es)),this.phic0=Math.asin(r/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ns)/(Math.pow(Math.tan(.5*this.lat0+ns),this.C)*v8(this.e*r,this.ratexp))}function zet(r){var i=r.x,e=r.y;return r.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*e+ns),this.C)*v8(this.e*Math.sin(e),this.ratexp))-ui,r.x=this.C*i,r}function Get(r){for(var i=1e-14,e=r.x/this.C,n=r.y,o=Math.pow(Math.tan(.5*n+ns)/this.K,1/this.C),s=$et;s>0&&(n=2*Math.atan(o*v8(this.e*Math.sin(r.y),-.5*this.e))-ui,!(Math.abs(n-r.y)<i));--s)r.y=n;return s?(r.x=e,r.y=n,r):null}var Het=["gauss"],b8={init:Uet,forward:zet,inverse:Get,names:Het};function Wet(){b8.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function qet(r){var i,e,n,o;return r.x=Di(r.x-this.long0),b8.forward.apply(this,[r]),i=Math.sin(r.y),e=Math.cos(r.y),n=Math.cos(r.x),o=this.k0*this.R2/(1+this.sinc0*i+this.cosc0*e*n),r.x=o*e*Math.sin(r.x),r.y=o*(this.cosc0*i-this.sinc0*e*n),r.x=this.a*r.x+this.x0,r.y=this.a*r.y+this.y0,r}function Yet(r){var i,e,n,o,s;if(r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,r.x/=this.k0,r.y/=this.k0,s=ed(r.x,r.y)){var l=2*Math.atan2(s,this.R2);i=Math.sin(l),e=Math.cos(l),o=Math.asin(e*this.sinc0+r.y*i*this.cosc0/s),n=Math.atan2(r.x*i,s*this.cosc0*e-r.y*this.sinc0*i)}else o=this.phic0,n=0;return r.x=n,r.y=o,b8.inverse.apply(this,[r]),r.x=Di(r.x+this.long0),r}var Ket=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],Qxe={init:Wet,forward:qet,inverse:Yet,names:Ket};function vte(r,i,e){return i*=e,Math.tan(.5*(ui+r))*Math.pow((1-i)/(1+i),.5*e)}function Zet(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Oi&&(this.k0=.5*(1+X_(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Oi&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Oi&&Math.abs(Math.cos(this.lat_ts))>Oi&&(this.k0=.5*this.cons*xh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/op(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=xh(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(vte(this.lat0,this.sinlat0,this.e))-ui,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Qet(r){var i=r.x,e=r.y,n=Math.sin(e),o=Math.cos(e),s,l,h,p,m,f,g=Di(i-this.long0);return Math.abs(Math.abs(i-this.long0)-Math.PI)<=Oi&&Math.abs(e+this.lat0)<=Oi?(r.x=NaN,r.y=NaN,r):this.sphere?(s=2*this.k0/(1+this.sinlat0*n+this.coslat0*o*Math.cos(g)),r.x=this.a*s*o*Math.sin(g)+this.x0,r.y=this.a*s*(this.coslat0*n-this.sinlat0*o*Math.cos(g))+this.y0,r):(l=2*Math.atan(vte(e,n,this.e))-ui,p=Math.cos(l),h=Math.sin(l),Math.abs(this.coslat0)<=Oi?(m=op(this.e,e*this.con,this.con*n),f=2*this.a*this.k0*m/this.cons,r.x=this.x0+f*Math.sin(i-this.long0),r.y=this.y0-this.con*f*Math.cos(i-this.long0),r):(Math.abs(this.sinlat0)<Oi?(s=2*this.a*this.k0/(1+p*Math.cos(g)),r.y=s*h):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*h+this.cosX0*p*Math.cos(g))),r.y=s*(this.cosX0*h-this.sinX0*p*Math.cos(g))+this.y0),r.x=s*p*Math.sin(g)+this.x0,r))}function Xet(r){r.x-=this.x0,r.y-=this.y0;var i,e,n,o,s,l=Math.sqrt(r.x*r.x+r.y*r.y);if(this.sphere){var h=2*Math.atan(l/(2*this.a*this.k0));return i=this.long0,e=this.lat0,l<=Oi?(r.x=i,r.y=e,r):(e=Math.asin(Math.cos(h)*this.sinlat0+r.y*Math.sin(h)*this.coslat0/l),Math.abs(this.coslat0)<Oi?this.lat0>0?i=Di(this.long0+Math.atan2(r.x,-1*r.y)):i=Di(this.long0+Math.atan2(r.x,r.y)):i=Di(this.long0+Math.atan2(r.x*Math.sin(h),l*this.coslat0*Math.cos(h)-r.y*this.sinlat0*Math.sin(h))),r.x=i,r.y=e,r)}else if(Math.abs(this.coslat0)<=Oi){if(l<=Oi)return e=this.lat0,i=this.long0,r.x=i,r.y=e,r;r.x*=this.con,r.y*=this.con,n=l*this.cons/(2*this.a*this.k0),e=this.con*eb(this.e,n),i=this.con*Di(this.con*this.long0+Math.atan2(r.x,-1*r.y))}else o=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),i=this.long0,l<=Oi?s=this.X0:(s=Math.asin(Math.cos(o)*this.sinX0+r.y*Math.sin(o)*this.cosX0/l),i=Di(this.long0+Math.atan2(r.x*Math.sin(o),l*this.cosX0*Math.cos(o)-r.y*this.sinX0*Math.sin(o)))),e=-1*eb(this.e,Math.tan(.5*(ui+s)));return r.x=i,r.y=e,r}var Jet=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"],Xxe={init:Zet,forward:Qet,inverse:Xet,names:Jet,ssfn_:vte};function ett(){var r=this.lat0;this.lambda0=this.long0;var i=Math.sin(r),e=this.a,n=this.rf,o=1/n,s=2*o-Math.pow(o,2),l=this.e=Math.sqrt(s);this.R=this.k0*e*Math.sqrt(1-s)/(1-s*Math.pow(i,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(r),4)),this.b0=Math.asin(i/this.alpha);var h=Math.log(Math.tan(Math.PI/4+this.b0/2)),p=Math.log(Math.tan(Math.PI/4+r/2)),m=Math.log((1+l*i)/(1-l*i));this.K=h-this.alpha*p+this.alpha*l/2*m}function ttt(r){var i=Math.log(Math.tan(Math.PI/4-r.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(r.y))/(1-this.e*Math.sin(r.y))),n=-this.alpha*(i+e)+this.K,o=2*(Math.atan(Math.exp(n))-Math.PI/4),s=this.alpha*(r.x-this.lambda0),l=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(s))),h=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(s));return r.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,r.x=this.R*l+this.x0,r}function itt(r){for(var i=r.x-this.x0,e=r.y-this.y0,n=i/this.R,o=2*(Math.atan(Math.exp(e/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(n)),l=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(o))),h=this.lambda0+l/this.alpha,p=0,m=s,f=-1e3,g=0;Math.abs(m-f)>1e-7;){if(++g>20)return;p=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(m))/2)),f=m,m=2*Math.atan(Math.exp(p))-Math.PI/2}return r.x=h,r.y=m,r}var ntt=["somerc"],Jxe={init:ett,forward:ttt,inverse:itt,names:ntt};var h2=1e-7;function rtt(r){var i=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],e=typeof r.projName=="object"?Object.keys(r.projName)[0]:r.projName;return"no_uoff"in r||"no_off"in r||i.indexOf(e)!==-1||i.indexOf(ate(e))!==-1}function ott(){var r,i,e,n,o,s,l,h,p,m,f=0,g,y=0,_=0,w=0,A=0,k=0,R=0;this.no_off=rtt(this),this.no_rot="no_rot"in this;var $=!1;"alpha"in this&&($=!0);var H=!1;if("rectified_grid_angle"in this&&(H=!0),$&&(R=this.alpha),H&&(f=this.rectified_grid_angle),$||H)y=this.longc;else if(_=this.long1,A=this.lat1,w=this.long2,k=this.lat2,Math.abs(A-k)<=h2||(r=Math.abs(A))<=h2||Math.abs(r-ui)<=h2||Math.abs(Math.abs(this.lat0)-ui)<=h2||Math.abs(Math.abs(k)-ui)<=h2)throw new Error;var oe=1-this.es;i=Math.sqrt(oe),Math.abs(this.lat0)>Oi?(h=Math.sin(this.lat0),e=Math.cos(this.lat0),r=1-this.es*h*h,this.B=e*e,this.B=Math.sqrt(1+this.es*this.B*this.B/oe),this.A=this.B*this.k0*i/r,n=this.B*i/(e*Math.sqrt(r)),o=n*n-1,o<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=n,this.E*=Math.pow(op(this.e,this.lat0,h),this.B)):(this.B=1/i,this.A=this.k0,this.E=n=o=1),$||H?($?(g=Math.asin(Math.sin(R)/n),H||(f=R)):(g=f,R=Math.asin(n*Math.sin(g))),this.lam0=y-Math.asin(.5*(o-1/o)*Math.tan(g))/this.B):(s=Math.pow(op(this.e,A,Math.sin(A)),this.B),l=Math.pow(op(this.e,k,Math.sin(k)),this.B),o=this.E/s,p=(l-s)/(l+s),m=this.E*this.E,m=(m-l*s)/(m+l*s),r=_-w,r<-Math.PI?w-=H1:r>Math.PI&&(w+=H1),this.lam0=Di(.5*(_+w)-Math.atan(m*Math.tan(.5*this.B*(_-w))/p)/this.B),g=Math.atan(2*Math.sin(this.B*Di(_-this.lam0))/(o-1/o)),f=R=Math.asin(n*Math.sin(g))),this.singam=Math.sin(g),this.cosgam=Math.cos(g),this.sinrot=Math.sin(f),this.cosrot=Math.cos(f),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(R))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*g,this.v_pole_n=this.ArB*Math.log(Math.tan(ns-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(ns+o))}function stt(r){var i={},e,n,o,s,l,h,p,m;if(r.x=r.x-this.lam0,Math.abs(Math.abs(r.y)-ui)>Oi){if(l=this.E/Math.pow(op(this.e,r.y,Math.sin(r.y)),this.B),h=1/l,e=.5*(l-h),n=.5*(l+h),s=Math.sin(this.B*r.x),o=(e*this.singam-s*this.cosgam)/n,Math.abs(Math.abs(o)-1)<Oi)throw new Error;m=.5*this.ArB*Math.log((1-o)/(1+o)),h=Math.cos(this.B*r.x),Math.abs(h)<h2?p=this.A*r.x:p=this.ArB*Math.atan2(e*this.cosgam+s*this.singam,h)}else m=r.y>0?this.v_pole_n:this.v_pole_s,p=this.ArB*r.y;return this.no_rot?(i.x=p,i.y=m):(p-=this.u_0,i.x=m*this.cosrot+p*this.sinrot,i.y=p*this.cosrot-m*this.sinrot),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function att(r){var i,e,n,o,s,l,h,p={};if(r.x=(r.x-this.x0)*(1/this.a),r.y=(r.y-this.y0)*(1/this.a),this.no_rot?(e=r.y,i=r.x):(e=r.x*this.cosrot-r.y*this.sinrot,i=r.y*this.cosrot+r.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*e),o=.5*(n-1/n),s=.5*(n+1/n),l=Math.sin(this.BrA*i),h=(l*this.cosgam+o*this.singam)/s,Math.abs(Math.abs(h)-1)<Oi)p.x=0,p.y=h<0?-ui:ui;else{if(p.y=this.E/Math.sqrt((1+h)/(1-h)),p.y=eb(this.e,Math.pow(p.y,1/this.B)),p.y===1/0)throw new Error;p.x=-this.rB*Math.atan2(o*this.cosgam-l*this.singam,Math.cos(this.BrA*i))}return p.x+=this.lam0,p}var ltt=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],eSe={init:ott,forward:stt,inverse:att,names:ltt};function ctt(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Oi)){var r=this.b/this.a;this.e=Math.sqrt(1-r*r);var i=Math.sin(this.lat1),e=Math.cos(this.lat1),n=xh(this.e,i,e),o=op(this.e,this.lat1,i),s=Math.sin(this.lat2),l=Math.cos(this.lat2),h=xh(this.e,s,l),p=op(this.e,this.lat2,s),m=Math.abs(Math.abs(this.lat0)-ui)<Oi?0:op(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Oi?this.ns=Math.log(n/h)/Math.log(o/p):this.ns=i,isNaN(this.ns)&&(this.ns=i),this.f0=n/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(m,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function dtt(r){var i=r.x,e=r.y;Math.abs(2*Math.abs(e)-Math.PI)<=Oi&&(e=X_(e)*(ui-2*Oi));var n=Math.abs(Math.abs(e)-ui),o,s;if(n>Oi)o=op(this.e,e,Math.sin(e)),s=this.a*this.f0*Math.pow(o,this.ns);else{if(n=e*this.ns,n<=0)return null;s=0}var l=this.ns*Di(i-this.long0);return r.x=this.k0*(s*Math.sin(l))+this.x0,r.y=this.k0*(this.rh-s*Math.cos(l))+this.y0,r}function utt(r){var i,e,n,o,s,l=(r.x-this.x0)/this.k0,h=this.rh-(r.y-this.y0)/this.k0;this.ns>0?(i=Math.sqrt(l*l+h*h),e=1):(i=-Math.sqrt(l*l+h*h),e=-1);var p=0;if(i!==0&&(p=Math.atan2(e*l,e*h)),i!==0||this.ns>0){if(e=1/this.ns,n=Math.pow(i/(this.a*this.f0),e),o=eb(this.e,n),o===-9999)return null}else o=-ui;return s=Di(p/this.ns+this.long0),r.x=s,r.y=o,r}var htt=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"],tSe={init:ctt,forward:dtt,inverse:utt,names:htt};function ptt(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function mtt(r){var i,e,n,o,s,l,h,p=r.x,m=r.y,f=Di(p-this.long0);return i=Math.pow((1+this.e*Math.sin(m))/(1-this.e*Math.sin(m)),this.alfa*this.e/2),e=2*(Math.atan(this.k*Math.pow(Math.tan(m/2+this.s45),this.alfa)/i)-this.s45),n=-f*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(e)+Math.sin(this.ad)*Math.cos(e)*Math.cos(n)),s=Math.asin(Math.cos(e)*Math.sin(n)/Math.cos(o)),l=this.n*s,h=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),r.y=h*Math.cos(l)/1,r.x=h*Math.sin(l)/1,this.czech||(r.y*=-1,r.x*=-1),r}function ftt(r){var i,e,n,o,s,l,h,p,m=r.x;r.x=r.y,r.y=m,this.czech||(r.y*=-1,r.x*=-1),l=Math.sqrt(r.x*r.x+r.y*r.y),s=Math.atan2(r.y,r.x),o=s/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/l,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),i=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),e=Math.asin(Math.cos(n)*Math.sin(o)/Math.cos(i)),r.x=this.long0-e/this.alfa,h=i,p=0;var f=0;do r.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(i/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.e/2))-this.s45),Math.abs(h-r.y)<1e-10&&(p=1),h=r.y,f+=1;while(p===0&&f<15);return f>=15?null:r}var gtt=["Krovak","krovak"],iSe={init:ptt,forward:mtt,inverse:ftt,names:gtt};function Ed(r,i,e,n,o){return r*o-i*Math.sin(2*o)+e*Math.sin(4*o)-n*Math.sin(6*o)}function ib(r){return 1-.25*r*(1+r/16*(3+1.25*r))}function nb(r){return .375*r*(1+.25*r*(1+.46875*r))}function rb(r){return .05859375*r*r*(1+.75*r)}function ob(r){return r*r*r*(35/3072)}function tF(r,i,e){var n=i*e;return r/Math.sqrt(1-n*n)}function Kp(r){return Math.abs(r)<ui?r:r-X_(r)*Math.PI}function nI(r,i,e,n,o){var s,l;s=r/i;for(var h=0;h<15;h++)if(l=(r-(i*s-e*Math.sin(2*s)+n*Math.sin(4*s)-o*Math.sin(6*s)))/(i-2*e*Math.cos(2*s)+4*n*Math.cos(4*s)-6*o*Math.cos(6*s)),s+=l,Math.abs(l)<=1e-10)return s;return NaN}function _tt(){this.sphere||(this.e0=ib(this.es),this.e1=nb(this.es),this.e2=rb(this.es),this.e3=ob(this.es),this.ml0=this.a*Ed(this.e0,this.e1,this.e2,this.e3,this.lat0))}function ytt(r){var i,e,n=r.x,o=r.y;if(n=Di(n-this.long0),this.sphere)i=this.a*Math.asin(Math.cos(o)*Math.sin(n)),e=this.a*(Math.atan2(Math.tan(o),Math.cos(n))-this.lat0);else{var s=Math.sin(o),l=Math.cos(o),h=tF(this.a,this.e,s),p=Math.tan(o)*Math.tan(o),m=n*Math.cos(o),f=m*m,g=this.es*l*l/(1-this.es),y=this.a*Ed(this.e0,this.e1,this.e2,this.e3,o);i=h*m*(1-f*p*(1/6-(8-p+8*g)*f/120)),e=y-this.ml0+h*s/l*f*(.5+(5-p+6*g)*f/24)}return r.x=i+this.x0,r.y=e+this.y0,r}function vtt(r){r.x-=this.x0,r.y-=this.y0;var i=r.x/this.a,e=r.y/this.a,n,o;if(this.sphere){var s=e+this.lat0;n=Math.asin(Math.sin(s)*Math.cos(i)),o=Math.atan2(Math.tan(i),Math.cos(s))}else{var l=this.ml0/this.a+e,h=nI(l,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(h)-ui)<=Oi)return r.x=this.long0,r.y=ui,e<0&&(r.y*=-1),r;var p=tF(this.a,this.e,Math.sin(h)),m=p*p*p/this.a/this.a*(1-this.es),f=Math.pow(Math.tan(h),2),g=i*this.a/p,y=g*g;n=h-p*Math.tan(h)/m*g*g*(.5-(1+3*f)*g*g/24),o=g*(1-y*(f/3+(1+3*f)*f*y/15))/Math.cos(h)}return r.x=Di(o+this.long0),r.y=Kp(n),r}var btt=["Cassini","Cassini_Soldner","cass"],nSe={init:_tt,forward:ytt,inverse:vtt,names:btt};function a0(r,i){var e;return r>1e-7?(e=r*i,(1-r*r)*(i/(1-e*e)-.5/r*Math.log((1-e)/(1+e)))):2*i}var bte=1,wte=2,Cte=3,w8=4;function wtt(){var r=Math.abs(this.lat0);if(Math.abs(r-ui)<Oi?this.mode=this.lat0<0?bte:wte:Math.abs(r)<Oi?this.mode=Cte:this.mode=w8,this.es>0){var i;switch(this.qp=a0(this.e,1),this.mmf=.5/(1-this.es),this.apa=Dtt(this.es),this.mode){case wte:this.dd=1;break;case bte:this.dd=1;break;case Cte:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case w8:this.rq=Math.sqrt(.5*this.qp),i=Math.sin(this.lat0),this.sinb1=a0(this.e,i)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*i*i)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===w8&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Ctt(r){var i,e,n,o,s,l,h,p,m,f,g=r.x,y=r.y;if(g=Di(g-this.long0),this.sphere){if(s=Math.sin(y),f=Math.cos(y),n=Math.cos(g),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e=this.mode===this.EQUIT?1+f*n:1+this.sinph0*s+this.cosph0*f*n,e<=Oi)return null;e=Math.sqrt(2/e),i=e*f*Math.sin(g),e*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*f*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(y+this.lat0)<Oi)return null;e=ns-y*.5,e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)),i=e*Math.sin(g),e*=n}}else{switch(h=0,p=0,m=0,n=Math.cos(g),o=Math.sin(g),s=Math.sin(y),l=a0(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(h=l/this.qp,p=Math.sqrt(1-h*h)),this.mode){case this.OBLIQ:m=1+this.sinb1*h+this.cosb1*p*n;break;case this.EQUIT:m=1+p*n;break;case this.N_POLE:m=ui+y,l=this.qp-l;break;case this.S_POLE:m=y-ui,l=this.qp+l;break}if(Math.abs(m)<Oi)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:m=Math.sqrt(2/m),this.mode===this.OBLIQ?e=this.ymf*m*(this.cosb1*h-this.sinb1*p*n):e=(m=Math.sqrt(2/(1+p*n)))*h*this.ymf,i=this.xmf*m*p*o;break;case this.N_POLE:case this.S_POLE:l>=0?(i=(m=Math.sqrt(l))*o,e=n*(this.mode===this.S_POLE?m:-m)):i=e=0;break}}return r.x=this.a*i+this.x0,r.y=this.a*e+this.y0,r}function xtt(r){r.x-=this.x0,r.y-=this.y0;var i=r.x/this.a,e=r.y/this.a,n,o,s,l,h,p,m;if(this.sphere){var f=0,g,y=0;if(g=Math.sqrt(i*i+e*e),o=g*.5,o>1)return null;switch(o=2*Math.asin(o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(y=Math.sin(o),f=Math.cos(o)),this.mode){case this.EQUIT:o=Math.abs(g)<=Oi?0:Math.asin(e*y/g),i*=y,e=f*g;break;case this.OBLIQ:o=Math.abs(g)<=Oi?this.lat0:Math.asin(f*this.sinph0+e*y*this.cosph0/g),i*=y*this.cosph0,e=(f-Math.sin(o)*this.sinph0)*g;break;case this.N_POLE:e=-e,o=ui-o;break;case this.S_POLE:o-=ui;break}n=e===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(i,e)}else{if(m=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i/=this.dd,e*=this.dd,p=Math.sqrt(i*i+e*e),p<Oi)return r.x=this.long0,r.y=this.lat0,r;l=2*Math.asin(.5*p/this.rq),s=Math.cos(l),i*=l=Math.sin(l),this.mode===this.OBLIQ?(m=s*this.sinb1+e*l*this.cosb1/p,h=this.qp*m,e=p*this.cosb1*s-e*this.sinb1*l):(m=e*l/p,h=this.qp*m,e=p*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(e=-e),h=i*i+e*e,!h)return r.x=this.long0,r.y=this.lat0,r;m=1-h/this.qp,this.mode===this.S_POLE&&(m=-m)}n=Math.atan2(i,e),o=ktt(Math.asin(m),this.apa)}return r.x=Di(this.long0+n),r.y=o,r}var Stt=.3333333333333333,Itt=.17222222222222222,Ttt=.10257936507936508,Att=.06388888888888888,Ett=.0664021164021164,Mtt=.016415012942191543;function Dtt(r){var i,e=[];return e[0]=r*Stt,i=r*r,e[0]+=i*Itt,e[1]=i*Att,i*=r,e[0]+=i*Ttt,e[1]+=i*Ett,e[2]=i*Mtt,e}function ktt(r,i){var e=r+r;return r+i[0]*Math.sin(e)+i[1]*Math.sin(e+e)+i[2]*Math.sin(e+e+e)}var Ott=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],rSe={init:wtt,forward:Ctt,inverse:xtt,names:Ott,S_POLE:bte,N_POLE:wte,EQUIT:Cte,OBLIQ:w8};function Zp(r){return Math.abs(r)>1&&(r=r>1?1:-1),Math.asin(r)}function Ptt(){Math.abs(this.lat1+this.lat2)<Oi||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=xh(this.e3,this.sin_po,this.cos_po),this.qs1=a0(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=xh(this.e3,this.sin_po,this.cos_po),this.qs2=a0(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=a0(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Oi?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Rtt(r){var i=r.x,e=r.y;this.sin_phi=Math.sin(e),this.cos_phi=Math.cos(e);var n=a0(this.e3,this.sin_phi),o=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,s=this.ns0*Di(i-this.long0),l=o*Math.sin(s)+this.x0,h=this.rh-o*Math.cos(s)+this.y0;return r.x=l,r.y=h,r}function Ftt(r){var i,e,n,o,s,l;return r.x-=this.x0,r.y=this.rh-r.y+this.y0,this.ns0>=0?(i=Math.sqrt(r.x*r.x+r.y*r.y),n=1):(i=-Math.sqrt(r.x*r.x+r.y*r.y),n=-1),o=0,i!==0&&(o=Math.atan2(n*r.x,n*r.y)),n=i*this.ns0/this.a,this.sphere?l=Math.asin((this.c-n*n)/(2*this.ns0)):(e=(this.c-n*n)/this.ns0,l=this.phi1z(this.e3,e)),s=Di(o/this.ns0+this.long0),r.x=s,r.y=l,r}function Ltt(r,i){var e,n,o,s,l,h=Zp(.5*i);if(r<Oi)return h;for(var p=r*r,m=1;m<=25;m++)if(e=Math.sin(h),n=Math.cos(h),o=r*e,s=1-o*o,l=.5*s*s/n*(i/(1-p)-e/s+.5/r*Math.log((1-o)/(1+o))),h=h+l,Math.abs(l)<=1e-7)return h;return null}var Ntt=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"],oSe={init:Ptt,forward:Rtt,inverse:Ftt,names:Ntt,phi1z:Ltt};function Btt(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function jtt(r){var i,e,n,o,s,l,h,p,m=r.x,f=r.y;return n=Di(m-this.long0),i=Math.sin(f),e=Math.cos(f),o=Math.cos(n),l=this.sin_p14*i+this.cos_p14*e*o,s=1,l>0||Math.abs(l)<=Oi?(h=this.x0+this.a*s*e*Math.sin(n)/l,p=this.y0+this.a*s*(this.cos_p14*i-this.sin_p14*e*o)/l):(h=this.x0+this.infinity_dist*e*Math.sin(n),p=this.y0+this.infinity_dist*(this.cos_p14*i-this.sin_p14*e*o)),r.x=h,r.y=p,r}function Vtt(r){var i,e,n,o,s,l;return r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,r.x/=this.k0,r.y/=this.k0,(i=Math.sqrt(r.x*r.x+r.y*r.y))?(o=Math.atan2(i,this.rc),e=Math.sin(o),n=Math.cos(o),l=Zp(n*this.sin_p14+r.y*e*this.cos_p14/i),s=Math.atan2(r.x*e,i*this.cos_p14*n-r.y*this.sin_p14*e),s=Di(this.long0+s)):(l=this.phic0,s=0),r.x=s,r.y=l,r}var $tt=["gnom"],sSe={init:Btt,forward:jtt,inverse:Vtt,names:$tt};function aSe(r,i){var e=1-(1-r*r)/(2*r)*Math.log((1-r)/(1+r));if(Math.abs(Math.abs(i)-e)<1e-6)return i<0?-1*ui:ui;for(var n=Math.asin(.5*i),o,s,l,h,p=0;p<30;p++)if(s=Math.sin(n),l=Math.cos(n),h=r*s,o=Math.pow(1-h*h,2)/(2*l)*(i/(1-r*r)-s/(1-h*h)+.5/r*Math.log((1-h)/(1+h))),n+=o,Math.abs(o)<=1e-10)return n;return NaN}function Utt(){this.sphere||(this.k0=xh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function ztt(r){var i=r.x,e=r.y,n,o,s=Di(i-this.long0);if(this.sphere)n=this.x0+this.a*s*Math.cos(this.lat_ts),o=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var l=a0(this.e,Math.sin(e));n=this.x0+this.a*this.k0*s,o=this.y0+this.a*l*.5/this.k0}return r.x=n,r.y=o,r}function Gtt(r){r.x-=this.x0,r.y-=this.y0;var i,e;return this.sphere?(i=Di(this.long0+r.x/this.a/Math.cos(this.lat_ts)),e=Math.asin(r.y/this.a*Math.cos(this.lat_ts))):(e=aSe(this.e,2*r.y*this.k0/this.a),i=Di(this.long0+r.x/(this.a*this.k0))),r.x=i,r.y=e,r}var Htt=["cea"],lSe={init:Utt,forward:ztt,inverse:Gtt,names:Htt};function Wtt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function qtt(r){var i=r.x,e=r.y,n=Di(i-this.long0),o=Kp(e-this.lat0);return r.x=this.x0+this.a*n*this.rc,r.y=this.y0+this.a*o,r}function Ytt(r){var i=r.x,e=r.y;return r.x=Di(this.long0+(i-this.x0)/(this.a*this.rc)),r.y=Kp(this.lat0+(e-this.y0)/this.a),r}var Ktt=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"],cSe={init:Wtt,forward:qtt,inverse:Ytt,names:Ktt};var dSe=20;function Ztt(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ib(this.es),this.e1=nb(this.es),this.e2=rb(this.es),this.e3=ob(this.es),this.ml0=this.a*Ed(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Qtt(r){var i=r.x,e=r.y,n,o,s,l=Di(i-this.long0);if(s=l*Math.sin(e),this.sphere)Math.abs(e)<=Oi?(n=this.a*l,o=-1*this.a*this.lat0):(n=this.a*Math.sin(s)/Math.tan(e),o=this.a*(Kp(e-this.lat0)+(1-Math.cos(s))/Math.tan(e)));else if(Math.abs(e)<=Oi)n=this.a*l,o=-1*this.ml0;else{var h=tF(this.a,this.e,Math.sin(e))/Math.tan(e);n=h*Math.sin(s),o=this.a*Ed(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+h*(1-Math.cos(s))}return r.x=n+this.x0,r.y=o+this.y0,r}function Xtt(r){var i,e,n,o,s,l,h,p,m;if(n=r.x-this.x0,o=r.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=Oi)i=Di(n/this.a+this.long0),e=0;else{l=this.lat0+o/this.a,h=n*n/this.a/this.a+l*l,p=l;var f;for(s=dSe;s;--s)if(f=Math.tan(p),m=-1*(l*(p*f+1)-p-.5*(p*p+h)*f)/((p-l)/f-1),p+=m,Math.abs(m)<=Oi){e=p;break}i=Di(this.long0+Math.asin(n*Math.tan(p)/this.a)/Math.sin(e))}else if(Math.abs(o+this.ml0)<=Oi)e=0,i=Di(this.long0+n/this.a);else{l=(this.ml0+o)/this.a,h=n*n/this.a/this.a+l*l,p=l;var g,y,_,w,A;for(s=dSe;s;--s)if(A=this.e*Math.sin(p),g=Math.sqrt(1-A*A)*Math.tan(p),y=this.a*Ed(this.e0,this.e1,this.e2,this.e3,p),_=this.e0-2*this.e1*Math.cos(2*p)+4*this.e2*Math.cos(4*p)-6*this.e3*Math.cos(6*p),w=y/this.a,m=(l*(g*w+1)-w-.5*g*(w*w+h))/(this.es*Math.sin(2*p)*(w*w+h-2*l*w)/(4*g)+(l-w)*(g*_-2/Math.sin(2*p))-_),p-=m,Math.abs(m)<=Oi){e=p;break}g=Math.sqrt(1-this.es*Math.pow(Math.sin(e),2))*Math.tan(e),i=Di(this.long0+Math.asin(n*g/this.a)/Math.sin(e))}return r.x=i,r.y=e,r}var Jtt=["Polyconic","American_Polyconic","poly"],uSe={init:Ztt,forward:Qtt,inverse:Xtt,names:Jtt};function eit(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function tit(r){var i,e=r.x,n=r.y,o=n-this.lat0,s=e-this.long0,l=o/JS*1e-5,h=s,p=1,m=0;for(i=1;i<=10;i++)p=p*l,m=m+this.A[i]*p;var f=m,g=h,y=1,_=0,w,A,k=0,R=0;for(i=1;i<=6;i++)w=y*f-_*g,A=_*f+y*g,y=w,_=A,k=k+this.B_re[i]*y-this.B_im[i]*_,R=R+this.B_im[i]*y+this.B_re[i]*_;return r.x=R*this.a+this.x0,r.y=k*this.a+this.y0,r}function iit(r){var i,e=r.x,n=r.y,o=e-this.x0,s=n-this.y0,l=s/this.a,h=o/this.a,p=1,m=0,f,g,y=0,_=0;for(i=1;i<=6;i++)f=p*l-m*h,g=m*l+p*h,p=f,m=g,y=y+this.C_re[i]*p-this.C_im[i]*m,_=_+this.C_im[i]*p+this.C_re[i]*m;for(var w=0;w<this.iterations;w++){var A=y,k=_,R,$,H=l,oe=h;for(i=2;i<=6;i++)R=A*y-k*_,$=k*y+A*_,A=R,k=$,H=H+(i-1)*(this.B_re[i]*A-this.B_im[i]*k),oe=oe+(i-1)*(this.B_im[i]*A+this.B_re[i]*k);A=1,k=0;var se=this.B_re[1],ge=this.B_im[1];for(i=2;i<=6;i++)R=A*y-k*_,$=k*y+A*_,A=R,k=$,se=se+i*(this.B_re[i]*A-this.B_im[i]*k),ge=ge+i*(this.B_im[i]*A+this.B_re[i]*k);var ue=se*se+ge*ge;y=(H*se+oe*ge)/ue,_=(oe*se-H*ge)/ue}var pe=y,Ce=_,_e=1,de=0;for(i=1;i<=9;i++)_e=_e*pe,de=de+this.D[i]*_e;var te=this.lat0+de*JS*1e5,Se=this.long0+Ce;return r.x=Se,r.y=te,r}var nit=["New_Zealand_Map_Grid","nzmg"],hSe={init:eit,forward:tit,inverse:iit,names:nit};function rit(){}function oit(r){var i=r.x,e=r.y,n=Di(i-this.long0),o=this.x0+this.a*n,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+e/2.5))*1.25;return r.x=o,r.y=s,r}function sit(r){r.x-=this.x0,r.y-=this.y0;var i=Di(this.long0+r.x/this.a),e=2.5*(Math.atan(Math.exp(.8*r.y/this.a))-Math.PI/4);return r.x=i,r.y=e,r}var ait=["Miller_Cylindrical","mill"],pSe={init:rit,forward:oit,inverse:sit,names:ait};var lit=20;function cit(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=l2(this.es)}function dit(r){var i,e,n=r.x,o=r.y;if(n=Di(n-this.long0),this.sphere){if(!this.m)o=this.n!==1?Math.asin(this.n*Math.sin(o)):o;else for(var s=this.n*Math.sin(o),l=lit;l;--l){var h=(this.m*o+Math.sin(o)-s)/(this.m+Math.cos(o));if(o-=h,Math.abs(h)<Oi)break}i=this.a*this.C_x*n*(this.m+Math.cos(o)),e=this.a*this.C_y*o}else{var p=Math.sin(o),m=Math.cos(o);e=this.a*J_(o,p,m,this.en),i=this.a*n*m/Math.sqrt(1-this.es*p*p)}return r.x=i,r.y=e,r}function uit(r){var i,e,n,o;return r.x-=this.x0,n=r.x/this.a,r.y-=this.y0,i=r.y/this.a,this.sphere?(i/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(i))),this.m?i=Zp((this.m*i+Math.sin(i))/this.n):this.n!==1&&(i=Zp(Math.sin(i)/this.n)),n=Di(n+this.long0),i=Kp(i)):(i=c2(r.y/this.a,this.es,this.en),o=Math.abs(i),o<ui?(o=Math.sin(i),e=this.long0+r.x*Math.sqrt(1-this.es*o*o)/(this.a*Math.cos(i)),n=Di(e)):o-Oi<ui&&(n=this.long0)),r.x=n,r.y=i,r}var hit=["Sinusoidal","sinu"],mSe={init:cit,forward:dit,inverse:uit,names:hit};function pit(){}function mit(r){for(var i=r.x,e=r.y,n=Di(i-this.long0),o=e,s=Math.PI*Math.sin(e);;){var l=-(o+Math.sin(o)-s)/(1+Math.cos(o));if(o+=l,Math.abs(l)<Oi)break}o/=2,Math.PI/2-Math.abs(e)<Oi&&(n=0);var h=.900316316158*this.a*n*Math.cos(o)+this.x0,p=1.4142135623731*this.a*Math.sin(o)+this.y0;return r.x=h,r.y=p,r}function fit(r){var i,e;r.x-=this.x0,r.y-=this.y0,e=r.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),i=Math.asin(e);var n=Di(this.long0+r.x/(.900316316158*this.a*Math.cos(i)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),e=(2*i+Math.sin(2*i))/Math.PI,Math.abs(e)>1&&(e=1);var o=Math.asin(e);return r.x=n,r.y=o,r}var git=["Mollweide","moll"],fSe={init:pit,forward:mit,inverse:fit,names:git};function _it(){Math.abs(this.lat1+this.lat2)<Oi||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ib(this.es),this.e1=nb(this.es),this.e2=rb(this.es),this.e3=ob(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=xh(this.e,this.sin_phi,this.cos_phi),this.ml1=Ed(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Oi?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=xh(this.e,this.sin_phi,this.cos_phi),this.ml2=Ed(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ed(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function yit(r){var i=r.x,e=r.y,n;if(this.sphere)n=this.a*(this.g-e);else{var o=Ed(this.e0,this.e1,this.e2,this.e3,e);n=this.a*(this.g-o)}var s=this.ns*Di(i-this.long0),l=this.x0+n*Math.sin(s),h=this.y0+this.rh-n*Math.cos(s);return r.x=l,r.y=h,r}function vit(r){r.x-=this.x0,r.y=this.rh-r.y+this.y0;var i,e,n,o;this.ns>=0?(e=Math.sqrt(r.x*r.x+r.y*r.y),i=1):(e=-Math.sqrt(r.x*r.x+r.y*r.y),i=-1);var s=0;if(e!==0&&(s=Math.atan2(i*r.x,i*r.y)),this.sphere)return o=Di(this.long0+s/this.ns),n=Kp(this.g-e/this.a),r.x=o,r.y=n,r;var l=this.g-e/this.a;return n=nI(l,this.e0,this.e1,this.e2,this.e3),o=Di(this.long0+s/this.ns),r.x=o,r.y=n,r}var bit=["Equidistant_Conic","eqdc"],gSe={init:_it,forward:yit,inverse:vit,names:bit};function wit(){this.R=this.a}function Cit(r){var i=r.x,e=r.y,n=Di(i-this.long0),o,s;Math.abs(e)<=Oi&&(o=this.x0+this.R*n,s=this.y0);var l=Zp(2*Math.abs(e/Math.PI));(Math.abs(n)<=Oi||Math.abs(Math.abs(e)-ui)<=Oi)&&(o=this.x0,e>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*l):s=this.y0+Math.PI*this.R*-Math.tan(.5*l));var h=.5*Math.abs(Math.PI/n-n/Math.PI),p=h*h,m=Math.sin(l),f=Math.cos(l),g=f/(m+f-1),y=g*g,_=g*(2/m-1),w=_*_,A=Math.PI*this.R*(h*(g-w)+Math.sqrt(p*(g-w)*(g-w)-(w+p)*(y-w)))/(w+p);n<0&&(A=-A),o=this.x0+A;var k=p+g;return A=Math.PI*this.R*(_*k-h*Math.sqrt((w+p)*(p+1)-k*k))/(w+p),e>=0?s=this.y0+A:s=this.y0-A,r.x=o,r.y=s,r}function xit(r){var i,e,n,o,s,l,h,p,m,f,g,y,_;return r.x-=this.x0,r.y-=this.y0,g=Math.PI*this.R,n=r.x/g,o=r.y/g,s=n*n+o*o,l=-Math.abs(o)*(1+s),h=l-2*o*o+n*n,p=-2*l+1+2*o*o+s*s,_=o*o/p+(2*h*h*h/p/p/p-9*l*h/p/p)/27,m=(l-h*h/3/p)/p,f=2*Math.sqrt(-m/3),g=3*_/m/f,Math.abs(g)>1&&(g>=0?g=1:g=-1),y=Math.acos(g)/3,r.y>=0?e=(-f*Math.cos(y+Math.PI/3)-h/3/p)*Math.PI:e=-(-f*Math.cos(y+Math.PI/3)-h/3/p)*Math.PI,Math.abs(n)<Oi?i=this.long0:i=Di(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(n*n-o*o)+s*s))/2/n),r.x=i,r.y=e,r}var Sit=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"],_Se={init:wit,forward:Cit,inverse:xit,names:Sit};function ySe(r,i,e,n,o,s){let l=n-i,h=Math.atan((1-s)*Math.tan(r)),p=Math.atan((1-s)*Math.tan(e)),m=Math.sin(h),f=Math.cos(h),g=Math.sin(p),y=Math.cos(p),_=l,w,A=100,k,R,$,H,oe,se,ge,ue,pe,Ce,_e,de,te,Se;do{if(k=Math.sin(_),R=Math.cos(_),$=Math.sqrt(y*k*(y*k)+(f*g-m*y*R)*(f*g-m*y*R)),$===0)return{azi1:0,s12:0};H=m*g+f*y*R,oe=Math.atan2($,H),se=f*y*k/$,ge=1-se*se,ue=ge!==0?H-2*m*g/ge:0,pe=s/16*ge*(4+s*(4-3*ge)),w=_,_=l+(1-pe)*s*se*(oe+pe*$*(ue+pe*H*(-1+2*ue*ue)))}while(Math.abs(_-w)>1e-12&&--A>0);return A===0?{azi1:NaN,s12:NaN}:(Ce=ge*(o*o-o*(1-s)*(o*(1-s)))/(o*(1-s)*(o*(1-s))),_e=1+Ce/16384*(4096+Ce*(-768+Ce*(320-175*Ce))),de=Ce/1024*(256+Ce*(-128+Ce*(74-47*Ce))),te=de*$*(ue+de/4*(H*(-1+2*ue*ue)-de/6*ue*(-3+4*$*$)*(-3+4*ue*ue))),Se=o*(1-s)*_e*(oe-te),{azi1:Math.atan2(y*k,f*g-m*y*R),s12:Se})}function vSe(r,i,e,n,o,s){let l=Math.atan((1-s)*Math.tan(r)),h=Math.sin(l),p=Math.cos(l),m=Math.sin(e),f=Math.cos(e),g=Math.atan2(h,p*f),y=p*m,_=1-y*y,w=_*(o*o-o*(1-s)*(o*(1-s)))/(o*(1-s)*(o*(1-s))),A=1+w/16384*(4096+w*(-768+w*(320-175*w))),k=w/1024*(256+w*(-128+w*(74-47*w))),R=n/(o*(1-s)*A),$,H=100,oe,se,ge,ue;do oe=Math.cos(2*g+R),se=Math.sin(R),ge=Math.cos(R),ue=k*se*(oe+k/4*(ge*(-1+2*oe*oe)-k/6*oe*(-3+4*se*se)*(-3+4*oe*oe))),$=R,R=n/(o*(1-s)*A)+ue;while(Math.abs(R-$)>1e-12&&--H>0);if(H===0)return{lat2:NaN,lon2:NaN};let pe=h*se-p*ge*f,Ce=Math.atan2(h*ge+p*se*f,(1-s)*Math.sqrt(y*y+pe*pe)),_e=Math.atan2(se*m,p*ge-h*se*f),de=s/16*_*(4+s*(4-3*_)),te=_e-(1-de)*s*y*(R+de*se*(oe+de*ge*(-1+2*oe*oe))),Se=i+te;return{lat2:Ce,lon2:Se}}function Iit(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function Tit(r){var i=r.x,e=r.y,n=Math.sin(r.y),o=Math.cos(r.y),s=Di(i-this.long0),l,h,p,m,f,g,y,_,w,A,k;return this.sphere?Math.abs(this.sin_p12-1)<=Oi?(r.x=this.x0+this.a*(ui-e)*Math.sin(s),r.y=this.y0-this.a*(ui-e)*Math.cos(s),r):Math.abs(this.sin_p12+1)<=Oi?(r.x=this.x0+this.a*(ui+e)*Math.sin(s),r.y=this.y0+this.a*(ui+e)*Math.cos(s),r):(w=this.sin_p12*n+this.cos_p12*o*Math.cos(s),y=Math.acos(w),_=y?y/Math.sin(y):1,r.x=this.x0+this.a*_*o*Math.sin(s),r.y=this.y0+this.a*_*(this.cos_p12*n-this.sin_p12*o*Math.cos(s)),r):(l=ib(this.es),h=nb(this.es),p=rb(this.es),m=ob(this.es),Math.abs(this.sin_p12-1)<=Oi?(f=this.a*Ed(l,h,p,m,ui),g=this.a*Ed(l,h,p,m,e),r.x=this.x0+(f-g)*Math.sin(s),r.y=this.y0-(f-g)*Math.cos(s),r):Math.abs(this.sin_p12+1)<=Oi?(f=this.a*Ed(l,h,p,m,ui),g=this.a*Ed(l,h,p,m,e),r.x=this.x0+(f+g)*Math.sin(s),r.y=this.y0+(f+g)*Math.cos(s),r):Math.abs(i)<Oi&&Math.abs(e-this.lat0)<Oi?(r.x=r.y=0,r):(A=ySe(this.lat0,this.long0,e,i,this.a,this.f),k=A.azi1,r.x=A.s12*Math.sin(k),r.y=A.s12*Math.cos(k),r))}function Ait(r){r.x-=this.x0,r.y-=this.y0;var i,e,n,o,s,l,h,p,m,f,g,y,_,w,A,k;return this.sphere?(i=Math.sqrt(r.x*r.x+r.y*r.y),i>2*ui*this.a?void 0:(e=i/this.a,n=Math.sin(e),o=Math.cos(e),s=this.long0,Math.abs(i)<=Oi?l=this.lat0:(l=Zp(o*this.sin_p12+r.y*n*this.cos_p12/i),h=Math.abs(this.lat0)-ui,Math.abs(h)<=Oi?this.lat0>=0?s=Di(this.long0+Math.atan2(r.x,-r.y)):s=Di(this.long0-Math.atan2(-r.x,r.y)):s=Di(this.long0+Math.atan2(r.x*n,i*this.cos_p12*o-r.y*this.sin_p12*n))),r.x=s,r.y=l,r)):(p=ib(this.es),m=nb(this.es),f=rb(this.es),g=ob(this.es),Math.abs(this.sin_p12-1)<=Oi?(y=this.a*Ed(p,m,f,g,ui),i=Math.sqrt(r.x*r.x+r.y*r.y),_=y-i,l=nI(_/this.a,p,m,f,g),s=Di(this.long0+Math.atan2(r.x,-1*r.y)),r.x=s,r.y=l,r):Math.abs(this.sin_p12+1)<=Oi?(y=this.a*Ed(p,m,f,g,ui),i=Math.sqrt(r.x*r.x+r.y*r.y),_=i-y,l=nI(_/this.a,p,m,f,g),s=Di(this.long0+Math.atan2(r.x,r.y)),r.x=s,r.y=l,r):(w=Math.atan2(r.x,r.y),A=Math.sqrt(r.x*r.x+r.y*r.y),k=vSe(this.lat0,this.long0,w,A,this.a,this.f),r.x=k.lon2,r.y=k.lat2,r))}var Eit=["Azimuthal_Equidistant","aeqd"],bSe={init:Iit,forward:Tit,inverse:Ait,names:Eit};function Mit(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Dit(r){var i,e,n,o,s,l,h,p,m=r.x,f=r.y;return n=Di(m-this.long0),i=Math.sin(f),e=Math.cos(f),o=Math.cos(n),l=this.sin_p14*i+this.cos_p14*e*o,s=1,(l>0||Math.abs(l)<=Oi)&&(h=this.a*s*e*Math.sin(n),p=this.y0+this.a*s*(this.cos_p14*i-this.sin_p14*e*o)),r.x=h,r.y=p,r}function kit(r){var i,e,n,o,s,l,h;return r.x-=this.x0,r.y-=this.y0,i=Math.sqrt(r.x*r.x+r.y*r.y),e=Zp(i/this.a),n=Math.sin(e),o=Math.cos(e),l=this.long0,Math.abs(i)<=Oi?(h=this.lat0,r.x=l,r.y=h,r):(h=Zp(o*this.sin_p14+r.y*n*this.cos_p14/i),s=Math.abs(this.lat0)-ui,Math.abs(s)<=Oi?(this.lat0>=0?l=Di(this.long0+Math.atan2(r.x,-r.y)):l=Di(this.long0-Math.atan2(-r.x,r.y)),r.x=l,r.y=h,r):(l=Di(this.long0+Math.atan2(r.x*n,i*this.cos_p14*o-r.y*this.sin_p14*n)),r.x=l,r.y=h,r))}var Oit=["ortho"],wSe={init:Mit,forward:Dit,inverse:kit,names:Oit};var Ql={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},js={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Pit(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=ui-ns/2?this.face=Ql.TOP:this.lat0<=-(ui-ns/2)?this.face=Ql.BOTTOM:Math.abs(this.long0)<=ns?this.face=Ql.FRONT:Math.abs(this.long0)<=ui+ns?this.face=this.long0>0?Ql.RIGHT:Ql.LEFT:this.face=Ql.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Rit(r){var i={x:0,y:0},e,n,o,s,l,h,p={value:0};if(r.x-=this.long0,this.es!==0?e=Math.atan(this.one_minus_f_squared*Math.tan(r.y)):e=r.y,n=r.x,this.face===Ql.TOP)s=ui-e,n>=ns&&n<=ui+ns?(p.value=js.AREA_0,o=n-ui):n>ui+ns||n<=-(ui+ns)?(p.value=js.AREA_1,o=n>0?n-Zl:n+Zl):n>-(ui+ns)&&n<=-ns?(p.value=js.AREA_2,o=n+ui):(p.value=js.AREA_3,o=n);else if(this.face===Ql.BOTTOM)s=ui+e,n>=ns&&n<=ui+ns?(p.value=js.AREA_0,o=-n+ui):n<ns&&n>=-ns?(p.value=js.AREA_1,o=-n):n<-ns&&n>=-(ui+ns)?(p.value=js.AREA_2,o=-n-ui):(p.value=js.AREA_3,o=n>0?-n+Zl:-n-Zl);else{var m,f,g,y,_,w,A;this.face===Ql.RIGHT?n=p2(n,+ui):this.face===Ql.BACK?n=p2(n,+Zl):this.face===Ql.LEFT&&(n=p2(n,-ui)),y=Math.sin(e),_=Math.cos(e),w=Math.sin(n),A=Math.cos(n),m=_*A,f=_*w,g=y,this.face===Ql.FRONT?(s=Math.acos(m),o=C8(s,g,f,p)):this.face===Ql.RIGHT?(s=Math.acos(f),o=C8(s,g,-m,p)):this.face===Ql.BACK?(s=Math.acos(-m),o=C8(s,g,-f,p)):this.face===Ql.LEFT?(s=Math.acos(-f),o=C8(s,g,m,p)):(s=o=0,p.value=js.AREA_0)}return h=Math.atan(12/Zl*(o+Math.acos(Math.sin(o)*Math.cos(ns))-ui)),l=Math.sqrt((1-Math.cos(s))/(Math.cos(h)*Math.cos(h))/(1-Math.cos(Math.atan(1/Math.cos(o))))),p.value===js.AREA_1?h+=ui:p.value===js.AREA_2?h+=Zl:p.value===js.AREA_3&&(h+=1.5*Zl),i.x=l*Math.cos(h),i.y=l*Math.sin(h),i.x=i.x*this.a+this.x0,i.y=i.y*this.a+this.y0,r.x=i.x,r.y=i.y,r}function Fit(r){var i={lam:0,phi:0},e,n,o,s,l,h,p,m,f,g={value:0};if(r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,n=Math.atan(Math.sqrt(r.x*r.x+r.y*r.y)),e=Math.atan2(r.y,r.x),r.x>=0&&r.x>=Math.abs(r.y)?g.value=js.AREA_0:r.y>=0&&r.y>=Math.abs(r.x)?(g.value=js.AREA_1,e-=ui):r.x<0&&-r.x>=Math.abs(r.y)?(g.value=js.AREA_2,e=e<0?e+Zl:e-Zl):(g.value=js.AREA_3,e+=ui),f=Zl/12*Math.tan(e),l=Math.sin(f)/(Math.cos(f)-1/Math.sqrt(2)),h=Math.atan(l),o=Math.cos(e),s=Math.tan(n),p=1-o*o*s*s*(1-Math.cos(Math.atan(1/Math.cos(h)))),p<-1?p=-1:p>1&&(p=1),this.face===Ql.TOP)m=Math.acos(p),i.phi=ui-m,g.value===js.AREA_0?i.lam=h+ui:g.value===js.AREA_1?i.lam=h<0?h+Zl:h-Zl:g.value===js.AREA_2?i.lam=h-ui:i.lam=h;else if(this.face===Ql.BOTTOM)m=Math.acos(p),i.phi=m-ui,g.value===js.AREA_0?i.lam=-h+ui:g.value===js.AREA_1?i.lam=-h:g.value===js.AREA_2?i.lam=-h-ui:i.lam=h<0?-h-Zl:-h+Zl;else{var y,_,w;y=p,f=y*y,f>=1?w=0:w=Math.sqrt(1-f)*Math.sin(h),f+=w*w,f>=1?_=0:_=Math.sqrt(1-f),g.value===js.AREA_1?(f=_,_=-w,w=f):g.value===js.AREA_2?(_=-_,w=-w):g.value===js.AREA_3&&(f=_,_=w,w=-f),this.face===Ql.RIGHT?(f=y,y=-_,_=f):this.face===Ql.BACK?(y=-y,_=-_):this.face===Ql.LEFT&&(f=y,y=_,_=-f),i.phi=Math.acos(-w)-ui,i.lam=Math.atan2(_,y),this.face===Ql.RIGHT?i.lam=p2(i.lam,-ui):this.face===Ql.BACK?i.lam=p2(i.lam,-Zl):this.face===Ql.LEFT&&(i.lam=p2(i.lam,+ui))}if(this.es!==0){var A,k,R;A=i.phi<0?1:0,k=Math.tan(i.phi),R=this.b/Math.sqrt(k*k+this.one_minus_f_squared),i.phi=Math.atan(Math.sqrt(this.a*this.a-R*R)/(this.one_minus_f*R)),A&&(i.phi=-i.phi)}return i.lam+=this.long0,r.x=i.lam,r.y=i.phi,r}function C8(r,i,e,n){var o;return r<Oi?(n.value=js.AREA_0,o=0):(o=Math.atan2(i,e),Math.abs(o)<=ns?n.value=js.AREA_0:o>ns&&o<=ui+ns?(n.value=js.AREA_1,o-=ui):o>ui+ns||o<=-(ui+ns)?(n.value=js.AREA_2,o=o>=0?o-Zl:o+Zl):(n.value=js.AREA_3,o+=ui)),o}function p2(r,i){var e=r+i;return e<-Zl?e+=H1:e>+Zl&&(e-=H1),e}var Lit=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],CSe={init:Pit,forward:Rit,inverse:Fit,names:Lit};var xte=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],iF=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],xSe=.8487,SSe=1.3523,ISe=Wp/5,Nit=1/ISe,m2=18,x8=function(r,i){return r[0]+i*(r[1]+i*(r[2]+i*r[3]))},Bit=function(r,i){return r[1]+i*(2*r[2]+i*3*r[3])};function jit(r,i,e,n){for(var o=i;n;--n){var s=r(o);if(o-=s,Math.abs(s)<e)break}return o}function Vit(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function $it(r){var i=Di(r.x-this.long0),e=Math.abs(r.y),n=Math.floor(e*ISe);n<0?n=0:n>=m2&&(n=m2-1),e=Wp*(e-Nit*n);var o={x:x8(xte[n],e)*i,y:x8(iF[n],e)};return r.y<0&&(o.y=-o.y),o.x=o.x*this.a*xSe+this.x0,o.y=o.y*this.a*SSe+this.y0,o}function Uit(r){var i={x:(r.x-this.x0)/(this.a*xSe),y:Math.abs(r.y-this.y0)/(this.a*SSe)};if(i.y>=1)i.x/=xte[m2][0],i.y=r.y<0?-ui:ui;else{var e=Math.floor(i.y*m2);for(e<0?e=0:e>=m2&&(e=m2-1);;)if(iF[e][0]>i.y)--e;else if(iF[e+1][0]<=i.y)++e;else break;var n=iF[e],o=5*(i.y-n[0])/(iF[e+1][0]-n[0]);o=jit(function(s){return(x8(n,s)-i.y)/Bit(n,s)},o,Oi,100),i.x/=x8(xte[e],o),i.y=(5*e+o)*wc,r.y<0&&(i.y=-i.y)}return i.x=Di(i.x+this.long0),i}var zit=["Robinson","robin"],TSe={init:Vit,forward:$it,inverse:Uit,names:zit};function Git(){this.name="geocent"}function Hit(r){var i=h8(r,this.es,this.a);return i}function Wit(r){var i=p8(r,this.es,this.a,this.b);return i}var qit=["Geocentric","geocentric","geocent","Geocent"],ASe={init:Git,forward:Hit,inverse:Wit,names:qit};var Sh={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},nF={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Yit(){if(Object.keys(nF).forEach(function(e){if(typeof this[e]>"u")this[e]=nF[e].def;else{if(nF[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);nF[e].num&&(this[e]=parseFloat(this[e]))}nF[e].degrees&&(this[e]=this[e]*wc)}.bind(this)),Math.abs(Math.abs(this.lat0)-ui)<Oi?this.mode=this.lat0<0?Sh.S_POLE:Sh.N_POLE:Math.abs(this.lat0)<Oi?this.mode=Sh.EQUIT:(this.mode=Sh.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var r=this.tilt,i=this.azi;this.cg=Math.cos(i),this.sg=Math.sin(i),this.cw=Math.cos(r),this.sw=Math.sin(r)}function Kit(r){r.x-=this.long0;var i=Math.sin(r.y),e=Math.cos(r.y),n=Math.cos(r.x),o,s;switch(this.mode){case Sh.OBLIQ:s=this.sinph0*i+this.cosph0*e*n;break;case Sh.EQUIT:s=e*n;break;case Sh.S_POLE:s=-i;break;case Sh.N_POLE:s=i;break}switch(s=this.pn1/(this.p-s),o=s*e*Math.sin(r.x),this.mode){case Sh.OBLIQ:s*=this.cosph0*i-this.sinph0*e*n;break;case Sh.EQUIT:s*=i;break;case Sh.N_POLE:s*=-(e*n);break;case Sh.S_POLE:s*=e*n;break}var l,h;return l=s*this.cg+o*this.sg,h=1/(l*this.sw*this.h1+this.cw),o=(o*this.cg-s*this.sg)*this.cw*h,s=l*h,r.x=o*this.a,r.y=s*this.a,r}function Zit(r){r.x/=this.a,r.y/=this.a;var i={x:r.x,y:r.y},e,n,o;o=1/(this.pn1-r.y*this.sw),e=this.pn1*r.x*o,n=this.pn1*r.y*this.cw*o,r.x=e*this.cg+n*this.sg,r.y=n*this.cg-e*this.sg;var s=ed(r.x,r.y);if(Math.abs(s)<Oi)i.x=0,i.y=r.y;else{var l,h;switch(h=1-s*s*this.pfact,h=(this.p-Math.sqrt(h))/(this.pn1/s+s/this.pn1),l=Math.sqrt(1-h*h),this.mode){case Sh.OBLIQ:i.y=Math.asin(l*this.sinph0+r.y*h*this.cosph0/s),r.y=(l-this.sinph0*Math.sin(i.y))*s,r.x*=h*this.cosph0;break;case Sh.EQUIT:i.y=Math.asin(r.y*h/s),r.y=l*s,r.x*=h;break;case Sh.N_POLE:i.y=Math.asin(l),r.y=-r.y;break;case Sh.S_POLE:i.y=-Math.asin(l);break}i.x=Math.atan2(r.x,r.y)}return r.x=i.x+this.long0,r.y=i.y,r}var Qit=["Tilted_Perspective","tpers"],ESe={init:Yit,forward:Kit,inverse:Zit,names:Qit};function Xit(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var r=1-this.es,i=1/r;this.radius_p=Math.sqrt(r),this.radius_p2=r,this.radius_p_inv2=i,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Jit(r){var i=r.x,e=r.y,n,o,s,l;if(i=i-this.long0,this.shape==="ellipse"){e=Math.atan(this.radius_p2*Math.tan(e));var h=this.radius_p/ed(this.radius_p*Math.cos(e),Math.sin(e));if(o=h*Math.cos(i)*Math.cos(e),s=h*Math.sin(i)*Math.cos(e),l=h*Math.sin(e),(this.radius_g-o)*o-s*s-l*l*this.radius_p_inv2<0)return r.x=Number.NaN,r.y=Number.NaN,r;n=this.radius_g-o,this.flip_axis?(r.x=this.radius_g_1*Math.atan(s/ed(l,n)),r.y=this.radius_g_1*Math.atan(l/n)):(r.x=this.radius_g_1*Math.atan(s/n),r.y=this.radius_g_1*Math.atan(l/ed(s,n)))}else this.shape==="sphere"&&(n=Math.cos(e),o=Math.cos(i)*n,s=Math.sin(i)*n,l=Math.sin(e),n=this.radius_g-o,this.flip_axis?(r.x=this.radius_g_1*Math.atan(s/ed(l,n)),r.y=this.radius_g_1*Math.atan(l/n)):(r.x=this.radius_g_1*Math.atan(s/n),r.y=this.radius_g_1*Math.atan(l/ed(s,n))));return r.x=r.x*this.a,r.y=r.y*this.a,r}function ent(r){var i=-1,e=0,n=0,o,s,l,h;if(r.x=r.x/this.a,r.y=r.y/this.a,this.shape==="ellipse"){this.flip_axis?(n=Math.tan(r.y/this.radius_g_1),e=Math.tan(r.x/this.radius_g_1)*ed(1,n)):(e=Math.tan(r.x/this.radius_g_1),n=Math.tan(r.y/this.radius_g_1)*ed(1,e));var p=n/this.radius_p;if(o=e*e+p*p+i*i,s=2*this.radius_g*i,l=s*s-4*o*this.C,l<0)return r.x=Number.NaN,r.y=Number.NaN,r;h=(-s-Math.sqrt(l))/(2*o),i=this.radius_g+h*i,e*=h,n*=h,r.x=Math.atan2(e,i),r.y=Math.atan(n*Math.cos(r.x)/i),r.y=Math.atan(this.radius_p_inv2*Math.tan(r.y))}else if(this.shape==="sphere"){if(this.flip_axis?(n=Math.tan(r.y/this.radius_g_1),e=Math.tan(r.x/this.radius_g_1)*Math.sqrt(1+n*n)):(e=Math.tan(r.x/this.radius_g_1),n=Math.tan(r.y/this.radius_g_1)*Math.sqrt(1+e*e)),o=e*e+n*n+i*i,s=2*this.radius_g*i,l=s*s-4*o*this.C,l<0)return r.x=Number.NaN,r.y=Number.NaN,r;h=(-s-Math.sqrt(l))/(2*o),i=this.radius_g+h*i,e*=h,n*=h,r.x=Math.atan2(e,i),r.y=Math.atan(n*Math.cos(r.x)/i)}return r.x=r.x+this.long0,r}var tnt=["Geostationary Satellite View","Geostationary_Satellite","geos"],MSe={init:Xit,forward:Jit,inverse:ent,names:tnt};var rF=1.340264,oF=-.081106,sF=893e-6,aF=.003796,S8=Math.sqrt(3)/2;function int(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function nnt(r){var i=Di(r.x-this.long0),e=r.y,n=Math.asin(S8*Math.sin(e)),o=n*n,s=o*o*o;return r.x=i*Math.cos(n)/(S8*(rF+3*oF*o+s*(7*sF+9*aF*o))),r.y=n*(rF+oF*o+s*(sF+aF*o)),r.x=this.a*r.x+this.x0,r.y=this.a*r.y+this.y0,r}function rnt(r){r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a;var i=1e-9,e=12,n=r.y,o,s,l,h,p,m;for(m=0;m<e&&(o=n*n,s=o*o*o,l=n*(rF+oF*o+s*(sF+aF*o))-r.y,h=rF+3*oF*o+s*(7*sF+9*aF*o),n-=p=l/h,!(Math.abs(p)<i));++m);return o=n*n,s=o*o*o,r.x=S8*r.x*(rF+3*oF*o+s*(7*sF+9*aF*o))/Math.cos(n),r.y=Math.asin(Math.sin(n)/S8),r.x=Di(r.x+this.long0),r}var ont=["eqearth","Equal Earth","Equal_Earth"],DSe={init:int,forward:nnt,inverse:rnt,names:ont};var lF=1e-10;function snt(){var r;if(this.phi1=this.lat1,Math.abs(this.phi1)<lF)throw new Error;this.es?(this.en=l2(this.es),this.m1=J_(this.phi1,this.am1=Math.sin(this.phi1),r=Math.cos(this.phi1),this.en),this.am1=r/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=lnt,this.forward=ant):(Math.abs(this.phi1)+lF>=ui?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=dnt,this.forward=cnt)}function ant(r){var i=Di(r.x-(this.long0||0)),e=r.y,n,o,s;return n=this.am1+this.m1-J_(e,o=Math.sin(e),s=Math.cos(e),this.en),o=s*i/(n*Math.sqrt(1-this.es*o*o)),r.x=n*Math.sin(o),r.y=this.am1-n*Math.cos(o),r.x=this.a*r.x+(this.x0||0),r.y=this.a*r.y+(this.y0||0),r}function lnt(r){r.x=(r.x-(this.x0||0))/this.a,r.y=(r.y-(this.y0||0))/this.a;var i,e,n,o;if(e=ed(r.x,r.y=this.am1-r.y),o=c2(this.am1+this.m1-e,this.es,this.en),(i=Math.abs(o))<ui)i=Math.sin(o),n=e*Math.atan2(r.x,r.y)*Math.sqrt(1-this.es*i*i)/Math.cos(o);else if(Math.abs(i-ui)<=lF)n=0;else throw new Error;return r.x=Di(n+(this.long0||0)),r.y=Kp(o),r}function cnt(r){var i=Di(r.x-(this.long0||0)),e=r.y,n,o;return o=this.cphi1+this.phi1-e,Math.abs(o)>lF?(r.x=o*Math.sin(n=i*Math.cos(e)/o),r.y=this.cphi1-o*Math.cos(n)):r.x=r.y=0,r.x=this.a*r.x+(this.x0||0),r.y=this.a*r.y+(this.y0||0),r}function dnt(r){r.x=(r.x-(this.x0||0))/this.a,r.y=(r.y-(this.y0||0))/this.a;var i,e,n=ed(r.x,r.y=this.cphi1-r.y);if(e=this.cphi1+this.phi1-n,Math.abs(e)>ui)throw new Error;return Math.abs(Math.abs(e)-ui)<=lF?i=0:i=n*Math.atan2(r.x,r.y)/Math.cos(e),r.x=Di(i+(this.long0||0)),r.y=Kp(e),r}var unt=["bonne","Bonne (Werner lat_1=90)"],kSe={init:snt,names:unt};function OSe(r){r.Proj.projections.add(d2),r.Proj.projections.add(u2),r.Proj.projections.add(Zxe),r.Proj.projections.add(Qxe),r.Proj.projections.add(Xxe),r.Proj.projections.add(Jxe),r.Proj.projections.add(eSe),r.Proj.projections.add(tSe),r.Proj.projections.add(iSe),r.Proj.projections.add(nSe),r.Proj.projections.add(rSe),r.Proj.projections.add(oSe),r.Proj.projections.add(sSe),r.Proj.projections.add(lSe),r.Proj.projections.add(cSe),r.Proj.projections.add(uSe),r.Proj.projections.add(hSe),r.Proj.projections.add(pSe),r.Proj.projections.add(mSe),r.Proj.projections.add(fSe),r.Proj.projections.add(gSe),r.Proj.projections.add(_Se),r.Proj.projections.add(bSe),r.Proj.projections.add(wSe),r.Proj.projections.add(CSe),r.Proj.projections.add(TSe),r.Proj.projections.add(ASe),r.Proj.projections.add(ESe),r.Proj.projections.add(MSe),r.Proj.projections.add(DSe),r.Proj.projections.add(kSe)}var PSe=Object.assign(Pxe,{defaultDatum:"WGS84",Proj:tb,WGS84:new tb("WGS84"),Point:$xe,toPoint:f8,defs:n2,nadgrid:ute,transform:iI,mgrs:Bxe,version:"__VERSION__"});OSe(PSe);var I8=PSe;var hnt=0,RSe="mat-badge-content",Ste=new Set,pnt=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=gt({type:r,selectors:[["ng-component"]],standalone:!0,features:[yt],decls:0,vars:0,template:function(n,o){},styles:[".mat-badge{position:relative}.mat-badge.mat-badge{overflow:visible}.mat-badge-content{position:absolute;text-align:center;display:inline-block;transition:transform 200ms ease-in-out;transform:scale(0.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;pointer-events:none;background-color:var(--mat-badge-background-color, var(--mat-app-error));color:var(--mat-badge-text-color, var(--mat-app-on-error));font-family:var(--mat-badge-text-font, var(--mat-app-label-small-font));font-weight:var(--mat-badge-text-weight, var(--mat-app-label-small-weight));border-radius:var(--mat-badge-container-shape, var(--mat-app-corner-full))}.cdk-high-contrast-active .mat-badge-content{outline:solid 1px;border-radius:0}.mat-badge-above .mat-badge-content{bottom:100%}.mat-badge-below .mat-badge-content{top:100%}.mat-badge-before .mat-badge-content{right:100%}[dir=rtl] .mat-badge-before .mat-badge-content{right:auto;left:100%}.mat-badge-after .mat-badge-content{left:100%}[dir=rtl] .mat-badge-after .mat-badge-content{left:auto;right:100%}.mat-badge-disabled .mat-badge-content{background-color:var(--mat-badge-disabled-state-background-color);color:var(--mat-badge-disabled-state-text-color, var(--mat-app-on-error))}.mat-badge-hidden .mat-badge-content{display:none}.ng-animate-disabled .mat-badge-content,.mat-badge-content._mat-animation-noopable{transition:none}.mat-badge-content.mat-badge-active{transform:none}.mat-badge-small .mat-badge-content{width:var(--mat-badge-legacy-small-size-container-size);height:var(--mat-badge-legacy-small-size-container-size);min-width:var(--mat-badge-small-size-container-size);min-height:var(--mat-badge-small-size-container-size);line-height:var(--mat-badge-small-size-line-height);padding:var(--mat-badge-small-size-container-padding);font-size:var(--mat-badge-small-size-text-size);margin:var(--mat-badge-small-size-container-offset)}.mat-badge-small.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-small-size-container-overlap-offset)}.mat-badge-medium .mat-badge-content{width:var(--mat-badge-legacy-container-size);height:var(--mat-badge-legacy-container-size);min-width:var(--mat-badge-container-size);min-height:var(--mat-badge-container-size);line-height:var(--mat-badge-line-height);padding:var(--mat-badge-container-padding);font-size:var(--mat-badge-text-size, var(--mat-app-label-small-size));margin:var(--mat-badge-container-offset)}.mat-badge-medium.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-container-overlap-offset)}.mat-badge-large .mat-badge-content{width:var(--mat-badge-legacy-large-size-container-size);height:var(--mat-badge-legacy-large-size-container-size);min-width:var(--mat-badge-large-size-container-size);min-height:var(--mat-badge-large-size-container-size);line-height:var(--mat-badge-large-size-line-height);padding:var(--mat-badge-large-size-container-padding);font-size:var(--mat-badge-large-size-text-size, var(--mat-app-label-small-size));margin:var(--mat-badge-large-size-container-offset)}.mat-badge-large.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-large-size-container-overlap-offset)}"],encapsulation:2,changeDetection:0})}}return r})(),cF=(()=>{class r{get color(){return this._color}set color(e){this._setColor(e),this._color=e}get content(){return this._content}set content(e){this._updateRenderedContent(e)}get description(){return this._description}set description(e){this._updateDescription(e)}constructor(e,n,o,s,l){this._ngZone=e,this._elementRef=n,this._ariaDescriber=o,this._renderer=s,this._animationMode=l,this._color="primary",this.overlap=!0,this.position="above after",this.size="medium",this._id=hnt++,this._isInitialized=!1,this._interactivityChecker=Et(Uy),this._document=Et(Ui);let h=Et(fs);if(!Ste.has(h)){Ste.add(h);let p=K3(pnt,{environmentInjector:Et(zc)});h.onDestroy(()=>{Ste.delete(h),p.destroy()})}}isAbove(){return this.position.indexOf("below")===-1}isAfter(){return this.position.indexOf("before")===-1}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){let e=this._renderer.createElement("span"),n="mat-badge-active";return e.setAttribute("id",`mat-badge-content-${this._id}`),e.setAttribute("aria-hidden","true"),e.classList.add(RSe),this._animationMode==="NoopAnimations"&&e.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(e),typeof requestAnimationFrame=="function"&&this._animationMode!=="NoopAnimations"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(n)})}):e.classList.add(n),e}_updateRenderedContent(e){let n=`${e??""}`.trim();this._isInitialized&&n&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=n),this._content=n}_updateDescription(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!e||this._isHostInteractive())&&this._removeInlineDescription(),this._description=e,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,e):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(e){let n=this._elementRef.nativeElement.classList;n.remove(`mat-badge-${this._color}`),e&&n.add(`mat-badge-${e}`)}_clearExistingBadges(){let e=this._elementRef.nativeElement.querySelectorAll(`:scope > .${RSe}`);for(let n of Array.from(e))n!==this._badgeElement&&n.remove()}static{this.\u0275fac=function(n){return new(n||r)(ie(ci),ie(Ht),ie(lA),ie(lu),ie(so,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(n,o){n&2&&oi("mat-badge-overlap",o.overlap)("mat-badge-above",o.isAbove())("mat-badge-below",!o.isAbove())("mat-badge-before",!o.isAfter())("mat-badge-after",o.isAfter())("mat-badge-small",o.size==="small")("mat-badge-medium",o.size==="medium")("mat-badge-large",o.size==="large")("mat-badge-hidden",o.hidden||!o.content)("mat-badge-disabled",o.disabled)},inputs:{color:[0,"matBadgeColor","color"],overlap:[2,"matBadgeOverlap","overlap",Xt],disabled:[2,"matBadgeDisabled","disabled",Xt],position:[0,"matBadgePosition","position"],content:[0,"matBadge","content"],description:[0,"matBadgeDescription","description"],size:[0,"matBadgeSize","size"],hidden:[2,"matBadgeHidden","hidden",Xt]},standalone:!0,features:[an]})}}return r})(),dF=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[Cw,on,on]})}}return r})();var T8=(()=>{class r{messageService;injector;stateChangeEventEmitter=new it;onlineSubscription;offlineSubscription;previousMessageId;state={connection:window.navigator.onLine};constructor(e,n){this.messageService=e,this.injector=n,this.checkNetworkState()}checkNetworkState(){this.onlineSubscription=Ds(window,"online").subscribe(()=>{this.previousMessageId&&this.messageService.remove(this.previousMessageId);let e=this.messageService.info("igo.core.network.online.message","igo.core.network.online.title");this.previousMessageId=e.toastId,this.state.connection=!0,this.emitEvent()}),this.offlineSubscription=Ds(window,"offline").subscribe(()=>{this.previousMessageId&&this.messageService.remove(this.previousMessageId);let e=this.messageService.info("igo.core.network.offline.message","igo.core.network.offline.title");this.previousMessageId=e.toastId,this.state.connection=!1,this.emitEvent()})}emitEvent(){this.stateChangeEventEmitter.emit(this.state)}ngOnDestroy(){try{this.offlineSubscription.unsubscribe(),this.onlineSubscription.unsubscribe()}catch{}}currentState(e=!0){return e?this.stateChangeEventEmitter.pipe(cr(300),yo(this.state)):this.stateChangeEventEmitter.pipe(cr(300))}static \u0275fac=function(n){return new(n||r)(xe(nl),xe(yn))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var fnt=["*"],uF=(()=>{class r{renderer;el;get target(){return this._target}set target(e){this._target=e}_target;get collapsed(){return this._collapsed}set collapsed(e){e?this.collapseTarget():this.expandTarget(),this._collapsed=e,this.toggle.emit(e)}_collapsed=!1;toggle=new it;click(){this.collapsed=!this.collapsed}constructor(e,n){this.renderer=e,this.el=n}collapseTarget(){this.renderer.addClass(this.target,"igo-collapsed"),this.renderer.addClass(this.el.nativeElement,"collapsed")}expandTarget(){this.renderer.removeClass(this.target,"igo-collapsed"),this.renderer.removeClass(this.el.nativeElement,"collapsed")}static \u0275fac=function(n){return new(n||r)(ie(lu),ie(Ht))};static \u0275dir=Pt({type:r,selectors:[["","igoCollapse",""]],hostBindings:function(n,o){n&1&&Oe("click",function(){return o.click()})},inputs:{target:"target",collapsed:"collapsed"},outputs:{toggle:"toggle"},standalone:!0})}return r})(),LSe=(()=>{class r{get title(){return this._title}set title(e){this._title=e}_title="";get collapsed(){return this._collapsed}set collapsed(e){this._collapsed=e,this.toggle.emit(e)}_collapsed=!1;toggle=new it;static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-collapsible"]],inputs:{title:"title",collapsed:"collapsed"},outputs:{toggle:"toggle"},standalone:!0,features:[yt],ngContentSelectors:fnt,decls:8,vars:3,consts:[["content",""],["matListItemIcon","","igoCollapse","",1,"igo-chevron",3,"toggle","target","collapsed"],["matListItemTitle",""]],template:function(n,o){if(n&1){let s=dt();Qi(),ne(0,"mat-list-item")(1,"mat-icon",1),Oe("toggle",function(h){return Re(s),Fe(o.collapsed=h)}),Ye(2," expand_less "),ce(),ne(3,"span",2),Ye(4),ce()(),ne(5,"div",null,0),pi(7),ce()}if(n&2){let s=ji(6);q(),ee("target",s)("collapsed",o.collapsed),q(3),Si(o.title)}},dependencies:[wu,wf,Am,Tm,jn,er,uF],styles:["[_nghost-%COMP%]     .mat-mdc-list .mat-mdc-list-item.mat-mdc-list-item-avatar{height:auto;width:auto;padding:0}mat-list-item[_ngcontent-%COMP%]{overflow:hidden}"]})}return r})();var Ite=class extends Hv{constructor(i){i=i||{},super(i)}},NSe=Ite;var Tte=class extends VM{constructor(i){super(i),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(i){let e=i.layerStatesArray[i.layerIndex],n=i.pixelRatio,o=i.viewState,s=o.resolution,l=this.getLayer().getSource(),h=i.viewHints,p=i.extent;if(e.extent!==void 0&&(p=ch(p,dh(e.extent,o.projection))),!h[Ws.ANIMATING]&&!h[Ws.INTERACTING]&&!km(p))if(l){let m=o.projection,f=l.getImage(p,s,n,m);f&&(this.loadImage(f)?this.image_=f:f.getState()===en.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(i){let e=this.frameState;if(!e)return null;let n=this.getLayer(),o=Hs(e.pixelToCoordinateTransform,i.slice()),s=n.getExtent();if(s&&!Mm(s,o))return null;let l=this.image_.getExtent(),h=this.image_.getImage(),p=or(l),m=Math.floor(h.width*((o[0]-l[0])/p));if(m<0||m>=h.width)return null;let f=is(l),g=Math.floor(h.height*((l[3]-o[1])/f));return g<0||g>=h.height?null:this.getImageData(h,m,g)}renderFrame(i,e){let n=this.image_,o=n.getExtent(),s=n.getResolution(),[l,h]=Array.isArray(s)?s:[s,s],p=n.getPixelRatio(),m=i.layerStatesArray[i.layerIndex],f=i.pixelRatio,g=i.viewState,y=g.center,_=g.resolution,w=f*l/(_*p),A=f*h/(_*p),k=i.extent,R=g.resolution,$=g.rotation,H=Math.round(or(k)/R*f),oe=Math.round(is(k)/R*f);vc(this.pixelTransform,i.size[0]/2,i.size[1]/2,1/f,1/f,$,-H/2,-oe/2),C1(this.inversePixelTransform,this.pixelTransform);let se=iM(this.pixelTransform);this.useContainer(e,se,this.getBackground(i));let ge=this.getRenderContext(i),ue=this.context.canvas;ue.width!=H||ue.height!=oe?(ue.width=H,ue.height=oe):this.containerReused||ge.clearRect(0,0,H,oe);let pe=!1,Ce=!0;if(m.extent){let Te=dh(m.extent,g.projection);Ce=Wo(Te,i.extent),pe=Ce&&!fc(Te,i.extent),pe&&this.clipUnrotated(ge,i,Te)}let _e=n.getImage(),de=vc(this.tempTransform,H/2,oe/2,w,A,0,p*(o[0]-y[0])/l,p*(y[1]-o[3])/h);this.renderedResolution=h*f/p;let te=_e.width*de[0],Se=_e.height*de[3];if(this.getLayer().getSource().getInterpolate()||(ge.imageSmoothingEnabled=!1),this.preRender(ge,i),Ce&&te>=.5&&Se>=.5){let Te=de[4],De=de[5],Le=m.opacity;Le!==1&&(ge.save(),ge.globalAlpha=Le),ge.drawImage(_e,0,0,+_e.width,+_e.height,Te,De,te,Se),Le!==1&&ge.restore()}return this.postRender(this.context,i),pe&&ge.restore(),ge.imageSmoothingEnabled=!0,se!==ue.style.transform&&(ue.style.transform=se),this.container}},BSe=Tte;var Ate=class extends NSe{constructor(i){super(i)}createRenderer(){return new BSe(this)}getData(i){return super.getData(i)}},jSe=Ate;var ey={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var Ete=class extends Hv{constructor(i){i=i||{};let e=Object.assign({},i);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(i.preload!==void 0?i.preload:0),this.setUseInterimTilesOnError(i.useInterimTilesOnError!==void 0?i.useInterimTilesOnError:!0)}getPreload(){return this.get(ey.PRELOAD)}setPreload(i){this.set(ey.PRELOAD,i)}getUseInterimTilesOnError(){return this.get(ey.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(i){this.set(ey.USE_INTERIM_TILES_ON_ERROR,i)}getData(i){return super.getData(i)}},VSe=Ete;var Mte=class extends VM{constructor(i){super(i),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Fs(),this.tmpTileRange_=new uV(0,0,0,0)}isDrawableTile(i){let e=this.getLayer(),n=i.getState(),o=e.getUseInterimTilesOnError();return n==Gi.LOADED||n==Gi.EMPTY||n==Gi.ERROR&&!o}getTile(i,e,n,o){let s=o.pixelRatio,l=o.viewState.projection,h=this.getLayer(),m=h.getSource().getTile(i,e,n,s,l);return m.getState()==Gi.ERROR&&h.getUseInterimTilesOnError()&&h.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(m)||(m=m.getInterimTile()),m}getData(i){let e=this.frameState;if(!e)return null;let n=this.getLayer(),o=Hs(e.pixelToCoordinateTransform,i.slice()),s=n.getExtent();if(s&&!Mm(s,o))return null;let l=e.pixelRatio,h=e.viewState.projection,p=e.viewState,m=n.getRenderSource(),f=m.getTileGridForProjection(p.projection),g=m.getTilePixelRatio(e.pixelRatio);for(let y=f.getZForResolution(p.resolution);y>=f.getMinZoom();--y){let _=f.getTileCoordForCoordAndZ(o,y),w=m.getTile(y,_[1],_[2],l,h);if(!(w instanceof nV||w instanceof gR)||w instanceof gR&&w.getState()===Gi.EMPTY)return null;if(w.getState()!==Gi.LOADED)continue;let A=f.getOrigin(y),k=Oa(f.getTileSize(y)),R=f.getResolution(y),$=Math.floor(g*((o[0]-A[0])/R-_[1]*k[0])),H=Math.floor(g*((A[1]-o[1])/R-_[2]*k[1])),oe=Math.round(g*m.getGutterForProjection(p.projection));return this.getImageData(w.getImage(),$+oe,H+oe)}return null}loadedTileCallback(i,e,n){return this.isDrawableTile(n)?super.loadedTileCallback(i,e,n):!1}prepareFrame(i){return!!this.getLayer().getSource()}renderFrame(i,e){let n=i.layerStatesArray[i.layerIndex],o=i.viewState,s=o.projection,l=o.resolution,h=o.center,p=o.rotation,m=i.pixelRatio,f=this.getLayer(),g=f.getSource(),y=g.getRevision(),_=g.getTileGridForProjection(s),w=_.getZForResolution(l,g.zDirection),A=_.getResolution(w),k=i.extent,R=i.viewState.resolution,$=g.getTilePixelRatio(m),H=Math.round(or(k)/R*m),oe=Math.round(is(k)/R*m),se=n.extent&&dh(n.extent,s);se&&(k=ch(k,dh(n.extent,s)));let ge=A*H/2/$,ue=A*oe/2/$,pe=[h[0]-ge,h[1]-ue,h[0]+ge,h[1]+ue],Ce=_.getTileRangeForExtentAndZ(k,w),_e={};_e[w]={};let de=this.createLoadedTileFinder(g,s,_e),te=this.tmpExtent,Se=this.tmpTileRange_;this.newTiles_=!1;let Te=p?Pj(o.center,R,p,i.size):void 0;for(let we=Ce.minX;we<=Ce.maxX;++we)for(let ke=Ce.minY;ke<=Ce.maxY;++ke){if(p&&!_.tileCoordIntersectsViewport([w,we,ke],Te))continue;let et=this.getTile(w,we,ke,i);if(this.isDrawableTile(et)){let _t=Xi(this);if(et.getState()==Gi.LOADED){_e[w][et.tileCoord.toString()]=et;let ht=et.inTransition(_t);ht&&n.opacity!==1&&(et.endTransition(_t),ht=!1),!this.newTiles_&&(ht||!this.renderedTiles.includes(et))&&(this.newTiles_=!0)}if(et.getAlpha(_t,i.time)===1)continue}let Qe=_.getTileCoordChildTileRange(et.tileCoord,Se,te),at=!1;Qe&&(at=de(w+1,Qe)),at||_.forEachTileCoordParentTileRange(et.tileCoord,de,Se,te)}let De=A/l*m/$;vc(this.pixelTransform,i.size[0]/2,i.size[1]/2,1/m,1/m,p,-H/2,-oe/2);let Le=iM(this.pixelTransform);this.useContainer(e,Le,this.getBackground(i));let Me=this.getRenderContext(i),ze=this.context.canvas;C1(this.inversePixelTransform,this.pixelTransform),vc(this.tempTransform,H/2,oe/2,De,De,0,-H/2,-oe/2),ze.width!=H||ze.height!=oe?(ze.width=H,ze.height=oe):this.containerReused||Me.clearRect(0,0,H,oe),se&&this.clipUnrotated(Me,i,se),g.getInterpolate()||(Me.imageSmoothingEnabled=!1),this.preRender(Me,i),this.renderedTiles.length=0;let Ve=Object.keys(_e).map(Number);Ve.sort(gh);let $e,nt,be;n.opacity===1&&(!this.containerReused||g.getOpaque(i.viewState.projection))?Ve=Ve.reverse():($e=[],nt=[]);for(let we=Ve.length-1;we>=0;--we){let ke=Ve[we],et=g.getTilePixelSize(ke,m,s),at=_.getResolution(ke)/A,_t=et[0]*at*De,ht=et[1]*at*De,Zt=_.getTileCoordForCoordAndZ(Cu(pe),ke),Tt=_.getTileCoordExtent(Zt),me=Hs(this.tempTransform,[$*(Tt[0]-pe[0])/A,$*(pe[3]-Tt[3])/A]),Ct=$*g.getGutterForProjection(s),pt=_e[ke];for(let Pe in pt){let ye=pt[Pe],lt=ye.tileCoord,Ot=Zt[1]-lt[1],ut=Math.round(me[0]-(Ot-1)*_t),ot=Zt[2]-lt[2],Rt=Math.round(me[1]-(ot-1)*ht),Lt=Math.round(me[0]-Ot*_t),Nt=Math.round(me[1]-ot*ht),ni=ut-Lt,wi=Rt-Nt,vi=w===ke,Hi=vi&&ye.getAlpha(Xi(this),i.time)!==1,Ei=!1;if(!Hi)if($e){be=[Lt,Nt,Lt+ni,Nt,Lt+ni,Nt+wi,Lt,Nt+wi];for(let Li=0,$i=$e.length;Li<$i;++Li)if(w!==ke&&ke<nt[Li]){let Wt=$e[Li];Wo([Lt,Nt,Lt+ni,Nt+wi],[Wt[0],Wt[3],Wt[4],Wt[7]])&&(Ei||(Me.save(),Ei=!0),Me.beginPath(),Me.moveTo(be[0],be[1]),Me.lineTo(be[2],be[3]),Me.lineTo(be[4],be[5]),Me.lineTo(be[6],be[7]),Me.moveTo(Wt[6],Wt[7]),Me.lineTo(Wt[4],Wt[5]),Me.lineTo(Wt[2],Wt[3]),Me.lineTo(Wt[0],Wt[1]),Me.clip())}$e.push(be),nt.push(ke)}else Me.clearRect(Lt,Nt,ni,wi);this.drawTileImage(ye,i,Lt,Nt,ni,wi,Ct,vi),$e&&!Hi?(Ei&&Me.restore(),this.renderedTiles.unshift(ye)):this.renderedTiles.push(ye),this.updateUsedTiles(i.usedTiles,g,ye)}}return this.renderedRevision=y,this.renderedResolution=A,this.extentChanged=!this.renderedExtent_||!Dm(this.renderedExtent_,pe),this.renderedExtent_=pe,this.renderedPixelRatio=m,this.renderedProjection=s,this.manageTilePyramid(i,g,_,m,s,k,w,f.getPreload()),this.scheduleExpireCache(i,g),this.postRender(this.context,i),n.extent&&Me.restore(),Me.imageSmoothingEnabled=!0,Le!==ze.style.transform&&(ze.style.transform=Le),this.container}drawTileImage(i,e,n,o,s,l,h,p){let m=this.getTileImage(i);if(!m)return;let f=this.getRenderContext(e),g=Xi(this),y=e.layerStatesArray[e.layerIndex],_=y.opacity*(p?i.getAlpha(g,e.time):1),w=_!==f.globalAlpha;w&&(f.save(),f.globalAlpha=_),f.drawImage(m,h,h,m.width-2*h,m.height-2*h,n,o,s,l),w&&f.restore(),_!==y.opacity?e.animate=!0:p&&i.endTransition(g)}getImage(){let i=this.context;return i?i.canvas:null}getTileImage(i){return i.getImage()}scheduleExpireCache(i,e){if(e.canExpireCache()){let n=function(o,s,l){let h=Xi(o);h in l.usedTiles&&o.expireCache(l.viewState.projection,l.usedTiles[h])}.bind(null,e);i.postRenderFunctions.push(n)}}updateUsedTiles(i,e,n){let o=Xi(e);o in i||(i[o]={}),i[o][n.getKey()]=!0}manageTilePyramid(i,e,n,o,s,l,h,p,m){let f=Xi(e);f in i.wantedTiles||(i.wantedTiles[f]={});let g=i.wantedTiles[f],y=i.tileQueue,_=n.getMinZoom(),w=i.viewState.rotation,A=w?Pj(i.viewState.center,i.viewState.resolution,w,i.size):void 0,k=0,R,$,H,oe,se,ge;for(ge=_;ge<=h;++ge)for($=n.getTileRangeForExtentAndZ(l,ge,$),H=n.getResolution(ge),oe=$.minX;oe<=$.maxX;++oe)for(se=$.minY;se<=$.maxY;++se)w&&!n.tileCoordIntersectsViewport([ge,oe,se],A)||(h-ge<=p?(++k,R=e.getTile(ge,oe,se,o,s),R.getState()==Gi.IDLE&&(g[R.getKey()]=!0,y.isKeyQueued(R.getKey())||y.enqueue([R,f,n.getTileCoordCenter(R.tileCoord),H])),m!==void 0&&m(R)):e.useTile(ge,oe,se,s));e.updateCacheSize(k,s)}},A8=Mte;var Dte=class extends VSe{constructor(i){super(i)}createRenderer(){return new A8(this)}},$Se=Dte;var gnt={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},USe={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},kte=class extends A8{constructor(i){super(i),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Fc(),this.tileClipContexts_=null}prepareTile(i,e,n){let o,s=i.getState();return(s===Gi.LOADED||s===Gi.ERROR)&&(this.updateExecutorGroup_(i,e,n),this.tileImageNeedsRender_(i)&&(o=!0)),o}getTile(i,e,n,o){let s=o.pixelRatio,l=o.viewState,h=l.resolution,p=l.projection,m=this.getLayer(),f=m.getSource().getTile(i,e,n,s,p),g=o.viewHints,y=!(g[Ws.ANIMATING]||g[Ws.INTERACTING]);return(y||!f.wantedResolution)&&(f.wantedResolution=h),this.prepareTile(f,s,p)&&(y||Date.now()-o.time<8)&&m.getRenderMode()!=="vector"&&this.renderTileImage_(f,o),super.getTile(i,e,n,o)}isDrawableTile(i){let e=this.getLayer();return super.isDrawableTile(i)&&(e.getRenderMode()==="vector"?Xi(e)in i.executorGroups:i.hasContext(e))}getTileImage(i){return i.getImage(this.getLayer())}prepareFrame(i){let e=this.getLayer().getRevision();return this.renderedLayerRevision_!==e&&(this.renderedLayerRevision_=e,this.renderedTiles.length=0),super.prepareFrame(i)}updateExecutorGroup_(i,e,n){let o=this.getLayer(),s=o.getRevision(),l=o.getRenderOrder()||null,h=i.wantedResolution,p=i.getReplayState(o);if(!p.dirty&&p.renderedResolution===h&&p.renderedRevision==s&&p.renderedRenderOrder==l)return;let m=o.getSource(),f=!!o.getDeclutter(),g=m.getTileGrid(),_=m.getTileGridForProjection(n).getTileCoordExtent(i.wrappedTileCoord),w=m.getSourceTiles(e,n,i),A=Xi(o);delete i.hitDetectionImageData[A],i.executorGroups[A]=[],p.dirty=!1;for(let k=0,R=w.length;k<R;++k){let $=w[k];if($.getState()!=Gi.LOADED)continue;let H=$.tileCoord,oe=g.getTileCoordExtent(H),se=ch(_,oe),ge=xd(se,o.getRenderBuffer()*h,this.tmpExtent),ue=Dm(oe,se)?null:ge,pe=new DV(0,se,h,e),Ce=ZS(h,e),_e=function(De,Le){let Me,ze=De.getStyleFunction()||o.getStyleFunction();if(ze&&(Me=ze(De,h)),Me){let Ve=this.renderFeature(De,Ce,Me,pe,f,Le);p.dirty=p.dirty||Ve}},de=$.getFeatures();l&&l!==p.renderedRenderOrder&&de.sort(l);for(let De=0,Le=de.length;De<Le;++De){let Me=de[De];(!ue||Wo(ue,Me.getGeometry().getExtent()))&&_e.call(this,Me,De)}let te=pe.finish(),Se=o.getRenderMode()!=="vector"&&f&&w.length===1?null:se,Te=new OV(Se,h,e,m.getOverlaps(),te,o.getRenderBuffer(),!!this.frameState?.declutter);i.executorGroups[A].push(Te)}p.renderedRevision=s,p.renderedRenderOrder=l,p.renderedResolution=h}forEachFeatureAtCoordinate(i,e,n,o,s){let l=e.viewState.resolution,h=e.viewState.rotation;n=n??0;let p=this.getLayer(),f=p.getSource().getTileGridForProjection(e.viewState.projection),g=mc([i]);xd(g,l*n,g);let y={},_=function(k,R,$){let H=k.getId();H===void 0&&(H=Xi(k));let oe=y[H];if(oe){if(oe!==!0&&$<oe.distanceSq){if($===0)return y[H]=!0,s.splice(s.lastIndexOf(oe),1),o(k,p,R);oe.geometry=R,oe.distanceSq=$}}else{if($===0)return y[H]=!0,o(k,p,R);s.push(y[H]={feature:k,layer:p,geometry:R,distanceSq:$,callback:o})}},w=this.renderedTiles,A;for(let k=0,R=w.length;!A&&k<R;++k){let $=w[k],H=f.getTileCoordExtent($.wrappedTileCoord);if(!Wo(H,g))continue;let oe=Xi(p),se=[$.executorGroups[oe]],ge=p.getDeclutter();se.some(ue=>{let pe=ge?e.declutter[ge].all().map(Ce=>Ce.value):null;for(let Ce=0,_e=ue.length;Ce<_e;++Ce)if(A=ue[Ce].forEachFeatureAtCoordinate(i,l,h,n,_,pe),A)return!0})}return A}getFeatures(i){return new Promise((e,n)=>{let o=this.getLayer(),s=Xi(o),l=o.getSource(),h=this.renderedProjection,p=h.getExtent(),m=this.renderedResolution,f=l.getTileGridForProjection(h),g=Hs(this.renderedPixelToCoordinateTransform_,i.slice()),y=f.getTileCoordForCoordAndResolution(g,m),_;for(let H=0,oe=this.renderedTiles.length;H<oe;++H)if(y.toString()===this.renderedTiles[H].tileCoord.toString()){if(_=this.renderedTiles[H],_.getState()===Gi.LOADED){let se=f.getTileCoordExtent(_.tileCoord);l.getWrapX()&&h.canWrapX()&&!fc(p,se)&&BE(g,h);break}_=void 0}if(!_||_.loadingSourceTiles>0){e([]);return}let w=f.getTileCoordExtent(_.wrappedTileCoord),A=Cu(w),k=[(g[0]-A[0])/m,(A[1]-g[1])/m],R=_.getSourceTiles().reduce(function(H,oe){return H.concat(oe.getFeatures())},[]),$=_.hitDetectionImageData[s];if(!$){let H=Oa(f.getTileSize(f.getZForResolution(m,l.zDirection))),oe=this.renderedRotation_,se=[this.getRenderTransform(f.getTileCoordCenter(_.wrappedTileCoord),m,0,ip,H[0]*ip,H[1]*ip,0)];$=RV(H,se,R,o.getStyleFunction(),f.getTileCoordExtent(_.wrappedTileCoord),_.getReplayState(o).renderedResolution,oe),_.hitDetectionImageData[s]=$}e(FV(k,R,$))})}handleFontsChanged(){let i=this.getLayer();i.getVisible()&&this.renderedLayerRevision_!==void 0&&i.changed()}handleStyleImageChange_(i){this.renderIfReadyAndVisible()}renderDeclutter(i,e){let n=this.context,o=n.globalAlpha;n.globalAlpha=e.opacity;let s=i.viewHints,l=!(s[Ws.ANIMATING]||s[Ws.INTERACTING]),h=this.renderedTiles;for(let p=0,m=h.length;p<m;++p){let f=h[p],g=f.executorGroups[Xi(this.getLayer())],y=this.getLayer().getDeclutter();if(g)for(let _=g.length-1;_>=0;--_)g[_].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(f,i),i.viewState.rotation,l,zM,y?i.declutter[y]:void 0)}n.globalAlpha=o}renderDeferredInternal(i){let n=this.renderedTiles.reduce((l,h,p)=>(h.executorGroups[Xi(this.getLayer())].forEach(m=>l.push({executorGroup:m,index:p})),l),[]),o=n.map(({executorGroup:l})=>l.getDeferredZIndexContexts());o.map(l=>Object.keys(l)).flat().sort(gh).map(Number).forEach(l=>{o.forEach((h,p)=>{h[l]&&h[l].forEach(m=>{let{executorGroup:f,index:g}=n[p],y=f.getRenderedContext(),_=y.globalAlpha;y.globalAlpha=this.renderedOpacity_;let w=this.tileClipContexts_[g];w&&w.draw(y),m.draw(y),w&&y.restore(),y.globalAlpha=_,m.clear()})})})}getTileRenderTransform(i,e){let n=e.pixelRatio,o=e.viewState,s=o.center,l=o.resolution,h=o.rotation,p=e.size,m=Math.round(p[0]*n),f=Math.round(p[1]*n),y=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),_=i.tileCoord,w=y.getTileCoordExtent(i.wrappedTileCoord),A=y.getTileCoordExtent(_,this.tmpExtent)[0]-w[0];return eM(tM(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(s,l,h,n,m,f,A))}postRender(i,e){let n=e.viewHints,o=!(n[Ws.ANIMATING]||n[Ws.INTERACTING]);this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation,this.renderedOpacity_=e.layerStatesArray[e.layerIndex].opacity;let s=this.getLayer(),l=s.getRenderMode(),h=i.globalAlpha;i.globalAlpha=this.renderedOpacity_;let p=s.getDeclutter(),m=p?USe[l].filter(oe=>!zM.includes(oe)):USe[l],f=e.viewState,g=f.rotation,y=s.getSource(),w=y.getTileGridForProjection(f.projection).getZForResolution(f.resolution,y.zDirection),A=this.renderedTiles,k=[],R=[],$=[],H=!0;for(let oe=A.length-1;oe>=0;--oe){let se=A[oe];H=H&&!se.getReplayState(s).dirty;let ge=se.executorGroups[Xi(s)].filter(Se=>Se.hasExecutors(m));if(ge.length===0)continue;let ue=this.getTileRenderTransform(se,e),pe=se.tileCoord[0],Ce=!1,_e=ge[0].getClipCoords(ue),de=i,te;if(_e){p&&(te=new BM,de=te.getContext());for(let Se=0,Te=k.length;Se<Te;++Se)if(w!==pe&&pe<R[Se]){let De=k[Se];Wo([_e[0],_e[3],_e[4],_e[7]],[De[0],De[3],De[4],De[7]])&&(Ce||(de.save(),Ce=!0),de.beginPath(),de.moveTo(_e[0],_e[1]),de.lineTo(_e[2],_e[3]),de.lineTo(_e[4],_e[5]),de.lineTo(_e[6],_e[7]),de.moveTo(De[6],De[7]),de.lineTo(De[4],De[5]),de.lineTo(De[2],De[3]),de.lineTo(De[0],De[1]),de.clip())}k.push(_e),R.push(pe)}for(let Se=0,Te=ge.length;Se<Te;++Se)ge[Se].execute(i,[i.canvas.width,i.canvas.height],ue,g,o,m);Ce&&(de===i?de.restore():$[oe]=te)}i.globalAlpha=h,this.ready=H,this.tileClipContexts_=$,super.postRender(i,e)}renderFeature(i,e,n,o,s,l){if(!n)return!1;let h=!1;if(Array.isArray(n))for(let p=0,m=n.length;p<m;++p)h=GM(o,i,n[p],e,this.boundHandleStyleImageChange_,void 0,s,l)||h;else h=GM(o,i,n,e,this.boundHandleStyleImageChange_,void 0,s,l);return h}tileImageNeedsRender_(i){let e=this.getLayer();if(e.getRenderMode()==="vector")return!1;let n=i.getReplayState(e),o=e.getRevision(),s=i.wantedResolution;return n.renderedTileResolution!==s||n.renderedTileRevision!==o}renderTileImage_(i,e){let n=this.getLayer(),o=i.getReplayState(n),s=n.getRevision(),l=i.executorGroups[Xi(n)];o.renderedTileRevision=s;let h=i.wrappedTileCoord,p=h[0],m=n.getSource(),f=e.pixelRatio,y=e.viewState.projection,_=m.getTileGridForProjection(y),w=_.getResolution(i.tileCoord[0]),A=e.pixelRatio/i.wantedResolution*w,k=_.getResolution(p),R=i.getContext(n);f=Math.round(Math.max(f,A/f));let $=m.getTilePixelSize(p,f,y);R.canvas.width=$[0],R.canvas.height=$[1];let H=f/A;if(H!==1){let ue=sZ(this.tmpTransform_);tM(ue,H,H),R.setTransform.apply(R,ue)}let oe=_.getTileCoordExtent(h,this.tmpExtent),se=A/k,ge=sZ(this.tmpTransform_);tM(ge,se,-se),iye(ge,-oe[0],-oe[3]);for(let ue=0,pe=l.length;ue<pe;++ue)l[ue].execute(R,[R.canvas.width*H,R.canvas.height*H],ge,0,!0,gnt[n.getRenderMode()],null);o.renderedTileResolution=i.wantedResolution}},zSe=kte;var Ote=class extends NM{constructor(i){i=i||{};let e=Object.assign({},i);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un;let n=i.renderMode||"hybrid";Nn(n=="hybrid"||n=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=n,this.setPreload(i.preload?i.preload:0),this.setUseInterimTilesOnError(i.useInterimTilesOnError!==void 0?i.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new zSe(this)}getFeatures(i){return super.getFeatures(i)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(ey.PRELOAD)}getUseInterimTilesOnError(){return this.get(ey.USE_INTERIM_TILES_ON_ERROR)}setPreload(i){this.set(ey.PRELOAD,i)}setUseInterimTilesOnError(i){this.set(ey.USE_INTERIM_TILES_ON_ERROR,i)}},hF=Ote;var GSe=(()=>{class r{el;clickout=new it;handleMouseClick(e,n){n&&(this.el.nativeElement.contains(n)||this.clickout.emit(e))}constructor(e){this.el=e}static \u0275fac=function(n){return new(n||r)(ie(Ht))};static \u0275dir=Pt({type:r,selectors:[["","igoClickout",""]],hostBindings:function(n,o){n&1&&Oe("click",function(l){return o.handleMouseClick(l,l.target)},!1,_g)},outputs:{clickout:"clickout"},standalone:!0})}return r})();var _nt=["*"],ynt=r=>({selectable:r}),q1=(()=>{class r{renderer;el;static focusedCls="igo-list-item-focused";static selectedCls="igo-list-item-selected";static disabledCls="igo-list-item-disabled";get color(){return this._color}set color(e){this._color=e}_color="primary";get focused(){return this._focused}set focused(e){e!==this._focused&&(this.disabled||(e?this.beforeFocus.emit(this):this.beforeUnfocus.emit(this),this._focused=e,this.selected!==!0&&this.toggleFocusedClass(),e?this.focus.emit(this):this.unfocus.emit(this)))}_focused=!1;get selected(){return this._selected}set selected(e){e!==this._selected&&(this.disabled||(e?this.beforeSelect.emit(this):this.beforeUnselect.emit(this),this._selected=e,this._focused=e,this.toggleSelectedClass(),e?this.select.emit(this):this.unselect.emit(this)))}_selected=!1;get disabled(){return this._disabled}set disabled(e){e!==this._disabled&&(e===!0&&(this.selected=!1),e?this.beforeDisable.emit(this):this.beforeEnable.emit(this),this._disabled=e,this.toggleDisabledClass(),e?this.disable.emit(this):this.enable.emit(this))}_disabled=!1;beforeSelect=new it;beforeFocus=new it;beforeUnselect=new it;beforeUnfocus=new it;beforeDisable=new it;beforeEnable=new it;focus=new it;unfocus=new it;select=new it;unselect=new it;disable=new it;enable=new it;onClick(){this.selected=!0}constructor(e,n){this.renderer=e,this.el=n}getOffsetTop(){return this.el.nativeElement.offsetTop-5}toggleFocusedClass(){this.focused?this.addCls(r.focusedCls):this.removeCls(r.focusedCls)}toggleSelectedClass(){this.selected?(this.addCls(r.selectedCls),this.removeCls(r.focusedCls)):this.removeCls(r.selectedCls)}toggleDisabledClass(){this.disabled?this.addCls(r.disabledCls):this.removeCls(r.disabledCls)}addCls(e){this.renderer.addClass(this.el.nativeElement,e)}removeCls(e){this.renderer.removeClass(this.el.nativeElement,e)}static \u0275fac=function(n){return new(n||r)(ie(lu),ie(Ht))};static \u0275dir=Pt({type:r,selectors:[["","igoListItem",""]],hostBindings:function(n,o){n&1&&Oe("click",function(){return o.onClick()})},inputs:{color:"color",focused:"focused",selected:"selected",disabled:"disabled"},outputs:{beforeSelect:"beforeSelect",beforeFocus:"beforeFocus",beforeUnselect:"beforeUnselect",beforeUnfocus:"beforeUnfocus",beforeDisable:"beforeDisable",beforeEnable:"beforeEnable",focus:"focus",unfocus:"unfocus",select:"select",unselect:"unselect",disable:"disable",enable:"enable"},standalone:!0})}return r})(),pF=(()=>{class r{el;get navigation(){return this._navigation}set navigation(e){this._navigation=e}_navigation=!0;get selection(){return this._selection}set selection(e){this._selection=e}_selection=!0;get selectedItem(){return this._selectedItem}set selectedItem(e){this.focusedItem=e,this._selectedItem=e}_selectedItem;get focusedItem(){return this._focusedItem}set focusedItem(e){this._focusedItem=e}_focusedItem;navigationEnabled;listItems$$;subscriptions=[];listItems;handleKeyboardEvent(e){this.navigationEnabled&&(e.key==="ArrowUp"||e.key==="ArrowDown"?(e.preventDefault(),this.navigate(e.key)):e.key==="Enter"&&this.select(this.focusedItem))}constructor(e){this.el=e}ngOnInit(){this.enableNavigation()}ngAfterViewInit(){this.listItems.length&&this.init(),this.listItems$$=this.listItems.changes.subscribe(()=>this.init())}ngOnDestroy(){this.listItems$$.unsubscribe()}focus(e){this.selection&&(this.unfocus(),e!==void 0&&(e.focused=!0))}unfocus(){this.focusedItem!==void 0&&(this.focusedItem.focused=!1),this.focusedItem=void 0}focusNext(){let e=this.listItems.toArray(),n,o=this.el.nativeElement,s=!0,l=this.getFocusedIndex();for(l===void 0&&(l=-1);s&&l<e.length-1;)l+=1,n=e[l],s=n.disabled;if(n!==void 0&&this.focus(n),!e[l+1]){o.scrollTop=o.scrollHeight-o.clientHeight;return}n!==void 0&&!this.isScrolledIntoView(n.el.nativeElement)&&(o.scrollTop=n.el.nativeElement.offsetTop+n.el.nativeElement.children[0].offsetHeight-o.clientHeight)}focusPrevious(){let e=this.listItems.toArray(),n,o=this.el.nativeElement,s=!0,l=this.getFocusedIndex();for(;s&&l>0;)l-=1,n=e[l],s=n.disabled;if(n!==void 0&&this.focus(n),!e[l-1]){o.scrollTop=0;return}n!==void 0&&!this.isScrolledIntoView(n.el.nativeElement)&&(o.scrollTop=n.el.nativeElement.offsetTop-3)}select(e){this.selection&&(this.unselect(),e!==void 0&&(e.selected=!0))}unselect(){this.unfocus(),this.selectedItem!==void 0&&(this.selectedItem.selected=!1),this.selectedItem=void 0}enableNavigation(){this.navigation&&(this.navigationEnabled=!0)}disableNavigation(){this.navigationEnabled=!1}scrollToItem(e){this.el.nativeElement.scrollTop=e.getOffsetTop()}isScrolledIntoView(e){let n=this.el.nativeElement.scrollTop+this.el.nativeElement.offsetTop,o=n+this.el.nativeElement.clientHeight,s=e.offsetTop;return s+e.children[0].offsetHeight<=o&&s>=n}init(){this.subscribe(),this.selectedItem=this.findSelectedItem(),this.focusedItem=this.findFocusedItem(),this.enableNavigation()}subscribe(){this.unsubscribe(),this.listItems.toArray().forEach(e=>{this.subscriptions.push(e.beforeSelect.subscribe(n=>this.handleItemBeforeSelect(n))),this.subscriptions.push(e.select.subscribe(n=>this.handleItemSelect(n))),this.subscriptions.push(e.beforeFocus.subscribe(n=>this.handleItemBeforeFocus(n))),this.subscriptions.push(e.focus.subscribe(n=>this.handleItemFocus(n)))},this)}unsubscribe(){this.subscriptions.forEach(e=>e.unsubscribe()),this.subscriptions=[]}handleItemBeforeFocus(e){e!==this.focusedItem&&this.unfocus()}handleItemFocus(e){this.focusedItem=e}handleItemBeforeSelect(e){e!==this.focusedItem&&this.unselect()}handleItemSelect(e){this.selectedItem=e}findSelectedItem(){return this.listItems.toArray().find(e=>e.selected)}findFocusedItem(){return this.listItems.toArray().find(e=>e.focused)}getFocusedIndex(){return this.listItems.toArray().findIndex(e=>e===this.focusedItem)}navigate(e){switch(e){case"ArrowUp":this.focusPrevious();break;case"ArrowDown":this.focusNext();break;default:break}}static \u0275fac=function(n){return new(n||r)(ie(Ht))};static \u0275cmp=gt({type:r,selectors:[["igo-list"]],contentQueries:function(n,o,s){if(n&1&&Sn(s,q1,5),n&2){let l;Yt(l=Kt())&&(o.listItems=l)}},hostBindings:function(n,o){n&1&&Oe("keydown",function(l){return o.handleKeyboardEvent(l)},!1,_g)("enter",function(l){return o.handleKeyboardEvent(l)},!1,_g)},inputs:{navigation:"navigation",selection:"selection"},standalone:!0,features:[yt],ngContentSelectors:_nt,decls:2,vars:3,consts:[["igoClickout","",3,"clickout","click","ngClass"]],template:function(n,o){n&1&&(Qi(),ne(0,"mat-list",0),Oe("clickout",function(){return o.disableNavigation()})("click",function(){return o.enableNavigation()}),pi(1),ce()),n&2&&ee("ngClass",fo(1,ynt,o.selection))},dependencies:[wu,AE,GSe,qr],styles:["[_nghost-%COMP%]{display:block;height:100%;overflow:auto;position:relative}[_nghost-%COMP%]   mat-list[_ngcontent-%COMP%]{padding-top:0}[_nghost-%COMP%]     .mat-mdc-list .mat-mdc-list-item .mdc-list-item__primary-text{white-space:normal;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;max-height:36px;line-height:18px;-webkit-box-orient:vertical;-webkit-line-clamp:2}[_nghost-%COMP%]     .mat-mdc-list .mat-mdc-list-item.mdc-list-item--with-leading-icon{height:48px}[_nghost-%COMP%]     .mat-mdc-list   igo-collapsible>.mat-mdc-list-item>.mdc-list-item__primary-text>.mat-mdc-list-item{font-weight:700;opacity:.9}[_nghost-%COMP%]   mat-list.selectable[_ngcontent-%COMP%]     [igolistitem]:not(.igo-list-item-disabled) mat-list-item:hover{cursor:pointer}[_nghost-%COMP%]     [igolistitem]:focus{outline:none}"]})}return r})();var Pte=(()=>{class r{el;set igoMatBadgeIcon(e){this.html=`
      <mat-icon class="mat-icon material-symbols-outlined" style="height: 16px; width: 16px; font-size: 16px;">${e}</mat-icon>
    `,this.updateHtml()}html;set matBadgeHidden(e){this.hidden=e,this.updateHidden()}hidden=!1;set matBadgeDisabled(e){this.disabled=e,this.updateDisabled()}disabled=!1;set igoMatBadgeInverseColor(e){this.inverseColor=e,this.updateColor()}inverseColor=!1;set igoMatBadgeInheritColor(e){this.inheritColor=e,this.updateColor()}inheritColor=!1;set igoMatBadgeColor(e){this.color=e,this.updateColor()}color;set igoMatBadgeBackgroundColor(e){this.backgroundColor=e,this.updateColor()}backgroundColor;get badge(){return this.el.nativeElement.querySelector(".mat-badge-content")}originalColor;constructor(e){this.el=e}ngOnInit(){this.badge.style.alignItems="center",this.badge.style.justifyContent="center",this.updateHidden(),this.updateColor(),this.updateHtml()}updateHtml(){this.badge&&(this.badge.innerHTML="",this.html&&(this.badge.innerHTML=this.html))}updateColor(){this.badge&&(this.color||this.backgroundColor?(this.badge.style.color=this.color?this.color:"",this.badge.style.background=this.backgroundColor?this.backgroundColor:""):this.inheritColor?this.inverseColor?(this.badge.style.color="currentColor",this.badge.style.background="none"):(this.badge.style.color="",this.badge.style.background="currentColor"):this.inheritColor||(this.inverseColor?(this.badge.style.color=window.getComputedStyle(this.badge,null).getPropertyValue("background-color"),this.badge.style.background="none"):(this.badge.style.color="",this.badge.style.background="")),this.originalColor=this.badge.style.color,this.updateDisabled())}updateHidden(){this.badge&&(this.badge.style.display=this.hidden?"none":"flex")}updateDisabled(){!this.badge||!this.inverseColor||(this.disabled?(this.originalColor=this.badge.style.color,this.badge.style.color="#b9b9b9"):this.badge.style.color=this.originalColor)}static \u0275fac=function(n){return new(n||r)(ie(Ht))};static \u0275dir=Pt({type:r,selectors:[["","igoMatBadgeIcon",""]],inputs:{igoMatBadgeIcon:"igoMatBadgeIcon",matBadgeHidden:"matBadgeHidden",matBadgeDisabled:"matBadgeDisabled",igoMatBadgeInverseColor:"igoMatBadgeInverseColor",igoMatBadgeInheritColor:"igoMatBadgeInheritColor",igoMatBadgeColor:"igoMatBadgeColor",igoMatBadgeBackgroundColor:"igoMatBadgeBackgroundColor"},standalone:!0,features:[Bi([jn])]})}return r})();var Rte=ld(_Y(),1);var vnt=["buttons"],bnt=["*",[["","formButtons",""]]],wnt=["*","[formButtons]"],Cnt=r=>({"igo-form-body-with-buttons":r});function xnt(r,i){if(r&1&&(ne(0,"mat-option",4),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e.value),q(),Qt(" ",e.title," ")}}function Snt(r,i){if(r&1){let e=dt();ne(0,"mat-icon",5),Oe("click",function(){Re(e);let o=ae();return Fe(o.onDisableSwitchClick())}),Ye(1),Ne(2,"async"),ce()}if(r&2){let e=ae();q(),Qt("",je(2,1,e.disabled$)===!0?"check_box_outline_blank":"check_box"," ")}}function Int(r,i){if(r&1&&(ne(0,"mat-error"),Ye(1),Ne(2,"translate"),ce()),r&2){let e=ae();q(),Si(je(2,1,e.getErrorMessage()))}}function Tnt(r,i){if(r&1){let e=dt();ne(0,"mat-icon",4),Oe("click",function(){Re(e);let o=ae();return Fe(o.onDisableSwitchClick())}),Ye(1),Ne(2,"async"),ce()}if(r&2){let e=ae();q(),Qt("",je(2,1,e.disabled$)===!0?"check_box_outline_blank":"check_box"," ")}}function Ant(r,i){if(r&1){let e=dt();ne(0,"button",5),Oe("click",function(){Re(e);let o=ae();return Fe(o.togglePassword())}),ne(1,"mat-icon",6),Ye(2),ce()()}if(r&2){let e=ae();q(2),Si(e.hide?"visibility_off":"visibility")}}function Ent(r,i){if(r&1&&(ne(0,"mat-error"),Ye(1),Ne(2,"translate"),ce()),r&2){let e=ae();q(),Si(je(2,1,e.getErrorMessage()))}}function Mnt(r,i){if(r&1){let e=dt();ne(0,"mat-icon",3),Oe("click",function(){Re(e);let o=ae();return Fe(o.onDisableSwitchClick())}),Ye(1),Ne(2,"async"),ce()}if(r&2){let e=ae();q(),Qt("",je(2,1,e.disabled$)===!0?"check_box_outline_blank":"check_box"," ")}}function Dnt(r,i){if(r&1&&(ne(0,"mat-error"),Ye(1),Ne(2,"translate"),ce()),r&2){let e=ae();q(),Si(je(2,1,e.getErrorMessage()))}}function knt(r,i){if(r&1&&(zn(0),wt(1,"igo-dynamic-outlet",1),Gn()),r&2){let e=ae();q(),ee("component",e.getFieldComponent())("inputs",e.getFieldInputs())("subscribers",e.getFieldSubscribers())}}var Ont=["*"];function Pnt(r,i){if(r&1&&(ne(0,"div",5),wt(1,"igo-form-field",6),ce()),r&2){let e=i.$implicit,n=ae(2);ee("ngClass",n.getFieldNgClass(e)),q(),ee("field",e)}}function Rnt(r,i){if(r&1&&(ne(0,"div",3),We(1,Pnt,2,2,"div",4),ce()),r&2){let e=ae();q(),ee("ngForOf",e.group.fields)}}function Fnt(r,i){if(r&1&&(ne(0,"mat-error"),Ye(1),Ne(2,"translate"),ce()),r&2){let e=ae();q(),Si(je(2,1,e.getErrorMessage()))}}function E8(r){if(r.validator){let i=r.validator({});if(i&&i.required)return!0}return r.controls?Object.keys(r.controls).find(e=>E8(r.controls[e]))!==void 0:!1}function Lnt(){return{required:"igo.common.form.errors.required",email:"igo.common.form.errors.email"}}function M8(r,i){let e=r.errors||{},o=Object.keys(e).map(s=>i[s]).filter(s=>s!==void 0);return o.length>0?o[0]:""}function Nnt(r){return r.groups.reduce((i,e)=>i.concat(e.fields),[].concat(r.fields))}var Bte=(()=>{class r{form;formData;autocomplete="off";submitForm=new it;buttons;get hasButtons(){return this.buttons.nativeElement.children.length!==0}ngOnChanges(e){let n=e.formData;n.firstChange&&n.currentValue==null||n&&n.currentValue!==n.previousValue&&(n.currentValue===void 0?this.clear():this.setData(n.currentValue))}onSubmit(){this.submitForm.emit(this.getData())}getData(){let e={};return Nnt(this.form).forEach(n=>{this.updateDataWithFormField(e,n)}),e}setData(e){this.form.fields.forEach(n=>{n.control.setValue((0,Rte.t)(e,n.name).safeObject)}),this.form.groups.forEach(n=>{n.fields.forEach(o=>{o.control.setValue((0,Rte.t)(e,o.name).safeObject)})})}updateDataWithFormField(e,n){let o=n.control;o.disabled||(e[n.name]=o.value)}clear(){this.form.control.reset()}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-form"]],viewQuery:function(n,o){if(n&1&&Ni(vnt,7),n&2){let s;Yt(s=Kt())&&(o.buttons=s.first)}},inputs:{form:"form",formData:"formData",autocomplete:"autocomplete"},outputs:{submitForm:"submitForm"},standalone:!0,features:[Jn,yt],ngContentSelectors:wnt,decls:7,vars:5,consts:[["buttons",""],[3,"ngSubmit","autocomplete","formGroup"],[1,"igo-form-body",3,"ngClass"],[1,"igo-form-content"],[1,"igo-form-buttons"]],template:function(n,o){if(n&1){let s=dt();Qi(bnt),ne(0,"form",1),Oe("ngSubmit",function(){return Re(s),Fe(o.onSubmit())}),ne(1,"div",2)(2,"div",3),pi(3),ce(),ne(4,"div",4,0),pi(6,1),ce()()()}n&2&&(ee("autocomplete",o.autocomplete)("formGroup",o.form.control),q(),ee("ngClass",fo(3,Cnt,o.hasButtons)))},dependencies:[$l,Vy,Ig,uu,th,qr],styles:["[_nghost-%COMP%]{display:block}form[_ngcontent-%COMP%]{width:100%;height:100%}.igo-form-body[_ngcontent-%COMP%], .igo-form-content[_ngcontent-%COMP%]{height:100%}.igo-form-body-with-buttons[_ngcontent-%COMP%]   .igo-form-content[_ngcontent-%COMP%]{height:calc(100% - 56px)}.igo-form-content[_ngcontent-%COMP%]{display:flex}"],changeDetection:0})}return r})();var HSe=(()=>{class r{static fields={};static register(e,n){r.fields[e]=n}getFieldByType(e){return r.fields[e]}static \u0275fac=function(n){return new(n||r)};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function D8(r){return i=>{HSe.register(r,i)}}var Bnt=(()=>{let r=class Fte{disabled$=new mt(!1);set choices(e){this.choices$.next(e)}get choices(){return this.choices$.value}choices$=new mt([]);multiple=!1;formControl;placeholder;errors;disableSwitch=!1;get required(){return E8(this.formControl)}ngOnInit(){this.disabled$.next(this.formControl.disabled)}getErrorMessage(){return M8(this.formControl,this.errors)}onDisableSwitchClick(){this.toggleDisabled()}toggleDisabled(){let e=!this.disabled$.value;e===!0?this.formControl.disable():this.formControl.enable(),this.disabled$.next(e)}static \u0275fac=function(n){return new(n||Fte)};static \u0275cmp=gt({type:Fte,selectors:[["igo-form-field-select"]],inputs:{choices:"choices",multiple:"multiple",formControl:"formControl",placeholder:"placeholder",errors:"errors",disableSwitch:"disableSwitch"},standalone:!0,features:[yt],decls:7,vars:11,consts:[[3,"multiple","required","placeholder","formControl"],[3,"value",4,"ngFor","ngForOf"],["class","igo-form-disable-switch","matPrefix","",3,"click",4,"ngIf"],[4,"ngIf"],[3,"value"],["matPrefix","",1,"igo-form-disable-switch",3,"click"]],template:function(n,o){n&1&&(ne(0,"mat-form-field")(1,"mat-select",0),Ne(2,"translate"),We(3,xnt,2,2,"mat-option",1),Ne(4,"async"),ce(),We(5,Snt,3,3,"mat-icon",2)(6,Int,3,3,"mat-error",3),ce()),n&2&&(q(),ee("multiple",o.multiple)("required",o.required)("placeholder",je(2,7,o.placeholder))("formControl",o.formControl),q(2),ee("ngForOf",je(4,9,o.choices$)),q(2),ee("ngIf",o.disableSwitch===!0),q(),ee("ngIf",o.formControl.errors))},dependencies:[Wa,dc,bx,pA,ah,sh,lc,$l,sc,Ag,uu,gw,Ps,cc,gn,jn,er,kr,On,hn],encapsulation:2,changeDetection:0})};return r=po([D8("select")],r),r})(),jnt=(()=>{let r=class Lte{cdRef;disabled$=new mt(!1);hide=!0;lastTimeoutRequest;formControl;placeholder;isPassword;errors;disableSwitch=!1;get required(){return E8(this.formControl)}constructor(e){this.cdRef=e}ngOnInit(){this.disabled$.next(this.formControl.disabled)}getErrorMessage(){return M8(this.formControl,this.errors)}onDisableSwitchClick(){this.toggleDisabled()}toggleDisabled(){let e=!this.disabled$.value;e===!0?this.formControl.disable():this.formControl.enable(),this.disabled$.next(e)}togglePassword(){this.hide=!this.hide,this.delayedHide()}delayedHide(e=1e4){this.isPassword&&!this.hide&&(this.lastTimeoutRequest&&clearTimeout(this.lastTimeoutRequest),this.lastTimeoutRequest=setTimeout(()=>{this.hide=!0,this.cdRef.detectChanges()},e))}static \u0275fac=function(n){return new(n||Lte)(ie(Ti))};static \u0275cmp=gt({type:Lte,selectors:[["igo-form-field-text"]],inputs:{formControl:"formControl",placeholder:"placeholder",isPassword:"isPassword",errors:"errors",disableSwitch:"disableSwitch"},standalone:!0,features:[yt],decls:6,vars:9,consts:[["matInput","",3,"blur","change","type","required","placeholder","formControl"],["class","igo-form-disable-switch","matPrefix","",3,"click",4,"ngIf"],["type","button","matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],[4,"ngIf"],["matPrefix","",1,"igo-form-disable-switch",3,"click"],["type","button","matSuffix","","mat-icon-button","",3,"click"],["color","primary"]],template:function(n,o){n&1&&(ne(0,"mat-form-field")(1,"input",0),Ne(2,"translate"),Oe("blur",function(){return o.delayedHide(0)})("change",function(){return o.delayedHide()}),ce(),We(3,Tnt,3,3,"mat-icon",1)(4,Ant,3,1,"button",2)(5,Ent,3,3,"mat-error",3),ce()),n&2&&(q(),ee("type",o.isPassword&&o.hide?"password":"text")("required",o.isPassword?"true":o.required)("placeholder",je(2,7,o.placeholder))("formControl",o.formControl),q(2),ee("ngIf",o.disableSwitch===!0),q(),ee("ngIf",o.isPassword),q(),ee("ngIf",o.formControl.errors))},dependencies:[Wa,dc,bx,pA,l_,pu,hu,$l,eh,sc,Ag,uu,gw,gn,jn,er,bn,Cr,kr,On,hn],encapsulation:2,changeDetection:0})};return r=po([D8("text"),xo("design:paramtypes",[Ti])],r),r})(),Vnt=(()=>{let r=class Nte{disabled$=new mt(!1);formControl;placeholder;errors;disableSwitch=!1;get required(){return E8(this.formControl)}ngOnInit(){this.disabled$.next(this.formControl.disabled)}getErrorMessage(){return M8(this.formControl,this.errors)}onDisableSwitchClick(){this.toggleDisabled()}toggleDisabled(){let e=!this.disabled$.value;e===!0?this.formControl.disable():this.formControl.enable(),this.disabled$.next(e)}static \u0275fac=function(n){return new(n||Nte)};static \u0275cmp=gt({type:Nte,selectors:[["igo-form-field-textarea"]],inputs:{formControl:"formControl",placeholder:"placeholder",errors:"errors",disableSwitch:"disableSwitch"},standalone:!0,features:[yt],decls:6,vars:7,consts:[["matInput","",3,"required","placeholder","formControl"],["class","igo-form-disable-switch","matPrefix","",3,"click",4,"ngIf"],[4,"ngIf"],["matPrefix","",1,"igo-form-disable-switch",3,"click"]],template:function(n,o){n&1&&(ne(0,"mat-form-field")(1,"textarea",0),Ne(2,"translate"),Ye(3,"  "),ce(),We(4,Mnt,3,3,"mat-icon",1)(5,Dnt,3,3,"mat-error",2),ce()),n&2&&(q(),ee("required",o.required)("placeholder",je(2,5,o.placeholder))("formControl",o.formControl),q(3),ee("ngIf",o.disableSwitch===!0),q(),ee("ngIf",o.formControl.errors))},dependencies:[Wa,dc,bx,pA,pu,hu,$l,eh,sc,Ag,uu,gw,gn,jn,er,kr,On,hn],encapsulation:2,changeDetection:0})};return r=po([D8("textarea")],r),r})();var WSe=(()=>{class r{formFieldService;field;fieldInputs=void 0;fieldSubscribers=void 0;get fieldOptions(){return this.field.options||{}}constructor(e){this.formFieldService=e}getFieldComponent(){return this.formFieldService.getFieldByType(this.field.type||"text")}getFieldInputs(){if(this.fieldInputs!==void 0)return this.fieldInputs;let e=this.fieldOptions.errors||{};return this.fieldInputs=Object.assign({placeholder:this.field.title,disableSwitch:this.fieldOptions.disableSwitch||!1},Object.assign({},this.field.inputs||{}),{formControl:this.field.control,errors:Object.assign({},Lnt(),e)}),this.fieldInputs}getFieldSubscribers(){return this.fieldSubscribers!==void 0?this.fieldSubscribers:(this.fieldSubscribers=Object.assign({},this.field.subscribers||{}),this.fieldSubscribers)}static \u0275fac=function(n){return new(n||r)(ie(HSe))};static \u0275cmp=gt({type:r,selectors:[["igo-form-field"]],inputs:{field:"field"},standalone:!0,features:[yt],decls:1,vars:1,consts:[[4,"ngIf"],[3,"component","inputs","subscribers"]],template:function(n,o){n&1&&We(0,knt,2,3,"ng-container",0),n&2&&ee("ngIf",o.field!==void 0)},dependencies:[gn,ME],styles:["mat-form-field{width:100%}  .igo-form-disable-switch{margin-right:8px}"],changeDetection:0})}return r})(),$nt=[WSe,Bnt,jnt,Vnt];var Unt=(()=>{class r{group;errors;get formControl(){return this.group.control}getFieldColSpan(e){let n=2,o=e.options||{};return o.cols&&o.cols>0&&(n=Math.min(o.cols,2)),n}getFieldNgClass(e){return{[`igo-form-field-colspan-${this.getFieldColSpan(e)}`]:!0}}getErrorMessage(){let e=this.group.options||{};return M8(this.formControl,e.errors||{})}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-form-group"]],inputs:{group:"group",errors:"errors"},standalone:!0,features:[yt],ngContentSelectors:Ont,decls:4,vars:2,consts:[["class","igo-form-group-fields",4,"ngIf"],[1,"igo-form-group-extra-content"],[4,"ngIf"],[1,"igo-form-group-fields"],["class","igo-form-field-wrapper",3,"ngClass",4,"ngFor","ngForOf"],[1,"igo-form-field-wrapper",3,"ngClass"],[3,"field"]],template:function(n,o){n&1&&(Qi(),We(0,Rnt,2,1,"div",0),ne(1,"div",1),pi(2),ce(),We(3,Fnt,3,3,"mat-error",2)),n&2&&(ee("ngIf",o.group&&o.group.fields.length>0),q(3),ee("ngIf",o.formControl.errors))},dependencies:[gn,Ps,qr,WSe,Wa,bx,On,hn],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block;overflow:auto;padding:10px 5px;box-sizing:border-box}[_nghost-%COMP%]   .igo-form-field-colspan-2[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .igo-form-field-colspan-1[_ngcontent-%COMP%]{width:50%}"],changeDetection:0})}return r})();var FIi=[...$nt,Unt,Bte];var znt=8,Gnt={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Hnt={"*":{type:"source"}},Wnt=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],qnt={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Ynt={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Knt={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Znt={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Qnt={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Xnt={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Jnt={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},ert=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],trt={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},irt={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},nrt={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},rrt={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ort={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},srt={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},art={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},lrt={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},crt={type:"array",value:"*"},drt={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},urt={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},hrt={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},prt={type:"array",value:"*",minimum:1},mrt={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},frt={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},grt={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},_rt={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},yrt=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],vrt={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},brt={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},wrt={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Crt={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},xrt={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Srt={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Irt={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Trt={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Art={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Ert={"*":{type:"string"}},mIe={$version:znt,$root:Gnt,sources:Hnt,source:Wnt,source_vector:qnt,source_raster:Ynt,source_raster_dem:Knt,source_geojson:Znt,source_video:Qnt,source_image:Xnt,layer:Jnt,layout:ert,layout_background:trt,layout_fill:irt,layout_circle:nrt,layout_heatmap:rrt,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:ort,layout_symbol:srt,layout_raster:art,layout_hillshade:lrt,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:crt,filter_operator:drt,geometry_type:urt,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:hrt,expression:prt,light:mrt,sky:frt,terrain:grt,projection:_rt,paint:yrt,paint_fill:vrt,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:brt,paint_circle:wrt,paint_heatmap:Crt,paint_symbol:xrt,paint_raster:Srt,paint_hillshade:Irt,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:Trt,transition:Art,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Ert},Mrt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Drt(r,i){let e={};for(let n in r)n!=="ref"&&(e[n]=r[n]);return Mrt.forEach(n=>{n in i&&(e[n]=i[n])}),e}function fIe(r){r=r.slice();let i=Object.create(null);for(let e=0;e<r.length;e++)i[r[e].id]=r[e];for(let e=0;e<r.length;e++)"ref"in r[e]&&(r[e]=Drt(r[e],i[r[e].ref]));return r}var Fi=class{constructor(i,e,n,o){this.message=(i?`${i}: `:"")+n,o&&(this.identifier=o),e!=null&&e.__line__&&(this.line=e.__line__)}};function L8(r,...i){for(let e of i)for(let n in e)r[n]=e[n];return r}var Bf=class extends Error{constructor(i,e){super(e),this.message=e,this.key=i}},Yte=class r{constructor(i,e=[]){this.parent=i,this.bindings={};for(let[n,o]of e)this.bindings[n]=o}concat(i){return new r(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return this.bindings[i]?!0:this.parent?this.parent.has(i):!1}},e$={kind:"null"},Yi={kind:"number"},Eo={kind:"string"},go={kind:"boolean"},ty={kind:"color"},t$={kind:"projectionDefinition"},sI={kind:"object"},co={kind:"value"},krt={kind:"error"},i$={kind:"collator"},n$={kind:"formatted"},r$={kind:"padding"},_F={kind:"colorArray"},o$={kind:"numberArray"},DF={kind:"resolvedImage"},s$={kind:"variableAnchorOffsetCollection"};function Lm(r,i){return{kind:"array",itemType:r,N:i}}function Fl(r){if(r.kind==="array"){let i=Fl(r.itemType);return typeof r.N=="number"?`array<${i}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${i}>`}else return r.kind}var Ort=[e$,Yi,Eo,go,ty,t$,n$,sI,Lm(co),r$,o$,_F,DF,s$];function yF(r,i){if(i.kind==="error")return null;if(r.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!yF(r.itemType,i.itemType))&&(typeof r.N!="number"||r.N===i.N))return null}else{if(r.kind===i.kind)return null;if(r.kind==="value"){for(let e of Ort)if(!yF(e,i))return null}}return`Expected ${Fl(r)} but found ${Fl(i)} instead.`}function mie(r,i){return i.some(e=>e.kind===r.kind)}function aI(r,i){return i.some(e=>e==="null"?r===null:e==="array"?Array.isArray(r):e==="object"?r&&!Array.isArray(r)&&typeof r=="object":e===typeof r)}function Y1(r,i){return r.kind==="array"&&i.kind==="array"?r.itemType.kind===i.itemType.kind&&typeof r.N=="number":r.kind===i.kind}var gIe=.96422,_Ie=1,yIe=.82521,vIe=4/29,_2=6/29,bIe=3*_2*_2,Prt=_2*_2*_2,Rrt=Math.PI/180,Frt=180/Math.PI;function wIe(r){return r=r%360,r<0&&(r+=360),r}function CIe([r,i,e,n]){r=jte(r),i=jte(i),e=jte(e);let o,s,l=Vte((.2225045*r+.7168786*i+.0606169*e)/_Ie);r===i&&i===e?o=s=l:(o=Vte((.4360747*r+.3850649*i+.1430804*e)/gIe),s=Vte((.0139322*r+.0971045*i+.7141733*e)/yIe));let h=116*l-16;return[h<0?0:h,500*(o-l),200*(l-s),n]}function jte(r){return r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Vte(r){return r>Prt?Math.pow(r,1/3):r/bIe+vIe}function xIe([r,i,e,n]){let o=(r+16)/116,s=isNaN(i)?o:o+i/500,l=isNaN(e)?o:o-e/200;return o=_Ie*Ute(o),s=gIe*Ute(s),l=yIe*Ute(l),[$te(3.1338561*s-1.6168667*o-.4906146*l),$te(-.9787684*s+1.9161415*o+.033454*l),$te(.0719453*s-.2289914*o+1.4052427*l),n]}function $te(r){return r=r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055,r<0?0:r>1?1:r}function Ute(r){return r>_2?r*r*r:bIe*(r-vIe)}function Lrt(r){let[i,e,n,o]=CIe(r),s=Math.sqrt(e*e+n*n);return[Math.round(s*1e4)?wIe(Math.atan2(n,e)*Frt):NaN,s,i,o]}function Nrt([r,i,e,n]){return r=isNaN(r)?0:r*Rrt,xIe([e,Math.cos(r)*i,Math.sin(r)*i,n])}function Brt([r,i,e,n]){r=wIe(r),i/=100,e/=100;function o(s){let l=(s+r/30)%12,h=i*Math.min(e,1-e);return e-h*Math.max(-1,Math.min(l-3,9-l,1))}return[o(0),o(8),o(4),n]}var jrt=Object.hasOwn||function(i,e){return Object.prototype.hasOwnProperty.call(i,e)};function fF(r,i){return jrt(r,i)?r[i]:void 0}function Vrt(r){if(r=r.toLowerCase().trim(),r==="transparent")return[0,0,0,0];let i=fF($rt,r);if(i){let[o,s,l]=i;return[o/255,s/255,l/255,1]}if(r.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(r)){let s=r.length<6?1:2,l=1;return[k8(r.slice(l,l+=s)),k8(r.slice(l,l+=s)),k8(r.slice(l,l+=s)),k8(r.slice(l,l+s)||"ff")]}if(r.startsWith("rgb")){let o=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,s=r.match(o);if(s){let[l,h,p,m,f,g,y,_,w,A,k,R]=s,$=[m||" ",y||" ",A].join("");if($==="  "||$==="  /"||$===",,"||$===",,,"){let H=[p,g,w].join(""),oe=H==="%%%"?100:H===""?255:0;if(oe){let se=[f2(+h/oe,0,1),f2(+f/oe,0,1),f2(+_/oe,0,1),k?qSe(+k,R):1];if(YSe(se))return se}}return}}let e=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,n=r.match(e);if(n){let[o,s,l,h,p,m,f,g,y]=n,_=[l||" ",p||" ",f].join("");if(_==="  "||_==="  /"||_===",,"||_===",,,"){let w=[+s,f2(+h,0,100),f2(+m,0,100),g?qSe(+g,y):1];if(YSe(w))return Brt(w)}}}function k8(r){return parseInt(r.padEnd(2,r),16)/255}function qSe(r,i){return f2(i?r/100:r,0,1)}function f2(r,i,e){return Math.min(Math.max(i,r),e)}function YSe(r){return!r.some(Number.isNaN)}var $rt={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Z1(r,i,e){return r+e*(i-r)}function v2(r,i,e){return r.map((n,o)=>Z1(n,i[o],e))}var qs=class r{constructor(i,e,n,o=1,s=!0){this.r=i,this.g=e,this.b=n,this.a=o,s||(this.r*=o,this.g*=o,this.b*=o,o||this.overwriteGetter("rgb",[i,e,n,o]))}static parse(i){if(i instanceof r)return i;if(typeof i!="string")return;let e=Vrt(i);if(e)return new r(...e,!1)}get rgb(){let{r:i,g:e,b:n,a:o}=this,s=o||1/0;return this.overwriteGetter("rgb",[i/s,e/s,n/s,o])}get hcl(){return this.overwriteGetter("hcl",Lrt(this.rgb))}get lab(){return this.overwriteGetter("lab",CIe(this.rgb))}overwriteGetter(i,e){return Object.defineProperty(this,i,{value:e}),e}toString(){let[i,e,n,o]=this.rgb;return`rgba(${[i,e,n].map(s=>Math.round(s*255)).join(",")},${o})`}static interpolate(i,e,n,o="rgb"){switch(o){case"rgb":{let[s,l,h,p]=v2(i.rgb,e.rgb,n);return new r(s,l,h,p,!1)}case"hcl":{let[s,l,h,p]=i.hcl,[m,f,g,y]=e.hcl,_,w;if(!isNaN(s)&&!isNaN(m)){let H=m-s;m>s&&H>180?H-=360:m<s&&s-m>180&&(H+=360),_=s+n*H}else isNaN(s)?isNaN(m)?_=NaN:(_=m,(h===1||h===0)&&(w=f)):(_=s,(g===1||g===0)&&(w=l));let[A,k,R,$]=Nrt([_,w??Z1(l,f,n),Z1(h,g,n),Z1(p,y,n)]);return new r(A,k,R,$,!1)}case"lab":{let[s,l,h,p]=xIe(v2(i.lab,e.lab,n));return new r(s,l,h,p,!1)}}}};qs.black=new qs(0,0,0,1);qs.white=new qs(1,1,1,1);qs.transparent=new qs(0,0,0,0);qs.red=new qs(1,0,0,1);var vF=class{constructor(i,e,n){i?this.sensitivity=e?"variant":"case":this.sensitivity=e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,e){return this.collator.compare(i,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}},Urt=["bottom","center","top"],bF=class{constructor(i,e,n,o,s,l){this.text=i,this.image=e,this.scale=n,this.fontStack=o,this.textColor=s,this.verticalAlign=l}},lI=class r{constructor(i){this.sections=i}static fromString(i){return new r([new bF(i,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof r?i:r.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}},ab=class r{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof r)return i;if(typeof i=="number")return new r([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(let e of i)if(typeof e!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]];break}return new r(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,e,n){return new r(v2(i.values,e.values,n))}},lb=class r{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof r)return i;if(typeof i=="number")return new r([i]);if(Array.isArray(i)){for(let e of i)if(typeof e!="number")return;return new r(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,e,n){return new r(v2(i.values,e.values,n))}},c0=class r{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof r)return i;if(typeof i=="string"){let n=qs.parse(i);return n?new r([n]):void 0}if(!Array.isArray(i))return;let e=[];for(let n of i){if(typeof n!="string")return;let o=qs.parse(n);if(!o)return;e.push(o)}return new r(e)}toString(){return JSON.stringify(this.values)}static interpolate(i,e,n,o="rgb"){let s=[];if(i.values.length!=e.values.length)throw new Error(`colorArray: Arrays have mismatched length (${i.values.length} vs. ${e.values.length}), cannot interpolate.`);for(let l=0;l<i.values.length;l++)s.push(qs.interpolate(i.values[l],e.values[l],n,o));return new r(s)}},bl=class extends Error{constructor(i){super(i),this.name="RuntimeError"}toJSON(){return this.message}},zrt=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]),cb=class r{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof r)return i;if(!(!Array.isArray(i)||i.length<1||i.length%2!==0)){for(let e=0;e<i.length;e+=2){let n=i[e],o=i[e+1];if(typeof n!="string"||!zrt.has(n)||!Array.isArray(o)||o.length!==2||typeof o[0]!="number"||typeof o[1]!="number")return}return new r(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,e,n){let o=i.values,s=e.values;if(o.length!==s.length)throw new bl(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${e.toString()}`);let l=[];for(let h=0;h<o.length;h+=2){if(o[h]!==s[h])throw new bl(`Cannot interpolate values containing mismatched anchors. from[${h}]: ${o[h]}, to[${h}]: ${s[h]}`);l.push(o[h]);let[p,m]=o[h+1],[f,g]=s[h+1];l.push([Z1(p,f,n),Z1(m,g,n)])}return new r(l)}},Q1=class r{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new r({name:i,available:!1}):null}},cI=class r{constructor(i,e,n){this.from=i,this.to=e,this.transition=n}static interpolate(i,e,n){return new r(i,e,n)}static parse(i){if(i instanceof r)return i;if(Array.isArray(i)&&i.length===3&&typeof i[0]=="string"&&typeof i[1]=="string"&&typeof i[2]=="number")return new r(i[0],i[1],i[2]);if(typeof i=="object"&&typeof i.from=="string"&&typeof i.to=="string"&&typeof i.transition=="number")return new r(i.from,i.to,i.transition);if(typeof i=="string")return new r(i,i,1)}};function SIe(r,i,e,n){return typeof r=="number"&&r>=0&&r<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof e=="number"&&e>=0&&e<=255?typeof n>"u"||typeof n=="number"&&n>=0&&n<=1?null:`Invalid rgba value [${[r,i,e,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof n=="number"?[r,i,e,n]:[r,i,e]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function wF(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof cI||r instanceof qs||r instanceof vF||r instanceof lI||r instanceof ab||r instanceof lb||r instanceof c0||r instanceof cb||r instanceof Q1)return!0;if(Array.isArray(r)){for(let i of r)if(!wF(i))return!1;return!0}else if(typeof r=="object"){for(let i in r)if(!wF(r[i]))return!1;return!0}else return!1}function td(r){if(r===null)return e$;if(typeof r=="string")return Eo;if(typeof r=="boolean")return go;if(typeof r=="number")return Yi;if(r instanceof qs)return ty;if(r instanceof cI)return t$;if(r instanceof vF)return i$;if(r instanceof lI)return n$;if(r instanceof ab)return r$;if(r instanceof lb)return o$;if(r instanceof c0)return _F;if(r instanceof cb)return s$;if(r instanceof Q1)return DF;if(Array.isArray(r)){let i=r.length,e;for(let n of r){let o=td(n);if(!e)e=o;else{if(e===o)continue;e=co;break}}return Lm(e||co,i)}else return sI}function gF(r){let i=typeof r;return r===null?"":i==="string"||i==="number"||i==="boolean"?String(r):r instanceof qs||r instanceof cI||r instanceof lI||r instanceof ab||r instanceof lb||r instanceof c0||r instanceof cb||r instanceof Q1?r.toString():JSON.stringify(r)}var b2=class r{constructor(i,e){this.type=i,this.value=e}static parse(i,e){if(i.length!==2)return e.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!wF(i[1]))return e.error("invalid value");let n=i[1],o=td(n),s=e.expectedType;return o.kind==="array"&&o.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(o=s),new r(o,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}},O8={string:Eo,number:Yi,boolean:go,object:sI},l0=class r{constructor(i,e){this.type=i,this.args=e}static parse(i,e){if(i.length<2)return e.error("Expected at least one argument.");let n=1,o,s=i[0];if(s==="array"){let h;if(i.length>2){let m=i[1];if(typeof m!="string"||!(m in O8)||m==="object")return e.error('The item type argument of "array" must be one of string, number, boolean',1);h=O8[m],n++}else h=co;let p;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return e.error('The length argument to "array" must be a positive integer literal',2);p=i[2],n++}o=Lm(h,p)}else{if(!O8[s])throw new Error(`Types doesn't contain name = ${s}`);o=O8[s]}let l=[];for(;n<i.length;n++){let h=e.parse(i[n],n,co);if(!h)return null;l.push(h)}return new r(o,l)}evaluate(i){for(let e=0;e<this.args.length;e++){let n=this.args[e].evaluate(i);if(yF(this.type,td(n))){if(e===this.args.length-1)throw new bl(`Expected value to be of type ${Fl(this.type)}, but found ${Fl(td(n))} instead.`)}else return n}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}},KSe={"to-boolean":go,"to-color":ty,"to-number":Yi,"to-string":Eo},K1=class r{constructor(i,e){this.type=i,this.args=e}static parse(i,e){if(i.length<2)return e.error("Expected at least one argument.");let n=i[0];if(!KSe[n])throw new Error(`Can't parse ${n} as it is not part of the known types`);if((n==="to-boolean"||n==="to-string")&&i.length!==2)return e.error("Expected one argument.");let o=KSe[n],s=[];for(let l=1;l<i.length;l++){let h=e.parse(i[l],l,co);if(!h)return null;s.push(h)}return new r(o,s)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let e,n;for(let o of this.args){if(e=o.evaluate(i),n=null,e instanceof qs)return e;if(typeof e=="string"){let s=i.parseColor(e);if(s)return s}else if(Array.isArray(e)&&(e.length<3||e.length>4?n=`Invalid rgba value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:n=SIe(e[0],e[1],e[2],e[3]),!n))return new qs(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new bl(n||`Could not parse color from value '${typeof e=="string"?e:JSON.stringify(e)}'`)}case"padding":{let e;for(let n of this.args){e=n.evaluate(i);let o=ab.parse(e);if(o)return o}throw new bl(`Could not parse padding from value '${typeof e=="string"?e:JSON.stringify(e)}'`)}case"numberArray":{let e;for(let n of this.args){e=n.evaluate(i);let o=lb.parse(e);if(o)return o}throw new bl(`Could not parse numberArray from value '${typeof e=="string"?e:JSON.stringify(e)}'`)}case"colorArray":{let e;for(let n of this.args){e=n.evaluate(i);let o=c0.parse(e);if(o)return o}throw new bl(`Could not parse colorArray from value '${typeof e=="string"?e:JSON.stringify(e)}'`)}case"variableAnchorOffsetCollection":{let e;for(let n of this.args){e=n.evaluate(i);let o=cb.parse(e);if(o)return o}throw new bl(`Could not parse variableAnchorOffsetCollection from value '${typeof e=="string"?e:JSON.stringify(e)}'`)}case"number":{let e=null;for(let n of this.args){if(e=n.evaluate(i),e===null)return 0;let o=Number(e);if(!isNaN(o))return o}throw new bl(`Could not convert ${JSON.stringify(e)} to number.`)}case"formatted":return lI.fromString(gF(this.args[0].evaluate(i)));case"resolvedImage":return Q1.fromString(gF(this.args[0].evaluate(i)));case"projectionDefinition":return this.args[0].evaluate(i);default:return gF(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}},Grt=["Unknown","Point","LineString","Polygon"],N8=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Grt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let e=this._parseColorCache.get(i);return e||(e=qs.parse(i),this._parseColorCache.set(i,e)),e}},B8=class r{constructor(i,e,n=[],o,s=new Yte,l=[]){this.registry=i,this.path=n,this.key=n.map(h=>`[${h}]`).join(""),this.scope=s,this.errors=l,this.expectedType=o,this._isConstant=e}parse(i,e,n,o,s={}){return e?this.concat(e,n,o)._parse(i,s):this._parse(i,s)}_parse(i,e){(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number")&&(i=["literal",i]);function n(o,s,l){return l==="assert"?new l0(s,[o]):l==="coerce"?new K1(s,[o]):o}if(Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let o=i[0];if(typeof o!="string")return this.error(`Expression name must be a string, but found ${typeof o} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let s=this.registry[o];if(s){let l=s.parse(i,this);if(!l)return null;if(this.expectedType){let h=this.expectedType,p=l.type;if((h.kind==="string"||h.kind==="number"||h.kind==="boolean"||h.kind==="object"||h.kind==="array")&&p.kind==="value")l=n(l,h,e.typeAnnotation||"assert");else if(h.kind==="projectionDefinition"&&["string","array"].includes(p.kind)||["color","formatted","resolvedImage"].includes(h.kind)&&["value","string"].includes(p.kind)||["padding","numberArray"].includes(h.kind)&&["value","number","array"].includes(p.kind)||h.kind==="colorArray"&&["value","string","array"].includes(p.kind)||h.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(p.kind))l=n(l,h,e.typeAnnotation||"coerce");else if(this.checkSubtype(h,p))return null}if(!(l instanceof b2)&&l.type.kind!=="resolvedImage"&&this._isConstant(l)){let h=new N8;try{l=new b2(l.type,l.evaluate(h))}catch(p){return this.error(p.message),null}}return l}return this.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof i>"u"?this.error("'undefined' value invalid. Use null instead."):typeof i=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof i} instead.`)}concat(i,e,n){let o=typeof i=="number"?this.path.concat(i):this.path,s=n?this.scope.concat(n):this.scope;return new r(this.registry,this._isConstant,o,e||null,s,this.errors)}error(i,...e){let n=`${this.key}${e.map(o=>`[${o}]`).join("")}`;this.errors.push(new Bf(n,i))}checkSubtype(i,e){let n=yF(i,e);return n&&this.error(n),n}},j8=class r{constructor(i,e){this.type=e.type,this.bindings=[].concat(i),this.result=e}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(let e of this.bindings)i(e[1]);i(this.result)}static parse(i,e){if(i.length<4)return e.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);let n=[];for(let s=1;s<i.length-1;s+=2){let l=i[s];if(typeof l!="string")return e.error(`Expected string, but found ${typeof l} instead.`,s);if(/[^a-zA-Z0-9_]/.test(l))return e.error("Variable names must contain only alphanumeric characters or '_'.",s);let h=e.parse(i[s+1],s+1);if(!h)return null;n.push([l,h])}let o=e.parse(i[i.length-1],i.length-1,e.expectedType,n);return o?new r(n,o):null}outputDefined(){return this.result.outputDefined()}},V8=class r{constructor(i,e){this.type=e.type,this.name=i,this.boundExpression=e}static parse(i,e){if(i.length!==2||typeof i[1]!="string")return e.error("'var' expression requires exactly one string literal argument.");let n=i[1];return e.scope.has(n)?new r(n,e.scope.get(n)):e.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}},Kte=class r{constructor(i,e,n){this.type=i,this.index=e,this.input=n}static parse(i,e){if(i.length!==3)return e.error(`Expected 2 arguments, but found ${i.length-1} instead.`);let n=e.parse(i[1],1,Yi),o=e.parse(i[2],2,Lm(e.expectedType||co));if(!n||!o)return null;let s=o.type;return new r(s.itemType,n,o)}evaluate(i){let e=this.index.evaluate(i),n=this.input.evaluate(i);if(e<0)throw new bl(`Array index out of bounds: ${e} < 0.`);if(e>=n.length)throw new bl(`Array index out of bounds: ${e} > ${n.length-1}.`);if(e!==Math.floor(e))throw new bl(`Array index must be an integer, but found ${e} instead.`);return n[e]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}},Zte=class r{constructor(i,e){this.type=go,this.needle=i,this.haystack=e}static parse(i,e){if(i.length!==3)return e.error(`Expected 2 arguments, but found ${i.length-1} instead.`);let n=e.parse(i[1],1,co),o=e.parse(i[2],2,co);return!n||!o?null:mie(n.type,[go,Eo,Yi,e$,co])?new r(n,o):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Fl(n.type)} instead`)}evaluate(i){let e=this.needle.evaluate(i),n=this.haystack.evaluate(i);if(!n)return!1;if(!aI(e,["boolean","string","number","null"]))throw new bl(`Expected first argument to be of type boolean, string, number or null, but found ${Fl(td(e))} instead.`);if(!aI(n,["string","array"]))throw new bl(`Expected second argument to be of type array or string, but found ${Fl(td(n))} instead.`);return n.indexOf(e)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}},Qte=class r{constructor(i,e,n){this.type=Yi,this.needle=i,this.haystack=e,this.fromIndex=n}static parse(i,e){if(i.length<=2||i.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);let n=e.parse(i[1],1,co),o=e.parse(i[2],2,co);if(!n||!o)return null;if(!mie(n.type,[go,Eo,Yi,e$,co]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Fl(n.type)} instead`);if(i.length===4){let s=e.parse(i[3],3,Yi);return s?new r(n,o,s):null}else return new r(n,o)}evaluate(i){let e=this.needle.evaluate(i),n=this.haystack.evaluate(i);if(!aI(e,["boolean","string","number","null"]))throw new bl(`Expected first argument to be of type boolean, string, number or null, but found ${Fl(td(e))} instead.`);let o;if(this.fromIndex&&(o=this.fromIndex.evaluate(i)),aI(n,["string"])){let s=n.indexOf(e,o);return s===-1?-1:[...n.slice(0,s)].length}else{if(aI(n,["array"]))return n.indexOf(e,o);throw new bl(`Expected second argument to be of type array or string, but found ${Fl(td(n))} instead.`)}}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}},Xte=class r{constructor(i,e,n,o,s,l){this.inputType=i,this.type=e,this.input=n,this.cases=o,this.outputs=s,this.otherwise=l}static parse(i,e){if(i.length<5)return e.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!==1)return e.error("Expected an even number of arguments.");let n,o;e.expectedType&&e.expectedType.kind!=="value"&&(o=e.expectedType);let s={},l=[];for(let m=2;m<i.length-1;m+=2){let f=i[m],g=i[m+1];Array.isArray(f)||(f=[f]);let y=e.concat(m);if(f.length===0)return y.error("Expected at least one branch label.");for(let w of f){if(typeof w!="number"&&typeof w!="string")return y.error("Branch labels must be numbers or strings.");if(typeof w=="number"&&Math.abs(w)>Number.MAX_SAFE_INTEGER)return y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof w=="number"&&Math.floor(w)!==w)return y.error("Numeric branch labels must be integer values.");if(!n)n=td(w);else if(y.checkSubtype(n,td(w)))return null;if(typeof s[String(w)]<"u")return y.error("Branch labels must be unique.");s[String(w)]=l.length}let _=e.parse(g,m,o);if(!_)return null;o=o||_.type,l.push(_)}let h=e.parse(i[1],1,co);if(!h)return null;let p=e.parse(i[i.length-1],i.length-1,o);return!p||h.type.kind!=="value"&&e.concat(1).checkSubtype(n,h.type)?null:new r(n,o,h,s,l,p)}evaluate(i){let e=this.input.evaluate(i);return(td(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}},Jte=class r{constructor(i,e,n){this.type=i,this.branches=e,this.otherwise=n}static parse(i,e){if(i.length<4)return e.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!==0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&e.expectedType.kind!=="value"&&(n=e.expectedType);let o=[];for(let l=1;l<i.length-1;l+=2){let h=e.parse(i[l],l,go);if(!h)return null;let p=e.parse(i[l+1],l+1,n);if(!p)return null;o.push([h,p]),n=n||p.type}let s=e.parse(i[i.length-1],i.length-1,n);if(!s)return null;if(!n)throw new Error("Can't infer output type");return new r(n,o,s)}evaluate(i){for(let[e,n]of this.branches)if(e.evaluate(i))return n.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(let[e,n]of this.branches)i(e),i(n);i(this.otherwise)}outputDefined(){return this.branches.every(([i,e])=>e.outputDefined())&&this.otherwise.outputDefined()}},eie=class r{constructor(i,e,n,o){this.type=i,this.input=e,this.beginIndex=n,this.endIndex=o}static parse(i,e){if(i.length<=2||i.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);let n=e.parse(i[1],1,co),o=e.parse(i[2],2,Yi);if(!n||!o)return null;if(!mie(n.type,[Lm(co),Eo,co]))return e.error(`Expected first argument to be of type array or string, but found ${Fl(n.type)} instead`);if(i.length===4){let s=e.parse(i[3],3,Yi);return s?new r(n.type,n,o,s):null}else return new r(n.type,n,o)}evaluate(i){let e=this.input.evaluate(i),n=this.beginIndex.evaluate(i),o;if(this.endIndex&&(o=this.endIndex.evaluate(i)),aI(e,["string"]))return[...e].slice(n,o).join("");if(aI(e,["array"]))return e.slice(n,o);throw new bl(`Expected first argument to be of type array or string, but found ${Fl(td(e))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}};function IIe(r,i){let e=r.length-1,n=0,o=e,s=0,l,h;for(;n<=o;)if(s=Math.floor((n+o)/2),l=r[s],h=r[s+1],l<=i){if(s===e||i<h)return s;n=s+1}else if(l>i)o=s-1;else throw new bl("Input is not a number.");return 0}var $8=class r{constructor(i,e,n){this.type=i,this.input=e,this.labels=[],this.outputs=[];for(let[o,s]of n)this.labels.push(o),this.outputs.push(s)}static parse(i,e){if(i.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!==0)return e.error("Expected an even number of arguments.");let n=e.parse(i[1],1,Yi);if(!n)return null;let o=[],s=null;e.expectedType&&e.expectedType.kind!=="value"&&(s=e.expectedType);for(let l=1;l<i.length;l+=2){let h=l===1?-1/0:i[l],p=i[l+1],m=l,f=l+1;if(typeof h!="number")return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',m);if(o.length&&o[o.length-1][0]>=h)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',m);let g=e.parse(p,f,s);if(!g)return null;s=s||g.type,o.push([h,g])}return new r(s,n,o)}evaluate(i){let e=this.labels,n=this.outputs;if(e.length===1)return n[0].evaluate(i);let o=this.input.evaluate(i);if(o<=e[0])return n[0].evaluate(i);let s=e.length;if(o>=e[s-1])return n[s-1].evaluate(i);let l=IIe(e,o);return n[l].evaluate(i)}eachChild(i){i(this.input);for(let e of this.outputs)i(e)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}};function Hrt(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var zte,ZSe;function Wrt(){if(ZSe)return zte;ZSe=1,zte=r;function r(i,e,n,o){this.cx=3*i,this.bx=3*(n-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(o-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=e,this.p2x=n,this.p2y=o}return r.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,e){if(e===void 0&&(e=1e-6),i<0)return 0;if(i>1)return 1;for(var n=i,o=0;o<8;o++){var s=this.sampleCurveX(n)-i;if(Math.abs(s)<e)return n;var l=this.sampleCurveDerivativeX(n);if(Math.abs(l)<1e-6)break;n=n-s/l}var h=0,p=1;for(n=i,o=0;o<20&&(s=this.sampleCurveX(n),!(Math.abs(s-i)<e));o++)i>s?h=n:p=n,n=(p-h)*.5+h;return n},solve:function(i,e){return this.sampleCurveY(this.solveCurveX(i,e))}},zte}var qrt=Wrt(),Yrt=Hrt(qrt),sb=class r{constructor(i,e,n,o,s){this.type=i,this.operator=e,this.interpolation=n,this.input=o,this.labels=[],this.outputs=[];for(let[l,h]of s)this.labels.push(l),this.outputs.push(h)}static interpolationFactor(i,e,n,o){let s=0;if(i.name==="exponential")s=Gte(e,i.base,n,o);else if(i.name==="linear")s=Gte(e,1,n,o);else if(i.name==="cubic-bezier"){let l=i.controlPoints;s=new Yrt(l[0],l[1],l[2],l[3]).solve(Gte(e,1,n,o))}return s}static parse(i,e){let[n,o,s,...l]=i;if(!Array.isArray(o)||o.length===0)return e.error("Expected an interpolation type expression.",1);if(o[0]==="linear")o={name:"linear"};else if(o[0]==="exponential"){let m=o[1];if(typeof m!="number")return e.error("Exponential interpolation requires a numeric base.",1,1);o={name:"exponential",base:m}}else if(o[0]==="cubic-bezier"){let m=o.slice(1);if(m.length!==4||m.some(f=>typeof f!="number"||f<0||f>1))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);o={name:"cubic-bezier",controlPoints:m}}else return e.error(`Unknown interpolation type ${String(o[0])}`,1,0);if(i.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!==0)return e.error("Expected an even number of arguments.");if(s=e.parse(s,2,Yi),!s)return null;let h=[],p=null;(n==="interpolate-hcl"||n==="interpolate-lab")&&e.expectedType!=_F?p=ty:e.expectedType&&e.expectedType.kind!=="value"&&(p=e.expectedType);for(let m=0;m<l.length;m+=2){let f=l[m],g=l[m+1],y=m+3,_=m+4;if(typeof f!="number")return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',y);if(h.length&&h[h.length-1][0]>=f)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',y);let w=e.parse(g,_,p);if(!w)return null;p=p||w.type,h.push([f,w])}return!Y1(p,Yi)&&!Y1(p,t$)&&!Y1(p,ty)&&!Y1(p,r$)&&!Y1(p,o$)&&!Y1(p,_F)&&!Y1(p,s$)&&!Y1(p,Lm(Yi))?e.error(`Type ${Fl(p)} is not interpolatable.`):new r(p,n,o,s,h)}evaluate(i){let e=this.labels,n=this.outputs;if(e.length===1)return n[0].evaluate(i);let o=this.input.evaluate(i);if(o<=e[0])return n[0].evaluate(i);let s=e.length;if(o>=e[s-1])return n[s-1].evaluate(i);let l=IIe(e,o),h=e[l],p=e[l+1],m=r.interpolationFactor(this.interpolation,o,h,p),f=n[l].evaluate(i),g=n[l+1].evaluate(i);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Z1(f,g,m);case"color":return qs.interpolate(f,g,m);case"padding":return ab.interpolate(f,g,m);case"colorArray":return c0.interpolate(f,g,m);case"numberArray":return lb.interpolate(f,g,m);case"variableAnchorOffsetCollection":return cb.interpolate(f,g,m);case"array":return v2(f,g,m);case"projectionDefinition":return cI.interpolate(f,g,m)}case"interpolate-hcl":switch(this.type.kind){case"color":return qs.interpolate(f,g,m,"hcl");case"colorArray":return c0.interpolate(f,g,m,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return qs.interpolate(f,g,m,"lab");case"colorArray":return c0.interpolate(f,g,m,"lab")}}}eachChild(i){i(this.input);for(let e of this.outputs)i(e)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}};function Gte(r,i,e,n){let o=n-e,s=r-e;return o===0?0:i===1?s/o:(Math.pow(i,s)-1)/(Math.pow(i,o)-1)}var BIi={color:qs.interpolate,number:Z1,padding:ab.interpolate,numberArray:lb.interpolate,colorArray:c0.interpolate,variableAnchorOffsetCollection:cb.interpolate,array:v2},U8=class r{constructor(i,e){this.type=i,this.args=e}static parse(i,e){if(i.length<2)return e.error("Expected at least one argument.");let n=null,o=e.expectedType;o&&o.kind!=="value"&&(n=o);let s=[];for(let h of i.slice(1)){let p=e.parse(h,1+s.length,n,void 0,{typeAnnotation:"omit"});if(!p)return null;n=n||p.type,s.push(p)}if(!n)throw new Error("No output type");return o&&s.some(h=>yF(o,h.type))?new r(co,s):new r(n,s)}evaluate(i){let e=null,n=0,o;for(let s of this.args)if(n++,e=s.evaluate(i),e&&e instanceof Q1&&!e.available&&(o||(o=e.name),e=null,n===this.args.length&&(e=o)),e!==null)break;return e}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}};function QSe(r,i){return r==="=="||r==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Krt(r,i,e){return i===e}function Zrt(r,i,e){return i!==e}function Qrt(r,i,e){return i<e}function Xrt(r,i,e){return i>e}function Jrt(r,i,e){return i<=e}function eot(r,i,e){return i>=e}function TIe(r,i,e,n){return n.compare(i,e)===0}function tot(r,i,e,n){return!TIe(r,i,e,n)}function iot(r,i,e,n){return n.compare(i,e)<0}function not(r,i,e,n){return n.compare(i,e)>0}function rot(r,i,e,n){return n.compare(i,e)<=0}function oot(r,i,e,n){return n.compare(i,e)>=0}function C2(r,i,e){let n=r!=="=="&&r!=="!=";return class AIe{constructor(s,l,h){this.type=go,this.lhs=s,this.rhs=l,this.collator=h,this.hasUntypedArgument=s.type.kind==="value"||l.type.kind==="value"}static parse(s,l){if(s.length!==3&&s.length!==4)return l.error("Expected two or three arguments.");let h=s[0],p=l.parse(s[1],1,co);if(!p)return null;if(!QSe(h,p.type))return l.concat(1).error(`"${h}" comparisons are not supported for type '${Fl(p.type)}'.`);let m=l.parse(s[2],2,co);if(!m)return null;if(!QSe(h,m.type))return l.concat(2).error(`"${h}" comparisons are not supported for type '${Fl(m.type)}'.`);if(p.type.kind!==m.type.kind&&p.type.kind!=="value"&&m.type.kind!=="value")return l.error(`Cannot compare types '${Fl(p.type)}' and '${Fl(m.type)}'.`);n&&(p.type.kind==="value"&&m.type.kind!=="value"?p=new l0(m.type,[p]):p.type.kind!=="value"&&m.type.kind==="value"&&(m=new l0(p.type,[m])));let f=null;if(s.length===4){if(p.type.kind!=="string"&&m.type.kind!=="string"&&p.type.kind!=="value"&&m.type.kind!=="value")return l.error("Cannot use collator to compare non-string types.");if(f=l.parse(s[3],3,i$),!f)return null}return new AIe(p,m,f)}evaluate(s){let l=this.lhs.evaluate(s),h=this.rhs.evaluate(s);if(n&&this.hasUntypedArgument){let p=td(l),m=td(h);if(p.kind!==m.kind||!(p.kind==="string"||p.kind==="number"))throw new bl(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${p.kind}, ${m.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){let p=td(l),m=td(h);if(p.kind!=="string"||m.kind!=="string")return i(s,l,h)}return this.collator?e(s,l,h,this.collator.evaluate(s)):i(s,l,h)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}}}var sot=C2("==",Krt,TIe),aot=C2("!=",Zrt,tot),lot=C2("<",Qrt,iot),cot=C2(">",Xrt,not),dot=C2("<=",Jrt,rot),uot=C2(">=",eot,oot),z8=class r{constructor(i,e,n){this.type=i$,this.locale=n,this.caseSensitive=i,this.diacriticSensitive=e}static parse(i,e){if(i.length!==2)return e.error("Expected one argument.");let n=i[1];if(typeof n!="object"||Array.isArray(n))return e.error("Collator options argument must be an object.");let o=e.parse(n["case-sensitive"]===void 0?!1:n["case-sensitive"],1,go);if(!o)return null;let s=e.parse(n["diacritic-sensitive"]===void 0?!1:n["diacritic-sensitive"],1,go);if(!s)return null;let l=null;return n.locale&&(l=e.parse(n.locale,1,Eo),!l)?null:new r(o,s,l)}evaluate(i){return new vF(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}},tie=class r{constructor(i,e,n,o,s){this.type=Eo,this.number=i,this.locale=e,this.currency=n,this.minFractionDigits=o,this.maxFractionDigits=s}static parse(i,e){if(i.length!==3)return e.error("Expected two arguments.");let n=e.parse(i[1],1,Yi);if(!n)return null;let o=i[2];if(typeof o!="object"||Array.isArray(o))return e.error("NumberFormat options argument must be an object.");let s=null;if(o.locale&&(s=e.parse(o.locale,1,Eo),!s))return null;let l=null;if(o.currency&&(l=e.parse(o.currency,1,Eo),!l))return null;let h=null;if(o["min-fraction-digits"]&&(h=e.parse(o["min-fraction-digits"],1,Yi),!h))return null;let p=null;return o["max-fraction-digits"]&&(p=e.parse(o["max-fraction-digits"],1,Yi),!p)?null:new r(n,s,l,h,p)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}},iie=class r{constructor(i){this.type=n$,this.sections=i}static parse(i,e){if(i.length<2)return e.error("Expected at least one argument.");let n=i[1];if(!Array.isArray(n)&&typeof n=="object")return e.error("First argument must be an image or text section.");let o=[],s=!1;for(let l=1;l<=i.length-1;++l){let h=i[l];if(s&&typeof h=="object"&&!Array.isArray(h)){s=!1;let p=null;if(h["font-scale"]&&(p=e.parse(h["font-scale"],1,Yi),!p))return null;let m=null;if(h["text-font"]&&(m=e.parse(h["text-font"],1,Lm(Eo)),!m))return null;let f=null;if(h["text-color"]&&(f=e.parse(h["text-color"],1,ty),!f))return null;let g=null;if(h["vertical-align"]){if(typeof h["vertical-align"]=="string"&&!Urt.includes(h["vertical-align"]))return e.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${h["vertical-align"]}' instead.`);if(g=e.parse(h["vertical-align"],1,Eo),!g)return null}let y=o[o.length-1];y.scale=p,y.font=m,y.textColor=f,y.verticalAlign=g}else{let p=e.parse(i[l],1,co);if(!p)return null;let m=p.type.kind;if(m!=="string"&&m!=="value"&&m!=="null"&&m!=="resolvedImage")return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,o.push({content:p,scale:null,font:null,textColor:null,verticalAlign:null})}}return new r(o)}evaluate(i){let e=n=>{let o=n.content.evaluate(i);return td(o)===DF?new bF("",o,null,null,null,n.verticalAlign?n.verticalAlign.evaluate(i):null):new bF(gF(o),null,n.scale?n.scale.evaluate(i):null,n.font?n.font.evaluate(i).join(","):null,n.textColor?n.textColor.evaluate(i):null,n.verticalAlign?n.verticalAlign.evaluate(i):null)};return new lI(this.sections.map(e))}eachChild(i){for(let e of this.sections)i(e.content),e.scale&&i(e.scale),e.font&&i(e.font),e.textColor&&i(e.textColor),e.verticalAlign&&i(e.verticalAlign)}outputDefined(){return!1}},nie=class r{constructor(i){this.type=DF,this.input=i}static parse(i,e){if(i.length!==2)return e.error("Expected two arguments.");let n=e.parse(i[1],1,Eo);return n?new r(n):e.error("No image name provided.")}evaluate(i){let e=this.input.evaluate(i),n=Q1.fromString(e);return n&&i.availableImages&&(n.available=i.availableImages.indexOf(e)>-1),n}eachChild(i){i(this.input)}outputDefined(){return!1}},rie=class r{constructor(i){this.type=Yi,this.input=i}static parse(i,e){if(i.length!==2)return e.error(`Expected 1 argument, but found ${i.length-1} instead.`);let n=e.parse(i[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?e.error(`Expected argument of type string or array, but found ${Fl(n.type)} instead.`):new r(n):null}evaluate(i){let e=this.input.evaluate(i);if(typeof e=="string")return[...e].length;if(Array.isArray(e))return e.length;throw new bl(`Expected value to be of type string or array, but found ${Fl(td(e))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}},iy=8192;function hot(r,i){let e=pot(r[0]),n=fot(r[1]),o=Math.pow(2,i.z);return[Math.round(e*o*iy),Math.round(n*o*iy)]}function fie(r,i){let e=Math.pow(2,i.z),n=(r[0]/iy+i.x)/e,o=(r[1]/iy+i.y)/e;return[mot(n),got(o)]}function pot(r){return(180+r)/360}function mot(r){return r*360-180}function fot(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function got(r){return 360/Math.PI*Math.atan(Math.exp((180-r*360)*Math.PI/180))-90}function kF(r,i){r[0]=Math.min(r[0],i[0]),r[1]=Math.min(r[1],i[1]),r[2]=Math.max(r[2],i[0]),r[3]=Math.max(r[3],i[1])}function CF(r,i){return!(r[0]<=i[0]||r[2]>=i[2]||r[1]<=i[1]||r[3]>=i[3])}function _ot(r,i,e){return i[1]>r[1]!=e[1]>r[1]&&r[0]<(e[0]-i[0])*(r[1]-i[1])/(e[1]-i[1])+i[0]}function yot(r,i,e){let n=r[0]-i[0],o=r[1]-i[1],s=r[0]-e[0],l=r[1]-e[1];return n*l-s*o===0&&n*s<=0&&o*l<=0}function a$(r,i,e,n){let o=[i[0]-r[0],i[1]-r[1]],s=[n[0]-e[0],n[1]-e[1]];return Cot(s,o)===0?!1:!!(XSe(r,i,e,n)&&XSe(e,n,r,i))}function vot(r,i,e){for(let n of e)for(let o=0;o<n.length-1;++o)if(a$(r,i,n[o],n[o+1]))return!0;return!1}function x2(r,i,e=!1){let n=!1;for(let o of i)for(let s=0;s<o.length-1;s++){if(yot(r,o[s],o[s+1]))return e;_ot(r,o[s],o[s+1])&&(n=!n)}return n}function bot(r,i){for(let e of i)if(x2(r,e))return!0;return!1}function EIe(r,i){for(let e of r)if(!x2(e,i))return!1;for(let e=0;e<r.length-1;++e)if(vot(r[e],r[e+1],i))return!1;return!0}function wot(r,i){for(let e of i)if(EIe(r,e))return!0;return!1}function Cot(r,i){return r[0]*i[1]-r[1]*i[0]}function XSe(r,i,e,n){let o=r[0]-e[0],s=r[1]-e[1],l=i[0]-e[0],h=i[1]-e[1],p=n[0]-e[0],m=n[1]-e[1],f=o*m-p*s,g=l*m-p*h;return f>0&&g<0||f<0&&g>0}function gie(r,i,e){let n=[];for(let o=0;o<r.length;o++){let s=[];for(let l=0;l<r[o].length;l++){let h=hot(r[o][l],e);kF(i,h),s.push(h)}n.push(s)}return n}function MIe(r,i,e){let n=[];for(let o=0;o<r.length;o++){let s=gie(r[o],i,e);n.push(s)}return n}function DIe(r,i,e,n){if(r[0]<e[0]||r[0]>e[2]){let o=n*.5,s=r[0]-e[0]>o?-n:e[0]-r[0]>o?n:0;s===0&&(s=r[0]-e[2]>o?-n:e[2]-r[0]>o?n:0),r[0]+=s}kF(i,r)}function xot(r){r[0]=r[1]=1/0,r[2]=r[3]=-1/0}function JSe(r,i,e,n){let o=Math.pow(2,n.z)*iy,s=[n.x*iy,n.y*iy],l=[];for(let h of r)for(let p of h){let m=[p.x+s[0],p.y+s[1]];DIe(m,i,e,o),l.push(m)}return l}function eIe(r,i,e,n){let o=Math.pow(2,n.z)*iy,s=[n.x*iy,n.y*iy],l=[];for(let h of r){let p=[];for(let m of h){let f=[m.x+s[0],m.y+s[1]];kF(i,f),p.push(f)}l.push(p)}if(i[2]-i[0]<=o/2){xot(i);for(let h of l)for(let p of h)DIe(p,i,e,o)}return l}function Sot(r,i){let e=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],o=r.canonicalID();if(i.type==="Polygon"){let s=gie(i.coordinates,n,o),l=JSe(r.geometry(),e,n,o);if(!CF(e,n))return!1;for(let h of l)if(!x2(h,s))return!1}if(i.type==="MultiPolygon"){let s=MIe(i.coordinates,n,o),l=JSe(r.geometry(),e,n,o);if(!CF(e,n))return!1;for(let h of l)if(!bot(h,s))return!1}return!0}function Iot(r,i){let e=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],o=r.canonicalID();if(i.type==="Polygon"){let s=gie(i.coordinates,n,o),l=eIe(r.geometry(),e,n,o);if(!CF(e,n))return!1;for(let h of l)if(!EIe(h,s))return!1}if(i.type==="MultiPolygon"){let s=MIe(i.coordinates,n,o),l=eIe(r.geometry(),e,n,o);if(!CF(e,n))return!1;for(let h of l)if(!wot(h,s))return!1}return!0}var xF=class r{constructor(i,e){this.type=go,this.geojson=i,this.geometries=e}static parse(i,e){if(i.length!==2)return e.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(wF(i[1])){let n=i[1];if(n.type==="FeatureCollection"){let o=[];for(let s of n.features){let{type:l,coordinates:h}=s.geometry;l==="Polygon"&&o.push(h),l==="MultiPolygon"&&o.push(...h)}if(o.length){let s={type:"MultiPolygon",coordinates:o};return new r(n,s)}}else if(n.type==="Feature"){let o=n.geometry.type;if(o==="Polygon"||o==="MultiPolygon")return new r(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new r(n,n)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return Sot(i,this.geometries);if(i.geometryType()==="LineString")return Iot(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}},G8=class{constructor(i=[],e=(n,o)=>n<o?-1:n>o?1:0){if(this.data=i,this.length=this.data.length,this.compare=e,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;let i=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),i}peek(){return this.data[0]}_up(i){let{data:e,compare:n}=this,o=e[i];for(;i>0;){let s=i-1>>1,l=e[s];if(n(o,l)>=0)break;e[i]=l,i=s}e[i]=o}_down(i){let{data:e,compare:n}=this,o=this.length>>1,s=e[i];for(;i<o;){let l=(i<<1)+1,h=l+1;if(h<this.length&&n(e[h],e[l])<0&&(l=h),n(e[l],s)>=0)break;e[i]=e[l],i=l}e[i]=s}};function kIe(r,i,e=0,n=r.length-1,o=Tot){for(;n>e;){if(n-e>600){let p=n-e+1,m=i-e+1,f=Math.log(p),g=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*g*(p-g)/p)*(m-p/2<0?-1:1),_=Math.max(e,Math.floor(i-m*g/p+y)),w=Math.min(n,Math.floor(i+(p-m)*g/p+y));kIe(r,i,_,w,o)}let s=r[i],l=e,h=n;for(mF(r,e,i),o(r[n],s)>0&&mF(r,e,n);l<h;){for(mF(r,l,h),l++,h--;o(r[l],s)<0;)l++;for(;o(r[h],s)>0;)h--}o(r[e],s)===0?mF(r,e,h):(h++,mF(r,h,n)),h<=i&&(e=h+1),i<=h&&(n=h-1)}}function mF(r,i,e){let n=r[i];r[i]=r[e],r[e]=n}function Tot(r,i){return r<i?-1:r>i?1:0}function Aot(r,i){if(r.length<=1)return[r];let n=[],o,s;for(let l of r){let h=Mot(l);h!==0&&(l.area=Math.abs(h),s===void 0&&(s=h<0),s===h<0?(o&&n.push(o),o=[l]):o.push(l))}if(o&&n.push(o),i>1)for(let l=0;l<n.length;l++)n[l].length<=i||(kIe(n[l],i,1,n[l].length-1,Eot),n[l]=n[l].slice(0,i));return n}function Eot(r,i){return i.area-r.area}function Mot(r){let i=0;for(let e=0,n=r.length,o=n-1,s,l;e<n;o=e++)s=r[e],l=r[o],i+=(l.x-s.x)*(s.y+l.y);return i}var Dot=6378.137,tIe=1/298.257223563,iIe=tIe*(2-tIe),nIe=Math.PI/180,SF=class{constructor(i){let e=nIe*Dot*1e3,n=Math.cos(i*nIe),o=1/(1-iIe*(1-n*n)),s=Math.sqrt(o);this.kx=e*s*n,this.ky=e*s*o*(1-iIe)}distance(i,e){let n=this.wrap(i[0]-e[0])*this.kx,o=(i[1]-e[1])*this.ky;return Math.sqrt(n*n+o*o)}pointOnLine(i,e){let n=1/0,o,s,l,h;for(let p=0;p<i.length-1;p++){let m=i[p][0],f=i[p][1],g=this.wrap(i[p+1][0]-m)*this.kx,y=(i[p+1][1]-f)*this.ky,_=0;(g!==0||y!==0)&&(_=(this.wrap(e[0]-m)*this.kx*g+(e[1]-f)*this.ky*y)/(g*g+y*y),_>1?(m=i[p+1][0],f=i[p+1][1]):_>0&&(m+=g/this.kx*_,f+=y/this.ky*_)),g=this.wrap(e[0]-m)*this.kx,y=(e[1]-f)*this.ky;let w=g*g+y*y;w<n&&(n=w,o=m,s=f,l=p,h=_)}return{point:[o,s],index:l,t:Math.max(0,Math.min(1,h))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}},oie=100,sie=50;function OIe(r,i){return i[0]-r[0]}function H8(r){return r[1]-r[0]+1}function db(r,i){return r[1]>=r[0]&&r[1]<i}function aie(r,i){if(r[0]>r[1])return[null,null];let e=H8(r);if(i){if(e===2)return[r,null];let o=Math.floor(e/2);return[[r[0],r[0]+o],[r[0]+o,r[1]]]}if(e===1)return[r,null];let n=Math.floor(e/2)-1;return[[r[0],r[0]+n],[r[0]+n+1,r[1]]]}function lie(r,i){if(!db(i,r.length))return[1/0,1/0,-1/0,-1/0];let e=[1/0,1/0,-1/0,-1/0];for(let n=i[0];n<=i[1];++n)kF(e,r[n]);return e}function cie(r){let i=[1/0,1/0,-1/0,-1/0];for(let e of r)for(let n of e)kF(i,n);return i}function rIe(r){return r[0]!==-1/0&&r[1]!==-1/0&&r[2]!==1/0&&r[3]!==1/0}function _ie(r,i,e){if(!rIe(r)||!rIe(i))return NaN;let n=0,o=0;return r[2]<i[0]&&(n=i[0]-r[2]),r[0]>i[2]&&(n=r[0]-i[2]),r[1]>i[3]&&(o=r[1]-i[3]),r[3]<i[1]&&(o=i[1]-r[3]),e.distance([0,0],[n,o])}function oI(r,i,e){let n=e.pointOnLine(i,r);return e.distance(r,n.point)}function yie(r,i,e,n,o){let s=Math.min(oI(r,[e,n],o),oI(i,[e,n],o)),l=Math.min(oI(e,[r,i],o),oI(n,[r,i],o));return Math.min(s,l)}function kot(r,i,e,n,o){if(!(db(i,r.length)&&db(n,e.length)))return 1/0;let l=1/0;for(let h=i[0];h<i[1];++h){let p=r[h],m=r[h+1];for(let f=n[0];f<n[1];++f){let g=e[f],y=e[f+1];if(a$(p,m,g,y))return 0;l=Math.min(l,yie(p,m,g,y,o))}}return l}function Oot(r,i,e,n,o){if(!(db(i,r.length)&&db(n,e.length)))return NaN;let l=1/0;for(let h=i[0];h<=i[1];++h)for(let p=n[0];p<=n[1];++p)if(l=Math.min(l,o.distance(r[h],e[p])),l===0)return l;return l}function Pot(r,i,e){if(x2(r,i,!0))return 0;let n=1/0;for(let o of i){let s=o[0],l=o[o.length-1];if(s!==l&&(n=Math.min(n,oI(r,[l,s],e)),n===0))return n;let h=e.pointOnLine(o,r);if(n=Math.min(n,e.distance(r,h.point)),n===0)return n}return n}function Rot(r,i,e,n){if(!db(i,r.length))return NaN;for(let s=i[0];s<=i[1];++s)if(x2(r[s],e,!0))return 0;let o=1/0;for(let s=i[0];s<i[1];++s){let l=r[s],h=r[s+1];for(let p of e)for(let m=0,f=p.length,g=f-1;m<f;g=m++){let y=p[g],_=p[m];if(a$(l,h,y,_))return 0;o=Math.min(o,yie(l,h,y,_,n))}}return o}function oIe(r,i){for(let e of r)for(let n of e)if(x2(n,i,!0))return!0;return!1}function Fot(r,i,e,n=1/0){let o=cie(r),s=cie(i);if(n!==1/0&&_ie(o,s,e)>=n)return n;if(CF(o,s)){if(oIe(r,i))return 0}else if(oIe(i,r))return 0;let l=1/0;for(let h of r)for(let p=0,m=h.length,f=m-1;p<m;f=p++){let g=h[f],y=h[p];for(let _ of i)for(let w=0,A=_.length,k=A-1;w<A;k=w++){let R=_[k],$=_[w];if(a$(g,y,R,$))return 0;l=Math.min(l,yie(g,y,R,$,e))}}return l}function sIe(r,i,e,n,o,s){if(!s)return;let l=_ie(lie(n,s),o,e);l<i&&r.push([l,s,[0,0]])}function P8(r,i,e,n,o,s,l){if(!s||!l)return;let h=_ie(lie(n,s),lie(o,l),e);h<i&&r.push([h,s,l])}function W8(r,i,e,n,o=1/0){let s=Math.min(n.distance(r[0],e[0][0]),o);if(s===0)return s;let l=new G8([[0,[0,r.length-1],[0,0]]],OIe),h=cie(e);for(;l.length>0;){let p=l.pop();if(p[0]>=s)continue;let m=p[1],f=i?sie:oie;if(H8(m)<=f){if(!db(m,r.length))return NaN;if(i){let g=Rot(r,m,e,n);if(isNaN(g)||g===0)return g;s=Math.min(s,g)}else for(let g=m[0];g<=m[1];++g){let y=Pot(r[g],e,n);if(s=Math.min(s,y),s===0)return 0}}else{let g=aie(m,i);sIe(l,s,n,r,h,g[0]),sIe(l,s,n,r,h,g[1])}}return s}function q8(r,i,e,n,o,s=1/0){let l=Math.min(s,o.distance(r[0],e[0]));if(l===0)return l;let h=new G8([[0,[0,r.length-1],[0,e.length-1]]],OIe);for(;h.length>0;){let p=h.pop();if(p[0]>=l)continue;let m=p[1],f=p[2],g=i?sie:oie,y=n?sie:oie;if(H8(m)<=g&&H8(f)<=y){if(!db(m,r.length)&&db(f,e.length))return NaN;let _;if(i&&n)_=kot(r,m,e,f,o),l=Math.min(l,_);else if(i&&!n){let w=r.slice(m[0],m[1]+1);for(let A=f[0];A<=f[1];++A)if(_=oI(e[A],w,o),l=Math.min(l,_),l===0)return l}else if(!i&&n){let w=e.slice(f[0],f[1]+1);for(let A=m[0];A<=m[1];++A)if(_=oI(r[A],w,o),l=Math.min(l,_),l===0)return l}else _=Oot(r,m,e,f,o),l=Math.min(l,_)}else{let _=aie(m,i),w=aie(f,n);P8(h,l,o,r,e,_[0],w[0]),P8(h,l,o,r,e,_[0],w[1]),P8(h,l,o,r,e,_[1],w[0]),P8(h,l,o,r,e,_[1],w[1])}}return l}function Lot(r,i){let e=r.geometry(),n=e.flat().map(l=>fie([l.x,l.y],r.canonical));if(e.length===0)return NaN;let o=new SF(n[0][1]),s=1/0;for(let l of i){switch(l.type){case"Point":s=Math.min(s,q8(n,!1,[l.coordinates],!1,o,s));break;case"LineString":s=Math.min(s,q8(n,!1,l.coordinates,!0,o,s));break;case"Polygon":s=Math.min(s,W8(n,!1,l.coordinates,o,s));break}if(s===0)return s}return s}function Not(r,i){let e=r.geometry(),n=e.flat().map(l=>fie([l.x,l.y],r.canonical));if(e.length===0)return NaN;let o=new SF(n[0][1]),s=1/0;for(let l of i){switch(l.type){case"Point":s=Math.min(s,q8(n,!0,[l.coordinates],!1,o,s));break;case"LineString":s=Math.min(s,q8(n,!0,l.coordinates,!0,o,s));break;case"Polygon":s=Math.min(s,W8(n,!0,l.coordinates,o,s));break}if(s===0)return s}return s}function Bot(r,i){let e=r.geometry();if(e.length===0||e[0].length===0)return NaN;let n=Aot(e,0).map(l=>l.map(h=>h.map(p=>fie([p.x,p.y],r.canonical)))),o=new SF(n[0][0][0][1]),s=1/0;for(let l of i)for(let h of n){switch(l.type){case"Point":s=Math.min(s,W8([l.coordinates],!1,h,o,s));break;case"LineString":s=Math.min(s,W8(l.coordinates,!0,h,o,s));break;case"Polygon":s=Math.min(s,Fot(h,l.coordinates,o,s));break}if(s===0)return s}return s}function Hte(r){return r.type==="MultiPolygon"?r.coordinates.map(i=>({type:"Polygon",coordinates:i})):r.type==="MultiLineString"?r.coordinates.map(i=>({type:"LineString",coordinates:i})):r.type==="MultiPoint"?r.coordinates.map(i=>({type:"Point",coordinates:i})):[r]}var IF=class r{constructor(i,e){this.type=Yi,this.geojson=i,this.geometries=e}static parse(i,e){if(i.length!==2)return e.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(wF(i[1])){let n=i[1];if(n.type==="FeatureCollection")return new r(n,n.features.map(o=>Hte(o.geometry)).flat());if(n.type==="Feature")return new r(n,Hte(n.geometry));if("type"in n&&"coordinates"in n)return new r(n,Hte(n))}return e.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return Lot(i,this.geometries);if(i.geometryType()==="LineString")return Not(i,this.geometries);if(i.geometryType()==="Polygon")return Bot(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}},TF=class r{constructor(i){this.type=co,this.key=i}static parse(i,e){if(i.length!==2)return e.error(`Expected 1 argument, but found ${i.length-1} instead.`);let n=i[1];return n==null?e.error("Global state property must be defined."):typeof n!="string"?e.error(`Global state property must be string, but found ${typeof i[1]} instead.`):new r(n)}evaluate(i){var e;let n=(e=i.globals)===null||e===void 0?void 0:e.globalState;return!n||Object.keys(n).length===0?null:fF(n,this.key)}eachChild(){}outputDefined(){return!1}},OF={"==":sot,"!=":aot,">":cot,"<":lot,">=":uot,"<=":dot,array:l0,at:Kte,boolean:l0,case:Jte,coalesce:U8,collator:z8,format:iie,image:nie,in:Zte,"index-of":Qte,interpolate:sb,"interpolate-hcl":sb,"interpolate-lab":sb,length:rie,let:j8,literal:b2,match:Xte,number:l0,"number-format":tie,object:l0,slice:eie,step:$8,string:l0,"to-boolean":K1,"to-color":K1,"to-number":K1,"to-string":K1,var:V8,within:xF,distance:IF,"global-state":TF},d0=class r{constructor(i,e,n,o){this.name=i,this.type=e,this._evaluate=n,this.args=o}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,e){let n=i[0],o=r.definitions[n];if(!o)return e.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);let s=Array.isArray(o)?o[0]:o.type,l=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,h=l.filter(([m])=>!Array.isArray(m)||m.length===i.length-1),p=null;for(let[m,f]of h){p=new B8(e.registry,Y8,e.path,null,e.scope);let g=[],y=!1;for(let _=1;_<i.length;_++){let w=i[_],A=Array.isArray(m)?m[_-1]:m.type,k=p.parse(w,1+g.length,A);if(!k){y=!0;break}g.push(k)}if(!y){if(Array.isArray(m)&&m.length!==g.length){p.error(`Expected ${m.length} arguments, but found ${g.length} instead.`);continue}for(let _=0;_<g.length;_++){let w=Array.isArray(m)?m[_]:m.type,A=g[_];p.concat(_+1).checkSubtype(w,A.type)}if(p.errors.length===0)return new r(n,s,f,g)}}if(h.length===1)e.errors.push(...p.errors);else{let f=(h.length?h:l).map(([y])=>Vot(y)).join(" | "),g=[];for(let y=1;y<i.length;y++){let _=e.parse(i[y],1+g.length);if(!_)return null;g.push(Fl(_.type))}e.error(`Expected arguments of type ${f}, but found (${g.join(", ")}) instead.`)}return null}static register(i,e){r.definitions=e;for(let n in e)i[n]=r}};function aIe(r,[i,e,n,o]){i=i.evaluate(r),e=e.evaluate(r),n=n.evaluate(r);let s=o?o.evaluate(r):1,l=SIe(i,e,n,s);if(l)throw new bl(l);return new qs(i/255,e/255,n/255,s,!1)}function lIe(r,i){return r in i}function Wte(r,i){let e=i[r];return typeof e>"u"?null:e}function jot(r,i,e,n){for(;e<=n;){let o=e+n>>1;if(i[o]===r)return!0;i[o]>r?n=o-1:e=o+1}return!1}function rI(r){return{type:r}}d0.register(OF,{error:[krt,[Eo],(r,[i])=>{throw new bl(i.evaluate(r))}],typeof:[Eo,[co],(r,[i])=>Fl(td(i.evaluate(r)))],"to-rgba":[Lm(Yi,4),[ty],(r,[i])=>{let[e,n,o,s]=i.evaluate(r).rgb;return[e*255,n*255,o*255,s]}],rgb:[ty,[Yi,Yi,Yi],aIe],rgba:[ty,[Yi,Yi,Yi,Yi],aIe],has:{type:go,overloads:[[[Eo],(r,[i])=>lIe(i.evaluate(r),r.properties())],[[Eo,sI],(r,[i,e])=>lIe(i.evaluate(r),e.evaluate(r))]]},get:{type:co,overloads:[[[Eo],(r,[i])=>Wte(i.evaluate(r),r.properties())],[[Eo,sI],(r,[i,e])=>Wte(i.evaluate(r),e.evaluate(r))]]},"feature-state":[co,[Eo],(r,[i])=>Wte(i.evaluate(r),r.featureState||{})],properties:[sI,[],r=>r.properties()],"geometry-type":[Eo,[],r=>r.geometryType()],id:[co,[],r=>r.id()],zoom:[Yi,[],r=>r.globals.zoom],"heatmap-density":[Yi,[],r=>r.globals.heatmapDensity||0],elevation:[Yi,[],r=>r.globals.elevation||0],"line-progress":[Yi,[],r=>r.globals.lineProgress||0],accumulated:[co,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[Yi,rI(Yi),(r,i)=>{let e=0;for(let n of i)e+=n.evaluate(r);return e}],"*":[Yi,rI(Yi),(r,i)=>{let e=1;for(let n of i)e*=n.evaluate(r);return e}],"-":{type:Yi,overloads:[[[Yi,Yi],(r,[i,e])=>i.evaluate(r)-e.evaluate(r)],[[Yi],(r,[i])=>-i.evaluate(r)]]},"/":[Yi,[Yi,Yi],(r,[i,e])=>i.evaluate(r)/e.evaluate(r)],"%":[Yi,[Yi,Yi],(r,[i,e])=>i.evaluate(r)%e.evaluate(r)],ln2:[Yi,[],()=>Math.LN2],pi:[Yi,[],()=>Math.PI],e:[Yi,[],()=>Math.E],"^":[Yi,[Yi,Yi],(r,[i,e])=>Math.pow(i.evaluate(r),e.evaluate(r))],sqrt:[Yi,[Yi],(r,[i])=>Math.sqrt(i.evaluate(r))],log10:[Yi,[Yi],(r,[i])=>Math.log(i.evaluate(r))/Math.LN10],ln:[Yi,[Yi],(r,[i])=>Math.log(i.evaluate(r))],log2:[Yi,[Yi],(r,[i])=>Math.log(i.evaluate(r))/Math.LN2],sin:[Yi,[Yi],(r,[i])=>Math.sin(i.evaluate(r))],cos:[Yi,[Yi],(r,[i])=>Math.cos(i.evaluate(r))],tan:[Yi,[Yi],(r,[i])=>Math.tan(i.evaluate(r))],asin:[Yi,[Yi],(r,[i])=>Math.asin(i.evaluate(r))],acos:[Yi,[Yi],(r,[i])=>Math.acos(i.evaluate(r))],atan:[Yi,[Yi],(r,[i])=>Math.atan(i.evaluate(r))],min:[Yi,rI(Yi),(r,i)=>Math.min(...i.map(e=>e.evaluate(r)))],max:[Yi,rI(Yi),(r,i)=>Math.max(...i.map(e=>e.evaluate(r)))],abs:[Yi,[Yi],(r,[i])=>Math.abs(i.evaluate(r))],round:[Yi,[Yi],(r,[i])=>{let e=i.evaluate(r);return e<0?-Math.round(-e):Math.round(e)}],floor:[Yi,[Yi],(r,[i])=>Math.floor(i.evaluate(r))],ceil:[Yi,[Yi],(r,[i])=>Math.ceil(i.evaluate(r))],"filter-==":[go,[Eo,co],(r,[i,e])=>r.properties()[i.value]===e.value],"filter-id-==":[go,[co],(r,[i])=>r.id()===i.value],"filter-type-==":[go,[Eo],(r,[i])=>r.geometryType()===i.value],"filter-<":[go,[Eo,co],(r,[i,e])=>{let n=r.properties()[i.value],o=e.value;return typeof n==typeof o&&n<o}],"filter-id-<":[go,[co],(r,[i])=>{let e=r.id(),n=i.value;return typeof e==typeof n&&e<n}],"filter->":[go,[Eo,co],(r,[i,e])=>{let n=r.properties()[i.value],o=e.value;return typeof n==typeof o&&n>o}],"filter-id->":[go,[co],(r,[i])=>{let e=r.id(),n=i.value;return typeof e==typeof n&&e>n}],"filter-<=":[go,[Eo,co],(r,[i,e])=>{let n=r.properties()[i.value],o=e.value;return typeof n==typeof o&&n<=o}],"filter-id-<=":[go,[co],(r,[i])=>{let e=r.id(),n=i.value;return typeof e==typeof n&&e<=n}],"filter->=":[go,[Eo,co],(r,[i,e])=>{let n=r.properties()[i.value],o=e.value;return typeof n==typeof o&&n>=o}],"filter-id->=":[go,[co],(r,[i])=>{let e=r.id(),n=i.value;return typeof e==typeof n&&e>=n}],"filter-has":[go,[co],(r,[i])=>i.value in r.properties()],"filter-has-id":[go,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[go,[Lm(Eo)],(r,[i])=>i.value.indexOf(r.geometryType())>=0],"filter-id-in":[go,[Lm(co)],(r,[i])=>i.value.indexOf(r.id())>=0],"filter-in-small":[go,[Eo,Lm(co)],(r,[i,e])=>e.value.indexOf(r.properties()[i.value])>=0],"filter-in-large":[go,[Eo,Lm(co)],(r,[i,e])=>jot(r.properties()[i.value],e.value,0,e.value.length-1)],all:{type:go,overloads:[[[go,go],(r,[i,e])=>i.evaluate(r)&&e.evaluate(r)],[rI(go),(r,i)=>{for(let e of i)if(!e.evaluate(r))return!1;return!0}]]},any:{type:go,overloads:[[[go,go],(r,[i,e])=>i.evaluate(r)||e.evaluate(r)],[rI(go),(r,i)=>{for(let e of i)if(e.evaluate(r))return!0;return!1}]]},"!":[go,[go],(r,[i])=>!i.evaluate(r)],"is-supported-script":[go,[Eo],(r,[i])=>{let e=r.globals&&r.globals.isSupportedScript;return e?e(i.evaluate(r)):!0}],upcase:[Eo,[Eo],(r,[i])=>i.evaluate(r).toUpperCase()],downcase:[Eo,[Eo],(r,[i])=>i.evaluate(r).toLowerCase()],concat:[Eo,rI(co),(r,i)=>i.map(e=>gF(e.evaluate(r))).join("")],"resolved-locale":[Eo,[i$],(r,[i])=>i.evaluate(r).resolvedLocale()]});function Vot(r){return Array.isArray(r)?`(${r.map(Fl).join(", ")})`:`(${Fl(r.type)}...)`}function Y8(r){if(r instanceof V8)return Y8(r.boundExpression);if(r instanceof d0&&r.name==="error")return!1;if(r instanceof z8)return!1;if(r instanceof xF)return!1;if(r instanceof IF)return!1;if(r instanceof TF)return!1;let i=r instanceof K1||r instanceof l0,e=!0;return r.eachChild(n=>{i?e=e&&Y8(n):e=e&&n instanceof b2}),e?l$(r)&&c$(r,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function l$(r){if(r instanceof d0){if(r.name==="get"&&r.args.length===1)return!1;if(r.name==="feature-state")return!1;if(r.name==="has"&&r.args.length===1)return!1;if(r.name==="properties"||r.name==="geometry-type"||r.name==="id")return!1;if(/^filter-/.test(r.name))return!1}if(r instanceof xF||r instanceof IF)return!1;let i=!0;return r.eachChild(e=>{i&&!l$(e)&&(i=!1)}),i}function AF(r){if(r instanceof d0&&r.name==="feature-state")return!1;let i=!0;return r.eachChild(e=>{i&&!AF(e)&&(i=!1)}),i}function c$(r,i){if(r instanceof d0&&i.indexOf(r.name)>=0)return!1;let e=!0;return r.eachChild(n=>{e&&!c$(n,i)&&(e=!1)}),e}function die(r){return{result:"success",value:r}}function g2(r){return{result:"error",value:r}}function K8(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function PIe(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function RIe(r){return!!r.expression&&r.expression.interpolated}function Yo(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function PF(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&td(r)===sI}var uie=class{constructor(i,e){this.expression=i,this._warningHistory={},this._evaluator=new N8,this._defaultValue=e?Uot(e):null,this._enumValues=e&&e.type==="enum"?e.values:null}evaluateWithoutErrorHandling(i,e,n,o,s,l){return this._evaluator.globals=i,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=o,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=l,this.expression.evaluate(this._evaluator)}evaluate(i,e,n,o,s,l){this._evaluator.globals=i,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=o,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=l||null;try{let h=this.expression.evaluate(this._evaluator);if(h==null||typeof h=="number"&&h!==h)return this._defaultValue;if(this._enumValues&&!(h in this._enumValues))throw new bl(`Expected value to be one of ${Object.keys(this._enumValues).map(p=>JSON.stringify(p)).join(", ")}, but found ${JSON.stringify(h)} instead.`);return h}catch(h){return this._warningHistory[h.message]||(this._warningHistory[h.message]=!0,typeof console<"u"&&console.warn(h.message)),this._defaultValue}}};function d$(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in OF}function vie(r,i){let e=new B8(OF,Y8,[],i?$ot(i):void 0),n=e.parse(r,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?die(new uie(n,i)):g2(e.errors)}var Z8=class{constructor(i,e){this.kind=i,this._styleExpression=e,this.isStateDependent=i!=="constant"&&!AF(e.expression),this.globalStateRefs=u$(e.expression)}evaluateWithoutErrorHandling(i,e,n,o,s,l){return this._styleExpression.evaluateWithoutErrorHandling(i,e,n,o,s,l)}evaluate(i,e,n,o,s,l){return this._styleExpression.evaluate(i,e,n,o,s,l)}},Q8=class{constructor(i,e,n,o){this.kind=i,this.zoomStops=n,this._styleExpression=e,this.isStateDependent=i!=="camera"&&!AF(e.expression),this.globalStateRefs=u$(e.expression),this.interpolationType=o}evaluateWithoutErrorHandling(i,e,n,o,s,l){return this._styleExpression.evaluateWithoutErrorHandling(i,e,n,o,s,l)}evaluate(i,e,n,o,s,l){return this._styleExpression.evaluate(i,e,n,o,s,l)}interpolationFactor(i,e,n){return this.interpolationType?sb.interpolationFactor(this.interpolationType,i,e,n):0}};function bie(r,i){let e=vie(r,i);if(e.result==="error")return e;let n=e.value.expression,o=l$(n);if(!o&&!K8(i))return g2([new Bf("","data expressions not supported")]);let s=c$(n,["zoom"]);if(!s&&!PIe(i))return g2([new Bf("","zoom expressions not supported")]);let l=F8(n);if(!l&&!s)return g2([new Bf("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(l instanceof Bf)return g2([l]);if(l instanceof sb&&!RIe(i))return g2([new Bf("",'"interpolate" expressions cannot be used with this property')]);if(!l)return die(o?new Z8("constant",e.value):new Z8("source",e.value));let h=l instanceof sb?l.interpolation:void 0;return die(o?new Q8("camera",e.value,l.labels,h):new Q8("composite",e.value,l.labels,h))}function F8(r){let i=null;if(r instanceof j8)i=F8(r.result);else if(r instanceof U8){for(let e of r.args)if(i=F8(e),i)break}else(r instanceof $8||r instanceof sb)&&r.input instanceof d0&&r.input.name==="zoom"&&(i=r);return i instanceof Bf||r.eachChild(e=>{let n=F8(e);n instanceof Bf?i=n:!i&&n?i=new Bf("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&n&&i!==n&&(i=new Bf("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function u$(r,i=new Set){return r instanceof TF&&i.add(r.key),r.eachChild(e=>{u$(e,i)}),i}function $ot(r){let i={color:ty,string:Eo,number:Yi,enum:Eo,boolean:go,formatted:n$,padding:r$,numberArray:o$,colorArray:_F,projectionDefinition:t$,resolvedImage:DF,variableAnchorOffsetCollection:s$};return r.type==="array"?Lm(i[r.value]||co,r.length):i[r.type]}function Uot(r){if(r.type==="color"&&PF(r.default))return new qs(0,0,0,0);switch(r.type){case"color":return qs.parse(r.default)||null;case"padding":return ab.parse(r.default)||null;case"numberArray":return lb.parse(r.default)||null;case"colorArray":return c0.parse(r.default)||null;case"variableAnchorOffsetCollection":return cb.parse(r.default)||null;case"projectionDefinition":return cI.parse(r.default)||null;default:return r.default===void 0?null:r.default}}function wie(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(let i of r.slice(1))if(!wie(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}var zot={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function FIe(r){if(r==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};wie(r)||(r=X8(r));let i=vie(r,zot);if(i.result==="error")throw new Error(i.value.map(e=>`${e.key}: ${e.message}`).join(", "));{let e=LIe(r);return{filter:(n,o,s)=>i.value.evaluate(n,o,{},s),needGeometry:e,getGlobalStateRefs:()=>u$(i.value.expression)}}}function Got(r,i){return r<i?-1:r>i?1:0}function LIe(r){if(!Array.isArray(r))return!1;if(r[0]==="within"||r[0]==="distance")return!0;for(let i=1;i<r.length;i++)if(LIe(r[i]))return!0;return!1}function X8(r){if(!r)return!0;let i=r[0];return r.length<=1?i!=="any":i==="=="?qte(r[1],r[2],"=="):i==="!="?R8(qte(r[1],r[2],"==")):i==="<"||i===">"||i==="<="||i===">="?qte(r[1],r[2],i):i==="any"?Hot(r.slice(1)):i==="all"?["all"].concat(r.slice(1).map(X8)):i==="none"?["all"].concat(r.slice(1).map(X8).map(R8)):i==="in"?cIe(r[1],r.slice(2)):i==="!in"?R8(cIe(r[1],r.slice(2))):i==="has"?dIe(r[1]):i==="!has"?R8(dIe(r[1])):!0}function qte(r,i,e){switch(r){case"$type":return[`filter-type-${e}`,i];case"$id":return[`filter-id-${e}`,i];default:return[`filter-${e}`,r,i]}}function Hot(r){return["any"].concat(r.map(X8))}function cIe(r,i){if(i.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(e=>typeof e!=typeof i[0])?["filter-in-large",r,["literal",i.sort(Got)]]:["filter-in-small",r,["literal",i]]}}function dIe(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function R8(r){return["!",r]}function EF(r){return typeof r=="object"?["literal",r]:r}function NIe(r,i){let e=r.stops;if(!e)return Wot(r,i);let n=e&&typeof e[0][0]=="object",o=n||r.property!==void 0,s=n||!o;return e=e.map(l=>!o&&i.tokens&&typeof l[1]=="string"?[l[0],Zot(l[1])]:[l[0],EF(l[1])]),n?qot(r,i,e):s?Kot(r,i,e):hie(r,i,e)}function Wot(r,i){let e=["get",r.property];if(r.default===void 0)return i.type==="string"?["string",e]:e;if(i.type==="enum")return["match",e,Object.keys(i.values),e,r.default];{let n=[i.type==="color"?"to-color":i.type,e,EF(r.default)];return i.type==="array"&&n.splice(1,0,i.value,i.length||null),n}}function Cie(r){switch(r.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function qot(r,i,e){let n={},o={},s=[];for(let h=0;h<e.length;h++){let p=e[h],m=p[0].zoom;n[m]===void 0&&(n[m]={zoom:m,type:r.type,property:r.property,default:r.default},o[m]=[],s.push(m)),o[m].push([p[0].value,p[1]])}if(Sie({},i)==="exponential"){let h=[Cie(r),["linear"],["zoom"]];for(let p of s){let m=hie(n[p],i,o[p]);y2(h,p,m,!1)}return h}else{let h=["step",["zoom"]];for(let p of s){let m=hie(n[p],i,o[p]);y2(h,p,m,!0)}return xie(h),h}}function Yot(r,i){if(r!==void 0)return r;if(i!==void 0)return i}function uIe(r,i){let e=EF(Yot(r.default,i.default));return e===void 0&&i.type==="resolvedImage"?"":e}function hie(r,i,e){let n=Sie(r,i),o=["get",r.property];if(n==="categorical"&&typeof e[0][0]=="boolean"){let s=["case"];for(let l of e)s.push(["==",o,l[0]],l[1]);return s.push(uIe(r,i)),s}else if(n==="categorical"){let s=["match",o];for(let l of e)y2(s,l[0],l[1],!1);return s.push(uIe(r,i)),s}else if(n==="interval"){let s=["step",["number",o]];for(let l of e)y2(s,l[0],l[1],!0);return xie(s),r.default===void 0?s:["case",["==",["typeof",o],"number"],s,EF(r.default)]}else if(n==="exponential"){let s=r.base!==void 0?r.base:1,l=[Cie(r),s===1?["linear"]:["exponential",s],["number",o]];for(let h of e)y2(l,h[0],h[1],!1);return r.default===void 0?l:["case",["==",["typeof",o],"number"],l,EF(r.default)]}else throw new Error(`Unknown property function type ${n}`)}function Kot(r,i,e,n=["zoom"]){let o=Sie(r,i),s,l=!1;if(o==="interval")s=["step",n],l=!0;else if(o==="exponential"){let h=r.base!==void 0?r.base:1;s=[Cie(r),h===1?["linear"]:["exponential",h],n]}else throw new Error(`Unknown zoom function type "${o}"`);for(let h of e)y2(s,h[0],h[1],l);return xie(s),s}function xie(r){r[0]==="step"&&r.length===3&&(r.push(0),r.push(r[3]))}function y2(r,i,e,n){r.length>3&&i===r[r.length-2]||(n&&r.length===2||r.push(i),r.push(e))}function Sie(r,i){return r.type?r.type:i.expression.interpolated?"exponential":"interval"}function Zot(r){let i=["concat"],e=/{([^{}]+)}/g,n=0;for(let o=e.exec(r);o!==null;o=e.exec(r)){let s=r.slice(n,e.lastIndex-o[0].length);n=e.lastIndex,s.length>0&&i.push(s),i.push(["get",o[1]])}if(i.length===1)return r;if(n<r.length)i.push(r.slice(n));else if(i.length===2)return["to-string",i[1]];return i}function BIe(r){let i=r.key,e=r.value;return e?[new Fi(i,e,"constants have been deprecated as of v8")]:[]}function Cc(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function dI(r){if(Array.isArray(r))return r.map(dI);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){let i={};for(let e in r)i[e]=dI(r[e]);return i}return Cc(r)}function jf(r){let i=r.key,e=r.value,n=r.valueSpec||{},o=r.objectElementValidators||{},s=r.style,l=r.styleSpec,h=r.validateSpec,p=[],m=Yo(e);if(m!=="object")return[new Fi(i,e,`object expected, ${m} found`)];for(let f in e){let g=f.split(".")[0],y=fF(n,g)||n["*"],_;if(fF(o,g))_=o[g];else if(fF(n,g))_=h;else if(o["*"])_=o["*"];else if(n["*"])_=h;else{p.push(new Fi(i,e[f],`unknown property "${f}"`));continue}p=p.concat(_({key:(i&&`${i}.`)+f,value:e[f],valueSpec:y,style:s,styleSpec:l,object:e,objectKey:f,validateSpec:h},e))}for(let f in n)o[f]||n[f].required&&n[f].default===void 0&&e[f]===void 0&&p.push(new Fi(i,e,`missing required property "${f}"`));return p}function Iie(r){let i=r.value,e=r.valueSpec,n=r.validateSpec,o=r.style,s=r.styleSpec,l=r.key,h=r.arrayElementValidator||n;if(Yo(i)!=="array")return[new Fi(l,i,`array expected, ${Yo(i)} found`)];if(e.length&&i.length!==e.length)return[new Fi(l,i,`array length ${e.length} expected, length ${i.length} found`)];if(e["min-length"]&&i.length<e["min-length"])return[new Fi(l,i,`array length at least ${e["min-length"]} expected, length ${i.length} found`)];let p={type:e.value,values:e.values};s.$version<7&&(p.function=e.function),Yo(e.value)==="object"&&(p=e.value);let m=[];for(let f=0;f<i.length;f++)m=m.concat(h({array:i,arrayIndex:f,value:i[f],valueSpec:p,validateSpec:r.validateSpec,style:o,styleSpec:s,key:`${l}[${f}]`}));return m}function h$(r){let i=r.key,e=r.value,n=r.valueSpec,o=Yo(e);return o==="number"&&e!==e&&(o="NaN"),o!=="number"?[new Fi(i,e,`number expected, ${o} found`)]:"minimum"in n&&e<n.minimum?[new Fi(i,e,`${e} is less than the minimum value ${n.minimum}`)]:"maximum"in n&&e>n.maximum?[new Fi(i,e,`${e} is greater than the maximum value ${n.maximum}`)]:[]}function jIe(r){let i=r.valueSpec,e=Cc(r.value.type),n,o={},s,l,h=e!=="categorical"&&r.value.property===void 0,p=!h,m=Yo(r.value.stops)==="array"&&Yo(r.value.stops[0])==="array"&&Yo(r.value.stops[0][0])==="object",f=jf({key:r.key,value:r.value,valueSpec:r.styleSpec.function,validateSpec:r.validateSpec,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:g,default:w}});return e==="identity"&&h&&f.push(new Fi(r.key,r.value,'missing required property "property"')),e!=="identity"&&!r.value.stops&&f.push(new Fi(r.key,r.value,'missing required property "stops"')),e==="exponential"&&r.valueSpec.expression&&!RIe(r.valueSpec)&&f.push(new Fi(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(p&&!K8(r.valueSpec)?f.push(new Fi(r.key,r.value,"property functions not supported")):h&&!PIe(r.valueSpec)&&f.push(new Fi(r.key,r.value,"zoom functions not supported"))),(e==="categorical"||m)&&r.value.property===void 0&&f.push(new Fi(r.key,r.value,'"property" property is required')),f;function g(A){if(e==="identity")return[new Fi(A.key,A.value,'identity function may not have a "stops" property')];let k=[],R=A.value;return k=k.concat(Iie({key:A.key,value:R,valueSpec:A.valueSpec,validateSpec:A.validateSpec,style:A.style,styleSpec:A.styleSpec,arrayElementValidator:y})),Yo(R)==="array"&&R.length===0&&k.push(new Fi(A.key,R,"array must have at least one stop")),k}function y(A){let k=[],R=A.value,$=A.key;if(Yo(R)!=="array")return[new Fi($,R,`array expected, ${Yo(R)} found`)];if(R.length!==2)return[new Fi($,R,`array length 2 expected, length ${R.length} found`)];if(m){if(Yo(R[0])!=="object")return[new Fi($,R,`object expected, ${Yo(R[0])} found`)];if(R[0].zoom===void 0)return[new Fi($,R,"object stop key must have zoom")];if(R[0].value===void 0)return[new Fi($,R,"object stop key must have value")];if(l&&l>Cc(R[0].zoom))return[new Fi($,R[0].zoom,"stop zoom values must appear in ascending order")];Cc(R[0].zoom)!==l&&(l=Cc(R[0].zoom),s=void 0,o={}),k=k.concat(jf({key:`${$}[0]`,value:R[0],valueSpec:{zoom:{}},validateSpec:A.validateSpec,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{zoom:h$,value:_}}))}else k=k.concat(_({key:`${$}[0]`,value:R[0],validateSpec:A.validateSpec,style:A.style,styleSpec:A.styleSpec},R));return d$(dI(R[1]))?k.concat([new Fi(`${$}[1]`,R[1],"expressions are not allowed in function stops.")]):k.concat(A.validateSpec({key:`${$}[1]`,value:R[1],valueSpec:i,validateSpec:A.validateSpec,style:A.style,styleSpec:A.styleSpec}))}function _(A,k){let R=Yo(A.value),$=Cc(A.value),H=A.value!==null?A.value:k;if(!n)n=R;else if(R!==n)return[new Fi(A.key,H,`${R} stop domain type must match previous stop domain type ${n}`)];if(R!=="number"&&R!=="string"&&R!=="boolean")return[new Fi(A.key,H,"stop domain value must be a number, string, or boolean")];if(R!=="number"&&e!=="categorical"){let oe=`number expected, ${R} found`;return K8(i)&&e===void 0&&(oe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Fi(A.key,H,oe)]}return e==="categorical"&&R==="number"&&(!isFinite($)||Math.floor($)!==$)?[new Fi(A.key,H,`integer expected, found ${$}`)]:e!=="categorical"&&R==="number"&&s!==void 0&&$<s?[new Fi(A.key,H,"stop domain values must appear in ascending order")]:(s=$,e==="categorical"&&$ in o?[new Fi(A.key,H,"stop domain values must be unique")]:(o[$]=!0,[]))}function w(A){return A.validateSpec({key:A.key,value:A.value,valueSpec:i,validateSpec:A.validateSpec,style:A.style,styleSpec:A.styleSpec})}}function w2(r){let i=(r.expressionContext==="property"?bie:vie)(dI(r.value),r.valueSpec);if(i.result==="error")return i.value.map(n=>new Fi(`${r.key}${n.key}`,r.value,n.message));let e=i.value.expression||i.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!e.outputDefined())return[new Fi(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!AF(e))return[new Fi(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!AF(e))return[new Fi(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!c$(e,["zoom","feature-state"]))return[new Fi(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!l$(e))return[new Fi(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Qot(r){let i=r.value,e=r.key,n=Yo(i);return n!=="boolean"?[new Fi(e,i,`boolean expected, ${n} found`)]:[]}function pie(r){let i=r.key,e=r.value,n=Yo(e);return n!=="string"?[new Fi(i,e,`color expected, ${n} found`)]:qs.parse(String(e))?[]:[new Fi(i,e,`color expected, "${e}" found`)]}function MF(r){let i=r.key,e=r.value,n=r.valueSpec,o=[];return Array.isArray(n.values)?n.values.indexOf(Cc(e))===-1&&o.push(new Fi(i,e,`expected one of [${n.values.join(", ")}], ${JSON.stringify(e)} found`)):Object.keys(n.values).indexOf(Cc(e))===-1&&o.push(new Fi(i,e,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(e)} found`)),o}function Tie(r){return wie(dI(r.value))?w2(L8({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):VIe(r)}function VIe(r){let i=r.value,e=r.key;if(Yo(i)!=="array")return[new Fi(e,i,`array expected, ${Yo(i)} found`)];let n=r.styleSpec,o,s=[];if(i.length<1)return[new Fi(e,i,"filter array must have at least 1 element")];switch(s=s.concat(MF({key:`${e}[0]`,value:i[0],valueSpec:n.filter_operator,style:r.style,styleSpec:r.styleSpec})),Cc(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Cc(i[1])==="$type"&&s.push(new Fi(e,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&s.push(new Fi(e,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(o=Yo(i[1]),o!=="string"&&s.push(new Fi(`${e}[1]`,i[1],`string expected, ${o} found`)));for(let l=2;l<i.length;l++)o=Yo(i[l]),Cc(i[1])==="$type"?s=s.concat(MF({key:`${e}[${l}]`,value:i[l],valueSpec:n.geometry_type,style:r.style,styleSpec:r.styleSpec})):o!=="string"&&o!=="number"&&o!=="boolean"&&s.push(new Fi(`${e}[${l}]`,i[l],`string, number, or boolean expected, ${o} found`));break;case"any":case"all":case"none":for(let l=1;l<i.length;l++)s=s.concat(VIe({key:`${e}[${l}]`,value:i[l],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":o=Yo(i[1]),i.length!==2?s.push(new Fi(e,i,`filter array for "${i[0]}" operator must have 2 elements`)):o!=="string"&&s.push(new Fi(`${e}[1]`,i[1],`string expected, ${o} found`));break}return s}function $Ie(r,i){let e=r.key,n=r.validateSpec,o=r.style,s=r.styleSpec,l=r.value,h=r.objectKey,p=s[`${i}_${r.layerType}`];if(!p)return[];let m=h.match(/^(.*)-transition$/);if(i==="paint"&&m&&p[m[1]]&&p[m[1]].transition)return n({key:e,value:l,valueSpec:s.transition,style:o,styleSpec:s});let f=r.valueSpec||p[h];if(!f)return[new Fi(e,l,`unknown property "${h}"`)];let g;if(Yo(l)==="string"&&K8(f)&&!f.tokens&&(g=/^{([^}]+)}$/.exec(l)))return[new Fi(e,l,`"${h}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(g[1])} }\`.`)];let y=[];return r.layerType==="symbol"&&(h==="text-field"&&o&&!o.glyphs&&y.push(new Fi(e,l,'use of "text-field" requires a style "glyphs" property')),h==="text-font"&&PF(dI(l))&&Cc(l.type)==="identity"&&y.push(new Fi(e,l,'"text-font" does not support identity functions'))),y.concat(n({key:r.key,value:l,valueSpec:f,style:o,styleSpec:s,expressionContext:"property",propertyType:i,propertyKey:h}))}function UIe(r){return $Ie(r,"paint")}function zIe(r){return $Ie(r,"layout")}function GIe(r){let i=[],e=r.value,n=r.key,o=r.style,s=r.styleSpec;if(Yo(e)!=="object")return[new Fi(n,e,`object expected, ${Yo(e)} found`)];!e.type&&!e.ref&&i.push(new Fi(n,e,'either "type" or "ref" is required'));let l=Cc(e.type),h=Cc(e.ref);if(e.id){let p=Cc(e.id);for(let m=0;m<r.arrayIndex;m++){let f=o.layers[m];Cc(f.id)===p&&i.push(new Fi(n,e.id,`duplicate layer id "${e.id}", previously used at line ${f.id.__line__}`))}}if("ref"in e){["type","source","source-layer","filter","layout"].forEach(m=>{m in e&&i.push(new Fi(n,e[m],`"${m}" is prohibited for ref layers`))});let p;o.layers.forEach(m=>{Cc(m.id)===h&&(p=m)}),p?p.ref?i.push(new Fi(n,e.ref,"ref cannot reference another ref layer")):l=Cc(p.type):i.push(new Fi(n,e.ref,`ref layer "${h}" not found`))}else if(l!=="background")if(!e.source)i.push(new Fi(n,e,'missing required property "source"'));else{let p=o.sources&&o.sources[e.source],m=p&&Cc(p.type);p?m==="vector"&&l==="raster"?i.push(new Fi(n,e.source,`layer "${e.id}" requires a raster source`)):m!=="raster-dem"&&l==="hillshade"?i.push(new Fi(n,e.source,`layer "${e.id}" requires a raster-dem source`)):m!=="raster-dem"&&l==="color-relief"?i.push(new Fi(n,e.source,`layer "${e.id}" requires a raster-dem source`)):m==="raster"&&l!=="raster"?i.push(new Fi(n,e.source,`layer "${e.id}" requires a vector source`)):m==="vector"&&!e["source-layer"]?i.push(new Fi(n,e,`layer "${e.id}" must specify a "source-layer"`)):m==="raster-dem"&&l!=="hillshade"&&l!=="color-relief"?i.push(new Fi(n,e.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):l==="line"&&e.paint&&e.paint["line-gradient"]&&(m!=="geojson"||!p.lineMetrics)&&i.push(new Fi(n,e,`layer "${e.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Fi(n,e.source,`source "${e.source}" not found`))}return i=i.concat(jf({key:n,value:e,valueSpec:s.layer,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,objectElementValidators:{"*"(){return[]},type(){return r.validateSpec({key:`${n}.type`,value:e.type,valueSpec:s.layer.type,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,object:e,objectKey:"type"})},filter:Tie,layout(p){return jf({layer:e,key:p.key,value:p.value,style:p.style,styleSpec:p.styleSpec,validateSpec:p.validateSpec,objectElementValidators:{"*"(m){return zIe(L8({layerType:l},m))}}})},paint(p){return jf({layer:e,key:p.key,value:p.value,style:p.style,styleSpec:p.styleSpec,validateSpec:p.validateSpec,objectElementValidators:{"*"(m){return UIe(L8({layerType:l},m))}}})}}})),i}function uI(r){let i=r.value,e=r.key,n=Yo(i);return n!=="string"?[new Fi(e,i,`string expected, ${n} found`)]:[]}function Xot(r){var i;let e=(i=r.sourceName)!==null&&i!==void 0?i:"",n=r.value,o=r.styleSpec,s=o.source_raster_dem,l=r.style,h=[],p=Yo(n);if(n===void 0)return h;if(p!=="object")return h.push(new Fi("source_raster_dem",n,`object expected, ${p} found`)),h;let f=Cc(n.encoding)==="custom",g=["redFactor","greenFactor","blueFactor","baseShift"],y=r.value.encoding?`"${r.value.encoding}"`:"Default";for(let _ in n)!f&&g.includes(_)?h.push(new Fi(_,n[_],`In "${e}": "${_}" is only valid when "encoding" is set to "custom". ${y} encoding found`)):s[_]?h=h.concat(r.validateSpec({key:_,value:n[_],valueSpec:s[_],validateSpec:r.validateSpec,style:l,styleSpec:o})):h.push(new Fi(_,n[_],`unknown property "${_}"`));return h}var hIe={promoteId:Jot};function HIe(r){let i=r.value,e=r.key,n=r.styleSpec,o=r.style,s=r.validateSpec;if(!i.type)return[new Fi(e,i,'"type" is required')];let l=Cc(i.type),h;switch(l){case"vector":case"raster":return h=jf({key:e,value:i,valueSpec:n[`source_${l.replace("-","_")}`],style:r.style,styleSpec:n,objectElementValidators:hIe,validateSpec:s}),h;case"raster-dem":return h=Xot({sourceName:e,value:i,style:r.style,styleSpec:n,validateSpec:s}),h;case"geojson":if(h=jf({key:e,value:i,valueSpec:n.source_geojson,style:o,styleSpec:n,validateSpec:s,objectElementValidators:hIe}),i.cluster)for(let p in i.clusterProperties){let[m,f]=i.clusterProperties[p],g=typeof m=="string"?[m,["accumulated"],["get",p]]:m;h.push(...w2({key:`${e}.${p}.map`,value:f,expressionContext:"cluster-map"})),h.push(...w2({key:`${e}.${p}.reduce`,value:g,expressionContext:"cluster-reduce"}))}return h;case"video":return jf({key:e,value:i,valueSpec:n.source_video,style:o,validateSpec:s,styleSpec:n});case"image":return jf({key:e,value:i,valueSpec:n.source_image,style:o,validateSpec:s,styleSpec:n});case"canvas":return[new Fi(e,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return MF({key:`${e}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Jot({key:r,value:i}){if(Yo(i)==="string")return uI({key:r,value:i});{let e=[];for(let n in i)e.push(...uI({key:`${r}.${n}`,value:i[n]}));return e}}function WIe(r){let i=r.value,e=r.styleSpec,n=e.light,o=r.style,s=[],l=Yo(i);if(i===void 0)return s;if(l!=="object")return s=s.concat([new Fi("light",i,`object expected, ${l} found`)]),s;for(let h in i){let p=h.match(/^(.*)-transition$/);p&&n[p[1]]&&n[p[1]].transition?s=s.concat(r.validateSpec({key:h,value:i[h],valueSpec:e.transition,validateSpec:r.validateSpec,style:o,styleSpec:e})):n[h]?s=s.concat(r.validateSpec({key:h,value:i[h],valueSpec:n[h],validateSpec:r.validateSpec,style:o,styleSpec:e})):s=s.concat([new Fi(h,i[h],`unknown property "${h}"`)])}return s}function qIe(r){let i=r.value,e=r.styleSpec,n=e.sky,o=r.style,s=Yo(i);if(i===void 0)return[];if(s!=="object")return[new Fi("sky",i,`object expected, ${s} found`)];let l=[];for(let h in i)n[h]?l=l.concat(r.validateSpec({key:h,value:i[h],valueSpec:n[h],style:o,styleSpec:e})):l=l.concat([new Fi(h,i[h],`unknown property "${h}"`)]);return l}function YIe(r){let i=r.value,e=r.styleSpec,n=e.terrain,o=r.style,s=[],l=Yo(i);if(i===void 0)return s;if(l!=="object")return s=s.concat([new Fi("terrain",i,`object expected, ${l} found`)]),s;for(let h in i)n[h]?s=s.concat(r.validateSpec({key:h,value:i[h],valueSpec:n[h],validateSpec:r.validateSpec,style:o,styleSpec:e})):s=s.concat([new Fi(h,i[h],`unknown property "${h}"`)]);return s}function est(r){return uI(r).length===0?[]:w2(r)}function tst(r){return uI(r).length===0?[]:w2(r)}function ist(r){let i=r.key,e=r.value;if(Yo(e)==="array"){if(e.length<1||e.length>4)return[new Fi(i,e,`padding requires 1 to 4 values; ${e.length} values found`)];let o={type:"number"},s=[];for(let l=0;l<e.length;l++)s=s.concat(r.validateSpec({key:`${i}[${l}]`,value:e[l],validateSpec:r.validateSpec,valueSpec:o}));return s}else return h$({key:i,value:e,valueSpec:{}})}function nst(r){let i=r.key,e=r.value;if(Yo(e)==="array"){let o={type:"number"};if(e.length<1)return[new Fi(i,e,"array length at least 1 expected, length 0 found")];let s=[];for(let l=0;l<e.length;l++)s=s.concat(r.validateSpec({key:`${i}[${l}]`,value:e[l],validateSpec:r.validateSpec,valueSpec:o}));return s}else return h$({key:i,value:e,valueSpec:{}})}function rst(r){let i=r.key,e=r.value;if(Yo(e)==="array"){if(e.length<1)return[new Fi(i,e,"array length at least 1 expected, length 0 found")];let o=[];for(let s=0;s<e.length;s++)o=o.concat(pie({key:`${i}[${s}]`,value:e[s]}));return o}else return pie({key:i,value:e})}function ost(r){let i=r.key,e=r.value,n=Yo(e),o=r.styleSpec;if(n!=="array"||e.length<1||e.length%2!==0)return[new Fi(i,e,"variableAnchorOffsetCollection requires a non-empty array of even length")];let s=[];for(let l=0;l<e.length;l+=2)s=s.concat(MF({key:`${i}[${l}]`,value:e[l],valueSpec:o.layout_symbol["text-anchor"]})),s=s.concat(Iie({key:`${i}[${l+1}]`,value:e[l+1],valueSpec:{length:2,value:"number"},validateSpec:r.validateSpec,style:r.style,styleSpec:o}));return s}function KIe(r){let i=[],e=r.value,n=r.key;if(Array.isArray(e)){let o=[],s=[];for(let l in e){e[l].id&&o.includes(e[l].id)&&i.push(new Fi(n,e,`all the sprites' ids must be unique, but ${e[l].id} is duplicated`)),o.push(e[l].id),e[l].url&&s.includes(e[l].url)&&i.push(new Fi(n,e,`all the sprites' URLs must be unique, but ${e[l].url} is duplicated`)),s.push(e[l].url);let h={id:{type:"string",required:!0},url:{type:"string",required:!0}};i=i.concat(jf({key:`${n}[${l}]`,value:e[l],valueSpec:h,validateSpec:r.validateSpec}))}return i}else return uI({key:n,value:e})}function sst(r){let i=r.value,e=r.styleSpec,n=e.projection,o=r.style,s=Yo(i);if(i===void 0)return[];if(s!=="object")return[new Fi("projection",i,`object expected, ${s} found`)];let l=[];for(let h in i)n[h]?l=l.concat(r.validateSpec({key:h,value:i[h],valueSpec:n[h],style:o,styleSpec:e})):l=l.concat([new Fi(h,i[h],`unknown property "${h}"`)]);return l}function ast(r){let i=r.key,e=r.value;e=e instanceof String?e.valueOf():e;let n=Yo(e);return n==="array"&&!cst(e)&&!lst(e)?[new Fi(i,e,`projection expected, invalid array ${JSON.stringify(e)} found`)]:["array","string"].includes(n)?[]:[new Fi(i,e,`projection expected, invalid type "${n}" found`)]}function lst(r){return!!["interpolate","step","literal"].includes(r[0])}function cst(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="string"&&typeof r[1]=="string"&&typeof r[2]=="number"}function dst(r){return!!r&&r.constructor===Object}function ZIe(r){return dst(r.value)?[]:[new Fi(r.key,r.value,`object expected, ${Yo(r.value)} found`)]}var pIe={"*"(){return[]},array:Iie,boolean:Qot,number:h$,color:pie,constants:BIe,enum:MF,filter:Tie,function:jIe,layer:GIe,object:jf,source:HIe,light:WIe,sky:qIe,terrain:YIe,projection:sst,projectionDefinition:ast,string:uI,formatted:est,resolvedImage:tst,padding:ist,numberArray:nst,colorArray:rst,variableAnchorOffsetCollection:ost,sprite:KIe,state:ZIe};function J8(r){let i=r.value,e=r.valueSpec,n=r.styleSpec;return r.validateSpec=J8,e.expression&&PF(Cc(i))?jIe(r):e.expression&&d$(dI(i))?w2(r):e.type&&pIe[e.type]?pIe[e.type](r):jf(L8({},r,{valueSpec:e.type?n[e.type]:e}))}function QIe(r){let i=r.value,e=r.key,n=uI(r);return n.length||(i.indexOf("{fontstack}")===-1&&n.push(new Fi(e,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&n.push(new Fi(e,i,'"glyphs" url must include a "{range}" token'))),n}function u0(r,i=mIe){let e=[];return e=e.concat(J8({key:"",value:r,valueSpec:i.$root,styleSpec:i,style:r,validateSpec:J8,objectElementValidators:{glyphs:QIe,"*"(){return[]}}})),r.constants&&(e=e.concat(BIe({key:"constants",value:r.constants}))),XIe(e)}u0.source=p0(h0(HIe));u0.sprite=p0(h0(KIe));u0.glyphs=p0(h0(QIe));u0.light=p0(h0(WIe));u0.sky=p0(h0(qIe));u0.terrain=p0(h0(YIe));u0.state=p0(h0(ZIe));u0.layer=p0(h0(GIe));u0.filter=p0(h0(Tie));u0.paintProperty=p0(h0(UIe));u0.layoutProperty=p0(h0(zIe));function h0(r){return function(i){return r(li(Xe({},i),{validateSpec:J8}))}}function XIe(r){return[].concat(r).sort((i,e)=>i.line-e.line)}function p0(r){return function(...i){return XIe(r.apply(this,i))}}var JIe=mIe;var eTe={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},RF=" ",tTe=/(italic|oblique)$/i,iTe={};function p$(r,i,e){var n=iTe[r];if(!n){Array.isArray(r)||(r=[r]);for(var o=400,s="normal",l=[],h,p,m=0,f=r.length;m<f;++m){var g=r[m],y=g.split(" "),_=y[y.length-1].toLowerCase();_=="normal"||_=="italic"||_=="oblique"?(s=p?s:_,p=!0,y.pop(),_=y[y.length-1].toLowerCase()):tTe.test(_)&&(_=_.replace(tTe,""),s=p?s:y[y.length-1].replace(_,""),p=!0);for(var w in eTe){var A=y.length>1?y[y.length-2].toLowerCase():"";if(_==w||_==w.replace("-","")||A+"-"+_==w){o=h?o:eTe[w],y.pop(),A&&w.startsWith(A)&&y.pop();break}}!h&&typeof _=="number"&&(o=_,h=!0);var k=y.join(RF).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");k.indexOf(RF)!==-1&&(k='"'+k+'"'),l.push(k)}n=iTe[r]=[s,o,l]}return n[0]+RF+n[1]+RF+i+"px"+(e?"/"+e:"")+RF+n[2]}var Xl={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},ust={ERROR:"error"},Aie=class extends Ls{constructor(i){super(ust.ERROR),this.code=i.code,this.message=i.message}},Eie=class extends yc{constructor(i){super(),this.on,this.once,this.un,i=i||{},this.position_=null,this.transform_=Bj,this.watchId_=void 0,this.addChangeListener(Xl.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(Xl.TRACKING,this.handleTrackingChanged_),i.projection!==void 0&&this.setProjection(i.projection),i.trackingOptions!==void 0&&this.setTrackingOptions(i.trackingOptions),this.setTracking(i.tracking!==void 0?i.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){let i=this.getProjection();i&&(this.transform_=Gg(Vi("EPSG:4326"),i),this.position_&&this.set(Xl.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){let i=this.getTracking();i&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!i&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(i){let e=i.coords;this.set(Xl.ACCURACY,e.accuracy),this.set(Xl.ALTITUDE,e.altitude===null?void 0:e.altitude),this.set(Xl.ALTITUDE_ACCURACY,e.altitudeAccuracy===null?void 0:e.altitudeAccuracy),this.set(Xl.HEADING,e.heading===null?void 0:Sf(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];let n=this.transform_(this.position_);this.set(Xl.POSITION,n.slice()),this.set(Xl.SPEED,e.speed===null?void 0:e.speed);let o=y6(this.position_,e.accuracy);o.applyTransform(this.transform_),this.set(Xl.ACCURACY_GEOMETRY,o),this.changed()}positionError_(i){this.dispatchEvent(new Aie(i))}getAccuracy(){return this.get(Xl.ACCURACY)}getAccuracyGeometry(){return this.get(Xl.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(Xl.ALTITUDE)}getAltitudeAccuracy(){return this.get(Xl.ALTITUDE_ACCURACY)}getHeading(){return this.get(Xl.HEADING)}getPosition(){return this.get(Xl.POSITION)}getProjection(){return this.get(Xl.PROJECTION)}getSpeed(){return this.get(Xl.SPEED)}getTracking(){return this.get(Xl.TRACKING)}getTrackingOptions(){return this.get(Xl.TRACKING_OPTIONS)}setProjection(i){this.set(Xl.PROJECTION,Vi(i))}setTracking(i){this.set(Xl.TRACKING,i)}setTrackingOptions(i){this.set(Xl.TRACKING_OPTIONS,i)}},nTe=Eie;var FF=Object.freeze({}),rTe={},oTe={},mst=0;function Mie(r){return r.id||(r.id=mst++),r.id}function Die(r,i){return Mie(r)+"."+Xi(i)}function kie(r){let i=rTe[r.id];return i||(i={},rTe[Mie(r)]=i),i}function Oie(r){let i=oTe[r.id];return i||(i={},oTe[Mie(r)]=i),i}function m$(r){return r*Math.PI/180}var Pie=function(){let r=[];for(let i=78271.51696402048;r.length<=24;i/=2)r.push(i);return r}();function S2(r,i){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(r,i);let e=document.createElement("canvas");return e.width=r,e.height=i,e}function Rie(r,i){let e=0,n=i.length;for(;e<n;++e)if(i[e]<r&&e+1<n){let s=i[e]/i[e+1];return e+Math.log(i[e]/r)/Math.log(s)}return n-1}function Fie(r,i,e,n){let o=[2*e*i.pixelRatio+i.width,2*e*i.pixelRatio+i.height],s=S2(o[0],o[1]),l=s.getContext("2d");l.drawImage(r,i.x,i.y,i.width,i.height,e*i.pixelRatio,e*i.pixelRatio,i.width,i.height);let h=l.getImageData(0,0,o[0],o[1]);l.globalCompositeOperation="destination-over",l.fillStyle=`rgba(${n.r*255},${n.g*255},${n.b*255},${n.a})`;let p=h.data;for(let m=0,f=h.width;m<f;++m)for(let g=0,y=h.height;g<y;++g){let _=(g*f+m)*4;p[_+3]>0&&l.arc(m,g,e*i.pixelRatio,0,2*Math.PI)}return l.fill(),s}function fst(r,i,e){let n=Math.max(0,Math.min(1,(e-r)/(i-r)));return n*n*(3-2*n)}function Lie(r,i,e){let n=S2(i.width,i.height),o=n.getContext("2d");o.drawImage(r,i.x,i.y,i.width,i.height,0,0,i.width,i.height);let s=o.getImageData(0,0,i.width,i.height),l=s.data;for(let h=0,p=s.width;h<p;++h)for(let m=0,f=s.height;m<f;++m){let g=(m*p+h)*4,y=l[g+3]/255,_=.75,w=.1,A=fst(_-w,_+w,y);A>0?(l[g+0]=Math.round(255*e.r*A),l[g+1]=Math.round(255*e.g*A),l[g+2]=Math.round(255*e.b*A),l[g+3]=Math.round(255*A)):l[g+3]=0}return o.putImageData(s,0,0),n}var gst=Array(256).join("\u200A");function f$(r,i){if(i>=.05){let e="",n=r.split(`
`),o=gst.slice(0,Math.round(i/.1));for(let s=0,l=n.length;s<l;++s)s>0&&(e+=`
`),e+=n[s].split("").join(o);return e}return r}var Nie;function aTe(){return Nie||(Nie=S2(1,1).getContext("2d")),Nie}function hI(r,i){return aTe().measureText(r).width+(r.length-1)*i}var sTe={};function g$(r,i,e,n){if(r.indexOf(`
`)!==-1){let l=r.split(`
`),h=[];for(let p=0,m=l.length;p<m;++p)h.push(g$(l[p],i,e,n));return h.join(`
`)}let o=e+","+i+","+r+","+n,s=sTe[o];if(!s){let l=r.split(" ");if(l.length>1){let h=aTe();h.font=i;let m=h.measureText("M").width*e,f="",g=[];for(let y=0,_=l.length;y<_;++y){let w=l[y],A=f+(f?" ":"")+w;hI(A,n)<=m?f=A:(f&&g.push(f),f=w)}f&&g.push(f);for(let y=0,_=g.length;y<_&&_>1;++y){let w=g[y];if(hI(w,n)<m*.35){let A=y>0?hI(g[y-1],n):1/0,k=y<_-1?hI(g[y+1],n):1/0;g.splice(y,1),_-=1,A<k?(g[y-1]+=" "+w,y-=1):g[y]=w+" "+g[y]}}for(let y=0,_=g.length-1;y<_;++y){let w=g[y],A=g[y+1];if(hI(w,n)>m*.7&&hI(A,n)<m*.6){let k=w.split(" "),R=k.pop();hI(R,n)<m*.2&&(g[y]=k.join(" "),g[y+1]=R+" "+A),_-=1}}s=g.join(`
`)}else s=r;s=f$(s,n),sTe[o]=s}return s}var _st={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},yst={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},vst=function(r,i){let e=bie(r,i);if(e.result==="error")throw new Error(e.value.map(n=>`${n.key}: ${n.message}`).join(", "));return e.value},J1={zoom:0,distanceFromCenter:0};d0.register(OF,li(Xe({},d0.definitions),{pitch:[{kind:"number"},[],r=>J1.pitch||90],"distance-from-center":[{kind:"number"},[],r=>J1.distanceFromCenter||0]}));var _$,Bie;function hr(r,i,e,n,o,s){let l=r.id;o||(o={},console.warn("No functionCache provided to getValue()")),o[l]||(o[l]={});let h=o[l];if(!h[e]){let p=(r[i]||FF)[e],m=JIe[`${i}_${r.type}`][e];p===void 0&&(p=m.default);let f=d$(p);if(!f&&PF(p)&&(p=NIe(p,m),f=!0),f){let g=vst(p,m);h[e]=g.evaluate.bind(g)}else m.type=="color"&&(p=qs.parse(p)),h[e]=function(){return p}}return h[e](J1,n,s)}function lTe(r,i,e,n){return hr(r,"layout",`${e}-allow-overlap`,i,n)?hr(r,"layout",`${e}-ignore-placement`,i,n)?"none":"obstacle":"declutter"}function bst(r,i,e,n){if(n||console.warn("No filterCache provided to evaluateFilter()"),!(r in n))try{n[r]=FIe(i).filter}catch(o){console.warn("Filter will evaluate to false: "+o.message),n[r]=function(){return!1}}return n[r](J1,e)}var wst=!1;function X1(r,i){if(r){if(!wst&&(r.a===0||i===0))return;let e=r.a;return i=i===void 0?1:i,e===0?"transparent":"rgba("+Math.round(r.r*255/e)+","+Math.round(r.g*255/e)+","+Math.round(r.b*255/e)+","+e*i+")"}return r}var Cst=/\{[^{}}]*\}/g;function jie(r,i){return r.replace(Cst,function(e){return i[e.slice(1,-1)]||""})}function cTe(r,i){let e=r.split(":")[0];return e===r&&(e="default"),i[e]}var xst=!1;var dTe={};function LF(r,i,e,n=Pie,o=void 0,s=void 0,l=void 0,h=void 0){if(typeof i=="string"&&(i=JSON.parse(i)),i.version!=8)throw new Error("glStyle version 8 required.");dTe[Die(i,r)]=Array.from(arguments);let p={};(typeof s=="string"||s instanceof Request||s instanceof Response||s instanceof Promise)&&(s={default:s});for(let se in s){let ge=s[se];QE(()=>ge).then(ue=>st(this,null,function*(){let pe;if(typeof Image<"u"){let Ce=new Image;if(typeof ue=="string")Ce.crossOrigin="anonymous",Ce.src=ue;else{let _e;ue instanceof Request?_e=yield fetch(ue):ue instanceof Response&&(_e=ue);let de=yield _e.blob();pe=URL.createObjectURL(de),Ce.src=pe}Ce.addEventListener("load",function _e(){Ce.removeEventListener("load",_e),p[se]={image:Ce,size:[Ce.width,Ce.height]},r.changed(),pe&&URL.revokeObjectURL(pe)}),Ce.addEventListener("error",function _e(){URL.revokeObjectURL(pe),Ce.removeEventListener("error",_e)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){let Ce=self;Ce.postMessage({action:"loadImage",src:ue}),Ce.addEventListener("message",function(de){de.data.action==="imageLoaded"&&de.data.src===ue&&(p[se]={image:de.data.image,size:[de.data.image.width,de.data.image.height]})})}}))}let m=fIe(i.layers),f={},g=[],y={},_={},w=kie(i),A=Oie(i),k;for(let se=0,ge=m.length;se<ge;++se){let ue=m[se],pe=ue.id;if(typeof e=="string"&&ue.source==e||Array.isArray(e)&&e.indexOf(pe)!==-1){let Ce=ue["source-layer"];if(k){if(ue.source!==k)throw new Error(`Layer "${pe}" does not use source "${k}`)}else{k=ue.source;let de=i.sources[k];if(!de)throw new Error(`Source "${k}" is not defined`);let te=de.type;if(te!=="vector"&&te!=="geojson")throw new Error(`Source "${k}" is not of type "vector" or "geojson", but "${te}"`)}let _e=f[Ce];_e||(_e=[],f[Ce]=_e),_e.push({layer:ue,index:se}),g.push(pe)}}let R=new ir,$=new sr,H=[],oe=function(se,ge,ue){let pe=se.getProperties(),Ce=f[pe.layer];if(!Ce)return;let _e=n.indexOf(ge);_e==-1&&(_e=Rie(ge,n)),J1.zoom=_e,J1.distanceFromCenter=0;let de=se.getGeometry(),te=_st[de.getType()],Se=r.get("map");if(Se&&Se instanceof o8&&te===1){let ze=Se.getSize();if(ze){let Ve=Se.getView().getCenter(),$e=gc(de.getExtent());J1.distanceFromCenter=g1(Ve,$e)/ge/ze[1]}}let Te={id:se.getId(),properties:pe,type:te},De=r.get("mapbox-featurestate")[se.getId()],Le=-1,Me;for(let ze=0,Ve=Ce.length;ze<Ve;++ze){let $e=Ce[ze],nt=$e.layer,be=nt.id;if(ue!==void 0&&ue!==be)continue;let we=nt.layout||FF,ke=nt.paint||FF;if(we.visibility==="none"||"minzoom"in nt&&_e<nt.minzoom||"maxzoom"in nt&&_e>=nt.maxzoom)continue;let et=nt.filter;if(!et||bst(be,et,Te,A)){Me=nt;let Qe,at,_t,ht,Zt,Tt,me=$e.index;if(te==3&&(nt.type=="fill"||nt.type=="fill-extrusion"))if(at=hr(nt,"paint",nt.type+"-opacity",Te,w,De),nt.type+"-pattern"in ke){let wi=hr(nt,"paint",nt.type+"-pattern",Te,w,De);if(wi){let vi=typeof wi=="string"?jie(wi,pe):wi.toString(),Hi=cTe(vi,p);if(o&&o[vi]&&Hi){++Le,Tt=H[Le],(!Tt||!Tt.getFill()||Tt.getStroke()||Tt.getText())&&(Tt=new Mn({fill:new sr}),H[Le]=Tt),_t=Tt.getFill(),Tt.setZIndex(me);let Ei=vi+"."+at,Li=_[Ei];if(!Li){let $i=o[vi],Wt=S2($i.width,$i.height),Sr=Wt.getContext("2d");Sr.globalAlpha=at,Sr.drawImage(Hi.image,$i.x,$i.y,$i.width,$i.height,0,0,$i.width,$i.height),Li=Sr.createPattern(Wt,"repeat"),_[Ei]=Li}_t.setColor(Li)}}}else Qe=X1(hr(nt,"paint",nt.type+"-color",Te,w,De),at),nt.type+"-outline-color"in ke&&(Zt=X1(hr(nt,"paint",nt.type+"-outline-color",Te,w,De),at)),Zt||(Zt=Qe),(Qe||Zt)&&(++Le,Tt=H[Le],(!Tt||Qe&&!Tt.getFill()||!Qe&&Tt.getFill()||Zt&&!Tt.getStroke()||!Zt&&Tt.getStroke()||Tt.getText())&&(Tt=new Mn({fill:Qe?new sr:void 0,stroke:Zt?new ir:void 0}),H[Le]=Tt),Qe&&(_t=Tt.getFill(),_t.setColor(Qe)),Zt&&(ht=Tt.getStroke(),ht.setColor(Zt),ht.setWidth(.5)),Tt.setZIndex(me));if(te!=1&&nt.type=="line"){"line-pattern"in ke?Qe=void 0:Qe=X1(hr(nt,"paint","line-color",Te,w,De),hr(nt,"paint","line-opacity",Te,w,De));let wi=hr(nt,"paint","line-width",Te,w,De);Qe&&wi>0&&(++Le,Tt=H[Le],(!Tt||!Tt.getStroke()||Tt.getFill()||Tt.getText())&&(Tt=new Mn({stroke:new ir}),H[Le]=Tt),ht=Tt.getStroke(),ht.setLineCap(hr(nt,"layout","line-cap",Te,w,De)),ht.setLineJoin(hr(nt,"layout","line-join",Te,w,De)),ht.setMiterLimit(hr(nt,"layout","line-miter-limit",Te,w,De)),ht.setColor(Qe),ht.setWidth(wi),ht.setLineDash(ke["line-dasharray"]?hr(nt,"paint","line-dasharray",Te,w,De).map(function(vi){return vi*wi}):null),Tt.setZIndex(me))}let Ct=!1,pt=null,Pe=0,ye,lt,Ot;if((te==1||te==2)&&"icon-image"in we){let wi=hr(nt,"layout","icon-image",Te,w,De);if(wi){ye=typeof wi=="string"?jie(wi,pe):wi.toString();let vi,Hi=h?h(r,ye):void 0,Ei=cTe(ye,p);if(o&&o[ye]&&Ei||Hi){let Li=hr(nt,"layout","icon-rotation-alignment",Te,w,De);if(te==2){let $i=se.getGeometry();if($i.getFlatMidpoint||$i.getFlatMidpoints){let Wt=$i.getExtent();if(Math.sqrt(Math.max(Math.pow((Wt[2]-Wt[0])/ge,2),Math.pow((Wt[3]-Wt[1])/ge,2)))>150){let En=$i.getType()==="MultiLineString"?$i.getFlatMidpoints():$i.getFlatMidpoint();if(Bie||(_$=[NaN,NaN],Bie=new Zc("Point",_$,[],2,{},void 0)),vi=Bie,_$[0]=En[0],_$[1]=En[1],hr(nt,"layout","symbol-placement",Te,w,De)==="line"&&Li==="map"){let yr=$i.getStride(),Ir=$i.getFlatCoordinates();for(let Mo=0,kn=Ir.length-yr;Mo<kn;Mo+=yr){let Lo=Ir[Mo],rr=Ir[Mo+1],gr=Ir[Mo+yr],cs=Ir[Mo+yr+1],Mi=Math.min(Lo,gr),pr=Math.max(Lo,gr),_o=En[0],Xo=En[1],uo=(cs-rr)*(_o-Lo)-(gr-Lo)*(Xo-rr);if(Math.abs(uo)<.001&&_o<=pr&&_o>=Mi){Pe=Math.atan2(rr-cs,gr-Lo);break}}}}}}if(te!==2||vi){let $i=hr(nt,"layout","icon-size",Te,w,De),Wt=ke["icon-color"]!==void 0?hr(nt,"paint","icon-color",Te,w,De):null;if(!Wt||Wt.a!==0){let Sr=hr(nt,"paint","icon-halo-color",Te,w,De),En=hr(nt,"paint","icon-halo-width",Te,w,De),ro=`${ye}.${$i}.${En}.${Sr}`;if(Wt!==null&&(ro+=`.${Wt}`),lt=y[ro],!lt){let yr=lTe(nt,Te,"icon",w),Ir;"icon-offset"in we&&(Ir=hr(nt,"layout","icon-offset",Te,w,De).slice(0),Ir[0]*=$i,Ir[1]*=-$i);let Mo=Wt?[Wt.r*255,Wt.g*255,Wt.b*255,Wt.a]:void 0;if(Hi){let kn={color:Mo,rotateWithView:Li==="map",displacement:Ir,declutterMode:yr,scale:$i};typeof Hi=="string"?kn.src=Hi:(kn.img=Hi,kn.imgSize=[Hi.width,Hi.height]),lt=new Tu(kn)}else{let kn=o[ye],Lo,rr,gr;if(En)kn.sdf?(Lo=Fie(Lie(Ei.image,kn,Wt||[0,0,0,1]),{x:0,y:0,width:kn.width,height:kn.height,pixelRatio:kn.pixelRatio},En,Sr),Mo=void 0):Lo=Fie(Ei.image,kn,En,Sr);else{if(kn.sdf&&!Ei.unSDFed){let cs=Lie(Ei.image,{x:0,y:0,width:Ei.size[0],height:Ei.size[1]},{r:1,g:1,b:1,a:1});Ei.image=cs,Ei.unSDFed=!0}Lo=Ei.image,rr=[kn.width,kn.height],gr=[kn.x,kn.y]}lt=new Tu({color:Mo,img:Lo,imgSize:Ei.size,size:rr,offset:gr,rotateWithView:Li==="map",scale:$i/kn.pixelRatio,displacement:Ir,declutterMode:yr})}y[ro]=lt}}lt&&(++Le,Tt=H[Le],(!Tt||!Tt.getImage()||Tt.getFill()||Tt.getStroke())&&(Tt=new Mn,H[Le]=Tt),Tt.setGeometry(vi),lt.setRotation(Pe+m$(hr(nt,"layout","icon-rotate",Te,w,De))),lt.setOpacity(hr(nt,"paint","icon-opacity",Te,w,De)),lt.setAnchor(yst[hr(nt,"layout","icon-anchor",Te,w,De)]),Tt.setImage(lt),pt=Tt.getText(),Tt.setText(void 0),Tt.setZIndex(me),Ct=!0,Ot=!1)}else Ot=!0}}}if(te==1&&nt.type==="circle"){++Le,Tt=H[Le],(!Tt||!Tt.getImage()||Tt.getFill()||Tt.getStroke())&&(Tt=new Mn,H[Le]=Tt);let wi="circle-radius"in ke?hr(nt,"paint","circle-radius",Te,w,De):5,vi=X1(hr(nt,"paint","circle-stroke-color",Te,w,De),hr(nt,"paint","circle-stroke-opacity",Te,w,De)),Hi=hr(nt,"paint","circle-translate",Te,w,De),Ei=X1(hr(nt,"paint","circle-color",Te,w,De),hr(nt,"paint","circle-opacity",Te,w,De)),Li=hr(nt,"paint","circle-stroke-width",Te,w,De),$i=wi+"."+vi+"."+Ei+"."+Li+"."+Hi[0]+"."+Hi[1];lt=y[$i],lt||(lt=new yl({radius:wi,displacement:[Hi[0],-Hi[1]],stroke:vi&&Li>0?new ir({width:Li,color:vi}):void 0,fill:Ei?new sr({color:Ei}):void 0,declutterMode:"none"}),y[$i]=lt),Tt.setImage(lt),pt=Tt.getText(),Tt.setText(void 0),Tt.setGeometry(void 0),Tt.setZIndex(me),Ct=!0}let ut,ot,Rt,Lt,Nt,ni;if("text-field"in we){Lt=Math.round(hr(nt,"layout","text-size",Te,w,De));let wi=hr(nt,"layout","text-font",Te,w,De);Rt=hr(nt,"layout","text-line-height",Te,w,De),ot=p$(l?l(wi,i.metadata?i.metadata["ol:webfonts"]:void 0):wi,Lt,Rt),ot.includes("sans-serif")||(ot+=",sans-serif"),Nt=hr(nt,"layout","text-letter-spacing",Te,w,De),ni=hr(nt,"layout","text-max-width",Te,w,De);let vi=hr(nt,"layout","text-field",Te,w,De);typeof vi=="object"&&vi.sections?vi.sections.length===1?ut=vi.toString():ut=vi.sections.reduce((Hi,Ei,Li)=>{let $i=Ei.fontStack?Ei.fontStack.split(","):wi,Wt=p$(l?l($i):$i,Lt*(Ei.scale||1),Rt),Sr=Ei.text;if(Sr===`
`)return Hi.push(`
`,""),Hi;if(te==2)return Hi.push(f$(Sr,Nt),Wt),Hi;Sr=g$(Sr,Wt,ni,Nt).split(`
`);for(let En=0,ro=Sr.length;En<ro;++En)En>0&&Hi.push(`
`,""),Hi.push(Sr[En],Wt);return Hi},[]):ut=jie(vi,pe).trim(),at=hr(nt,"paint","text-opacity",Te,w,De)}if(ut&&at&&!Ot){Ct||(++Le,Tt=H[Le],(!Tt||!Tt.getText()||Tt.getFill()||Tt.getStroke())&&(Tt=new Mn,H[Le]=Tt),Tt.setImage(void 0),Tt.setGeometry(void 0));let wi=lTe(nt,Te,"text",w);Tt.getText()||Tt.setText(pt),pt=Tt.getText(),(!pt||"getDeclutterMode"in pt&&pt.getDeclutterMode()!==wi)&&(pt=new Pl({padding:[2,2,2,2],declutterMode:wi}),Tt.setText(pt));let vi=hr(nt,"layout","text-transform",Te,w,De);vi=="uppercase"?ut=Array.isArray(ut)?ut.map((gr,cs)=>cs%2?gr:gr.toUpperCase()):ut.toUpperCase():vi=="lowercase"&&(ut=Array.isArray(ut)?ut.map((gr,cs)=>cs%2?gr:gr.toLowerCase()):ut.toLowerCase());let Hi=Array.isArray(ut)?ut:te==2?f$(ut,Nt):g$(ut,ot,ni,Nt);if(pt.setText(Hi),pt.setFont(ot),pt.setRotation(m$(hr(nt,"layout","text-rotate",Te,w,De))),typeof pt.setKeepUpright=="function"){let gr=hr(nt,"layout","text-keep-upright",Te,w,De);pt.setKeepUpright(gr)}let Ei=hr(nt,"layout","text-anchor",Te,w,De),Li=Ct||te==1?"point":hr(nt,"layout","symbol-placement",Te,w,De),$i;if(Li==="line-center"?(pt.setPlacement("line"),$i="center"):pt.setPlacement(Li),Li==="line"&&typeof pt.setRepeat=="function"){let gr=hr(nt,"layout","symbol-spacing",Te,w,De);pt.setRepeat(gr*2)}pt.setOverflow(Li==="point");let Wt=hr(nt,"paint","text-halo-width",Te,w,De),Sr=hr(nt,"layout","text-offset",Te,w,De),En=hr(nt,"paint","text-translate",Te,w,De),ro=0,yr=0;if(Li=="point"){$i="center",Ei.indexOf("left")!==-1?($i="left",yr=Wt):Ei.indexOf("right")!==-1&&($i="right",yr=-Wt);let gr=hr(nt,"layout","text-rotation-alignment",Te,w,De);pt.setRotateWithView(gr=="map")}else pt.setMaxAngle(m$(hr(nt,"layout","text-max-angle",Te,w,De))*ut.length/Hi.length),pt.setRotateWithView(!1);pt.setTextAlign($i);let Ir="middle";Ei.indexOf("bottom")==0?(Ir="bottom",ro=-Wt-.5*(Rt-1)*Lt):Ei.indexOf("top")==0&&(Ir="top",ro=Wt+.5*(Rt-1)*Lt),pt.setTextBaseline(Ir);let Mo=hr(nt,"layout","text-justify",Te,w,De);pt.setJustify(Mo==="auto"?void 0:Mo),pt.setOffsetX(Sr[0]*Lt+yr+En[0]),pt.setOffsetY(Sr[1]*Lt+ro+En[1]),$.setColor(X1(hr(nt,"paint","text-color",Te,w,De),at)),pt.setFill($);let kn=X1(hr(nt,"paint","text-halo-color",Te,w,De),at);if(kn&&Wt>0){R.setColor(kn),Wt*=2;let gr=.5*Lt;R.setWidth(Wt<=gr?Wt:gr),pt.setStroke(R)}else pt.setStroke(void 0);let Lo=hr(nt,"layout","text-padding",Te,w,De),rr=pt.getPadding();Lo!==rr[0]&&(rr[0]=Lo,rr[1]=Lo,rr[2]=Lo,rr[3]=Lo),Tt.setZIndex(me)}}}if(Le>-1)return H.length=Le+1,xst&&("set"in se?se.set("mapbox-layer",Me):se.getProperties()["mapbox-layer"]=Me),H};return r.setStyle(oe),r.set("mapbox-layers",g),r.set("mapbox-source",k),r.set("mapbox-featurestate",r.get("mapbox-featurestate")||{}),oe}var xc=function(r){return r.readonly="readonly",r.readwrite="readwrite",r}(xc||{}),uTe=new At(null),hTe=new At("Indexed DB"),Ast=new At("Server Indexed DB");function Est(r,i){return r.objectStoreNames.contains(i)}function sp(r,i,e){if(!r){e("You need to use the openDatabase function to create a database before you query it!");return}Est(r,i)||e(`objectStore does not exists: ${i}`)}function Md(r,i){let e=r.transaction(i.storeName,i.dbMode);return e.onerror=i.error,e.onabort=i.abort,e}function Dd(r,i,e,n){return{storeName:i,dbMode:r,error:o=>{e(o)},abort:o=>{e(o)}}}var $ie=[];function Jl(r,i,e,n){return new Promise((o,s)=>{r||s("IndexedDB not available");let l=r.open(i,e),h;l.onsuccess=()=>{h=l.result,$ie.push(h),o(h)},l.onerror=()=>{s(`IndexedDB error: ${l.error}`)},typeof n=="function"&&(l.onupgradeneeded=p=>{n(p,h)})})}function Vie(r,i,e,n,o){return st(this,null,function*(){return new Promise((s,l)=>{if(!r)return;let h=r.open(i,e);h.onupgradeneeded=p=>st(this,null,function*(){let m=p.target.result,f=n.map(y=>st(this,null,function*(){if(!m.objectStoreNames.contains(y.store)){let _=m.createObjectStore(y.store,y.storeConfig);for(let w of y.storeSchema)_.createIndex(w.name,w.keypath,w.options)}}));yield Promise.all(f);let g=o&&o();if(g){let y=Object.keys(g).map(_=>parseInt(_,10)).filter(_=>_>p.oldVersion).sort((_,w)=>_-w);for(let _ of y)g[_](m,h.transaction)}m.close(),s()}),h.onsuccess=p=>{p.target.result.close(),s()},h.onerror=p=>{l(p)}})})}function Mst(r,i,e){if(!r||!i||!e)throw Error('Params: "dbName", "version", "storeName" are mandatory.');return new si(n=>{try{let o=i+1,s=indexedDB.open(r,o);s.onupgradeneeded=l=>{let h=l.target.result;h.deleteObjectStore(e),h.close(),console.log("onupgradeneeded"),n.next(),n.complete()},s.onerror=l=>n.error(l)}catch(o){n.error(o)}})}function Dst(r){return new Promise((i,e)=>{if(!r){e(new Error("No database to close"));return}try{r.close(),i()}catch(n){e(`Error closing database: ${n}`)}})}function ec(){return function(r,i,e){let n=e.value;return e.value=function(...o){let s=n.apply(this,o);return s instanceof si?s.pipe(Ud(()=>st(this,null,function*(){let l=$ie.map(h=>st(this,null,function*(){yield Dst(h)}));yield Promise.all(l),$ie.length=0}))):s},e}}var y$=(()=>{class r{constructor(e,n){this.dbConfigs=e,this.indexedDB=n,this.defaultDatabaseName=null,Object.values(this.dbConfigs).forEach((o,s,l)=>this.instanciateConfig(o,l.length===1))}instanciateConfig(e,n){return st(this,null,function*(){if(!e.name)throw new Error("NgxIndexedDB: Please, provide the dbName in the configuration");if((e.isDefault??!1)&&this.defaultDatabaseName)throw new Error("NgxIndexedDB: Only one database can be set as default");((e.isDefault??!1)&&!this.defaultDatabaseName||n)&&(this.defaultDatabaseName=e.name,this.selectedDb=e.name),yield Vie(this.indexedDB,e.name,e.version,e.objectStoresMeta,e.migrationFactory),Jl(this.indexedDB,e.name).then(o=>{o.version!==e.version&&(vde()&&(console.warn(`
            Your DB Config doesn't match the most recent version of the DB with name ${e.name}, please update it
            DB current version: ${o.version};
            Your configuration: ${e.version};
            `),console.warn(`Using latest version ${o.version}`)),this.dbConfigs[e.name].version=o.version),o.close()})})}get dbConfig(){return this.dbConfigs[this.selectedDb]}getDatabaseVersion(){return new si(e=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(n=>{e.next(n.version),e.complete()}).catch(n=>e.error(`error during get version of database => ${n} `))})}selectDb(e){if(e=e??this.defaultDatabaseName,!e)throw new Error("No database name specified and no default database set.");if(!Object.keys(this.dbConfigs).includes(e))throw new Error(`NgxIndexedDB: Database ${e} is not initialized.`);this.selectedDb=e}createObjectStore(e,n){return st(this,null,function*(){let o=[e];yield Vie(this.indexedDB,this.dbConfig.name,++this.dbConfig.version,o,n)})}createDynamicObjectStore(e,n){return st(this,null,function*(){let o=[e];yield Vie(this.indexedDB,this.dbConfig.name,this.dbConfig.version,o,n)})}add(e,n,o){return new si(s=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(l=>{let p=Md(l,Dd(xc.readwrite,e,g=>s.error(g))).objectStore(e),f=!!o?p.add(n,o):p.add(n);f.onsuccess=g=>st(this,null,function*(){let y=g.target.result,_=p.get(y);_.onsuccess=w=>{s.next(w.target.result),s.complete()},_.onerror=w=>{s.error(w)}}),f.onerror=g=>{s.error(g)}}).catch(l=>s.error(l))})}bulkAdd(e,n){let o=new Promise((s,l)=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(h=>{let m=Md(h,Dd(xc.readwrite,e,s,l)).objectStore(e),f=n.map(g=>new Promise(y=>{let _=g.key;delete g.key;let A=!!_?m.add(g,_):m.add(g);A.onsuccess=k=>{let R=k.target.result;y(R)}}));s(Promise.all(f))}).catch(h=>l(h))});return Xn(o)}bulkDelete(e,n){let o=n.map(s=>new Promise((l,h)=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(p=>{let m=Md(p,Dd(xc.readwrite,e,h,l));m.objectStore(e).delete(s),m.oncomplete=()=>{this.getAll(e).pipe(Tn(1)).subscribe(g=>{l(g)})}}).catch(p=>h(p))}));return Xn(Promise.all(o))}getByKey(e,n){return new si(o=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(s=>{let p=Md(s,Dd(xc.readonly,e,o.error)).objectStore(e).get(n);p.onsuccess=m=>{o.next(m.target.result),o.complete()},p.onerror=m=>{o.error(m)}}).catch(s=>o.error(s))})}bulkGet(e,n){let o=n.map(s=>this.getByKey(e,s));return new si(s=>{ts(o).subscribe(l=>{s.next(l),s.complete()})})}getByID(e,n){return new si(o=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(s=>{sp(s,e,m=>o.error(m));let p=Md(s,Dd(xc.readonly,e,o.error,o.next)).objectStore(e).get(n);p.onsuccess=m=>{o.next(m.target.result)}}).catch(s=>o.error(s))})}getByIndex(e,n,o){return new si(s=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(l=>{sp(l,e,g=>s.error(g));let f=Md(l,Dd(xc.readonly,e,s.error)).objectStore(e).index(n).get(o);f.onsuccess=g=>{s.next(g.target.result),s.complete()}}).catch(l=>s.error(l))})}getAll(e){return new si(n=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(o=>{sp(o,e,p=>n.error(p));let h=Md(o,Dd(xc.readonly,e,n.error,n.next)).objectStore(e).getAll();h.onerror=p=>{n.error(p)},h.onsuccess=({target:{result:p}})=>{n.next(p),n.complete()}}).catch(o=>n.error(o))})}update(e,n){return new si(o=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(s=>{sp(s,e,m=>o.error(m));let h=Md(s,Dd(xc.readwrite,e,m=>o.error(m))).objectStore(e),p=h.put(n);p.onsuccess=m=>st(this,null,function*(){let f=m.target.result,g=h.get(f);g.onsuccess=y=>{o.next(y.target.result),o.complete()}})}).catch(s=>o.error(s))})}bulkPut(e,n){let o;return new si(s=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(l=>{sp(l,e,p=>s.error(p)),o=Md(l,Dd(xc.readwrite,e,p=>s.error(p)));let h=o.objectStore(e);n.forEach((p,m)=>{let f=h.put(p);m===n.length-1&&(f.onsuccess=g=>{o.commit(),s.next(g.target.result),s.complete()}),f.onerror=g=>{o.abort(),s.error(g)}})}).catch(l=>{o?.abort(),s.error(l)})})}delete(e,n){return new si(o=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(s=>{sp(s,e,p=>o.error(p));let l=Md(s,Dd(xc.readwrite,e,p=>o.error(p)));l.objectStore(e).delete(n),l.onerror=p=>o.error(p),l.oncomplete=()=>{this.getAll(e).pipe(Tn(1)).subscribe({next:p=>{o.next(p)},error:p=>o.error(p),complete:()=>o.complete()})}}).catch(s=>o.error(s))})}deleteByKey(e,n){return new si(o=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(s=>{sp(s,e,p=>o.error(p));let l=Md(s,Dd(xc.readwrite,e,p=>o.error(p)));l.objectStore(e).delete(n),l.onerror=p=>o.error(p),l.oncomplete=()=>{o.next(),o.complete()}}).catch(s=>o.error(s))})}deleteAllByIndex(e,n,o,s){return new si(l=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(h=>{sp(h,e,y=>l.error(y));let g=Md(h,Dd(xc.readwrite,e,l.error)).objectStore(e).index(n).openCursor(o,s);g.onerror=y=>l.error(y),g.onsuccess=y=>{let _=y.target.result;_?(_.delete(),_.continue()):(l.next(),l.complete())}}).catch(h=>l.error(h))})}clear(e){return new si(n=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(o=>{sp(o,e,h=>n.error(h));let s=Md(o,Dd(xc.readwrite,e,h=>n.error(h)));s.objectStore(e).clear(),s.onerror=h=>n.error(h),s.oncomplete=()=>{n.next(),n.complete()}}).catch(o=>n.error(o))})}deleteDatabase(){return new si(e=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(n=>st(this,null,function*(){n.close();let o=this.indexedDB.deleteDatabase(this.dbConfig.name);o.onsuccess=()=>{e.next(),e.complete()},o.onerror=s=>e.error(s),o.onblocked=()=>{console.warn("Delete blocked: Ensure all tabs, instances, or connections are closed. Database name:",this.dbConfig.name),e.error(new Error("Unable to delete database because it's blocked"))}})).catch(n=>e.error(n))})}openCursor(e){let{storeName:n,query:o,direction:s,mode:l=xc.readonly}=e;return new si(h=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(p=>{sp(p,n,y=>h.error(y));let m=Md(p,Dd(l,n,h.error)),g=m.objectStore(n).openCursor(o,s);m.oncomplete=()=>h.complete(),g.onerror=y=>h.error(y),g.onsuccess=y=>{let _=y.target.result;_&&h.next(_)}}).catch(p=>h.error(p))})}openCursorByIndex(e){let{storeName:n,indexName:o,query:s,direction:l,mode:h=xc.readonly}=e;return new si(p=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(m=>{sp(m,n,w=>p.error(w));let f=Md(m,Dd(h,n,p.error)),_=f.objectStore(n).index(o).openCursor(s,l);f.oncomplete=()=>p.complete(),_.onerror=w=>p.error(w),_.onsuccess=w=>{let A=w.target.result;A&&p.next(A)}}).catch(m=>p.error(m))})}getAllByIndex(e,n,o,s){return new si(l=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(h=>{sp(h,e,_=>l.error(_));let g=Md(h,Dd(xc.readonly,e,l.error)).objectStore(e).index(n).openCursor(o,s),y=[];g.onerror=_=>l.error(_),g.onsuccess=_=>{let w=_.target.result;w?(y.push(w.value),w.continue()):(l.next(y),l.complete())}}).catch(h=>l.error(h))})}getAllKeysByIndex(e,n,o,s){return new si(l=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(h=>{sp(h,e,_=>l.error(_));let f=Md(h,Dd(xc.readonly,e,l.error)).objectStore(e).index(n),g=[],y=f.openKeyCursor(o,s);y.onerror=_=>l.error(_),y.onsuccess=_=>{let w=_.target.result;if(w){let{primaryKey:A,key:k}=w;g.push({primaryKey:A,key:k}),w.continue()}else l.next(g),l.complete()}}).catch(h=>l.error(h))})}count(e,n){return new si(o=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(s=>{sp(s,e,m=>o.error(m));let p=Md(s,Dd(xc.readonly,e,o.error)).objectStore(e).count(n);p.onerror=m=>o.error(m),p.onsuccess=m=>{o.next(m.target.result),o.complete()}}).catch(s=>o.error(s))})}countByIndex(e,n,o){return new si(s=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(l=>{sp(l,e,g=>s.error(g));let f=Md(l,Dd(xc.readonly,e,s.error)).objectStore(e).index(n).count(o);f.onerror=g=>s.error(g),f.onsuccess=g=>{s.next(g.target.result),s.complete()}}).catch(l=>s.error(l))})}deleteObjectStore(e){return Mst(this.dbConfig.name,++this.dbConfig.version,e)}getAllObjectStoreNames(){return new si(e=>{Jl(this.indexedDB,this.dbConfig.name,this.dbConfig.version).then(n=>{e.next(Array.from(n.objectStoreNames)),e.complete()}).catch(n=>e.error(n))})}static{this.\u0275fac=function(n){return new(n||r)(xe(uTe),xe(hTe))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return po([ec()],r.prototype,"getDatabaseVersion",null),po([ec()],r.prototype,"add",null),po([ec()],r.prototype,"bulkAdd",null),po([ec()],r.prototype,"bulkDelete",null),po([ec()],r.prototype,"getByKey",null),po([ec()],r.prototype,"bulkGet",null),po([ec()],r.prototype,"getByID",null),po([ec()],r.prototype,"getByIndex",null),po([ec()],r.prototype,"getAll",null),po([ec()],r.prototype,"update",null),po([ec()],r.prototype,"bulkPut",null),po([ec()],r.prototype,"delete",null),po([ec()],r.prototype,"deleteByKey",null),po([ec()],r.prototype,"deleteAllByIndex",null),po([ec()],r.prototype,"clear",null),po([ec()],r.prototype,"deleteDatabase",null),po([ec()],r.prototype,"openCursor",null),po([ec()],r.prototype,"openCursorByIndex",null),po([ec()],r.prototype,"getAllByIndex",null),po([ec()],r.prototype,"getAllKeysByIndex",null),po([ec()],r.prototype,"count",null),po([ec()],r.prototype,"countByIndex",null),po([ec()],r.prototype,"getAllObjectStoreNames",null),r})(),Uie=class{cmp(){return 0}databases(){return Promise.resolve([])}deleteDatabase(){return{onupgradeneeded:null,onblocked:null,onerror:null,onsuccess:null,error:null}}open(){return{onupgradeneeded:null,onblocked:null,onerror:null,onsuccess:null,error:null}}};function pTe(){QD(pTe);let r=Et(Qu),i=Et(Ast,{optional:!0})??new Uie;return rx(r)?Et(Ui).defaultView.indexedDB:i}var mTe=(...r)=>Bl([...kst(...r)]),kst=(...r)=>{let i=r.reduce((e,n)=>(e[n.name]=n,e),{});return[y$,{provide:uTe,useValue:i},{provide:hTe,useFactory:pTe}]};var Pst=["knob"],Rst=["valueIndicatorContainer"];function Fst(r,i){if(r&1&&(ne(0,"div",2,1)(2,"div",5)(3,"span",6),Ye(4),ce()()()),r&2){let e=ae();q(4),Si(e.valueIndicatorText)}}var Lst=["trackActive"],Nst=["*"];function Bst(r,i){if(r&1&&wt(0,"div"),r&2){let e=i.$implicit,n=i.$index,o=ae(3);Hr(e===0?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),vo("transform",o._calcTickMarkTransform(n))}}function jst(r,i){if(r&1&&yg(0,Bst,1,4,"div",8,cde),r&2){let e=ae(2);vg(e._tickMarks)}}function Vst(r,i){if(r&1&&(ne(0,"div",6,1),We(2,jst,2,0),ce()),r&2){let e=ae();q(2),vn(e._cachedWidth?2:-1)}}function $st(r,i){if(r&1&&wt(0,"mat-slider-visual-thumb",7),r&2){let e=ae();ee("discrete",e.discrete)("thumbPosition",1)("valueIndicatorText",e.startValueIndicatorText)}}var Xr=function(r){return r[r.START=1]="START",r[r.END=2]="END",r}(Xr||{}),I2=function(r){return r[r.ACTIVE=0]="ACTIVE",r[r.INACTIVE=1]="INACTIVE",r}(I2||{}),zie=new At("_MatSlider"),fTe=new At("_MatSliderThumb"),Ust=new At("_MatSliderRangeThumb"),gTe=new At("_MatSliderVisualThumb");var zst=(()=>{class r{constructor(e,n,o,s){this._cdr=e,this._ngZone=n,this._slider=s,this._isHovered=!1,this._isActive=!1,this._isValueIndicatorVisible=!1,this._platform=Et(Hn),this._onPointerMove=l=>{if(this._sliderInput._isFocused)return;let h=this._hostElement.getBoundingClientRect(),p=this._slider._isCursorOnSliderThumb(l,h);this._isHovered=p,p?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)},this._onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)},this._onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")},this._onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")},this._onDragStart=l=>{l.button===0&&(this._isActive=!0,this._showActiveRipple())},this._onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef),this._platform.SAFARI&&this._showHoverRipple()},this._hostElement=o.nativeElement}ngAfterViewInit(){let e=this._slider._getInput(this.thumbPosition);e&&(this._ripple.radius=24,this._sliderInput=e,this._sliderInputEl=this._sliderInput._hostElement,this._ngZone.runOutsideAngular(()=>{let n=this._sliderInputEl;n.addEventListener("pointermove",this._onPointerMove),n.addEventListener("pointerdown",this._onDragStart),n.addEventListener("pointerup",this._onDragEnd),n.addEventListener("pointerleave",this._onMouseLeave),n.addEventListener("focus",this._onFocus),n.addEventListener("blur",this._onBlur)}))}ngOnDestroy(){let e=this._sliderInputEl;e&&(e.removeEventListener("pointermove",this._onPointerMove),e.removeEventListener("pointerdown",this._onDragStart),e.removeEventListener("pointerup",this._onDragEnd),e.removeEventListener("pointerleave",this._onMouseLeave),e.removeEventListener("focus",this._onFocus),e.removeEventListener("blur",this._onBlur))}_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(e){return e?.state===Gh.FADING_IN||e?.state===Gh.VISIBLE}_showRipple(e,n){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(this.thumbPosition===Xr.START?Xr.END:Xr.START)._showValueIndicator(),!(this._slider._globalRippleOptions?.disabled&&!n)))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:e,centered:!0,persistent:!0})}_hideRipple(e){if(e?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();let n=this._getSibling();n._isShowingAnyRipple()||(this._hideValueIndicator(),n._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(this.thumbPosition===Xr.START?Xr.END:Xr.START)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}static{this.\u0275fac=function(n){return new(n||r)(ie(Ti),ie(ci),ie(Ht),ie(zie))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(n,o){if(n&1&&(Ni(fd,5),Ni(Pst,5),Ni(Rst,5)),n&2){let s;Yt(s=Kt())&&(o._ripple=s.first),Yt(s=Kt())&&(o._knob=s.first),Yt(s=Kt())&&(o._valueIndicatorContainer=s.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},standalone:!0,features:[Bi([{provide:gTe,useExisting:r}]),yt],decls:4,vars:2,consts:[["knob",""],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator-container"],[1,"mdc-slider__thumb-knob"],["matRipple","",1,"mat-mdc-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(n,o){n&1&&(We(0,Fst,5,1,"div",2),wt(1,"div",3,0)(3,"div",4)),n&2&&(vn(o.discrete?0:-1),q(3),ee("matRippleDisabled",!0))},dependencies:[fd],styles:[".mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}"],encapsulation:2,changeDetection:0})}}return r})(),v$=(()=>{class r{get disabled(){return this._disabled}set disabled(e){this._disabled=e;let n=this._getInput(Xr.END),o=this._getInput(Xr.START);n&&(n.disabled=this._disabled),o&&(o.disabled=this._disabled)}get discrete(){return this._discrete}set discrete(e){this._discrete=e,this._updateValueIndicatorUIs()}get min(){return this._min}set min(e){let n=isNaN(e)?this._min:e;this._min!==n&&this._updateMin(n)}_updateMin(e){let n=this._min;this._min=e,this._isRange?this._updateMinRange({old:n,new:e}):this._updateMinNonRange(e),this._onMinMaxOrStepChange()}_updateMinRange(e){let n=this._getInput(Xr.END),o=this._getInput(Xr.START),s=n.value,l=o.value;o.min=e.new,n.min=Math.max(e.new,o.value),o.max=Math.min(n.max,n.value),o._updateWidthInactive(),n._updateWidthInactive(),e.new<e.old?this._onTranslateXChangeBySideEffect(n,o):this._onTranslateXChangeBySideEffect(o,n),s!==n.value&&this._onValueChange(n),l!==o.value&&this._onValueChange(o)}_updateMinNonRange(e){let n=this._getInput(Xr.END);if(n){let o=n.value;n.min=e,n._updateThumbUIByValue(),this._updateTrackUI(n),o!==n.value&&this._onValueChange(n)}}get max(){return this._max}set max(e){let n=isNaN(e)?this._max:e;this._max!==n&&this._updateMax(n)}_updateMax(e){let n=this._max;this._max=e,this._isRange?this._updateMaxRange({old:n,new:e}):this._updateMaxNonRange(e),this._onMinMaxOrStepChange()}_updateMaxRange(e){let n=this._getInput(Xr.END),o=this._getInput(Xr.START),s=n.value,l=o.value;n.max=e.new,o.max=Math.min(e.new,n.value),n.min=o.value,n._updateWidthInactive(),o._updateWidthInactive(),e.new>e.old?this._onTranslateXChangeBySideEffect(o,n):this._onTranslateXChangeBySideEffect(n,o),s!==n.value&&this._onValueChange(n),l!==o.value&&this._onValueChange(o)}_updateMaxNonRange(e){let n=this._getInput(Xr.END);if(n){let o=n.value;n.max=e,n._updateThumbUIByValue(),this._updateTrackUI(n),o!==n.value&&this._onValueChange(n)}}get step(){return this._step}set step(e){let n=isNaN(e)?this._step:e;this._step!==n&&this._updateStep(n)}_updateStep(e){this._step=e,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){let e=this._getInput(Xr.END),n=this._getInput(Xr.START),o=e.value,s=n.value,l=n.value;e.min=this._min,n.max=this._max,e.step=this._step,n.step=this._step,this._platform.SAFARI&&(e.value=e.value,n.value=n.value),e.min=Math.max(this._min,n.value),n.max=Math.min(this._max,e.value),n._updateWidthInactive(),e._updateWidthInactive(),e.value<l?this._onTranslateXChangeBySideEffect(n,e):this._onTranslateXChangeBySideEffect(e,n),o!==e.value&&this._onValueChange(e),s!==n.value&&this._onValueChange(n)}_updateStepNonRange(){let e=this._getInput(Xr.END);if(e){let n=e.value;e.step=this._step,this._platform.SAFARI&&(e.value=e.value),e._updateThumbUIByValue(),n!==e.value&&this._onValueChange(e)}}constructor(e,n,o,s,l,h){this._ngZone=e,this._cdr=n,this._elementRef=o,this._dir=s,this._globalRippleOptions=l,this._disabled=!1,this._discrete=!1,this.showTickMarks=!1,this._min=0,this.disableRipple=!1,this._max=100,this._step=1,this.displayWith=p=>`${p}`,this._rippleRadius=24,this.startValueIndicatorText="",this.endValueIndicatorText="",this._isRange=!1,this._isRtl=!1,this._hasViewInitialized=!1,this._tickMarkTrackWidth=0,this._hasAnimation=!1,this._resizeTimer=null,this._platform=Et(Hn),this._knobRadius=8,this._thumbsOverlap=!1,this._noopAnimations=h==="NoopAnimations",this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl=this._dir.value==="rtl"}ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();let e=this._getInput(Xr.END),n=this._getInput(Xr.START);this._isRange=!!e&&!!n,this._cdr.detectChanges();let o=this._getThumb(Xr.END);this._rippleRadius=o._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._isRange?this._initUIRange(e,n):this._initUINonRange(e),this._updateTrackUI(e),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(e){e.initProps(),e.initUI(),this._updateValueIndicatorUI(e),this._hasViewInitialized=!0,e._updateThumbUIByValue()}_initUIRange(e,n){e.initProps(),e.initUI(),n.initProps(),n.initUI(),e._updateMinMax(),n._updateMinMax(),e._updateStaticStyles(),n._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,e._updateThumbUIByValue(),n._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl=this._dir.value==="rtl",this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){let e=this._getInput(Xr.END),n=this._getInput(Xr.START);e._setIsLeftThumb(),n._setIsLeftThumb(),e.translateX=e._calcTranslateXByValue(),n.translateX=n._calcTranslateXByValue(),e._updateStaticStyles(),n._updateStaticStyles(),e._updateWidthInactive(),n._updateWidthInactive(),e._updateThumbUIByValue(),n._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(Xr.END)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(Xr.START)._isActive||this._getThumb(Xr.END)._isActive}_getValue(e=Xr.END){let n=this._getInput(e);return n?n.value:this.min}_skipUpdate(){return!!(this._getInput(Xr.START)?._skipUIUpdate||this._getInput(Xr.END)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(e){let n=this._trackActive.nativeElement.style;n.left=e.left,n.right=e.right,n.transformOrigin=e.transformOrigin,n.transform=e.transform}_calcTickMarkTransform(e){return`translateX(${e*(this._tickMarkTrackWidth/(this._tickMarks.length-1))}px`}_onTranslateXChange(e){this._hasViewInitialized&&(this._updateThumbUI(e),this._updateTrackUI(e),this._updateOverlappingThumbUI(e))}_onTranslateXChangeBySideEffect(e,n){this._hasViewInitialized&&(e._updateThumbUIByValue(),n._updateThumbUIByValue())}_onValueChange(e){this._hasViewInitialized&&(this._updateValueIndicatorUI(e),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){let e=this._getInput(Xr.END),n=this._getInput(Xr.START);e._updateThumbUIByValue(),n._updateThumbUIByValue(),e._updateStaticStyles(),n._updateStaticStyles(),e._updateMinMax(),n._updateMinMax(),e._updateWidthInactive(),n._updateWidthInactive()}else{let e=this._getInput(Xr.END);e&&e._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_areThumbsOverlapping(){let e=this._getInput(Xr.START),n=this._getInput(Xr.END);return!e||!n?!1:n.translateX-e.translateX<20}_updateOverlappingThumbClassNames(e){let n=e.getSibling(),o=this._getThumb(e.thumbPosition);this._getThumb(n.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),o._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(e){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(e))}_updateThumbUI(e){if(this._skipUpdate())return;let n=this._getThumb(e.thumbPosition===Xr.END?Xr.END:Xr.START);n._hostElement.style.transform=`translateX(${e.translateX}px)`}_updateValueIndicatorUI(e){if(this._skipUpdate())return;let n=this.displayWith(e.value);if(this._hasViewInitialized?e._valuetext.set(n):e._hostElement.setAttribute("aria-valuetext",n),this.discrete){e.thumbPosition===Xr.START?this.startValueIndicatorText=n:this.endValueIndicatorText=n;let o=this._getThumb(e.thumbPosition);n.length<3?o._hostElement.classList.add("mdc-slider__thumb--short-value"):o._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){let e=this._getInput(Xr.END),n=this._getInput(Xr.START);e&&this._updateValueIndicatorUI(e),n&&this._updateValueIndicatorUI(n)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;let e=this._step&&this._step>0?this._step:1,o=(Math.floor(this.max/e)*e-this.min)/(this.max-this.min);this._tickMarkTrackWidth=this._cachedWidth*o-6}_updateTrackUI(e){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(e):this._updateTrackUINonRange(e))}_updateTrackUIRange(e){let n=e.getSibling();if(!n||!this._cachedWidth)return;let o=Math.abs(n.translateX-e.translateX)/this._cachedWidth;e._isLeftThumb&&this._cachedWidth?this._setTrackActiveStyles({left:"auto",right:`${this._cachedWidth-n.translateX}px`,transformOrigin:"right",transform:`scaleX(${o})`}):this._setTrackActiveStyles({left:`${n.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${o})`})}_updateTrackUINonRange(e){this._isRtl?this._setTrackActiveStyles({left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-e.fillPercentage})`}):this._setTrackActiveStyles({left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${e.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||this.step===void 0||this.min===void 0||this.max===void 0)return;let e=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(e):this._updateTickMarkUINonRange(e),this._isRtl&&this._tickMarks.reverse()}_updateTickMarkUINonRange(e){let n=this._getValue(),o=Math.max(Math.round((n-this.min)/e),0),s=Math.max(Math.round((this.max-n)/e),0);this._isRtl?o++:s++,this._tickMarks=Array(o).fill(I2.ACTIVE).concat(Array(s).fill(I2.INACTIVE))}_updateTickMarkUIRange(e){let n=this._getValue(),o=this._getValue(Xr.START),s=Math.max(Math.round((o-this.min)/e),0),l=Math.max(Math.round((n-o)/e)+1,0),h=Math.max(Math.round((this.max-n)/e),0);this._tickMarks=Array(s).fill(I2.INACTIVE).concat(Array(l).fill(I2.ACTIVE),Array(h).fill(I2.INACTIVE))}_getInput(e){if(e===Xr.END&&this._input)return this._input;if(this._inputs?.length)return e===Xr.START?this._inputs.first:this._inputs.last}_getThumb(e){return e===Xr.END?this._thumbs?.last:this._thumbs?.first}_setTransition(e){this._hasAnimation=!this._platform.IOS&&e&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}_isCursorOnSliderThumb(e,n){let o=n.width/2,s=n.x+o,l=n.y+o,h=e.clientX-s,p=e.clientY-l;return Math.pow(h,2)+Math.pow(p,2)<Math.pow(o,2)}static{this.\u0275fac=function(n){return new(n||r)(ie(ci),ie(Ti),ie(Ht),ie(To,8),ie(s_,8),ie(so,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-slider"]],contentQueries:function(n,o,s){if(n&1&&(Sn(s,fTe,5),Sn(s,Ust,4)),n&2){let l;Yt(l=Kt())&&(o._input=l.first),Yt(l=Kt())&&(o._inputs=l)}},viewQuery:function(n,o){if(n&1&&(Ni(Lst,5),Ni(gTe,5)),n&2){let s;Yt(s=Kt())&&(o._trackActive=s.first),Yt(s=Kt())&&(o._thumbs=s)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:12,hostBindings:function(n,o){n&2&&(Hr("mat-"+(o.color||"primary")),oi("mdc-slider--range",o._isRange)("mdc-slider--disabled",o.disabled)("mdc-slider--discrete",o.discrete)("mdc-slider--tick-marks",o.showTickMarks)("_mat-animation-noopable",o._noopAnimations))},inputs:{disabled:[2,"disabled","disabled",Xt],discrete:[2,"discrete","discrete",Xt],showTickMarks:[2,"showTickMarks","showTickMarks",Xt],min:[2,"min","min",Oo],color:"color",disableRipple:[2,"disableRipple","disableRipple",Xt],max:[2,"max","max",Oo],step:[2,"step","step",Oo],displayWith:"displayWith"},exportAs:["matSlider"],standalone:!0,features:[Bi([{provide:zie,useExisting:r}]),an,yt],ngContentSelectors:Nst,decls:9,vars:5,consts:[["trackActive",""],["tickMarkContainer",""],[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],[1,"mdc-slider__tick-marks"],[3,"discrete","thumbPosition","valueIndicatorText"],[3,"class","transform"]],template:function(n,o){n&1&&(Qi(),pi(0),ne(1,"div",2),wt(2,"div",3),ne(3,"div",4),wt(4,"div",5,0),ce(),We(6,Vst,3,1,"div",6),ce(),We(7,$st,1,3,"mat-slider-visual-thumb",7),wt(8,"mat-slider-visual-thumb",7)),n&2&&(q(6),vn(o.showTickMarks?6:-1),q(),vn(o._isRange?7:-1),q(),ee("discrete",o.discrete)("thumbPosition",2)("valueIndicatorText",o.endValueIndicatorText))},dependencies:[zst],styles:['.mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%;pointer-events:none;height:var(--mdc-slider-inactive-track-height)}.mdc-slider__track--active,.mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider__track--active{overflow:hidden;border-radius:var(--mdc-slider-active-track-shape, var(--mat-app-corner-full));height:var(--mdc-slider-active-track-height);top:calc((var(--mdc-slider-inactive-track-height) - var(--mdc-slider-active-track-height))/2)}.mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;transform-origin:left;transition:transform 80ms ease;border-color:var(--mdc-slider-active-track-color, var(--mat-app-primary));border-top-width:var(--mdc-slider-active-track-height)}.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color, var(--mat-app-on-surface))}[dir=rtl] .mdc-slider__track--active_fill{-webkit-transform-origin:right;transform-origin:right}.mdc-slider__track--inactive{left:0;top:0;opacity:.24;background-color:var(--mdc-slider-inactive-track-color, var(--mat-app-surface-variant));height:var(--mdc-slider-inactive-track-height);border-radius:var(--mdc-slider-inactive-track-shape, var(--mat-app-corner-full))}.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color, var(--mat-app-on-surface));opacity:.24}.mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.cdk-high-contrast-active .mdc-slider__track--inactive::before{border-color:CanvasText}.mdc-slider__value-indicator-container{bottom:44px;left:50%;pointer-events:none;position:absolute;transform:translateX(-50%);transform:var(--mat-slider-value-indicator-container-transform)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider__value-indicator{display:flex;align-items:center;border-radius:4px;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom;opacity:1;transition:transform 100ms cubic-bezier(0.4, 0, 1, 1);word-break:normal;background-color:var(--mdc-slider-label-container-color, var(--mat-app-primary));color:var(--mdc-slider-label-label-text-color, var(--mat-app-on-primary));width:var(--mat-slider-value-indicator-width);height:var(--mat-slider-value-indicator-height);padding:var(--mat-slider-value-indicator-padding);opacity:var(--mat-slider-value-indicator-opacity);border-radius:var(--mat-slider-value-indicator-border-radius)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}.mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;display:var(--mat-slider-value-indicator-caret-display);border-top-color:var(--mdc-slider-label-container-color, var(--mat-app-primary))}.mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.cdk-high-contrast-active .mdc-slider__value-indicator::after{border-color:CanvasText}.mdc-slider__value-indicator-text{text-align:center;width:var(--mat-slider-value-indicator-width);transform:var(--mat-slider-value-indicator-text-transform);font-family:var(--mdc-slider-label-label-text-font, var(--mat-app-label-medium-font));font-size:var(--mdc-slider-label-label-text-size, var(--mat-app-label-medium-size));font-weight:var(--mdc-slider-label-label-text-weight, var(--mat-app-label-medium-weight));line-height:var(--mdc-slider-label-label-text-line-height, var(--mat-app-label-medium-line-height));letter-spacing:var(--mdc-slider-label-label-text-tracking, var(--mat-app-label-medium-tracking))}.mdc-slider__thumb{-webkit-user-select:none;user-select:none;display:flex;left:-24px;outline:none;position:absolute;height:48px;width:48px;pointer-events:none}.mdc-slider--discrete .mdc-slider__thumb{transition:transform 80ms ease}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__thumb--top{z-index:1}.mdc-slider__thumb-knob{position:absolute;box-sizing:border-box;left:50%;top:50%;transform:translate(-50%, -50%);border-style:solid;width:var(--mdc-slider-handle-width);height:var(--mdc-slider-handle-height);border-width:calc(var(--mdc-slider-handle-height)/2) calc(var(--mdc-slider-handle-width)/2);box-shadow:var(--mdc-slider-handle-elevation, var(--mat-app-level1));background-color:var(--mdc-slider-handle-color, var(--mat-app-primary));border-color:var(--mdc-slider-handle-color, var(--mat-app-primary));border-radius:var(--mdc-slider-handle-shape, var(--mat-app-corner-full))}.mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color, var(--mat-app-primary));border-color:var(--mdc-slider-hover-handle-color, var(--mat-app-primary))}.mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color, var(--mat-app-primary));border-color:var(--mdc-slider-focus-handle-color, var(--mat-app-primary))}.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color, var(--mat-app-on-surface));border-color:var(--mdc-slider-disabled-handle-color, var(--mat-app-on-surface))}.mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border:solid 1px #fff;box-sizing:content-box;border-color:var(--mdc-slider-with-overlap-handle-outline-color, var(--mat-app-on-primary));border-width:var(--mdc-slider-with-overlap-handle-outline-width)}.mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider__tick-mark--active,.mdc-slider__tick-mark--inactive{width:var(--mdc-slider-with-tick-marks-container-size);height:var(--mdc-slider-with-tick-marks-container-size);border-radius:var(--mdc-slider-with-tick-marks-container-shape, var(--mat-app-corner-full))}.mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity);background-color:var(--mdc-slider-with-tick-marks-inactive-container-color, var(--mat-app-on-surface-variant))}.mdc-slider--disabled .mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity);background-color:var(--mdc-slider-with-tick-marks-disabled-container-color, var(--mat-app-on-surface))}.mdc-slider__tick-mark--active{opacity:var(--mdc-slider-with-tick-marks-active-container-opacity);background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mat-app-on-primary))}.mdc-slider__input{cursor:pointer;left:2px;margin:0;height:44px;opacity:0;position:absolute;top:2px;width:44px;box-sizing:content-box}.mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;cursor:pointer;height:48px;margin:0 8px;position:relative;touch-action:pan-y;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider.mdc-slider--disabled{cursor:auto;opacity:.38}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-slider-ripple-color, var(--mat-app-primary))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-slider-hover-state-layer-color)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-slider-focus-state-layer-color)}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-mdc-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return r})();var Gst={provide:Gc,useExisting:Go(()=>Gie),multi:!0};var Gie=(()=>{class r{get value(){return Oo(this._hostElement.value,0)}set value(e){e=isNaN(e)?0:e;let n=e+"";if(!this._hasSetInitialValue){this._initialValue=n;return}this._isActive||this._setValue(n)}_setValue(e){this._hostElement.value=e,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges(),this._slider._cdr.markForCheck()}get translateX(){return this._slider.min>=this._slider.max?(this._translateX=this._tickMarkOffset,this._translateX):(this._translateX===void 0&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(e){this._translateX=e}get min(){return Oo(this._hostElement.min,0)}set min(e){this._hostElement.min=e+"",this._cdr.detectChanges()}get max(){return Oo(this._hostElement.max,0)}set max(e){this._hostElement.max=e+"",this._cdr.detectChanges()}get step(){return Oo(this._hostElement.step,0)}set step(e){this._hostElement.step=e+"",this._cdr.detectChanges()}get disabled(){return Xt(this._hostElement.disabled)}set disabled(e){this._hostElement.disabled=e,this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?this._translateX===0?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_setIsFocused(e){this._isFocused=e}constructor(e,n,o,s){this._ngZone=e,this._elementRef=n,this._cdr=o,this._slider=s,this.valueChange=new it,this.dragStart=new it,this.dragEnd=new it,this.thumbPosition=Xr.END,this._valuetext=Vl(""),this._knobRadius=8,this._tickMarkOffset=3,this._isActive=!1,this._isFocused=!1,this._hasSetInitialValue=!1,this._destroyed=new Dt,this._skipUIUpdate=!1,this._onTouchedFn=()=>{},this._isControlInitialized=!1,this._platform=Et(Hn),this._hostElement=n.nativeElement,this._ngZone.runOutsideAngular(()=>{this._hostElement.addEventListener("pointerdown",this._onPointerDown.bind(this)),this._hostElement.addEventListener("pointermove",this._onPointerMove.bind(this)),this._hostElement.addEventListener("pointerup",this._onPointerUp.bind(this))})}ngOnDestroy(){this._hostElement.removeEventListener("pointerdown",this._onPointerDown),this._hostElement.removeEventListener("pointermove",this._onPointerMove),this._hostElement.removeEventListener("pointerup",this._onPointerUp),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,this._initialValue===void 0?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._slider._setTransition(!1),this._slider._updateTrackUI(this),this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn?.(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(e){if(!(this.disabled||e.button!==0)){if(this._platform.IOS){let n=this._slider._isCursorOnSliderThumb(e,this._slider._getThumb(this.thumbPosition)._hostElement.getBoundingClientRect());this._isActive=n,this._updateWidthActive(),this._slider._updateDimensions();return}this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(e,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(e),this.dragStart.emit({source:this,parent:this._slider,value:this.value}))}}_handleValueCorrection(e){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(e)},0)}_fixValue(e){let n=e.clientX-this._slider._cachedLeft,o=this._slider._cachedWidth,s=this._slider.step===0?1:this._slider.step,l=Math.floor((this._slider.max-this._slider.min)/s),h=this._slider._isRtl?1-n/o:n/o,m=Math.round(h*l)/l*(this._slider.max-this._slider.min)+this._slider.min,f=Math.round(m/s)*s,g=this.value;if(f===g){this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation});return}this.value=f,this.valueChange.emit(this.value),this._onChangeFn?.(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation})}_onPointerMove(e){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(e)}_onPointerUp(){this._isActive&&(this._isActive=!1,this._platform.SAFARI&&this._setIsFocused(!1),this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive(),this._platform.IOS?10:0))}_clamp(e){let n=this._tickMarkOffset,o=this._slider._cachedWidth-this._tickMarkOffset;return Math.max(Math.min(e,o),n)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset:this.percentage*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset}_calcTranslateXByPointerEvent(e){return e.clientX-this._slider._cachedLeft}_updateWidthActive(){}_updateWidthInactive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding-this._tickMarkOffset*2}px)`,this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`}_updateThumbUIByValue(e){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(e)}_updateThumbUIByPointerEvent(e,n){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(e)),this._updateThumbUI(n)}_updateThumbUI(e){this._slider._setTransition(!!e?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(e){(this._isControlInitialized||e!==null)&&(this.value=e)}registerOnChange(e){this._onChangeFn=e,this._isControlInitialized=!0}registerOnTouched(e){this._onTouchedFn=e}setDisabledState(e){this.disabled=e}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}static{this.\u0275fac=function(n){return new(n||r)(ie(ci),ie(Ht),ie(Ti),ie(zie))}}static{this.\u0275dir=Pt({type:r,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(n,o){n&1&&Oe("change",function(){return o._onChange()})("input",function(){return o._onInput()})("blur",function(){return o._onBlur()})("focus",function(){return o._onFocus()}),n&2&&yi("aria-valuetext",o._valuetext())},inputs:{value:[2,"value","value",Oo]},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],standalone:!0,features:[Bi([Gst,{provide:fTe,useExisting:r}]),an]})}}return r})();var _Te=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[on,Hh]})}}return r})();var yTe=(()=>{class r{allowedExtensions=[];filesDropped=new it;filesInvalid=new it;background="inherit";onDragOver(e){e.preventDefault(),e.stopPropagation(),this.background="#999"}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.background="inherit"}onDrop(e){if(e.preventDefault(),e.stopPropagation(),e.alreadyFired)return;e.alreadyFired=!0,this.background="inherit";let n=this.validExtensions(e);n.valid.length&&this.filesDropped.emit(n.valid),n.invalid.length&&this.filesInvalid.emit(n.invalid)}validExtensions(e){let n=e.dataTransfer.files,o={valid:[],invalid:[]};if(n.length>0)for(let s of n){let l=s.name.split(".")[s.name.split(".").length-1];this.allowedExtensions.length===0||this.allowedExtensions.lastIndexOf(l)!==-1&&s.size!==0?o.valid.push(s):o.invalid.push(s)}return o}static \u0275fac=function(n){return new(n||r)};static \u0275dir=Pt({type:r,selectors:[["","igoDragAndDrop",""]],hostVars:2,hostBindings:function(n,o){n&1&&Oe("dragover",function(l){return o.onDragOver(l)})("dragleave",function(l){return o.onDragLeave(l)})("drop",function(l){return o.onDrop(l)}),n&2&&vo("background",o.background)},inputs:{allowedExtensions:"allowedExtensions"},outputs:{filesDropped:"filesDropped",filesInvalid:"filesInvalid"},standalone:!0})}return r})();var Wst=["*",[["","panelLeftButton",""]],[["","panelHeader",""]],[["","panelRightButton",""]]],qst=["*","[panelLeftButton]","[panelHeader]","[panelRightButton]"],Yst=r=>({"igo-cursor-pointer":r});function Kst(r,i){if(r&1&&(ne(0,"div",2)(1,"div",3),pi(2,1),ce(),ne(3,"h3",4),Ye(4),pi(5,2),ce(),ne(6,"div",5),pi(7,3),ce()()),r&2){let e=ae();ee("ngClass",fo(2,Yst,e.cursorPointer===!0)),q(4),Qt(" ",e.title," ")}}var T2=(()=>{class r{title;get withHeader(){return this._withHeader}set withHeader(e){this._withHeader=e}_withHeader=!0;cursorPointer=!1;static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-panel"]],hostVars:2,hostBindings:function(n,o){n&2&&oi("igo-panel-with-header",o.withHeader)},inputs:{title:"title",withHeader:"withHeader",cursorPointer:"cursorPointer"},standalone:!0,features:[yt],ngContentSelectors:qst,decls:3,vars:1,consts:[["class","igo-panel-header","title","",3,"ngClass",4,"ngIf"],["title","",1,"igo-panel-content"],["title","",1,"igo-panel-header",3,"ngClass"],[1,"panel-left"],[1,"igo-panel-title"],[1,"panel-right"]],template:function(n,o){n&1&&(Qi(Wst),We(0,Kst,8,4,"div",0),ne(1,"div",1),pi(2),ce()),n&2&&ee("ngIf",o.withHeader)},dependencies:[gn,qr],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;overflow:hidden}[_nghost-%COMP%]   igo-interactive-tour[_ngcontent-%COMP%]{position:absolute;top:0;right:0}[_nghost-%COMP%]   .igo-panel-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:48px;text-align:center}[_nghost-%COMP%]   .igo-panel-title[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;margin:0;font-weight:600;flex:1}[_nghost-%COMP%]   .igo-panel-content[_ngcontent-%COMP%]{flex:1;overflow:auto}[_nghost-%COMP%]   .igo-cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .panel-left[_ngcontent-%COMP%], [_nghost-%COMP%]   .panel-right[_ngcontent-%COMP%]{display:flex;min-width:40px}[_nghost-%COMP%]   .panel-right[_ngcontent-%COMP%]:not(:empty){padding-right:4px}"],changeDetection:0})}return r})();var MAe=ld(CTe(),1);var DAe=ld(STe(),1);var w$=(()=>{class r{config;options;get paq(){return window._paq=window._paq||[]}constructor(e){this.config=e,this.options=this.config.getConfig("analytics")||{},this.options.provider==="matomo"&&this.initMatomo()}initMatomo(){if(!this.options.url||!this.options.id)return;let e=this.options.url.substr(-1)==="/"?this.options.url+"matomo":this.options.url;(()=>{this.paq.push(["setTrackerUrl",e+".php"]),this.paq.push(["setSiteId",this.options.id]),this.paq.push(["setSecureCookie",location.protocol==="https:"]);let n=document.createElement("script"),o=document.getElementsByTagName("script")[0];n.type="text/javascript",n.async=!0,n.defer=!0,n.src=e+".js",o.parentNode.insertBefore(n,o)})()}setUser(e,n){if(this.options.provider==="matomo"){if(!e)this.paq.push(["resetUserId"]),this.paq.push(["deleteCustomVariable",1,"user"]),this.paq.push(["deleteCustomVariable",2,"name"]),this.paq.push(["deleteCustomVariable",3,"profils"]);else{this.paq.push(["setUserId",e.id]);let o=`${e.firstName} ${e.lastName}`;this.paq.push(["setCustomVariable",1,"user",e.sourceId,"visit"]),this.paq.push(["setCustomVariable",2,"name",o,"visit"]),this.paq.push(["setCustomVariable",3,"profils",n,"visit"])}this.paq.push(["trackPageView"]),this.paq.push(["enableLinkTracking"])}}trackSearch(e,n){this.options.provider==="matomo"&&this.paq.push(["trackSiteSearch",e,!1,n])}trackEvent(e,n,o){this.options.provider==="matomo"&&this.paq.push(["trackEvent",e,n,o])}trackLayer(e,n,o){this.options.provider==="matomo"&&this.paq.push(["trackEvent",e,n,o])}static \u0275fac=function(n){return new(n||r)(xe(Ri))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Xst=["*",[["mat-chip-avatar"],["","matChipAvatar",""]],[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],Jst=["*","mat-chip-avatar, [matChipAvatar]","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"];function eat(r,i){r&1&&(ne(0,"span",3),pi(1,1),ce())}function tat(r,i){r&1&&(ne(0,"span",6),pi(1,2),ce())}var iat=["*"];var nat=new At("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})}),TTe=new At("MatChipAvatar"),ATe=new At("MatChipTrailingIcon"),Yie=new At("MatChipRemove"),ETe=new At("MatChip"),Kie=(()=>{class r{get disabled(){return this._disabled||this._parentChip.disabled}set disabled(e){this._disabled=e}_getDisabledAttribute(){return this.disabled&&!this._allowFocusWhenDisabled?"":null}_getTabindex(){return this.disabled&&!this._allowFocusWhenDisabled||!this.isInteractive?null:this.tabIndex.toString()}constructor(e,n){this._elementRef=e,this._parentChip=n,this.isInteractive=!0,this._isPrimary=!0,this._disabled=!1,this.tabIndex=-1,this._allowFocusWhenDisabled=!1,e.nativeElement.nodeName==="BUTTON"&&e.nativeElement.setAttribute("type","button")}focus(){this._elementRef.nativeElement.focus()}_handleClick(e){!this.disabled&&this.isInteractive&&this._isPrimary&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!this.disabled&&this.isInteractive&&this._isPrimary&&!this._parentChip._isEditing&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(ETe))}}static{this.\u0275dir=Pt({type:r,selectors:[["","matChipAction",""]],hostAttrs:[1,"mdc-evolution-chip__action","mat-mdc-chip-action"],hostVars:9,hostBindings:function(n,o){n&1&&Oe("click",function(l){return o._handleClick(l)})("keydown",function(l){return o._handleKeydown(l)}),n&2&&(yi("tabindex",o._getTabindex())("disabled",o._getDisabledAttribute())("aria-disabled",o.disabled),oi("mdc-evolution-chip__action--primary",o._isPrimary)("mdc-evolution-chip__action--presentational",!o.isInteractive)("mdc-evolution-chip__action--trailing",!o._isPrimary))},inputs:{isInteractive:"isInteractive",disabled:[2,"disabled","disabled",Xt],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?-1:Oo(e)],_allowFocusWhenDisabled:"_allowFocusWhenDisabled"},standalone:!0,features:[an]})}}return r})();var MTe=(()=>{class r extends Kie{constructor(){super(...arguments),this._isPrimary=!1}_handleClick(e){this.disabled||(e.stopPropagation(),e.preventDefault(),this._parentChip.remove())}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!this.disabled&&(e.stopPropagation(),e.preventDefault(),this._parentChip.remove())}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})()}static{this.\u0275dir=Pt({type:r,selectors:[["","matChipRemove",""]],hostAttrs:["role","button",1,"mat-mdc-chip-remove","mat-mdc-chip-trailing-icon","mat-mdc-focus-indicator","mdc-evolution-chip__icon","mdc-evolution-chip__icon--trailing"],hostVars:1,hostBindings:function(n,o){n&2&&yi("aria-hidden",null)},standalone:!0,features:[Bi([{provide:Yie,useExisting:r}]),fn]})}}return r})(),rat=0,Zie=(()=>{class r{_hasFocus(){return this._hasFocusInternal}get value(){return this._value!==void 0?this._value:this._textElement.textContent.trim()}set value(e){this._value=e}get disabled(){return this._disabled||this._chipListDisabled}set disabled(e){this._disabled=e}get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}constructor(e,n,o,s,l,h,p){this._changeDetectorRef=e,this._elementRef=n,this._ngZone=o,this._focusMonitor=s,this._globalRippleOptions=p,this._onFocus=new Dt,this._onBlur=new Dt,this.role=null,this._hasFocusInternal=!1,this.id=`mat-mdc-chip-${rat++}`,this.ariaLabel=null,this.ariaDescription=null,this._ariaDescriptionId=`${this.id}-aria-description`,this._chipListDisabled=!1,this.removable=!0,this.highlighted=!1,this.disableRipple=!1,this._disabled=!1,this.removed=new it,this.destroyed=new it,this.basicChipAttrName="mat-basic-chip",this._rippleLoader=Et(XN),this._injector=Et(yn),this._document=l,this._animationsDisabled=h==="NoopAnimations",this._monitorFocus(),this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-chip-ripple",disabled:this._isRippleDisabled()})}ngOnInit(){let e=this._elementRef.nativeElement;this._isBasicChip=e.hasAttribute(this.basicChipAttrName)||e.tagName.toLowerCase()===this.basicChipAttrName}ngAfterViewInit(){this._textElement=this._elementRef.nativeElement.querySelector(".mat-mdc-chip-action-label"),this._pendingFocus&&(this._pendingFocus=!1,this.focus())}ngAfterContentInit(){this._actionChanges=vr(this._allLeadingIcons.changes,this._allTrailingIcons.changes,this._allRemoveIcons.changes).subscribe(()=>this._changeDetectorRef.markForCheck())}ngDoCheck(){this._rippleLoader.setDisabled(this._elementRef.nativeElement,this._isRippleDisabled())}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement),this._actionChanges?.unsubscribe(),this.destroyed.emit({chip:this}),this.destroyed.complete()}remove(){this.removable&&this.removed.emit({chip:this})}_isRippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||this._isBasicChip||!!this._globalRippleOptions?.disabled}_hasTrailingIcon(){return!!(this.trailingIcon||this.removeIcon)}_handleKeydown(e){(e.keyCode===8&&!e.repeat||e.keyCode===46)&&(e.preventDefault(),this.remove())}focus(){this.disabled||(this.primaryAction?this.primaryAction.focus():this._pendingFocus=!0)}_getSourceAction(e){return this._getActions().find(n=>{let o=n._elementRef.nativeElement;return o===e||o.contains(e)})}_getActions(){let e=[];return this.primaryAction&&e.push(this.primaryAction),this.removeIcon&&e.push(this.removeIcon),this.trailingIcon&&e.push(this.trailingIcon),e}_handlePrimaryActionInteraction(){}_monitorFocus(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{let n=e!==null;n!==this._hasFocusInternal&&(this._hasFocusInternal=n,n?this._onFocus.next({chip:this}):ks(()=>this._ngZone.run(()=>this._onBlur.next({chip:this})),{injector:this._injector}))})}static{this.\u0275fac=function(n){return new(n||r)(ie(Ti),ie(Ht),ie(ci),ie(il),ie(Ui),ie(so,8),ie(s_,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(n,o,s){if(n&1&&(Sn(s,TTe,5),Sn(s,ATe,5),Sn(s,Yie,5),Sn(s,TTe,5),Sn(s,ATe,5),Sn(s,Yie,5)),n&2){let l;Yt(l=Kt())&&(o.leadingIcon=l.first),Yt(l=Kt())&&(o.trailingIcon=l.first),Yt(l=Kt())&&(o.removeIcon=l.first),Yt(l=Kt())&&(o._allLeadingIcons=l),Yt(l=Kt())&&(o._allTrailingIcons=l),Yt(l=Kt())&&(o._allRemoveIcons=l)}},viewQuery:function(n,o){if(n&1&&Ni(Kie,5),n&2){let s;Yt(s=Kt())&&(o.primaryAction=s.first)}},hostAttrs:[1,"mat-mdc-chip"],hostVars:31,hostBindings:function(n,o){n&1&&Oe("keydown",function(l){return o._handleKeydown(l)}),n&2&&(hd("id",o.id),yi("role",o.role)("aria-label",o.ariaLabel),Hr("mat-"+(o.color||"primary")),oi("mdc-evolution-chip",!o._isBasicChip)("mdc-evolution-chip--disabled",o.disabled)("mdc-evolution-chip--with-trailing-action",o._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",o.leadingIcon)("mdc-evolution-chip--with-primary-icon",o.leadingIcon)("mdc-evolution-chip--with-avatar",o.leadingIcon)("mat-mdc-chip-with-avatar",o.leadingIcon)("mat-mdc-chip-highlighted",o.highlighted)("mat-mdc-chip-disabled",o.disabled)("mat-mdc-basic-chip",o._isBasicChip)("mat-mdc-standard-chip",!o._isBasicChip)("mat-mdc-chip-with-trailing-icon",o._hasTrailingIcon())("_mat-animation-noopable",o._animationsDisabled))},inputs:{role:"role",id:"id",ariaLabel:[0,"aria-label","ariaLabel"],ariaDescription:[0,"aria-description","ariaDescription"],value:"value",color:"color",removable:[2,"removable","removable",Xt],highlighted:[2,"highlighted","highlighted",Xt],disableRipple:[2,"disableRipple","disableRipple",Xt],disabled:[2,"disabled","disabled",Xt]},outputs:{removed:"removed",destroyed:"destroyed"},exportAs:["matChip"],standalone:!0,features:[Bi([{provide:ETe,useExisting:r}]),an,yt],ngContentSelectors:Jst,decls:8,vars:3,consts:[[1,"mat-mdc-chip-focus-overlay"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary"],["matChipAction","",3,"isInteractive"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],[1,"mat-mdc-chip-primary-focus-indicator","mat-mdc-focus-indicator"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"]],template:function(n,o){n&1&&(Qi(Xst),wt(0,"span",0),ne(1,"span",1)(2,"span",2),We(3,eat,2,0,"span",3),ne(4,"span",4),pi(5),wt(6,"span",5),ce()()(),We(7,tat,2,0,"span",6)),n&2&&(q(2),ee("isInteractive",!1),q(),vn(o.leadingIcon?3:-1),q(4),vn(o._hasTrailingIcon()?7:-1))},dependencies:[Kie],styles:['.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{flex-basis:100%;overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}.mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit;overflow-x:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-outline-width);border-radius:var(--mdc-chip-container-shape-radius);box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1;border-style:solid}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-outline-color, var(--mat-app-outline))}.mdc-evolution-chip__action--primary:not(.mdc-evolution-chip__action--presentational):not(.mdc-ripple-upgraded):focus::before{border-color:var(--mdc-chip-focus-outline-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-disabled-outline-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-basic-chip .mdc-evolution-chip__action--primary{font:inherit}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip__action--trailing{position:relative;overflow:visible}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-trailing-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-color, var(--mat-app-on-surface))}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip__text-label{-webkit-user-select:none;user-select:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__text-label{font-family:var(--mdc-chip-label-text-font, var(--mat-app-label-large-font));line-height:var(--mdc-chip-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mdc-chip-label-text-size, var(--mat-app-label-large-size));font-weight:var(--mdc-chip-label-text-weight, var(--mat-app-label-large-weight));letter-spacing:var(--mdc-chip-label-text-tracking, var(--mat-app-label-large-tracking))}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-label-text-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-selected-label-text-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label,.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color)}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{width:var(--mdc-chip-with-avatar-avatar-size);height:var(--mdc-chip-with-avatar-avatar-size);font-size:var(--mdc-chip-with-avatar-avatar-size)}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%;height:20px;width:20px}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-disabled-icon-color, var(--mat-app-on-surface))}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.cdk-high-contrast-active .mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove{opacity:calc(var(--mat-chip-trailing-action-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove:focus{opacity:calc(var(--mat-chip-trailing-action-focus-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mat-mdc-standard-chip{border-radius:var(--mdc-chip-container-shape-radius);height:var(--mdc-chip-container-height)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-selected-container-color, var(--mat-app-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-flat-disabled-selected-container-color)}.cdk-high-contrast-active .mat-mdc-standard-chip{outline:solid 1px}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mdc-chip-with-avatar-avatar-shape-radius);width:var(--mdc-chip-with-icon-icon-size);height:var(--mdc-chip-with-icon-icon-size);font-size:var(--mdc-chip-with-icon-icon-size)}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-disabled-icon-color, var(--mat-app-on-surface))}.mat-mdc-chip-highlighted{--mdc-chip-with-icon-icon-color:var(--mdc-chip-with-icon-selected-icon-color, var(--mat-app-on-secondary-container));--mdc-chip-elevated-container-color:var(--mdc-chip-elevated-selected-container-color, var(--mat-app-secondary-container));--mdc-chip-label-text-color:var(--mdc-chip-selected-label-text-color, var(--mat-app-on-secondary-container));--mdc-chip-outline-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-chip-selected .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color, var(--mat-app-on-secondary-container))}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-hover-state-layer-color, var(--mat-app-on-surface-variant));opacity:var(--mdc-chip-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip-focus-overlay .mat-mdc-chip-selected:hover,.mat-mdc-chip-highlighted:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-hover-state-layer-color, var(--mat-app-on-secondary-container));opacity:var(--mdc-chip-selected-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color, var(--mat-app-on-surface-variant));opacity:var(--mdc-chip-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-chip-selected.cdk-focused .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color, var(--mat-app-on-secondary-container));opacity:var(--mdc-chip-selected-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mdc-evolution-chip--disabled:not(.mdc-evolution-chip--selected) .mat-mdc-chip-avatar{opacity:var(--mdc-chip-with-avatar-disabled-avatar-opacity)}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{opacity:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity)}.mdc-evolution-chip--disabled.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{opacity:var(--mdc-chip-with-icon-disabled-icon-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:var(--mat-chip-disabled-container-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-trailing-icon-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-disabled-trailing-icon-color, var(--mat-app-on-surface))}.mat-mdc-chip-remove{opacity:var(--mat-chip-trailing-action-opacity)}.mat-mdc-chip-remove:focus{opacity:var(--mat-chip-trailing-action-focus-opacity)}.mat-mdc-chip-remove::after{background-color:var(--mat-chip-trailing-action-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-chip-remove:hover::after{opacity:var(--mat-chip-trailing-action-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip-remove:focus::after{opacity:var(--mat-chip-trailing-action-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-chip-selected .mat-mdc-chip-remove::after,.mat-mdc-chip-highlighted .mat-mdc-chip-remove::after{background-color:var(--mat-chip-selected-trailing-action-state-layer-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip .mat-ripple.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative;z-index:0}.mat-mdc-chip-action-label{text-align:left;z-index:1}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-chip-remove::before{margin:calc(var(--mat-mdc-focus-indicator-border-width, 3px)*-1);left:8px;right:8px}.mat-mdc-chip-remove::after{content:"";display:block;opacity:0;position:absolute;top:-3px;bottom:-3px;left:5px;right:5px;border-radius:50%;box-sizing:border-box;padding:12px;margin:-12px;background-clip:content-box}.mat-mdc-chip-remove .mat-icon{width:18px;height:18px;font-size:18px;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}.cdk-high-contrast-active .mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}.mat-mdc-chip-action:focus .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return r})();var DTe=(()=>{class r{get chipFocusChanges(){return this._getChipStream(e=>e._onFocus)}get chipDestroyedChanges(){return this._getChipStream(e=>e.destroyed)}get chipRemovedChanges(){return this._getChipStream(e=>e.removed)}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._syncChipsState()}get empty(){return!this._chips||this._chips.length===0}get role(){return this._explicitRole?this._explicitRole:this.empty?null:this._defaultRole}set role(e){this._explicitRole=e}get focused(){return this._hasFocusedChip()}constructor(e,n,o){this._elementRef=e,this._changeDetectorRef=n,this._dir=o,this._lastDestroyedFocusedChipIndex=null,this._destroyed=new Dt,this._defaultRole="presentation",this._disabled=!1,this.tabIndex=0,this._explicitRole=null,this._chipActions=new _p}ngAfterViewInit(){this._setUpFocusManagement(),this._trackChipSetChanges(),this._trackDestroyedFocusedChip()}ngOnDestroy(){this._keyManager?.destroy(),this._chipActions.destroy(),this._destroyed.next(),this._destroyed.complete()}_hasFocusedChip(){return this._chips&&this._chips.some(e=>e._hasFocus())}_syncChipsState(){this._chips?.forEach(e=>{e._chipListDisabled=this._disabled,e._changeDetectorRef.markForCheck()})}focus(){}_handleKeydown(e){this._originatesFromChip(e)&&this._keyManager.onKeydown(e)}_isValidIndex(e){return e>=0&&e<this._chips.length}_allowFocusEscape(){let e=this._elementRef.nativeElement.tabIndex;e!==-1&&(this._elementRef.nativeElement.tabIndex=-1,setTimeout(()=>this._elementRef.nativeElement.tabIndex=e))}_getChipStream(e){return this._chips.changes.pipe(yo(null),jr(()=>vr(...this._chips.map(e))))}_originatesFromChip(e){let n=e.target;for(;n&&n!==this._elementRef.nativeElement;){if(n.classList.contains("mat-mdc-chip"))return!0;n=n.parentElement}return!1}_setUpFocusManagement(){this._chips.changes.pipe(yo(this._chips)).subscribe(e=>{let n=[];e.forEach(o=>o._getActions().forEach(s=>n.push(s))),this._chipActions.reset(n),this._chipActions.notifyOnChanges()}),this._keyManager=new bw(this._chipActions).withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr").withHomeAndEnd().skipPredicate(e=>this._skipPredicate(e)),this.chipFocusChanges.pipe(rn(this._destroyed)).subscribe(({chip:e})=>{let n=e._getSourceAction(document.activeElement);n&&this._keyManager.updateActiveItem(n)}),this._dir?.change.pipe(rn(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e))}_skipPredicate(e){return!e.isInteractive||e.disabled}_trackChipSetChanges(){this._chips.changes.pipe(yo(null),rn(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>this._syncChipsState()),this._redirectDestroyedChipFocus()})}_trackDestroyedFocusedChip(){this.chipDestroyedChanges.pipe(rn(this._destroyed)).subscribe(e=>{let o=this._chips.toArray().indexOf(e.chip);this._isValidIndex(o)&&e.chip._hasFocus()&&(this._lastDestroyedFocusedChipIndex=o)})}_redirectDestroyedChipFocus(){if(this._lastDestroyedFocusedChipIndex!=null){if(this._chips.length){let e=Math.min(this._lastDestroyedFocusedChipIndex,this._chips.length-1),n=this._chips.toArray()[e];n.disabled?this._chips.length===1?this.focus():this._keyManager.setPreviousItemActive():n.focus()}else this.focus();this._lastDestroyedFocusedChipIndex=null}}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(Ti),ie(To,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-chip-set"]],contentQueries:function(n,o,s){if(n&1&&Sn(s,Zie,5),n&2){let l;Yt(l=Kt())&&(o._chips=l)}},hostAttrs:[1,"mat-mdc-chip-set","mdc-evolution-chip-set"],hostVars:1,hostBindings:function(n,o){n&1&&Oe("keydown",function(l){return o._handleKeydown(l)}),n&2&&yi("role",o.role)},inputs:{disabled:[2,"disabled","disabled",Xt],role:"role",tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Oo(e)]},standalone:!0,features:[an,yt],ngContentSelectors:iat,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(n,o){n&1&&(Qi(),ne(0,"div",0),pi(1),ce())},styles:[".mat-mdc-chip-set{display:flex}.mat-mdc-chip-set:focus{outline:none}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%;margin-left:-8px;margin-right:0}.mat-mdc-chip-set .mdc-evolution-chip{margin:4px 0 4px 8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip-set__chips{margin-left:0;margin-right:-8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip{margin-left:0;margin-right:8px}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}.mat-mdc-chip-set-stacked .mdc-evolution-chip__graphic{flex-grow:0}.mat-mdc-chip-set-stacked .mdc-evolution-chip__action--primary{flex-basis:100%;justify-content:start}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}"],encapsulation:2,changeDetection:0})}}return r})();var kTe=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({providers:[zy,{provide:nat,useValue:{separatorKeyCodes:[13]}}],imports:[on,Hh,on]})}}return r})();var sat=["input"],aat=["formField"],lat=["*"],OTe=0,C$=class{constructor(i,e){this.source=i,this.value=e}},cat={provide:Gc,useExisting:Go(()=>NF),multi:!0},PTe=new At("MatRadioGroup"),dat=new At("mat-radio-default-options",{providedIn:"root",factory:uat});function uat(){return{color:"accent",disabledInteractive:!1}}var NF=(()=>{class r{get name(){return this._name}set name(e){this._name=e,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition=e==="before"?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markRadiosForCheck()}get required(){return this._required}set required(e){this._required=e,this._markRadiosForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markRadiosForCheck()}constructor(e){this._changeDetector=e,this._value=null,this._name=`mat-radio-group-${OTe++}`,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new it,this._disabledInteractive=!1}ngAfterContentInit(){this._isInitialized=!0,this._buttonChanges=this._radios.changes.subscribe(()=>{this.selected&&!this._radios.find(e=>e===this.selected)&&(this._selected=null)})}ngOnDestroy(){this._buttonChanges?.unsubscribe()}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(e=>{e.name=this.name,e._markForCheck()})}_updateSelectedRadioFromValue(){let e=this._selected!==null&&this._selected.value===this._value;this._radios&&!e&&(this._selected=null,this._radios.forEach(n=>{n.checked=this.value===n.value,n.checked&&(this._selected=n)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new C$(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(e=>e._markForCheck())}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetector.markForCheck()}static{this.\u0275fac=function(n){return new(n||r)(ie(Ti))}}static{this.\u0275dir=Pt({type:r,selectors:[["mat-radio-group"]],contentQueries:function(n,o,s){if(n&1&&Sn(s,A2,5),n&2){let l;Yt(l=Kt())&&(o._radios=l)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:[2,"disabled","disabled",Xt],required:[2,"required","required",Xt],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Xt]},outputs:{change:"change"},exportAs:["matRadioGroup"],standalone:!0,features:[Bi([cat,{provide:PTe,useExisting:r}]),an]})}}return r})(),A2=(()=>{class r{get checked(){return this._checked}set checked(e){this._checked!==e&&(this._checked=e,e&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!e&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),e&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this.radioGroup!==null&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(e){this._labelPosition=e}get disabled(){return this._disabled||this.radioGroup!==null&&this.radioGroup.disabled}set disabled(e){this._setDisabled(e)}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(e){this._required=e}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._defaultOptions&&this._defaultOptions.color||"accent"}set color(e){this._color=e}get disabledInteractive(){return this._disabledInteractive||this.radioGroup!==null&&this.radioGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(e,n,o,s,l,h,p,m){this._elementRef=n,this._changeDetector=o,this._focusMonitor=s,this._radioDispatcher=l,this._defaultOptions=p,this._ngZone=Et(ci),this._uniqueId=`mat-radio-${++OTe}`,this.id=this._uniqueId,this.disableRipple=!1,this.tabIndex=0,this.change=new it,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this._injector=Et(yn),this._onInputClick=f=>{this.disabled&&this.disabledInteractive&&f.preventDefault()},this.radioGroup=e,this._noopAnimations=h==="NoopAnimations",this._disabledInteractive=p?.disabledInteractive??!1,m&&(this.tabIndex=Oo(m,0))}focus(e,n){n?this._focusMonitor.focusVia(this._inputElement,n,e):this._inputElement.nativeElement.focus(e)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((e,n)=>{e!==this.id&&n===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{!e&&this.radioGroup&&this.radioGroup._touch()}),this._ngZone.runOutsideAngular(()=>{this._inputElement.nativeElement.addEventListener("click",this._onInputClick)})}ngOnDestroy(){this._inputElement?.nativeElement.removeEventListener("click",this._onInputClick),this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new C$(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputInteraction(e){if(e.stopPropagation(),!this.checked&&!this.disabled){let n=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),n&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(e){this._onInputInteraction(e),(!this.disabled||this.disabledInteractive)&&this._inputElement?.nativeElement.focus()}_setDisabled(e){this._disabled!==e&&(this._disabled=e,this._changeDetector.markForCheck())}_updateTabIndex(){let e=this.radioGroup,n;if(!e||!e.selected||this.disabled?n=this.tabIndex:n=e.selected===this?this.tabIndex:-1,n!==this._previousTabIndex){let o=this._inputElement?.nativeElement;o&&(o.setAttribute("tabindex",n+""),this._previousTabIndex=n,ks(()=>{queueMicrotask(()=>{e&&e.selected&&e.selected!==this&&document.activeElement===o&&(e.selected?._inputElement.nativeElement.focus(),document.activeElement===o&&this._inputElement.nativeElement.blur())})},{injector:this._injector}))}}static{this.\u0275fac=function(n){return new(n||r)(ie(PTe,8),ie(Ht),ie(Ti),ie(il),ie(xfe),ie(so,8),ie(dat,8),oc("tabindex"))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-radio-button"]],viewQuery:function(n,o){if(n&1&&(Ni(sat,5),Ni(aat,7,Ht)),n&2){let s;Yt(s=Kt())&&(o._inputElement=s.first),Yt(s=Kt())&&(o._rippleTrigger=s.first)}},hostAttrs:[1,"mat-mdc-radio-button"],hostVars:19,hostBindings:function(n,o){n&1&&Oe("focus",function(){return o._inputElement.nativeElement.focus()}),n&2&&(yi("id",o.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),oi("mat-primary",o.color==="primary")("mat-accent",o.color==="accent")("mat-warn",o.color==="warn")("mat-mdc-radio-checked",o.checked)("mat-mdc-radio-disabled",o.disabled)("mat-mdc-radio-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._noopAnimations))},inputs:{id:"id",name:"name",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],disableRipple:[2,"disableRipple","disableRipple",Xt],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Oo(e)],checked:[2,"checked","checked",Xt],value:"value",labelPosition:"labelPosition",disabled:[2,"disabled","disabled",Xt],required:[2,"required","required",Xt],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",Xt]},outputs:{change:"change"},exportAs:["matRadioButton"],standalone:!0,features:[an,yt],ngContentSelectors:lat,decls:13,vars:17,consts:[["formField",""],["input",""],["mat-internal-form-field","",3,"labelPosition"],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio",1,"mdc-radio__native-control",3,"change","id","checked","disabled","required"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mdc-label",3,"for"]],template:function(n,o){if(n&1){let s=dt();Qi(),ne(0,"div",2,0)(2,"div",3)(3,"div",4),Oe("click",function(h){return Re(s),Fe(o._onTouchTargetClick(h))}),ce(),ne(4,"input",5,1),Oe("change",function(h){return Re(s),Fe(o._onInputInteraction(h))}),ce(),ne(6,"div",6),wt(7,"div",7)(8,"div",8),ce(),ne(9,"div",9),wt(10,"div",10),ce()(),ne(11,"label",11),pi(12),ce()()}n&2&&(ee("labelPosition",o.labelPosition),q(2),oi("mdc-radio--disabled",o.disabled),q(2),ee("id",o.inputId)("checked",o.checked)("disabled",o.disabled&&!o.disabledInteractive)("required",o.required),yi("name",o.name)("value",o.value)("aria-label",o.ariaLabel)("aria-labelledby",o.ariaLabelledby)("aria-describedby",o.ariaDescribedby)("aria-disabled",o.disabled&&o.disabledInteractive?"true":null),q(5),ee("matRippleTrigger",o._rippleTrigger.nativeElement)("matRippleDisabled",o._isRippleDisabled())("matRippleCentered",!0),q(2),ee("for",o.inputId))},dependencies:[fd,hA],styles:['.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mdc-radio-state-layer-size) - 20px)/2)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:not([disabled])~.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-hover-icon-color, var(--mat-app-on-surface))}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-hover-icon-color, var(--mat-app-primary))}.mat-mdc-radio-button .mdc-radio:active .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-pressed-icon-color, var(--mat-app-on-surface))}.mat-mdc-radio-button .mdc-radio:active .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:active .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-pressed-icon-color, var(--mat-app-primary))}.mat-mdc-radio-button .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-radio-button .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mdc-radio-state-layer-size);height:var(--mdc-radio-state-layer-size);top:calc(-1*(var(--mdc-radio-state-layer-size) - 20px)/2);left:calc(-1*(var(--mdc-radio-state-layer-size) - 20px)/2)}.mat-mdc-radio-button .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mdc-radio-state-layer-size);height:var(--mdc-radio-state-layer-size)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-app-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity)}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-app-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color, var(--mat-app-primary))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-focus-icon-color, var(--mat-app-primary))}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled{pointer-events:auto}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-app-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-app-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity)}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-app-on-surface))}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-radio-checked-ripple-color, var(--mat-app-primary))}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-app-on-surface))}.mat-mdc-radio-button .mat-internal-form-field{color:var(--mat-radio-label-text-color, var(--mat-app-on-surface));font-family:var(--mat-radio-label-text-font, var(--mat-app-body-medium-font));line-height:var(--mat-radio-label-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-radio-label-text-size, var(--mat-app-body-medium-size));letter-spacing:var(--mat-radio-label-text-tracking, var(--mat-app-body-medium-tracking));font-weight:var(--mat-radio-label-text-weight, var(--mat-app-body-medium-weight))}.mat-mdc-radio-button .mdc-radio--disabled+label{color:var(--mat-radio-disabled-label-color)}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple .mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-focus-icon-color, var(--mat-app-on-surface))}.mat-mdc-radio-button.cdk-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-radio-disabled{cursor:default;pointer-events:none}.mat-mdc-radio-disabled.mat-mdc-radio-disabled-interactive{pointer-events:auto}.mat-mdc-radio-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-radio-touch-target-display)}[dir=rtl] .mat-mdc-radio-touch-target{left:auto;right:50%;transform:translate(50%, -50%)}'],encapsulation:2,changeDetection:0})}}return r})(),x$=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[on,$a,Hh,A2,on]})}}return r})();var S$=(()=>{class r{http;constructor(e){this.http=e}getDomValuesFromURL(e){return st(this,null,function*(){let n=e.url,o;return yield this.http.get(n).pipe($t(s=>(o=s,s)),Fn(s=>dd(s))).toPromise(),o})}static \u0275fac=function(n){return new(n||r)(xe(dr))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var _ne=ld(RTe(),1);var $at=ld(KTe(),1);var dne=["*"];function Uat(r,i){r&1&&pi(0)}var zat=["tabListContainer"],Gat=["tabList"],Hat=["tabListInner"],Wat=["nextPaginator"],qat=["previousPaginator"],Yat=r=>({animationDuration:r}),Kat=(r,i)=>({value:r,params:i});function Zat(r,i){}var Qat=["tabBodyWrapper"],Xat=["tabHeader"];function Jat(r,i){}function elt(r,i){if(r&1&&We(0,Jat,0,0,"ng-template",12),r&2){let e=ae().$implicit;ee("cdkPortalOutlet",e.templateLabel)}}function tlt(r,i){if(r&1&&Ye(0),r&2){let e=ae().$implicit;Si(e.textLabel)}}function ilt(r,i){if(r&1){let e=dt();ne(0,"div",7,2),Oe("click",function(){let o=Re(e),s=o.$implicit,l=o.$index,h=ae(),p=ji(1);return Fe(h._handleClick(s,p,l))})("cdkFocusChange",function(o){let s=Re(e).$index,l=ae();return Fe(l._tabFocusChanged(o,s))}),wt(2,"span",8)(3,"div",9),ne(4,"span",10)(5,"span",11),We(6,elt,1,1,null,12)(7,tlt,1,1),ce()()()}if(r&2){let e=i.$implicit,n=i.$index,o=ji(1),s=ae();Hr(e.labelClass),oi("mdc-tab--active",s.selectedIndex===n),ee("id",s._getTabLabelId(n))("disabled",e.disabled)("fitInkBarToContent",s.fitInkBarToContent),yi("tabIndex",s._getTabIndex(n))("aria-posinset",n+1)("aria-setsize",s._tabs.length)("aria-controls",s._getTabContentId(n))("aria-selected",s.selectedIndex===n)("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null),q(3),ee("matRippleTrigger",o)("matRippleDisabled",e.disabled||s.disableRipple),q(3),vn(e.templateLabel?6:7)}}function nlt(r,i){r&1&&pi(0)}function rlt(r,i){if(r&1){let e=dt();ne(0,"mat-tab-body",13),Oe("_onCentered",function(){Re(e);let o=ae();return Fe(o._removeTabBodyWrapperHeight())})("_onCentering",function(o){Re(e);let s=ae();return Fe(s._setTabBodyWrapperHeight(o))}),ce()}if(r&2){let e=i.$implicit,n=i.$index,o=ae();Hr(e.bodyClass),oi("mat-mdc-tab-body-active",o.selectedIndex===n),ee("id",o._getTabContentId(n))("content",e.content)("position",e.position)("origin",e.origin)("animationDuration",o.animationDuration)("preserveContent",o.preserveContent),yi("tabindex",o.contentTabIndex!=null&&o.selectedIndex===n?o.contentTabIndex:null)("aria-labelledby",o._getTabLabelId(n))("aria-hidden",o.selectedIndex!==n)}}var olt=new At("MatTabContent"),slt=(()=>{class r{constructor(e){this.template=e}static{this.\u0275fac=function(n){return new(n||r)(ie(jo))}}static{this.\u0275dir=Pt({type:r,selectors:[["","matTabContent",""]],standalone:!0,features:[Bi([{provide:olt,useExisting:r}])]})}}return r})(),alt=new At("MatTabLabel"),XTe=new At("MAT_TAB"),llt=(()=>{class r extends Sfe{constructor(e,n,o){super(e,n),this._closestTab=o}static{this.\u0275fac=function(n){return new(n||r)(ie(jo),ie(Io),ie(XTe,8))}}static{this.\u0275dir=Pt({type:r,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],standalone:!0,features:[Bi([{provide:alt,useExisting:r}]),fn]})}}return r})(),JTe=new At("MAT_TAB_GROUP"),une=(()=>{class r{get templateLabel(){return this._templateLabel}set templateLabel(e){this._setTemplateLabelInput(e)}get content(){return this._contentPortal}constructor(e,n){this._viewContainerRef=e,this._closestTabGroup=n,this.disabled=!1,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new Dt,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(e){(e.hasOwnProperty("textLabel")||e.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new _u(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(e){e&&e._closestTab===this&&(this._templateLabel=e)}static{this.\u0275fac=function(n){return new(n||r)(ie(Io),ie(JTe,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-tab"]],contentQueries:function(n,o,s){if(n&1&&(Sn(s,llt,5),Sn(s,slt,7,jo)),n&2){let l;Yt(l=Kt())&&(o.templateLabel=l.first),Yt(l=Kt())&&(o._explicitContent=l.first)}},viewQuery:function(n,o){if(n&1&&Ni(jo,7),n&2){let s;Yt(s=Kt())&&(o._implicitContent=s.first)}},hostAttrs:["hidden",""],inputs:{disabled:[2,"disabled","disabled",Xt],textLabel:[0,"label","textLabel"],ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],standalone:!0,features:[Bi([{provide:XTe,useExisting:r}]),an,Jn,yt],ngContentSelectors:dne,decls:1,vars:0,template:function(n,o){n&1&&(Qi(),We(0,Uat,1,0,"ng-template"))},encapsulation:2})}}return r})(),ane="mdc-tab-indicator--active",ZTe="mdc-tab-indicator--no-transition",lne=class{constructor(i){this._items=i}hide(){this._items.forEach(i=>i.deactivateInkBar())}alignToElement(i){let e=this._items.find(o=>o.elementRef.nativeElement===i),n=this._currentItem;if(e!==n&&(n?.deactivateInkBar(),e)){let o=n?.elementRef.nativeElement.getBoundingClientRect?.();e.activateInkBar(o),this._currentItem=e}}},clt=(()=>{class r{constructor(){this._elementRef=Et(Ht),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(e){this._fitToContent!==e&&(this._fitToContent=e,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(e){let n=this._elementRef.nativeElement;if(!e||!n.getBoundingClientRect||!this._inkBarContentElement){n.classList.add(ane);return}let o=n.getBoundingClientRect(),s=e.width/o.width,l=e.left-o.left;n.classList.add(ZTe),this._inkBarContentElement.style.setProperty("transform",`translateX(${l}px) scaleX(${s})`),n.getBoundingClientRect(),n.classList.remove(ZTe),n.classList.add(ane),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(ane)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){let e=this._elementRef.nativeElement.ownerDocument||document,n=this._inkBarElement=e.createElement("span"),o=this._inkBarContentElement=e.createElement("span");n.className="mdc-tab-indicator",o.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",n.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){this._inkBarElement;let e=this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement;e.appendChild(this._inkBarElement)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=Pt({type:r,inputs:{fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",Xt]},features:[an]})}}return r})();var eAe=(()=>{class r extends clt{constructor(e){super(),this.elementRef=e,this.disabled=!1}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht))}}static{this.\u0275dir=Pt({type:r,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(n,o){n&2&&(yi("aria-disabled",!!o.disabled),oi("mat-mdc-tab-disabled",o.disabled))},inputs:{disabled:[2,"disabled","disabled",Xt]},standalone:!0,features:[an,fn]})}}return r})(),QTe=Ul({passive:!0}),dlt=650,ult=100,hlt=(()=>{class r{get selectedIndex(){return this._selectedIndex}set selectedIndex(e){let n=isNaN(e)?0:e;this._selectedIndex!=n&&(this._selectedIndexChanged=!0,this._selectedIndex=n,this._keyManager&&this._keyManager.updateActiveItem(n))}constructor(e,n,o,s,l,h,p){this._elementRef=e,this._changeDetectorRef=n,this._viewportRuler=o,this._dir=s,this._ngZone=l,this._platform=h,this._animationMode=p,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new Dt,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new Dt,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new it,this.indexFocused=new it,this._sharedResizeObserver=Et(JN),this._injector=Et(yn),l.runOutsideAngular(()=>{Ds(e.nativeElement,"mouseleave").pipe(rn(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){Ds(this._previousPaginator.nativeElement,"touchstart",QTe).pipe(rn(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Ds(this._nextPaginator.nativeElement,"touchstart",QTe).pipe(rn(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){let e=this._dir?this._dir.change:Vt("ltr"),n=this._sharedResizeObserver.observe(this._elementRef.nativeElement).pipe(cr(32),rn(this._destroyed)),o=this._viewportRuler.change(150).pipe(rn(this._destroyed)),s=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new bw(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),ks(s,{injector:this._injector}),vr(e,o,n,this._items.changes,this._itemsResized()).pipe(rn(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),s()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(l=>{this.indexFocused.emit(l),this._setTabFocus(l)})}_itemsResized(){return typeof ResizeObserver!="function"?Na:this._items.changes.pipe(yo(this._items),jr(e=>new si(n=>this._ngZone.runOutsideAngular(()=>{let o=new ResizeObserver(s=>n.next(s));return e.forEach(s=>o.observe(s.elementRef.nativeElement)),()=>{o.disconnect()}}))),zd(1),mn(e=>e.some(n=>n.contentRect.width>0&&n.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(e){if(!gs(e))switch(e.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){let n=this._items.get(this.focusIndex);n&&!n.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(e))}break;default:this._keyManager.onKeydown(e)}}_onContentChanges(){let e=this._elementRef.nativeElement.textContent;e!==this._currentTextContent&&(this._currentTextContent=e||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(e){!this._isValidIndex(e)||this.focusIndex===e||!this._keyManager||this._keyManager.setActiveItem(e)}_isValidIndex(e){return this._items?!!this._items.toArray()[e]:!0}_setTabFocus(e){if(this._showPaginationControls&&this._scrollToLabel(e),this._items&&this._items.length){this._items.toArray()[e].focus();let n=this._tabListContainer.nativeElement;this._getLayoutDirection()=="ltr"?n.scrollLeft=0:n.scrollLeft=n.scrollWidth-n.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;let e=this.scrollDistance,n=this._getLayoutDirection()==="ltr"?-e:e;this._tabList.nativeElement.style.transform=`translateX(${Math.round(n)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(e){this._scrollTo(e)}_scrollHeader(e){let n=this._tabListContainer.nativeElement.offsetWidth,o=(e=="before"?-1:1)*n/3;return this._scrollTo(this._scrollDistance+o)}_handlePaginatorClick(e){this._stopInterval(),this._scrollHeader(e)}_scrollToLabel(e){if(this.disablePagination)return;let n=this._items?this._items.toArray()[e]:null;if(!n)return;let o=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:s,offsetWidth:l}=n.elementRef.nativeElement,h,p;this._getLayoutDirection()=="ltr"?(h=s,p=h+l):(p=this._tabListInner.nativeElement.offsetWidth-s,h=p-l);let m=this.scrollDistance,f=this.scrollDistance+o;h<m?this.scrollDistance-=m-h:p>f&&(this.scrollDistance+=Math.min(p-f,h-m))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{let e=this._tabListInner.nativeElement.scrollWidth,n=this._elementRef.nativeElement.offsetWidth,o=e-n>=5;o||(this.scrollDistance=0),o!==this._showPaginationControls&&(this._showPaginationControls=o,this._changeDetectorRef.markForCheck())}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance==0,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let e=this._tabListInner.nativeElement.scrollWidth,n=this._tabListContainer.nativeElement.offsetWidth;return e-n||0}_alignInkBarToSelectedTab(){let e=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,n=e?e.elementRef.nativeElement:null;n?this._inkBar.alignToElement(n):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(e,n){n&&n.button!=null&&n.button!==0||(this._stopInterval(),lm(dlt,ult).pipe(rn(vr(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:o,distance:s}=this._scrollHeader(e);(s===0||s>=o)&&this._stopInterval()}))}_scrollTo(e){if(this.disablePagination)return{maxScrollDistance:0,distance:0};let n=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(n,e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:n,distance:this._scrollDistance}}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(Ti),ie(gu),ie(To,8),ie(ci),ie(Hn),ie(so,8))}}static{this.\u0275dir=Pt({type:r,inputs:{disablePagination:[2,"disablePagination","disablePagination",Xt],selectedIndex:[2,"selectedIndex","selectedIndex",Oo]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[an]})}}return r})(),plt=(()=>{class r extends hlt{constructor(e,n,o,s,l,h,p){super(e,n,o,s,l,h,p),this.disableRipple=!1}ngAfterContentInit(){this._inkBar=new lne(this._items),super.ngAfterContentInit()}_itemSelected(e){e.preventDefault()}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(Ti),ie(gu),ie(To,8),ie(ci),ie(Hn),ie(so,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-tab-header"]],contentQueries:function(n,o,s){if(n&1&&Sn(s,eAe,4),n&2){let l;Yt(l=Kt())&&(o._items=l)}},viewQuery:function(n,o){if(n&1&&(Ni(zat,7),Ni(Gat,7),Ni(Hat,7),Ni(Wat,5),Ni(qat,5)),n&2){let s;Yt(s=Kt())&&(o._tabListContainer=s.first),Yt(s=Kt())&&(o._tabList=s.first),Yt(s=Kt())&&(o._tabListInner=s.first),Yt(s=Kt())&&(o._nextPaginator=s.first),Yt(s=Kt())&&(o._previousPaginator=s.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(n,o){n&2&&oi("mat-mdc-tab-header-pagination-controls-enabled",o._showPaginationControls)("mat-mdc-tab-header-rtl",o._getLayoutDirection()=="rtl")},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],disableRipple:[2,"disableRipple","disableRipple",Xt]},standalone:!0,features:[an,fn,yt],ngContentSelectors:dne,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled"]],template:function(n,o){if(n&1){let s=dt();Qi(),ne(0,"div",5,0),Oe("click",function(){return Re(s),Fe(o._handlePaginatorClick("before"))})("mousedown",function(h){return Re(s),Fe(o._handlePaginatorPress("before",h))})("touchend",function(){return Re(s),Fe(o._stopInterval())}),wt(2,"div",6),ce(),ne(3,"div",7,1),Oe("keydown",function(h){return Re(s),Fe(o._handleKeydown(h))}),ne(5,"div",8,2),Oe("cdkObserveContent",function(){return Re(s),Fe(o._onContentChanges())}),ne(7,"div",9,3),pi(9),ce()()(),ne(10,"div",10,4),Oe("mousedown",function(h){return Re(s),Fe(o._handlePaginatorPress("after",h))})("click",function(){return Re(s),Fe(o._handlePaginatorClick("after"))})("touchend",function(){return Re(s),Fe(o._stopInterval())}),wt(12,"div",6),ce()}n&2&&(oi("mat-mdc-tab-header-pagination-disabled",o._disableScrollBefore),ee("matRippleDisabled",o._disableScrollBefore||o.disableRipple),q(3),oi("_mat-animation-noopable",o._animationMode==="NoopAnimations"),q(2),yi("aria-label",o.ariaLabel||null)("aria-labelledby",o.ariaLabelledby||null),q(5),oi("mat-mdc-tab-header-pagination-disabled",o._disableScrollAfter),ee("matRippleDisabled",o._disableScrollAfter||o.disableRipple))},dependencies:[fd,UN],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;outline:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color, var(--mat-app-on-surface))}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height);border-bottom-color:var(--mat-tab-header-divider-color, var(--mat-app-surface-variant))}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height);border-top-color:var(--mat-tab-header-divider-color, var(--mat-app-surface-variant))}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.cdk-drop-list .mat-mdc-tab-labels,.mat-mdc-tab-labels.cdk-drop-list{min-height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2})}}return r})(),mlt=new At("MAT_TABS_CONFIG"),flt={translateTab:Or("translateTab",[zi("center, void, left-origin-center, right-origin-center",mi({transform:"none",visibility:"visible"})),zi("left",mi({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),zi("right",mi({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),ln("* => left, * => right, left => center, right => center",un("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),ln("void => left-origin-center",[mi({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),un("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),ln("void => right-origin-center",[mi({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),un("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])},glt=(()=>{class r extends pf{constructor(e,n,o,s){super(e,n,s),this._host=o,this._centeringSub=pn.EMPTY,this._leavingSub=pn.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(yo(this._host._isCenterPosition(this._host._position))).subscribe(e=>{this._host._content&&e&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}static{this.\u0275fac=function(n){return new(n||r)(ie(au),ie(Io),ie(Go(()=>tAe)),ie(Ui))}}static{this.\u0275dir=Pt({type:r,selectors:[["","matTabBodyHost",""]],standalone:!0,features:[fn]})}}return r})(),tAe=(()=>{class r{set position(e){this._positionIndex=e,this._computePositionAnimationState()}constructor(e,n,o){this._elementRef=e,this._dir=n,this._dirChangeSubscription=pn.EMPTY,this._translateTabComplete=new Dt,this._onCentering=new it,this._beforeCentering=new it,this._afterLeavingCenter=new it,this._onCentered=new it(!0),this.animationDuration="500ms",this.preserveContent=!1,n&&(this._dirChangeSubscription=n.change.subscribe(s=>{this._computePositionAnimationState(s),o.markForCheck()})),this._translateTabComplete.subscribe(s=>{this._isCenterPosition(s.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(s.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){this._position=="center"&&this.origin!=null&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(e){let n=this._isCenterPosition(e.toState);this._beforeCentering.emit(n),n&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_isCenterPosition(e){return e=="center"||e=="left-origin-center"||e=="right-origin-center"}_computePositionAnimationState(e=this._getLayoutDirection()){this._positionIndex<0?this._position=e=="ltr"?"left":"right":this._positionIndex>0?this._position=e=="ltr"?"right":"left":this._position="center"}_computePositionFromOrigin(e){let n=this._getLayoutDirection();return n=="ltr"&&e<=0||n=="rtl"&&e>0?"left-origin-center":"right-origin-center"}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(To,8),ie(Ti))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-tab-body"]],viewQuery:function(n,o){if(n&1&&Ni(pf,5),n&2){let s;Yt(s=Kt())&&(o._portalHost=s.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:[0,"content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},standalone:!0,features:[yt],decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(n,o){if(n&1){let s=dt();ne(0,"div",1,0),Oe("@translateTab.start",function(h){return Re(s),Fe(o._onTranslateTabStarted(h))})("@translateTab.done",function(h){return Re(s),Fe(o._translateTabComplete.next(h))}),We(2,Zat,0,0,"ng-template",2),ce()}n&2&&ee("@translateTab",Oy(3,Kat,o._position,fo(1,Yat,o.animationDuration)))},dependencies:[glt,Ng],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[flt.translateTab]}})}}return r})(),_lt=0,ylt=!0,iAe=(()=>{class r{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(e){this._fitInkBarToContent=e,this._changeDetectorRef.markForCheck()}get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this._indexToSelect=isNaN(e)?null:e}get animationDuration(){return this._animationDuration}set animationDuration(e){let n=e+"";this._animationDuration=/^\d+$/.test(n)?e+"ms":n}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(e){this._contentTabIndex=isNaN(e)?null:e}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){if(!ylt)throw new Error("mat-tab-group background color must be set through the Sass theming API");let n=this._elementRef.nativeElement.classList;n.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),e&&n.add("mat-tabs-with-background",`mat-background-${e}`),this._backgroundColor=e}constructor(e,n,o,s){this._elementRef=e,this._changeDetectorRef=n,this._animationMode=s,this._tabs=new _p,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=pn.EMPTY,this._tabLabelSubscription=pn.EMPTY,this._fitInkBarToContent=!1,this.stretchTabs=!0,this.dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this.disablePagination=!1,this.disableRipple=!1,this.preserveContent=!1,this.selectedIndexChange=new it,this.focusChange=new it,this.animationDone=new it,this.selectedTabChange=new it(!0),this._isServer=!Et(Hn).isBrowser,this._groupId=_lt++,this.animationDuration=o&&o.animationDuration?o.animationDuration:"500ms",this.disablePagination=o&&o.disablePagination!=null?o.disablePagination:!1,this.dynamicHeight=o&&o.dynamicHeight!=null?o.dynamicHeight:!1,o?.contentTabIndex!=null&&(this.contentTabIndex=o.contentTabIndex),this.preserveContent=!!o?.preserveContent,this.fitInkBarToContent=o&&o.fitInkBarToContent!=null?o.fitInkBarToContent:!1,this.stretchTabs=o&&o.stretchTabs!=null?o.stretchTabs:!0}ngAfterContentChecked(){let e=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=e){let n=this._selectedIndex==null;if(!n){this.selectedTabChange.emit(this._createChangeEvent(e));let o=this._tabBodyWrapper.nativeElement;o.style.minHeight=o.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((o,s)=>o.isActive=s===e),n||(this.selectedIndexChange.emit(e),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((n,o)=>{n.position=o-e,this._selectedIndex!=null&&n.position==0&&!n.origin&&(n.origin=e-this._selectedIndex)}),this._selectedIndex!==e&&(this._selectedIndex=e,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{let e=this._clampTabIndex(this._indexToSelect);if(e===this._selectedIndex){let n=this._tabs.toArray(),o;for(let s=0;s<n.length;s++)if(n[s].isActive){this._indexToSelect=this._selectedIndex=s,this._lastFocusedTabIndex=null,o=n[s];break}!o&&n[e]&&Promise.resolve().then(()=>{n[e].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(e))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(yo(this._allTabs)).subscribe(e=>{this._tabs.reset(e.filter(n=>n._closestTabGroup===this||!n._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(e){let n=this._tabHeader;n&&(n.focusIndex=e)}_focusChanged(e){this._lastFocusedTabIndex=e,this.focusChange.emit(this._createChangeEvent(e))}_createChangeEvent(e){let n=new cne;return n.index=e,this._tabs&&this._tabs.length&&(n.tab=this._tabs.toArray()[e]),n}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=vr(...this._tabs.map(e=>e._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(e){return Math.min(this._tabs.length-1,Math.max(e||0,0))}_getTabLabelId(e){return`mat-tab-label-${this._groupId}-${e}`}_getTabContentId(e){return`mat-tab-content-${this._groupId}-${e}`}_setTabBodyWrapperHeight(e){if(!this.dynamicHeight||!this._tabBodyWrapperHeight)return;let n=this._tabBodyWrapper.nativeElement;n.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(n.style.height=e+"px")}_removeTabBodyWrapperHeight(){let e=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=e.clientHeight,e.style.height="",this.animationDone.emit()}_handleClick(e,n,o){n.focusIndex=o,e.disabled||(this.selectedIndex=o)}_getTabIndex(e){let n=this._lastFocusedTabIndex??this.selectedIndex;return e===n?0:-1}_tabFocusChanged(e,n){e&&e!=="mouse"&&e!=="touch"&&(this._tabHeader.focusIndex=n)}static{this.\u0275fac=function(n){return new(n||r)(ie(Ht),ie(Ti),ie(mlt,8),ie(so,8))}}static{this.\u0275cmp=gt({type:r,selectors:[["mat-tab-group"]],contentQueries:function(n,o,s){if(n&1&&Sn(s,une,5),n&2){let l;Yt(l=Kt())&&(o._allTabs=l)}},viewQuery:function(n,o){if(n&1&&(Ni(Qat,5),Ni(Xat,5)),n&2){let s;Yt(s=Kt())&&(o._tabBodyWrapper=s.first),Yt(s=Kt())&&(o._tabHeader=s.first)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:10,hostBindings:function(n,o){n&2&&(Hr("mat-"+(o.color||"primary")),vo("--mat-tab-animation-duration",o.animationDuration),oi("mat-mdc-tab-group-dynamic-height",o.dynamicHeight)("mat-mdc-tab-group-inverted-header",o.headerPosition==="below")("mat-mdc-tab-group-stretch-tabs",o.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",Xt],stretchTabs:[2,"mat-stretch-tabs","stretchTabs",Xt],dynamicHeight:[2,"dynamicHeight","dynamicHeight",Xt],selectedIndex:[2,"selectedIndex","selectedIndex",Oo],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[2,"contentTabIndex","contentTabIndex",Oo],disablePagination:[2,"disablePagination","disablePagination",Xt],disableRipple:[2,"disableRipple","disableRipple",Xt],preserveContent:[2,"preserveContent","preserveContent",Xt],backgroundColor:"backgroundColor",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"]},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],standalone:!0,features:[Bi([{provide:JTe,useExisting:r}]),an,yt],ngContentSelectors:dne,decls:9,vars:8,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination","aria-label","aria-labelledby"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","mdc-tab--active","class","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","class","content","position","origin","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"click","cdkFocusChange","id","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","id","content","position","origin","animationDuration","preserveContent"]],template:function(n,o){if(n&1){let s=dt();Qi(),ne(0,"mat-tab-header",3,0),Oe("indexFocused",function(h){return Re(s),Fe(o._focusChanged(h))})("selectFocusedIndex",function(h){return Re(s),Fe(o.selectedIndex=h)}),yg(2,ilt,8,17,"div",4,sk),ce(),We(4,nlt,1,0),ne(5,"div",5,1),yg(7,rlt,1,13,"mat-tab-body",6,sk),ce()}n&2&&(ee("selectedIndex",o.selectedIndex||0)("disableRipple",o.disableRipple)("disablePagination",o.disablePagination)("aria-label",o.ariaLabel)("aria-labelledby",o.ariaLabelledby),q(2),vg(o._tabs),q(2),vn(o._isServer?4:-1),q(),oi("_mat-animation-noopable",o._animationMode==="NoopAnimations"),q(2),vg(o._tabs))},dependencies:[plt,eAe,YN,fd,pf,tAe],styles:['.mdc-tab{min-width:90px;padding:0 24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;z-index:1}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab--active .mdc-tab__text-label{transition-delay:100ms}._mat-animation-noopable .mdc-tab__text-label{transition:none}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transition:var(--mat-tab-animation-duration, 250ms) transform cubic-bezier(0.4, 0, 0.2, 1);transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}._mat-animation-noopable .mdc-tab-indicator__content,.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;height:var(--mdc-secondary-navigation-tab-container-height);font-family:var(--mat-tab-header-label-text-font, var(--mat-app-title-small-font));font-size:var(--mat-tab-header-label-text-size, var(--mat-app-title-small-size));letter-spacing:var(--mat-tab-header-label-text-tracking, var(--mat-app-title-small-tracking));line-height:var(--mat-tab-header-label-text-line-height, var(--mat-app-title-small-line-height));font-weight:var(--mat-tab-header-label-text-weight, var(--mat-app-title-small-weight))}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color, var(--mat-app-primary));border-top-width:var(--mdc-tab-indicator-active-indicator-height);border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color, var(--mat-app-primary))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color, var(--mat-app-primary))}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color, var(--mat-app-on-surface));display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2})}}return r})(),cne=class{};var nAe=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({imports:[on,on]})}}return r})();var blt=(()=>{class r{dialogRef;confirmMessage;titleKey="igo.common.confirmDialog.title";proccessKey="igo.common.confirmDialog.confirmBtn";cancelKey="igo.common.confirmDialog.cancelBtn";constructor(e){this.dialogRef=e}static \u0275fac=function(n){return new(n||r)(ie(Mp))};static \u0275cmp=gt({type:r,selectors:[["igo-confirm-dialog"]],standalone:!0,features:[yt],decls:13,vars:12,consts:[["mat-dialog-title","",1,"mat-typography"],["mat-dialog-content","",1,"mat-typography"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"click"],["mat-flat-button","",3,"click"]],template:function(n,o){n&1&&(ne(0,"h2",0),Ye(1),Ne(2,"translate"),ce(),ne(3,"div",1),Ye(4),Ne(5,"translate"),ce(),ne(6,"div",2)(7,"button",3),Oe("click",function(){return o.dialogRef.close(!0)}),Ye(8),Ne(9,"translate"),ce(),ne(10,"button",4),Oe("click",function(){return o.dialogRef.close(!1)}),Ye(11),Ne(12,"translate"),ce()()),n&2&&(q(),Qt(" ",je(2,4,o.titleKey),`
`),q(3),Qt(" ",je(5,6,o.confirmMessage),`
`),q(4),Qt(" ",je(9,8,o.proccessKey)," "),q(3),Qt(" ",je(12,10,o.cancelKey)," "))},dependencies:[fv,ff,gv,bn,Ua,On,hn],styles:["h2[_ngcontent-%COMP%]{margin:5px 0 10px}div[mat-dialog-content][_ngcontent-%COMP%]{max-width:200px}div[mat-dialog-actions][_ngcontent-%COMP%]{margin:10px 0 0}"]})}return r})(),M2=(()=>{class r{dialog;constructor(e){this.dialog=e}open(e,n){let o=Xe({title:"igo.common.confirmDialog.title",modeYesNo:!1},n),s=this.dialog.open(blt,{disableClose:!1});return s.componentInstance.confirmMessage=e,s.componentInstance.titleKey=o.title,o.modeYesNo&&(s.componentInstance.proccessKey="igo.common.confirmDialog.yes",s.componentInstance.cancelKey="igo.common.confirmDialog.no"),s.afterClosed()}static \u0275fac=function(n){return new(n||r)(xe(vu))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var rAe=(()=>{class r{config;options;constructor(e){this.config=e,this.options=this.config.getConfig("regex")}getAll(){return this.options}get(e){if(this.options)return this.options[e]}static \u0275fac=function(n){return new(n||r)(xe(Ri))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Clt(r,i){if(r&1){let e=dt();ne(0,"button",16),Ne(1,"translate"),Oe("click",function(o){Re(e);let s=ae().$implicit;return ae().useCurrentPosition(s),Fe(o.stopPropagation())}),ne(2,"mat-icon"),Ye(3,"my_location"),ce()()}r&2&&ee("matTooltip",je(1,1,"igo.geo.directions.input.currentPosition"))}function xlt(r,i){if(r&1){let e=dt();ne(0,"button",17),Ne(1,"translate"),Oe("click",function(){Re(e);let o=ae().$implicit,s=ae();return Fe(s.clearStopInput(o))}),ne(2,"mat-icon"),Ye(3,"close"),ce()()}r&2&&ee("matTooltip",je(1,1,"igo.geo.directions.input.clearStop"))}function Slt(r,i){if(r&1&&(ne(0,"mat-option",20),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e),q(),Qt(" ",e.meta?e.meta.title:""," ")}}function Ilt(r,i){if(r&1&&(ne(0,"mat-optgroup",18),We(1,Slt,2,2,"mat-option",19),ce()),r&2){let e=i.$implicit;ee("label",e.source.title)("disabled",!e.source.enabled),q(),ee("ngForOf",e.results)}}function Tlt(r,i){if(r&1){let e=dt();ne(0,"button",21),Ne(1,"translate"),Oe("click",function(){Re(e);let o=ae().$implicit,s=ae();return Fe(s.removeStop(o))}),ne(2,"mat-icon"),Ye(3,"delete"),ce()()}r&2&&ee("matTooltip",je(1,1,"igo.geo.directions.input.removeStop"))}function Alt(r,i){if(r&1){let e=dt();ne(0,"div",5)(1,"div",6),Oe("touchenter",function(){let o=Re(e).$implicit,s=ae();return Fe(s.onStopEnter(o))})("touchleave",function(){Re(e);let o=ae();return Fe(o.onStopLeave())})("mouseover",function(){let o=Re(e).$implicit,s=ae();return Fe(s.onStopEnter(o))})("mouseleave",function(){Re(e);let o=ae();return Fe(o.onStopLeave())})("cdkDragStarted",function(){Re(e);let o=ae();return Fe(o.stopIsDragged=!0)})("cdkDragEnded",function(){Re(e);let o=ae();return Fe(o.stopIsDragged=!1)}),ne(2,"div",3)(3,"button",7),Ne(4,"translate"),ne(5,"mat-icon"),Ye(6,"drag_indicator"),ce()()(),ne(7,"div",8)(8,"mat-form-field",9)(9,"mat-label"),Ye(10),ce(),ne(11,"input",10),Ne(12,"translate"),Oe("focus",function(){let o=Re(e).$implicit,s=ae();return Fe(s.onInputFocus(o))}),bs("ngModelChange",function(o){let s=Re(e).$implicit;return Os(s.text,o)||(s.text=o),Fe(o)}),Oe("keyup",function(o){let s=Re(e).$implicit,l=ae();return Fe(l.setStopText(o,s))})("keydown.enter",function(o){return Re(e),Fe(o.preventDefault())}),ce(),We(13,Clt,4,3,"button",11)(14,xlt,4,3,"button",12),ne(15,"mat-autocomplete",13,0),Oe("optionSelected",function(o){let s=Re(e).$implicit,l=ae();return Fe(l.chooseOption(o,s))}),We(17,Ilt,2,3,"mat-optgroup",14),ce()()(),We(18,Tlt,4,3,"button",15),Ne(19,"async"),ce()()}if(r&2){let e=i.$implicit,n=ji(16),o=ae();q(3),ee("matTooltip",je(4,11,"igo.geo.directions.input.moveStop")),q(7),Si(o.getInputLabel(e)),q(),ee("id",e.id)("placeholder",je(12,13,"igo.geo.directions.input.placeholder")),vs("ngModel",e.text),ee("matAutocomplete",n),q(2),ee("ngIf",o.currentPosition),q(),ee("ngIf",e.text||e.coordinates),q(),ee("displayWith",o.getOptionText),q(2),ee("ngForOf",e.searchProposals),q(),ee("ngIf",je(19,15,o.stopsStore.count$)>2)}}function Elt(r,i){if(r&1&&(ne(0,"mat-option",9),Ye(1),ce()),r&2){let e=i.$implicit,n=i.index,o=ae(3);ee("value",e),q(),mH(" Option ",n+1,": ",e.title," (",o.formatDistance(e.distance)," - ",o.formatDuration(e.duration),") ")}}function Mlt(r,i){if(r&1){let e=dt();ne(0,"mat-form-field",6)(1,"mat-label"),Ye(2),Ne(3,"translate"),ce(),ne(4,"mat-select",7),Oe("selectionChange",function(){Re(e);let o=ae(2);return Fe(o.chooseRouteOption())}),bs("ngModelChange",function(o){Re(e);let s=ae(2);return Os(s.activeRoute,o)||(s.activeRoute=o),Fe(o)}),We(5,Elt,2,5,"mat-option",8),ce()()}if(r&2){let e=ae(2);ee("matTooltip",e.activeRoute.title),q(2),Si(je(3,4,"igo.geo.directions.results.routeOptions")),q(2),vs("ngModel",e.activeRoute),q(),ee("ngForOf",e.routes)}}function Dlt(r,i){if(r&1&&(ne(0,"span",15),Ye(1),ce()),r&2){let e=ae(2).$implicit,n=ae(2);q(),rf(" ",n.formatDistance(e.distance)," - ",n.formatDuration(e.duration)," ")}}function klt(r,i){if(r&1){let e=dt();ne(0,"mat-list-item",11),Oe("mouseenter",function(){Re(e);let o=ae().$implicit,s=ae(2);return Fe(s.showStep(o))})("click",function(){Re(e);let o=ae().$implicit,s=ae(2);return Fe(s.showStep(o,!0))}),ne(1,"mat-icon",12),Ne(2,"translate"),Ye(3),ce(),ne(4,"span",13),Ye(5),ce(),We(6,Dlt,2,2,"span",14),ce()}if(r&2){let e=ae(),n=e.$implicit,o=e.index,s=ae(2);q(),ee("matTooltip",je(2,5,"igo.geo.directions.results.stepTitleTooltip")),q(2),Qt("",s.getFormattedStep(n,o).iconName," "),q(),ee("matTooltip",s.getFormattedStep(n,o).instruction),q(),Qt(" ",s.getFormattedStep(n,o).instruction," "),q(),ee("ngIf",o!==s.activeRoute.steps.length-1)}}function Olt(r,i){if(r&1&&(zn(0),We(1,klt,7,7,"mat-list-item",10),Gn()),r&2){let e=i.$implicit,n=i.index,o=ae(2);q(),ee("ngIf",o.formatDistance(e.distance)&&o.formatDuration(e.duration)||n===o.activeRoute.steps.length-1)}}function Plt(r,i){if(r&1){let e=dt();ne(0,"div",1),We(1,Mlt,6,6,"mat-form-field",2),ne(2,"h3",3),Ye(3),ce(),ne(4,"mat-list",4),Oe("mouseleave",function(){Re(e);let o=ae();return Fe(o.onLeaveList())}),We(5,Olt,2,1,"ng-container",5),ce()()}if(r&2){let e=ae();q(),ee("ngIf",e.routes.length>1),q(2),rf(" ",e.activeRoute.title," ",e.getTitleDurationAndDistance()," "),q(2),ee("ngForOf",e.activeRoute.steps)}}var Rlt=["*"];var Flt=["renderedLegend"],Llt=r=>({"with-title":r});function Nlt(r,i){if(r&1){let e=dt();ne(0,"mat-list-item")(1,"mat-icon",9),Oe("toggle",function(o){Re(e);let s=ae(2).$implicit,l=ae(3);return Fe(l.toggleLegendItem(o,s))}),Ye(2,"expand_less "),ce(),ne(3,"span",10),Ye(4),Ne(5,"async"),ce()()}if(r&2){ae();let e=ji(3),n=ae().$implicit,o=ae(3);q(),ee("target",e)("collapsed",n.collapsed),q(3),Qt("",je(5,3,o.computeItemTitle(n))," ")}}function Blt(r,i){if(r&1&&(ne(0,"mat-option",14),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e.name),q(),Si(e.title)}}function jlt(r,i){if(r&1){let e=dt();ne(0,"mat-form-field",11)(1,"mat-select",12),Ne(2,"translate"),bs("ngModelChange",function(o){Re(e);let s=ae(5);return Os(s.currentStyle,o)||(s.currentStyle=o),Fe(o)}),Oe("selectionChange",function(){Re(e);let o=ae(5);return Fe(o.onChangeStyle())}),We(3,Blt,2,2,"mat-option",13),ce()()}if(r&2){let e=ae(5);q(),ee("matTooltip",je(2,3,"igo.geo.layer.legend.selectStyle")),vs("ngModel",e.currentStyle),q(2),ee("ngForOf",e.styles)}}function Vlt(r,i){if(r&1){let e=dt();ne(0,"img",17,3),Ne(2,"translate"),Oe("load",function(){Re(e);let o=ae(4).$implicit,s=ae(3);return Fe(s.onLoadImage(o.title))}),ce()}if(r&2){let e=ae(4).$implicit;Wr("id",e.title),Wr("alt",je(2,4,"igo.geo.layer.legend.loadingLegendText")),ee("hideError",!0)("src",e.imgGraphValue,pl)}}function $lt(r,i){r&1&&(ne(0,"small"),Ye(1),Ne(2,"translate"),ce()),r&2&&(q(),Qt(" ",je(2,1,"igo.geo.layer.legend.noLegendScale")," "))}function Ult(r,i){if(r&1&&(ne(0,"div"),We(1,Vlt,3,6,"img",16)(2,$lt,3,3,"small",4),ce()),r&2){let e=ae(3).$implicit,n=ae(3);q(),ee("ngIf",e.imgGraphValue),q(),ee("ngIf",n.imagesHeight[e.title]<16)}}function zlt(r,i){if(r&1&&(wt(0,"div",18),Ne(1,"sanitizeHtml")),r&2){let e=ae(3).$implicit;ee("ngStyle",e.style)("innerHTML",je(1,2,e.html),Xu)}}function Glt(r,i){if(r&1&&(ne(0,"div"),We(1,Ult,3,2,"div",4)(2,zlt,2,4,"div",15),ce()),r&2){let e=ae(2).$implicit;q(),ee("ngIf",e.url),q(),ee("ngIf",e.html)}}function Hlt(r,i){if(r&1&&(ne(0,"div"),We(1,Nlt,6,5,"mat-list-item",4),ne(2,"div",7,2),We(4,jlt,4,5,"mat-form-field",8)(5,Glt,3,2,"div",4),ce()()),r&2){let e=ae().$implicit,n=ae(3);q(),ee("ngIf",e.title),q(),ee("ngClass",fo(4,Llt,e.title)),q(2),ee("ngIf",n.currentStyle!==void 0),q(),ee("ngIf",!e.collapsed)}}function Wlt(r,i){if(r&1&&(zn(0,null,1),We(2,Hlt,6,6,"div",5),Gn()),r&2){ae(2);let e=ji(3),n=ae();q(2),ee("ngIf",n.getLegend)("ngIfElse",e)}}function qlt(r,i){if(r&1&&(zn(0),We(1,Wlt,3,2,"ng-container",6),Gn()),r&2){let e=ae().ngIf;q(),ee("ngForOf",e.slice().reverse())}}function Ylt(r,i){r&1&&(ne(0,"small"),Ye(1),Ne(2,"translate"),ce()),r&2&&(q(),Qt(" ",je(2,1,"igo.geo.layer.legend.noLegendText")," "))}function Klt(r,i){if(r&1&&(zn(0),We(1,qlt,2,1,"ng-container",5)(2,Ylt,3,3,"ng-template",null,0,Vo),Gn()),r&2){let e=i.ngIf,n=ji(3);q(),ee("ngIf",e.length)("ngIfElse",n)}}var oAe=r=>({zoom:r});function Zlt(r,i){if(r&1){let e=dt();ne(0,"div",1)(1,"button",2),Ne(2,"translate"),Ne(3,"translate"),Oe("click",function(){Re(e);let o=ae();return Fe(o.onGeolocationClick())}),ne(4,"mat-icon"),Ye(5),Ne(6,"async"),ce()()()}if(r&2){let e=ae();q(),ee("matTooltip",e.map.geolocationController.tracking?je(2,3,"igo.geo.mapButtons.geolocateInactive"):je(3,5,"igo.geo.mapButtons.geolocate"))("color",e.color),q(4),Si(je(6,7,e.icon$))}}var Qlt=r=>[r];function Xlt(r,i){if(r&1&&(ne(0,"div",5),Ye(1),ce()),r&2){let e=ae(2);q(),Si(e.title)}}function Jlt(r,i){if(r&1){let e=dt();ne(0,"div",2),Oe("click",function(){Re(e);let o=ae();return Fe(o.changeBaseLayer(o.baseLayer))}),wt(1,"igo-map-browser",3),We(2,Xlt,2,1,"div",4),ce()}if(r&2){let e=ae();q(),ee("map",e.basemap),q(),ee("ngIf",e.title)}}var ect=r=>({"container-expand":r});function tct(r,i){r&1&&(ne(0,"div",6)(1,"button",7),Ne(2,"translate"),ne(3,"mat-icon"),Ye(4,"photo_library"),ce()()()),r&2&&(q(),ee("matTooltip",je(2,1,"igo.geo.mapButtons.baselayerSwitcher")))}function ict(r,i){if(r&1&&(wt(0,"igo-mini-basemap",8),Ne(1,"translate")),r&2){let e=i.$implicit,n=i.index,o=ae(2);ee("map",o.map)("baseLayer",e)("title",o.baseLayers.length>2&&!o.expand?je(1,5,"igo.geo.baselayersSwitcher.title"):e.title)("display",o.expand||n===0&&!o.useStaticIcon)("disabled",!o.expand&&o.baseLayers.length>1)}}function nct(r,i){r&1&&(ne(0,"div",9)(1,"mat-icon",10),Ye(2,"arrow_drop_down"),ce()())}function rct(r,i){if(r&1){let e=dt();ne(0,"div",1),Oe("@baseLayerSwitcherState.start",function(){Re(e);let o=ae();return Fe(o.showButton=!1)})("@baseLayerSwitcherState.done",function(){Re(e);let o=ae();return Fe(o.showButton=!0)})("click",function(){Re(e);let o=ae();return Fe(o.collapseOrExpand())}),We(1,tct,5,3,"div",2),ne(2,"div",3),We(3,ict,2,7,"igo-mini-basemap",4),ce(),We(4,nct,3,0,"div",5),ce()}if(r&2){let e=ae();ee("ngClass",fo(5,ect,e.expand))("@baseLayerSwitcherState",e.expand?"expand":e.useStaticIcon?"collapseIcon":"collapseMap"),q(),ee("ngIf",e.useStaticIcon&&!e.expand&&e.showButton),q(2),ee("ngForOf",e.baseLayers),q(),ee("ngIf",e.hasMoreThanTwo)}}var oct=(r,i)=>({azimuth:r,rotation:i});function sct(r,i){if(r&1){let e=dt();ne(0,"div",1),Ne(1,"async"),Ne(2,"translate"),Ne(3,"translate"),ne(4,"button",2),Ne(5,"async"),Oe("click",function(){Re(e);let o=ae();return Fe(o.map.viewController.resetRotation())}),ne(6,"mat-icon",3),Ne(7,"async"),Ye(8,"navigation "),ce()()()}if(r&2){let e=ae();ee("matTooltip",je(1,4,e.rotated$)?cw(2,6,"igo.geo.mapButtons.resetRotation",Oy(15,oct,e.azimuthRounded,e.rotationRounded)):je(3,9,"igo.geo.mapButtons.tipRotation")),q(4),ee("color",e.color)("disabled",je(5,11,e.rotated$)===!1),q(2),ee("ngStyle",je(7,13,e.currentStyle$))}}function act(r,i){if(r&1){let e=dt();ne(0,"mat-slide-toggle",1),Oe("change",function(o){Re(e);let s=ae();return Fe(s.onTogglePrivateModeControl(o.checked))}),Ye(1),Ne(2,"translate"),ce()}if(r&2){let e=ae();ee("checked",e.enabledProfileHasAuthorization)("labelPosition","before"),q(),Qt(" ",je(2,3,"igo.geo.directions.toggle.type")," ")}}function lct(r,i){if(r&1&&wt(0,"igo-directions-buttons",6),r&2){let e=ae();ee("stepsFeatureStore",e.stepsFeatureStore)("contextUri",e.contextUri)("zoomOnActiveRoute$",e.zoomOnActiveRoute$)("routesFeatureStore",e.routesFeatureStore)("stopsStore",e.stopsStore)}}var cct=["endDatepickerTime"],dct=["beginDatepickerTime"],uct=["beginTime"],hct=["endTime"];function pct(r,i){if(r&1){let e=dt();ne(0,"mat-slide-toggle",10),bs("ngModelChange",function(o){Re(e);let s=ae();return Os(s.sliderMode,o)||(s.sliderMode=o),Fe(o)}),Oe("change",function(o){Re(e);let s=ae();return Fe(s.modeChange(o))}),Ye(1),Ne(2,"translate"),ce()}if(r&2){let e=ae();vs("ngModel",e.sliderMode),q(),Qt(" ",je(2,2,"igo.geo.filter.sliderModeTitle")," ")}}function mct(r,i){if(r&1){let e=dt();ne(0,"div",11)(1,"igo-ogc-filter-time-slider",12),Oe("changeProperty",function(o){Re(e);let s=ae();return Fe(s.changePropertyByPass(o))}),ce()()}if(r&2){let e=ae();q(),ee("begin",e.beginValue)("max",e.restrictedToStep()?e.maxDate:e.endValue)("currentFilter",e.currentFilter)("datasource",e.datasource)}}function fct(r,i){if(r&1){let e=dt();ne(0,"div",15)(1,"mat-form-field",16)(2,"mat-label"),Ye(3),Ne(4,"translate"),ce(),ne(5,"input",17),Oe("change",function(o){Re(e);let s=ji(8),l=ae(2);return Fe(l.yearOnlyInputChange(o,s,"begin"))}),ce(),wt(6,"mat-datepicker-toggle",18),ne(7,"mat-datepicker",19,0),Oe("yearSelected",function(o){Re(e);let s=ji(8),l=ae(2);return Fe(l.yearSelected(o,s,"begin"))}),ce(),wt(9,"input",20,1),ce(),ne(11,"mat-form-field",16)(12,"mat-label"),Ye(13),Ne(14,"translate"),ce(),ne(15,"input",17),Oe("change",function(o){Re(e);let s=ji(18),l=ae(2);return Fe(l.yearOnlyInputChange(o,s,"end"))}),ce(),wt(16,"mat-datepicker-toggle",18),ne(17,"mat-datepicker",19,2),Oe("yearSelected",function(o){Re(e);let s=ji(18),l=ae(2);return Fe(l.yearSelected(o,s,"end"))}),ce(),wt(19,"input",20,3),ce(),ne(21,"div",21)(22,"button",22),Ne(23,"translate"),Oe("click",function(){Re(e);let o=ae(2);return Fe(o.resetFilter())}),ne(24,"mat-icon"),Ye(25),ce()(),ne(26,"mat-slide-toggle",23),Ne(27,"translate"),Oe("change",function(){Re(e);let o=ae(2);return Fe(o.toggleFilterState())}),ce()()()}if(r&2){let e=ji(8),n=ji(18),o=ae(2);q(3),Si(je(4,27,"igo.geo.timeFilter.startYear")),q(2),Wr("value",o.onlyYearBegin),ee("disabled",o.filterStateDisable),q(),ee("for",e)("disabled",o.filterStateDisable),q(),ee("startView",o.calendarView())("startAt",o.beginValue),q(2),ee("matDatepicker",e)("value",o.beginValue?o.beginValue:o.handleDate(o.datasource.options.minDate))("min",o.handleDate(o.datasource.options.minDate))("max",o.endValue&&!o.restrictedToStep()?o.endValue:o.handleDate(o.datasource.options.maxDate)),q(4),Si(je(14,29,"igo.geo.timeFilter.endYear")),q(2),Wr("value",o.onlyYearEnd),ee("disabled",o.filterStateDisable),q(),ee("for",n)("disabled",o.filterStateDisable),q(),ee("startView",o.calendarView())("startAt",o.endValue),q(2),ee("matDatepicker",n)("value",o.endValue?o.endValue:o.handleDate(o.datasource.options.maxDate))("min",o.beginValue?o.beginValue:o.handleDate(o.datasource.options.minDate))("max",o.handleDate(o.datasource.options.maxDate)),q(3),ee("matTooltip",je(23,31,"igo.geo.filter.resetFilters"))("disabled",o.filterStateDisable),q(3),Si(o.resetIcon),q(),ee("matTooltip",je(27,33,"igo.geo.filter.toggleFilterState"))("checked",!o.filterStateDisable)}}function gct(r,i){if(r&1&&(ne(0,"mat-option",37),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e),q(),Si(e)}}function _ct(r,i){if(r&1&&(ne(0,"mat-option",37),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e),q(),Si(e)}}function yct(r,i){if(r&1){let e=dt();ne(0,"div",32)(1,"mat-form-field",33)(2,"mat-label"),Ye(3),Ne(4,"translate"),ce(),ne(5,"mat-select",34),Oe("selectionChange",function(){Re(e),ae();let o=ji(5),s=ae(2);return Fe(s.changeTemporalProperty(o.value,1))}),We(6,gct,2,2,"mat-option",35),ce()(),ne(7,"mat-form-field",36)(8,"mat-label"),Ye(9),Ne(10,"translate"),ce(),ne(11,"mat-select",34),Oe("selectionChange",function(){Re(e),ae();let o=ji(5),s=ae(2);return Fe(s.changeTemporalProperty(o.value,1))}),We(12,_ct,2,2,"mat-option",35),ce()()()}if(r&2){let e=ae(3);q(3),Si(je(4,8,"igo.geo.timeFilter.hour")),q(2),ee("formControl",e.beginHourFormControl),yi("disabled",!e.currentFilter.active),q(),ee("ngForOf",e.beginHours),q(3),Si(je(10,10,"igo.geo.timeFilter.minute")),q(2),ee("formControl",e.beginMinuteFormControl),yi("disabled",!e.currentFilter.active),q(),ee("ngForOf",e.beginMinutes)}}function vct(r,i){if(r&1&&(ne(0,"mat-option",37),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e),q(),Si(e)}}function bct(r,i){if(r&1&&(ne(0,"mat-option",37),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e),q(),Si(e)}}function wct(r,i){if(r&1){let e=dt();ne(0,"div",32)(1,"mat-form-field",33)(2,"mat-label"),Ye(3),Ne(4,"translate"),ce(),ne(5,"mat-select",34),Oe("selectionChange",function(){Re(e),ae();let o=ji(4),s=ae(3);return Fe(s.changeTemporalProperty(o.value,2))}),We(6,vct,2,2,"mat-option",35),ce()(),ne(7,"mat-form-field",36)(8,"mat-label"),Ye(9),Ne(10,"translate"),ce(),ne(11,"mat-select",34),Oe("selectionChange",function(){Re(e),ae();let o=ji(4),s=ae(3);return Fe(s.changeTemporalProperty(o.value,2))}),We(12,bct,2,2,"mat-option",35),ce()()()}if(r&2){let e=ae(4);q(3),Si(je(4,8,"igo.geo.timeFilter.hour")),q(2),ee("formControl",e.endHourFormControl),yi("disabled",!e.currentFilter.active),q(),ee("ngForOf",e.endHours),q(3),Si(je(10,10,"igo.geo.timeFilter.minute")),q(2),ee("formControl",e.endMinuteFormControl),yi("disabled",!e.currentFilter.active),q(),ee("ngForOf",e.endMinutes)}}function Cct(r,i){if(r&1){let e=dt();ne(0,"div",25)(1,"mat-form-field",26),wt(2,"mat-datepicker-toggle",18),ne(3,"input",27,5),Ne(5,"translate"),Oe("dateChange",function(){Re(e);let o=ji(4),s=ae(3);return Fe(s.changeTemporalProperty(o.value,2))}),ce(),wt(6,"span",28),ne(7,"mat-datepicker",29,2),Oe("yearSelected",function(o){Re(e);let s=ji(8),l=ae(3);return Fe(l.yearSelected(o,s,"end"))})("monthSelected",function(o){Re(e);let s=ji(8),l=ae(3);return Fe(l.monthSelected(o,s,"end"))}),ce()(),We(9,wct,13,12,"div",30),ce()}if(r&2){let e=ji(8),n=ae(3);q(2),ee("for",e)("disabled",n.filterStateDisable),q(),ee("matDatepicker",e)("placeholder",je(5,13,"igo.geo.timeFilter.endDate"))("matDatepickerFilter",n.filterEndFunction)("value",n.endValue?n.endValue:n.handleDate(n.datasource.options.maxDate))("min",n.beginValue?n.beginValue:n.handleDate(n.datasource.options.minDate))("max",n.handleDate(n.datasource.options.maxDate))("disabled",n.filterStateDisable),yi("disabled",!n.currentFilter.active),q(4),ee("startView",n.calendarView())("startAt",n.endValue),q(2),ee("ngIf",n.calendarType()==="datetime")}}function xct(r,i){if(r&1){let e=dt();ne(0,"div",24)(1,"div",25)(2,"mat-form-field",26),wt(3,"mat-datepicker-toggle",18),ne(4,"input",27,4),Ne(6,"translate"),Oe("dateChange",function(){Re(e);let o=ji(5),s=ae(2);return Fe(s.changeTemporalProperty(o.value,1))}),ce(),wt(7,"span",28),ne(8,"mat-datepicker",29,0),Oe("yearSelected",function(o){Re(e);let s=ji(9),l=ae(2);return Fe(l.yearSelected(o,s,"begin"))})("monthSelected",function(o){Re(e);let s=ji(9),l=ae(2);return Fe(l.monthSelected(o,s,"begin"))}),ce()(),We(10,yct,13,12,"div",30),ce(),We(11,Cct,10,15,"div",31),ne(12,"div",21)(13,"button",22),Ne(14,"translate"),Oe("click",function(){Re(e);let o=ae(2);return Fe(o.resetFilter())}),ne(15,"mat-icon"),Ye(16),ce()(),ne(17,"mat-slide-toggle",23),Ne(18,"translate"),Oe("change",function(){Re(e);let o=ae(2);return Fe(o.toggleFilterState())}),ce()()()}if(r&2){let e=ji(9),n=ae(2);q(3),ee("for",e)("disabled",n.filterStateDisable),q(),ee("matDatepicker",e)("placeholder",je(6,19,"igo.geo.timeFilter.startDate"))("matDatepickerFilter",n.filterBeginFunction)("value",n.beginValue?n.beginValue:n.handleDate(n.datasource.options.minDate))("min",n.handleDate(n.datasource.options.minDate))("max",n.endValue&&!n.restrictedToStep()?n.endValue:n.handleDate(n.datasource.options.maxDate))("disabled",n.filterStateDisable),yi("disabled",!n.currentFilter.active),q(4),ee("startView",n.calendarView())("startAt",n.beginValue),q(2),ee("ngIf",n.calendarType()==="datetime"),q(),ee("ngIf",!n.restrictedToStep()),q(2),ee("matTooltip",je(14,21,"igo.geo.filter.resetFilters"))("disabled",n.filterStateDisable),q(3),Si(n.resetIcon),q(),ee("matTooltip",je(18,23,"igo.geo.filter.toggleFilterState"))("checked",!n.filterStateDisable)}}function Sct(r,i){if(r&1&&(ne(0,"div"),We(1,fct,28,35,"div",13)(2,xct,19,25,"div",14),ce()),r&2){let e=ae();q(),ee("ngIf",e.calendarTypeYear),q(),ee("ngIf",e.calendarType()!=="year")}}var Ict=(r,i)=>({logical:r,logicalHidden:i}),Tct=(r,i)=>({operator:r,dualInput:i}),Act=()=>["expression","pattern"],Ect=()=>["lowerBoundary","begin"],Mct=()=>["upperBoundary","end"];function Dct(r,i){if(r&1&&(ne(0,"mat-option",26),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e.alias)("id",e.name)("matTooltip",e.alias),q(),Qt(" ",e.alias," ")}}function kct(r,i){if(r&1){let e=dt();ne(0,"button",27),Oe("click",function(){Re(e);let o=ae(2);return Fe(o.clearSelectedField())}),ne(1,"mat-icon"),Ye(2,"close"),ce()()}if(r&2){let e=ae(2);ee("disabled",!e.currentFilter.active)}}function Oct(r,i){if(r&1){let e=dt();ne(0,"mat-form-field",21),Oe("mouseenter",function(){Re(e);let o=ae();return Fe(o.inputClearable="selectField")})("mouseleave",function(){Re(e);let o=ae();return Fe(o.inputClearable=void 0)}),ne(1,"input",22),Ne(2,"translate"),Ne(3,"async"),Ne(4,"async"),Ne(5,"async"),Ne(6,"async"),Ne(7,"translate"),Oe("input",function(o){Re(e);let s=ae();return Fe(s.updateFieldsList(o.target.value))}),ce(),ne(8,"mat-autocomplete",23,0),Oe("optionSelected",function(o){Re(e);let s=ae();return Fe(s.changeField(o.option.id))}),We(10,Dct,2,4,"mat-option",24),Ne(11,"async"),ce(),We(12,kct,3,1,"button",25),ce()}if(r&2){let e=ji(9),n=ae();ee("floatLabel",n.floatLabel),q(),ee("placeholder",je(2,8,"igo.geo.sourceFields.selectField"))("disabled",!n.currentFilter.active)("matAutocomplete",e)("value",je(3,10,n.selectedField$)?je(4,12,n.selectedField$).alias:"")("matTooltip",je(5,14,n.selectedField$)?je(6,16,n.selectedField$).alias:je(7,18,"igo.geo.sourceFields.selectField")),q(9),ee("ngForOf",je(11,20,n.filteredFields$)),q(2),ee("ngIf",n.currentFilter.propertyName&&n.inputClearable==="selectField"&&n.currentFilter.active)}}function Pct(r,i){if(r&1&&(ne(0,"mat-option",8),Ne(1,"translate"),Ye(2),Ne(3,"translate"),ce()),r&2){let e=i.$implicit;ee("value",e.key)("matTooltip",je(1,3,"igo.geo.operators.tooltip."+e.key)),q(2),Qt(" ",je(3,5,"igo.geo.operators."+e.key)," ")}}function Rct(r,i){if(r&1&&(ne(0,"mat-option",31),Ye(1),Ne(2,"translate"),ce()),r&2){let e=i.$implicit;ee("value",e.type),q(),Qt(" ",je(2,2,"igo.geo.spatialSelector."+e.type)," ")}}function Fct(r,i){if(r&1){let e=dt();ne(0,"mat-form-field",28)(1,"mat-select",29),Oe("selectionChange",function(o){Re(e);let s=ae();return Fe(s.changeSpatialSelector(o.value))}),We(2,Rct,3,4,"mat-option",30),ce()()}if(r&2){let e=ae();q(),ee("disabled",!e.currentFilter.active)("value",e.currentFilter.igoSpatialSelector),q(),ee("ngForOf",e.igoSpatialSelectors)}}function Lct(r,i){if(r&1&&(ne(0,"mat-option",34),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e)("matTooltip",e),q(),Qt(" ",e," ")}}function Nct(r,i){if(r&1){let e=dt();ne(0,"button",27),Oe("click",function(){Re(e);let o=ae(2);return Fe(o.clearProperty())}),ne(1,"mat-icon"),Ye(2,"close"),ce()()}if(r&2){let e=ae(2);ee("disabled",!e.currentFilter.active)}}function Bct(r,i){if(r&1){let e=dt();ne(0,"mat-form-field",32),Oe("mouseenter",function(){Re(e);let o=ae();return Fe(o.inputClearable="selectProperty")})("mouseleave",function(){Re(e);let o=ae();return Fe(o.inputClearable=void 0)}),ne(1,"input",22),Ne(2,"translate"),Oe("input",function(o){Re(e);let s=ae();return Fe(s.updateValuesList(o.target.value))}),ce(),ne(3,"mat-autocomplete",23,1),Oe("optionSelected",function(o){Re(e);let s=ae();return Fe(s.changeProperty(o.option.value))}),We(5,Lct,2,3,"mat-option",33),Ne(6,"async"),ce(),We(7,Nct,3,1,"button",25),ce()}if(r&2){let e=ji(4),n=ae();ee("floatLabel",n.floatLabel),q(),ee("placeholder",je(2,8,"igo.geo.filter.placeholder"))("disabled",!n.currentFilter.active)("matAutocomplete",e)("value",n.detectProperty()==="expression"?n.currentFilter.expression:n.currentFilter.pattern)("matTooltip",n.detectProperty()==="expression"?n.currentFilter.expression||"":n.currentFilter.pattern||""),q(4),ee("ngForOf",je(6,10,n.filteredValues$)),q(2),ee("ngIf",n.isClearable()&&n.inputClearable==="selectProperty"&&n.currentFilter.active)}}function jct(r,i){if(r&1){let e=dt();ne(0,"button",27),Oe("click",function(){Re(e);let o=ae(2);return Fe(o.currentFilter.igoSNRC="")}),ne(1,"mat-icon"),Ye(2,"close"),ce()()}if(r&2){let e=ae(2);ee("disabled",!e.currentFilter.active&&e.inputClearable==="selectSNRC"&&e.currentFilter.active)}}function Vct(r,i){if(r&1){let e=dt();ne(0,"mat-form-field",35),Oe("mouseenter",function(){Re(e);let o=ae();return Fe(o.inputClearable="selectSNRC")})("mouseleave",function(){Re(e);let o=ae();return Fe(o.inputClearable=void 0)}),ne(1,"input",36),Ne(2,"translate"),Oe("input",function(o){Re(e);let s=ae();return Fe(s.changeSNRC(o.target.value))}),ce(),We(3,jct,3,1,"button",25),ce()}if(r&2){let e=ae();ee("floatLabel",e.floatLabel),q(),ee("placeholder",je(2,5,"igo.geo.filter.placeholderSnrc"))("value",e.currentFilter.igoSNRC)("matTooltip",e.currentFilter.igoSNRC?e.currentFilter.igoSNRC:""),q(2),ee("ngIf",e.currentFilter.igoSNRC)}}function $ct(r,i){if(r&1){let e=dt();ne(0,"button",38),Ne(1,"translate"),Oe("click",function(){Re(e);let o=ae(2);return Fe(o.changeMapExtentGeometry())}),ne(2,"mat-icon"),Ye(3,"zoom_out_map"),ce()()}if(r&2){let e=ae(2);ee("disabled",!e.currentFilter.active)("disabled",!e.currentFilter.active)("matTooltip",je(1,3,"igo.geo.spatialSelector.btnSetExtent"))}}function Uct(r,i){if(r&1&&(zn(0),We(1,$ct,4,5,"button",37),Gn()),r&2){let e=ae();q(),ee("ngIf",e.currentFilter.igoSpatialSelector==="fixedExtent")}}function zct(r,i){if(r&1&&(ne(0,"mat-option",34),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e)("matTooltip",e),q(),Qt(" ",e," ")}}function Gct(r,i){if(r&1){let e=dt();ne(0,"button",27),Oe("click",function(){Re(e);let o=ae(2);return Fe(o.clearProperty(1))}),ne(1,"mat-icon"),Ye(2,"close"),ce()()}if(r&2){let e=ae(2);ee("disabled",!e.currentFilter.active)}}function Hct(r,i){if(r&1){let e=dt();ne(0,"mat-form-field",39),Oe("mouseenter",function(){Re(e);let o=ae();return Fe(o.inputClearable="selectProperty1")})("mouseleave",function(){Re(e);let o=ae();return Fe(o.inputClearable=void 0)}),ne(1,"input",40),Ne(2,"translate"),Oe("input",function(o){Re(e);let s=ae();return Fe(s.updateValuesList(o.target.value,1))}),ce(),ne(3,"mat-autocomplete",23,2),Oe("optionSelected",function(o){Re(e);let s=ae();return Fe(s.changeNumericProperty(o.option.value,1))}),We(5,zct,2,3,"mat-option",33),Ne(6,"async"),ce(),We(7,Gct,3,1,"button",25),ce()}if(r&2){let e=ji(4),n=ae();ee("floatLabel",n.floatLabel),q(),ee("placeholder",je(2,7,"igo.geo.filter.placeholder"))("disabled",!n.currentFilter.active)("matAutocomplete",e)("value",n.detectProperty(1)==="lowerBoundary"?n.currentFilter.lowerBoundary:n.currentFilter.begin),q(4),ee("ngForOf",je(6,9,n.filteredValues$)),q(2),ee("ngIf",n.isClearable(1)&&n.inputClearable==="selectProperty1"&&n.currentFilter.active)}}function Wct(r,i){if(r&1&&(ne(0,"mat-option",34),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e)("matTooltip",e),q(),Qt(" ",e," ")}}function qct(r,i){if(r&1){let e=dt();ne(0,"button",27),Oe("click",function(){Re(e);let o=ae(2);return Fe(o.clearProperty(2))}),ne(1,"mat-icon"),Ye(2,"close"),ce()()}if(r&2){let e=ae(2);ee("disabled",!e.currentFilter.active)}}function Yct(r,i){if(r&1){let e=dt();ne(0,"mat-form-field",39),Oe("mouseenter",function(){Re(e);let o=ae();return Fe(o.inputClearable="selectProperty2")})("mouseleave",function(){Re(e);let o=ae();return Fe(o.inputClearable=void 0)}),ne(1,"input",40),Ne(2,"translate"),Oe("input",function(o){Re(e);let s=ae();return Fe(s.updateValuesList(o.target.value,2))}),ce(),ne(3,"mat-autocomplete",23,3),Oe("optionSelected",function(o){Re(e);let s=ae();return Fe(s.changeNumericProperty(o.option.value,2))}),We(5,Wct,2,3,"mat-option",33),Ne(6,"async"),ce(),We(7,qct,3,1,"button",25),ce()}if(r&2){let e=ji(4),n=ae();ee("floatLabel",n.floatLabel),q(),ee("placeholder",je(2,7,"igo.geo.filter.placeholder"))("disabled",!n.currentFilter.active)("matAutocomplete",e)("value",n.detectProperty(2)==="upperBoundary"?n.currentFilter.upperBoundary:n.currentFilter.end),q(4),ee("ngForOf",je(6,9,n.filteredValues$)),q(2),ee("ngIf",n.isClearable(2)&&n.inputClearable==="selectProperty2"&&n.currentFilter.active)}}function Kct(r,i){if(r&1){let e=dt();ne(0,"igo-ogc-filter-time",41),Oe("changeProperty",function(o){Re(e);let s=ae();return Fe(s.changeProperty(o.value,o.pos))}),ce()}if(r&2){let e=ae();ee("datasource",e.datasource)("currentFilter",e.currentFilter)}}var Zct=["selection"],Qct=()=>({standalone:!0});function Xct(r,i){if(r&1&&(ne(0,"mat-option",17),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e),q(),Qt("",e.title," ")}}function Jct(r,i){if(r&1){let e=dt();ne(0,"div",14)(1,"mat-form-field")(2,"mat-select",15),Ne(3,"translate"),bs("valueChange",function(o){Re(e);let s=ae(3);return Os(s.currentPushButtonsGroup,o)||(s.currentPushButtonsGroup=o),Fe(o)}),We(4,Xct,2,2,"mat-option",16),ce()()()}if(r&2){let e=ae(3);q(2),ee("matTooltip",je(3,3,"igo.geo.layer.legend.selectStyle")),vs("value",e.currentPushButtonsGroup),q(2),ee("ngForOf",e.getPushButtonsGroups())}}function edt(r,i){if(r&1){let e=dt();ne(0,"mat-button-toggle",20),Oe("change",function(){let o=Re(e).$implicit,s=ae(3).$implicit,l=ae();return Fe(l.onSelectionChange(o,s.selectorType))}),Ye(1),ce()}if(r&2){let e=i.$implicit,n=ae(4);ee("matTooltip",n.getToolTip(e))("ngStyle",n.getButtonColor(e))("checked",e.enabled)("value",e),q(),Qt("",e.title," ")}}function tdt(r,i){if(r&1&&(zn(0),ne(1,"h3"),Ye(2),ce(),ne(3,"mat-button-toggle-group",18),We(4,edt,2,5,"mat-button-toggle",19),ce(),Gn()),r&2){let e=i.$implicit,n=ae(3);q(2),Si(e.title),q(),Wr("vertical",n.bundleIsVertical(e)),q(),ee("ngForOf",e.selectors)}}function idt(r,i){if(r&1&&(ne(0,"div",12),wt(1,"mat-divider"),We(2,Jct,5,5,"div",13)(3,tdt,5,3,"ng-container",5),ce()),r&2){let e=ae(2);q(2),ee("ngIf",e.getPushButtonsGroups().length>1),q(),ee("ngForOf",e.currentPushButtonsGroup.computedSelectors)}}function ndt(r,i){if(r&1&&(ne(0,"mat-option",17),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e),q(),Qt("",e.title," ")}}function rdt(r,i){if(r&1){let e=dt();ne(0,"div",14)(1,"mat-form-field")(2,"mat-select",22),Ne(3,"translate"),bs("valueChange",function(o){Re(e);let s=ae(3);return Os(s.currentCheckboxesGroup,o)||(s.currentCheckboxesGroup=o),Fe(o)}),We(4,ndt,2,2,"mat-option",16),ce()()()}if(r&2){let e=ae(3);q(2),ee("matTooltip",je(3,3,"igo.geo.layer.legend.selectStyle")),vs("value",e.currentCheckboxesGroup),q(2),ee("ngForOf",e.getCheckboxesGroups())}}function odt(r,i){if(r&1){let e=dt();ne(0,"mat-checkbox",25),Oe("change",function(){let o=Re(e).$implicit,s=ae(3).$implicit,l=ae();return Fe(l.onSelectionChange(o,s.selectorType))}),Ye(1),ce()}if(r&2){let e=i.$implicit,n=ae(4);ee("matTooltip",n.getToolTip(e))("checked",e.enabled)("value",e),q(),Qt("",e.title," ")}}function sdt(r,i){if(r&1){let e=dt();ne(0,"u",28),Oe("click",function(){Re(e);let o=ae(5);return Fe(o.displayLessResults("checkbox"))}),Ye(1),Ne(2,"translate"),ce()}r&2&&(q(),Qt("",je(2,1,"igo.geo.filter.displayLessResults")," "))}function adt(r,i){if(r&1){let e=dt();ne(0,"u",29),Oe("click",function(){Re(e);let o=ae(5);return Fe(o.displayMoreResults("checkbox"))}),Ye(1),Ne(2,"translate"),ce()}r&2&&(q(),Qt("",je(2,1,"igo.geo.filter.displayMoreResults")," "))}function ldt(r,i){if(r&1&&(ne(0,"p"),We(1,sdt,3,3,"u",26)(2,adt,3,3,"u",27),ce()),r&2){let e=ae().$implicit,n=ae(3);q(),ee("ngIf",n.isLessResults(e,"checkbox")),q(),ee("ngIf",n.isMoreResults(e,"checkbox"))}}function cdt(r,i){if(r&1&&(zn(0),ne(1,"h3"),Ye(2),ce(),ne(3,"div",23),We(4,odt,2,4,"mat-checkbox",24),ce(),We(5,ldt,3,2,"p",6),Gn()),r&2){let e=i.$implicit,n=ae(3);q(2),Si(e.title),q(2),ee("ngForOf",e.selectors),q(),ee("ngIf",n.isLessResults(e,"checkbox")||n.isMoreResults(e,"checkbox"))}}function ddt(r,i){if(r&1&&(ne(0,"div",21),wt(1,"mat-divider"),We(2,rdt,5,5,"div",13)(3,cdt,6,3,"ng-container",5),ce()),r&2){let e=ae(2);q(2),ee("ngIf",e.getCheckboxesGroups().length>1),q(),ee("ngForOf",e.currentCheckboxesGroup.computedSelectors)}}function udt(r,i){if(r&1&&(ne(0,"mat-option",17),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e),q(),Qt("",e.title," ")}}function hdt(r,i){if(r&1){let e=dt();ne(0,"div",14)(1,"mat-form-field")(2,"mat-select",31),Ne(3,"translate"),bs("valueChange",function(o){Re(e);let s=ae(3);return Os(s.currentRadioButtonsGroup,o)||(s.currentRadioButtonsGroup=o),Fe(o)}),We(4,udt,2,2,"mat-option",16),ce()()()}if(r&2){let e=ae(3);q(2),ee("matTooltip",je(3,3,"igo.geo.layer.legend.selectStyle")),vs("value",e.currentRadioButtonsGroup),q(2),ee("ngForOf",e.getRadioButtonsGroups())}}function pdt(r,i){if(r&1){let e=dt();ne(0,"mat-radio-button",34),Ne(1,"translate"),Oe("change",function(){Re(e);let o=ae(4);return Fe(o.emptyRadioButtons())}),Ye(2),Ne(3,"translate"),ce()}r&2&&(ee("matTooltip",je(1,2,"igo.geo.filter.resetFilters")),q(2),Qt("",je(3,4,"igo.geo.filter.resetFilters")," "))}function mdt(r,i){if(r&1){let e=dt();ne(0,"mat-radio-button",25),Oe("change",function(){let o=Re(e).$implicit,s=ae(3).$implicit,l=ae();return Fe(l.onSelectionChange(o,s.selectorType))}),Ye(1),ce()}if(r&2){let e=i.$implicit,n=ae(4);ee("matTooltip",n.getToolTip(e))("checked",e.enabled)("value",e),q(),Qt("",e.title," ")}}function fdt(r,i){if(r&1){let e=dt();ne(0,"u",28),Oe("click",function(){Re(e);let o=ae(5);return Fe(o.displayLessResults("radio"))}),Ye(1),Ne(2,"translate"),ce()}r&2&&(q(),Qt("",je(2,1,"igo.geo.filter.displayLessResults")," "))}function gdt(r,i){if(r&1){let e=dt();ne(0,"u",29),Oe("click",function(){Re(e);let o=ae(5);return Fe(o.displayMoreResults("radio"))}),Ye(1),Ne(2,"translate"),ce()}r&2&&(q(),Qt("",je(2,1,"igo.geo.filter.displayMoreResults")," "))}function _dt(r,i){if(r&1&&(ne(0,"p"),We(1,fdt,3,3,"u",26)(2,gdt,3,3,"u",27),ce()),r&2){let e=ae().$implicit,n=ae(3);q(),ee("ngIf",n.isLessResults(e,"radio")),q(),ee("ngIf",n.isMoreResults(e,"radio"))}}function ydt(r,i){if(r&1&&(zn(0),ne(1,"h3"),Ye(2),ce(),ne(3,"mat-radio-group",32),We(4,pdt,4,6,"mat-radio-button",33)(5,mdt,2,4,"mat-radio-button",24)(6,_dt,3,2,"p",6),ce(),Gn()),r&2){let e=i.$implicit,n=ae(3);q(2),Si(e.title),q(2),ee("ngIf",e.unfiltered),q(),ee("ngForOf",e.selectors),q(),ee("ngIf",n.isLessResults(e,"radio")||n.isMoreResults(e,"radio"))}}function vdt(r,i){if(r&1&&(ne(0,"div",30),wt(1,"mat-divider"),We(2,hdt,5,5,"div",13)(3,ydt,7,4,"ng-container",5),ce()),r&2){let e=ae(2);q(2),ee("ngIf",e.getRadioButtonsGroups().length>1),q(),ee("ngForOf",e.currentRadioButtonsGroup.computedSelectors)}}function bdt(r,i){if(r&1&&(ne(0,"mat-option",17),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e),q(),Qt("",e.title," ")}}function wdt(r,i){if(r&1){let e=dt();ne(0,"div",14)(1,"mat-form-field")(2,"mat-select",36),Ne(3,"translate"),bs("valueChange",function(o){Re(e);let s=ae(3);return Os(s.currentSelectGroup,o)||(s.currentSelectGroup=o),Fe(o)}),We(4,bdt,2,2,"mat-option",16),ce()()()}if(r&2){let e=ae(3);q(2),ee("matTooltip",je(3,3,"igo.geo.layer.legend.selectStyle")),vs("value",e.currentSelectGroup),q(2),ee("ngForOf",e.getSelectGroups())}}function Cdt(r,i){if(r&1){let e=dt();ne(0,"mat-button",39),Ne(1,"translate"),Oe("click",function(){Re(e);let o=ae(4);return Fe(o.emptySelect())}),ne(2,"mat-icon"),Ye(3,"filter_alt_off"),ce()()}r&2&&ee("matTooltip",je(1,1,"igo.geo.filter.resetFilters"))}function xdt(r,i){if(r&1){let e=dt();ne(0,"mat-checkbox",43),bs("ngModelChange",function(o){Re(e);let s=ae(5);return Os(s.selectAllSelected,o)||(s.selectAllSelected=o),Fe(o)}),Oe("change",function(){Re(e);let o=ae(5);return Fe(o.toggleAllSelection())}),Ye(1,"Tous "),ce()}if(r&2){let e=ae(5);vs("ngModel",e.selectAllSelected),ee("ngModelOptions",lw(2,Qct))}}function Sdt(r,i){if(r&1){let e=dt();ne(0,"mat-option",44),Oe("onSelectionChange",function(o){Re(e);let s=ae(2).$implicit,l=ae(3);return Fe(l.selectOptionClick(o.source.value,s,o))}),Ye(1),ce()}if(r&2){let e=i.$implicit,n=ae(5);ee("matTooltip",n.getToolTip(e))("value",e),q(),Qt("",e.title," ")}}function Idt(r,i){if(r&1&&(ne(0,"div")(1,"mat-select",40,1)(3,"div",23),We(4,xdt,2,3,"mat-checkbox",41),ce(),We(5,Sdt,2,3,"mat-option",42),ce()()),r&2){let e=ae().$implicit;q(),ee("multiple",e.multiple)("placeholder",e.title),q(3),ee("ngIf",e.multiple),q(),ee("ngForOf",e.selectors)}}function Tdt(r,i){if(r&1){let e=dt();ne(0,"mat-option",44),Oe("onSelectionChange",function(o){Re(e);let s=ae(2).$implicit,l=ae(3);return Fe(l.selectOptionClick(o.source.value,s))}),Ye(1),ce()}if(r&2){let e=i.$implicit,n=ae(5);ee("matTooltip",n.getToolTip(e))("value",e),q(),Qt("",e.title," ")}}function Adt(r,i){if(r&1&&(ne(0,"mat-select",45),We(1,Tdt,2,3,"mat-option",42),ce()),r&2){let e=ae().$implicit;ee("placeholder",e.title),q(),ee("ngForOf",e.selectors)}}function Edt(r,i){if(r&1&&(zn(0),ne(1,"h3"),Ye(2),ce(),ne(3,"div",14),We(4,Cdt,4,3,"mat-button",37),ne(5,"mat-form-field"),We(6,Idt,6,4,"div",38)(7,Adt,2,2,"ng-template",null,0,Vo),ce()(),Gn()),r&2){let e=i.$implicit,n=ji(8);q(2),Si(e.title),q(2),ee("ngIf",e.unfiltered&&!e.multiple),q(),vo("width",e.width?e.width:void 0,"%"),q(),ee("ngIf",e.multiple)("ngIfElse",n)}}function Mdt(r,i){if(r&1&&(ne(0,"div",35),wt(1,"mat-divider"),We(2,wdt,5,5,"div",13)(3,Edt,9,6,"ng-container",5),ce()),r&2){let e=ae(2);q(2),ee("ngIf",e.getSelectGroups().length>1),q(),ee("ngForOf",e.currentSelectGroup.computedSelectors)}}function Ddt(r,i){if(r&1&&(ne(0,"mat-option",17),Ye(1),ce()),r&2){let e=i.$implicit;ee("value",e),q(),Qt("",e.title," ")}}function kdt(r,i){if(r&1){let e=dt();ne(0,"div",14)(1,"mat-form-field")(2,"mat-select",47),Ne(3,"translate"),bs("valueChange",function(o){Re(e);let s=ae(3);return Os(s.currentAutocompleteGroup,o)||(s.currentAutocompleteGroup=o),Fe(o)}),We(4,Ddt,2,2,"mat-option",16),ce()()()}if(r&2){let e=ae(3);q(2),ee("matTooltip",je(3,3,"igo.geo.layer.legend.selectStyle")),vs("value",e.currentAutocompleteGroup),q(2),ee("ngForOf",e.getAutocompleteGroups())}}function Odt(r,i){if(r&1){let e=dt();ne(0,"mat-button",39),Ne(1,"translate"),Oe("click",function(){Re(e);let o=ae(4);return Fe(o.emptyAutocomplete())}),ne(2,"mat-icon"),Ye(3,"filter_alt_off"),ce()()}r&2&&ee("matTooltip",je(1,1,"igo.geo.filter.resetFilters"))}function Pdt(r,i){if(r&1){let e=dt();ne(0,"mat-chip",54),Oe("removed",function(){let o=Re(e).$implicit,s=ae(6);return Fe(s.toggleSelection(o))}),Ye(1),ne(2,"button",55),Ne(3,"translate"),ne(4,"mat-icon"),Ye(5,"cancel"),ce()()()}if(r&2){let e=i.$implicit;q(),Qt(" ",e," "),q(),ee("matTooltip",je(3,2,"igo.geo.filter.removeFilter"))}}function Rdt(r,i){if(r&1&&(ne(0,"mat-chip-set"),We(1,Pdt,6,4,"mat-chip",53),ce()),r&2){let e=ae(5);q(),ee("ngForOf",e.autocompleteEnableds)}}function Fdt(r,i){if(r&1){let e=dt();ne(0,"mat-option",56)(1,"div",57),Oe("click",function(o){let s=Re(e).$implicit,l=ae(5);return Fe(l.toggleAutocompleteOption(o,s.value))}),ne(2,"mat-checkbox",58),Oe("click",function(o){let s=Re(e).$implicit,l=ae(5);return Fe(l.toggleAutocompleteOption(o,s.value))}),ce(),Ye(3),ce()()}if(r&2){let e=i.$implicit,n=ae(5);ee("matTooltip",n.getToolTip(e)),q(2),ee("checked",n.checkedStatus(e.value)),q(),Qt(" ",e.value," ")}}function Ldt(r,i){if(r&1){let e=dt();ne(0,"mat-form-field",49)(1,"mat-label"),Ye(2),ce(),We(3,Rdt,2,1,"mat-chip-set",6),ne(4,"input",50,2),Oe("input",function(){Re(e);let o=ae(4);return Fe(o.onInputChange())}),ce(),ne(6,"mat-autocomplete",51,3),We(8,Fdt,4,3,"mat-option",52),Ne(9,"async"),ce()()}if(r&2){let e,n=ji(7),o=ae().$implicit,s=ae(3);vo("width",o.width?o.width:void 0,"%"),q(2),Si(o.title),q(),ee("ngIf",s.filteredOgcAutocomplete[o.id]&&((e=o.showChips)!==null&&e!==void 0?e:!0)),q(),ee("matAutocomplete",n),q(2),ee("displayWith",s.displayFn),q(2),ee("ngForOf",je(9,7,s.filteredOgcAutocomplete[o.id]))}}function Ndt(r,i){if(r&1&&(zn(0),ne(1,"h3"),Ye(2),ce(),ne(3,"div",14),We(4,Odt,4,3,"mat-button",37)(5,Ldt,10,9,"mat-form-field",48),ce(),Gn()),r&2){let e=i.$implicit,n=ae(3);q(2),Si(e.title),q(2),ee("ngIf",e.unfiltered),q(),ee("ngIf",n.filteredOgcAutocomplete[e.id])}}function Bdt(r,i){if(r&1&&(ne(0,"div",46),wt(1,"mat-divider"),We(2,kdt,5,5,"div",13)(3,Ndt,6,3,"ng-container",5),ce()),r&2){let e=ae(2);q(2),ee("ngIf",e.getAutocompleteGroups().length>1),q(),ee("ngForOf",e.currentAutocompleteGroup.computedSelectors)}}function jdt(r,i){if(r&1&&(ne(0,"div"),We(1,idt,4,2,"div",7)(2,ddt,4,2,"div",8)(3,vdt,4,2,"div",9)(4,Mdt,4,2,"div",10)(5,Bdt,4,2,"div",11),ce()),r&2){let e=i.$implicit;q(),ee("ngIf",e.selectorType==="pushButton"),q(),ee("ngIf",e.selectorType==="checkbox"),q(),ee("ngIf",e.selectorType==="radioButton"),q(),ee("ngIf",e.selectorType==="select"),q(),ee("ngIf",e.selectorType==="autocomplete")}}function Vdt(r,i){r&1&&(ne(0,"h3"),Ye(1),Ne(2,"translate"),ce()),r&2&&(q(),Qt(" ",je(2,1,"igo.geo.filter.reportingDate")," "))}function $dt(r,i){if(r&1&&(ne(0,"h3"),Ye(1),ce()),r&2){let e=ae(2);q(),Si(e.currentFilter.title)}}function Udt(r,i){if(r&1){let e=dt();ne(0,"div"),wt(1,"mat-divider"),We(2,Vdt,3,3,"h3",6)(3,$dt,2,1,"h3",6),ne(4,"igo-ogc-filter-time",59),Oe("changeProperty",function(o){Re(e);let s=ae();return Fe(s.changeProperty(o.value,o.pos))}),ce()()}if(r&2){let e=ae();q(2),ee("ngIf",!e.currentFilter.title),q(),ee("ngIf",e.currentFilter.title),q(),ee("datasource",e.datasource)("currentFilter",e.currentFilter)}}function zdt(r,i){if(r&1&&wt(0,"igo-ogc-filter-selection",2),r&2){let e=ae();ee("refreshFilters",e.refreshFunc)("datasource",e.datasource)("map",e.map)("currentFilter",e.currentFilter)}}function Gdt(r,i){if(r&1&&wt(0,"igo-ogc-filter-form",4),r&2){let e=i.$implicit,n=ae(2);ee("currentFilter",e)("refreshFilters",n.refreshFunc)("datasource",n.datasource)("map",n.map)}}function Hdt(r,i){if(r&1&&We(0,Gdt,1,4,"ng-template",3),r&2){let e=ae();ee("ngForOf",e.datasource.options.ogcFilters.interfaceOgcFilters)}}var Wdt=r=>({"separate-item":r}),qdt=r=>({cursor:r}),Ydt=r=>({disabled:r});function Kdt(r,i){if(r&1){let e=dt();ne(0,"mat-icon",11),Oe("click",function(){Re(e);let o=ae();return Fe(o.toggleFiltersCollapsed())}),Ye(1,"expand_less "),ce()}if(r&2){let e=ae(),n=ji(8);ee("target",n)("collapsed",e.filtersCollapsed)}}function Zdt(r,i){if(r&1){let e=dt();ne(0,"span",12),Oe("click",function(){Re(e);let o=ae();return Fe(o.toggleLegendOnClick())}),Ye(1),ce()}if(r&2){let e=ae();ee("ngStyle",fo(3,qdt,e.filtersCollapsed?"default":"pointer"))("matTooltip",e.layer.title),q(),Qt(" ",e.layer.title," ")}}function Qdt(r,i){if(r&1){let e=dt();ne(0,"button",13),Ne(1,"translate"),Oe("click",function(){Re(e);let o=ae();return Fe(o.addFilterToSequence())}),ne(2,"mat-icon"),Ye(3,"add"),ce()()}if(r&2){let e=ae();ee("disabled",e.addFilterDisabled())("matTooltip",je(1,3,"igo.geo.filter.addFilter"))("color",e.color)}}function Xdt(r,i){if(r&1){let e=dt();ne(0,"button",14),Ne(1,"translate"),Ne(2,"translate"),Oe("click",function(){Re(e);let o=ae();return Fe(o.layer.visible=!o.layer.visible)}),ne(3,"mat-icon",2),Ne(4,"async"),Ye(5),ce()()}if(r&2){let e=ae();ee("color",e.layer.visible?"primary":"default")("matTooltip",e.layer.visible?je(1,4,"igo.geo.layer.hideLayer"):je(2,6,"igo.geo.layer.showLayer")),q(3),ee("ngClass",fo(10,Ydt,je(4,8,e.inResolutionRange$)===!1)),q(2),Qt("",e.layer.visible?"visibility":"visibility_off"," ")}}function Jdt(r,i){if(r&1&&wt(0,"igo-layer-legend",17),r&2){let e=ae(2);ee("layer",e.layer)}}function eut(r,i){if(r&1&&(ne(0,"div",15,1),We(2,Jdt,1,1,"igo-layer-legend",16),Ne(3,"async"),ce()),r&2){let e=ae();q(2),ee("ngIf",je(3,1,e.showLegend$))}}function tut(r,i){if(r&1){let e=dt();ne(0,"section",18),wt(1,"mat-divider"),ne(2,"mat-checkbox",19),Oe("change",function(o){Re(e);let s=ae();return Fe(s.changeOgcFilterType(o))}),bs("ngModelChange",function(o){Re(e);let s=ae();return Os(s.datasource.options.ogcFilters.advancedOgcFilters,o)||(s.datasource.options.ogcFilters.advancedOgcFilters=o),Fe(o)}),Ye(3),Ne(4,"translate"),ce()()}if(r&2){let e=ae();q(2),vs("ngModel",e.datasource.options.ogcFilters.advancedOgcFilters),q(),Qt(" ",je(4,2,"igo.geo.filter.advancedOgcFilters")," ")}}var kAe=()=>({cursor:"pointer",color:"blue"});function iut(r,i){if(r&1&&(ne(0,"td")(1,"mat-icon",7),Ye(2),ce()()),r&2){let e=ae(3);q(2),Si(e.icon)}}function nut(r,i){if(r&1){let e=dt();ne(0,"td")(1,"a",8),Ye(2),Ne(3,"translate"),ce(),ne(4,"button",9),Oe("click",function(){Re(e);let o=ae().$implicit,s=ae(2);return Fe(s.copyTextToClipboard(o.value))}),ne(5,"mat-icon"),Ye(6,"content_copy"),ce()()()}if(r&2){let e=ae().$implicit,n=ae(2);q(),Wr("href",e.value,pl),q(),rf(" ",je(3,3,"igo.geo.targetHtmlUrl")," ",n.title,"")}}function rut(r,i){if(r&1&&(ne(0,"td",10),Ye(1),ce()),r&2){let e=ae().$implicit;q(),Qt(" ",e.key," ")}}function out(r,i){if(r&1&&wt(0,"td",11),r&2){let e=ae().$implicit;ee("innerHTML",e.value,Xu)}}function sut(r,i){if(r&1){let e=dt();ne(0,"td")(1,"u",12),Oe("click",function(){Re(e);let o=ae().$implicit,s=ae(2);return Fe(s.openSecureUrl(o.value))}),Ye(2),ce()()}if(r&2){let e=ae().$implicit,n=ae(2);q(),ee("ngStyle",lw(2,kAe)),q(),Si(n.getEmbeddedLinkText(e.value))}}function aut(r,i){if(r&1){let e=dt();ne(0,"td")(1,"u",12),Oe("click",function(){Re(e);let o=ae().$implicit,s=ae(2);return Fe(s.openSecureUrl(o.value))}),Ye(2),Ne(3,"translate"),ce(),ne(4,"button",9),Oe("click",function(){Re(e);let o=ae().$implicit,s=ae(2);return Fe(s.copyTextToClipboard(o.value))}),ne(5,"mat-icon"),Ye(6,"content_copy"),ce()()()}r&2&&(q(),ee("ngStyle",lw(4,kAe)),q(),Si(je(3,2,"igo.geo.targetHtmlUrl")))}function lut(r,i){if(r&1){let e=dt();ne(0,"td")(1,"a",13),Oe("click",function(){Re(e);let o=ae().$implicit,s=ae(2);return Fe(s.openSecureUrl(o.value))}),wt(2,"img",14),Ne(3,"secureImage"),Ne(4,"async"),ce()()}if(r&2){let e=ae().$implicit;q(),Wr("href",e.value,pl),q(),Wr("src",je(4,4,je(3,2,e.value)),pl)}}function cut(r,i){if(r&1&&(wt(0,"td",11),Ne(1,"json")),r&2){let e=ae().$implicit;ee("innerHTML",je(1,1,e.value),Xu)}}function dut(r,i){if(r&1&&(ne(0,"tr"),We(1,iut,3,1,"td",4)(2,nut,7,5,"td",4)(3,rut,2,1,"td",5)(4,out,1,1,"td",6)(5,sut,3,3,"td",4)(6,aut,7,5,"td",4)(7,lut,5,6,"td",4)(8,cut,2,3,"td",6),ce()),r&2){let e=i.$implicit,n=ae(2);q(),ee("ngIf",n.feature.properties.target==="_blank"&&e.key==="url"),q(),ee("ngIf",n.feature.properties.target==="_blank"&&e.key==="url"),q(),ee("ngIf",n.feature.properties.target===void 0),q(),ee("ngIf",n.feature.properties.target===void 0&&!n.isObject(e.value)&&!n.isUrl(e.value)&&!n.isEmbeddedLink(e.value)),q(),ee("ngIf",n.feature.properties.target===void 0&&n.isEmbeddedLink(e.value)),q(),ee("ngIf",n.feature.properties.target===void 0&&!n.isObject(e.value)&&(n.isDoc(e.value)||n.isUrl(e.value))&&!n.isImg(e.value)),q(),ee("ngIf",n.feature.properties.target===void 0&&!n.isObject(e.value)&&n.isUrl(e.value)&&n.isImg(e.value)),q(),ee("ngIf",n.feature.properties.target===void 0&&n.isObject(e.value))}}function uut(r,i){if(r&1&&(ne(0,"table",2)(1,"tbody"),We(2,dut,9,8,"tr",3),Ne(3,"keyvalue"),ce()()),r&2){let e=ae();q(2),ee("ngForOf",je(3,1,e.filterFeatureProperties(e.feature)))}}function hut(r,i){if(r&1&&wt(0,"iframe",15),r&2){let e=ae();ee("srcdoc",e.htmlSanitizer(e.feature.properties),Xu)("src",e.urlSanitizer(e.feature.properties.url),ece)}}var put=["igoForm"],mut=["*",[["","formButtons",""]]],fut=["*","[formButtons]"];function gut(r,i){if(r&1){let e=dt();ne(0,"button",1),Ne(1,"translate"),Oe("click",function(){Re(e);let o=ae();return Fe(o.openMetadata(o.options.metadata))}),ne(2,"mat-icon"),Ye(3,"info"),ce()()}if(r&2){let e=ae();ee("matTooltip",je(1,2,"igo.geo.metadata.show"))("color",e.color)}}function _ut(r,i){if(r&1&&(ne(0,"mat-dialog-content",3)(1,"h3"),Ye(2),ce()()),r&2){let e=ae();q(2),Si(e.data.abstract)}}function yut(r,i){if(r&1&&(ne(0,"mat-dialog-content",3),wt(1,"h3",4),ce()),r&2){let e=ae();q(),ee("innerHTML",e.data.abstract,Xu)}}function vut(r,i){if(r&1&&(ne(0,"mat-radio-button",6),Ye(1),Ne(2,"translate"),ce()),r&2){let e=i.$implicit,n=ae();ee("value",e),q(),Qt(" ",je(2,2,n.getSearchTypeTitle(e))," ")}}function but(r,i){if(r&1){let e=dt();ne(0,"div",12)(1,"button",13),Oe("click",function(o){Re(e);let s=ae();return Fe(s.checkUncheckAllSources(o))}),Ye(2),Ne(3,"translate"),Ne(4,"translate"),ce()()}if(r&2){let e=ae();q(2),Qt(" ",e.searchSourcesAllEnabled?je(4,3,"igo.geo.search.searchSources.selectAll"):je(3,1,"igo.geo.search.searchSources.unselectAll")," ")}}function wut(r,i){if(r&1&&(ne(0,"button",18),Ye(1),ce()),r&2){let e=ae().$implicit,n=ji(6);ee("matMenuTriggerFor",n),q(),Qt(" ",e.title," ")}}function Cut(r,i){if(r&1&&(ne(0,"button",9),Ye(1),ce()),r&2){let e=ae().$implicit;q(),Qt(" ",e.title," ")}}function xut(r,i){if(r&1){let e=dt();ne(0,"mat-radio-button",23),Oe("click",function(o){return Re(e),Fe(o.stopPropagation())})("change",function(o){let s=Re(e).$implicit,l=ae(2).$implicit,h=ae().$implicit,p=ae();return Fe(p.settingsValueCheckedRadioButton(o,h,l,s))}),Ye(1),Ne(2,"translate"),ce()}if(r&2){let e=i.$implicit,n=ae(4);ee("value",e)("matTooltip",n.getAvailableHashtagsValues(e))("checked",e.enabled),q(),Qt(" ",je(2,4,e.title)," ")}}function Sut(r,i){if(r&1&&(ne(0,"span")(1,"mat-radio-group",21),We(2,xut,3,6,"mat-radio-button",22),ce()()),r&2){let e=ae().$implicit;q(),ee("value",e),q(),ee("ngForOf",e.values)}}function Iut(r,i){if(r&1){let e=dt();ne(0,"div",12)(1,"button",13),Oe("click",function(o){Re(e);let s=ae(2).$implicit,l=ae().$implicit,h=ae();return Fe(h.checkUncheckAll(o,l,s))}),Ye(2),Ne(3,"translate"),Ne(4,"translate"),ce()()}if(r&2){let e=ae(2).$implicit;q(2),Qt(" ",e.allEnabled||e.allEnabled===void 0?je(3,1,"igo.geo.search.searchSources.settings.unselectAll"):je(4,3,"igo.geo.search.searchSources.settings.selectAll")," ")}}function Tut(r,i){if(r&1){let e=dt();ne(0,"div",25)(1,"mat-checkbox",26),Oe("click",function(o){return Re(e),Fe(o.stopPropagation())})("change",function(o){let s=Re(e).$implicit,l=ae(2).$implicit,h=ae().$implicit,p=ae();return Fe(p.settingsValueCheckedCheckbox(o,h,l,s))}),Ye(2),Ne(3,"translate"),ce()()}if(r&2){let e=i.$implicit,n=ae(2).$implicit,o=ae(2);q(),vo("display",o.displayBlock),ee("checked",e.enabled)("value",n)("matTooltip",o.getAvailableHashtagsValues(e)),q(),Qt(" ",je(3,6,e.title)," ")}}function Aut(r,i){if(r&1&&(ne(0,"span"),We(1,Iut,5,5,"div",6)(2,Tut,4,8,"div",24),ce()),r&2){let e=ae().$implicit,n=ae(2);q(),ee("ngIf",e.values.length>3),q(),ee("ngForOf",n.getAvailableValues(e))}}function Eut(r,i){if(r&1&&(zn(0),ne(1,"button",18),Ye(2),Ne(3,"translate"),ce(),ne(4,"mat-menu",19,2),We(6,Sut,3,2,"span",20)(7,Aut,3,2,"span",20),ce(),Gn()),r&2){let e=i.$implicit,n=ji(5);q(),ee("matMenuTriggerFor",n),q(),Qt(" ",je(3,5,"igo.geo.search.searchSources.settings."+e.title)," "),q(2),ee("ngSwitch",e.type),q(2),ee("ngSwitchCase","radiobutton"),q(),ee("ngSwitchCase","checkbox")}}function Mut(r,i){if(r&1){let e=dt();zn(0),ne(1,"span",14)(2,"mat-checkbox",15),Oe("click",function(o){return Re(e),Fe(o.stopPropagation())})("change",function(o){let s=Re(e).$implicit,l=ae();return Fe(l.onCheckSearchSource(o,s))}),ce(),We(3,wut,2,2,"button",16)(4,Cut,2,1,"button",17),ce(),ne(5,"mat-menu",null,1),We(7,Eut,8,7,"ng-container",7),ce(),Gn()}if(r&2){let e=i.$implicit;q(2),ee("checked",e.enabled)("value",e),q(),ee("ngIf",e.settings.length>0),q(),ee("ngIf",e.settings.length===0),q(3),ee("ngForOf",e.settings)}}function Dut(r,i){if(r&1){let e=dt();ne(0,"mat-slide-toggle",11),Ne(1,"translate"),Oe("change",function(o){Re(e);let s=ae();return Fe(s.changePointerReverseSearch(o))})("click",function(o){return Re(e),Fe(o.stopPropagation())}),Ye(2),Ne(3,"translate"),ce()}if(r&2){let e=ae();ee("matTooltip",je(1,3,"igo.geo.search.pointerSearchSummary.tooltip"))("checked",e.pointerSummaryEnabled),q(2),Qt(" ",je(3,5,"igo.geo.search.pointerSearchSummary.title")," ")}}var kut=["input"],Out=r=>({empty:r}),Put=r=>({hasSearchIcon:r});function Rut(r,i){if(r&1&&(ne(0,"mat-label"),Ye(1),ce()),r&2){let e=ae();q(),Si(e.label)}}function Fut(r,i){if(r&1){let e=dt();ne(0,"button",11),Ne(1,"translate"),Oe("click",function(){Re(e);let o=ae();return Fe(o.onClearButtonClick())}),ne(2,"mat-icon"),Ye(3,"close"),ce()()}if(r&2){let e=ae();ee("color",e.color)("matTooltip",je(1,2,"igo.geo.search.clearSearch"))}}function Lut(r,i){r&1&&wt(0,"mat-divider",12),r&2&&ee("vertical",!0)}function Nut(r,i){if(r&1){let e=dt();ne(0,"button",13),Oe("click",function(){Re(e);let o=ae();return Fe(o.handleSearch())}),ne(1,"mat-icon"),Ye(2,"search"),ce()()}if(r&2){let e=ae();ee("color",e.color)}}function But(r,i){if(r&1){let e=dt();ne(0,"igo-search-selector",14),Ne(1,"async"),Oe("searchTypeChange",function(o){Re(e);let s=ae();return Fe(s.onSearchTypeChange(o))}),ce()}if(r&2){let e=ae();ee("searchTypes",e.searchTypes)("searchType",je(1,2,e.searchType$))}}function jut(r,i){if(r&1){let e=dt();ne(0,"igo-search-settings",15),Oe("pointerSummaryStatus",function(o){Re(e);let s=ae();return Fe(s.pointerSummaryStatus.emit(o))})("searchResultsGeometryStatus",function(o){Re(e);let s=ae();return Fe(s.searchResultsGeometryStatus.emit(o))})("reverseSearchCoordsFormatStatus",function(o){Re(e);let s=ae();return Fe(s.reverseSearchCoordsFormatStatus.emit(o))})("searchSourceChange",function(){Re(e);let o=ae();return Fe(o.onSearchSettingsChange())}),ce()}if(r&2){let e=ae();ee("pointerSummaryEnabled",e.pointerSummaryEnabled)("searchResultsGeometryEnabled",e.searchResultsGeometryEnabled)("reverseSearchCoordsFormatEnabled",e.reverseSearchCoordsFormatEnabled)}}var Vut=[[["","igoSearchItemToolbar",""]]],$ut=["[igoSearchItemToolbar]"];function Uut(r,i){if(r&1&&(ne(0,"mat-icon",6),Ye(1),ce()),r&2){let e=ae();q(),Si(e.showIcons?e.icon:"blank")}}function zut(r,i){if(r&1&&wt(0,"div",7),r&2){let e=ae();ee("innerHtml",e.titleHtml,Xu)("matTooltip",e.tooltipHtml)}}function Gut(r,i){if(r&1&&(ne(0,"span",9),Ye(1),ce()),r&2){let e=ae(2);ee("matTooltip",e.title),q(),Si(e.title)}}function Hut(r,i){if(r&1&&We(0,Gut,2,2,"span",8),r&2){let e=ae();ee("ngIf",!e.titleHtml)}}function Wut(r,i){if(r&1){let e=dt();ne(0,"button",10),Oe("click",function(){Re(e);let o=ae();return Fe(o.onZoomHandler())}),ne(1,"mat-icon"),Ye(2,"search"),ce()()}}function qut(r,i){if(r&1&&(ne(0,"mat-option",14)(1,"p",15),Ye(2),ce()()),r&2){let e=i.$implicit;ee("value",e),q(2),Si(e.title)}}function Yut(r,i){if(r&1){let e=dt();ne(0,"button",2),Ne(1,"translate"),Ne(2,"async"),Oe("mouseenter",function(o){Re(e);let s=ae();return Fe(s.onMouseEvent(o))})("mouseleave",function(o){Re(e);let s=ae();return Fe(s.onMouseEvent(o))})("click",function(o){Re(e);let s=ae();return Fe(s.onToggleClick(o))}),ne(3,"mat-icon",3),Ne(4,"async"),Ne(5,"async"),Ne(6,"async"),Ne(7,"async"),Ne(8,"async"),Ne(9,"async"),Ye(10),Ne(11,"async"),ce()()}if(r&2){let e=ae();ee("matTooltip",je(1,7,e.computeTooltip()))("color",je(2,9,e.isPreview$)?"":e.added?"warn":""),q(3),ee("igoMatBadgeIcon",e.getBadgeIcon())("igoMatBadgeInverseColor",!0)("matBadgeHidden",je(4,11,e.inRange$)&&je(5,13,e.isVisible$)===!0||je(6,15,e.inRange$)&&!e.added||je(7,17,e.inRange$)&&je(8,19,e.isPreview$))("matBadgeDisabled",je(9,21,e.inRange$)===!1),q(7),Qt("",je(11,23,e.isPreview$)?"add":e.added?"delete":"add"," ")}}function Kut(r,i){if(r&1){let e=dt();ne(0,"button",4),Ne(1,"async"),Ne(2,"translate"),Oe("click",function(){Re(e);let o=ae();return Fe(o.addFeatureToLayer())}),ne(3,"mat-icon",5),Ne(4,"async"),Ye(5,"add_to_photos "),ce()()}if(r&2){let e=ae();ee("id",e.isMobile?"":"hide-save-search-result-btn")("matTooltip",je(2,7,je(1,5,e.addFeatureToLayerTooltip$))),q(3),ee("igoMatBadgeInverseColor",!0)("matBadgeHidden",je(4,9,e.inRange$))("matBadgeDisabled",!0)}}var Zut=["igoSearchItemToolbar"],OAe=r=>({results:r}),PAe=r=>({result:r}),RAe=r=>({group:r});function Qut(r,i){r&1&&_a(0)}function Xut(r,i){if(r&1){let e=dt();ne(0,"igo-collapsible",8),Oe("toggle",function(o){Re(e);let s=ae().$implicit,l=ae(2);return Fe(l.collapsed[s.source.title]=o)}),We(1,Qut,1,0,"ng-container",9),ce()}if(r&2){let e=ae().$implicit,n=ji(4),o=ae(2);Hr(e.source.getId()),ee("title",o.computeGroupTitle(e))("collapsed",o.collapsed[e.source.title]),q(),ee("ngTemplateOutlet",n)("ngTemplateOutletContext",fo(6,OAe,e.results))}}function Jut(r,i){r&1&&_a(0)}function eht(r,i){if(r&1&&We(0,Jut,1,0,"ng-container",9),r&2){let e=ae().$implicit,n=ji(4);ee("ngTemplateOutlet",n)("ngTemplateOutletContext",fo(2,OAe,e.results))}}function tht(r,i){if(r&1){let e=dt();ne(0,"igo-search-results-item",11),Oe("focus",function(){let o=Re(e).$implicit,s=ae(4);return Fe(s.resultFocus.emit(o))})("unfocus",function(){let o=Re(e).$implicit,s=ae(4);return Fe(s.resultUnfocus.emit(o))})("select",function(){let o=Re(e).$implicit,s=ae(4);return Fe(s.onResultSelect(o))})("mouseenter",function(){let o=Re(e).$implicit,s=ae(4);return Fe(s.resultFocus.emit(o))})("mouseleave",function(){let o=Re(e).$implicit,s=ae(4);return Fe(s.resultUnfocus.emit(o))}),_a(1,12),ce()}if(r&2){let e=i.$implicit,n=ae(4);ee("map",n.map)("result",e)("showIcons",n.showIcons)("withZoomButton",n.withZoomButton)("focused",n.store.state.get(e).focused)("selected",n.store.state.get(e).selected),q(),ee("ngTemplateOutlet",n.templateSearchToolbar)("ngTemplateOutletContext",fo(8,PAe,e))}}function iht(r,i){if(r&1){let e=dt();ne(0,"span",13),Oe("click",function(){Re(e);let o=ae(2).$implicit,s=ae(2);return Fe(s.displayMoreResults(o))}),ne(1,"u"),Ye(2),Ne(3,"translate"),ce()()}r&2&&(q(2),Si(je(3,1,"igo.geo.search.displayMoreResults")))}function nht(r,i){if(r&1&&We(0,tht,2,10,"ng-template",6)(1,iht,4,3,"span",10),r&2){let e=i.results,n=ae().$implicit,o=ae(2);ee("ngForOf",e),q(),ee("ngIf",o.isMoreResults(n))}}function rht(r,i){if(r&1&&We(0,Xut,2,8,"igo-collapsible",7)(1,eht,1,4,"ng-template",null,1,Vo)(3,nht,2,2,"ng-template",null,2,Vo),r&2){let e=ji(2),n=ae(2);ee("ngIf",n.mode===n.searchResultMode.Grouped)("ngIfElse",e)}}function oht(r,i){if(r&1&&(ne(0,"igo-list",5),We(1,rht,5,2,"ng-template",6,0,Vo),Ne(3,"async"),ce()),r&2){let e=ae();ee("navigation",!0),q(),ee("ngForOf",je(3,2,e.results$))}}function sht(r,i){r&1&&_a(0)}function aht(r,i){r&1&&_a(0)}function lht(r,i){if(r&1&&(ne(0,"mat-tab",17),We(1,aht,1,0,"ng-container",9),ce()),r&2){let e=i.$implicit;ae(2);let n=ji(7),o=ae();ee("label",o.computeGroupTitle(e)),q(),ee("ngTemplateOutlet",n)("ngTemplateOutletContext",fo(3,RAe,e))}}function cht(r,i){if(r&1&&(ne(0,"mat-tab-group",15),We(1,lht,2,5,"mat-tab",16),Ne(2,"async"),ce()),r&2){let e=ae(2);q(),ee("ngForOf",je(2,1,e.results$))}}function dht(r,i){r&1&&_a(0)}function uht(r,i){if(r&1&&We(0,dht,1,0,"ng-container",9),r&2){let e=i.$implicit;ae(2);let n=ji(7);ee("ngTemplateOutlet",n)("ngTemplateOutletContext",fo(2,RAe,e))}}function hht(r,i){if(r&1&&(We(0,uht,1,4,"ng-template",6),Ne(1,"async")),r&2){let e=ae(2);ee("ngForOf",je(1,1,e.results$))}}function pht(r,i){if(r&1){let e=dt();ne(0,"igo-search-results-item",11),Oe("focus",function(){let o=Re(e).$implicit,s=ae(3);return Fe(s.resultFocus.emit(o))})("unfocus",function(){let o=Re(e).$implicit,s=ae(3);return Fe(s.resultUnfocus.emit(o))})("select",function(){let o=Re(e).$implicit,s=ae(3);return Fe(s.onResultSelect(o))})("mouseenter",function(){let o=Re(e).$implicit,s=ae(3);return Fe(s.resultFocus.emit(o))})("mouseleave",function(){let o=Re(e).$implicit,s=ae(3);return Fe(s.resultUnfocus.emit(o))}),_a(1,12),ce()}if(r&2){let e=i.$implicit,n=ae(3);ee("map",n.map)("result",e)("showIcons",n.showIcons)("withZoomButton",n.withZoomButton)("focused",n.store.state.get(e).focused)("selected",n.store.state.get(e).selected),q(),ee("ngTemplateOutlet",n.templateSearchToolbar)("ngTemplateOutletContext",fo(8,PAe,e))}}function mht(r,i){if(r&1){let e=dt();ne(0,"span",13),Oe("click",function(){Re(e);let o=ae().group,s=ae(2);return Fe(s.displayMoreResults(o))}),ne(1,"u"),Ye(2),Ne(3,"translate"),ce()()}r&2&&(q(2),Si(je(3,1,"igo.geo.search.displayMoreResults")))}function fht(r,i){if(r&1&&We(0,pht,2,10,"ng-template",6)(1,mht,4,3,"span",10),r&2){let e=i.group,n=ae(2);ee("ngForOf",e.results),q(),ee("ngIf",n.isMoreResults(e))}}function ght(r,i){if(r&1&&(ne(0,"igo-list",5),We(1,sht,1,0,"ng-container",14)(2,cht,3,3,"ng-template",null,3,Vo)(4,hht,2,3,"ng-template",null,1,Vo)(6,fht,2,2,"ng-template",null,2,Vo),ce()),r&2){let e=ji(3),n=ji(5),o=ae();ee("navigation",!0),q(),ee("ngIf",o.mode===o.searchResultMode.Grouped)("ngIfThen",e)("ngIfElse",n)}}function _ht(r,i){r&1&&wt(0,"mat-icon",10)}function yht(r,i){if(r&1){let e=dt();ne(0,"button",11)(1,"mat-icon",12),Ne(2,"translate"),Oe("click",function(o){return Re(e),Fe(o.stopPropagation())}),Ye(3," public "),ce()()}r&2&&(q(),ee("matTooltip",je(2,1,"igo.geo.catalog.externalProvider.layer")))}function vht(r,i){if(r&1&&(wt(0,"igo-layer-legend",5),Ne(1,"async")),r&2){let e=ae();ee("layer",je(1,1,e.igoLayer$))}}function bht(r,i){if(r&1){let e=dt();ne(0,"mat-icon",10),Ne(1,"translate"),Oe("click",function(o){return Re(e),Fe(o.stopPropagation())}),Ye(2," public "),ce()}r&2&&ee("matTooltip",je(1,1,"igo.geo.catalog.externalProvider.group"))}function wht(r,i){if(r&1&&(ne(0,"button",8),We(1,bht,3,3,"mat-icon",9),ce()),r&2){let e=ae();q(),ee("ngIf",e.group.externalProvider)}}function Cht(r,i){if(r&1){let e=dt();zn(0),ne(1,"button",11),Ne(2,"translate"),Ne(3,"async"),Oe("click",function(o){Re(e);let s=ae();return Fe(s.onToggleClick(o))}),ne(4,"mat-icon"),Ye(5,"delete"),ce()(),Gn()}if(r&2){let e=ae();q(),ee("matTooltip",je(2,2,"igo.geo.catalog.group.removeFromMap"))("disabled",je(3,4,e.disabled$))}}function xht(r,i){if(r&1){let e=dt();ne(0,"button",12),Ne(1,"translate"),Ne(2,"async"),Oe("click",function(o){Re(e);let s=ae();return Fe(s.onToggleClick(o))}),ne(3,"mat-icon"),Ye(4,"add"),ce()()}if(r&2){let e=ae();ee("matTooltip",je(1,2,"igo.geo.catalog.group.addToMap"))("disabled",je(2,4,e.disabled$))}}function Sht(r,i){r&1&&_a(0)}function Iht(r,i){if(r&1){let e=dt();zn(0),ne(1,"igo-catalog-browser-layer",14),Oe("addedLayerIsPreview",function(o){Re(e);let s=ae(2);return Fe(s.onLayerPreview(o))})("addedChange",function(o){Re(e);let s=ae(2);return Fe(s.onLayerAddedChange(o))}),ce(),Gn()}if(r&2){let e=ae().$implicit,n=ae();q(),ee("layer",e)("resolution",n.resolution)("map",n.map)("catalogAllowLegend",n.catalogAllowLegend)("added",n.state.get(e).added)}}function Tht(r,i){if(r&1&&We(0,Sht,1,0,"ng-container",13)(1,Iht,2,5,"ng-container",13),r&2){let e=i.$implicit,n=ae();ee("ngIf",n.isGroup(e)),q(),ee("ngIf",n.isLayer(e))}}function Aht(r,i){if(r&1){let e=dt();zn(0),ne(1,"igo-catalog-browser-group",3),Ne(2,"async"),Oe("addedChange",function(o){Re(e);let s=ae(2);return Fe(s.onGroupAddedChange(o))})("layerAddedChange",function(o){Re(e);let s=ae(2);return Fe(s.onLayerAddedChange(o))}),ce(),Gn()}if(r&2){let e=ae().$implicit,n=ae();q(),ee("catalog",n.catalog)("group",e)("map",n.map)("state",n.store.state)("resolution",je(2,8,n.resolution$))("catalogAllowLegend",n.catalogAllowLegend)("collapsed",n.store.count!==1)("toggleCollapsed",n.toggleCollapsedGroup)}}function Eht(r,i){if(r&1){let e=dt();zn(0),ne(1,"igo-catalog-browser-layer",4),Ne(2,"async"),Oe("addedChange",function(o){Re(e);let s=ae(2);return Fe(s.onLayerAddedChange(o))}),ce(),Gn()}if(r&2){let e=ae().$implicit,n=ae();q(),ee("layer",e)("map",n.map)("resolution",je(2,5,n.resolution$))("catalogAllowLegend",n.catalogAllowLegend)("added",n.store.state.get(e).added)}}function Mht(r,i){if(r&1&&We(0,Aht,3,10,"ng-container",2)(1,Eht,3,7,"ng-container",2),r&2){let e=i.$implicit,n=ae();ee("ngIf",n.isGroup(e)),q(),ee("ngIf",n.isLayer(e))}}var Dht=(r,i)=>({value:r,email:i}),kht=r=>({value:r});function Oht(r,i){if(r&1&&(ne(0,"mat-option",17),Ye(1),ce()),r&2){let e=i.$implicit;ee("matTooltip",e.title)("value",e),q(),Qt(" ",e.title," ")}}function Pht(r,i){if(r&1&&(ne(0,"mat-option",17),Ye(1),ce()),r&2){let e=i.$implicit;ee("matTooltip",e.url)("value",e),q(),Qt(" ",e.url," ")}}function Rht(r,i){if(r&1){let e=dt();ne(0,"mat-option",18),Oe("click",function(o){return Re(e),Fe(o.stopPropagation())}),ne(1,"p",19),Ye(2),ce()()}if(r&2){let e=i.$implicit;ee("value",e),q(2),Si(e)}}function Fht(r,i){if(r&1&&(ne(0,"span")(1,"p",20),Ye(2),ce()()),r&2){let e=ae();q(2),Qt(" ",e.languageService.translate.instant("igo.geo.catalog.externalProvider.unavailableWithEmail",Oy(1,Dht,e.addedCatalog.url,e.emailAddress))," ")}}function Lht(r,i){if(r&1&&(ne(0,"span")(1,"p",20),Ye(2),ce()()),r&2){let e=ae();q(2),Qt(" ",e.languageService.translate.instant("igo.geo.catalog.unavailable",fo(1,kht,e.addedCatalog.url))," ")}}function Nht(r,i){if(r&1){let e=dt();ne(0,"mat-icon",5),Ne(1,"translate"),Oe("click",function(o){return Re(e),Fe(o.stopPropagation())}),Ye(2," public "),ce()}r&2&&ee("matTooltip",je(1,1,"igo.geo.catalog.externalProvider.catalog"))}function Bht(r,i){if(r&1){let e=dt();ne(0,"button",6),Ne(1,"translate"),Oe("click",function(o){Re(e);let s=ae();return Fe(s.removeCatalogFromLibrary(o))}),ne(2,"mat-icon"),Ye(3,"delete"),ce()()}r&2&&ee("matTooltip",je(1,1,"igo.geo.catalog.library.remove"))}function jht(r,i){r&1&&(ne(0,"button",7),wt(1,"mat-icon"),ce())}function Vht(r,i){if(r&1){let e=dt();ne(0,"igo-catalog-library-item",3),Oe("catalogRemove",function(){let o=Re(e).$implicit,s=ae();return Fe(s.onCatalogRemove(o))})("select",function(){let o=Re(e).$implicit,s=ae();return Fe(s.onCatalogSelect(o))}),ce()}if(r&2){let e=i.$implicit,n=ae();ee("map",n.map)("catalog",e)}}function $ht(r,i){if(r&1){let e=dt();ne(0,"div",4)(1,"button",5),Ne(2,"translate"),Oe("click",function(){Re(e);let o=ae();return Fe(o.addCatalogDialog())}),Ye(3),Ne(4,"translate"),ne(5,"mat-icon"),Ye(6,"library_add"),ce()()()}r&2&&(q(),ee("matTooltip",je(2,2,"igo.geo.catalog.library.addBtn")),q(2),Qt(" ",je(4,4,"igo.geo.catalog.library.addBtn")," "))}function FAe(r,i,e={}){let n,o,s,l,h,p,m,f,g,y,_,w,A,k,R,$,H,oe,se,ge="(\\s*;\\s*[\\d]{4,6})",ue="4326",pe,Ce=new RegExp(ge,"g"),_e="([-+])?([\\d]{1,3})([,.](\\d+))?\xB0?",de=`${_e}[\\s,]+${_e}`,te=new RegExp(`^${de}$`,"g"),Se=`([0-9]{1,2})[:|\xB0]?\\s*([0-9]{1,2})?[:|'|\u2032|\u2019]?\\s*([0-9]{1,2}(?:.[0-9]+){0,1})?\\s*["|\u2033|\u201D]?\\s*`,Te=`${Se}([N|S|E|W|O]),?\\s*${Se}([N|S|E|W|O])`,De=new RegExp(`^${Te}$`,"gi"),Le="(UTM)-?(\\d{1,2})[\\s,]*(\\d+[.,]?\\d+)[\\s,]+(\\d+[.,]?\\d+)",Me=new RegExp(`^${Le}`,"gi"),ze="(MTM)-?(\\d{1,2})[\\s,]*(\\d+[.,]?\\d+)[\\s,]+(\\d+[.,]?\\d+)",Ve=new RegExp(`^${ze}`,"gi"),$e="([-+])?(\\d{1,3})[,.](\\d+)",nt=`${$e}\\s*[,]?\\s*${$e}`,be=new RegExp(`^${nt}`,"g"),we="([-+])?(\\d{1,3})[\\s,.]{1}(\\d{1,2})[\\s,.]{1}(\\d{1,2})[.,]?(\\d{1,5})?",ke=`${we}\\s*[,.]?\\s*${we}`,et=new RegExp(`^${ke}`,"g"),Qe="LAT\\s*[\\s:]*\\s*([-+])?(\\d{1,2})[\\s.,]?(\\d+)?[\\s.,]?\\s*(\\d{1,2}([.,]\\d+)?)?\\s*(N|S|E|W)?\\s*LONG\\s*[\\s:]*\\s*([-+])?(\\d{1,3})[\\s.,]?(\\d+)?[\\s.,]?\\s*(\\d{1,2}([.,]\\d+)?)?\\s*(N|S|E|W)?\\s*UNC\\s*[\\s:]?\\s*(\\d+)\\s*CONF\\s*[\\s:]?\\s*(\\d{1,3})",at=new RegExp(`^${Qe}?`,"gi"),_t="([-+]?\\d+)[,.]?(\\d+)?",ht=`${_t}[\\s,]+${_t}`,Zt=new RegExp(`^${ht}$`,"g"),Tt=!1;if(r=r.toLocaleUpperCase().trim(),Ce.test(r)?[o,pe]=r.split(";").map(me=>me.trim()):o=r,te.test(o))[,s,oe,,f,g,se,,k]=o.match(de),oe=parseFloat((s||"")+oe+"."+f),se=parseFloat((g||"")+se+"."+k);else if(De.test(o))[,l,h,p,m,y,_,w,A]=o.match(Te),(m==="S"||m==="N")&&(l=[y,y=l][0],h=[_,_=h][0],p=[w,w=p][0],m=[A,A=m][0]),oe=tC(parseFloat(l),parseFloat(h),parseFloat(p),m),se=tC(parseFloat(y),parseFloat(_),parseFloat(w),A);else if(Me.test(o)){Tt=!0,[,,R,oe,se]=o.match(Le);let me=Number(R)<10?`EPSG:3260${R}`:`EPSG:326${R}`;[oe,se]=us([parseFloat(oe),parseFloat(se)],me,"EPSG:4326")}else if(Ve.test(o)){Tt=!0,[,,R,oe,se]=o.match(ze);let me=Number(R)<10?`EPSG:3218${R}`:`EPSG:321${80+Number(R)}`;[oe,se]=us([parseFloat(oe),parseFloat(se)],me,"EPSG:4326")}else if(et.test(o))[,s,l,h,p,f,g,y,_,w,k]=o.match(ke),oe=tC(parseFloat((s||"")+l),parseFloat(h),parseFloat(p),m),se=tC(parseFloat((g||"")+y),parseFloat(_),parseFloat(w),A);else if(be.test(o))[,s,l,f,g,y,k]=o.match(nt),oe=tC(parseFloat((s||"")+l),parseFloat(h),parseFloat(p),m),se=tC(parseFloat((g||"")+y),parseFloat(_),parseFloat(w),A);else if(at.test(o))[,g,y,_,w,,A,s,l,h,p,,m,$,H]=o.match(Qe),m||(m="W"),h&&h.length>2?oe=parseFloat((s||"")+l+"."+h):oe=tC(parseFloat(l),parseFloat(h),parseFloat(p),m),_&&_.length>2?se=parseFloat((g||"")+y+"."+_):se=tC(parseFloat(y),parseFloat(_),parseFloat(w),A);else if(Zt.test(o))Tt=!0,[,oe,f,se,k]=o.match(ht),f&&(oe=parseFloat(oe+"."+f)),k&&(se=parseFloat(se+"."+k));else return{lonLat:void 0,message:"",radius:void 0,conf:void 0};if(e.forceNA&&!Tt&&(oe>0&&se>0&&(oe>se?oe=-oe:se=-se),oe>se&&(oe=[se,se=oe][0])),n=[Number(oe),Number(se)],pe!==void 0&&pe!==ue||n[0]>180||n[0]<-180||n[1]>90||n[1]<-90){let me=pe?"EPSG:"+pe:i,Ct="EPSG:"+ue;try{n=us(n,me,Ct)}catch{return{lonLat:void 0,message:"Projection "+me+" not supported",radius:void 0,conf:void 0}}}return Math.abs(n[0])<=180&&Math.abs(n[1])<=90?{lonLat:n,message:"",radius:$?parseInt($,10):void 0,conf:H?parseInt(H,10):void 0}:{lonLat:void 0,message:"Coordinate out of Longitude/Latitude bounds",radius:void 0,conf:void 0}}function tC(r,i,e,n){i=i||0,e=e||0;let o=r<0,s=Math.abs(r)+i/60+e/3600;return(o||n==="S"||n==="W")&&(s=-s),s}function Uht(r,i=3){let e=[];return r.forEach(n=>{let o=n<0?Math.ceil(n):Math.floor(n),s=n<0?(o-n)*60:(n-o)*60,l=Math.floor(s),h=((s-l)*60).toFixed(i);e.push(`${o}\xB0 ${l}' ${h}"`)}),e}function zht(r,i){if(r===void 0||i===void 0)return!1;let e=1/1e4;return r.zoom===i.zoom&&Math.trunc(r.center[0]/e)===Math.trunc(i.center[0]/e)&&Math.trunc(r.center[1]/e)===Math.trunc(i.center[1]/e)}function yne(r){return r=Math.round(r),r<1e4?r+"":(r=Math.round(r/1e3),r<1e3?r+"K":(r=Math.round(r/1e3),r+"M"))}function Th(r,i=96){return r/(39.3701*i)}function Ght(r,i="m",e=96){return r*Dp[i]*39.3701*e}function k$(r){let i=r.originalEvent;return!i.altKey&&(MP?i.metaKey:i.ctrlKey)&&!i.shiftKey}function $f(r,i=3){return[fA.roundToNDecimal(r[0],i),fA.roundToNDecimal(r[1],i)]}function P2(r,i=3){return $f(r,i).map(e=>e.toString()+"\xB0")}function Hht(r,i){let e=us(r,"EPSG:4326","EPSG:3857"),n=[{code:"EPSG:3857",alias:"Web Mercator",coord:e,igo2CoordFormat:`${$f(e).join(", ")} ; 3857`}],o=Wht(r),s=o<10?`EPSG:3260${o}`:`EPSG:326${o}`,l=`UTM-${o}`,h=us(r,"EPSG:4326",s);n.push({code:s,alias:"UTM",coord:h,igo2CoordFormat:`${l} ${$f(h).join(", ")}`});let p=qht(r);if(p){let m=p<10?`EPSG:3218${p}`:`EPSG:321${80+p}`,f=`MTM-${p}`,g=us(r,"EPSG:4326",m);n.push({code:m,alias:"MTM",coord:g,igo2CoordFormat:`${f} ${$f(g).join(", ")}`})}return i.forEach(m=>{let f=us(r,"EPSG:4326",m.code),g=m.code.split(":")[1];n.push({code:m.code,alias:m.alias||m.code,coord:f,igo2CoordFormat:`${$f(f).join(", ")} ; ${g}`})}),n}function Wht(r){return Math.ceil((r[0]+180)/6)}function qht(r){let i=r[0],e;return i<-51&&i>-54&&(e=1),i<-54&&i>-57&&(e=2),i<-57&&i>-60&&(e=3),i<-60&&i>-63&&(e=4),i<-63&&i>-66&&(e=5),i<-66&&i>-69&&(e=6),i<-69&&i>-72&&(e=7),i<-72&&i>-75&&(e=8),i<-75&&i>-78&&(e=9),i<-78&&i>-81&&(e=10),e}function Kne(r){return r.type==="group"}function Ah(r){return r.type==="group"}function Ru(r){return!Ah(r)}function D2(r){return Ru(r)&&r.baseLayer}function Yht(r){return r.isIgoInternalLayer}function sAe(r){let i=r;if(i.sourceOptions?.type==="mvt"&&(i.igoStyle?.styleByAttribute?.hoverStyle||i.igoStyle?.hoverStyle)){let e=i.sourceOptions.featureClass;i.sourceOptions.featureClass=e||"feature"}return r}function Kht(r){if(D2(r)&&!r.visible||Yht(r))return!1;if(r.options.sourceOptions?.type)return!0}function VF(r,i){return r.sort(i==="desc"?Zht:Qht).map(e=>(Ah(e)&&VF([...e.children],i),e))}function Zht(r,i){return i.zIndex-r.zIndex}function Qht(r,i){return r.zIndex-i.zIndex}function Xht(r){let i=[];for(let e of r){if(Ah(e))continue;let n=e.options.legendOptions;if(e.visible===!1)continue;let o=e.dataSource.getLegend()||[];for(let s of o)s.url!==void 0&&i.push({title:e.title||"",url:s.url,display:n?.display===void 0?!0:n.display,isInResolutionsRange:e.isInResolutionsRange})}return i}function Jht(r){let i=function(e,n){let o=e.join(" "),s=n[0],l=n[2],h=n[1],p=n[3],m=[p,s,h,s,h,l,p,l].join(" "),f=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject();y.content='<< /EPSG 3857 /Type /PROJCS /WKT (PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.017453292519943295]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",0.0],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]) >>',g.content="<< /Bounds [ 0 1 0 0 1 0 1 1 ] /GCS "+y.objId+" 0 R /GPTS [ "+m+" ] /LPTS [ 0 1 0 0 1 0 1 1 ] /Subtype /GEO /Type /Measure >>",f.content="<< /BBox [ "+o+" ] /Measure "+g.objId+" 0 R /Name (Layer) /Type /Viewport >>";let _=this.internal.newAdditionalObject(),w=new Date().toLocaleDateString("en-CA");return _.content="<< /Name IGO2 /Type /OCG /Date "+w+" >>",f.objId};r.setGeoArea=function(e,n){this.internal.events.subscribe("putPage",function(){let o=i.call(this,e,n);this.internal.write("/VP [ "+o+" 0 R ]")})}}var aki=gA(["Pdf","Image"]),aAe=gA(["A0","A1","A2","A3","A4","A5","Letter","Legal"]),lki=gA(["landscape","portrait"]);var cki=gA(["Bmp","Gif","Jpeg","Png","Tiff"]),dki=gA(["none","topright","topleft","bottomleft","bottomright","newpage"]),ept=(()=>{class r{http;messageService;activityService;languageService;configService;document;zipFile;nbFileToProcess;activityId;mapPrintExtent;imgSizeAdded;TEXTPDFFONT={titleFont:"times",titleFontStyle:"bold",subtitleFont:"times",subtitleFontStyle:"bold",commentFont:"times",commentFontStyle:"normal",commentFontSize:12};constructor(e,n,o,s,l,h){this.http=e,this.messageService=n,this.activityService=o,this.languageService=s,this.configService=l,this.document=h}print(e,n){let o=new Dt,s=n.paperFormat,l=+n.resolution,h=n.orientation,p=n.legendPosition;this.activityId=this.activityService.register(),Jht(tr.API);let m=new tr({orientation:h,format:s.toLowerCase(),unit:"mm"}),{width:f,height:g}=m.internal.pageSize,y=[10,10,10,10],_,w;(n.title!==""||n.subtitle!=="")&&(s===aAe.A1||s===aAe.A0)&&(y[0]+=10);let A=Math.round(2*(g+145)*.05)/2;n.title!==void 0&&n.title!==""&&(_=this.getTextPdfObjectSizeAndMarg(n.title,y,this.TEXTPDFFONT.titleFont,A,this.TEXTPDFFONT.titleFontStyle,m),this.addTextInPdfDoc(m,n.title,this.TEXTPDFFONT.titleFont,this.TEXTPDFFONT.titleFontStyle,_.fontSize,_.marginLeft+y[3],y[0]),y[0]=_.height+y[0]),n.subtitle!==void 0&&n.subtitle!==""&&(w=this.getTextPdfObjectSizeAndMarg(n.subtitle,y,this.TEXTPDFFONT.subtitleFont,n.title!==""?_.fontSize*.7:A*.7,this.TEXTPDFFONT.subtitleFontStyle,m),this.addTextInPdfDoc(m,n.subtitle,this.TEXTPDFFONT.subtitleFont,this.TEXTPDFFONT.subtitleFontStyle,w.fontSize,w.marginLeft+y[3],y[0]),y[0]+=5);let k=5;n.comment!==void 0&&n.comment!==""&&this.addComment(m,n.comment,y,k),this.handleFooter(e,m,n,l,k,y);let R=f-y[3]-y[1],$=g-y[0]-y[2],H=[R,$];return this.addMap(m,e,l,H,y).subscribe(oe=>st(this,null,function*(){if(oe===Ho.Done){let se=this.imgSizeAdded[0],ge=this.imgSizeAdded[1];if(this.addGeoRef(m,e,se,ge,y),yield this.handleMeasureLayer(m,e,y),n.showNorthArrow){let ue=yield this.createNorthDirectionArrow(e.viewController.getRotation());yield this.addNorthArrowInDoc(m,ue,y,p,se)}n.legendPosition!=="none"?["topleft","topright","bottomleft","bottomright"].indexOf(n.legendPosition)>-1?yield this.addLegendSamePage(m,e,y,l,n.legendPosition):n.legendPosition==="newpage"&&(yield this.addLegend(m,e,y,l)):yield this.saveDoc(m)}(oe===Ho.Done||oe===Ho.Error)&&(this.activityService.unregister(this.activityId),o.next(Ho.Done))})),o}addGeoRef(e,n,o,s,l){let h="mm",p=e.internal.pageSize.getHeight(),m=l[3],f=p-l[0]-s,g=[m,f,m+o,f+s];for(let y=0;y<g.length;y++)g[y]=this.pdf_units2points(g[y],h);e.setGeoArea(g,this.mapPrintExtent)}handleMeasureLayer(e,n,o){return st(this,null,function*(){if(n.layerController.all.find(s=>s.visible&&s.id.startsWith("igo-measures-"))){let s,l=n.ol.getOverlayContainer();yield(0,ub.default)(l,{scale:1,backgroundColor:null}).then(h=>{s=h}),this.addCanvas(e,s,o)}})}getLayersLegendHtml(e,n){return new si(o=>{let s="",l=Xht(e.layerController.all);if(l.filter(p=>p.display===!0).length===0){o.next(s),o.complete();return}s+='<style media="screen" type="text/css">',s+=".html2canvas-container { width: "+n+"mm !important; height: 2000px !important; }",s+="table.tableLegend {table-layout: auto;}",s+="div.styleLegend {padding-top: 5px; padding-right:5px;padding-left:5px;padding-bottom:5px;}",s+="</style>",s+='<font size="3" face="Times" >',s+='<div class="styleLegend">',s+='<table class="tableLegend" >';let h=l.filter(p=>p.display&&p.isInResolutionsRange===!0).map(p=>this.getDataImage(p.url).pipe($t(m=>{let f="<tr><td>"+p.title.toUpperCase()+"</td></tr>";return f+='<tr><td><img src="'+m+'"></td></tr>',f})));Ac(h).subscribe(p=>{s=p.reduce((m,f)=>m+=f,s),s+="</table>",s+="</div>",o.next(s),o.complete()})})}getDataImage(e){return new TE(this.http,this.configService).transform(e)}getLayersLegendImage(e,n="png",o){return st(this,null,function*(){let s=new Dt,h=yield this.getLayersLegendHtml(e,200).toPromise();n=n.toLowerCase(),h.length===0&&(h='<font size="12" face="Courier New" >',h+='<div align="center"><b>NO LEGEND</b></div>');let p=window.document.createElement("div");p.style.position="absolute",p.style.top="0",p.style.zIndex="-1",window.document.body.appendChild(p),p.innerHTML=h,yield this.timeout(1);let m=yield(0,ub.default)(p,{useCORS:!0}).catch(f=>{console.log(f)});if(this.removeHtmlElement(p),m){let f=Ho.Done;try{o?this.generateCanvaFileToZip(m,"legendImage."+n):this.saveCanvasImageAsFile(m,"legendImage",n)}catch{f=Ho.Error}s.next(f)}return s})}removeHtmlElement(e){e.parentNode.removeChild(e)}getTextPdfObjectSizeAndMarg(e,n,o,s,l,h){let m=h.internal.pageSize.getWidth()-n[1]-n[3];h.setFont(o,l),h.setFontSize(s);let f=h.getTextDimensions(e),g;return f.w>m?(g=0,s=s*.7,h.setFontSize(s),f=h.getTextDimensions(e)):g=(m-f.w)/2,{fontSize:s,marginLeft:g,height:f.h}}addComment(e,n,o,s){o[2]+=s;let l=o[3],h=o[2],p=e.internal.pageSize.height-h+s;this.addTextInPdfDoc(e,n,this.TEXTPDFFONT.commentFont,this.TEXTPDFFONT.commentFontStyle,this.TEXTPDFFONT.commentFontSize,l,p,!0)}addTextInPdfDoc(e,n,o,s,l,h,p,m=!1){e.setFont(o,s),e.setFontSize(l),m&&(n=e.splitTextToSize(n,e.internal.pageSize.getWidth()-h*3)),e.text(n,h,p)}handleFooter(e,n,o,s,l,h){return st(this,null,function*(){let p="",m=this.getAttributionText(e);m&&(p+=m+". "),(o.showProjection===!0||o.showScale===!0)&&(p+=this.getProjScale(e,o,s)),p&&(h[2]+=l);let f=h[3],g=h[2],y=n.internal.pageSize.height-g+l;this.addTextInPdfDoc(n,p,this.TEXTPDFFONT.commentFont,this.TEXTPDFFONT.commentFontStyle,this.TEXTPDFFONT.commentFontSize,f,y)})}getAttributionText(e){let o=e.ol.getOverlayContainerStopEvent().getElementsByClassName("ol-attribution")[0].cloneNode(!0);return o.getElementsByTagName("button")[0].remove(),o.innerText}getProjScale(e,n,o){let s=this.languageService.translate,l="";if(n.showProjection===!0){let h=s.instant("igo.geo.printForm.projection");l+=h+": "+e.projection}if(n.showScale===!0){n.showProjection===!0&&(l+="   ");let h=s.instant("igo.geo.printForm.scale"),p=e.viewController.getScale(o);l+=h+": ~ 1 / "+yne(p)}return l}addLegend(e,n,o,s){return st(this,null,function*(){let l=e.internal.pageSize.width,h=yield this.getLayersLegendHtml(n,l).toPromise();if(h==="")return yield this.saveDoc(e),!0;let p=window.document.createElement("div");p.style.position="absolute",p.style.top="0",p.style.zIndex="-1",window.document.body.appendChild(p),p.innerHTML=h,yield this.timeout(1);let m=yield(0,ub.default)(p,{useCORS:!0}).catch(f=>{console.log(f)});if(this.removeHtmlElement(p),m){let g=[.85*(25.4*m.width)/s,.85*(25.4*m.height)/s];e.addPage();let y=m.toDataURL("image/png");e.addImage(y,"PNG",10,10,g[0],g[1])}yield this.saveDoc(e)})}addLegendSamePage(e,n,o,s,l){return st(this,null,function*(){let h=e.internal.pageSize.width,p=yield this.getLayersLegendHtml(n,h).toPromise();if(p==="")return yield this.saveDoc(e),!0;let m=window.document.createElement("div");m.style.position="absolute",m.style.top="0",m.style.zIndex="-1",window.document.body.appendChild(m),m.innerHTML=p,yield this.timeout(1);let f=yield(0,ub.default)(m,{useCORS:!0}).catch(y=>{console.log(y)});this.removeHtmlElement(m);let g;if(f){let _=[.85*(25.4*f.width)/s,.85*(25.4*f.height)/s];l==="bottomright"?g=[e.internal.pageSize.height-o[2]-_[1],o[1],o[2],e.internal.pageSize.width-o[1]-_[0]]:l==="topright"?g=[o[0],o[1],e.internal.pageSize.height-o[0]-_[1],e.internal.pageSize.width-o[1]-_[0]]:l==="bottomleft"?g=[e.internal.pageSize.height-o[2]-_[1],e.internal.pageSize.width-o[3]-_[0],o[2],o[3]]:l==="topleft"&&(g=[o[0],e.internal.pageSize.width-o[3]-_[0],e.internal.pageSize.height-o[0]-_[1],o[3]]),this.addCanvas(e,f,g),yield this.saveDoc(e)}})}defineNbFileToProcess(e){this.nbFileToProcess=e}timeout(e){return new Promise(n=>setTimeout(n,e))}addCanvas(e,n,o){let s;if(n&&(s=n.toDataURL("image/png")),s!==void 0){if(s.length<20){console.log("Warning: An image cannot be print in pdf file");return}let l=this.getImageSizeToFitPdf(e,n,o);e.addImage(s,"PNG",o[3],o[0],l[0],l[1]),e.rect(o[3],o[0],l[0],l[1]),this.imgSizeAdded=l}}addMap(e,n,o,s,l){let h=n.ol.getSize(),p=n.ol.getView().getResolution(),m=this.setMapResolution(n,s,o,p),f=new Dt,g;return n.ol.once("rendercomplete",y=>st(this,null,function*(){let _=y.target.getViewport().getElementsByTagName("canvas"),w=yield this.drawMap(m,_);this.mapPrintExtent=n.viewController.getExtent("EPSG:3857"),this.resetOriginalMapSize(n,h,p),yield this.drawMapControls(n,w);let A=n.status$.subscribe(k=>{if(clearTimeout(g),k!==Ho.Done)return;A.unsubscribe();let R=Ho.Done;try{w.width!==0&&this.addCanvas(e,w,l)}catch{R=Ho.Error,this.messageService.error("igo.geo.printForm.corsErrorMessageBody","igo.geo.printForm.corsErrorMessageHeader")}f.next(R)});g=window.setTimeout(()=>{A.unsubscribe();let k=Ho.Done;try{w.width!==0&&this.addCanvas(e,w,l)}catch{k=Ho.Error,this.messageService.error("igo.geo.printForm.corsErrorMessageBody","igo.geo.printForm.corsErrorMessageHeader")}this.resetOriginalMapSize(n,h,p),f.next(k)},200)})),f}setMapResolution(e,n,o,s){let l=e.ol.getSize(),h=Math.round(n[0]*o/25.4),p=Math.round(n[1]*o/25.4),m=[h,p];e.ol.setSize(m);let f=Math.min(h/l[0],p/l[1]);return e.ol.getView().setResolution(s/f),[h,p]}resetOriginalMapSize(e,n,o){e.ol.setSize(n),e.ol.getView().setResolution(o),e.ol.updateSize(),e.ol.renderSync()}drawMap(e,n){return st(this,null,function*(){let o=document.createElement("canvas");o.width=e[0],o.height=e[1];for(let s=0;s<n.length;s++){let l=n[s];l.width>0&&this.handleCanvas(l,o)}return o})}handleCanvas(e,n){let o=n.getContext("2d"),s=e.parentElement.style.opacity||e.style.opacity;o.globalAlpha=s===""?1:Number(s);let l=e.style.transform,h;l?h=l.match(/^matrix\(([^\(]*)\)$/)[1].split(",").map(Number):h=[parseFloat(e.style.width)/e.width,0,0,parseFloat(e.style.height)/e.height,0,0],CanvasRenderingContext2D.prototype.setTransform.apply(o,h);let p=e.parentElement.style.backgroundColor;p&&(o.fillStyle=p,o.fillRect(0,0,e.width,e.height)),o.drawImage(e,0,0),o.globalAlpha=1,o.setTransform(1,0,0,1,0,0)}drawMapControls(e,n){return st(this,null,function*(){let o=n.getContext("2d"),s=e.ol.getOverlayContainerStopEvent().cloneNode(!0);s.style.width=n.width+"px",s.style.height=n.height+"px",s.style.zIndex="-1",document.getElementsByClassName("ol-viewport")[0].appendChild(s);let l=yield(0,ub.default)(s,{scale:1,backgroundColor:null,allowTaint:!0,useCORS:!0,ignoreElements:h=>h instanceof HTMLElement?h.className.includes("ol-attribution"):!1});l.width!==0&&l.height!==0&&o.drawImage(l,0,0),s.remove()})}addNorthArrowInDoc(e,n,o,s,l,h=0){return st(this,null,function*(){let p=0,m=0;e instanceof CanvasRenderingContext2D?(m=50,p=s==="topright"?0:l-m,e.drawImage(n,p,h,m,m)):(m=16,p=s==="topright"?10:l-o[1],h=o[0],e.addImage(n.toDataURL(),p,h,m,m))})}createNorthDirectionArrow(e){return st(this,null,function*(){let n=this.document.createElement("div");n.style.maxWidth="50mm",n.style.maxHeight="50mm",n.style.textAlign="center";let o=this.document.createElement("img");o.src="./assets/igo2/geo/images/north-direction.png",o.style.maxWidth="50mm",o.style.maxHeight="50mm",o.style.transform="rotate("+e+"rad)",o.style.padding="5mm",n.appendChild(o),this.document.body.appendChild(n);let s=yield(0,ub.default)(n,{backgroundColor:null});if(this.removeHtmlElement(n),s)return s})}downloadMapImage(e,n,o="png",s=!1,l=!1,h="",p="",m="",f=!0,g,y){let _=new Dt;this.activityId=this.activityService.register();let w=this.languageService.translate;o=o.toLowerCase();let A=+n,k=e.ol.getSize(),R=e.ol.getView().getResolution();return e.ol.once("rendercomplete",$=>st(this,null,function*(){let H=e.ol.getSize(),oe=$.target.getViewport().getElementsByTagName("canvas"),se=yield this.drawMap(H,oe);this.resetOriginalMapSize(e,k,R),yield this.drawMapControls(e,se),g!=="none"&&(["topleft","topright","bottomleft","bottomright"].indexOf(g)>-1?yield this.addLegendToImage(se,e,A,g,o):g==="newpage"&&(yield this.getLayersLegendImage(e,o,f)));let ge=document.createElement("canvas"),ue=ge.getContext("2d"),pe=0,Ce=se.width,_e=se.height;ue.font="20px Calibri";let de=ue.measureText(m).width;_e=h!==""?_e+30:_e,_e=p!==""?_e+30:_e,_e=s!==!1||l!==!1?_e+30:_e;let te=_e-10,Se=Math.ceil(de/Ce);_e=m!==""?_e+Se*30:_e;let Te=_e-Se*20+5;if(ge.width=Ce,ge.height=_e,["bmp","gif","jpeg","png","tiff"].indexOf(o)>-1&&(o==="jpeg"||h!==""||p!==""||m!==""||s!==!1||l!==!1)&&(ue.fillStyle="#ffffff",ue.fillRect(0,0,Ce,_e),ue.fillStyle="#000000"),h!==""&&(ue.font="26px Calibri",pe=30,ue.textAlign="center",ue.fillText(h,Ce/2,20,Ce*.9)),p!==""&&(ue.font="26px Calibri",pe=60,ue.textAlign="center",ue.fillText(p,Ce/2,50,Ce*.9)),ue.font="20px Calibri",s!==!1||l!==!1){let Me="";if(s!==!1&&(Me=w.instant("igo.geo.printForm.projection")+": "+e.projection+"         "),l!==!1){let ze=w.instant("igo.geo.printForm.scale"),Ve=e.viewController.getScale(A);Me+=ze+": ~ 1 / "+yne(Ve)}ue.textAlign="center",ue.fillText(Me,Ce/2,te,Ce*.9)}if(m!=="")if(ue.textAlign="center",Se===1)ue.fillText(m,Ce/2,Te);else{let Me=m.length,ze=Math.floor(Me/Se),Ve="",$e=0,nt;for(let be=0;be<Se;be++)Se-1>be?(Ve=m.substr($e,ze),nt=Ve.lastIndexOf(" "),ue.fillText(Ve.substr(0,nt),Ce/2,Te),$e+=nt,Te+=20):ue.fillText(m.substr($e),Ce/2,Te)}if(ue.drawImage(se,0,pe),y){let Me=yield this.createNorthDirectionArrow(e.viewController.getRotation());yield this.addNorthArrowInDoc(ue,Me,null,g,Ce,pe)}let De=Ho.Done,Le="map."+o;o.toLowerCase()==="tiff"&&(Le="map"+e.projection.replace(":","_")+"."+o);try{f?o.toLowerCase()==="tiff"?this.generateCanvaFileToZip(ge,Le):this.generateCanvaFileToZip(ge,Le):this.saveCanvasImageAsFile(ge,Le,o)}catch{De=Ho.Error}if(_.next(De),o.toLowerCase()==="tiff"){let Me=Le.substring(0,Le.toLowerCase().indexOf(".tiff"))+".tfw",ze=this.getWorldFileInformation(e),Ve=new Blob([ze],{type:"text/plain;charset=utf-8"});f?this.addFileToZip(Me,Ve):((0,D$.saveAs)(Ve,Me),this.saveFileProcessing())}})),this.setMapImageResolution(e,k,A,R),_}setMapImageResolution(e,n,o,s){let l=o/96,h=[Math.round(n[0]*l),Math.round(n[1]*l)];e.ol.setSize(h);let p=Math.min(h[0]/n[0],h[1]/n[1]);e.ol.getView().setResolution(s/p),e.ol.renderSync()}addLegendToImage(e,n,o,s,l){return st(this,null,function*(){let h="map."+l,p=e.getContext("2d"),m=yield this.getLayersLegendHtml(n,e.width).toPromise();if(m==="")return yield this.saveCanvasImageAsFile(e,h,l),!0;let f=window.document.createElement("div");f.style.position="absolute",f.style.top="0",f.style.zIndex="-1",window.document.body.appendChild(f),f.innerHTML=m,yield this.timeout(1);let g=yield(0,ub.default)(f,{useCORS:!0}).catch(y=>{console.log(y)});if(g){let y=e.height,_=e.width,w=g.height,A=g.width,k=y*.01,R,$;return s==="bottomright"?(R=_-A-k,$=y-w-k):s==="topright"?(R=_-A-k,$=k):s==="bottomleft"?(R=k,$=y-w-k-15):s==="topleft"&&(R=k,$=k),p.drawImage(g,R,$,A,w),p.strokeRect(R,$,A,w),this.removeHtmlElement(f),!0}})}saveDoc(e){return st(this,null,function*(){yield e.save("map_georef.pdf",{returnPromise:!0})})}getImageSizeToFitPdf(e,n,o){let s=e.internal.pageSize.getHeight()-(o[0]+o[2]),l=e.internal.pageSize.getWidth()-(o[1]+o[3]),h=this.pdf_units2points(n.height,"mm"),p=this.pdf_units2points(n.width,"mm"),m=h/s,f=p/l,g=m>f?m:f,y=g>1?h/g:h;return[g>1?p/g:p,y]}getWorldFileInformation(e){let n=e.viewController.getResolution(),o=e.viewController.getExtent();return[n,0,0,-n,o[0]+n/.5,o[3]-n/.5].join(`
`)}saveCanvasImageAsFile(e,n,o){let s="image/"+o;try{e.toDataURL(),e.toBlob(l=>{(0,D$.saveAs)(l,n),this.saveFileProcessing()},s)}catch{this.messageService.error("igo.geo.printForm.corsErrorMessageBody","igo.geo.printForm.corsErrorMessageHeader")}}generateCanvaFileToZip(e,n){let o="image/jpeg";(!this.hasOwnProperty("zipFile")||typeof this.zipFile>"u")&&(this.zipFile=new Yne.default);try{e.toDataURL(),navigator.msSaveBlob?this.addFileToZip(n,e.msToBlob()):e.toBlob(s=>{this.addFileToZip(n,s)},o)}catch{this.messageService.error("igo.geo.printForm.corsErrorMessageBody","igo.geo.printForm.corsErrorMessageHeader")}}addFileToZip(e,n){this.zipFile.file(e,n),this.nbFileToProcess--,this.nbFileToProcess===0&&(this.getZipFile(),this.activityService.unregister(this.activityId))}saveFileProcessing(){this.nbFileToProcess--,this.nbFileToProcess===0&&this.activityService.unregister(this.activityId)}getZipFile(){this.zipFile.generateAsync({type:"blob"}).then(e=>{(0,D$.saveAs)(e,"map.zip"),delete this.zipFile})}pdf_units2points(e,n){let o=1;switch(n){case"pt":o=1;break;case"mm":o=72/25.4;break;case"cm":o=72/2.54;break;case"in":o=72;break;case"px":o=96/72;break;case"pc":o=12;break;case"em":o=12;break;case"ex":o=6;break;default:throw new Error("Invalid unit: "+n)}return e*o}static \u0275fac=function(n){return new(n||r)(xe(dr),xe(nl),xe(mS),xe(wn),xe(Ri),xe(Ui))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),$F=class{},L2=class{sources;constructor(i){this.sources=i}};function tpt(r){return new L2(r)}function ipt(){return{provide:L2,useFactory:tpt,deps:[$F]}}function wI(r){return({wms:npt,wmts:rpt,xyz:opt,feature:spt,wfs:apt,arcgisrest:pne,imagearcgisrest:pne,tilearcgisrest:pne,osm:n=>"OSM",tiledebug:n=>"tiledebug"}[r.type]||Zne)(r)}function npt(r){let i=r.params.LAYERS,n="wms"+rC(r.url)+i;return Hl.hashStr(n)}function rpt(r){let i=r.layer,n="wmts"+rC(r.url)+i;return Hl.hashStr(n)}function opt(r){let e="xyz"+rC(r.url);return Hl.hashStr(e)}function spt(r){if(!r.url)return Zne();let e="feature"+rC(r.url);return Hl.hashStr(e)}function apt(r){if(!r.url||!r.params)return Zne();let e="wfs"+rC(r.url)+r.params.featureTypes;return Hl.hashStr(e)}function pne(r){let i=r.layer,e=rC(r.url),n=(r.type||"arcgis")+e+i;return Hl.hashStr(n)}function Zne(){return Gs()}function rC(r){let e=(r.charAt(0)==="/"?window.location.origin+r:r).split(/[?&]/),n=e.shift(),o=e.filter(s=>s.length!==0&&s.charAt(0)!=="_");return o.length&&(n+="?"+o.join("&")),n}var Qp=class{options;dataService;id;ol;legend;get saveableOptions(){return{id:this.options.id,type:this.options.type,url:this.options.url}}constructor(i={},e){this.options=i,this.dataService=e,this.options=i,this.id=this.options.id||this.generateId(),this.ol=this.createOlSource()}generateId(){return wI(this.options)}getLegend(i,e){return this.legend?this.legend:[]}setLegend(i){return i.url?this.legend=[{url:i.url}]:i.html?this.legend=[{html:i.html}]:this.legend=[],this.legend}},As=class extends Qp{get saveableOptions(){let i=super.saveableOptions;return li(Xe({},i),{params:this.options.params})}createOlSource(){let i={format:this.getSourceFormatFromOptions(this.options)};return new tp(Object.assign(i,this.options))}getSourceFormatFromOptions(i){if(i.format)return i.format;let e,n=i.formatType;if(!n)e=hs;else if(e=mR[n],e===void 0)throw new Error("Invalid vector source format ${formatType}.");let o=i.formatOptions,s;return o?s=new e(o):s=new e,s}onUnwatch(){}get queryTitle(){return this.options.queryTitle?this.options.queryTitle:"title"}},vne=class{},F$=class extends Qp{createOlSource(){return this.options.url||(this.options.url="https://tile.openstreetmap.org/{z}/{x}/{y}.png"),new vwe(this.options)}onUnwatch(){}},L$=class extends Qp{createOlSource(){return new L1(this.options)}onUnwatch(){}},Vf=function(r){return r.BasicNumericOperator="basicnumericoperator",r.Basic="basic",r.BasicAndSpatial="basicandspatial",r.Spatial="spatial",r.All="all",r.Time="time",r}(Vf||{}),tn=function(r){return r.BBOX="BBox",r.PropertyIsBetween="PropertyIsBetween",r.Contains="Contains",r.During="During",r.PropertyIsEqualTo="PropertyIsEqualTo",r.PropertyIsGreaterThan="PropertyIsGreaterThan",r.PropertyIsGreaterThanOrEqualTo="PropertyIsGreaterThanOrEqualTo",r.Intersects="Intersects",r.PropertyIsNull="PropertyIsNull",r.PropertyIsLessThan="PropertyIsLessThan",r.PropertyIsLessThanOrEqualTo="PropertyIsLessThanOrEqualTo",r.PropertyIsLike="PropertyIsLike",r.PropertyIsNotEqualTo="PropertyIsNotEqualTo",r.Within="Within",r.And="And",r.Or="Or",r.Not="Not",r}(tn||{}),Nm=class{filterSequence=[];operators={[tn.PropertyIsEqualTo]:{spatial:!1,fieldRestrict:[]},[tn.PropertyIsNotEqualTo]:{spatial:!1,fieldRestrict:[]},[tn.PropertyIsLike]:{spatial:!1,fieldRestrict:["string"]},[tn.PropertyIsGreaterThan]:{spatial:!1,fieldRestrict:["number"]},[tn.PropertyIsGreaterThanOrEqualTo]:{spatial:!1,fieldRestrict:["number"]},[tn.PropertyIsLessThan]:{spatial:!1,fieldRestrict:["number"]},[tn.PropertyIsLessThanOrEqualTo]:{spatial:!1,fieldRestrict:["number"]},[tn.PropertyIsBetween]:{spatial:!1,fieldRestrict:["number"]},[tn.During]:{spatial:!1,fieldRestrict:[]},[tn.PropertyIsNull]:{spatial:!1,fieldRestrict:[]},[tn.Intersects]:{spatial:!0,fieldRestrict:[]},[tn.Within]:{spatial:!0,fieldRestrict:[]},[tn.Contains]:{spatial:!0,fieldRestrict:[]}};defineOgcFiltersDefaultOptions(i,e,n){let o=!0;return n&&n==="wms"&&(o=!1),i=i||{},i.enabled=i.enabled===void 0?o:i.enabled,i.editable=i.editable===void 0?o:i.editable,i.geometryName=e,i.advancedOgcFilters=!0,i.enabled&&(i.pushButtons||i.checkboxes||i.radioButtons||i.select||i.autocomplete)&&(i.advancedOgcFilters=!1),i}buildFilter(i,e,n,o,s){let l,h;/intersects|contains|within/gi.test(JSON.stringify(i))?h=!1:h=!0,i&&(o=i.geometryName!==void 0?i.geometryName:o),e&&i&&(l=hR(o,e,n.getCode()));let p;if(i)i=this.checkIgoFiltersProperties(i,o,n),e&&h?p=uR(l,this.bundleFilter(i,s)):p=this.bundleFilter(i,s);else return e&&n?"bbox="+e.join(",")+","+n.getCode():void 0;let m={srsName:"",featureNS:"",featurePrefix:"",featureTypes:["featureTypes"],filter:p,outputFormat:"",geometryName:o},f=new U_().writeGetFeature(m),g=new XMLSerializer().serializeToString(f),y=/typenames *=|typename *=\"featureTypes\" *>/gi,_=/<\/Query><\/GetFeature>/gi;return"filter="+g.split(y)[1].split(_)[0]}bundleFilter(i,e){if(i instanceof Array){let n=[];return i.forEach(o=>{n.push(this.bundleFilter(o,e))}),n}else{if(i.hasOwnProperty("logical"))return this.createFilter({operator:i.logical,logicalArray:this.bundleFilter(i.filters,e)},e);if(i.hasOwnProperty("operator"))return this.createFilter(i,e)}}createFilter(i,e){let n=i.operator,o=i.logicalArray,s=i.propertyName,l=i.pattern,h=i.matchCase?i.matchCase:!0,p=i.wildCard?i.wildCard:"*",m=i.singleChar?i.singleChar:".",f=i.escapeChar?i.escapeChar:"!",g=i.lowerBoundary,y=i.upperBoundary,_=i.geometryName,w=i.extent,A=i.wkt_geometry,k=i.srsName?i.srsName:"EPSG:3857",R=this.parseFilterOptionDate(i.begin,e?e.minDate:void 0),$=this.parseFilterOptionDate(i.end,e?e.maxDate:void 0),H=i.expression,oe;switch(A&&(oe=new z_().readGeometry(A,{dataProjection:k,featureProjection:k||"EPSG:3857"})),n.toLowerCase()){case tn.BBOX.toLowerCase():return hR(_,w,k);case tn.PropertyIsBetween.toLowerCase():return pbe(s,g||1e40*-1,y||1e40);case tn.Contains.toLowerCase():return nbe(_,oe,k);case tn.During.toLowerCase():return fbe(s,R,$);case tn.PropertyIsEqualTo.toLowerCase():return sbe(s,H,h);case tn.PropertyIsGreaterThan.toLowerCase():return dbe(s,H);case tn.PropertyIsGreaterThanOrEqualTo.toLowerCase():return ube(s,H);case tn.Intersects.toLowerCase():return rbe(_,oe,k);case tn.PropertyIsNull.toLowerCase():return hbe(s);case tn.PropertyIsLessThan.toLowerCase():return lbe(s,H);case tn.PropertyIsLessThanOrEqualTo.toLowerCase():return cbe(s,H);case tn.PropertyIsLike.toLowerCase():return mbe(s,l?l.replace(/[()_]/gi,m):p,p,m,f,h);case tn.PropertyIsNotEqualTo.toLowerCase():return abe(s,H,h);case tn.Within.toLowerCase():return obe(_,oe,k);case tn.And.toLowerCase():return uR.apply(null,o);case tn.Or.toLowerCase():return tbe.apply(null,o);case tn.Not.toLowerCase():return ibe.apply(null,o);default:return}}defineInterfaceFilterSequence(i,e,n="",o=-1){return i instanceof Array?i.forEach(s=>{this.filterSequence.concat(this.defineInterfaceFilterSequence(s,e,n,o))}):i.hasOwnProperty("logical")?(o=o+1,this.filterSequence.concat(this.defineInterfaceFilterSequence(i.filters,e,i.logical,o))):i.hasOwnProperty("operator")&&this.filterSequence.push(this.addInterfaceFilter(i,e,o,n)),this.filterSequence}computeAllowedOperators(i,e,n){let o={},s,l,h;if(i&&e){let p=i.find(m=>m.name===e);s=p&&p.allowedOperatorsType?p.allowedOperatorsType:n}switch(i&&i.map(p=>{if(!p.allowedOperatorsType)return;let m=p.allowedOperatorsType.toLowerCase();(m===Vf.All.toLowerCase()||m===Vf.Spatial.toLowerCase()||m===Vf.BasicAndSpatial.toLowerCase())&&(l=!0,m===Vf.All.toLowerCase()&&(h=!0))}),s=s||Vf.BasicAndSpatial,s.toLowerCase()){case Vf.All:o=this.operators;break;case Vf.Spatial:o={[tn.Intersects]:{spatial:!0,fieldRestrict:[]},[tn.Within]:{spatial:!0,fieldRestrict:[]}};break;case Vf.BasicAndSpatial:o={[tn.PropertyIsEqualTo]:{spatial:!1,fieldRestrict:[]},[tn.PropertyIsNotEqualTo]:{spatial:!1,fieldRestrict:[]},[tn.Intersects]:{spatial:!0,fieldRestrict:[]},[tn.Within]:{spatial:!0,fieldRestrict:[]}};break;case Vf.Basic:o={[tn.PropertyIsEqualTo]:{spatial:!1,fieldRestrict:[]},[tn.PropertyIsNotEqualTo]:{spatial:!1,fieldRestrict:[]}};break;case Vf.Time:o={[tn.During]:{spatial:!1,fieldRestrict:[]}};break;case Vf.BasicNumericOperator:o={[tn.PropertyIsEqualTo]:{spatial:!1,fieldRestrict:[]},[tn.PropertyIsNotEqualTo]:{spatial:!1,fieldRestrict:[]},[tn.PropertyIsGreaterThan]:{spatial:!1,fieldRestrict:["number"]},[tn.PropertyIsGreaterThanOrEqualTo]:{spatial:!1,fieldRestrict:["number"]},[tn.PropertyIsLessThan]:{spatial:!1,fieldRestrict:["number"]},[tn.PropertyIsLessThanOrEqualTo]:{spatial:!1,fieldRestrict:["number"]}};break;default:o={[tn.PropertyIsEqualTo]:{spatial:!1,fieldRestrict:[]},[tn.PropertyIsNotEqualTo]:{spatial:!1,fieldRestrict:[]},[tn.Intersects]:{spatial:!0,fieldRestrict:[]},[tn.Within]:{spatial:!0,fieldRestrict:[]}}}return l&&(o.Intersects={spatial:!0,fieldRestrict:[]},o.Within={spatial:!0,fieldRestrict:[]},h&&(o.Contains={spatial:!0,fieldRestrict:[]})),o}addInterfaceFilter(i,e,n=0,o="Or"){i||(i={operator:"PropertyIsEqualTo"});let s={propertyName:"",operator:"",active:"",filterid:Gs(),step:"",begin:"",end:"",sliderOptions:{},lowerBoundary:"",upperBoundary:"",expression:"",pattern:"",wildCard:"*",singleChar:".",escapeChar:"!",matchCase:!0,igoSpatialSelector:"",igoSNRC:"",geometryName:"",geometry:"",wkt_geometry:"",extent:"",srsName:"",parentLogical:"",level:0};return Object.assign(s,{parentLogical:o,level:n,geometryName:e},i)}checkIgoFiltersProperties(i,e,n,o=!1){let s=[];if(i instanceof Array)return i.forEach(l=>{s.push(this.checkIgoFiltersProperties(l,e,n,o))}),s;if(i.hasOwnProperty("logical"))return Object.assign({},{logical:i.logical,filters:this.checkIgoFiltersProperties(i.filters,e,n,o)});if(i.hasOwnProperty("operator"))return this.addFilterProperties(i,e,n,o)}addFilterProperties(i,e,n,o=!1){let s=i.hasOwnProperty("filterid")?i.filterid:Gs(),l=i.hasOwnProperty("active")?i.active:o,h=i.hasOwnProperty("srsName")?i.srsName:n?n.getCode():"EPSG:3857";return Object.assign({},{filterid:s,active:l,igoSpatialSelector:"fixedExtent",srsName:h},i,{geometryName:e})}rebuiltIgoOgcFilterObjectFromSequence(i){if(i instanceof Array)if(i.length>=1){let e=i[0].parentLogical,n,o=[],s;return i.forEach(l=>{let h=Object.assign({},l),p=i.indexOf(l);p>=0&&p<i.length-1?n=i[p+1]:n=h,delete h.active,delete h.filterid,delete h.parentLogical,o.push(h),i.length===1?s=h:e!==n.parentLogical&&(o.length===1?console.log("You must set at least two operator in a logical ("+e+")"):(s=Object.assign({},{logical:e,filters:o}),o=[s],e=n.parentLogical))}),s}else return;else return}computeIgoSelector(i){if(i.groups.every(n=>n.computedSelectors!==void 0))return i;let e;if(i.groups&&i.bundles){if(!i.bundles.every(n=>n.id!==void 0))throw new Error("You must set an id for each of your bundles");e=Ln.copyDeep(i),e.groups.forEach(n=>{n.title=n.title?n.title:n.name,n.enabled=n.enabled?n.enabled:!1,n.computedSelectors=Ln.copyDeep(e.bundles.filter(o=>n.ids.includes(o.id)))})}else!i.groups&&i.bundles?(e=Ln.copyDeep(i),e.groups=[{title:"group1",name:"group1",computedSelectors:Ln.copyDeep(e.bundles)}]):e={bundles:i,groups:[{title:"group1",name:"group1",computedSelectors:Ln.copyDeep(i)}],selectorType:e.selectorType};return e.groups.find(n=>n.enabled)||(e.groups[0].enabled=!0),e}handleOgcFiltersAppliedValue(i,e,n,o){let s=i.ogcFilters;if(!s)return;let l=[],h="",p="";if(s.enabled&&(s.pushButtons||s.checkboxes||s.radioButtons||s.select||s.autocomplete)){let f;if(s.pushButtons){f=s.pushButtons;let g=this.formatGroupAndFilter(s,f);for(let y of g)l.push(y)}if(s.checkboxes){f=s.checkboxes;let g=this.formatGroupAndFilter(s,f);for(let y of g)l.push(y)}if(s.radioButtons){f=s.radioButtons;let g=this.verifyMultipleEnableds(f),y=this.formatGroupAndFilter(s,g);for(let _ of y)l.push(_)}if(s.select){f=s.select;let g=this.verifyMultipleEnableds(f),y=this.formatGroupAndFilter(s,g);for(let _ of y)l.push(_)}if(s.autocomplete){f=s.autocomplete;let g=this.formatGroupAndFilter(s,f);for(let y of g)l.push(y)}s.filters&&"operator"in s.filters&&s.filters.operator.toLowerCase()===tn.During.toLowerCase()&&s.filters.active&&s.interfaceOgcFilters?.length>0&&l.push(s.interfaceOgcFilters[0]),l.length>=1&&(h=this.buildFilter(l.length===1?l[0]:{logical:"And",filters:l},n,o,s.geometryName))}if(s.enabled&&s.filters){s.geometryName=s.geometryName||e;let f=s.filters;p=this.buildFilter(f,n,o,s.geometryName,i)}let m=s.advancedOgcFilters?p:h;return i.type==="wms"&&(m=this.formatProcessedOgcFilter(m,i.params.LAYERS)),i.type==="wfs"&&(m=this.formatProcessedOgcFilter(m,i.params.featureTypes)),m}verifyMultipleEnableds(i){return i.bundles.forEach(e=>{if(!e.multiple&&e.selectors){let n=e.selectors.reduce((o,s,l)=>s.enabled===!0?o.concat(l):o,[]);n.length>1&&(n.splice(0,1),n.forEach(o=>{e.selectors[o].enabled=!1}))}}),i}formatGroupAndFilter(i,e){e=this.computeIgoSelector(e);let n=e.groups.find(s=>s.enabled).computedSelectors,o=[];return n.map(s=>{let l=[],h=s.selectors;h&&(h.filter(p=>p.enabled===!0).forEach(p=>l.push(p.filters)),l.length===1?o.push(l[0]):l.length>1&&o.push({logical:s.logical,filters:l}))}),e.selectorType==="pushButton"?i.pushButtons=e:e.selectorType==="checkbox"?i.checkboxes=e:e.selectorType==="radioButton"?i.radioButtons=e:e.selectorType==="select"?i.select=e:e.selectorType==="autocomplete"&&(i.autocomplete=e),o}formatProcessedOgcFilter(i,e){if(!i)return;let n="";return i.length===0&&e.indexOf(",")===-1?n=i:e.split(",").forEach(()=>{n=`${n}(${i.replace("filter=","")})`}),n=n.replace(/\(\)/g,""),n.length>0?n.replace("filter=",""):void 0}parseFilterOptionDate(i,e){return i?i.toLowerCase().includes("now")||i.toLowerCase().includes("today")?this.parseDateOperation(i):(0,nn.default)(i).isValid()?i:void 0:e}parseDateOperation(i){let e=i.toLowerCase().split(" "),n=e[0],o=["+","-"].includes(e[1])?e[1]:void 0,s=/^[0-9]*$/.test(e[2])?e[2]:void 0,l=["years","months","weeks","days","hours","seconds"].includes(e[3])?e[3]:void 0;return!o||!l||!s?n==="now"?(0,nn.default)().format():(0,nn.default)().endOf("day").format():o==="+"?n==="now"?(0,nn.default)().add(parseInt(s,10),l).format():(0,nn.default)().endOf("day").add(parseInt(s,10),l).format():n==="now"?(0,nn.default)().subtract(parseInt(s,10),l).format():(0,nn.default)().endOf("day").subtract(parseInt(s,10),l).format()}},LAe="EPSG:3857",fI=5e3,NAe="2.0.0",Qne="geometry",BAe=new RegExp(/(.*)?gml(.*)?/gi),uki=new RegExp(/(.*)?json(.*)?/gi);function jAe(r,i,e,n,o){let s=r.paramsWFS,l=Xne(r,void 0,r.paramsWFS.srsName),h;n?.enabled&&(h=n?.filters);let p=new Nm,m=p.buildFilter(h,i,e,n?.geometryName,r),f=p.handleOgcFiltersAppliedValue(r,n?.geometryName,i,e),g="filter";i&&!f&&(g="bbox",f=i.join(",")+","+e.getCode()),(n?.advancedOgcFilters||f)&&(s.xmlFilter=n?.advancedOgcFilters?m:`${g}=${f}`);let y=l.find(w=>w.name==="getfeature").value;return y=/(filter|bbox)=.*/gi.test(s.xmlFilter)?`${y}&${s.xmlFilter}`:y,r.download=Object.assign({},r.download,{dynamicUrl:y}),o&&(y+=`$&_t${new Date().getTime()}`),y.replace(/&&/g,"&")}function Xne(r,i,e,n,o=0,s=!1){let l="2.0.0",h=r.urlWfs,p=r.paramsWFS,m=i||fI,f=p.version===l?`startIndex=${o}`:"",g=e||LAe,y=p.outputFormat?`outputFormat=${p.outputFormat}`:"",_=p.version?`version=${p.version}`:`version=${NAe}`,A=`${p.version===l?"typenames":"typename"}=${p.featureTypes}`,k=p.version===l?"count":"maxFeatures",R=i?`${k}=${m}`:p.maxFeatures?`${k}=${p.maxFeatures}`:`${k}=${m}`;s&&(y="",_="version=1.1.0",R=R.replace("count","maxFeatures"));let $=e?`srsname=${g}`:p.srsName?"srsname="+p.srsName:`srsname=${g}`,H="",oe="";n&&(H=`propertyName=${n}`,oe=`valueReference=${n}`);let se=r.sourceFields;if(!H&&se&&se.length>0){let _e=[];r.sourceFields.forEach(de=>{_e.push(de.name)}),H=`propertyName=${_e.join(",")},${p.fieldNameGeometry}`}let ge=h.indexOf("?")===-1?"?":"&",ue=`${h}${ge}service=WFS&request=GetCapabilities&${_}`,pe=`${h}${ge}service=WFS&request=GetFeature&${_}&${A}&`;pe+=`${y}&${$}&${R}&${H}&${f}`;let Ce=`${h}?service=WFS&request=GetPropertyValue&version=${l}&${A}&`;return Ce+=`&${R}&${oe}`,[{name:"outputformat",value:y},{name:"version",value:_},{name:"typename",value:A},{name:"count",value:R},{name:"srsname",value:$},{name:"propertyname",value:H},{name:"valuereference",value:oe},{name:"getcapabilities",value:ue.replace(/&&/g,"&")},{name:"getfeature",value:pe.replace(/&&/g,"&")},{name:"getpropertyvalue",value:Ce.replace(/&&/g,"&")}]}function VAe(r,i){i&&i==="wfs"&&(r.paramsWFS=r.params);let e=r.paramsWFS;r.urlWfs=r.urlWfs||r.url,e.version=e.version||NAe,e.fieldNameGeometry=e.fieldNameGeometry||Qne,e.maxFeatures=e.maxFeatures||fI;let n;return e.outputFormat&&(n=e.outputFormat),(BAe.test(n)||!n)&&(e.version="1.1.0"),Object.assign({},r)}function bne(r){let i=r,e,n=i.paramsWFS.outputFormat?i.paramsWFS.outputFormat:void 0;return n?mR[n]?(e=mR[n],new e(i.formatOptions)):n.toLowerCase().match("gml2")?(e=U_,new e(li(Xe({},i.formatOptions),{gmlFormat:Up}))):n.toLowerCase().match("gml32")?(e=U_,new e(li(Xe({},i.formatOptions),{gmlFormat:xM}))):n.toLowerCase().match("gml3")?(e=U_,new e(li(Xe({},i.formatOptions),{gmlFormat:Lr}))):n.toLowerCase().match("topojson")?(e=H6,new e(i.formatOptions)):n.toLowerCase().match("geojson")?(e=hs,new e(i.formatOptions)):n.toLowerCase().match("esrijson")?(e=Nv,new e(i.formatOptions)):n.toLowerCase().match("json")?(e=hs,new e(i.formatOptions)):n.toLowerCase().match("gpx")?(e=GS,new e(i.formatOptions)):n.toLowerCase().match("WKT")?(e=z_,new e(i.formatOptions)):n.toLowerCase().match("osmxml")?(e=wwe,new e(i.formatOptions)):n.toLowerCase().match("kml")?(e=qS,new e(i.formatOptions)):new e:(e=U_,new e(i.formatOptions))}var pb=class extends Qp{options;wfsService;authInterceptor;set ogcFilters(i){this.options.ogcFilters=i}get ogcFilters(){return this.options.ogcFilters}get saveableOptions(){let i=super.saveableOptions;return li(Xe({},i),{params:this.options.params})}constructor(i,e,n){super(VAe(i,"wfs")),this.options=i,this.wfsService=e,this.authInterceptor=n;let o=this.options.ogcFilters,s=this.options.paramsWFS.fieldNameGeometry||Qne,l=new Nm;this.options.ogcFilters=l.defineOgcFiltersDefaultOptions(o,s),this.options.ogcFilters.enabled&&this.options.ogcFilters.editable&&(i.sourceFields||[]).filter(h=>!h.values).length>0&&this.wfsService.getSourceFieldsFromWFS(this.options),o?.pushButtons&&(o.pushButtons.selectorType="pushButton"),o?.checkboxes&&(o.checkboxes.selectorType="checkbox"),o?.radioButtons&&(o.radioButtons.selectorType="radioButton"),o?.select&&(o.select.selectorType="select"),o?.autocomplete&&(o.autocomplete.selectorType="autocomplete"),this.setOgcFilters(this.options.ogcFilters,!0)}createOlSource(){return new tp({format:bne(this.options),strategy:TX})}setOgcFilters(i,e=!1){this.ogcFilters=i,e&&this.ol.notify("ogcFilters",this.ogcFilters)}onUnwatch(){}fetchFeatures({extent:i,projection:e,httpClient:n}){let o=this.options.paramsWFS,s=o.srsName?new Cf({code:o.srsName}):e,l=i?Su(i,e,s):void 0,h=this.ogcFilters;o.srsName=o.srsName||e.getCode();let p=jAe(this.options,l,s,h);if(!i&&p.includes("bbox")){let[f,g]=p.split("?"),_=g.split("&").filter(w=>!w.includes("bbox"));p=`${f}?${_.join("&")}`}let m=0;if(o.version==="2.0.0"&&o.maxFeatures>fI)for(;m<o.maxFeatures;){let g=p.replace("count="+o.maxFeatures,"count=1000");return g=g.replace("startIndex=0","0"),g+="&startIndex="+m,g.replace(/&&/g,"&"),this._fetchFeatures(s,g,{extent:l,projection:e,httpClient:n}).pipe($t(y=>(m+=1e3,y)))}else return this._fetchFeatures(s,p,{extent:l,projection:e,httpClient:n})}_fetchFeatures(i,e,{extent:n,projection:o,httpClient:s}){return s.get(e,{responseType:"text"}).pipe($t(l=>this._parseXmlFeatures(l,o,i)),Fn(l=>{throw n&&this.ol.removeLoadedExtent(n),l}))}_parseXmlFeatures(i,e,n){return this.ol.getFormat().readFeatures(i,{dataProjection:e,featureProjection:n})}},lpt=(()=>{class r extends vne{http;constructor(e){super(),this.http=e}getData(){return console.log("This is defining a data service."),"This is defining a data service."}getSourceFieldsFromWFS(e){!e.sourceFields||e.sourceFields.length===0?(e.sourceFields=[],this.defineFieldAndValuefromWFS(e).subscribe(n=>{e.sourceFields=n})):this.defineFieldAndValuefromWFS(e).subscribe(n=>{e.sourceFields.forEach(o=>{o.alias===void 0&&(o.alias=o.name),(o.values===void 0||o.values.length===0)&&(o.values=n.find(s=>s.name===o.name).values)})})}wfsGetFeature(e,n=fI,o=LAe,s,l=0,h=!1){let m=Xne(e,n,o,s,l,h).find(g=>g.name==="getfeature").value,f=e.paramsWFS.outputFormat;return h||BAe.test(f)||!f?this.http.get(m,{responseType:"text"}):this.http.get(m)}defineFieldAndValuefromWFS(e){return new si(n=>{let o=[],s,l,h,p,m=bne(e),f=JSON.parse(JSON.stringify(e));delete f.paramsWFS.outputFormat,delete f.formatOptions,p=bne(f);let g=e.sourceFields?.filter(y=>!y.values).map(y=>y.name);this.wfsGetFeature(e,1,void 0,void 0,0,!0).pipe(ul(y=>String(y).toLowerCase().includes("exception")?Vt(!1):Vt(!0)),ul(y=>this.wfsGetFeature(e,1).pipe(ul(_=>{let w=m.readFeatures(_);s=w[0].getKeys(),(e.sourceFields||e.sourceFields.length===0)&&(g=s),l=s.filter(R=>g.includes(R)&&R!==w[0].getGeometryName()&&!R.match(/boundedby/gi)),h=l.join(",");let A=[],k=0;if(!y&&e.paramsWFS.version==="2.0.0"&&e.paramsWFS.maxFeatures>fI){for(;k<e.paramsWFS.maxFeatures;)A.push(this.wfsGetFeature(e,1e3,e.paramsWFS.srsName,h,k)),k+=1e3;p=m}else A.push(this.wfsGetFeature(e,e.paramsWFS.maxFeatures||fI,e.paramsWFS.srsName,h,0,!0));return ts(A)})))).subscribe(y=>{let _=[];y.map(w=>{let A=p.readFeatures(w);_=_.concat(A)}),this.built_properties_value(_).forEach(w=>{o.push(w)}),n.next(o),n.complete()})})}built_properties_value(e){if(e.length===0)return[];let n=Object.assign({},e[0].getProperties());delete n[e[0].getGeometryName()],delete n.boundedBy;let o=[];for(let s in n)if(n.hasOwnProperty(s)){let l=typeof e[0].get(s)=="object"?void 0:typeof e[0].get(s);o.push({name:s,alias:s,type:l,values:[n[s]]})}return e.every(s=>{let l=s.getProperties();for(let h in l)l.hasOwnProperty(h)&&h in n&&o.filter(p=>p.name===h).forEach(p=>{p.values.indexOf(l[h])===-1&&p.values.push(l[h])});return!0}),o}static \u0275fac=function(n){return new(n||r)(xe(dr))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Od=function(r){return r.GML2="gml2",r.GML3="gml3",r.JSON="json",r.GEOJSON="geojson",r.GEOJSON2="geojson2",r.ESRIJSON="esrijson",r.TEXT="text",r.HTML="html",r.HTMLGML2="htmlgml2",r}(Od||{}),ry=function(r){return r.GML2="application/vnd.ogc.gml",r.GML3="application/vnd.ogc.gml/3.1.1",r.JSON="application/json",r.GEOJSON="application/geojson",r.GEOJSON2="geojson",r.ESRIJSON="application/json",r.TEXT="text/plain",r.HTML="text/html",r.HTMLGML2="text/html",r}(ry||{}),iC=function(r){return r.IFRAME="iframe",r.BLANK="_blank",r}(iC||{}),Bm=class extends Qp{options;wfsService;get params(){return this.options.params}get queryTitle(){return this.options.queryTitle?this.options.queryTitle:"title"}get mapLabel(){return this.options.mapLabel}get queryHtmlTarget(){return this.options.queryHtmlTarget?this.options.queryHtmlTarget:iC.BLANK}set ogcFilters(i){this.options.ogcFilters=i}get ogcFilters(){return this.options.ogcFilters}set timeFilter(i){this.options.timeFilter=i}get timeFilter(){return this.options.timeFilter}timeFilter$=new mt(void 0);get saveableOptions(){let i=super.saveableOptions;return li(Xe({},i),{params:this.params})}constructor(i,e){super(i),this.options=i,this.wfsService=e;let n=i.params,o=n.DPI||96;n.DPI=o,n.MAP_RESOLUTION=o,n.FORMAT_OPTIONS="dpi:"+o,i.refreshIntervalSec&&i.refreshIntervalSec>0&&setInterval(()=>{this.refresh()},i.refreshIntervalSec*1e3);let s=Qne;if(i.paramsWFS){let f=VAe(i,"wms");Ln.mergeDeep(i.paramsWFS,f.paramsWFS),s=i.paramsWFS.fieldNameGeometry||s,i.download=Object.assign({},i.download,{dynamicUrl:this.buildDynamicDownloadUrlFromParamsWFS(i)})}!i.sourceFields||i.sourceFields.length===0?i.sourceFields=[]:i.sourceFields.forEach(f=>{f.alias=f.alias?f.alias:f.name});let l=i.ogcFilters,h=new Nm;l?(l.advancedOgcFilters=!(l.pushButtons||l.checkboxes||l.radioButtons||l.select||l.autocomplete),l.advancedOgcFilters&&l.filters&&l.filters.calendarModeYear&&(l.advancedOgcFilters=!1),l.pushButtons&&(l.pushButtons.selectorType="pushButton"),l.checkboxes&&(l.checkboxes.selectorType="checkbox"),l.radioButtons&&(l.radioButtons.selectorType="radioButton"),l.select&&(l.select.selectorType="select"),l.autocomplete&&(l.autocomplete.selectorType="autocomplete")):i.ogcFilters=h.defineOgcFiltersDefaultOptions(l,s,"wms"),n.LAYERS.split(",").length>1&&l&&l.enabled&&(console.log("*******************************"),console.log("BE CAREFULL, YOUR WMS LAYERS ("+n.LAYERS+") MUST SHARE THE SAME FIELDS TO ALLOW ogcFilters TO WORK !! "),console.log("*******************************")),i.paramsWFS&&l&&l.enabled&&l.editable&&(i.sourceFields||[]).filter(f=>!f.values).length>0&&this.wfsService.getSourceFieldsFromWFS(i);let p=h.handleOgcFiltersAppliedValue(i,s);n.FILTER=p,this.ol.updateParams({FILTER:n.FILTER}),this.setOgcFilters(l,!0);let m=i;m?.timeFilterable&&m?.timeFilter&&this.setTimeFilter(m.timeFilter,!0)}refresh(){this.ol.updateParams({igoRefresh:Math.random()})}buildDynamicDownloadUrlFromParamsWFS(i){return Xne(i).find(o=>o.name==="getfeature").value}createOlSource(){return new Dwe(Object.assign({ratio:1},this.options))}setOgcFilters(i,e=!1){this.ogcFilters=i,e&&this.ol.notify("ogcFilters",this.ogcFilters)}setTimeFilter(i,e=!1){this.timeFilter=i,e&&(this.timeFilter$.next(this.timeFilter),this.ol.notify("timeFilter",this.ogcFilters))}getLegend(i,e){let n=super.getLegend();if(n.length>0&&i===void 0&&!e?.scale)return n;let o=!1,s;e?.size&&e?.extent&&e?.projection&&this.options.contentDependentLegend&&(s=this.params.VERSION==="1.3.0"||this.params.VERSION===void 0?"CRS":"SRS",o=!0);let l=this.params,h=[];l.LAYERS!==void 0&&(h=l.LAYERS.split(","));let p=this.options.url.replace(/\?$/,""),m=["REQUEST=GetLegendGraphic","SERVICE=WMS","FORMAT=image/png","SLD_VERSION=1.1.0",`VERSION=${l.VERSION||"1.3.0"}`];return i!==void 0&&m.push(`STYLE=${i}`),e?.scale!==void 0&&m.push(`SCALE=${e.scale}`),o&&(m.push(`WIDTH=${e.size[0]}`),m.push(`HEIGHT=${e.size[1]}`),m.push(`BBOX=${e.extent.join(",")}`),m.push(`${s}=${e.projection}`)),n=h.map(f=>{let g=p.match(/\?/)?"&":"?";return{url:`${p}${g}${m.join("&")}&LAYER=${f}`,title:h.length>1?f:void 0,currentStyle:i===void 0?void 0:i}}),n}onUnwatch(){}};function cpt(r){let e=(r?Vi(r):Vi("EPSG:3857")).getExtent(),n=or(e)/256,o=new Array(20),s=new Array(20);for(let l=0;l<20;++l)o[l]=n/Math.pow(2,l),s[l]=l;return new pwe({origin:Cu(e),resolutions:o,matrixIds:s})}var UF=class extends Qp{constructor(i){super(i)}createOlSource(){let i=Object.assign({tileGrid:cpt(this.options.projection)},this.options);return new kwe(i)}onUnwatch(){}},N2=class extends Qp{get params(){return this.options.params}get queryTitle(){return this.options.queryTitle?this.options.queryTitle:"title"}get mapLabel(){return this.options.mapLabel}get queryHtmlTarget(){return this.options.queryHtmlTarget?this.options.queryHtmlTarget:iC.BLANK}get saveableOptions(){let i=super.saveableOptions;return li(Xe({},i),{params:this.options.params})}createOlSource(){let i=this.options.crossOrigin?this.options.crossOrigin:"anonymous",e=Object.assign({crossOrigin:i},this.options);return new Pwe(e)}getLegend(){let i=super.getLegend();if(i.length>0)return i;let e="<table>";if(this.options.config.layers[0].legend)return this.options.config.layers[0].legend.items.forEach(n=>{n.visible===!0&&(e+='<tr><td><p><font size="5" color="'+n.value+'"> &#9679</font></p></td><td>'+n.name+"</td></tr>")}),e+="</table>",[{html:e}];{let n=this.options.config.layers[0].options,o=["polygon-fill:","marker-fill:","shield-fill:","building-fill:","line-color:"];for(let s of o)if(n.cartocss.includes(s)){let l=n.cartocss.split(s).pop(),h=l.substr(0,l.indexOf(";"));if(h.includes("ramp")){let p=h.split(", (")[1].split(","),m=h.split(", (")[2].split(",");for(let f=0;f<p.length;f++)p[f]=p[f].replace(/("|\))/g,""),m[f]=m[f].replace(/("|\))/g,""),m[f].replace(/\s+/g,"")==="="&&(m[f]="Autres"),e+='<tr><td><p><font size="5" color="'+p[f]+'"> &#9679</font></p></td><td>'+m[f]+"</td></tr>";break}else{let p=n.layer_name?n.layer_name:"";e+='<tr><td><p><font size="5" color="'+h+'"> &#9679</font></p></td><td>'+p+"</td></tr>";break}}return e+="</table>",[{html:e}]}}onUnwatch(){}},zF=class extends Qp{get saveableOptions(){let i=super.saveableOptions;return li(Xe({},i),{params:this.options.params,url:this.options.url})}createOlSource(){let i=new Nv;return new tp({attributions:this.options.params.attributions,overlaps:!1,format:i,url:function(e){let n=this.options.url+"/"+this.options.layer+"/query/",s=["f=json",`geometry=${encodeURIComponent('{"xmin":'+e[0]+',"ymin":'+e[1]+',"xmax":'+e[2]+',"ymax":'+e[3]+',"spatialReference":{"wkid":102100}}')}`,"geometryType=esriGeometryEnvelope","inSR=102100","spatialRel=esriSpatialRelIntersects","outFields=*","returnGeometry=true","outSR=102100"];if(this.options.params.time){let l=`time=${this.options.params.time}`;s.push(l)}return this.options.params.customParams&&this.options.params.customParams.forEach(l=>{s.push(l)}),`${n}?${s.join("&")}`}.bind(this),strategy:TX})}getLegend(){let i=this.options.legendInfo,e=super.getLegend();if(i===void 0||e.length>0)return e;if(!i)return;let n="<table>",o,s,l;if(i.legend)for(let h of i.legend)o=this.htmlImgSrc(h.contentType,h.imageData),s=h.label?h.label.replace("<Null>","Null"):"",n+=`<tr><td align='left'><img src="`+o+`" alt ='' /></td><td class="mat-typography">`+s+"</td></tr>";else if(i.type==="uniqueValue")for(let h of i.uniqueValueInfos)s=h.label.replace("<Null>","Null"),h.symbol.type==="esriPMS"?(o=this.htmlImgSrc(h.symbol.contentType,h.symbol.imageData),n+=`<tr><td align='left'><img src="`+o+`" alt ='' /></td><td class="mat-typography">`+s+"</td></tr>"):h.symbol.type!=="esriPMS"&&(l=this.createSVG(h.symbol),n+="<tr><td align='left'>"+l+'</td><td class="mat-typography">'+s+"</td></tr>");else i.type==="simple"&&(s=i.label?i.label.replace("<Null>","Null"):"",i.symbol.type==="esriPMS"?(o=this.htmlImgSrc(i.symbol.contentType,i.symbol.imageData),n+=`<tr><td align='left'><img src="`+o+`" alt ='' /></td><td class="mat-typography">`+s+"</td></tr>"):i.symbol.type!=="esriPMS"&&(l=this.createSVG(i.symbol),n+="<tr><td align='left'>"+l+'</td><td class="mat-typography">'+s+"</td></tr>"));return n+="</table>",[{html:n}]}htmlImgSrc(i,e){return`data:${i};base64,${e}`}createSVG(i){let e="",n=i.color?i.color:[0,0,0,0];if(i.type==="esriSLS"){let o=i.width?i.width:0,s="stroke:rgba("+n[0]+","+n[1]+","+n[2]+","+n[3]+")",l="stroke-width:"+o;i.style==="esriSLSSolid"?e='<svg height="30" width="30"><line x1="0" y1="15" x2="30" y2="15" style="'+s+";"+l+'"/></svg>':i.style==="esriSLSDash"&&(e='<svg height="30" width="30"><line x1="0" y1="15" x2="30" y2="15" style="'+s+";"+l+'" '+'stroke-dasharray="5,5"'+"/></svg>")}else if(i.style==="esriSMSCircle"||i.style==="esriSFSSolid"){let o=i.outline.color,s=i.outline.width,l=i.size,h="stroke:rgba("+o[0]+","+o[1]+","+o[2]+","+o[3]+")",p="stroke-width:"+s,m="fill:rgba("+n[0]+","+n[1]+","+n[2]+","+n[3]+")";i.style==="esriSMSCircle"?e='<svg height="30" width="30"><circle cx="15" cy="15" r="'+l/2+'" style="'+h+";"+p+";"+m+'"/></svg>':e='<svg height="30" width="30"><rect x="5" y="5" width="20" height="20" style ="'+h+";"+p+";"+m+'"/></svg>'}return e}onUnwatch(){}},GF=class extends Qp{get params(){return this.options.params}get queryTitle(){return this.options.queryTitle?this.options.queryTitle:"title"}get mapLabel(){return this.options.mapLabel}get queryHtmlTarget(){return this.options.queryHtmlTarget?this.options.queryHtmlTarget:iC.BLANK}get saveableOptions(){let i=super.saveableOptions;return li(Xe({},i),{params:this.options.params})}createOlSource(){let i=this.options.layer===void 0?this.options.params:Object.assign({LAYERS:`show:${this.options.layer}`},this.options.params);return typeof i.renderingRule=="object"&&(i.renderingRule=JSON.stringify(i.renderingRule)),new Fwe({ratio:1,params:i,url:this.options.url})}getLegend(){let i=this.options.legendInfo,e=super.getLegend();if(i===void 0||this.options.layer===void 0||e.length>0)return e;if(!i)return;let n="<table>";for(let o of i.legend){let s=`${this.options.url}/${i.layerId}/images/${o.url}`,l=o.label.replace("<Null>","Null");n+=`<tr><td align='left'><img src="`+s+`" alt ='' /></td><td class="mat-typography">`+l+"</td></tr>"}return n+="</table>",[{html:n}]}onUnwatch(){}},HF=class extends Qp{get params(){return this.options.params}get queryTitle(){return this.options.queryTitle?this.options.queryTitle:"title"}get mapLabel(){return this.options.mapLabel}get queryHtmlTarget(){return this.options.queryHtmlTarget?this.options.queryHtmlTarget:iC.BLANK}get saveableOptions(){let i=super.saveableOptions;return li(Xe({},i),{params:this.options.params})}createOlSource(){return new Lwe(this.options)}getLegend(){let i=this.options.legendInfo,e=super.getLegend();if(i===void 0||this.options.layer===void 0||e.length>0)return e;if(!i)return;let n="<table>";for(let o of i.legend){let s=`${this.options.url}/${i.layerId}/images/${o.url}`,l=o.label.replace("<Null>","Null");n+=`<tr><td align='left'><img src="`+s+`" alt ='' /></td><td class="mat-typography">`+l+"</td></tr>"}return n+="</table>",[{html:n}]}onUnwatch(){}},N$=class extends Qp{createOlSource(){let i=JSON.parse(JSON.stringify(this.options));return this.options.tileGrid&&(delete i.tileGrid,i.tileGrid=new zv(this.options.tileGrid)),new Nwe(i)}onUnwatch(){}},B$=class extends As{ws;createOlSource(){return this.createWebSocket(),this.options.format=this.getSourceFormatFromOptions(this.options),super.createOlSource()}createWebSocket(){this.ws=new WebSocket(this.options.url),this.ws.onmessage=this.onMessage.bind(this),this.options.onclose&&(this.ws.onclose=this.onClose.bind(this)),this.options.onerror&&(this.ws.onerror=this.onError.bind(this)),this.options.onopen&&(this.ws.onopen=this.onOpen.bind(this))}onMessage(i){let e=this.options.format.readFeature(i.data);switch(this.options.onmessage){case"update":{let n=this.ol.getFeatureById(e.getId());n&&this.ol.removeFeature(n),this.ol.addFeature(e);break}case"delete":this.ol.clear(!0),this.ol.addFeature(e);break;case"add":default:this.ol.addFeature(e)}}onClose(){}onError(){}onOpen(){}onUnwatch(){this.ws.close()}},j$=class extends Qp{get saveableOptions(){return super.saveableOptions}createOlSource(){let i;return this.options.featureClass==="feature"?i=new dR({featureClass:An}):i=new dR,this.options.format=i,new lJ(this.options)}generateId(){if(!this.options.url)return Gs();let i="mvt"+this.options.url;return Hl.hashStr(i)}onUnwatch(){}},jm=class extends As{get saveableOptions(){let i=super.saveableOptions;return li(Xe({},i),{params:this.options.params})}createOlSource(){return this.options.format=this.getSourceFormatFromOptions(this.options),this.options.source=super.createOlSource(),new wV(this.options)}generateId(){return Gs()}onUnwatch(){}},k2=function(r){return r.System="system",r.User="user",r}(k2||{});function dpt(r){let i=r.getStyle();return typeof i=="function"||i instanceof Array?void 0:{fill:{color:i.getFill().getColor()},stroke:{color:i.getStroke().getColor(),width:2},circle:{fill:{color:i.getImage().getFill().getColor()},stroke:{color:i.getImage().getStroke().getColor(),width:2},radius:5}}}var wne=class extends Cx{id;loaded=0;loading=0;layer;constructor(i){super(),this.layer=i,this.id=Gs()}watch(){let i=this.layer.options.source.ol;this.layer.dataSource instanceof jm&&(i=this.layer.options.source.options.source),i.getUrl()&&(i.on("featuresloadstart",()=>this.handleLoadStart()),i.on("featuresloadend",()=>this.handleLoadEnd()),i.on("featuresloaderror",()=>this.handleLoadEnd()))}unwatch(){let i=this.layer.options.source.ol;this.layer.dataSource instanceof jm&&(i=this.layer.options.source.options.source),i.getUrl()&&(i.un("featuresloadstart",()=>this.handleLoadStart()),i.un("featuresloadend",()=>this.handleLoadEnd()),i.un("featuresloaderror",()=>this.handleLoadEnd()))}handleLoadStart(){this.loading+=1,this.status=Ho.Working}handleLoadEnd(){this.loaded+=1;let i=this.loading;this.loaded>=i&&i===this.loading&&(this.status=Ho.Done,this.loaded=this.loading=0)}};function O$(r){return Ru(r)&&!!r.options.linkedLayers}function mne(r){return!!r.options.linkedLayers?.links}var V$=class r{options;collapsed;firstLoadComponent=!0;map;olLoadingProblem=!1;status$;dataSource;get isIgoInternalLayer(){return this.options.isIgoInternalLayer||!1}get id(){return String(this.options.id)}get parentId(){return this.options.parentId}get alias(){return this.options.alias}get title(){return this.options.title}set title(i){this.options.title=i}get zIndex(){return this.ol.getZIndex()}set zIndex(i){i!==this.zIndex&&this.ol.setZIndex(i)}get baseLayer(){return this.options.baseLayer}set baseLayer(i){this.options.baseLayer=i}get opacity(){return this.ol.get("opacity")}set opacity(i){this.ol.setOpacity(i)}set isInResolutionsRange(i){this.isInResolutionsRange$.next(i)}get isInResolutionsRange(){return this.isInResolutionsRange$.value}isInResolutionsRange$=new mt(!1);set maxResolution(i){this.ol.setMaxResolution(i===0?0:i||1/0)}get maxResolution(){return this.ol.getMaxResolution()}set minResolution(i){this.ol.setMinResolution(i||0)}get minResolution(){return this.ol.getMinResolution()}set visible(i){i!==this.visible&&(this.ol.setVisible(i),this._visible$.next(i))}get visible(){return this._visible$.value}_visible$=new mt(void 0);visible$=this._visible$.asObservable();get displayed(){return this._displayed$.value}set displayed(i){i!==this.displayed&&this._displayed$.next(i)}_displayed$=new mt(void 0);displayed$=this._displayed$.asObservable();displayed$$;get showInLayerList(){return this.options.showInLayerList!==!1}get saveableOptions(){return{title:this.options.title,zIndex:this.zIndex,visible:this.visible,security:this.options.security,opacity:this.opacity}}constructor(i){this.options=i,this.initDisplayed$$()}afterCreated(){this.options.zIndex!==void 0&&(this.zIndex=this.options.zIndex),this.options.baseLayer&&this.options.visible===void 0&&(this.options.visible=!1),this.maxResolution=this.options.maxResolution||Th(Number(this.options.maxScaleDenom)),this.minResolution=this.options.minResolution||Th(Number(this.options.minScaleDenom)),this.visible=this.options.visible===void 0?!0:this.options.visible,this.opacity=this.options.opacity===void 0?1:this.options.opacity}init(i){this.map=i}add(i){this._add(i)}_add(i){this.addParent(i),this.parent?this.parent.addChild(this):this.map.ol.addLayer(this.ol)}addParent(i){this.parent&&this.parent===i||(this.parent=i,!this.map&&this.parent&&(this.map=this.parent.map),this.initDisplayed$$())}remove(){this._remove()}_remove(){if(!this.map){console.error(`No map for ${this.title}`);return}this.parent?this.parent.removeChild(this):this.map.ol.removeLayer(this.ol)}reset(i){this._remove(),this._add(i)}moveTo(i){i==null&&this.parent==null||this.parent&&this.parent.id===i?.id||this.reset(i)}clone(){let i=Object.assign({},this);return Object.setPrototypeOf(i,r.prototype)}initDisplayed$$(){this.displayed$$?.unsubscribe();let i=[this.isInResolutionsRange$,this.visible$];this.parent&&i.push(this.parent.displayed$),this.displayed$$=ts(i).subscribe(([e,n,o=null])=>{let s=this.parent?o&&n:n;this.displayed=s&&e})}},Cne=class extends V${type="group";children};function upt(r,i,e){let n=i,o=n,s=!0;for(;s;)n=o,o=hpt(r,n,e),s=!!o;return s||ppt(n,e)||(n=void 0),s?o:n}function $Ae(r,i,e,n){return lAe(r,i,n).map(s=>{e.push(s),lAe(r,s,n)&&$Ae(r,s,e,n)}),e}function hpt(r,i,e){if(i?.options.linkedLayers?.linkId){let n=i.options.linkedLayers.linkId,o=r.filter(s=>{if(Ah(s))return!1;let l=s.options.linkedLayers;if(l&&l.links)return l.links.find(p=>p.linkedIds.includes(n)&&p.properties.includes(e))});return o.length>1&&console.warn(`Your layer ${i.title||i.id} must only have 1 parent (${o.map(s=>s.title||s.id)})
            , The first parent (${o[0].title||o[0].id}) will be use to sync properties`),o[0]}}function lAe(r,i,e){let n=[];i?.options.linkedLayers?.links&&i.options.linkedLayers.links.filter(s=>s.properties.includes(e)).map(s=>{n=n.concat(s.linkedIds)});let o=r.filter(s=>Ru(s));return n.map(s=>Jne(o,s))}function ppt(r,i){let e=!1,n=UAe(r);return n?.links&&(e=!!n.links.find(s=>s.properties.includes(i))),e}function UAe(r){return r.options.linkedLayers}function Jne(r,i){return r.find(e=>e.options.linkedLayers?.linkId===i)}function mpt(r,i){return i?.filter(e=>e.syncedDelete).reduce((e,n)=>{let o=fpt(n,r);return e.concat(o)},[])}function fpt(r,i){return r.linkedIds.reduce((e,n)=>{let o=Jne(i,n);return o&&e.push(o),e},[])}function gpt(r,i,e){if(!i)return;let n=new Nm,o=!0,s=!0,l=i.event.key,h;if(l==="ogcFilters"?(o=!1,s=!0,h=i.layer.dataSource.options.ogcFilters):l==="timeFilter"?(o=!1,s=!0,h=i.layer.dataSource.options.timeFilter):(o=!0,s=!1,h=i.layer.ol.get(l)),UAe(i.layer)){let m=upt(r,i.layer,l);m||(m=i.layer);let f=[m];$Ae(r,m,f,l);let g=!1,y=i.layer.options.source.options.type,_=i.layer.dataSource.options;f.map(w=>{if(i.layer&&w&&Xi(i.layer.ol)!==Xi(w?.ol)){let A=w.options.source.options.type;if(o)l==="visible"&&(h&&i.layer.showInLayerList&&i.layer.parent&&!i.layer.parent.displayed&&(h=i.layer.displayed),w.visible=h),w.ol.set(l,h,!0),(l==="minResolution"||l==="maxResolution")&&(g=!0);else if(s){if(l==="ogcFilters"){if(w.dataSource.setOgcFilters(h,!1),A==="wfs"&&w.ol.getSource().refresh(),A==="wms"){let k;y==="wfs"?k=n.handleOgcFiltersAppliedValue(_,i.layer.dataSource.options.fieldNameGeometry,void 0,e.getOlProjection()):y==="wms"&&(k=i.layer.dataSource.ol.getParams().FILTER),w.dataSource.ol.updateParams({FILTER:k})}}else if(w.dataSource instanceof Bm&&l==="timeFilter"){w.dataSource.setTimeFilter(h,!1);let k=i.layer.ol.getSource().getParams().TIME;w.dataSource.ol.updateParams({TIME:k})}}}}),g&&e.resolution$.next(e.resolution$.value)}}var ls=function(r){return r.OPACITY="opacity",r.VISIBLE="visible",r.DISPLAYED="displayed",r.OGCFILTERS="ogcFilters",r.MINRESOLUTION="minResolution",r.MAXRESOLUTION="maxResolution",r.ZINDEX="zIndex",r.TIMEFILTER="timeFilter",r}(ls||{}),$$=class extends Cx{propertyChange$=new mt(void 0);loaded=0;loading=0;layers=[];subscriptionsByLayerId=new Map;subscriptions=[];constructor(){super()}watch(){}unwatch(){this.layers.forEach(i=>this.unwatchLayer(i),this)}setPropertyChange(i){[ls.TIMEFILTER,ls.OGCFILTERS,ls.VISIBLE,ls.OPACITY,ls.MINRESOLUTION,ls.MAXRESOLUTION,ls.ZINDEX,ls.DISPLAYED].includes(i.event.key)&&this.propertyChange$.next(i)}watchLayer(i){if(i.status$===void 0||i.ol instanceof r0)return;this._watchLayer(i);let e=i.status$.pipe(cm()).subscribe(n=>{n===Ho.Error&&(this.loading=0,this.loaded=-1),n===Ho.Working?this.loading+=1:n===Ho.Done&&(this.loaded+=1),this.loaded>=this.loading?(this.loading=this.loaded=0,this.status=Ho.Done):this.loading>0&&(this.status=Ho.Working)});this.subscriptions.push(e)}_watchLayer(i){let e=i.displayed$.pipe($t(o=>({event:{key:"displayed",oldValue:!o,value:i.displayed},layer:i}))),n=vr(this.createOlEventObservable(i.ol,i),this.createOlEventObservable(i.dataSource.ol,i),e).subscribe(o=>this.setPropertyChange(o));this.layers.push(i),this.subscriptionsByLayerId.set(i.id,[n])}createOlEventObservable(i,e){return Ds(i,"propertychange").pipe($t(n=>({event:li(Xe({},n),{value:i.get(n.key)}),layer:e})))}unwatchLayer(i){i.ol instanceof r0||this._unwatchLayer(i)}_unwatchLayer(i){i.status$.next(Ho.Done),this.subscriptionsByLayerId.get(i.id)?.forEach(n=>{n.unsubscribe(),this.subscriptionsByLayerId.delete(i.id)});let e=this.layers.indexOf(i);if(e>=0){let n=i.watcher.status;[Ho.Working,Ho.Waiting].indexOf(n)!==-1&&(this.loaded+=1),this.subscriptions[e].unsubscribe(),this.subscriptions.splice(e,1),this.layers.splice(e,1),i.watcher.unwatch()}}},xne=class{layer;children=[];watcher=new $$;bidirectionnalChildren=[];childrenByProperty=new Map;disabledProperties=[];constructor(i){this.layer=i,this.init(),this.watcher.watchLayer(i),this.watcher.propertyChange$.subscribe(e=>{e&&this.handleChange(e)})}get options(){return this.layer.options}get links(){return this.layer.options.linkedLayers.links}get map(){return this.layer.map}init(){let i=this.findChildren(this.map.layerController.all,this.links);this.links.forEach(e=>{e.properties.forEach(n=>{let o=this.getByProperty(n);if(n===ls.ZINDEX){let s=[this.layer,...i];o=this.initZIndexLinkOptions(o,s)}this.childrenByProperty.set(n,o)})}),i.forEach(e=>this.add(e))}initZIndexLinkOptions(i,e){return i.initialOrder=VF(e,"desc"),i}destroy(){this.children.forEach(i=>{this.remove(i)}),this.unwatch()}add(i){this.children.includes(i)||this.children.push(i),this.getLayerLinks(i).forEach(e=>{if(e.bidirectionnal){if(this.bidirectionnalChildren.includes(i))return;this.bidirectionnalChildren.push(i),this.watcher.watchLayer(i)}e.properties.forEach(n=>{let o=this.getByProperty(n);if(!o.layers.includes(i)){if(n===ls.VISIBLE&&!i.showInLayerList){let s=this.getByProperty(ls.DISPLAYED);s.layers.push(i),this.childrenByProperty.set(ls.DISPLAYED,s)}if(n===ls.ZINDEX){let s=o;s.initialOrder.includes(i)||(s.initialOrder=VF([...s.initialOrder,i],"desc"))}o.layers.push(i),this.childrenByProperty.set(n,o),i[n]!==this.layer[n]&&this.handleChange({event:{key:n,oldValue:i[n],value:this.layer[n]},layer:this.layer})}})})}hasSyncDeletion(i){return this.getLayerLinks(i).some(e=>e.syncedDelete)}remove(i){i.linkMaster=void 0,this.removeArrayItem(i,this.children,"id"),this.getLayerLinks(i).forEach(e=>{e.bidirectionnal&&this.watcher.unwatchLayer(i),e.properties.forEach(n=>{let o=this.getByProperty(n);this.removeArrayItem(i,o.layers,"id"),this.childrenByProperty.set(n,o)})})}deleteChildren(i){mpt(this.children,this.links)?.forEach(n=>{this.remove(n),i.remove(n)})}move(i,e){if(this.propertyIsDisabled(ls.ZINDEX))return;let n=this.getByProperty(ls.ZINDEX);if(!n.layers.length)return;let o=this.getLinkedLayersOnZindex(i.id);this.disable(ls.ZINDEX);let s=n.initialOrder.findIndex(l=>l.id===i.id);o?.forEach(l=>{if(!l.showInLayerList){l.zIndex=i.zIndex,e!==l.parent&&l.reset(e);return}n.initialOrder.findIndex(p=>p.id===l.id)<s?this.map.layerController.moveAbove(i,l):this.map.layerController.moveBelow(i,l)}),this.enable(ls.ZINDEX)}disable(...i){i.forEach(e=>{this.disabledProperties.includes(e)||this.disabledProperties.push(e)}),this.bidirectionnalChildren.forEach(e=>{this.watcher.unwatchLayer(e)})}enable(...i){i.forEach(e=>{let n=this.disabledProperties.findIndex(o=>o===e);n>-1&&this.disabledProperties.splice(n,1)}),this.bidirectionnalChildren.forEach(e=>{this.watcher.watchLayer(e)})}getByProperty(i){return this.childrenByProperty.get(i)??{layers:[]}}propertyIsDisabled(i){return this.disabledProperties.includes(i)}getLayerLinks(i){let e=i.options.linkedLayers.linkId;return this.links.filter(n=>n.linkedIds.includes(e))}removeArrayItem(i,e,n="id"){let o=e.findIndex(s=>s[n]===i[n]);o!==-1&&e.splice(o,1)}getLinkedLayersOnZindex(i){return[...this.getByProperty(ls.ZINDEX).layers].concat(this.layer).filter(e=>e.id!==i)}unwatch(){this.watcher.unwatch()}handleChange=i=>{let e=i.layer.id===this.layer.id,n=i.event.key;if(this.propertyIsDisabled(n))return;let s=[...this.getByProperty(n).layers];if(!(!s?.length&&e)){if(e||(s=s.filter(l=>l.id!==i.layer.id),s.push(this.layer)),n===ls.DISPLAYED&&e)return this.handleDisplayChange(i,s);gpt(s,i,this.map.viewController)}};handleDisplayChange(i,e){let n=[ls.DISPLAYED,ls.VISIBLE];this.disable(...n),e.forEach(o=>{o.showInLayerList||(o.visible=!!i.event.value)}),this.enable(...n)}findChildren(i,e){let n=i.filter(o=>Ru(o));return e.reduce((o,s)=>{let l=s.linkedIds.map(h=>Jne(n,h)).filter(Boolean);return o.concat(l)},[])}},B2=class extends V${options;messageService;authInterceptor;parent;ol;hasBeenVisible$=new mt(void 0);legend;legendCollapsed=!0;link;linkMaster;resolution$$;get id(){return String(this.options.id||this.dataSource.id)}get visible(){return super.visible}set visible(i){super.visible=i,!this.hasBeenVisible$.value&&i&&this.hasBeenVisible$.next(i),this.options?.messages&&i&&this.options?.messages.filter(e=>e.options?.showOnEachLayerVisibility).map(e=>this.showMessage(e))}get maxResolution(){return super.maxResolution}set maxResolution(i){super.maxResolution=i,this.updateInResolutionsRange()}get minResolution(){return super.minResolution}set minResolution(i){super.minResolution=i,this.updateInResolutionsRange()}get saveableOptions(){if(Kht(this))return li(Xe({},super.saveableOptions),{sourceOptions:this.dataSource.saveableOptions})}constructor(i,e,n){super(i),this.options=i,this.messageService=e,this.authInterceptor=n,this.dataSource=i.source,this.legendCollapsed=i.legendOptions&&i.legendOptions.collapsed?i.legendOptions.collapsed:!0,i.legendOptions&&(i.legendOptions.url||i.legendOptions.html)&&(this.legend=this.dataSource.setLegend(i.legendOptions)),this.ol=this.createOlLayer(),this.ol.set("_layer",this,!0),super.afterCreated()}init(i){super.init(i),i.layerWatcher.watchLayer(this),this.observeResolution(),this.hasBeenVisible$.subscribe(()=>{this.options.messages&&this.visible&&this.options.messages.map(e=>{this.showMessage(e)})}),this.createLink()}createLink(){!mne(this)||this.link||(this.link=new xne(this))}remove(){if(super.remove(),this.unobserveResolution(),this.map.layerWatcher.unwatchLayer(this),mne(this)&&(this.link?.deleteChildren(this.map.layerController),this.link?.destroy()),O$(this)){if(!this.linkMaster)return;let i=this.linkMaster.layer,e=this.linkMaster.hasSyncDeletion(this);this.linkMaster.remove(this),e&&i&&this.map.layerController.remove(i)}}add(i){super.add(i),O$(this)&&(mne(this)&&this.link.init(),this.createLinkWithParent())}moveTo(i){super.moveTo(i),O$(this)&&(this.link?.move(this,i),this.linkMaster?.move(this,i))}createLinkWithParent(){let i=this.findParentByLinkId(this.map.layerController.all,this.options.linkedLayers.linkId);i&&(this.linkMaster=i.link,i?.link.add(this))}findParentByLinkId(i,e){return i.find(n=>{if(Ru(n))return n.options.linkedLayers?.links?n.options.linkedLayers.links.some(o=>o.linkedIds.includes(e)):!1})}showMessage(i){this.messageService&&this.messageService.message(i)}observeResolution(){this.resolution$$=this.map.viewController.resolution$.subscribe(()=>this.updateInResolutionsRange())}unobserveResolution(){this.resolution$$!==void 0&&(this.resolution$$.unsubscribe(),this.resolution$$=void 0)}updateInResolutionsRange(){if(this.map!==void 0){let i=this.map.viewController.getResolution(),e=this.minResolution,n=this.maxResolution===void 0?1/0:this.maxResolution;this.isInResolutionsRange=i>=e&&i<=n}else this.isInResolutionsRange=!1}},ll=class extends B2{messageService;authInterceptor;geoNetworkService;geoDBService;layerDBService;type="vector";previousLoadExtent;previousLoadResolution;previousOgcFilters;xhrAccumulator=[];watcher;trackFeatureListenerId;get browsable(){return this.options.browsable!==!1}get exportable(){return this.options.exportable!==!1}constructor(i,e,n,o,s,l){super(i,e,n),this.messageService=e,this.authInterceptor=n,this.geoNetworkService=o,this.geoDBService=s,this.layerDBService=l,this.watcher=new wne(this),this.status$=this.watcher.status$}createOlLayer(){let i=this.options.opacity||1,e=this.options.visible!==!1,n=this.options.minResolution||Th(Number(this.options.minScaleDenom)),o=this.options.maxResolution||Th(Number(this.options.maxScaleDenom)),s=this.options.sourceOptions;this.dataSource instanceof As&&(s?.preload?.bypassResolution||s?.preload?.bypassVisible)&&(this.options.opacity=0,s.preload.bypassResolution&&(this.options.minResolution||this.options.maxResolution)&&(this.options.minResolution=0,this.options.maxResolution=1/0),s.preload.bypassVisible&&!e&&(this.options.visible=!0));let l=Object.assign({},this.options,{source:this.options.source.ol,sourceOptions:this.options.sourceOptions||this.options.source.options});this.options.animation&&this.dataSource.ol.on("addfeature",function(f){this.flash(f.feature)}.bind(this)),this.options.idbInfo?.storeToIdb&&this.geoDBService&&(this.options.idbInfo.firstLoad&&this.maintainFeaturesInIdb(),this.dataSource.ol.once("featuresloadend",()=>{this.dataSource.ol.on("addfeature",()=>this.maintainFeaturesInIdb()),this.dataSource.ol.on("changefeature",()=>this.maintainFeaturesInIdb()),this.dataSource.ol.on("clear",()=>this.maintainFeaturesInIdb()),this.dataSource.ol.on("removefeature",()=>this.maintainFeaturesInIdb())})),this.dataSource instanceof As&&(s?.preload?.bypassResolution||s?.preload?.bypassVisible)&&this.dataSource.ol.once("featuresloadend",()=>{i&&(this.opacity=i),s.preload.bypassResolution&&(this.minResolution=n,this.maxResolution=o),s.preload.bypassVisible&&(this.visible=e)}),this.options.trackFeature&&this.enableTrackFeature(this.options.trackFeature);let h=new i0(l),p=h.getSource(),m=p.getUrl();if(typeof m=="function")return h;if(m||l.sourceOptions?.type==="wfs"){let f,g=l.sourceOptions;g?.type==="wfs"&&(g.params||g.paramsWFS)?f=(y,_,w,A,k)=>{this.customWFSLoader(p,g,this.authInterceptor,y,_,w,A,k)}:f=(y,_,w,A,k)=>{this.customLoader(p,m,y,_,w,A,k)},f&&p.setLoader(f)}else if(this.options.idbInfo?.storeToIdb&&this.geoDBService){let f=(g,y,_,w,A)=>{this.customIDBLoader(p,l.id,g,_,w,A)};f&&p.setLoader(f)}return this.options.idbInfo?.storeToIdb&&this.geoDBService&&h.once("sourceready",()=>{this.options.idbInfo.firstLoad&&this.maintainOptionsInIdb(),Ds(h,"change").pipe(cr(750)).subscribe(()=>this.maintainOptionsInIdb()),h.on("change:zIndex",()=>this.maintainOptionsInIdb())}),h}remove(){this.watcher.unsubscribe(),this.removeLayerFromIDB(),super.remove()}removeLayerFromIDB(){this.geoDBService&&this.layerDBService&&UC(this.geoDBService.deleteByKey(this.id),this.layerDBService.deleteByKey(this.id)).subscribe()}maintainOptionsInIdb(){this.options.igoStyle.igoStyleObject=dpt(this.ol);let i=Ln.removeUndefined({layerId:this.id,detailedContextUri:this.options.idbInfo.contextUri,sourceOptions:{id:this.id,type:"vector",queryable:!0},layerOptions:{workspace:this.options.workspace,zIndex:this.ol?this.zIndex:1e6,id:this.id,isIgoInternalLayer:this.isIgoInternalLayer,title:this.title,igoStyle:this.options.igoStyle,idbInfo:Object.assign({},this.options.idbInfo,{firstLoad:!1})},insertEvent:`${this.title}-${this.id}-${new Date}`});this.layerDBService.update(i)}maintainFeaturesInIdb(){let i=this.dataSource.ol.getFeatures(),e=JSON.parse(new hs().writeFeatures(i,{dataProjection:"EPSG:4326",featureProjection:this.dataSource.ol.getProjection()||"EPSG:3857"}));this.geoDBService.update(this.id,this.id,e,k2.User,`${this.title}-${this.id}-${new Date}`)}flash(i){let e=new Date().getTime(),n=this.ol.on("postrender",o.bind(this));function o(s){let l=v1e(s),h=s.frameState,p=i.getGeometry().clone(),m=h.time-e,f=m/this.options.animation.duration,g=Nc(1-f),y=Qc(this.options.animation.color||"red");y[3]=g;let _=this.ol.getStyleFunction().call(this,i).find(A=>A.getImage());_||(_=this.ol.getStyleFunction().call(this,i)[0]);let w=_.clone();switch(i.getGeometry().getType()){case"Point":if(w.getImage()!==null&&typeof w.getImage().getRadius=="function"){let A=Nc(f)*(w.getImage().getRadius()*3);w.getImage().setRadius(A),w.getImage().setOpacity(g)}break;case"LineString":w.getImage()&&(w.getImage().getStroke().setColor(y),w.getImage().getStroke().setWidth(Nc(f)*(w.getImage().getStroke().getWidth()*3))),w.getStroke()&&(w.getStroke().setColor(y),w.getStroke().setWidth(Nc(f)*(w.getStroke().getWidth()*3)));break;case"Polygon":w.getImage()&&w.getImage().getFill().setColor(y),w.getFill()&&w.getFill().setColor(y);break}if(w.setText(""),l.setStyle(w),l.drawGeometry(p),m>this.options.animation.duration){_h(n),this.map.ol.render();return}this.map.ol.render()}}init(i){i===void 0?this.watcher.unsubscribe():this.watcher.subscribe(()=>{}),super.init(i)}setExtent(i){this.options.extent=i}onUnwatch(){this.dataSource.onUnwatch(),this.stopAnimation()}stopAnimation(){this.dataSource.ol.un("addfeature",function(i){this.visible&&this.flash(i.feature)}.bind(this))}enableTrackFeature(i){this.trackFeatureListenerId=this.dataSource.ol.on("addfeature",this.trackFeature.bind(this,i))}centerMapOnFeature(i){let e=this.dataSource.ol.getFeatureById(i);e&&this.map.ol.getView().setCenter(e.getGeometry().getCoordinates())}trackFeature(i,e){e.feature.getId()===i&&this.visible&&this.centerMapOnFeature(i)}disableTrackFeature(){_h(this.trackFeatureListenerId)}customWFSLoader(i,e,n,o,s,l,h,p,m){{let f=e.paramsWFS,g=f.srsName?new Cf({code:f.srsName}):l,y=Su(o,l,g),_=e.ogcFilters;if(this.previousLoadExtent&&this.previousLoadExtent!==y||this.previousLoadResolution&&this.previousLoadResolution!==s||this.previousOgcFilters&&this.previousOgcFilters!==_){i.removeLoadedExtent(this.previousLoadExtent);for(let k of this.xhrAccumulator)k.abort()}this.previousLoadExtent=y,this.previousLoadResolution=s,this.previousOgcFilters=_,f.srsName=f.srsName||l.getCode();let w=jAe(e,y,g,_,m),A=0;if(f.version==="2.0.0"&&f.maxFeatures>fI)for(;A<f.maxFeatures;){let R=w.replace("count="+f.maxFeatures,"count=1000");R=R.replace("startIndex=0","0"),R+="&startIndex="+A,R.replace(/&&/g,"&"),this.getFeatures(i,y,g,l,R,h,p),A+=1e3}else this.getFeatures(i,y,g,l,w,h,p)}}getFeatures(i,e,n,o,s,l,h){let p=new XMLHttpRequest,m=this.authInterceptor.alterUrlWithKeyAuth(s),f=s;m&&(f=m),p.open("GET",f),this.authInterceptor&&this.authInterceptor.interceptXhr(p,f);let g=()=>{i.removeLoadedExtent(e),h()};p.onerror=g,p.onload=()=>{if(p.status===200&&p.responseText.length>0){let y=i.getFormat().readFeatures(p.responseText,{dataProjection:n,featureProjection:o});y?(i.addFeatures(y),l(y)):l([])}else g()},this.xhrAccumulator.push(p),p.send()}customLoader(i,e,n,o,s,l,h){let p=new XMLHttpRequest,m=e;if(typeof e!="function"){let f=this.authInterceptor.alterUrlWithKeyAuth(e);f&&(m=f)}if(this.geoNetworkService&&typeof e!="function"){let y=i.getFormat().getType(),_=()=>{i.removeLoadedExtent(n),h()},w={responseType:y};this.geoNetworkService.geoDBService.get(e).pipe(jh(750)).pipe(ul(A=>A?Vt(A):this.geoNetworkService.get(m,w).pipe(So(),Fn(k=>{throw _(),k})))).subscribe(A=>{if(A){let k=i.getFormat(),R=k.getType(),$;if(R==="json"||R==="text"?$=A:R==="xml"?($=A,$||($=new DOMParser().parseFromString(A,"application/xml"))):R==="arraybuffer"&&($=A),$){let H=k.readFeatures($,{extent:n,featureProjection:s});i.addFeatures(H),l(H)}else _()}})}else{p.open("GET",m);let f=i.getFormat();f.getType()==="arraybuffer"&&(p.responseType="arraybuffer"),this.authInterceptor&&this.authInterceptor.interceptXhr(p,m);let g=()=>{i.removeLoadedExtent(n),h()};p.onerror=g,p.onload=()=>{if(!p.status||p.status>=200&&p.status<300){let y=f.getType(),_;if(y==="json"||y==="text"?_=p.responseText:y==="xml"?(_=p.responseXML,_||(_=new DOMParser().parseFromString(p.responseText,"application/xml"))):y==="arraybuffer"&&(_=p.response),_){let w=f.readFeatures(_,{extent:n,featureProjection:s});i.addFeatures(w),l(w)}else g()}else g()},p.send()}}customIDBLoader(i,e,n,o,s,l){if(this.geoNetworkService){let h=()=>{i.removeLoadedExtent(n),l()};this.geoNetworkService.geoDBService.get(e).subscribe(p=>{if(p){let m=i.getFormat(),f=m.getType(),g;if(f==="json"||f==="text"?g=p:f==="xml"?(g=p,g||(g=new DOMParser().parseFromString(p,"application/xml"))):f==="arraybuffer"&&(g=p),g){let y=m.readFeatures(g,{extent:n,featureProjection:o});i.addFeatures(y,m.readProjection(g)),s(y)}else h()}})}}};function z2(r,i){return r.layer!==void 0?(r.map.layerController.getById(r.layer.id)||r.map.layerController.add(r.layer),r.layer):(i=i||new ll({source:new As}),r.bindLayer(i),r.map.layerController.getById(r.layer.id)||r.map.layerController.add(r.layer),i)}var Qo="Feature",$n=function(r){return r[r.None=0]="None",r[r.Move=1]="Move",r[r.Zoom=2]="Zoom",r[r.Default=3]="Default",r}($n||{}),Uf=class extends vf{options;stores$$=new Map;motion;constructor(i){super(i),this.options=i,this.setMotion(i.motion)}bindStore(i){super.bindStore(i),this.active===!0&&this.watchStore(i)}unbindStore(i){super.unbindStore(i),this.active===!0&&this.unwatchStore(i)}setMotion(i){this.motion=i}doActivate(){this.stores.forEach(i=>this.watchStore(i))}doDeactivate(){this.unwatchAll()}watchStore(i){if(this.stores$$.has(i))return;let e=i.view.all$().subscribe(n=>this.onFeaturesChange(n,i));this.stores$$.set(i,e)}unwatchStore(i){let e=this.stores$$.get(i);e!==void 0&&(e.unsubscribe(),this.stores$$.delete(i))}unwatchAll(){Array.from(this.stores$$.entries()).forEach(i=>{i[1].unsubscribe()}),this.stores$$.clear()}onFeaturesChange(i,e){i.length===0?e.clearLayer():e.setLayerFeatures(i,this.selectMotion(e),this.options.viewScale,this.options.areaRatio,this.options.getFeatureId)}selectMotion(i){return this.motion!==void 0?this.motion:i.pristine===!0||i.count>i.view.count?$n.Default:$n.None}};function oy(r,i,e){e=e||xP;let o=new hs().readFeature(r,{dataProjection:r.projection,featureProjection:i});o.setId(e(r));let s=Im(r);s!==void 0&&o.set("_title",s,!0),r.extent!==void 0&&o.set("_extent",r.extent,!0),r.projection!==void 0&&o.set("_projection",r.projection,!0);let l=bS(r,"meta.mapTitle");l!==void 0&&o.set("_mapTitle",l,!0),o.set("_entityRevision",ZY(r),!0);let h=SP(r);return h!==void 0&&o.set("_icon",h,!0),r.meta&&r.meta.style&&o.set("_style",r.meta.style,!0),r.sourceId&&o.set("_sourceId",r.sourceId,!0),o}function _pt(r,i,e,n="EPSG:4326"){let o,s,l,h;e?(s=e.get("title"),e.get("sourceOptions")&&(l=e.get("sourceOptions").excludeAttribute,h=e.get("sourceOptions").excludeAttributeOffline)):s=r.get("_title");let p=new hs,m=r.getProperties(),f=r.getType();if(f==="Polygon"){let A=r.getEnds();o=new Zo(r.getFlatCoordinates(),"XY",A)}else f==="Point"?o=new Kn(r.getFlatCoordinates(),"XY"):f==="LineString"&&(o=new ao(r.getFlatCoordinates(),"XY"));let g=p.writeGeometryObject(o,{dataProjection:n,featureProjection:i}),y=r.getId()?r.getId():Gs(),_=r.get("_mapTitle"),w=Su(r.getExtent(),i,n);return{type:Qo,projection:n,extent:w,meta:{id:y,title:s||_||y,mapTitle:_,excludeAttribute:l,excludeAttributeOffline:h},properties:m,geometry:g,ol:r}}function hb(r,i,e,n="EPSG:4326"){let o,s,l,h,p=new hs,f=r.getKeys().filter(w=>!w.startsWith("_")&&w!=="geometry").reduce((w,A)=>(w[A]=r.get(A),w),{}),g=p.writeGeometryObject(r.getGeometry(),{dataProjection:n,featureProjection:i});if(e){o=e.get("title");let w=e.get("sourceOptions");w&&(s=w.excludeAttribute,l=w.excludeAttributeOffline,h=w.idColumn||(w.type==="arcgisrest"||w.type==="tilearcgisrest"?"OBJECTID":void 0))}else o=r.get("_title");let y=r.get("_mapTitle"),_=r.getId()?r.getId():r.get(h)?r.get(h):Gs();return{type:Qo,projection:n,extent:r.get("_extent"),meta:{id:_,title:o||y||_,mapTitle:y,revision:r.getRevision(),style:r.get("_style"),excludeAttribute:s,excludeAttributeOffline:l},properties:f,geometry:g,ol:r}}function ypt(r,i){let e=Fs(),n=r.get("_extent"),o=r.get("_projection");if(n!==void 0&&o!==void 0)e=Su(n,o,i);else{let s=r.getGeometry();s!==null&&(e=s.getExtent())}return e}function mb(r,i){let e=Fs();return r.forEach(n=>{let o=ypt(n,i);h1(e,o)}),e}function zAe(r,i){let[e,n]=I0e(r);return[i[3]?r[0]-e*i[3]:r[0],i[2]?r[1]-n*i[2]:r[1],i[1]?r[2]+e*i[1]:r[2],i[0]?r[3]+n*i[0]:r[3]]}function XF(r,i,e=.05){let n=Array.isArray(e)?e:[e,e,e,e],o=[-1,-1,-1,-1].map((l,h)=>l*n[h]),s=zAe(r,o);return!fc(s,i)}function nU(r,i,e){e=e||.004;let n=r.getExtent(),o=p1(n),s=p1(i);return s===0&&r.getZoom()>13?!1:s/o<e}function Fu(r,i,e=$n.Default,n,o){let s=r.getExtent(),l=r.getOlProjection(),h=mb(i,l),p=h;n!==void 0&&(p=zAe(p,n)),e===$n.Zoom?r.zoomToExtent(p):e===$n.Move?r.moveToExtent(p):e===$n.Default&&(XF(s,h)||nU(r,h,o))&&r.zoomToExtent(p)}function cAe(r){r.setStyle(new Mn({}))}function vpt(r,i){let e=new Map;i.forEach(l=>{e.set(l.getId(),l)});let n=[];r.forEach(l=>{let h=e.get(l.getId());h===void 0||h.get("_entityRevision")!==l.get("_entityRevision")?n.push(l):e.delete(h.getId())});let o=Array.from(e.keys());return{add:i.filter(l=>o.indexOf(l.getId())>=0),remove:n}}var Xp=class extends wd{layer;map;get source(){return this.layer?this.layer.dataSource:void 0}set searchDocument(i){this._searchDocument=i}get searchDocument(){return this._searchDocument}_searchDocument;constructor(i,e){super(i,e),this.map=e.map}bindLayer(i){return this.layer=i,this}setLayerFeatures(i,e=$n.Default,n,o,s){s=s||xP,this.checkLayer();let l=i.map(h=>oy(h,this.map.projection,s));this.setLayerOlFeatures(l,e,n,o)}setStoreOlFeatures(i){this.checkLayer();let e=i.map(n=>(n.set("_featureStore",this,!0),hb(n,this.layer.map.projection)));this.load(e)}clearLayer(){this.checkLayer(),this.source.ol.clear()}checkLayer(){if(this.layer===void 0)throw new Error("This FeatureStore is not bound to a layer.")}setLayerOlFeatures(i,e=$n.Default,n,o){let s=this.layer.ol.getSource(),l=vpt(s.getFeatures(),i);l.remove.length>0&&this.removeOlFeaturesFromLayer(l.remove),l.add.length>0&&this.addOlFeaturesToLayer(l.add),l.add.length>0?Fu(this.map.viewController,l.add,e,n,o):l.remove.length>0&&Fu(this.map.viewController,i,e,n,o)}setLayerExtent(){let i=this.entities$.getValue(),e=Fs(),n=[];i.forEach(s=>{n.push(oy(s,this.map.projection))});let o=mb(n,this.map.viewProjection);h1(e,o),this.layer.setExtent(e)}addOlFeaturesToLayer(i){i.forEach(e=>{e.set("_featureStore",this,!0)}),this.source.ol.addFeatures(i)}removeOlFeaturesFromLayer(i){i.forEach(e=>{this.source.ol.removeFeature(e)})}},j2=class extends zV{constructor(i){super(i)}},zf=class extends vf{options;mapClickListener;olDragSelectInteraction;olDragSelectInteractionEndKey;stores$$;motion;get map(){return this.options.map}get overlayStore(){return this._overlayStore}_overlayStore;constructor(i){super(i),this.options=i,this.setMotion(i.motion),this._overlayStore=this.createOverlayStore()}bindStore(i){super.bindStore(i),this.active===!0&&this.activate()}unbindStore(i){super.unbindStore(i),this.active===!0&&this.activate()}setMotion(i){this.motion=i}unselectAll(){this.stores.forEach(i=>{i.state.updateAll({selected:!1})})}clear(){this.overlayStore.source.ol.clear(),this.overlayStore.clear()}deactivateSelection(){this.unlistenToMapClick(),this.removeDragBoxInteraction(),this.unwatchAll()}doActivate(){this.addOverlayLayer(),this.listenToMapClick(),this.options.dragBox===!0&&this.addDragBoxInteraction(),this.watchAll()}doDeactivate(){this.deactivateSelection(),this.removeOverlayLayer()}watchAll(){this.unwatchAll();let i=this.stores.map(e=>e.stateView.manyBy$(n=>n.state.selected===!0).pipe($t(n=>n.map(o=>o.entity))));this.stores$$=ts(i).pipe(cr(5),zd(1),$t(e=>e.reduce((n,o)=>n.concat(o)))).subscribe(e=>this.onSelectFromStore(e))}unwatchAll(){this.stores$$!==void 0&&this.stores$$.unsubscribe()}listenToMapClick(){this.mapClickListener=this.map.ol.on("singleclick",i=>{this.onMapClick(i)})}unlistenToMapClick(){_h(this.mapClickListener)}onMapClick(i){let e=!k$(i),n=!e,o=i.map.getFeaturesAtPixel(i.pixel,{hitTolerance:this.options.hitTolerance||0,layerFilter:s=>this.stores.find(h=>h.layer?.ol===s)!==void 0});this.onSelectFromMap(o,e,n)}addDragBoxInteraction(){let i,e=this.map.ol.getInteractions().getArray();for(let n of e)if(n instanceof j2){i=n;break}i===void 0&&(i=new j2({condition:k$}),this.map.ol.addInteraction(i),this.olDragSelectInteraction=i),this.olDragSelectInteractionEndKey=i.on("boxend",n=>this.onDragBoxEnd(n))}removeDragBoxInteraction(){this.olDragSelectInteractionEndKey!==void 0&&_h(this.olDragSelectInteractionEndKey),this.olDragSelectInteraction!==void 0&&this.map.ol.removeInteraction(this.olDragSelectInteraction),this.olDragSelectInteraction=void 0}onDragBoxEnd(i){let e=!k$(i.mapBrowserEvent),o=i.target.getGeometry().getExtent(),s=this.stores.reduce((l,h)=>{let p=h.layer.ol.getSource();return l.push(...p.getFeaturesInExtent(o)),l},[]);this.onSelectFromMap(s,e,!1)}onSelectFromStore(i){let e=this.motion,o=this.overlayStore.layer.ol.getSource().getFeatures().map(h=>h.getId()),s=i.map(this.overlayStore.getKey),l;i.length===0?l=!1:l=o.length!==s.length||!o.every(h=>s.indexOf(h)>=0),this.overlayStore.setLayerFeatures(i,l?e:$n.None,this.options.viewScale,this.options.areaRatio,this.options.getFeatureId)}onSelectFromMap(i,e,n){let o=this.groupFeaturesByStore(i);this.stores.forEach(s=>{let l=o.get(s);l===void 0&&e===!0?this.unselectAllFeaturesFromStore(s):l===void 0&&e===!1||this.selectFeaturesFromStore(s,l,e,n)})}selectFeaturesFromStore(i,e,n,o){o===!0?i.state.reverseMany(e,["selected"]):i.state.updateMany(e,{selected:!0},n)}unselectAllFeaturesFromStore(i){i.state.updateAll({selected:!1})}groupFeaturesByStore(i){let e=new Map;return i==null||i.forEach(n=>{let o=n.get("_featureStore");if(o===void 0)return;let s=e.get(o);s===void 0&&(s=[],e.set(o,s));let l=o.get(n.getId());l!==void 0&&s.push(l)}),e}createOverlayStore(){let i=this.options.layer?this.options.layer:this.createOverlayLayer();return new Xp([],{map:this.map}).bindLayer(i)}createOverlayLayer(){return new ll({zIndex:300,source:new As,style:void 0,showInLayerList:!1,exportable:!1,browsable:!1})}addOverlayLayer(){let i=this.overlayStore.layer;this.map.layerController.getById(i.id)||this.map.layerController.add(i)}removeOverlayLayer(){this.overlayStore.source.ol.clear(),this.map.layerController.remove(this.overlayStore.layer)}};function rU(r,i){if(r.getStrategyOfType(Uf)!==void 0){r.activateStrategyOfType(Uf);return}i=i||new Uf({}),r.addStrategy(i),i.activate()}function bpt(r,i){if(r.getStrategyOfType(zf)!==void 0){r.activateStrategyOfType(zf);return}i=i||new zf({map:r.map}),r.addStrategy(i),i.activate()}function JF({text:r,opacity:i=1,markerColor:e=[0,161,222],markerOutlineColor:n=[255,255,255]}={}){let o=Qc(e).slice(0),s=Qc(n).slice(0);o.length===4&&(typeof e!="string"||/^#[0-9A-F]{8}$/i.test(e))&&(i=o[3]);let l=`"rgba(${o[0]},${o[1]},${o[2]},${i})"`,h=`"rgb(${s[0]},${s[1]},${s[2]})"`,p='data:image/svg+xml;utf8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg" height="36" width="36" viewBox="0 0 36 36"><path fill='+l+" stroke="+h+' stroke-width="2" d="M 17.692635,32.565644 C 15.71852,30.330584 13.290925,27.058065 11.6766,24.455732 9.3398623,20.688851 7.8905694,17.205334 7.6297492,14.728733 7.5616025,14.081649 7.5739557,12.528552 7.6513363,12.014724 8.1013861,9.0262716 9.8047068,6.3655569 12.310675,4.7364878 c 1.113691,-0.7239832 2.508083,-1.2834131 3.776687,-1.5152052 0.242945,-0.044389 0.451656,-0.09393 0.463804,-0.1100911 0.01215,-0.016161 0.638282,-0.025502 1.391411,-0.02076 1.088235,0.00685 1.450932,0.024316 1.766871,0.085071 2.650763,0.5097353 4.947142,1.8701891 6.498786,3.8501033 0.628018,0.8013587 1.297046,2.0200608 1.640967,2.9891872 0.191065,0.538399 0.427644,1.447408 0.477391,1.834287 0.0164,0.127546 0.0434,0.231902 0.06,0.231902 0.0166,0 0.03122,0.626135 0.03249,1.391411 0.0013,0.765276 -0.011,1.391411 -0.02726,1.391411 -0.01626,0 -0.05449,0.154049 -0.08495,0.342331 -0.08815,0.544879 -0.387235,1.721449 -0.604837,2.379406 -1.209421,3.656888 -4.014463,8.349762 -7.849521,13.132357 -0.790496,0.985807 -1.795217,2.167992 -1.842543,2.167992 -0.01896,0 -0.161766,-0.144111 -0.317336,-0.320246 z m 1.066937,-15.36525 c 0.133519,-0.02121 0.248766,-0.05657 0.256105,-0.07859 0.0073,-0.02202 0.04918,-0.03066 0.09298,-0.0192 0.0438,0.01145 0.107628,-0.0072 0.141834,-0.04137 0.03421,-0.03421 0.08456,-0.05474 0.111888,-0.04563 0.02733,0.0091 0.07703,-0.01077 0.110429,-0.04417 0.03341,-0.03341 0.08416,-0.05293 0.112796,-0.04338 0.02863,0.0095 0.08974,-0.01867 0.135802,-0.06271 0.04606,-0.04403 0.111902,-0.08625 0.146319,-0.09381 0.204084,-0.04483 0.762371,-0.519108 1.079463,-0.917027 0.26749,-0.335672 0.570987,-0.878795 0.529019,-0.946701 -0.01496,-0.0242 -0.0067,-0.044 0.01835,-0.044 0.05645,0 0.196809,-0.467982 0.158801,-0.529481 -0.01521,-0.02461 -0.0043,-0.04475 0.02427,-0.04475 0.03157,0 0.04365,-0.04329 0.03082,-0.11043 -0.01161,-0.06074 -0.0066,-0.110429 0.01124,-0.110429 0.01779,0 0.03235,-0.258405 0.03235,-0.574233 0,-0.315829 -0.01545,-0.574234 -0.03434,-0.574234 -0.01889,0 -0.02437,-0.03811 -0.01219,-0.08469 0.04412,-0.168712 -0.336329,-1.152668 -0.481536,-1.245401 -0.02327,-0.01486 -0.04022,-0.03992 -0.03765,-0.05568 0.01222,-0.07498 -0.156557,-0.318365 -0.406379,-0.586027 -0.295921,-0.317054 -0.773059,-0.690104 -0.83427,-0.652274 -0.0206,0.01273 -0.03745,0.0024 -0.03745,-0.02289 0,-0.06107 -0.433076,-0.2789369 -0.487546,-0.245273 -0.02338,0.01445 -0.04251,0.0068 -0.04251,-0.01695 0,-0.056281 -0.393995,-0.1865457 -0.613804,-0.2029397 -0.0943,-0.00703 -0.188579,-0.023183 -0.209503,-0.035888 -0.02092,-0.012705 -0.276571,-0.023337 -0.568105,-0.023627 -0.534044,-5.301e-4 -1.12638,0.091025 -1.12638,0.1741017 0,0.023781 -0.01713,0.032648 -0.03808,0.019705 -0.05054,-0.031232 -0.403641,0.1088602 -0.403641,0.1601422 0,0.02204 -0.01988,0.02779 -0.04417,0.01278 -0.0243,-0.01501 -0.04417,-0.0051 -0.04417,0.02209 0,0.02716 -0.01988,0.0371 -0.04417,0.02209 -0.0243,-0.01501 -0.04417,-0.0051 -0.04417,0.02209 0,0.02716 -0.01915,0.03755 -0.04256,0.02308 -0.02341,-0.01447 -0.08138,0.01252 -0.128834,0.05997 -0.04745,0.04745 -0.0974,0.07515 -0.111001,0.06155 -0.0136,-0.0136 -0.03722,0.0078 -0.05248,0.0476 -0.01526,0.03978 -0.0411,0.06408 -0.0574,0.054 -0.03277,-0.02025 -0.462299,0.323995 -0.491977,0.394291 -0.01026,0.02429 -0.07454,0.0912 -0.142856,0.148686 -0.248033,0.208705 -0.730279,0.974169 -0.672565,1.067553 0.0145,0.02346 0.0059,0.04266 -0.01914,0.04266 -0.05907,0 -0.241471,0.599428 -0.208527,0.685278 0.01385,0.0361 0.0044,0.06564 -0.02098,0.06564 -0.02539,0 -0.04169,0.0646 -0.03622,0.143558 0.0055,0.07896 -0.0042,0.213129 -0.02144,0.29816 -0.04741,0.233576 0.0511,1.055502 0.167516,1.397721 0.126048,0.370516 0.310099,0.740163 0.426484,0.856548 0.04776,0.04776 0.07554,0.08684 0.06174,0.08684 -0.0138,0 0.01516,0.05653 0.06436,0.125632 0.131301,0.184396 0.499365,0.587266 0.518785,0.567846 0.0092,-0.0092 0.09821,0.06081 0.197812,0.155562 0.09961,0.09475 0.190589,0.162786 0.202187,0.151188 0.0116,-0.0116 0.05991,0.01774 0.107361,0.06519 0.04745,0.04745 0.105426,0.07444 0.128834,0.05997 0.02341,-0.01447 0.04256,-0.0057 0.04256,0.01958 0,0.06106 0.344664,0.23496 0.399061,0.201341 0.02346,-0.0145 0.04266,-0.0059 0.04266,0.01914 0,0.05907 0.599429,0.241471 0.685279,0.208527 0.0361,-0.01385 0.06564,-0.0065 0.06564,0.01645 0,0.05196 1.079115,0.04833 1.413314,-0.0048 z"></path></svg>';return new Mn({image:new Tu({src:p,opacity:i,anchor:[.5,.92]}),text:new Pl({text:r,font:"12px Calibri,sans-serif",fill:new sr({color:"#000"}),stroke:new ir({color:"#fff",width:3}),overflow:!0})})}var GAe=function(r){return r[r.GeoJSON=0]="GeoJSON",r[r.JSON=1]="JSON",r}(GAe||{}),HAe=function(r){return r.Route="route",r.Trip="trip",r}(HAe||{}),jF=function(r){return r.Coord="coord",r.Text="text",r}(jF||{}),nC=function(r){return r.Stop="stop",r.Route="route",r.Vertex="vertex",r}(nC||{}),gI=function(r){return r.Start="start",r.Intermediate="intermediate",r.End="end",r}(gI||{}),Zd=function(r){return r.Turn="turn",r.NewName="new name",r.Depart="depart",r.Arrive="arrive",r.Merge="merge",r.Ramp="ramp",r.OnRamp="on ramp",r.OffRamp="off ramp",r.Fork="fork",r.EndOfRoad="end of road",r.UseLane="use lane",r.Continue="continue",r.Roundabout="roundabout",r.Rotary="rotary",r.RoundaboutTurn="roundabout turn",r.Notification="notification",r.ExitRoundabout="exit roundabout",r.ExitRotary="exit rotary",r}(Zd||{}),Pu=function(r){return r.Uturn="uturn",r.SharpRight="sharp right",r.Right="right",r.SlightRight="slight right",r.SharpLeft="sharp left",r.Left="left",r.SlightLeft="slight left",r.Straight="straight",r}(Pu||{});function ere(r,i="asc",e="position"){r.view.sort({direction:i,valueAccessor:n=>n[e]})}function U$(r,i){let e=gI.Intermediate;return r===0?e=gI.Start:r===i&&(e=gI.End),e}function wpt(r,i){for(let e of i.all())e.position=e.position>r?e.position-=1:e.position,e.relativePosition=U$(e.position,i.all().length-1)}function WF(r){let i=Gs(),e=r.all(),n=e.length;for(let o of r.all())o.relativePosition=U$(o.position,e.length);return r.insert({id:i,position:n,relativePosition:U$(n,e.length)}),ere(r),r.get(i)}function Cpt(r,i){r.delete(i),wpt(i.position,r)}function tre(r){let i=[new Mn({geometry:r.getGeometry(),image:new yl({radius:7,stroke:new ir({color:"#FF0000",width:3})})})],e=JF({text:r.get("stopText"),opacity:r.get("stopOpacity"),markerColor:r.get("stopColor"),markerOutlineColor:[255,255,255]}),n=[new Mn({stroke:new ir({color:`rgba(106, 121, 130, ${r.get("active")?.75:0})`,width:10})}),new Mn({stroke:new ir({color:`rgba(79, 169, 221, ${r.get("active")?.75:0})`,width:6})})];if(r.get("type")===nC.Stop)return e;if(r.get("type")===nC.Vertex)return i;if(r.get("type")===nC.Route)return n}function xpt(r,i){let e=new Uf({motion:$n.None}),n=new ll({isIgoInternalLayer:!0,id:"igo-direction-stops-layer",title:i.translate.instant("igo.geo.directions.layer.stops"),zIndex:911,source:new As,showInLayerList:!0,visible:!0,workspace:{enabled:!1},linkedLayers:{linkId:"igo-direction-stops-layer",links:[{syncedDelete:!0,linkedIds:["igo-direction-route-layer"],properties:[]}]},exportable:!0,browsable:!1,style:tre});z2(r,n),rU(r,e)}function Spt(r,i){let e=new Uf({motion:$n.None}),n=new ll({isIgoInternalLayer:!0,id:"igo-direction-route-layer",title:i.translate.instant("igo.geo.directions.layer.route"),zIndex:910,source:new As,showInLayerList:!0,visible:!0,workspace:{enabled:!1},linkedLayers:{linkId:"igo-direction-route-layer"},exportable:!0,browsable:!1,style:tre});z2(r,n),rU(r,e)}function Ipt(r){let i=new Uf({motion:$n.None}),e=new ll({isIgoInternalLayer:!0,id:"igo-direction-step-layer",title:"",zIndex:910,source:new As,showInLayerList:!1,visible:!0,workspace:{enabled:!1},linkedLayers:{linkId:"igo-direction-route-layer"},exportable:!1,browsable:!1,style:tre});z2(r,e),rU(r,i)}function Tpt(r,i,e,n){let o,s;switch(r.relativePosition){case gI.Start:o="#008000",s=n.translate.instant("igo.geo.directions.input.start");break;case gI.End:o="#f64139",s=n.translate.instant("igo.geo.directions.input.end");break;default:o="#ffd700",s=n.translate.instant("igo.geo.directions.input.intermediate")+" #"+r.position;break}let l=new Kn(us(r.coordinates,e,i.map.projectionCode)),h=new hs().writeGeometryObject(l,{featureProjection:i.map.projectionCode,dataProjection:i.map.projectionCode}),p=i.get(r.id),m=p?p.meta.revision:0,f={type:Qo,geometry:h,projection:i.map.projectionCode,properties:{id:r.id,type:nC.Stop,stopText:s,stopColor:o,stopOpacity:1,stop:r},meta:{id:r.id,revision:m+1},ol:new An({point:l})};i.update(f)}function Apt(r,i,e,n=!1){let o=i.geometry.coordinates,l=new ao(o).transform(e,r.map.projectionCode),h=new hs().writeGeometryObject(l,{featureProjection:r.map.projectionCode,dataProjection:r.map.projectionCode}),p=r.get(i.id),m=p?p.meta.revision:0,f={type:Qo,geometry:h,projection:r.map.projectionCode,properties:{id:i.id,type:nC.Route,active:n,directions:i},meta:{id:i.id,revision:m+1},ol:new An({linestringStore:l})};r.update(f)}function qF(r){if(r===0)return;if(r<1e3)return`${Math.round(r)} m`;let i=r/1e3,e=i>=10?1:0;return`${fA.roundToNDecimal(i,e)} km`.replace(".",",")}function YF(r){let i=Math.floor(r/3600),e=Math.floor(r%3600/60);return i?`${i} h ${e} min`:e?`${e} min`:"< 1 min"}function ire(r,i,e=!1){let n=r.maneuver.type,o=r.maneuver.modifier,s=r.name,l=r.maneuver.bearing_after,h=i.translate,p=Mpt(l,i),m=Ept(o,i),f="straight",g="";if(n===Zd.Turn)o===Pu.Uturn||o===Pu.Straight?(g=h.instant(`igo.geo.directions.results.maneuverType.turn.${o}`,{maneuverModifier:m,name:s}),o===Pu.Uturn&&(f="u_turn_left")):(g=h.instant("igo.geo.directions.results.maneuverType.turn.else",{maneuverModifier:m,name:s}),o===Pu.SlightRight?f="turn_slight_right":o===Pu.Right||o===Pu.SharpRight?f="turn_right":o===Pu.Left||o===Pu.SharpLeft?f="turn_left":o===Pu.SlightLeft&&(f="turn_slight_left"));else if(n===Zd.NewName)g=h.instant("igo.geo.directions.results.maneuverType.new name",{name:s,maneuverBearing:p});else if(n===Zd.Depart)f="directions",g=h.instant("igo.geo.directions.results.maneuverType.depart",{name:s,maneuverBearing:p});else if(n===Zd.Arrive)f="sports_score",g=h.instant(`igo.geo.directions.results.maneuverType.arrive.${e?"lastStep":"intermediate"}`,{name:s});else if(n===Zd.Merge)g=h.instant("igo.geo.directions.results.maneuverType.merge",{name:s}),f="merge";else if(n===Zd.OnRamp||n===Zd.OffRamp)g=h.instant(`igo.geo.directions.results.maneuverType.${n}`,{maneuverModifier:m});else if(n===Zd.Fork){let y=o.search("left")>=0?"left":"right";f=y==="left"?"turn_slight_left":"turn_slight_right",g=h.instant(`igo.geo.directions.results.maneuverType.fork.${y}`,{name:s})}else if(n===Zd.EndOfRoad||n===Zd.UseLane||n===Zd.Continue)n===Zd.Continue?o===Pu.Uturn?(f="u_turn_left",g=h.instant(`igo.geo.directions.results.maneuverType.turn.${o}`,{maneuverModifier:m,name:s})):g=h.instant(`igo.geo.directions.results.maneuverType.${n}`,{maneuverModifier:m,name:s}):(o===Pu.SharpRight||o===Pu.Right?f="turn_right":o===Pu.SharpLeft||o===Pu.Left?f="turn_left":o===Pu.SlightRight?f="turn_slight_right":o===Pu.SlightLeft&&(f="turn_slight_left"),g=h.instant(`igo.geo.directions.results.maneuverType.${n}`,{maneuverModifier:m,name:s}));else if(n===Zd.Roundabout||n===Zd.Rotary||n===Zd.RoundaboutTurn||n===Zd.ExitRoundabout){let y=n.replace("roundabout ","");g=h.instant(`igo.geo.directions.results.maneuverType.${y}`,{name:s}),f="donut_large"}else n===Zd.Notification&&(g=h.instant("igo.geo.directions.results.maneuverType.notification"));return{instruction:g,iconName:f}}function Ept(r,i){let e=i.translate;return r?e.instant(`igo.geo.directions.results.maneuverModifier.${r}`):void 0}function Mpt(r,i){let e=i.translate,n=["n","ne","e","se","s","sw","w","nw"],o=Math.round(r/45)%8;return e.instant(`igo.geo.directions.results.direction.${n[o]}`)}var z$=(()=>{class r{directionsSourceService;configService;languageService;printService;document;activityService;constructor(e,n,o,s,l,h){this.directionsSourceService=e,this.configService=n,this.languageService=o,this.printService=s,this.document=l,this.activityService=h}route(e,n={}){return e.length===0?void 0:this.directionsSourceService.sources[0].route(e,n)}downloadDirections(e,n){let o=this.activityService.register(),s=new Dt,l=new tr({orientation:"p",format:"letter",unit:"mm"}),h=l.internal.pageSize,p=[30,10,20,10],m=h.getWidth()-p[3]-p[1],f=h.getHeight()-p[0]-p[2],g=[m,f],y=qF(n.distance),_=YF(n.duration),w=y&&_?`${n.title} (${y} - ${_})`:n.title;return l.text(w,h.getWidth()/2,25,{align:"center"}),this.printService.addMap(l,e,96,g,p).subscribe(k=>st(this,null,function*(){k===Ho.Done&&(yield this.addInstructions(l,n,w),this.setPageHeaderFooter(l),yield l.save(`${w}.pdf`,{returnPromise:!0})),this.activityService.unregister(o),s.next(k)})),s}setHTMLTableDirections(e){return st(this,null,function*(){let n=yield this.directionsSteps(e),o=document.createElement("table"),s=document.createElement("tbody");for(let l of n){let h=document.createElement("tr"),p=document.createElement("td"),m=document.createElement("img");m.style.verticalAlign="middle",m.src=l.icon,p.appendChild(m),h.append(p);let f=document.createElement("td"),g=document.createElement("span");if(g.style.verticalAlign="middle",g.innerHTML=l.instruction,f.appendChild(g),l.distanceDuration){let y=document.createElement("span");y.style.verticalAlign="middle",y.innerHTML=" "+l.distanceDuration,f.appendChild(y)}h.append(f),s.appendChild(h)}return o.appendChild(s),o})}directionsSteps(e){return st(this,null,function*(){let o=this.document.getElementsByTagName("igo-directions-results")[0].getElementsByTagName("mat-list")[0].getElementsByTagName("mat-list-item"),s=[];for(let h of Array.from(o)){let p=h.getElementsByTagName("mat-icon")[0],m=p.innerText;if(!s.some(g=>g.name===m)){let g=yield(0,ub.default)(p);s.push({name:m,icon:g.toDataURL()})}}let l=[];for(let h=0;h<e.steps.length;h++){let p=e.steps[h],m=ire(p,this.languageService,h===e.steps.length-1),f=qF(p.distance),g=YF(p.duration);(f&&g||h===e.steps.length-1)&&l.push({instruction:`${m.instruction}`,icon:s.find(y=>y.name===m.iconName).icon,distanceDuration:f&&g?`(${f} - ${g})`:""})}return l})}addInstructions(e,n,o){return st(this,null,function*(){e.addPage(),e.text(o,e.internal.pageSize.getWidth()/2,25,{align:"center"});let s=yield this.setHTMLTableDirections(n);r6(e,{html:s,startY:30,margin:{top:20,bottom:20},columnStyles:{0:{cellWidth:10}},theme:"plain",styles:{fontSize:10},didDrawCell:function(l){if(l.column.index===0&&l.cell.section==="body"){l.row.height=10;let p=l.cell.raw.getElementsByTagName("img")[0];e.addImage(p.src,l.cell.x,l.cell.y,8,8)}}})})}setPageHeaderFooter(e){let n=e.getNumberOfPages(),o=(0,nn.default)(Date.now()).format("YYYY-MM-DD HH:mm"),s=this.configService.getConfig("directionsSources.logo")?this.configService.getConfig("directionsSources.logo"):"assets/logo.png";for(let l=0;l<n;l++){e.setPage(l),e.setFontSize(8);let h=e.internal.pageSize;e.text(o,10,10,{baseline:"top"}),e.addImage(s,"PNG",h.getWidth()-20,5,10,10),e.text(o,10,h.getHeight()-10),e.text("Page "+e.getCurrentPageInfo().pageNumber+" / "+n,h.getWidth()-20,h.getHeight()-10)}}static \u0275fac=function(n){return new(n||r)(xe(L2),xe(Ri),xe(wn),xe(ept),xe(Ui),xe(mS))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),G$=class extends wd{storeInitialized$=new mt(!1);clearStops(){this.storeInitialized$.next(!1),this.clear()}},H$=class extends Xp{},W$=class extends Xp{},q$=class extends Xp{},WAe=(()=>{class r{languageService;messageService;routeService;directionsService;contextUri;zoomOnActiveRoute$=new Dt;stopsStore;routesFeatureStore;stepsFeatureStore;downloadDirectionsBtnDisabled=!1;constructor(e,n,o,s){this.languageService=e,this.messageService=n,this.routeService=o,this.directionsService=s}get activeRoute(){return this.routesFeatureStore.all().find(e=>e.properties.active)}resetStops(){this.stopsStore.clearStops()}zoomOnActiveRoute(){this.zoomOnActiveRoute$.next()}copyDirectionsToClipboard(){let e=this.directionsToText();wx.copy(e)&&this.messageService.success("igo.geo.directions.buttons.message.copyDirections")}copyLinkToClipboard(){wx.copy(this.getLink())&&this.messageService.success("igo.geo.directions.buttons.message.copyLink")}downloadDirections(){this.stepsFeatureStore.clear(),this.downloadDirectionsBtnDisabled=!0,this.directionsService.downloadDirections(this.routesFeatureStore.map,this.activeRoute.properties.directions).subscribe(()=>{this.downloadDirectionsBtnDisabled=!1})}directionsToText(){let e="	",n=`
`,o=this.languageService.translate.instant("igo.geo.directions.directionsText.summary")+":"+n+e+this.activeRoute.properties.directions.title,s=qF(this.activeRoute.properties.directions.distance),l=YF(this.activeRoute.properties.directions.duration);s&&l&&(o+=" ("+s+" - "+l+")"),o+=n+n;let h=this.languageService.translate.instant("igo.geo.directions.directionsText.stopList")+":"+n,p=1;this.stopsStore.view.all().forEach(y=>{let _="",w="";y.text!==P2(y.coordinates,6).join(", ")?(w=y.text,_=` (${P2(y.coordinates,6).join(", ")})`):w=P2(y.coordinates,6).join(", "),h=h+e+p.toLocaleString()+". "+w+_+n,p++}),h+=n;let m=this.languageService.translate.instant("igo.geo.directions.directionsText.link")+":"+n+e+this.getLink()+n+n,f=this.languageService.translate.instant("igo.geo.directions.directions")+":"+n;return this.activeRoute.properties.directions.steps.forEach((y,_,w)=>{let A=qF(y.distance),k=YF(y.duration);if(A&&k||_===w.length-1){let R=this.getFormattedStepInstruction(y,_),$=A&&k?` (${A} - ${k}) `:"";f=f+e+"- "+R+$+n}}),o+h+m+f}getFormattedStepInstruction(e,n){return ire(e,this.languageService,n===this.activeRoute.properties.directions.steps.length-1).instruction}getLink(){if(!this.routeService)return;let e="";this.contextUri&&(e=`context=${this.contextUri}&`);let n=this.routesFeatureStore.all().map(p=>p.properties.id).indexOf(this.activeRoute.properties.id),o="";n!==0&&(o=`&${this.routeService.options.directionsOptionsKey}=result:${n}`);let s=this.routeService.options.directionsCoordKey,l=this.stopsStore.view.all().map(p=>$f(p.coordinates,6)),h="";if(l.length>=2)return h=`${s}=${l.join(";")}`,`${location.origin}${location.pathname}?${e}tool=directions&sidenav=1&${h}${o}`}static \u0275fac=function(n){return new(n||r)(ie(wn),ie(nl),ie(xS,8),ie(z$))};static \u0275cmp=gt({type:r,selectors:[["igo-directions-buttons"]],inputs:{contextUri:"contextUri",zoomOnActiveRoute$:"zoomOnActiveRoute$",stopsStore:"stopsStore",routesFeatureStore:"routesFeatureStore",stepsFeatureStore:"stepsFeatureStore"},standalone:!0,features:[yt],decls:20,vars:16,consts:[["mat-icon-button","","color","warn",3,"click","matTooltip"],["mat-icon-button","","color","primary",3,"click","matTooltip"],["mat-icon-button","","color","primary",3,"click","disabled","matTooltip"]],template:function(n,o){n&1&&(ne(0,"button",0),Ne(1,"translate"),Oe("click",function(){return o.resetStops()}),ne(2,"mat-icon"),Ye(3,"restart_alt"),ce()(),ne(4,"button",1),Ne(5,"translate"),Oe("click",function(){return o.zoomOnActiveRoute()}),ne(6,"mat-icon"),Ye(7,"frame_inspect"),ce()(),ne(8,"button",1),Ne(9,"translate"),Oe("click",function(){return o.copyDirectionsToClipboard()}),ne(10,"mat-icon"),Ye(11,"content_copy"),ce()(),ne(12,"button",1),Ne(13,"translate"),Oe("click",function(){return o.copyLinkToClipboard()}),ne(14,"mat-icon"),Ye(15,"link"),ce()(),ne(16,"button",2),Ne(17,"translate"),Oe("click",function(){return o.downloadDirections()}),ne(18,"mat-icon"),Ye(19,"download"),ce()()),n&2&&(ee("matTooltip",je(1,6,"igo.geo.directions.buttons.resetStops")),q(4),ee("matTooltip",je(5,8,"igo.geo.directions.buttons.zoomOnRoute")),q(4),ee("matTooltip",je(9,10,"igo.geo.directions.buttons.copyDirections")),q(4),ee("matTooltip",je(13,12,"igo.geo.directions.buttons.copyLink")),q(4),ee("disabled",o.downloadDirectionsBtnDisabled)("matTooltip",je(17,14,"igo.geo.directions.buttons.downloadDirections")))},dependencies:[bn,Cr,Er,Ar,jn,er,On,hn]})}return r})(),qAe=(()=>{class r{languageService;stopsStore;stopsFeatureStore;projection;coordRoundedDecimals=6;debounce=200;length=2;stopInputHasFocus=new it(!1);invalidKeys=["Control","Shift","Alt"];onMapClickEventKeys=[];stopWithHover;stopIsDragged=!1;constructor(e){this.languageService=e}get currentPosition(){return this.stopsFeatureStore?.map?.geolocationController?.position$?.value?.position&&this.stopsFeatureStore?.map?.geolocationController?.tracking}ngOnDestroy(){this.unlistenMapSingleClick()}onStopEnter(e){this.stopWithHover=e}onStopLeave(){this.stopWithHover=void 0}addStop(){WF(this.stopsStore)}getOptionText(e){if(e instanceof Object){let{meta:n}=e;return n?.title||""}return e}chooseOption(e,n){let o=e.option.value;if(o){let s,l=o.geometry;if(l.type==="Point")s=l.coordinates;else{let h=jR(o.geometry);s=[h.geometry.coordinates[0],h.geometry.coordinates[1]]}s&&(n.coordinates=s,n.text=o.meta.title,this.stopsStore.update(n))}}setStopText(e,n){this.unlistenMapSingleClick();let o=e.target.value;o.length===0?this.clearStopInput(n):this.validateSearchTerm(o)&&(n.text=o,this.stopsStore.update(n))}validateSearchTerm(e){let n=this.invalidKeys.indexOf(e)===-1,o=e.length>=this.length||e.length===0;return n&&o}getInputLabel(e){let{relativePosition:n,position:o}=e,s=n?this.languageService.translate.instant(`igo.geo.directions.input.${n}`):"";return n===gI.Intermediate?`${s} #${o}`:s}removeStop(e){Cpt(this.stopsStore,e)}clearStopInput(e){this.stopsStore.update({id:e.id,relativePosition:e.relativePosition,position:e.position})}useCurrentPosition(e){this.useCoordinatesAsStop(this.stopsFeatureStore.map.geolocationController.position$.value.position,e)}dropStop(e){this.moveStops(e.previousIndex,e.currentIndex)}moveStops(e,n){if(e!==n){let o=[...this.stopsStore.view.all()];QV(o,e,n),o.map((s,l)=>{s.relativePosition=U$(l,o.length-1),s.position=l}),this.stopsStore.updateMany(o),ere(this.stopsStore)}}onInputFocus(e){this.unlistenMapSingleClick(),this.stopInputHasFocus.emit(!0),this.listenMapSingleClick(e)}listenMapSingleClick(e){let n=this.stopsFeatureStore.layer.map.ol.once("singleclick",o=>{this.useCoordinatesAsStop(o.coordinate,e)});this.onMapClickEventKeys.push(n)}unlistenMapSingleClick(){this.onMapClickEventKeys.map(e=>{_h(e)}),this.onMapClickEventKeys=[]}useCoordinatesAsStop(e,n){let o=us(e,this.stopsFeatureStore.layer.map.projection,this.projection),s=$f(o,this.coordRoundedDecimals);n.text=P2(o,this.coordRoundedDecimals).join(", "),n.coordinates=s,this.stopsStore.update(n),setTimeout(()=>{this.stopInputHasFocus.emit(!1)},500)}static \u0275fac=function(n){return new(n||r)(ie(wn))};static \u0275cmp=gt({type:r,selectors:[["igo-directions-inputs"]],inputs:{stopsStore:"stopsStore",stopsFeatureStore:"stopsFeatureStore",projection:"projection",coordRoundedDecimals:"coordRoundedDecimals",debounce:"debounce",length:"length"},outputs:{stopInputHasFocus:"stopInputHasFocus"},standalone:!0,features:[yt],decls:10,vars:11,consts:[["auto","matAutocomplete"],["cdkDropList","",1,"stops-list",3,"cdkDropListDropped"],["class","stop",4,"ngFor","ngForOf"],[1,"prefix-actions"],["mat-icon-button","","color","primary",3,"click","disabled","matTooltip"],[1,"stop"],["cdkDragLockAxis","y","cdkDrag","",1,"stop-box",3,"touchenter","touchleave","mouseover","mouseleave","cdkDragStarted","cdkDragEnded"],["cdkDragHandle","","mat-icon-button","","color","primary",1,"swipe-vertical",3,"matTooltip"],[1,"igo-input-container"],["subscriptSizing","dynamic"],["type","text","matInput","",3,"focus","ngModelChange","keyup","keydown.enter","id","placeholder","ngModel","matAutocomplete"],["mat-icon-button","","matPrefix","","color","accent",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","matSuffix","","color","warn",3,"matTooltip","click",4,"ngIf"],[3,"optionSelected","displayWith"],[3,"label","disabled",4,"ngFor","ngForOf"],["class","delete-button","mat-icon-button","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","matPrefix","","color","accent",3,"click","matTooltip"],["mat-icon-button","","matSuffix","","color","warn",3,"click","matTooltip"],[3,"label","disabled"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-icon-button","","color","warn",1,"delete-button",3,"click","matTooltip"]],template:function(n,o){n&1&&(ne(0,"div",1),Oe("cdkDropListDropped",function(l){return o.dropStop(l)}),We(1,Alt,20,17,"div",2),Ne(2,"async"),ne(3,"div",3)(4,"button",4),Ne(5,"async"),Ne(6,"async"),Ne(7,"translate"),Oe("click",function(){return o.addStop()}),ne(8,"mat-icon"),Ye(9,"add_location_alt"),ce()()()()),n&2&&(q(),ee("ngForOf",je(2,3,o.stopsStore.view.all$())),q(3),ee("disabled",je(5,5,o.stopsStore.count$)!==je(6,7,o.stopsFeatureStore.count$)||o.stopIsDragged)("matTooltip",je(7,9,"igo.geo.directions.input.addStop")))},dependencies:[eCe,Ps,J1e,Wa,dc,Mg,pA,l_,pu,hu,$l,eh,sc,gm,s1,o1,lc,Ghe,gf,Er,Ar,gn,bn,Cr,jn,er,cc,Z1e,kr,On,hn],styles:["[_nghost-%COMP%]   .igo-input-container[_ngcontent-%COMP%]{display:flex;width:100%}[_nghost-%COMP%]   .igo-input-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .stops-list[_ngcontent-%COMP%]{padding:12px 10px}[_nghost-%COMP%]   .stops-list[_ngcontent-%COMP%], [_nghost-%COMP%]   .stop[_ngcontent-%COMP%]{display:flex;flex-flow:column;row-gap:12px}[_nghost-%COMP%]   .stop[_ngcontent-%COMP%]:hover   .swipe-vertical[_ngcontent-%COMP%], [_nghost-%COMP%]   .stop[_ngcontent-%COMP%]:hover   .delete-button[_ngcontent-%COMP%]{visibility:visible;display:block}[_nghost-%COMP%]   .swipe-vertical[_ngcontent-%COMP%]{visibility:hidden;cursor:move}[_nghost-%COMP%]   .delete-button[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .stop-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}[_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   .stops-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .stop-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]})}return r})(),YAe=(()=>{class r{languageService;cdRef;routesFeatureStore;stepsFeatureStore;activeRoute;routes;entities$$;constructor(e,n){this.languageService=e,this.cdRef=n}ngOnInit(){this.entities$$=this.routesFeatureStore.entities$.pipe(cr(200)).subscribe(e=>{let n=e.find(o=>o.properties.active);this.routes=e.map(o=>o.properties.directions),this.activeRoute=n?n.properties.directions:void 0,this.cdRef.detectChanges()})}ngOnDestroy(){this.entities$$.unsubscribe()}chooseRouteOption(){this.routesFeatureStore.entities$.value.map(e=>e.properties.active=!e.properties.active),this.routesFeatureStore.layer.ol.getSource().getFeatures().map(e=>e.set("active",!e.get("active")))}formatDistance(e){return qF(e)}formatDuration(e){return YF(e)}getTitleDurationAndDistance(){return this.formatDistance(this.activeRoute.distance)&&this.formatDuration(this.activeRoute.duration)?" ("+this.formatDistance(this.activeRoute.distance)+" - "+this.formatDuration(this.activeRoute.duration)+")":""}getFormattedStep(e,n){return ire(e,this.languageService,n===this.activeRoute.steps.length-1)}onLeaveList(){this.stepsFeatureStore.clear()}showStep(e,n=!1){this.showRouteSegmentGeometry(e,n)}showRouteSegmentGeometry(e,n=!1){let o=e.geometry.coordinates,s="vertex",m=new ao(o).transform("EPSG:4326",this.stepsFeatureStore.layer.map.projection).getCoordinates()[0],f=new Kn(m),g=new An({geometry:f}),y=new hs().writeGeometryObject(f,{featureProjection:this.stepsFeatureStore.layer.map.projection,dataProjection:this.stepsFeatureStore.layer.map.projection}),_=this.stepsFeatureStore.get(s),w=_?_.meta.revision:0,A={type:Qo,geometry:y,projection:this.stepsFeatureStore.layer.map.projection,properties:{id:s,step:e,type:nC.Vertex},meta:{id:s,revision:w+1},ol:g};this.stepsFeatureStore.update(A),n&&this.stepsFeatureStore.layer.map.viewController.zoomToExtent(g.getGeometry().getExtent())}static \u0275fac=function(n){return new(n||r)(ie(wn),ie(Ti))};static \u0275cmp=gt({type:r,selectors:[["igo-directions-results"]],inputs:{routesFeatureStore:"routesFeatureStore",stepsFeatureStore:"stepsFeatureStore"},standalone:!0,features:[yt],decls:1,vars:1,consts:[["class","igo-input-container",4,"ngIf"],[1,"igo-input-container"],[3,"matTooltip",4,"ngIf"],["mat-header","",1,"igo-route-title"],[3,"mouseleave"],[4,"ngFor","ngForOf"],[3,"matTooltip"],[3,"selectionChange","ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matListItem","","class","igo-steps step",3,"mouseenter","click",4,"ngIf"],["matListItem","",1,"igo-steps","step",3,"mouseenter","click"],["matListItemIcon","",3,"matTooltip"],["matListItemTitle","",1,"step-title",3,"matTooltip"],["matListItemLine","",4,"ngIf"],["matListItemLine",""]],template:function(n,o){n&1&&We(0,Plt,6,4,"div",0),n&2&&ee("ngIf",o.routes&&o.activeRoute)},dependencies:[gn,Wa,dc,Mg,ah,sh,lc,$l,sc,gm,Ps,cc,I_,Er,Ar,wu,AE,wf,Am,XY,Tm,jn,er,On,hn],styles:[".igo-input-container[_ngcontent-%COMP%]{width:100%;padding:20px 10px;box-sizing:border-box}.igo-input-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.igo-route-title[_ngcontent-%COMP%]{font-weight:700;margin:0}.step[_ngcontent-%COMP%]{cursor:pointer}"]})}return r})();function Sne(r){return Ah(r)?!1:r.dataSource.options.queryable===!0}function Dpt(r){let i=r.dataSource;return i.options.queryLayerFeatures!==void 0?i.options.queryLayerFeatures===!0:!0}function kpt(r){let i=r.get("_layer");return i===void 0?!1:Sne(i)&&Dpt(i)}var Ine=function(r){return r.DATE="date",r.TIME="time",r.DATETIME="datetime",r.YEAR="year",r}(Ine||{}),Tne=function(r){return r.CALENDAR="calendar",r.SLIDER="slider",r}(Tne||{}),eL=(()=>{class r{map;getMap(){return this.map}setMap(e){this.map=e}static \u0275fac=function(n){return new(n||r)};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Ane=class r{_converters;_renderers;constructor(){this._converters={},this._converters.esriPMS=r._convertEsriPMS,this._converters.esriSFS=r._convertEsriSFS,this._converters.esriSLS=r._convertEsriSLS,this._converters.esriSMS=r._convertEsriSMS,this._converters.esriTS=r._convertEsriTS,this._renderers={},this._renderers.uniqueValue=this._renderUniqueValue,this._renderers.simple=this._renderSimple,this._renderers.classBreaks=this._renderClassBreaks}static _convertPointToPixel(i){return i/.75}static _transformColor(i){return[i[0],i[1],i[2],i[3]/255]}static _getResolutionForScale(i,e){let o=Dp[e];return parseFloat(i)/(o*39.3701*96)}static _convertEsriTS(i){let e=r._transformAngle(i.angle),n=i.text!==void 0?i.text:void 0;return new Mn({text:new Pl({fill:new sr({color:r._transformColor(i.color)}),font:i.font.style+" "+i.font.weight+" "+i.font.size+" px "+i.font.family,textBaseline:i.verticalAlignment,textAlign:i.horizontalAlignment,offsetX:r._convertPointToPixel(i.xoffset),offsetY:r._convertPointToPixel(i.yoffset),rotation:e,text:n})})}static _convertEsriPMS(i){let e="data:"+i.contentType+";base64, "+i.imageData,n=r._transformAngle(i.angle);return new Mn({image:new Tu({src:e,rotation:n})})}static _convertEsriSFS(i){let e=new sr({color:r._transformColor(i.color)}),n=i.outline?r._convertOutline(i.outline):void 0;return new Mn({fill:e,stroke:n})}static _convertOutline(i){let e,n=r._transformColor(i.color);return i.style==="esriSLSDash"?e=[5]:i.style==="esriSLSDashDot"?e=[5,5,1,2]:i.style==="esriSLSDashDotDot"?e=[5,5,1,2,1,2]:i.style==="esriSLSDot"?e=[1,2]:i.style==="esriSLSNull"&&(n[3]=0),new ir({color:n,lineDash:e,width:r._convertPointToPixel(i.width)})}static _convertEsriSLS(i){return new Mn({stroke:r._convertOutline(i)})}static _transformAngle(i){if(i===0||i===void 0)return;let n=-(i*Math.PI/180)+Math.PI/2;return n<0?2*Math.PI+n:n}static _convertEsriSMS(i){let e=new sr({color:r._transformColor(i.color)}),n=i.outline?r._convertOutline(i.outline):void 0,o=r._convertPointToPixel(i.size)/2,s=r._transformAngle(i.angle);if(i.style==="esriSMSCircle")return new Mn({image:new yl({radius:o,fill:e,stroke:n})});if(i.style==="esriSMSCross")return new Mn({image:new $p({fill:e,stroke:n,points:4,radius:o,radius2:0,angle:0,rotation:s})});if(i.style==="esriSMSDiamond")return new Mn({image:new $p({fill:e,stroke:n,points:4,radius:o,rotation:s})});if(i.style==="esriSMSSquare")return new Mn({image:new $p({fill:e,stroke:n,points:4,radius:o,angle:Math.PI/4,rotation:s})});if(i.style==="esriSMSX")return new Mn({image:new $p({fill:e,stroke:n,points:4,radius:o,radius2:0,angle:Math.PI/4,rotation:s})});if(i.style==="esriSMSTriangle")return new Mn({image:new $p({fill:e,stroke:n,points:3,radius:o,angle:0,rotation:s})})}_convertLabelingInfo(i,e){let n=[];for(let o=0,s=i.length;o<s;++o){let l=i[o].labelExpression,h=l.substr(l.indexOf("[")+1,l.indexOf("]")-1),p=i[o].symbol,m=i[o].maxScale,f=i[o].minScale,g=null;m!==0&&(g=r._getResolutionForScale(m,e));let y=null;f!==0&&(y=r._getResolutionForScale(f,e));let _=this._converters[p.type].call(this,p);n.push(function(w,A){let k=!0;if(this.minResolution!==null&&this.maxResolution!==null?k=A<this.maxResolution&&A>=this.minResolution:this.minResolution!==null?k=A>=this.minResolution:this.maxResolution!==null&&(k=A<this.maxResolution),k){let R=w.get(this.field);return this.style.getText().setText(R),[this.style]}}.bind({minResolution:g,maxResolution:y,field:h,style:_}))}return n}_renderSimple(i){let e=this._converters[i.symbol.type].call(this,i.symbol);return()=>[e]}_renderClassBreaks(i){let e=i.defaultSymbol,n=this._converters[e.type].call(this,e),o=i.field,s=[];for(let l=0,h=i.classBreakInfos.length;l<h;++l){let p=i.classBreakInfos[l],m;p.classMinValue===null||p.classMinValue===void 0?l===0?m=i.minValue:m=i.classBreakInfos[l-1].classMaxValue:m=p.classMinValue;let f=p.classMaxValue,g=p.symbol,y=this._converters[g.type].call(this,g);s.push({min:m,max:f,style:y})}return l=>{let h=l.get(o);for(let p=0,m=s.length;p<m;++p){let f;if(p===0?f=h>=s[p].min&&h<=s[p].max:f=h>s[p].min&&h<=s[p].max,f)return[s[p].style]}return[n]}}_renderUniqueValue(i){let e=i.defaultSymbol,n=[];e&&(n=[this._converters[e.type].call(this,e)]);let o=i.field1,s=i.uniqueValueInfos,l=this;return(()=>{let h={};for(let p=0,m=s.length;p<m;++p){let f=s[p],g=f.symbol;h[f.value]=[l._converters[g.type].call(l,g)]}return p=>{let m=h[p.get(o)];return m||n}})()}generateStyle(i,e){let n=i.drawingInfo,o=[],s=this._renderers[n.renderer.type].call(this,n.renderer);if(s!==void 0&&o.push(s),i.labelingInfo){let l=this._convertLabelingInfo(i.labelingInfo,e);o=o.concat(l)}return o.length===1?o[0]:(l,h)=>{let p=[];for(let m=0,f=o.length;m<f;++m){let g=o[m].call(null,l,h);g&&(p=p.concat(g))}return p}}},Y$=function(r){return r.wms="wms",r.wmts="wmts",r.arcgisrest="esriJSON",r.imagearcgisrest="esriJSON",r.tilearcgisrest="esriJSON",r}(Y$||{});var sy=(()=>{class r{http;mapService;parsers={wms:new eV,wmts:new tV,esriJSON:new Nv};constructor(e,n){this.http=e,this.mapService=n}getWMSOptions(e){let n=e.url,o=e.params.VERSION;return this.getCapabilities("wms",n,o).pipe($t(s=>s?this.parseWMSOptions(e,s):void 0))}getWMTSOptions(e){let n=e.url,o=e.version;return this.getCapabilities("wmts",n,o).pipe($t(l=>l?this.parseWMTSOptions(e,l):void 0))}getCartoOptions(e){let n="https://"+e.account+".carto.com/api/v2/viz/"+e.mapId+"/viz.json";return this.http.jsonp(n,"callback").pipe($t(o=>this.parseCartoOptions(e,o)))}getArcgisOptions(e){let n=e.url+"/"+e.layer+"?f=json",o=this.getCapabilities("arcgisrest",e.url),s=this.http.get(n);return Ac([s,o]).pipe($t(l=>this.parseArcgisOptions(e,l[0],l[1])))}getImageArcgisOptions(e){let n=e.url+"/"+e.layer+"?f=json",o=e.url+"/legend?f=json",s=this.getCapabilities("imagearcgisrest",e.url),l=this.http.get(n),h=this.http.get(o).pipe($t(p=>p),Fn(p=>(console.log("No legend associated with this Image Service"),Vt(p))));return Ac([l,h,s]).pipe($t(p=>this.parseTileOrImageArcgisOptions(e,p[0],p[1],p[2])))}getTileArcgisOptions(e){let n=e.url+"/"+e.layer+"?f=json",o=e.url+"/legend?f=json",s=this.getCapabilities("tilearcgisrest",e.url),l=this.http.get(n),h=this.http.get(o).pipe($t(p=>p),Fn(p=>(console.log("No legend associated with this Tile Service"),Vt(p))));return Ac([l,h,s]).pipe($t(p=>this.parseTileOrImageArcgisOptions(e,p[0],p[1],p[2])))}getCapabilities(e,n,o){let s=new zs({fromObject:{request:"GetCapabilities",service:e.toUpperCase(),version:o||"1.3.0",_i:"true"}}),l;return Y$[e]==="esriJSON"?l=this.http.get(n+"?f=json"):l=this.http.get(n,{params:s,responseType:"text"}),l.pipe($t(h=>{if(Y$[e]==="esriJSON")return h;if(String(h).toLowerCase().includes("serviceexception")&&String(h).toLowerCase().includes("access denied"))throw{error:{message:"Service error getCapabilities: Access is denied"}};return this.parsers[e].read(h)}),Fn(h=>{throw typeof h.error<"u"&&(h.error.caught=!0),h}))}parseWMSOptions(e,n){let o=e.params.LAYERS,s=this.findDataSourceInCapabilities(n.Capability.Layer,o);if(!s)throw{error:{message:"Layer not found"}};let l=s.DataURL?s.DataURL[0]:void 0,h=s.Abstract?s.Abstract:void 0,p=s.KeywordList?s.KeywordList:void 0,m=s.queryable,f=this.getTimeFilter(s),g=f&&Object.keys(f).length>0,y=s.Style?this.getStyle(s.Style):void 0,_=!0;s.EX_GeographicBoundingBox?s.EX_GeographicBoundingBox.forEach(($,H)=>{H<2&&($>180||$<-180)&&(_=!1),H>=2&&($>90||$<-90)&&(_=!1)}):_=!1;let w=_?Su(s.EX_GeographicBoundingBox,"EPSG:4326",this.mapService.getMap().projection):void 0,A,k=[ry.GEOJSON,ry.GEOJSON2,ry.GML3,ry.GML2,ry.JSON,ry.HTML];for(let $ of k)if(n.Capability.Request.GetFeatureInfo.Format.indexOf($)!==-1){let H=Object.keys(ry).find(oe=>ry[oe]===$);A=Od[H];break}A||(m=!1);let R=Ln.removeUndefined({_layerOptionsFromSource:{title:s.Title,maxResolution:Th(s.MaxScaleDenominator),minResolution:Th(s.MinScaleDenominator),extent:w,metadata:{url:l?l.OnlineResource:void 0,extern:l?!0:void 0,abstract:h,keywordList:p},legendOptions:y},queryable:m,queryFormat:A,timeFilter:g?f:void 0,timeFilterable:g?!0:void 0,minDate:g?f.min:void 0,maxDate:g?f.max:void 0,stepDate:g?f.step:void 0});return Ln.mergeDeep(R,e)}parseWMTSOptions(e,n){let o=n.Contents.Layer.find(p=>p.Identifier===e.layer),s=Owe(n,e),l=Object.assign(s,e),h=Ln.removeUndefined({_layerOptionsFromSource:{title:o.Title}});return Ln.mergeDeep(h,l)}parseCartoOptions(e,n){let o=[],s=n.layers[1].options.layer_definition;s.layers.forEach(h=>{o.push({type:h.type.toLowerCase(),options:h.options,legend:h.legend})});let l=Ln.removeUndefined({config:{version:s.version,layers:o}});return Ln.mergeDeep(l,e)}parseArcgisOptions(e,n,o){let s=n.name,l;n.drawingInfo?.renderer?l=n.drawingInfo.renderer:l=void 0;let h;if(n.drawingInfo){let _=new Ane,w=n.units==="esriMeters"?"m":"degrees";h=_.generateStyle(n,w)}let p=new XS({target:n.copyrightText}),m,f;if(n.timeInfo){let _=n.timeInfo.timeExtent;m=_[0]+","+_[1];let w=new Date;w.setTime(_[0]);let A=new Date;A.setTime(_[1]),f={min:w.toUTCString(),max:A.toUTCString(),range:!0,type:Ine.DATETIME,style:Tne.CALENDAR}}let g=Object.assign({},{style:h,LAYERS:e.layer?"show:"+e.layer:void 0,time:m}),y=Ln.removeUndefined({params:g,_layerOptionsFromSource:{title:s,minResolution:Th(n.maxScale),maxResolution:Th(n.minScale),metadata:{extern:!1,abstract:n.description||o.serviceDescription}},legendInfo:l,timeFilter:f,sourceFields:n.fields,queryTitle:n.displayField});return y.attributions=p,Ln.mergeDeep(y,e)}parseTileOrImageArcgisOptions(e,n,o,s){let l=n.name,h=o.layers?o.layers.find(_=>_.layerName===l):void 0,p=new XS({target:n.copyrightText}),m,f;if(n.timeInfo){let _=n.timeInfo.timeExtent;m=_[0]+","+_[1];let w=new Date;w.setTime(_[0]);let A=new Date;A.setTime(_[1]),f={min:w.toUTCString(),max:A.toUTCString(),range:!0,type:Ine.DATETIME,style:Tne.CALENDAR}}let g=Object.assign({},{LAYERS:e.layer?"show:"+e.layer:void 0,time:m}),y=Ln.removeUndefined({params:g,_layerOptionsFromSource:{title:l,minResolution:Th(n.maxScale),maxResolution:Th(n.minScale),metadata:{extern:!1,abstract:n.description||s.serviceDescription}},legendInfo:h,timeFilter:f,sourceFields:n.fields,queryTitle:n.displayField});return y.attributions=p,Ln.mergeDeep(y,e)}findDataSourceInCapabilities(e,n){if(Array.isArray(e)){let o;return e.find(s=>(o=this.findDataSourceInCapabilities(s,n),o!==void 0),this),o}else return e.Layer?this.findDataSourceInCapabilities(e.Layer,n):e.Name&&e.Name===n?e:void 0}getTimeFilter(e){let n;if(e.Dimension){let o={};if(n=e.Dimension[0],n.values){let s=n.values.split("/");o.min=s[0]!==void 0?s[0]:void 0,o.max=s[1]!==void 0?s[1]:void 0,o.step=s[2]!==void 0?s[2]:void 0}return n.default&&(o.value=n.default),o}}getStyle(e){return{stylesAvailable:e.map(s=>({name:s.Name,title:s.Title})).filter((s,l,h)=>h.findIndex(p=>p.name===s.name)===l)}}static \u0275fac=function(n){return new(n||r)(xe(dr),xe(eL))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return po([Cp({maxCacheCount:20}),xo("design:type",Function),xo("design:paramtypes",[Object]),xo("design:returntype",si)],r.prototype,"getArcgisOptions",null),po([Cp({maxCacheCount:20}),xo("design:type",Function),xo("design:paramtypes",[Object]),xo("design:returntype",si)],r.prototype,"getImageArcgisOptions",null),po([Cp({maxCacheCount:20}),xo("design:type",Function),xo("design:paramtypes",[Object]),xo("design:returntype",si)],r.prototype,"getTileArcgisOptions",null),po([Cp({maxCacheCount:20}),xo("design:type",Function),xo("design:paramtypes",[String,String,String]),xo("design:returntype",si)],r.prototype,"getCapabilities",null),r})(),P$=function(r){return r.TITLE="title",r.ABSTRACT="abstract",r.CUSTOM="custom",r}(P$||{}),Ene=class extends Cx{id;loaded=0;loading=0;source;messageService;constructor(i,e){super(),this.source=i.options.source.ol,this.id=Gs(),this.messageService=e}watch(){this.source.on("imageloadstart",i=>this.handleLoadStart(i)),this.source.on("imageloadend",i=>this.handleLoadEnd(i)),this.source.on("imageloaderror",i=>this.handleLoadEnd(i)),this.source.on("imageloaderror",i=>this.handleLoadError(i))}unwatch(){this.source.un("imageloadstart",i=>this.handleLoadStart(i)),this.source.un("imageloadend",i=>this.handleLoadEnd(i)),this.source.un("imageloaderror",i=>this.handleLoadEnd(i)),this.source.un("imageloaderror",i=>this.handleLoadError(i))}handleLoadStart(i){i.image.__watchers__||(i.image.__watchers__=[]),i.image.__watchers__.push(this.id),this.loading+=1,this.status=Ho.Working}handleLoadEnd(i){if(!i.image.__watchers__)return;let e=i.image.__watchers__.indexOf(this.id);if(e<0)return;i.image.__watchers__.splice(e,1),this.loaded+=1;let n=this.loading;this.loaded>=n&&n===this.loading&&(this.status=Ho.Done,this.loaded=this.loading=0)}handleLoadError(i){i.image.__watchers__&&(this.messageService.error("igo.geo.dataSource.unavailable","igo.geo.dataSource.unavailableTitle",void 0,{value:i.target.params_.LAYERS}),this.loaded=-1,this.loading=0,this.status=Ho.Error)}},Mne=class extends B2{messageService;authInterceptor;type="raster";watcher;constructor(i,e,n){super(i,e,n),this.messageService=e,this.authInterceptor=n,this.watcher=new Ene(this,this.messageService),this.status$=this.watcher.status$,this.status$.subscribe(o=>{o===0&&(this.olLoadingProblem=!0)})}createOlLayer(){let i=Object.assign({},this.options,{source:this.options.source.ol}),e=new jSe(i);return this.authInterceptor&&e.getSource().setImageLoadFunction((n,o)=>{this.customLoader(n,o,this.authInterceptor,this.messageService)}),e}init(i){i===void 0?this.watcher.unsubscribe():this.watcher.subscribe(()=>{}),super.init(i)}remove(){this.watcher.unsubscribe(),super.remove()}customLoader(i,e,n,o){let s=new XMLHttpRequest,l=n.alterUrlWithKeyAuth(e),h=e;if(l&&(h=l),s.open("GET",h),!n.interceptXhr(s,h)){s.abort(),i.getImage().src=h;return}s.responseType="arraybuffer",s.onload=function(){let m=new Uint8Array(this.response);new TextDecoder().decode(m).includes("ServiceExceptionReport")&&o.error("igo.geo.dataSource.optionsApiUnavailable","igo.geo.dataSource.unavailableTitle");let g=new Blob([m],{type:"image/png"}),_=window.URL.createObjectURL(g);i.getImage().src=_},s.send()}},K$=class extends Cx{id;loaded=0;loading=0;source;constructor(i){super(),this.source=i.options.source.ol,this.id=Gs()}watch(){this.source.on("tileloadstart",i=>this.handleLoadStart(i)),this.source.on("tileloadend",i=>this.handleLoadEnd(i)),this.source.on("tileloaderror",i=>this.handleLoadEnd(i))}unwatch(){this.source.un("tileloadstart",i=>this.handleLoadStart(i)),this.source.un("tileloadend",i=>this.handleLoadEnd(i)),this.source.un("tileloaderror",i=>this.handleLoadEnd(i))}handleLoadStart(i){i.tile.__watchers__||(i.tile.__watchers__=[]),i.tile.__watchers__.push(this.id),this.loading+=1,this.status=Ho.Working}handleLoadEnd(i){if(!i.tile.__watchers__)return;let e=i.tile.__watchers__.indexOf(this.id);if(e<0)return;i.tile.__watchers__.splice(e,1),this.loaded+=1;let n=this.loading;this.loaded>=n&&n===this.loading&&(this.status=Ho.Done,this.loaded=this.loading=0)}},Dne=class extends B2{messageService;authInterceptor;type="raster";watcher;constructor(i,e,n){super(i,e),this.messageService=e,this.authInterceptor=n,this.watcher=new K$(this),this.status$=this.watcher.status$}createOlLayer(){let i=Object.assign({},this.options,{source:this.options.source.ol}),e=new $Se(i);return e.getSource().setTileLoadFunction((o,s)=>{this.customLoader(o,s,this.authInterceptor)}),e}customLoader(i,e,n){let o=n.alterUrlWithKeyAuth(e),s=e;o&&(s=o),i.getImage().src=s}init(i){i===void 0?this.watcher.unsubscribe():this.watcher.subscribe(()=>{}),super.init(i)}remove(){this.watcher.unsubscribe(),super.remove()}},Z$=class extends B2{messageService;authInterceptor;type="vector";watcher;constructor(i,e,n){super(i,e,n),this.messageService=e,this.authInterceptor=n,this.watcher=new K$(this),this.status$=this.watcher.status$}createOlLayer(){let i=Object.assign({},this.options,{source:this.options.source.ol}),e=new hF(i);return e.getSource().setTileLoadFunction((o,s)=>{let l=this.customLoader(s,o.getFormat(),this.authInterceptor,o.onLoad.bind(o));l&&o.setLoader(l)}),e}customLoader(i,e,n,o,s){return(l,h,p)=>{let m=new XMLHttpRequest,f=i;if(typeof i!="function"){let g=n.alterUrlWithKeyAuth(i);g&&(f=g)}else f=i(l,h,p);m.open("GET",f),n&&n.interceptXhr(m,f),e.getType()==="arraybuffer"&&(m.responseType="arraybuffer"),m.onload=()=>{if(!m.status||m.status>=200&&m.status<300){let g=e.getType(),y;g==="json"||g==="text"?y=m.responseText:g==="xml"?(y=m.responseXML,y||(y=new DOMParser().parseFromString(m.responseText,"application/xml"))):g==="arraybuffer"&&(y=m.response),y?o.call(this,e.readFeatures(y,{extent:l,featureProjection:p}),e.readProjection(y)):s.call(this)}else s.call(this)},m.onerror=()=>{s.call(this)},m.send()}}init(i){i===void 0?this.watcher.unsubscribe():this.watcher.subscribe(()=>{}),super.init(i)}remove(){this.watcher.unsubscribe(),super.remove()}},dAe="local-group_",kne=class r extends Cne{children;options;parent;expanded;isInResolutionsRange$$;isInResolutionsRange$=new mt(!0);get saveableOptions(){return li(Xe({},super.saveableOptions),{id:String(this.options.id).includes(dAe)?null:this.options.id,type:this.options.type,children:[...this.children].map(i=>i.saveableOptions).filter(Boolean),expanded:this.expanded})}get descendants(){return this._getDescendants()}get descendantsLevel(){return this._getDescendantsLevel()}constructor(i,e){super(e),this.children=i,this.options=e,this.children=i??[],this.expanded=e.expanded===void 0?!1:e.expanded,e.id||(e.id=dAe+Gs()),this.ol=this.createOlLayer(),super.afterCreated()}init(i){super.init(i),this.children.forEach(e=>e.init(i))}add(i){super.add(i),this.setChildrenObserver(),this.children.forEach(e=>{e.add(this)})}addChild(...i){this.ol.getLayers().extend(i.map(e=>e.ol)),i.forEach(e=>{this.hasChildren(e)||(e.addParent(this),this.children.push(e))}),this.setChildrenObserver()}remove(){super.remove(),this.children.forEach(i=>i.remove())}removeChild(i){this.ol.getLayers().remove(i.ol);let e=this.children.indexOf(i);e>=0&&this.children.splice(e,1),i.parent=null,i.options.parentId=null,this.setChildrenObserver()}isDescendant(i){return this._getDescendants().some(e=>e.id===i.id)}setChildrenObserver(){if(this.isInResolutionsRange$$?.unsubscribe(),!this.children)return;let i=this.children.map(e=>e.isInResolutionsRange$);this.isInResolutionsRange$$=ts(i).subscribe(e=>{this.isInResolutionsRange=e.some(n=>n)})}createOlLayer(){return new r0({properties:{title:this.title}})}hasChildren(i){return this.children.some(e=>e.id===i.id)}_getDescendants(i=this.children){return i.reduce((e,n)=>n instanceof r?e.concat(n,...this._getDescendants(n.children)):e.concat(n),[])}_getDescendantsLevel(i=this.children){return i.reduce((e,n)=>{if(n instanceof r){e=e+1;let o=this._getDescendantsLevel(n.children);return e+o}return e},0)}},KAe=(()=>{class r{capabilitiesService;languageService;configService;http;cdRef;updateLegendOnResolutionChange=!1;legendItems$=new mt([]);state$$;styles;currentStyle;scale=void 0;view=void 0;renderedLegends;imagesHeight={};layer;getLegend=!0;constructor(e,n,o,s,l){this.capabilitiesService=e,this.languageService=n,this.configService=o,this.http=s,this.cdRef=l}ngOnInit(){let e=this.layer.legend;this.styles=this.listStyles();let n=this.layer.options.source.options;if(n&&n.params&&n.params.STYLES?this.currentStyle=this.styles.find(o=>o.name===n.params.STYLES).name:e?this.styles&&this.styles.length>1&&(this.currentStyle=e[0].currentStyle):this.styles&&this.styles.length>1&&(this.currentStyle=this.styles[0].name),typeof this.layer.options.legendOptions<"u"&&this.layer.options.legendOptions.display===!1?e=[]:e=this.layer.dataSource.getLegend(this.currentStyle,this.view),this.updateLegendOnResolutionChange||n.contentDependentLegend){let o=this.layer.map.viewController.state$;this.state$$=o.subscribe(()=>this.onViewControllerStateChange())}else if(e&&e.length!==0){this.legendItems$.next(e);for(let o of e)this.getLegendGraphic(o)}}ngOnDestroy(){this.state$$!==void 0&&this.state$$.unsubscribe()}getLegendGraphic(e){e.url&&new TE(this.http,this.configService).transform(e.url).pipe(Fn(o=>{if(o.error)return o.error.caught=!0,this.getLegend=!1,this.cdRef.detectChanges(),o})).subscribe(o=>{let s=this.legendItems$.value.findIndex(h=>h.title===e.title),l=o;this.legendItems$.value[s].imgGraphValue=l,this.cdRef.detectChanges()})}toggleLegendItem(e,n){n.collapsed=e}transfertToggleLegendItem(e){let n=e,o=this.layer.legend;for(let s=0;s<o.length;s++)n[s].collapsed=o[s].collapsed;return n}computeItemTitle(e){let n=this.layer.dataSource.options;if(n.type!=="wms")return Vt(e.title);let o=n.params.LAYERS.split(","),s=JSON.parse(JSON.stringify(n));return s.params.LAYERS=o.find(l=>l===e.title),this.capabilitiesService.getWMSOptions(s).pipe($t(l=>l._layerOptionsFromSource.title))}onViewControllerStateChange(){this.view={resolution:this.layer.map.viewController.getResolution(),extent:this.layer.map.viewController.getExtent(),projection:this.layer.map.viewController.getOlProjection().getCode(),scale:this.layer.map.viewController.getScale(),size:this.layer.map.ol.getSize()},this.updateLegend()}updateLegend(){let e=this.layer.dataSource.getLegend(this.currentStyle,this.view);if(this.layer.legend&&this.layer.legend.length>1&&(e=this.transfertToggleLegendItem(e)),this.layer.legend=e,!(e.length===0&&this.legendItems$.value.length===0)){this.legendItems$.next(e);for(let n of this.legendItems$.value)this.getLegendGraphic(n)}}listStyles(){let e=this.layer.options;if(e&&e.legendOptions){let s=[{name:"",title:this.languageService.translate.instant("igo.geo.layer.legend.default")}];return e.legendOptions.stylesAvailable&&(s=s.concat(e.legendOptions.stylesAvailable.filter(l=>l.name.normalize("NFD").replace(/[\u0300-\u036f]/gi,"")!=="default"&&l.name.normalize("NFD").replace(/[\u0300-\u036f]/gi,"")!=="defaut"))),s.filter(l=>!l.title).map(l=>l.title=l.name),s.map(l=>l.title=l.title.charAt(0).toUpperCase()+l.title.slice(1).replace(/_/g," ")),s}}onChangeStyle(){this.updateLegend();let e="";this.layer.dataSource instanceof Bm&&(this.layer.dataSource.ol.getParams().LAYERS.split(",").map(()=>e+=this.currentStyle+","),e=e.slice(0,-1),this.layer.dataSource.ol.updateParams({STYLES:e}))}onLoadImage(e){let n;this.renderedLegends.length===1?n=this.renderedLegends.first.nativeElement:n=this.renderedLegends.find(o=>o.nativeElement.id===e).nativeElement,this.imagesHeight[e]=n.height}static \u0275fac=function(n){return new(n||r)(ie(sy),ie(wn),ie(Ri),ie(dr),ie(Ti))};static \u0275cmp=gt({type:r,selectors:[["igo-layer-legend"]],viewQuery:function(n,o){if(n&1&&Ni(Flt,5),n&2){let s;Yt(s=Kt())&&(o.renderedLegends=s)}},inputs:{updateLegendOnResolutionChange:"updateLegendOnResolutionChange",layer:"layer"},standalone:!0,features:[yt],decls:2,vars:3,consts:[["noItems",""],["renderedLegends",""],["legend",""],["renderedLegend",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[1,"igo-layer-legend",3,"ngClass"],["subscriptSizing","dynamic",4,"ngIf"],["id","legend-toggle","matListItemIcon","","igoCollapse","",1,"igo-chevron",3,"toggle","target","collapsed"],["matListItemTitle",""],["subscriptSizing","dynamic"],["tooltip-position","below","matTooltipShowDelay","500",3,"ngModelChange","selectionChange","matTooltip","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"ngStyle","innerHTML",4,"ngIf"],["igoImageError","",3,"hideError","id","src","alt","load",4,"ngIf"],["igoImageError","",3,"load","hideError","id","src","alt"],[3,"ngStyle","innerHTML"]],template:function(n,o){n&1&&(We(0,Klt,4,2,"ng-container",4),Ne(1,"async")),n&2&&ee("ngIf",je(1,1,o.legendItems$))},dependencies:[gn,Ps,wu,wf,Am,Tm,jn,er,uF,qr,Wa,dc,ah,sh,lc,Er,Ar,$l,sc,gm,cc,CP,e_,kr,On,hn,wP],styles:['[_nghost-%COMP%]   .igo-layer-legend.with-title[_ngcontent-%COMP%]{padding-left:18px}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}[_nghost-%COMP%]   img[_ngcontent-%COMP%]:after{content:" ";position:relative;height:17px;float:left;width:17px;top:-3px;right:19px;background-color:#fff;border:3px solid #f3f3f3;border-radius:50%;animation:2s linear infinite _ngcontent-%COMP%_spin}@-moz-document url-prefix(){-shadowcsshost-no-combinator img:after{margin-left:19px}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}mat-form-field[_ngcontent-%COMP%]{margin-bottom:4px}'],changeDetection:0})}return r})();var KF=class{},oU=(()=>{class r{capabilitiesService;optionsService;wfsDataSourceService;languageService;messageService;authInterceptor;datasources$=new mt([]);constructor(e,n,o,s,l,h){this.capabilitiesService=e,this.optionsService=n,this.wfsDataSourceService=o,this.languageService=s,this.messageService=l,this.authInterceptor=h}createAsyncDataSource(e,n){if(!e.type)throw console.error(e),new Error("Datasource needs a type");let o;switch(e.type.toLowerCase()){case"osm":o=this.createOSMDataSource(e);break;case"vector":o=this.createFeatureDataSource(e);break;case"wfs":o=this.createWFSDataSource(e);break;case"wms":{let s=e;Ln.removeDuplicateCaseInsensitive(s.params),o=this.createWMSDataSource(s,n);break}case"wmts":o=this.createWMTSDataSource(e);break;case"xyz":o=this.createXYZDataSource(e);break;case"tiledebug":o=this.createTileDebugDataSource(e);break;case"carto":o=this.createCartoDataSource(e);break;case"arcgisrest":o=this.createArcGISRestDataSource(e,n);break;case"imagearcgisrest":o=this.createArcGISRestImageDataSource(e,n);break;case"websocket":o=this.createWebSocketDataSource(e);break;case"mvt":o=this.createMVTDataSource(e);break;case"tilearcgisrest":o=this.createTileArcGISRestDataSource(e,n);break;case"cluster":o=this.createClusterDataSource(e);break;default:throw console.error(e),new Error("Invalid datasource type")}return this.datasources$.next(this.datasources$.value.concat([o])),o}createOSMDataSource(e){return new si(n=>n.next(new F$(e)))}createFeatureDataSource(e){return new si(n=>n.next(new As(e)))}createWebSocketDataSource(e){return new si(n=>n.next(new B$(e)))}createWFSDataSource(e){return new si(n=>n.next(new pb(e,this.wfsDataSourceService,this.authInterceptor)))}createWMSDataSource(e,n){let o=[];return e.optionsFromCapabilities&&window.navigator.onLine&&o.push(this.capabilitiesService.getWMSOptions(e).pipe(Fn(s=>{throw this.messageService.error("igo.geo.dataSource.unavailable","igo.geo.dataSource.unavailableTitle",void 0,{value:e.params.LAYERS}),s}))),this.optionsService&&e.optionsFromApi&&window.navigator.onLine&&o.push(this.optionsService.getWMSOptions(e,n).pipe(Fn(s=>(s.error.toDisplay=!0,s.error.title=this.languageService.translate.instant("igo.geo.dataSource.unavailableTitle"),s.error.message=this.languageService.translate.instant("igo.geo.dataSource.optionsApiUnavailable"),Vt({}))))),o.push(Vt(e)),Ac(o).pipe($t(s=>{let l=s.reduce((h,p)=>Ln.mergeDeep(h,p));return new Bm(l,this.wfsDataSourceService)}),Fn(()=>Vt(void 0)))}createWMTSDataSource(e){return e.optionsFromCapabilities&&window.navigator.onLine?this.capabilitiesService.getWMTSOptions(e).pipe($t(n=>n?new UF(n):void 0),Fn(()=>(this.messageService.error("igo.geo.dataSource.unavailable","igo.geo.dataSource.unavailableTitle",void 0,{value:e.layer}),Vt(void 0)))):new si(n=>n.next(new UF(e)))}createXYZDataSource(e){return new si(n=>n.next(new L$(e)))}createTileDebugDataSource(e){return new si(n=>n.next(new N$(e)))}createCartoDataSource(e){return e.mapId?this.capabilitiesService.getCartoOptions(e).pipe($t(n=>new N2(n))):new si(n=>n.next(new N2(e)))}createArcGISRestDataSource(e,n){let o=[];return window.navigator.onLine&&o.push(this.capabilitiesService.getArcgisOptions(e).pipe(Fn(s=>{throw this.messageService.error("igo.geo.dataSource.unavailable","igo.geo.dataSource.unavailableTitle",void 0,{value:e.layer}),s}))),this.optionsService&&e.optionsFromApi&&window.navigator.onLine&&o.push(this.optionsService.getArcgisRestOptions(e,n).pipe(Fn(s=>(s.error.toDisplay=!0,s.error.title=this.languageService.translate.instant("igo.geo.dataSource.unavailableTitle"),s.error.message=this.languageService.translate.instant("igo.geo.dataSource.optionsApiUnavailable"),Vt({}))))),o.push(Vt(e)),Ac(o).pipe($t(s=>{let l=s.reduce((h,p)=>Ln.mergeDeep(h,p));return new zF(l)}),Fn(()=>Vt(void 0)))}createArcGISRestImageDataSource(e,n){let o=[];return window.navigator.onLine&&o.push(this.capabilitiesService.getImageArcgisOptions(e).pipe(Fn(s=>{throw this.messageService.error("igo.geo.dataSource.unavailable","igo.geo.dataSource.unavailableTitle",void 0,{value:e.params.LAYERS}),s}))),this.optionsService&&e.optionsFromApi&&window.navigator.onLine&&o.push(this.optionsService.getArcgisRestOptions(e,n).pipe(Fn(s=>(s.error.toDisplay=!0,s.error.title=this.languageService.translate.instant("igo.geo.dataSource.unavailableTitle"),s.error.message=this.languageService.translate.instant("igo.geo.dataSource.optionsApiUnavailable"),Vt({}))))),o.push(Vt(e)),Ac(o).pipe($t(s=>{let l=s.reduce((h,p)=>Ln.mergeDeep(h,p));return new GF(l)}),Fn(()=>Vt(void 0)))}createTileArcGISRestDataSource(e,n){let o=[];return window.navigator.onLine&&o.push(this.capabilitiesService.getImageArcgisOptions(e).pipe(Fn(s=>{throw this.messageService.error("igo.geo.dataSource.unavailable","igo.geo.dataSource.unavailableTitle",void 0,{value:e.params.LAYERS}),s}))),this.optionsService&&e.optionsFromApi&&window.navigator.onLine&&o.push(this.optionsService.getArcgisRestOptions(e,n).pipe(Fn(s=>(s.error.toDisplay=!0,s.error.title=this.languageService.translate.instant("igo.geo.dataSource.unavailableTitle"),s.error.message=this.languageService.translate.instant("igo.geo.dataSource.optionsApiUnavailable"),Vt({}))))),o.push(Vt(e)),Ac(o).pipe($t(s=>{let l=s.reduce((h,p)=>Ln.mergeDeep(h,p));return new HF(l)}),Fn(()=>Vt(void 0)))}createMVTDataSource(e){return new si(n=>n.next(new j$(e)))}createClusterDataSource(e){return new si(n=>n.next(new jm(e)))}static \u0275fac=function(n){return new(n||r)(xe(sy),xe(KF,8),xe(lpt),xe(wn),xe(nl),xe(sO))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),ZAe=(()=>{class r{ngxIndexedDBService;dbName="layerData";constructor(e){this.ngxIndexedDBService=e}update(e){let n=new Dt;return this.ngxIndexedDBService?.getByID(this.dbName,e.layerId).pipe(So(),ul(o=>o?this.customUpdate(e):this.ngxIndexedDBService?.add(this.dbName,e))).subscribe(o=>{n.next(o),n.complete()}),n}customUpdate(e){let n=new Dt;return(this.ngxIndexedDBService?.deleteByKey(this.dbName,e.layerId)).pipe(ul(s=>s?this.ngxIndexedDBService?.add(this.dbName,e):Vt(void 0))).subscribe(s=>{s&&n.next(s),n.complete()}),n}getByID(e){return this.ngxIndexedDBService?.getByID(this.dbName,e)}deleteByKey(e){return this.ngxIndexedDBService?.deleteByKey(this.dbName,e)}getAll(){return this.ngxIndexedDBService?.getAll(this.dbName)}static \u0275fac=function(n){return new(n||r)(xe(y$,8))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),nre=(()=>{class r{ngxIndexedDBService;dbName="geoData";collisionsMap=new Map;_newData=0;compression=new l4;constructor(e){this.ngxIndexedDBService=e}update(e,n,o,s,l){if(!o)return;let h=!1,p=new Dt,m=Vt(o);o instanceof Blob&&(m=this.compression.compressBlob(o),h=!0);let f;return m.pipe(So(),ul(g=>(f={url:e,regionID:n,object:g,compressed:h,insertSource:s,insertEvent:l},this.ngxIndexedDBService?.getByID(this.dbName,e))),ul(g=>{if(g){let y=g.regionID;if(y!==n){let _=this.collisionsMap.get(y);_!==void 0?(_.push(g.url),this.collisionsMap.set(y,_)):this.collisionsMap.set(y,[g.url])}return this.customUpdate(f)}else return this._newData++,this.ngxIndexedDBService?.add(this.dbName,f)})).subscribe(g=>{p.next(g),p.complete()}),p}customUpdate(e){let n=new Dt;return(this.ngxIndexedDBService?.deleteByKey(this.dbName,e.url)).pipe(ul(s=>s?this.ngxIndexedDBService?.add(this.dbName,e):Vt(void 0))).subscribe(s=>{s&&n.next(s),n.complete()}),n}get(e){return this.ngxIndexedDBService?.getByID(this.dbName,e).pipe($t(n=>{if(n){let o=n.object;return n.compressed?this.compression.decompressBlob(o):o}}))}getByID(e){return this.ngxIndexedDBService?.getByID(this.dbName,e)}deleteByKey(e){return this.ngxIndexedDBService?.deleteByKey(this.dbName,e)}getRegionCountByID(e){let n=new Dt;return this.getRegionByID(e).subscribe(o=>{n.next(o.length),n.complete()}),n}getRegionByID(e){if(!e)return;let n=IDBKeyRange.only(e);return this.ngxIndexedDBService?.getAllByIndex(this.dbName,"regionID",n)}deleteByRegionID(e){if(!e)return;let n=IDBKeyRange.only(e),o=this.ngxIndexedDBService?.getAllByIndex(this.dbName,"regionID",n);return o.subscribe(s=>{s.forEach(l=>{this.ngxIndexedDBService?.deleteByKey(this.dbName,l.url)})}),o}openCursor(e=IDBKeyRange.lowerBound(0),n=xc.readonly){return this.ngxIndexedDBService?.openCursorByIndex(this.dbName,"regionID",e,void 0,n)}resetCounters(){this.resetCollisionsMap(),this._newData=0}resetCollisionsMap(){this.collisionsMap=new Map}revertCollisions(){for(let[e,n]of this.collisionsMap)for(let o of n)this.ngxIndexedDBService?.getByKey(this.dbName,o).pipe(Tn(1)).subscribe(s=>{let l=s;l.regionID=e,this.customUpdate(s)})}get newData(){return this._newData}static \u0275fac=function(n){return new(n||r)(xe(y$,8))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})();var QAe=(()=>{class r{http;networkService;geoDBService;networkOnline=!0;constructor(e,n,o){this.http=e,this.networkService=n,this.geoDBService=o,this.networkService.currentState().subscribe(s=>{this.networkOnline=s.connection})}get(e,n){return window.navigator.onLine&&this.networkOnline?this.getOnline(e,n):this.getOffline(e)}getOnline(e,n){let o;switch(n.responseType){case"arraybuffer":o=this.http.get(e,{responseType:"arraybuffer",withCredentials:n.withCredentials});break;case"text":o=this.http.get(e,{responseType:"text",withCredentials:n.withCredentials});break;case"json":o=this.http.get(e,{responseType:"json",withCredentials:n.withCredentials});break;default:o=this.http.get(e,{responseType:"blob",withCredentials:n.withCredentials});break}return o}getOffline(e){return this.geoDBService?.get(e)}isOnline(){return this.networkOnline&&window.navigator.onLine}static \u0275fac=function(n){return new(n||r)(xe(dr),xe(T8),xe(nre,8))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),fb=(()=>{class r{style;createStyle(e,n,o){if(!e)return JF();if(typeof e=="function"||e instanceof Mn)return e;let s=this.parseStyle("style",e);if(s.getText()){let l=0,h=1/0;if(e.text){let p=e.text?.minScaleDenom?Th(Number(e.text.minScaleDenom)):void 0,m=e.text?.maxScaleDenom?Th(Number(e.text.maxScaleDenom)):void 0,f=e.text?.minResolution?e.text.minResolution:0,g=e.text?.maxResolution?e.text.maxResolution:1/0;l=p||f,h=m||g}(e.text?.minScaleDenom||e.text?.maxScaleDenom||e.text?.minResolution||e.text?.maxResolution)&&(n&&o>=l&&o<=h?n&&e.text.attribute&&s.getText().setText(this.getLabel(n,e.text.attribute)):s.setText())}return s}parseStyle(e,n){let o={},s=this.getOlCls(e);return s&&n instanceof Object?(Object.keys(n).forEach(l=>{let h=this.getOlKey(l);o[h]=this.parseStyle(l,n[l])}),new s(o)):n}getOlKey(e){let n;switch(e.toLowerCase()){case"circle":case"regularshape":case"icon":n="image";break;default:break}return n||e}getOlCls(e){let n=eQ[e.charAt(0).toUpperCase()+e.slice(1)];return e==="regularshape"&&(n=$p),e==="backgroundFill"&&(n=sr),e==="backgroundStroke"&&(n=ir),n}createStyleByAttribute(e,n,o){let s,l=n.type?n.type:this.guessTypeFeature(e),h=n.attribute,p=n.data,m=n.stroke,f=n.width,g=n.fill,y=n.anchor,_=n.radius,w=n.icon,A=n.scale,k=p?p.length:0,R=n.label?n.label.attribute:void 0,$=n.label?.minScaleDenom?Th(Number(n.label.minScaleDenom)):void 0,H=n.label?.maxScaleDenom?Th(Number(n.label.maxScaleDenom)):void 0,oe=n.label?.minResolution?n.label.minResolution:0,se=n.label?.maxResolution?n.label.maxResolution:1/0,ge=$||oe,ue=H||se,pe=n.label?.style?this.parseStyle("text",n.label.style):void 0;!pe&&R&&(pe=new Pl);let Ce=n.baseStyle;if(pe&&(o>=ge&&o<=ue?pe.setText(this.getLabel(e,R)):pe.setText("")),l==="circle"){for(let _e=0;_e<k;_e++){let de=typeof e.get(h)<"u"&&e.get(h)!==null?e.get(h):"";if(de===p[_e]||de.toString().match(new RegExp(p[_e],"gmi")))return w?(s=[new Mn({image:new Tu({color:g?g[_e]:void 0,src:w[_e],scale:A?A[_e]:1,anchor:y?y[_e]:[.5,.5]}),text:pe instanceof Pl?pe:void 0})],s):(s=[new Mn({image:new yl({radius:_?_[_e]:4,stroke:new ir({color:m?m[_e]:"black",width:f?f[_e]:1}),fill:new sr({color:g?g[_e]:"black"})}),text:pe instanceof Pl?pe:void 0})],s)}if(!e.getStyle())return Ce?(s=this.createStyle(Ce,e,o),pe&&s.setText(pe),s):(s=[new Mn({image:new yl({radius:4,stroke:new ir({color:"black"}),fill:new sr({color:"#bbbbf2"})})})],s)}else if(l==="regular"){for(let _e=0;_e<k;_e++){let de=typeof e.get(h)<"u"&&e.get(h)!==null?e.get(h):"";if(de===p[_e]||de.toString().match(new RegExp(p[_e],"gmi")))return s=[new Mn({stroke:new ir({color:m?m[_e]:"black",width:f?f[_e]:1}),fill:new sr({color:g?g[_e]:"rgba(255,255,255,0.4)"}),text:pe instanceof Pl?pe:void 0})],s}if(e instanceof An&&!e.getStyle())return Ce?(s=this.createStyle(Ce,e,o),pe&&s.setText(pe),s):(s=[new Mn({stroke:new ir({color:"black"}),fill:new sr({color:"#bbbbf2"})})],s)}}createClusterStyle(e,n,o={},s){let l,h=e.get("features").length;if(h!==1){if(o.clusterRanges){for(let p of o.clusterRanges)if((!p.minRadius||p.minRadius<=h)&&(!p.maxRadius||p.maxRadius>=h)){if(l=this.createStyle(p.style),p.showRange){let m=new Pl({text:h.toString(),fill:new sr({color:"#fff"})});l.setText(m)}if(p.dynamicRadius){let m,f=l.getRadius();m=5*Math.log(h),m<f&&(m=f),l.image_.setRadius(m)}break}}if(!l){let p;o.radiusCalc?p=o.radiusCalc(h):(p=5*Math.log(h),p<6&&(p=6)),l=[new Mn({image:new yl({radius:p,stroke:new ir({color:"black"}),fill:new sr({color:"rgba(24, 134, 45, 0.5)"})}),text:new Pl({text:h.toString(),fill:new sr({color:"#fff"})})})]}}else l=this.createStyle(s,e,n);return l}getLabel(e,n){let o=n;if(!o)return;let s=Array.from(n.matchAll(/\$\{([^\{\}]+)\}/g));return s.forEach(l=>{o=o.replace(l[0],e.get(l[1]))}),s.length===0&&o===n&&(o=e.get(n)||n),o}guessTypeFeature(e){switch(e.getGeometry().getType()){case"Point":case"MultiPoint":case"Circle":return"circle";default:return"regular"}}static \u0275fac=function(n){return new(n||r)};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Lu=(()=>{class r{http;styleService;dataSourceService;messageService;geoNetworkService;layerDBService;authInterceptor;unavailableLayers=[];constructor(e,n,o,s,l,h,p){this.http=e,this.styleService=n,this.dataSourceService=o,this.messageService=s,this.geoNetworkService=l,this.layerDBService=h,this.authInterceptor=p}createLayers(e,n){let o=e.map(s=>Kne(s)?this.createAsyncGroup(s):this.createAsyncLayer(s,n));return ts(o)}createLayer(e){e.source?.options?._layerOptionsFromSource&&(e=Ln.mergeDeep(e.source.options._layerOptionsFromSource,e||{}));let n;switch(e.source.constructor){case F$:case UF:case L$:case N$:case N2:case HF:n=this.createTileLayer(e);break;case As:case pb:case zF:case B$:case jm:n=this.createVectorLayer(e);break;case GF:case Bm:n=this.createImageLayer(e);break;case j$:{let o=sAe(e);n=this.createVectorTileLayer(o);break}default:break}return n}createAsyncLayer(e,n){let o=Xe({},e);return sAe(o),o.source?new si(s=>s.next(this.createLayer(o))):this.dataSourceService.createAsyncDataSource(o.sourceOptions,n).pipe($t(s=>{if(s===void 0){this.unavailableLayers.some(h=>h===o)||this.unavailableLayers.push(o);return}return this.createLayer(Object.assign(o,{source:s}))}))}createAsyncGroup(e,n){return e.children?.length?this.createLayers(e.children,n).pipe($t(o=>this.createGroup(o.filter(Boolean),e))):Vt(this.createGroup(null,e))}createGroup(e,n){return new kne(e,n)}createImageLayer(e){return new Mne(e,this.messageService,this.authInterceptor)}createTileLayer(e){return new Dne(e,this.messageService,this.authInterceptor)}createVectorLayer(e){let n=e.style,o;e.igoStyle||(e.igoStyle={});let s=["styleByAttribute","hoverStyle","mapboxStyle","clusterBaseStyle","style"];if(this.handleLegacyStyles(e,s),e.igoStyle.igoStyleObject&&!e.idbInfo?.storeToIdb?n=(h,p)=>this.styleService.createStyle(e.igoStyle.igoStyleObject,h,p):e.igoStyle.igoStyleObject&&e.idbInfo?.storeToIdb&&(n=this.styleService.parseStyle("style",e.igoStyle.igoStyleObject)),e.source instanceof zF)n=e.source.options.params.style;else if(e.igoStyle?.styleByAttribute){let h=this.styleService;e.style=(p,m)=>h.createStyleByAttribute(p,e.igoStyle.styleByAttribute,m),o=new ll(e,this.messageService,this.authInterceptor,this.geoNetworkService,this.geoNetworkService?.geoDBService,this.layerDBService)}if(e.source instanceof jm){let h=this.styleService,p=e.igoStyle.clusterBaseStyle;e.style=(m,f)=>h.createClusterStyle(m,f,e.clusterParam,p),o=new ll(e,this.messageService,this.authInterceptor,this.geoNetworkService,this.geoNetworkService?.geoDBService,this.layerDBService)}let l=Object.assign({},e,{style:n});return o||(o=new ll(l,this.messageService,this.authInterceptor,this.geoNetworkService,this.geoNetworkService?.geoDBService,this.layerDBService)),this.applyMapboxStyle(o,l),o}handleLegacyStyles(e,n){n.map(o=>{if(e[o]){let s=o;if(o==="style"){if(e[o]instanceof Mn)return;if(typeof e[o]=="object")s="igoStyleObject";else return}e.igoStyle[s]=e[o],delete e[o],console.warn(`
        The location of this style option (${o}) is deprecated.
        Please move this property within igoStyle property.
        Ex: ${o}: {...} must be transfered to igoStyle: { ${s}: {...} }
        This legacy conversion will be deleted in 2024.
        `)}})}createVectorTileLayer(e){let n,o;e.igoStyle||(e.igoStyle={});let s=["styleByAttribute","hoverStyle","mapboxStyle","style"];if(this.handleLegacyStyles(e,s),e.igoStyle.igoStyleObject&&(n=(h,p)=>this.styleService.createStyle(e.igoStyle.igoStyleObject,h,p)),e.igoStyle.styleByAttribute){let h=this.styleService;e.style=(p,m)=>h.createStyleByAttribute(p,e.igoStyle.styleByAttribute,m),o=new Z$(e,this.messageService,this.authInterceptor)}let l=Object.assign({},e,{style:n});return o||(o=new Z$(l,this.messageService,this.authInterceptor)),this.applyMapboxStyle(o,l),o}applyMapboxStyle(e,n){n.igoStyle?.mapboxStyle&&this.getStuff(n.igoStyle.mapboxStyle.url).subscribe(o=>{if(o.sprite){let s=this.getAbsoluteUrl(n.igoStyle.mapboxStyle.url,o.sprite);this.getStuff(s+".json").subscribe(l=>{LF(e.ol,o,n.igoStyle.mapboxStyle.source,void 0,l,s+".png")})}else LF(e.ol,o,n.igoStyle.mapboxStyle.source)})}getStuff(e){return this.http.get(e).pipe($t(n=>n),Fn(n=>(console.log("No style was found"),Vt(n))))}getAbsoluteUrl(e,n){return new RegExp("^http|//","i").test(n)?n:e.substr(e.length-1)==="/"?e+n:e+"/"+n}createAsyncIdbLayers(e="*"){return this.layerDBService?.getAll().pipe(ul(n=>{let s=(e!=="*"?n.filter(l=>l.detailedContextUri===e):n).map(l=>Object.assign({},l.layerOptions,{sourceOptions:l.sourceOptions}));return ts(s.map(l=>this.createAsyncLayer(l)))}))}deleteUnavailableLayers(e){let n=e.sourceOptions,o=this.unavailableLayers.findIndex(s=>{let l=s.sourceOptions;if(this.sourceOptionsWithParams(l)&&this.sourceOptionsWithParams(n))return l.params.LAYERS===n.params.LAYERS;if(this.sourceOptionsWithLayer(l)&&this.sourceOptionsWithLayer(n))return l.layer===n.layer});this.unavailableLayers.splice(o,o>=0?1:0)}sourceOptionsWithParams(e){return"params"in e}sourceOptionsWithLayer(e){return"layer"in e}static \u0275fac=function(n){return new(n||r)(xe(dr),xe(fb),xe(oU),xe(nl),xe(QAe,8),xe(ZAe,8),xe(sO,8))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),hki={formFieldConfigs:[{name:"name",title:"igo.geo.layer.group.name",type:"text",options:{validator:Dl.required,errors:{required:"igo.common.form.errors.required"}}}]};var ZF="Layer",One=class{selection=new hv(!0);descendantSelection=new hv(!0);get selected(){return this.selection.selected}get hasSelection(){return this.selection.hasValue()}get isSelectionEmpty(){return this.selection.isEmpty()}clearSelection(){this.selection.clear(),this.descendantSelection.clear()}select(...i){this.selection.select(...i),this.descendantSelection.select(...this.getDescendants(...i))}deselect(...i){this.selection.deselect(...i),this.descendantSelection.deselect(...this.getDescendants(...i))}isSelected=i=>this.selection.isSelected(i);isDescendantSelection=i=>this.descendantSelection.isSelected(i);getDescendants(...i){return i.reduce((e,n)=>Ah(n)?e.concat(n.descendants):e,[])}},fne=10,Pne=class extends One{_map;tree;_systemLayers=[];_otherLayers=[];layersFlattened=[];_layers$=new mt(void 0);layers$=this._layers$.asObservable();layersFlattened$=this._layers$.asObservable().pipe($t(()=>this.layersFlattened));_baseLayers=[];_baseLayers$=new mt(void 0);baseLayers$=this._baseLayers$.asObservable();baseLayerSelection;all$;constructor(i,e){super(),this._map=i,this.all$=ts([this.layersFlattened$,this.baseLayers$]).pipe(cr(10),$t(()=>this.all)),this.tree=new d4(e,{getChildren:n=>Ah(n)&&n.children,getId:n=>n.id,getLevel:n=>n.zIndex,reverse:!0})}get all(){return[...this.baseLayers,...this.layersFlattened,...this._systemLayers,...this._otherLayers]}get baseLayers(){return this._baseLayers}get baseLayer(){return this.baseLayers.find(i=>i.visible)}get treeLayers(){return this.tree.data}add(...i){let n=i.map(o=>this.handleAdd(o,0)).filter(Boolean);if(!n.length){this.notify();return}this.tree.add(...n),this.layersFlattened=[...this.tree.flattened],n.forEach(o=>o.add()),this.recalculateZindex(),this.notify()}selectBaseLayer(i){D2(i)&&(this.baseLayerSelection&&(this.baseLayerSelection.visible=!1),i.visible=!0,this.baseLayerSelection=i,this._map.viewController.olView.setMinZoom(i.dataSource.options.minZoom||(this._map.options.view||{}).minZoom),this._map.viewController.olView.setMaxZoom(i.dataSource.options.maxZoom||(this._map.options.view||{}).maxZoom))}remove(...i){let e=i.reduce((n,o)=>{this.isSelected(o)&&this.deselect(o);let s=this._remove(o);return Array.isArray(s)?n.push(...s):n.push(s),n},[]);this.tree.remove(...e),this.notify()}moveTo(i,...e){let n=this.tree.moveTo(i,...e);if(n?.length)return n}moveBelow(i,...e){let n=this.getPosition(i,"below"),o=this.moveTo(n,...e);this.handleMove(o,i.parent)}moveAbove(i,...e){let n=this.getPosition(i),o=this.moveTo(n,...e);this.handleMove(o,i.parent)}moveInside(i,...e){let n=this.getPosition(i),o=this.moveTo(n.concat(0),...e);this.handleMove(o,i)}raise(...i){let e=this.getPosition(i[0]),n=this.findLowestVisiblePostion(e,-1);this.moveTo(n,...i),this.handleMove(i,null,!0)}lower(...i){let e=this.getPosition(i[i.length-1]),n=this.findLowestVisiblePostion(e,2);this.moveTo(n,...i),this.handleMove(i,null,!0)}reset(){this.clearBaselayers(),this.clearTree(),this.clearOther(),this.clearSelection(),this.notify()}getById(i){return this.all.find(e=>e.id&&e.id===i)}getBySourceId(i){return this.all.find(e=>e.dataSource?.id&&e.dataSource.id===i)}getPosition(i,e="above"){let n=this.tree.getPosition(i);if(e==="below"){let o=n.pop();return n.concat(++o)}return n}getLayerRecipient(i){return i.parent?this.tree.getChildren(i.parent):[...this.treeLayers]}findLowestVisiblePostion(i,e){let n=i.pop(),o=i.concat(n+e),s=this.tree.getNodeByPosition(o);if(s&&!s.showInLayerList){let l=e>1?1:e;return this.findLowestVisiblePostion(o,l)}return o}handleMove(i,e,n){i?.length&&(i.forEach(o=>{o.moveTo(n?o.parent:e)}),this._internalMove())}_internalMove(){this.recalculateZindex(),this.notify()}getBefore(i){return this.treeLayers.find(e=>e.zIndex<=i.zIndex)}recalculateZindex(i=this.baseLayers.length,e=this.treeLayers){return[...e].reverse().reduce((n,o)=>{let s=++n;return o.zIndex=s,Ah(o)&&(s=this.recalculateZindex(s,o.children)),s},i)}handleAdd(i,e){let n=this.getById(i.id);if(n!==void 0){n.visible=!0;return}let o=this.getZindexOffset(i,e);if(this.setZindex(i,o),i.init(this._map),D2(i))i.visible&&this.selectBaseLayer(i),this._baseLayers.push(i);else if(this.isOtherLayer(i))this._otherLayers.push(i);else if(this.isSystemLayer(i)&&!i.showInLayerList)this._systemLayers.push(i);else{if(i.showInLayerList)return i;this._otherLayers.push(i)}let s=i.parentId?this.getById(i.parentId.split(kpe).pop()):void 0;i.add(s)}_remove(i){return D2(i)?this.removeBaselayer(i):this.isOtherLayer(i)?this.removeOtherLayer(i):this.isSystemLayer(i)&&this.removeSystemLayer(i),i.remove(),i}removeBaselayer(i){this.removeIn(i,this._baseLayers)}removeSystemLayer(i){this.removeIn(i,this._systemLayers)}removeOtherLayer(i){this.removeIn(i,this._otherLayers)}removeIn(i,e){let n=e.findIndex(o=>o.id===i.id);n!==-1&&e.splice(n,1)}isSystemLayer(i){return Ru(i)&&i.isIgoInternalLayer}isOtherLayer(i){return O$(i)&&!i.showInLayerList}clearBaselayers(){this.baseLayers.forEach(i=>this._remove(i)),this._baseLayers=[]}clearTree(){this.treeLayers.forEach(i=>this._remove(i)),this.tree.clear()}clearSystems(){this._systemLayers.forEach(i=>this._remove(i)),this._systemLayers=[]}clearOther(){this._otherLayers.forEach(i=>this._remove(i)),this._otherLayers=[]}getZindexOffset(i,e=0){return i.zIndex?0:e++}setZindex(i,e){if(D2(i))return this.handleBaselayerZIndex(i,e);if(i.zIndex===void 0||i.zIndex===0){let n=Math.max(fne,...this.treeLayers.map(o=>o.zIndex));i.zIndex=n+1+(e??0)}}handleBaselayerZIndex(i,e){let o=Math.max(0,...this.baseLayers.map(s=>s.zIndex))+1+(e??0);i.zIndex=o>fne?fne:o}notify(){this.layersFlattened=[...this.tree.flattened],this._layers$.next([...this.treeLayers]),this._baseLayers$.next([...this.baseLayers])}};function Opt(){let r=XAe(),i=JF(),e;return(n,o)=>{if(n.getId()==="bufferFeature")return e=Ppt(n.get("bufferStroke"),2,n.get("bufferFill"),n.get("bufferText")),e;{let s=n.get("_style");return s?new fb().createStyle(s,n,o):(e=n.getGeometry().getType()==="Point"?i:r,e.getText().setText(n.get("_mapTitle")),e)}}}function XAe({text:r,strokeWidth:i=2,fillColor:e=[0,161,222,.3],strokeColor:n=[0,161,222,.9]}={}){let o=Qc(e).slice(0),s=Qc(n).slice(0),l=new ir({width:i,color:s}),h=new sr({color:o});return new Mn({stroke:l,fill:h,image:new yl({radius:5,stroke:l,fill:h}),text:new Pl({text:r,font:"12px Calibri,sans-serif",fill:new sr({color:"#000"}),stroke:new ir({color:"#fff",width:3}),overflow:!0})})}function Ppt(r=[0,161,222,1],i=2,e=[0,161,222,.15],n){let o=new ir({width:i,color:r}),s=new sr({color:e});return new Mn({stroke:o,fill:s,image:new yl({radius:5,stroke:o,fill:s}),text:new Pl({font:"12px Calibri,sans-serif",text:n,fill:new sr({color:"#000"}),stroke:new ir({color:"#fff",width:3}),overflow:!0})})}function Rpt(){let r=new As;return new ll({title:"Overlay",zIndex:300,source:r,style:Opt()})}var R2=class{map;layer;get dataSource(){return this.layer.dataSource}constructor(i){this.layer=Rpt(),this.setMap(i)}setMap(i){i===void 0?this.map!==void 0&&this.map.ol.removeLayer(this.layer.ol):i.ol.addLayer(this.layer.ol),this.map=i}setFeatures(i,e=$n.Default,n){if(n)for(let o of this.dataSource.ol.getFeatures())o.get("_sourceId")===n&&this.removeOlFeature(o);else this.clear();this.addFeatures(i,e)}addFeature(i,e=$n.Default){this.addFeatures([i],e)}addFeatures(i,e=$n.Default){let n=[];i.forEach(o=>{let s=oy(o,this.map.projection);s.getGeometry()!==null&&n.push(s)}),this.addOlFeatures(n,e)}addOlFeature(i,e=$n.Default){this.addOlFeatures([i],e)}addOlFeatures(i,e=$n.Default){this.dataSource.ol.addFeatures(i),Fu(this.map.viewController,i,e)}removeFeature(i){this.removeFeatures([i])}removeFeatures(i){i.forEach(e=>{e.meta&&this.dataSource.ol.getFeatureById(e.meta.id)&&this.removeOlFeature(this.dataSource.ol.getFeatureById(e.meta.id))})}removeOlFeature(i){this.dataSource.ol.removeFeature(i)}clear(){this.dataSource.ol.clear()}},Q$=class{olMap;observerKeys=[];getOlMap(){return this.olMap}setOlMap(i){if(i!==void 0&&this.getOlMap()!==void 0)throw new Error("This controller is already bound to a map.");if(i===void 0){this.teardownObservers(),this.olMap=i;return}this.olMap=i}teardownObservers(){this.observerKeys.forEach(i=>_h(i)),this.observerKeys=[]}},Qd=function(r){return r.Position="position",r.PositionDirection="positionDirection",r.Accuracy="accuracy",r.Buffer="buffer",r}(Qd||{}),Rne=class extends Q${map;options;storageService;configService;arrowRotation;subscriptions$$=[];geolocationOverlay;positionFeatureStyle=new Mn({image:new yl({radius:6,fill:new sr({color:"#3399CC"}),stroke:new ir({color:"#fff",width:2})})});accuracyFeatureStyle=new Mn({stroke:new ir({color:"rgba(120, 120, 120, 0.4)",width:1}),fill:new sr({color:"rgba(120, 120, 120, 0.4)"})});get bufferStyle(){return new Mn({stroke:new ir({width:2,color:this.buffer.bufferStroke}),fill:new sr({color:this.buffer.bufferFill}),text:new Pl({textAlign:"left",offsetX:10,offsetY:-10,font:"12px Calibri,sans-serif",text:this.buffer.showBufferRadius?`${this.buffer.bufferRadius}m`:"",fill:new sr({color:"#000"}),stroke:new ir({color:"#fff",width:3})})})}get arrowStyle(){return new Mn({image:new $p({radius:5.5,fill:new sr({color:"rgba(0, 132, 202)"}),stroke:new ir({color:"#fff",width:1.5}),points:3,displacement:[0,9],rotation:this.arrowRotation,rotateWithView:!0})})}geolocation;emissionIntervalSeconds$=new mt(5);position$=new mt(void 0);tracking$=new mt(void 0);followPosition$=new mt(void 0);lastPosition;set buffer(i){this._buffer=i,this.handleFeatureCreation(this.position$.value)}get buffer(){return this._buffer}_buffer;set accuracyThreshold(i){this._accuracyThreshold=i,this.handleFeatureCreation(this.position$.value)}get accuracyThreshold(){return this._accuracyThreshold}_accuracyThreshold;get olGeolocation(){return this.geolocation}get tracking(){return this.geolocation.getTracking()}set tracking(i){this.geolocation.setTracking(i||!1),this.tracking$.next(i),this.storageService&&i!==void 0&&this.storageService.set("geolocation.tracking",i),i||this.position$.next(void 0)}set followPosition(i){this._followPosition=i,this.followPosition$.next(i),this.configService?.getConfig("geolocate.followPosition")===!1&&(this._followPosition=!1,this.followPosition$.next(!1)),this.handleFeatureCreation(this.position$.value),this.storageService&&i!==void 0&&this.storageService.set("geolocation.followPosition",i)}get followPosition(){return this._followPosition}_followPosition;constructor(i,e,n,o){super(),this.map=i,this.options=e,this.storageService=n,this.configService=o,this.geolocationOverlay=new R2(this.map),this._followPosition=this.options&&this.options.followPosition?this.options.followPosition:!1,this._buffer=this.options&&this.options.buffer?this.options.buffer:void 0,this._accuracyThreshold=this.options&&this.options.accuracyThreshold?this.options.accuracyThreshold:5e3}setOlMap(i){super.setOlMap(i),this.setupObservers()}deleteGeolocationFeatures(){this.deleteFeatureByType(Qd.Position),this.deleteFeatureByType(Qd.PositionDirection),this.deleteFeatureByType(Qd.Accuracy),this.deleteFeatureByType(Qd.Buffer)}setupObservers(){this.tracking$.subscribe(e=>{e?this.onPositionChange(!0,!0):this.deleteGeolocationFeatures()}),this.geolocation=new nTe({trackingOptions:{enableHighAccuracy:!0,maximumAge:1e4,timeout:6e5},projection:this.options.projection});let i=!1;this.subscriptions$$.push(this.emissionIntervalSeconds$.pipe(jr(e=>qb(e*1e3))).subscribe(()=>{i===this.tracking?this.onPositionChange(!0):(i=this.tracking,this.onPositionChange(!0,!0))})),this.geolocation.on("change",()=>{this.onPositionChange(!1,!1)})}updateArrowFeatureOrientation(i){let e=us(i.position,i.projection,"EPSG:4326");if(!this.lastPosition){this.lastPosition={coordinates:e,dateTime:new Date};return}let n=this.getFeatureByType(Qd.PositionDirection),o=i?.speed>1.25&&this.distanceBetweenPoints(this.lastPosition.coordinates,e)>.003;if(i.accuracy<=this.accuracyThreshold&&o){let s=e[1]-this.lastPosition.coordinates[1],l=e[0]-this.lastPosition.coordinates[0],h=Math.atan2(l,s);h<0&&(h=2*Math.PI+h),this.arrowRotation=h,n&&n.setStyle(this.arrowStyle),this.lastPosition={coordinates:e,dateTime:new Date}}else n&&new Date().getTime()-this.lastPosition.dateTime.getTime()>3e3&&cAe(n)}distanceBetweenPoints(i,e){return OP(i,e)/1e3}addOnChangedListener(i){let e=()=>{i(this.geolocation)};return this.geolocation.on("change",e),e}deleteChangedListener(i){this.geolocation.un("change",i)}updateGeolocationOptions(i){if(!i)return;let e=i.geolocate,n=i.alwaysTracking;if(this.storageService){let o=this.storageService.get("geolocation.tracking");o!=null&&(e=o);let s=this.storageService.get("geolocation.followPosition");s!=null&&(n=s)}this.tracking=e,this.followPosition=n,this.buffer=i.buffer}teardownObservers(){this.subscriptions$$.length&&this.subscriptions$$.map(i=>i.unsubscribe()),super.teardownObservers()}onPositionChange(i=!1,e=!1){if(!this.tracking)return;let n=this.geolocation.getProperties();if(n.accuracy>this.accuracyThreshold){console.warn("Poor geolocation accuracy. No position are stored/shown"),this.position$.next(void 0);return}let o={position:n.position,projection:this.geolocation.getProjection().getCode(),accuracy:n.accuracy,altitude:n.altitude,altitudeAccuracy:n.altitudeAccuracy,heading:n.heading,speed:n.speed,enableHighAccuracy:!!n.trackingOptions?.enableHighAccuracy,timestamp:new Date};this.handleFeatureCreation(o),this.handleViewFromFeatures(o,e),i&&this.position$.next(o)}getFeatureByType(i){return this.geolocationOverlay.dataSource.ol.getFeatureById(i)}deleteFeatureByType(i){let e=this.geolocationOverlay?.dataSource.ol.getFeatureById(i);e&&this.geolocationOverlay.dataSource.ol.removeFeature(e)}handleFeatureCreation(i){if(!i||!i.position)return;let e=new Kn(i.position),n=jS(new LS(i.position,i.accuracy||0)),o=this.getFeatureByType(Qd.Position),s=this.getFeatureByType(Qd.PositionDirection),l=this.getFeatureByType(Qd.Accuracy),h=!!o,p=!!s,m=!!l;if(p||(s=new An({geometry:e}),s.setId(Qd.PositionDirection),cAe(s)),h||(o=new An({geometry:e}),o.setId(Qd.Position),o.setStyle(this.positionFeatureStyle)),m||(l=new An({geometry:n}),l.setId(Qd.Accuracy),l.setStyle(this.accuracyFeatureStyle)),e&&(h?o.setGeometry(e):this.geolocationOverlay.addOlFeature(o,$n.None),p?s.setGeometry(e):this.geolocationOverlay.addOlFeature(s,$n.None),this.updateArrowFeatureOrientation(i),m?l.setGeometry(n):this.geolocationOverlay.addOlFeature(l,$n.None),this.buffer)){let f=this.getFeatureByType(Qd.Buffer),g=!!f,y=new LS(i.position,this.buffer.bufferRadius);g||(f=new An(y),f.setId(Qd.Buffer),f.setStyle(this.positionFeatureStyle)),f.setStyle(this.bufferStyle),g?f.setGeometry(y):this.geolocationOverlay.addOlFeature(f,$n.None)}}handleViewFromFeatures(i,e=!1){let n=this.getFeatureByType(Qd.Position),o=this.getFeatureByType(Qd.PositionDirection),s=this.getFeatureByType(Qd.Accuracy),l=this.getFeatureByType(Qd.Buffer),h=[n,o,s,l].filter(p=>p);if(h.length>0){let p=mb(h,this.map.viewProjection),m=i?.speed>12.5?[.25,.25,.25,.25]:[.15,.1,.1,.1],f=XF(this.map.getExtent(),p,m),g=this.followPosition&&f?$n.Move:$n.None;e&&(g=$n.Zoom),g!==$n.None&&Fu(this.map.viewController,h,g)}}},R$=function(r){return r[r.Move=0]="Move",r[r.Zoom=1]="Zoom",r}(R$||{}),Fne=class extends Q${options;rotation$=new mt(0);resolution$=new mt(void 0);state$=new mt(void 0);padding=[0,0,0,0];maxZoomOnExtent=19;maxLayerZoomExtent;extent$=new Dt;extent$$;states=[];stateIndex=0;get stateHistory(){return this.options?this.options.stateHistory===!0:!1}get olView(){return this.olMap.getView()}constructor(i){super(),this.options=i}setPadding(i){(i.top||i.top===0)&&(this.padding[0]=i.top),(i.right||i.right===0)&&(this.padding[1]=i.right),(i.bottom||i.bottom===0)&&(this.padding[2]=i.bottom),(i.left||i.left===0)&&(this.padding[3]=i.left)}setOlMap(i){super.setOlMap(i),this.setupObservers()}setupObservers(){this.stateHistory===!0&&this.observerKeys.push(this.olMap.on("moveend",()=>this.onMoveEnd())),this.extent$$=this.extent$.pipe(cr(25)).subscribe(i=>{this.setExtent(i.extent,i.action)})}monitorRotation(){this.observerKeys.push(this.olMap.getView().on("change:rotation",i=>{this.rotation$.next(i.target.getRotation())})),this.rotation$.next(this.getRotation())}teardownObservers(){super.teardownObservers(),this.extent$$!==void 0&&(this.extent$$.unsubscribe(),this.extent$$=void 0)}getOlProjection(){return this.olView.getProjection()}getCenter(i){let e=this.olView.getCenter();return i&&e&&(e=us(e,this.getOlProjection(),i)),e}getExtent(i){let e=this.olView.calculateExtent(this.olMap.getSize());return i&&e&&(e=Su(e,this.getOlProjection(),i)),e}getScale(i=96){return Ght(this.getResolution(),this.getOlProjection().getUnits(),i)}getResolution(){return this.olView.getResolution()}getZoom(){return Math.round(this.olView.getZoom())}zoomIn(){this.zoomTo(this.olView.getZoom()+1)}zoomOut(){this.zoomTo(this.olView.getZoom()-1)}zoomTo(i){this.olView.cancelAnimations(),this.olView.animate({zoom:i,duration:250,easing:Nc})}moveToExtent(i){this.extent$.next({extent:i,action:R$.Move})}zoomToExtent(i){this.extent$.next({extent:i,action:R$.Zoom})}getRotation(){return this.olView.getRotation()}resetRotation(){this.olView.animate({rotation:0})}hasPreviousState(){return this.states.length>1&&this.stateIndex>0}hasNextState(){return this.states.length>1&&this.stateIndex<this.states.length-1}previousState(){this.hasPreviousState()&&this.setStateIndex(this.stateIndex-1)}nextState(){this.hasNextState()&&this.setStateIndex(this.stateIndex+1)}clearStateHistory(){this.states=[],this.stateIndex=0}setInitialState(){this.states.length>0&&this.setStateIndex(0)}setExtent(i,e,n=!0){let o=this.olView;o.cancelAnimations();let s=n?500:0,l=o.getZoom(),h=o.getCenter(),p=[i[0]+(i[2]-i[0])/2,i[1]+(i[3]-i[1])/2],m=Math.sqrt(Math.pow(h[0]-p[0],2)+Math.pow(h[1]-p[1],2)),f=o.calculateExtent(),g=Math.sqrt(Math.pow(f[2]-f[0],2)+Math.pow(f[3]-f[1],2)),_=(Math.sqrt(Math.pow(i[2]-i[0],2)+Math.pow(i[3]-i[1],2))+g)/2,w=m/_,A=e===R$.Move||l>this.maxZoomOnExtent?l:this.maxZoomOnExtent;o.fit(i,{size:this.olMap.getSize(),maxZoom:A,padding:this.padding,duration:w>4?0:s,callback:k=>{k||o.fit(i,{size:this.olMap.getSize(),maxZoom:A,padding:this.padding,duration:w>4?0:s})}})}setStateIndex(i){this.stateIndex=i,this.setState(this.states[i])}setState(i){this.olView.animate({resolution:i.resolution,center:i.center,duration:0})}onMoveEnd(){let i=this.getResolution();this.resolution$.value!==i&&this.resolution$.next(i);let e={resolution:i,center:this.getCenter(),zoom:this.getZoom()};if(this.stateHistory===!0){let n=this.stateIndex,o=this.states.length===0?void 0:this.states[n];zht(e,o)||(this.states=this.states.slice(0,n+1).concat([e]),this.stateIndex=this.states.length-1)}this.state$.next(e)}},QF=class{storageService;configService;ol;forcedOffline$=new mt(!1);layersAddedByClick$=new mt(void 0);status$;propertyChange$;overlay;queryResultsOverlay;searchResultsOverlay;viewController;layerController;geolocationController;swipeEnabled$=new mt(!1);mapCenter$=new mt(!1);selectedFeatures$=new mt(null);bufferDataSource;layerWatcher;options;mapViewOptions;defaultOptions={controls:{attribution:!1}};get projection(){return this.projectionCode}get viewProjection(){return this.viewController.getOlProjection()}get projectionCode(){return this.viewProjection.getCode()}constructor(i,e,n){this.storageService=e,this.configService=n,this.options=Object.assign({},this.defaultOptions,i),this.layerController=new Pne(this,[]),this.layerWatcher=new $$,this.status$=this.layerWatcher.status$,this.propertyChange$=this.layerWatcher.propertyChange$,Xee(I8),this.init()}init(){let i=[];if(this.options.controls){if(this.options.controls.attribution){let n=this.options.controls.attribution===!0?{}:this.options.controls.attribution;i.push(new XS(n))}if(this.options.controls.scaleLine){let n=this.options.controls.scaleLine===!0?{}:this.options.controls.scaleLine;i.push(new Qee(n))}}let e={};this.options.interactions===!1&&(e={altShiftDragRotate:!1,doubleClickZoom:!1,keyboard:!1,mouseWheelZoom:!1,shiftDragZoom:!1,dragPan:!1,pinchRotate:!1,pinchZoom:!1}),this.ol=new o8({interactions:GR(e),controls:i}),this.setView(this.options.view||{}),this.viewController=new Fne({stateHistory:!0}),this.viewController.setOlMap(this.ol),this.overlay=new R2(this),this.queryResultsOverlay=new R2(this),this.searchResultsOverlay=new R2(this),this.ol.once("rendercomplete",()=>{this.geolocationController=new Rne(this,{projection:this.viewController.getOlProjection()},this.storageService,this.configService),this.geolocationController.setOlMap(this.ol),this.geolocationController&&this.geolocationController.updateGeolocationOptions(this.mapViewOptions),this.viewController.monitorRotation()})}setTarget(i){this.ol.setTarget(i),i!==void 0?this.layerWatcher.subscribe(()=>{},null):this.layerWatcher.unsubscribe()}updateView(i){let e=this.ol.getView(),n=Xe(Xe({},e.getProperties()),i);i.zoom&&i.resolution==null&&(n.resolution=void 0),this.setView(n),i.maxZoomOnExtent&&(this.viewController.maxZoomOnExtent=i.maxZoomOnExtent),this.mapViewOptions=i}setView(i){this.viewController!==void 0&&this.viewController.clearStateHistory();let e=Xe({constrainResolution:!0},i);i.center&&(e.center=jE(i.center,i.projection)),this.ol.setView(new Rm(e)),i.maxLayerZoomExtent&&(this.viewController.maxLayerZoomExtent=i.maxLayerZoomExtent)}updateControls(i){if(i===void 0)return;let e=[];if(i.attribution){let o=i.attribution===!0?{}:i.attribution;e.push(new XS(o))}if(i.scaleLine){let o=i.scaleLine===!0?{}:i.scaleLine;e.push(new Qee(o))}Object.assign([],this.ol.getControls().getArray()).forEach(o=>{this.ol.removeControl(o)}),e.forEach(o=>{this.ol.addControl(o)})}getCenter(i){return this.viewController.getCenter(i)}getExtent(i){return this.viewController.getExtent(i)}getZoom(){return this.viewController.getZoom()}getLayerByOlUId(i){return this.layerController.all.find(e=>Xi(e.ol)&&Xi(e.ol)===i)}};var m0=(()=>{class r{activityService;activityId;status$$;map;get view(){return this._view}set view(e){this._view=e,this.map!==void 0&&this.map.updateView(e)}_view;get controls(){return this._controls}set controls(e){this._controls=e,this.map!==void 0&&this.map.updateControls(e)}_controls;id=`igo-map-target-${Gs()}`;constructor(e){this.activityService=e}ngOnInit(){this.status$$=this.map.status$.subscribe(e=>this.handleStatusChange(e))}ngAfterViewInit(){this.map.setTarget(this.id)}ngOnDestroy(){this.map.setTarget(void 0),this.activityService.unregister(this.activityId),this.status$$.unsubscribe()}handleStatusChange(e){e===Ho.Working&&this.activityId===void 0?this.activityId=this.activityService.register():e===Ho.Done&&this.activityId!==void 0&&(this.activityService.unregister(this.activityId),this.activityId=void 0)}static \u0275fac=function(n){return new(n||r)(ie(mS))};static \u0275cmp=gt({type:r,selectors:[["igo-map-browser"]],inputs:{map:"map",view:"view"},standalone:!0,features:[yt],ngContentSelectors:Rlt,decls:2,vars:1,consts:[[1,"igo-map-browser-target",3,"id"]],template:function(n,o){n&1&&(Qi(),wt(0,"div",0),pi(1)),n&2&&ee("id",o.id)},styles:["[_nghost-%COMP%]{position:relative;display:block}[_nghost-%COMP%], .igo-map-browser-target[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]     .ol-attribution{flex-flow:row;left:50px;bottom:5px;text-align:left;padding:0;margin-right:90px;background-color:#fff0;width:calc(100% - 100px)}[_nghost-%COMP%]     .ol-attribution.ol-logo-only{height:inherit}[_nghost-%COMP%]     .ol-attribution.ol-collapsed{background:none}[_nghost-%COMP%]     .ol-attribution.ol-collapsed button{transform:none}[_nghost-%COMP%]     .ol-attribution button{transform:rotate(180deg);background-color:#fff;cursor:pointer;outline:none}[_nghost-%COMP%]     .ol-scale-line-inner{color:#000;border-color:#000;text-shadow:rgb(255,255,255) -1px -1px 3px,rgb(255,255,255) 1px -1px 3px,rgb(255,255,255) -1px 1px 3px,rgb(255,255,255) 1px 1px 4px;box-shadow:0 1px 0 1px #fff9}[_nghost-%COMP%]     .ol-scale-line{background-color:#fff0;bottom:4px;transform:translate(-50%);left:50%}[_nghost-%COMP%]     .ol-scale-bar{background-color:#fff0;bottom:4px;transform:translate(-50%);left:50%}[_nghost-%COMP%]     .ol-scale-text{text-shadow:rgb(255,255,255) -1px -1px 3px,rgb(255,255,255) 1px -1px 3px,rgb(255,255,255) -1px 1px 3px,rgb(255,255,255) 1px 1px 4px}[_nghost-%COMP%]     .ol-scale-step-text{text-shadow:rgb(255,255,255) -1px -1px 3px,rgb(255,255,255) 1px -1px 3px,rgb(255,255,255) -1px 1px 3px,rgb(255,255,255) 1px 1px 4px}[_nghost-%COMP%]     canvas{display:block}"]})}return r})(),JAe=(()=>{class r{networkService;messageService;component;get map(){return this.component.map}previousMessageId;constructor(e,n,o){this.networkService=n,this.messageService=o,this.component=e}ngAfterViewInit(){let e=window.navigator.onLine;this.map.forcedOffline$.subscribe(n=>{let o=window.navigator.onLine;if(!(e&&e===o&&!n)){if(this.previousMessageId&&this.messageService.remove(this.previousMessageId),!n&&o){let s=this.messageService.info("igo.geo.network.online.message","igo.geo.network.online.title");this.previousMessageId=s.toastId}else if(n){let s=this.messageService.info("igo.geo.network.offline.message","igo.geo.network.offline.title");this.previousMessageId=s.toastId}}}),ts([this.networkService.currentState(),this.map.forcedOffline$,this.map.status$.pipe(mn(n=>n===Ho.Done))]).subscribe(n=>{let o=n[0].connection,s=n[1];this.handleLayersOnlineState(o,s,this.map.layerController.all)})}handleNonOfflinableLayerResolution(e,n,o){!e||n?o.maxResolution=0:(e||!n)&&(o.maxResolution=o.options.maxResolution||1/0)}handleLayersOnlineState(e,n,o){o.forEach(s=>{if(Ah(s))return;let l;if(!s.isIgoInternalLayer)if(s.options.sourceOptions?.pathOffline&&(l=s.options.sourceOptions),l){let h=l.type;if(h==="mvt"&&s.ol.getSource().refresh(),!e||n){if(["vector","cluster"].includes(h))return;s.ol.getSource().setUrl(l.pathOffline)}else if(!e||!n){if(["vector","cluster"].includes(h))return;s.ol.getSource().setUrl(l.url)}else this.handleNonOfflinableLayerResolution(e,n,s)}else{this.handleNonOfflinableLayerResolution(e,n,s);return}})}static \u0275fac=function(n){return new(n||r)(ie(m0),ie(T8),ie(nl))};static \u0275dir=Pt({type:r,selectors:[["","igoMapOffline",""]],standalone:!0})}return r})();function rre(){let r=Math.floor(Math.random()*255),i=Math.floor(Math.random()*255),e=Math.floor(Math.random()*255),n=new ir({color:[r,i,e,1],width:2}),o=new sr({color:[r,i,e,.4]});return(s,l)=>{let h=s.get("_style");if(h&&Epe(h)){if(h.circle&&s.get("rad")&&s.get("longitude")&&s.get("latitude")){let f=[s.get("longitude"),s.get("latitude")],g=s.get("rad")/Math.cos(Math.PI/180*f[1])/l;h.circle.radius=g}return new fb().createStyle(h,void 0,l)}return new Mn({stroke:n,fill:o,image:new yl({radius:5,stroke:n,fill:o}),text:s.get("_mapTitle")?new Pl({text:s.get("_mapTitle").toString(),offsetX:5,offsetY:-5,font:"12px Calibri,sans-serif",fill:new sr({color:"#000"}),stroke:new ir({color:"#fff",width:3}),overflow:!0}):void 0})}}function ore(){let r=Math.floor(Math.random()*255),i=Math.floor(Math.random()*255),e=Math.floor(Math.random()*255),n=new ir({color:[r,i,e,1],width:2}),o=new sr({color:[r,i,e,.4]});return new Mn({stroke:n,fill:o,image:new yl({radius:5,stroke:n,fill:o})})}function Fpt(r){let e=[new Mn({text:new Pl({text:r.get("hoverSummary"),textAlign:"left",textBaseline:"top",font:"12px Calibri,sans-serif",fill:new sr({color:"#000"}),backgroundFill:new sr({color:"rgba(255, 255, 255, 0.5)"}),backgroundStroke:new ir({color:"rgba(200, 200, 200, 0.75)",width:2}),stroke:new ir({color:"#fff",width:3}),overflow:!0,offsetX:10,offsetY:20,padding:[2.5,2.5,2.5,2.5]})})];switch(r.getGeometry().getType()){case"Point":e.push(new Mn({image:new yl({radius:10,stroke:new ir({color:"blue",width:3})})}));break;default:e.push(new Mn({stroke:new ir({color:"white",width:5})})),e.push(new Mn({stroke:new ir({color:"blue",width:3})}))}return e}function Lpt(r){return new Mn({image:new Tu({src:"./assets/igo2/geo/icons/cross_black_18px.svg"}),text:new Pl({text:r.get("pointerSummary"),textAlign:"left",textBaseline:"bottom",font:"12px Calibri,sans-serif",fill:new sr({color:"#000"}),backgroundFill:new sr({color:"rgba(255, 255, 255, 0.5)"}),backgroundStroke:new ir({color:"rgba(200, 200, 200, 0.75)",width:2}),stroke:new ir({color:"#fff",width:3}),overflow:!0,offsetX:10,offsetY:-10,padding:[2.5,2.5,2.5,2.5]})})}var eEe=(()=>{class r{component;mediaService;styleService;store;pointerHoverFeatureStore=new wd([]);lastTimeoutRequest;store$$;selectionLayer;selectionMVT={};mvtStyleOptions;pointerMoveListener;singleClickMapListener;hoverFeatureId="hoverFeatureId";igoHoverFeatureDelay=1e3;igoHoverFeatureEnabled=!1;mouseout(){clearTimeout(this.lastTimeoutRequest),this.clearLayer()}get map(){return this.component.map}get mapProjection(){return this.component.map.projection}constructor(e,n,o){this.component=e,this.mediaService=n,this.styleService=o}ngOnInit(){this.map.status$.pipe(So(e=>e===Ho.Done)).subscribe(()=>{this.store=new Xp([],{map:this.map}),this.initStore(),this.listenToMapPointerMove(),this.subscribeToPointerStore(),this.listenToMapClick()})}initStore(){let e=this.store,n=new ll({isIgoInternalLayer:!0,id:"hoverFeatureId",title:"hoverFeature",zIndex:900,source:new As,showInLayerList:!1,exportable:!1,browsable:!1,style:Fpt});z2(e,n),this.selectionLayer=new hF({map:this.map.ol,zIndex:901,renderMode:"vector",declutter:!0,source:new lJ({projection:this.map.projection}),style:(o,s)=>{if(this.mvtStyleOptions&&o.getId()in this.selectionMVT)return this.createHoverStyle(o,this.mvtStyleOptions,s)}})}createHoverStyle(e,n,o){let s=Xe({},n),l=n.label?n.label.attribute:void 0,h=!!n.label?.style;if(!e.get("_isLabel"))s.label=void 0,h=!1,l=void 0;else{let p=s.data?s.data.length:0,m=[],f=[],g=[],y=[];for(let _=0;_<p;_++)m.push(0),f.push("rgba(255, 255, 255, 0)"),g.push(0),y.push("rgba(255, 255, 255, 0)");s.radius=m,s.stroke=f,s.width=g,s.fill=y}return!h&&l&&(s.label.style={textAlign:"left",textBaseline:"top",font:"12px Calibri,sans-serif",fill:{color:"#000"},backgroundFill:{color:"rgba(255, 255, 255, 0.5)"},backgroundStroke:{color:"rgba(200, 200, 200, 0.75)",width:2},stroke:{color:"#fff",width:3},overflow:!0,offsetX:10,offsetY:20,padding:[2.5,2.5,2.5,2.5]}),this.styleService.createStyleByAttribute(e,s,o)}ngOnDestroy(){this.unlistenToMapPointerMove(),this.unsubscribeToPointerStore(),this.unlistenToMapSingleClick()}subscribeToPointerStore(){this.store$$=this.pointerHoverFeatureStore.entities$.subscribe(e=>{this.addFeatureOverlay(e)})}listenToMapPointerMove(){this.pointerMoveListener=this.map.ol.on("pointermove",e=>this.onMapEvent(e))}listenToMapClick(){this.singleClickMapListener=this.map.ol.on("singleclick",()=>this.onMapSingleClickEvent())}unsubscribeToPointerStore(){this.store$$?.unsubscribe()}unlistenToMapPointerMove(){_h(this.pointerMoveListener),this.pointerMoveListener=void 0}unlistenToMapSingleClick(){_h(this.singleClickMapListener),this.singleClickMapListener=void 0}onMapSingleClickEvent(){this.clearLayer()}onMapEvent(e){if(e.dragging||!this.igoHoverFeatureEnabled||this.mediaService.isTouchScreen()){this.clearLayer();return}typeof this.lastTimeoutRequest<"u"&&clearTimeout(this.lastTimeoutRequest);let n=-1/0,o,s=this.map.ol.getPixelFromCoordinate(e.coordinate);this.lastTimeoutRequest=setTimeout(()=>{if(this.map.ol.forEachFeatureAtPixel(s,(l,h)=>{if(!h)return;let p=this.map.getLayerByOlUId(h.ol_uid);this.canProcessHover(p)&&(p.zIndex<=n||(n=p.zIndex,o=h))},{hitTolerance:10,layerFilter:l=>l instanceof i0||l instanceof hF}),!o){this.clearLayer(),this.pointerHoverFeatureStore.clear();return}this.map.ol.forEachFeatureAtPixel(s,(l,h)=>{if(l.get("hoverSummary")===void 0&&l.getProperties()!==this.pointerHoverFeatureStore.all()[0]?.getProperties()){if(this.clearLayer(),h instanceof i0){let p=this.map.getLayerByOlUId(h.ol_uid);if(!this.canProcessHover(p))return;let m=this.handleRenderFeature(l);this.setLayerStyleFromOptions(p,m);let f=[m];m.set("_isLabel",!1);let g=new An;g.setProperties(m.getProperties());let y=m.getGeometry().getType()==="Point"?m.getGeometry():new Kn(e.coordinate);return g.setGeometry(y),g.setId(m.getId()),g.set("_isLabel",!0),this.setLayerStyleFromOptions(p,g),f.push(g),this.pointerHoverFeatureStore.load(f),!0}if(h instanceof hF){let p=this.map.getLayerByOlUId(h.ol_uid);if(!this.canProcessHover(p))return;p?.options?.igoStyle?.styleByAttribute?.hoverStyle?this.mvtStyleOptions=p.options.igoStyle.styleByAttribute.hoverStyle:p?.options?.igoStyle?.hoverStyle&&(this.mvtStyleOptions=p.options.igoStyle.hoverStyle),this.selectionLayer.setSource(h.getSource()),h.getFeatures(e.pixel).then(m=>{if(!m.length){this.selectionMVT={},this.selectionLayer.changed(),this.clearLayer();return}let f=m[0];if(!f){this.clearLayer();return}let g=this.handleRenderFeature(f);g.set("_isLabel",!1);let y=new An;y.setProperties(g.getProperties());let _=g.getGeometry().getType()==="Point"?g.getGeometry():new Kn(e.coordinate);y.setGeometry(_),y.setId(g.getId()),y.set("_isLabel",!0),this.setLayerStyleFromOptions(p,y),this.pointerHoverFeatureStore.load([y]),this.selectionMVT[f.getId()]=g,this.selectionLayer.changed()})}}},{hitTolerance:10,layerFilter:l=>l===o})},this.igoHoverFeatureDelay)}canProcessHover(e){return!(!e||!e.visible||!e.options||!e.options.igoStyle?.styleByAttribute&&!e.options.igoStyle?.hoverStyle||e.options.igoStyle?.styleByAttribute&&!e.options.igoStyle?.styleByAttribute.hoverStyle&&!e.options.igoStyle?.hoverStyle)}handleRenderFeature(e){let n;return e instanceof Zc?(n=new An({geometry:this.getGeometry(e)}),n.setId(e.getId())):e instanceof An&&(n=e),n.setProperties(e.getProperties()),n}addFeatureOverlay(e){if(e.length>0){let n=e[0];this.clearLayer();let o=new An({geometry:n.getGeometry(),meta:{id:this.hoverFeatureId},hoverSummary:this.getHoverSummary(n.getProperties())});this.store.setLayerOlFeatures([o],$n.None)}}setLayerStyleFromOptions(e,n){let o=this.store.layer.map.viewController.getResolution();if(e?.options?.igoStyle?.styleByAttribute?.hoverStyle){this.store.layer.ol.setStyle(this.createHoverStyle(n,e.options.igoStyle.styleByAttribute.hoverStyle,o));return}e?.options?.igoStyle?.hoverStyle&&this.store.layer.ol.setStyle(this.createHoverStyle(n,e.options.igoStyle.hoverStyle,o))}getHoverSummary(e){let n="";for(let[o,s]of Object.entries(e))!o.startsWith("_")&&o!=="geometry"&&(n+=`${o}: ${s}
`);return n.length>=2?n.slice(0,-2):n}getGeometry(e){let n;if(!e.getOrientedFlatCoordinates)n=e.getGeometry();else{let o=e.getOrientedFlatCoordinates(),s=[];switch(o.forEach((l,h)=>{h%2===0&&s.push([parseFloat(o[h]),parseFloat(o[h+1])])}),e.getType()){case"Point":n=new Kn(s);break;case"Polygon":n=new Zo([s]);break;case"LineString":n=new ao([s]);break}}return n}clearLayer(){this.selectionMVT={},this.selectionLayer&&this.selectionLayer.changed(),this.store&&this.store.clearLayer()}static \u0275fac=function(n){return new(n||r)(ie(m0,2),ie(Ol),ie(fb))};static \u0275dir=Pt({type:r,selectors:[["","igoHoverFeature",""]],hostBindings:function(n,o){n&1&&Oe("mouseout",function(){return o.mouseout()})},inputs:{igoHoverFeatureDelay:"igoHoverFeatureDelay",igoHoverFeatureEnabled:"igoHoverFeatureEnabled"},standalone:!0})}return r})(),sre=(()=>{class r{config;constructor(e){this.config=e,(this.config.getConfig("projections")||[]).forEach(o=>{o.alias=o.alias?o.alias:o.code,this.registerProjection(o)});for(let o=1;o<61;o++){let s=o<10?`EPSG:3260${o}`:`EPSG:326${o}`,l=`+proj=utm +zone=${o} +datum=WGS84 +units=m +no_defs`,h={code:s,def:l,extent:void 0};this.registerProjection(h)}for(let o=1;o<11;o++){let s=o<10?`EPSG:3218${o}`:`EPSG:321${80+o}`,l;Number(o)<=2?l=-50-Number(o)*3:Number(o)>=12?l=-81-(Number(o)-12)*3:l=-49.5-Number(o)*3;let h=`+proj=tmerc +lat_0=0 +lon_0=${l} +k=0.9999 +x_0=304800 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"`,p={code:s,def:h,extent:void 0};this.registerProjection(p)}}registerProjection(e){I8.defs(e.code,e.def),Xee(I8),e.extent&&Vi(e.code).setExtent(e.extent)}static \u0275fac=function(n){return new(n||r)(xe(Ri))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Npt(r){let i=r.file,e=r.nbLines??500,n=new FileReader;return Xn(new Promise(o=>{if(!i.name.toLowerCase().endsWith(".geojson")&&!i.name.toLowerCase().endsWith(".json")&&!i.name.toLowerCase().endsWith(".gml")){o("epsgNotDefined");return}n.onload=()=>{if(i.name.toLowerCase().endsWith(".geojson")||i.name.toLowerCase().endsWith(".json")){let s=JSON.parse(n.result);if(s.crs?.properties?.name){let l=s.crs.properties.name.match(/EPSG:{1,2}\d{0,6}/gm);if(l!==null&&l.length){o(l[0].replace(/::/g,":"));return}else{o("epsgNotDefined");return}}else{o("epsgNotDefined");return}}else if(i.name.toLowerCase().endsWith(".gml")){let l=n.result.split(`
`);for(let h=0;h<=e;h++){let p=l[h].match(/EPSG:\d{0,6}/gm);if(p!==null&&p.length){o(p[0]);break}else o(void 0)}}else o("epsgNotDefined")},n.readAsText(i,"UTF-8")}))}var tEe=(()=>{class r{map;color;get zoom(){return this.map.viewController.getZoom()}get minZoom(){return this.map.viewController.olView.getMinZoom()||1}get maxZoom(){return this.map.viewController.olView.getMaxZoom()}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-zoom-button"]],inputs:{map:"map",color:"color"},standalone:!0,features:[yt],decls:9,vars:16,consts:[[1,"igo-zoom-button-container"],["mat-icon-button","","matTooltipPosition","left",3,"click","matTooltip","color","disabled"]],template:function(n,o){n&1&&(ne(0,"div",0)(1,"button",1),Ne(2,"translate"),Oe("click",function(){return o.map.viewController.zoomIn()}),ne(3,"mat-icon"),Ye(4,"add"),ce()(),ne(5,"button",1),Ne(6,"translate"),Oe("click",function(){return o.map.viewController.zoomOut()}),ne(7,"mat-icon"),Ye(8,"remove"),ce()()()),n&2&&(q(),ee("matTooltip",cw(2,6,"igo.geo.mapButtons.zoomIn",fo(12,oAe,o.zoom+1)))("color",o.color)("disabled",o.zoom>=o.maxZoom),q(4),ee("matTooltip",cw(6,9,"igo.geo.mapButtons.zoomOut",fo(14,oAe,o.zoom-1)))("color",o.color)("disabled",o.zoom<=o.minZoom))},dependencies:[bn,Cr,Er,Ar,jn,er,On,hn],styles:["[_nghost-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mat-ripple[_ngcontent-%COMP%], [_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mdc-icon-button__ripple[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   .igo-zoom-button-container[_ngcontent-%COMP%]{width:40px}[_nghost-%COMP%]   .igo-zoom-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff}[_nghost-%COMP%]   .igo-zoom-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#efefef}[_nghost-%COMP%]   .igo-zoom-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-bottom:2px}"]})}return r})(),iEe=(()=>{class r{configService;get sidenavOpened(){return this._sidenavOpenend}set sidenavOpened(e){this._sidenavOpenend=e,this.getClassMenuButton()}_sidenavOpenend;openSidenav=new it;useThemeColor;menuButtonClass;constructor(e){this.configService=e;let n=this.configService.getConfig("menu.button.useThemeColor");this.useThemeColor=n!==void 0?n:!1}getClassMenuButton(){this.menuButtonClass={"menu-button-white-background":!this.useThemeColor}}onToggleSidenavClick(){this.openSidenav.emit()}static \u0275fac=function(n){return new(n||r)(ie(Ri))};static \u0275cmp=gt({type:r,selectors:[["igo-menu-button"]],inputs:{sidenavOpened:"sidenavOpened"},outputs:{openSidenav:"openSidenav"},standalone:!0,features:[yt],decls:4,vars:4,consts:[["mat-icon-button","","id","menu-button","tooltip-position","below","matTooltipShowDelay","500",3,"click","ngClass","matTooltip"]],template:function(n,o){n&1&&(ne(0,"button",0),Ne(1,"translate"),Oe("click",function(){return o.onToggleSidenavClick()}),ne(2,"mat-icon"),Ye(3,"menu"),ce()()),n&2&&ee("ngClass",o.menuButtonClass)("matTooltip",je(1,2,o.sidenavOpened?"menu.close":"menu.open"))},dependencies:[bn,Cr,qr,Er,Ar,jn,er,On,hn],styles:["[_nghost-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mat-ripple[_ngcontent-%COMP%], [_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mdc-icon-button__ripple[_ngcontent-%COMP%]{border-radius:0!important}"]})}return r})(),nEe=(()=>{class r{configService;tracking$$;icon$=new mt("my_location");get map(){return this._map}set map(e){this._map=e}_map;get color(){return this._color}set color(e){this._color=e}_color;constructor(e){this.configService=e}ngAfterContentInit(){this.map.ol.once("rendercomplete",()=>{this.tracking$$=this.map.geolocationController.tracking$.subscribe(e=>{e?this.icon$.next("my_location"):this.icon$.next(this.configService.getConfig("geolocate.basic")?"my_location":"location_searching")})})}ngOnDestroy(){this.tracking$$&&this.tracking$$.unsubscribe()}onGeolocationClick(){let e=this.map.geolocationController.tracking;this.map.geolocationController.tracking=!e}static \u0275fac=function(n){return new(n||r)(ie(Ri))};static \u0275cmp=gt({type:r,selectors:[["igo-geolocate-button"]],inputs:{map:"map",color:"color"},standalone:!0,features:[yt],decls:1,vars:1,consts:[["class","igo-geolocate-button-container",4,"ngIf"],[1,"igo-geolocate-button-container"],["mat-icon-button","","matTooltipPosition","left",3,"click","matTooltip","color"]],template:function(n,o){n&1&&We(0,Zlt,7,9,"div",0),n&2&&ee("ngIf",o.map.geolocationController)},dependencies:[gn,bn,Cr,Er,Ar,jn,er,kr,On,hn],styles:["[_nghost-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mat-ripple[_ngcontent-%COMP%], [_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mdc-icon-button__ripple[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   .igo-geolocate-button-container[_ngcontent-%COMP%]{width:40px;background-color:#fff}[_nghost-%COMP%]   .igo-geolocate-button-container[_ngcontent-%COMP%]:hover{background-color:#efefef}"]})}return r})(),rEe=(()=>{class r{configService;map;color;extentOverride;centerOverride;zoomOverride;homeExtentButtonExtent;homeExtentButtonCenter;homeExtentButtonZoom;constructor(e){this.configService=e,this.computeHomeExtent()}computeHomeExtent(){let e=this.configService.getConfig("homeExtentButton");this.homeExtentButtonExtent=this.extentOverride||e?.homeExtButtonExtent,this.homeExtentButtonCenter=this.centerOverride||e?.homeExtButtonCenter,this.homeExtentButtonZoom=this.zoomOverride||e?.homeExtButtonZoom,this.centerOverride&&this.zoomOverride&&(this.homeExtentButtonExtent=void 0)}onToggleClick(){if(this.computeHomeExtent(),this.homeExtentButtonExtent)this.map.viewController.zoomToExtent(this.homeExtentButtonExtent);else if(this.homeExtentButtonCenter&&this.homeExtentButtonZoom){let e=jE(this.homeExtentButtonCenter,this.map.viewController.olView.getProjection().getCode());this.map.viewController.olView.setCenter(e),this.map.viewController.zoomTo(this.homeExtentButtonZoom)}}static \u0275fac=function(n){return new(n||r)(ie(Ri))};static \u0275cmp=gt({type:r,selectors:[["igo-home-extent-button"]],inputs:{map:"map",color:"color",extentOverride:"extentOverride",centerOverride:"centerOverride",zoomOverride:"zoomOverride"},standalone:!0,features:[yt],decls:5,vars:4,consts:[[1,"igo-home-extent-button-container"],["mat-icon-button","","matTooltipPosition","left",3,"click","matTooltip","color"]],template:function(n,o){n&1&&(ne(0,"div",0)(1,"button",1),Ne(2,"translate"),Oe("click",function(){return o.onToggleClick()}),ne(3,"mat-icon"),Ye(4,"home"),ce()()()),n&2&&(q(),ee("matTooltip",je(2,2,"igo.geo.mapButtons.home-extent"))("color",o.color))},dependencies:[bn,Cr,Er,Ar,jn,er,On,hn],styles:["[_nghost-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mat-ripple[_ngcontent-%COMP%], [_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mdc-icon-button__ripple[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   .igo-home-extent-button-container[_ngcontent-%COMP%]{width:40px;background-color:#fff}[_nghost-%COMP%]   .igo-home-extent-button-container[_ngcontent-%COMP%]:hover{background-color:#efefef}"]})}return r})(),oEe=(()=>{class r{btnStyle="onlineStyle";map;color;enabled=!1;ngOnInit(){this.map.forcedOffline$.next(this.enabled)}onClick(){this.enabled=!this.enabled,this.handleButtonStyle(),this.map.forcedOffline$.next(this.enabled)}handleButtonStyle(){this.enabled?this.btnStyle="offlineStyle":this.btnStyle="onlineStyle"}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-offline-button"]],inputs:{map:"map",color:"color",enabled:"enabled"},standalone:!0,features:[yt],decls:6,vars:9,consts:[[1,"igo-user-button-container"],["mat-icon-button","","matTooltipPosition","left",3,"click","matTooltip","ngClass","color"]],template:function(n,o){n&1&&(ne(0,"div",0)(1,"button",1),Ne(2,"translate"),Ne(3,"translate"),Oe("click",function(){return o.onClick()}),ne(4,"mat-icon"),Ye(5,"wifi_off"),ce()()()),n&2&&(q(),ee("matTooltip",o.enabled?je(2,3,"igo.geo.mapButtons.online"):je(3,5,"igo.geo.mapButtons.offline"))("ngClass",fo(7,Qlt,o.btnStyle))("color",o.enabled?o.color:null))},dependencies:[bn,Cr,Er,Ar,qr,jn,er,On,hn],styles:["[_nghost-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mat-ripple[_ngcontent-%COMP%], [_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mdc-icon-button__ripple[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   .onlineStyle[_ngcontent-%COMP%]{width:40px;background-color:#fff}[_nghost-%COMP%]   .onlineStyle[_ngcontent-%COMP%]:hover{background-color:#efefef}[_nghost-%COMP%]   .offlineStyle[_ngcontent-%COMP%]{width:40px;background-color:#b9b9b9}"]})}return r})(),sEe=(()=>{class r{storageService;color="primary";get enabled(){return this.storageService.get("wakeLockEnabled")}set enabled(e){this.storageService.set("wakeLockEnabled",e)}noSleep;icon$=new mt("bedtime");visible=!1;constructor(e){this.storageService=e,this.noSleep=new MAe.default,c_.satisfies({ie:">0",edge:"<84",chrome:"<84",firefox:">0",opera:"<70",safari:">0"})&&(this.disableWakeLock(),this.enabled=!1,window.addEventListener("blur",()=>{this.disableWakeLock(),this.enabled=!1})),this.enabled?this.enableWakeLock():this.disableWakeLock()}enableWakeLock(){this.noSleep.enable(),this.enabled=!0,this.icon$.next("bedtime_off")}disableWakeLock(){this.noSleep.disable(),this.enabled=!1,this.icon$.next("bedtime")}toggleWakeLock(){this.enabled?this.disableWakeLock():this.enableWakeLock()}static \u0275fac=function(n){return new(n||r)(ie(wo))};static \u0275cmp=gt({type:r,selectors:[["igo-wake-lock-button"]],inputs:{color:"color",enabled:"enabled"},standalone:!0,features:[yt],decls:7,vars:9,consts:[[1,"igo-wake-lock-button-container"],["mat-icon-button","","matTooltipPosition","left",3,"click","color","matTooltip"]],template:function(n,o){n&1&&(ne(0,"div",0)(1,"button",1),Ne(2,"translate"),Ne(3,"translate"),Oe("click",function(){return o.toggleWakeLock()}),ne(4,"mat-icon"),Ye(5),Ne(6,"async"),ce()()()),n&2&&(q(),ee("color",o.color)("matTooltip",o.enabled?je(2,3,"igo.geo.mapButtons.preventScreenLock"):je(3,5,"igo.geo.mapButtons.letScreenLock")),q(4),Si(je(6,7,o.icon$)))},dependencies:[bn,Cr,Er,Ar,jn,er,kr,On,hn],styles:["[_nghost-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mat-ripple[_ngcontent-%COMP%], [_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mdc-icon-button__ripple[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   .igo-wake-lock-button-container[_ngcontent-%COMP%]{width:40px;background-color:#fff}[_nghost-%COMP%]   .igo-wake-lock-button-container[_ngcontent-%COMP%]:hover{background-color:#efefef}"]})}return r})();function Bpt(){return Or("baseLayerSwitcherState",[zi("collapseIcon",mi({height:"40px",width:"40px",overflow:"hidden"})),zi("collapseMap",mi({height:"80px",overflow:"hidden"})),zi("expand",mi({overflow:"hidden"})),ln("collapse => expand",un("200ms")),ln("expand => collapse",un("200ms"))])}var jpt=(()=>{class r{layerService;appRef;map;disabled;title;get display(){return this._display}set display(e){this._display=e,this.basemap.ol.getView().changed()}_display;get baseLayer(){return this._baseLayer}set baseLayer(e){this._baseLayer=e,this.handleBaseLayerChanged(e)}_baseLayer;basemap=new QF({controls:{},interactions:!1});constructor(e,n){this.layerService=e,this.appRef=n}ngAfterViewInit(){this.handleMainMapViewChange(this.map.ol.getView()),this.map.viewController.olView.on("change",e=>{this.handleMainMapViewChange(e.target)}),this.map.ol.on("pointerdrag",e=>{this.handleMainMapViewChange(e.target.getView())})}ngOnDestroy(){this.map.viewController.olView.un("change",e=>{this.handleMainMapViewChange(e.target)}),this.map.ol.un("pointerdrag",e=>{this.handleMainMapViewChange(e.target.getView())})}changeBaseLayer(e){this.disabled||(this.map.layerController.selectBaseLayer(e),this.appRef.tick())}handleMainMapViewChange(e){let n=e.getProperties();this.basemap.viewController.olView.setResolution(n.resolution),this.basemap.viewController.olView.setRotation(n.rotation),this.basemap.viewController.olView.setCenter(this.map.viewController.getCenter())}handleBaseLayerChanged(e){this.basemap.layerController.reset();let n=Object.assign(Object.create(e.options),e.options,{visible:!0,baseLayer:!1}),o=this.layerService.createLayer(n);this.basemap.layerController.add(o),this.handleLinkedBaseLayer(o)}handleLinkedBaseLayer(e){let n=e.options.linkedLayers;if(!n)return;let o=n.links;!!o&&o.map(l=>{l.linkedIds.map(h=>{let p=this.map.layerController.all.find(m=>Ru(m)&&m.options.linkedLayers?.linkId===h);if(p){let m=Object.assign(Object.create(p.options),p.options,{zIndex:9e3,visible:p.options.linkedLayers?.showInMiniBaseMap??!0,baseLayer:!1});this.basemap.layerController.add(this.layerService.createLayer(m))}})})}static \u0275fac=function(n){return new(n||r)(ie(Lu),ie(fs))};static \u0275cmp=gt({type:r,selectors:[["igo-mini-basemap"]],inputs:{map:"map",disabled:"disabled",title:"title",display:"display",baseLayer:"baseLayer"},standalone:!0,features:[yt],decls:2,vars:1,consts:[[1,"igo-mini-basemap-container"],[3,"click",4,"ngIf"],[3,"click"],[3,"map"],["class","igo-mini-basemap-title",4,"ngIf"],[1,"igo-mini-basemap-title"]],template:function(n,o){n&1&&(ne(0,"div",0),We(1,Jlt,3,2,"div",1),ce()),n&2&&(q(),ee("ngIf",o.display))},dependencies:[gn,m0],styles:[".igo-mini-basemap-container[_ngcontent-%COMP%]{width:80px;height:80px;background-color:#ffffff03;border:2px solid white;box-shadow:0 1px 4px #0000004d;cursor:pointer}.igo-mini-basemap-container[_ngcontent-%COMP%]:hover   .igo-mini-basemap-title[_ngcontent-%COMP%]{color:#000;text-shadow:0 0 5px white}.igo-mini-basemap-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;height:100%}.igo-mini-basemap-title[_ngcontent-%COMP%]{position:relative;top:-76px;height:76px;width:76px;text-align:center;vertical-align:bottom;color:#fff;text-shadow:0 0 5px black;white-space:normal;display:flex;align-items:flex-end;justify-content:center}"],changeDetection:0})}return r})(),aEe=(()=>{class r{mediaService;map;useStaticIcon;_baseLayers=[];expand=!1;showButton=!0;layers$$;get hasMoreThanTwo(){return this.baseLayers.length>1}constructor(e){this.mediaService=e,this.mediaService.media$.value===bu.Mobile&&this.useStaticIcon===void 0&&(this.useStaticIcon=!0)}ngAfterViewInit(){this.layers$$=this.map.layerController.baseLayers$.subscribe(e=>{this._baseLayers=e??[]})}ngOnDestroy(){this.layers$$.unsubscribe()}collapseOrExpand(){this.hasMoreThanTwo||this.useStaticIcon?this.expand=!this.expand:this.expand=!1}get baseLayers(){let e=this.map.viewController.getResolution(),n=this.map.viewController.getZoom(),o=this._baseLayers.filter(l=>(!l.options.maxResolution||e<=l.options.maxResolution)&&(!l.options.minResolution||e>=l.options.minResolution)&&(!l.options.source.options.maxZoom||n<=l.options.source.options.maxZoom)&&(!l.options.source.options.minZoom||n>=l.options.source.options.minZoom)),s=o.filter(l=>!l.visible);return s.length+1===o.length?s:o}static \u0275fac=function(n){return new(n||r)(ie(Ol))};static \u0275cmp=gt({type:r,selectors:[["igo-baselayers-switcher"]],inputs:{map:"map",useStaticIcon:"useStaticIcon"},standalone:!0,features:[yt],decls:1,vars:1,consts:[["class","igo-baselayers-switcher-container",3,"ngClass","click",4,"ngIf"],[1,"igo-baselayers-switcher-container",3,"click","ngClass"],["class","igo-baselayers-switcher-button-container",4,"ngIf"],[1,"basemap-list"],[3,"map","baseLayer","title","display","disabled",4,"ngFor","ngForOf"],["class","more-baselayers",4,"ngIf"],[1,"igo-baselayers-switcher-button-container"],["mat-icon-button","","matTooltipPosition","right","color","primary",3,"matTooltip"],[3,"map","baseLayer","title","display","disabled"],[1,"more-baselayers"],["color","primary",1,"material-icons","mat-icon"]],template:function(n,o){n&1&&We(0,rct,5,7,"div",0),n&2&&ee("ngIf",o.baseLayers.length>0)},dependencies:[gn,qr,bn,Cr,Er,Ar,jn,er,Ps,jpt,On,hn],styles:["[_nghost-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mat-ripple[_ngcontent-%COMP%], [_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mdc-icon-button__ripple[_ngcontent-%COMP%]{border-radius:0!important}.basemap-list[_ngcontent-%COMP%]   igo-mini-basemap[_ngcontent-%COMP%]{display:block}.basemap-list[_ngcontent-%COMP%]   igo-mini-basemap[_ngcontent-%COMP%]:not(:first-child){margin-top:4px}.igo-baselayers-switcher-container[_ngcontent-%COMP%]{height:auto;position:relative}.container-expand[_ngcontent-%COMP%]{overflow:hidden;border-width:0}.more-baselayers[_ngcontent-%COMP%]{width:80px;height:20px;background-color:#fff;text-align:center;cursor:pointer}.more-baselayers[_ngcontent-%COMP%]:hover{background-color:#efefef}.igo-baselayers-switcher-button-container[_ngcontent-%COMP%]{width:40px;background-color:#fff}.igo-baselayers-switcher-button-container[_ngcontent-%COMP%]:hover{background-color:#efefef}"],data:{animation:[Bpt()]}})}return r})(),lEe=(()=>{class r{rotated$=new mt(!1);azimuthRounded=0;rotationRounded=0;currentStyle$=new mt({transform:"rotate(0rad)"});map;showIfNoRotation;color;ngAfterContentInit(){this.map.viewController.rotation$.subscribe(e=>{let n=e||0,o=n*180/Math.PI;this.rotationRounded=Math.round(o),this.azimuthRounded=Math.round(iCe(o*-1)),this.currentStyle$.next({transform:"rotate("+n+"rad)"}),this.rotated$.next(n!==0)})}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-rotation-button"]],inputs:{map:"map",showIfNoRotation:"showIfNoRotation",color:"color"},standalone:!0,features:[yt],decls:2,vars:3,consts:[["class","igo-rotation-button-container","matTooltipPosition","left",3,"matTooltip",4,"ngIf"],["matTooltipPosition","left",1,"igo-rotation-button-container",3,"matTooltip"],["mat-icon-button","","matTooltipPosition","left",3,"click","color","disabled"],[3,"ngStyle"]],template:function(n,o){n&1&&(We(0,sct,9,18,"div",0),Ne(1,"async")),n&2&&ee("ngIf",je(1,1,o.rotated$)&&!o.showIfNoRotation||o.showIfNoRotation)},dependencies:[gn,Er,Ar,bn,Cr,jn,er,e_,kr,On,hn],styles:["[_nghost-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mat-ripple[_ngcontent-%COMP%], [_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mdc-icon-button__ripple[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   .igo-rotation-button-container[_ngcontent-%COMP%]{width:40px;background-color:#fff}[_nghost-%COMP%]   .igo-rotation-button-container[_ngcontent-%COMP%]:hover{background-color:#efefef}"]})}return r})(),cEe=(()=>{class r{map;layers;pos1;pos3;inDragAction=!1;swipeEnabled$$;boundPrerender=this.prerender.bind(this);ngAfterViewInit(){this.getListOfLayers(),this.swipeEnabled$$=this.map.swipeEnabled$.subscribe(e=>{e?this.displaySwipe():this.displaySwipeOff()}),this.letZoom()}ngOnDestroy(){this.swipeEnabled$$.unsubscribe(),this.map.swipeEnabled$.unsubscribe(),this.displaySwipeOff()}displaySwipe(){this.swipeId&&(this.swipeId.style.visibility="visible"),this.layers.map(e=>e.ol.on("prerender",this.boundPrerender)),this.layers.map(e=>e.ol.on("postrender",this.postrender)),this.map.ol.render()}displaySwipeOff(){this.swipeId&&(this.swipeId.style.visibility="hidden"),this.layers.map(e=>e.ol.un("prerender",this.boundPrerender)),this.layers.map(e=>e.ol.un("postrender",this.postrender)),this.map.ol.render(),this.layers=[]}get swipeId(){return document.getElementById("igo-layer-swipe")}getListOfLayers(){this.map.selectedFeatures$.subscribe(e=>{if(this.layers=[],e!==null)for(let n of e)this.layers.includes(n)||this.layers.push(n)})}dragDown(e){this.inDragAction=!0,e.preventDefault(),e.type==="mousedown"?(this.pos3=e.clientX,this.mouseSwipe(),document.onmouseup=this.closeDragMouseElement):e.type==="touchstart"&&(document.getElementById("arrows").style.visibility="hidden",this.pos3=e.touches[0].clientX,this.touchSwipe(),document.ontouchend=this.closeDragTouchElement)}mouseSwipe(){document.addEventListener("mousemove",e=>{this.inDragAction&&(e.preventDefault(),this.pos1=this.pos3-e.clientX,this.pos3=e.clientX,this.swipeId.style.left=this.swipeId.offsetLeft-this.pos1+"px"),this.map.ol.render()})}touchSwipe(){document.addEventListener("touchmove",e=>{this.inDragAction&&(e.preventDefault(),document.getElementById("arrows").style.visibility="hidden",this.pos1=this.pos3-e.changedTouches[0].clientX,this.pos3=e.changedTouches[0].clientX,this.swipeId.style.left=this.swipeId.offsetLeft-this.pos1+"px"),this.map.ol.render()})}closeDragMouseElement(){document.onmouseup=null,document.onmousemove=null,this.inDragAction=!1}closeDragTouchElement(){document.ontouchend=null,document.ontouchmove=null,document.getElementById("arrows").style.visibility="visible",this.inDragAction=!1}prerender(e){let n=e.context,o=this.map.ol.getSize(),s=this.swipeId.offsetLeft,l=MR(e,[s,0]),h=MR(e,[0,0]),p=MR(e,[s,o[1]]),m=MR(e,[0,o[1]]);n.save(),n.beginPath(),n.moveTo(l[0],l[1]),n.lineTo(p[0],p[1]),n.lineTo(m[0],m[1]),n.lineTo(h[0],h[1]),n.closePath(),n.clip()}postrender(e){e.context.restore(),e.context.save()}letZoom(){document.getElementById("igo-layer-swipe").addEventListener("wheel",e=>{e.deltaY>0?this.map.viewController.zoomOut():this.map.viewController.zoomIn()},!0)}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-swipe-control"]],inputs:{map:"map"},standalone:!0,features:[yt],decls:5,vars:0,consts:[["id","igo-layer-swipe",1,"igo-swipe-control-container",3,"mousedown","mouseup","touchstart","touchend"],[1,"igo-swipe-control-line"],["id","arrows",1,"igo-swipe-control-arrows"],[1,"igo-arrow-left"],[1,"igo-arrow-right"]],template:function(n,o){n&1&&(ne(0,"div",0),Oe("mousedown",function(l){return o.dragDown(l)})("mouseup",function(){return o.closeDragMouseElement()})("touchstart",function(l){return o.dragDown(l)})("touchend",function(){return o.closeDragTouchElement()}),wt(1,"div",1),ne(2,"div",2),wt(3,"div",3)(4,"div",4),ce()())},styles:[".igo-swipe-control-container[_ngcontent-%COMP%]{position:absolute;width:80px;height:100%;top:0%;left:50%;cursor:grab;z-index:1;transform:translate(-40px)}.igo-swipe-control-container[_ngcontent-%COMP%]:active{cursor:grabbing}.igo-swipe-control-line[_ngcontent-%COMP%]{position:absolute;width:4px;height:100%;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#5e5a5a}.igo-swipe-control-arrows[_ngcontent-%COMP%]{position:absolute;width:32px;height:32px;left:50%;top:50%;transform:translate(-50%,-50%);margin-top:-16px;padding:5px 4px;background-color:#5e5a5a;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0)}.igo-swipe-control-arrows[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;width:0;height:0;border-top:10px solid transparent;border-bottom:10px solid transparent}.igo-swipe-control-arrows[_ngcontent-%COMP%]   .igo-arrow-right[_ngcontent-%COMP%]{margin-left:4px;border-left:10px solid white}.igo-swipe-control-arrows[_ngcontent-%COMP%]   .igo-arrow-left[_ngcontent-%COMP%]{border-right:10px solid white}.igo-swipe-control-arrows[_ngcontent-%COMP%]:active{display:none}"]})}return r})(),dEe=(()=>{class r{map;displayCenter$$;ngAfterViewInit(){this.map&&(this.displayCenter$$=this.map.mapCenter$.subscribe(e=>{document.getElementById("mapCenter").style.visibility=e?"visible":"hidden"})),this.letZoom()}ngOnDestroy(){this.displayCenter$$&&this.displayCenter$$.unsubscribe()}letZoom(){document.getElementById("mapCenter").addEventListener("wheel",e=>{e.deltaY>0?this.map.viewController.zoomOut():this.map.viewController.zoomIn()},!0)}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-map-center"]],inputs:{map:"map"},standalone:!0,features:[yt],decls:3,vars:0,consts:[["id","mapCenter",1,"mapCenter"],[1,"vertical"],[1,"horizontal"]],template:function(n,o){n&1&&(ne(0,"div",0),wt(1,"div",1)(2,"div",2),ce())},styles:[".mapCenter[_ngcontent-%COMP%]{width:30px;height:30px;position:absolute;top:50%;left:50%;transform:translate(-15px,-15px);pointer-events:none}.mapCenter[_ngcontent-%COMP%]   .vertical[_ngcontent-%COMP%], .mapCenter[_ngcontent-%COMP%]   .horizontal[_ngcontent-%COMP%]{width:4px;height:30px;position:absolute;left:13px;background-color:#000}.mapCenter[_ngcontent-%COMP%]   .horizontal[_ngcontent-%COMP%]{transform:rotate(90deg)}"]})}return r})();var tL=(()=>{class r{http;messageService;queryEnabled=!0;defaultFeatureCount=20;featureCount=20;previousMessageIds=[];constructor(e,n){this.http=e,this.messageService=n}query(e,n){this.previousMessageIds.length&&this.previousMessageIds.forEach(l=>{this.messageService.remove(l)});let o=e.filter(l=>l.displayed===!0).map(l=>this.queryLayer(l,n));return[].concat.apply([],o)}queryLayer(e,n){let o=this.getQueryUrl(e.dataSource,n,!1,e.map.viewController.getExtent());if(!o)return Vt([]);let s=e.map.viewController.getResolution(),l=e.map.viewController.getScale();if(e.dataSource.options.queryFormat===Od.HTMLGML2){if(typeof o=="string"){let m=this.getQueryUrl(e.dataSource,n,!0);return this.http.get(m,{responseType:"text"}).pipe(ga(f=>{let g=this.mergeGML(f,o,e),y=g[0],_=g[1];return this.http.get(o,{responseType:"text"}).pipe($t(w=>this.extractData(w,e,n,o,y,_)))}))}let h=this.getQueryUrl(e.dataSource,n,!0),p=[];for(let m=0;m<h.length;m++){let f=h[m];this.checkScaleAndResolution(s,l,f)&&p.push(this.requestDataForHTMLGML2(f.url,o[m].url,e,n))}return p}else{if(typeof o=="string")return this.http.get(o,{responseType:"text"}).pipe($t(m=>this.extractData(m,e,n,o)));let h=[];for(let p=0;p<o.length;p++){let m=o[p];if(this.checkScaleAndResolution(s,l,m)){let f=this.http.get(m.url,{responseType:"text"});h.push(f.pipe($t(g=>this.extractData(g,e,n,m.url))))}}return h}}requestDataForHTMLGML2(e,n,o,s){return this.http.get(e,{responseType:"text"}).pipe(ga(l=>{let h=this.mergeGML(l,n,o),p=h[0],m=h[1];return this.http.get(n,{responseType:"text"}).pipe($t(f=>this.extractData(f,o,s,n,p,m)))}))}checkScaleAndResolution(e,n,o){let s,l;return!o.minResolution&&!o.maxResolution&&!o.minScale&&!o.maxScale?!0:(o.minResolution&&o.maxResolution?e>=o.minResolution&&e<=o.maxResolution&&(l=!0):(o.minResolution&&e>=o.minResolution&&(l=!0),o.maxResolution&&e<=o.maxResolution&&(l=!0)),o.minScale&&o.maxScale?n>o.minScale&&n<o.maxScale&&(s=!0):(o.maxScale&&n<=o.maxScale&&(s=!0),o.minScale&&n>=o.minScale&&(s=!0)),s===!0&&l===!0?!0:l===!0&&!s||s===!0&&!l)}mergeGML(e,n,o){let l=new Up().readFeatures(e);l.length===0&&(l=new pR().readFeatures(e));let h=new Qa([]),p,m=[],f=new _l([]),g,y=l.length,A=this.getQueryParams(n.toLowerCase()).bbox.split(","),k=Fs();h1(k,A);let R=!1,$,H;if(o.options?.source?.options){let ue=o.options.source.options;ue.queryTitle&&(H=ue.queryTitle)}l.map(ue=>{if(H){let _e=ue.getProperties()[H];_e&&($=$?`${$},${_e}`:_e)}let pe=ue.getGeometry().getCoordinates(),Ce=ue.getGeometry().getType();if(!g&&!R&&(g=Ce),!R)switch(Ce){case"Point":y===1?p=new Kn(pe,"XY"):m.push(pe);break;case"LineString":h.appendLineString(new ao(pe,"XY"));break;case"Polygon":f.appendPolygon(new Zo(pe,"XY"));break;case"MultiPolygon":f=new _l(pe,"XY");break;default:return}});let oe;m.length===0&&p?oe={type:p.getType(),coordinates:p.getCoordinates()}:oe={type:"Polygon",coordinates:[this.convexHull(m)]};let se;switch(g){case"LineString":se={type:h.getType(),coordinates:h.getCoordinates()};break;case"Point":se=oe;break;case"Polygon":se={type:f.getType(),coordinates:f.getCoordinates()};break;case"MultiPolygon":se={type:f.getType(),coordinates:f.getCoordinates()};break}let ge={};return H&&(ge[H]=$),[se,ge]}cross(e,n,o){return(e[0]-o[0])*(n[1]-o[1])-(e[1]-o[1])*(n[0]-o[0])}convexHull(e){e.sort((s,l)=>s[0]===l[0]?s[1]-l[1]:s[0]-l[0]);let n=[];for(let s of e){for(;n.length>=2&&this.cross(n[n.length-2],n[n.length-1],s)<=0;)n.pop();n.push(s)}let o=[];for(let s=e.length-1;s>=0;s--){for(;o.length>=2&&this.cross(o[o.length-2],o[o.length-1],e[s])<=0;)o.pop();o.push(e[s])}return o.pop(),n.pop(),n.concat(o)}extractData(e,n,o,s,l,h){let p=n.dataSource,m=this.getAllowedFieldsAndAlias(n),f=[];switch(p.options.queryFormat){case Od.GML3:f=this.extractGML3Data(e,n.zIndex,m);break;case Od.JSON:case Od.GEOJSON:case Od.GEOJSON2:f=this.extractGeoJSONData(e,n.zIndex,m);break;case Od.ESRIJSON:f=this.extractEsriJSONData(e,n.zIndex,m);break;case Od.TEXT:break;case Od.HTML:f=this.extractHtmlData(e,p.queryHtmlTarget,s);break;case Od.HTMLGML2:f=this.extractHtmlData(e,p.queryHtmlTarget,s,l,h);break;case Od.GML2:default:f=this.extractGML2Data(e,n,m);break}if(f.length>0&&(f[0].geometry===null||!f[0].geometry)){let _=this.createGeometryFromUrlClick(s);for(let w of f)w.geometry=_}let g=n.dataSource;if((g.params?.FEATURE_COUNT?new RegExp("FEATURE_COUNT="+this.featureCount):new RegExp("FEATURE_COUNT="+this.defaultFeatureCount)).test(s)&&(g.params?.FEATURE_COUNT&&this.featureCount>1&&f.length===this.featureCount||!g.params?.FEATURE_COUNT&&f.length===this.defaultFeatureCount)){let _=this.messageService.info("igo.geo.query.featureCountMax",void 0,void 0,{value:n.title});this.previousMessageIds.push(_.toastId)}return f.map((_,w)=>{let A=_.properties[p.mapLabel],k;if(n.options.sourceOptions?.type==="wms"){let H=n.options.sourceOptions;k=H?H.excludeAttribute:void 0}let R=this.getQueryTitle(_,n);!R&&f.length>1?R=`${n.title} (${w+1})`:R||(R=n.title);let $=Object.assign({},_.meta||{},{id:Gs(),title:R,mapTitle:A,sourceTitle:n.title,order:1e3-n.zIndex,excludeAttribute:k});return Object.assign(_,{meta:$,projection:p.options.type==="carto"?"EPSG:4326":o.projection})})}createGeometryFromUrlClick(e){let n=this.getQueryParams(e.toLowerCase()),o=n.bbox,s=parseInt(n.width,10),l=parseInt(n.height,10),h=parseInt(n.i||n.x,10),p=parseInt(n.j||n.y,10),m=o.split(","),f=(Math.abs(parseFloat(m[0]))-Math.abs(parseFloat(m[2])))*.05;Math.abs(parseFloat(m[0]))<180&&(f=.045);let g=parseFloat(m[0])+Math.abs(parseFloat(m[0])-parseFloat(m[2]))*h/s-f,y=parseFloat(m[1])+Math.abs(parseFloat(m[1])-parseFloat(m[3]))*p/l-f,_=g+f*2,w=y+f*2,A="POLYGON(("+g+" "+y+", "+g+" "+w+", "+_+" "+w+", "+_+" "+y+", "+g+" "+y+"))",$=new z_().readFeature(A).getGeometry();return{type:$.getType(),coordinates:$.getCoordinates()}}extractGML2Data(e,n,o){let l=new Up().readFeatures(e);if(l.length===0){let h=new pR;try{l=h.readFeatures(e)}catch{console.warn("query.service: Multipolygons are badly managed in mapserver in GML2. Use another format.")}}return l.map(h=>this.featureToResult(h,n,o))}extractGML3Data(e,n,o){let s=new Lr,l=[];try{l=s.readFeatures(e)}catch{console.warn("query.service: GML3 is not well supported")}return l.map(h=>this.featureToResult(h,n,o))}extractGeoJSONData(e,n,o){let s=[];try{s=JSON.parse(e.replace(/(\r|\n)/g," ")).features}catch{console.warn("query.service: Unable to parse geojson",`
`,e)}return s.map(l=>l.meta={id:Gs(),order:1e3-n,alias:o}),s}extractEsriJSONData(e,n,o){if(e)try{if(JSON.parse(e).error)return[]}catch{}return new Nv().readFeatures(e).map(h=>this.featureToResult(h,n,o))}extractHtmlData(e,n,o,s,l){let h=this.getQueryParams(o.toLowerCase()),p=h.crs||h.srs||"EPSG:3857",m=this.createGeometryFromUrlClick(o);n!==iC.BLANK&&n!==iC.IFRAME&&(n=iC.IFRAME);let f=e.toLowerCase().indexOf("<body>"),g=e.toLowerCase().lastIndexOf("</body>")+7;return(0,DAe.default)(e.slice(f,g).replace(/(\r|\n|\s)/g,""))===""||e===""?[]:[{type:Qo,projection:p,properties:Object.assign({target:n,body:e,url:o},l),geometry:s||m}]}getQueryParams(e){let n=e.split("?");if(!n[1])return;let o=n[1].split("&"),s={};return o.forEach(l=>{l=l.split("="),s[l[0]]=decodeURIComponent(l[1]||"")}),s}featureToResult(e,n,o){let s=e.getGeometry(),l=Object.assign({},e.getProperties());delete l.geometry,delete l.GEOMETRIE,delete l.boundedBy,delete l.shape,delete l.SHAPE,delete l.SHAPE_S,delete l.SHAPE_L,delete l.SHAPE_P,delete l.the_geom,delete l.geom,delete l.geom32198;let h;return s&&(h={type:s.getType(),coordinates:s.getCoordinates()}),{type:Qo,projection:void 0,properties:l,geometry:h,meta:{id:Gs(),order:1e3-n,alias:o}}}getQueryUrl(e,n,o=!1,s){let l;if(e.options.queryUrls)return this.getCustomQueryUrl(e,n,s);switch(e.constructor){case Bm:{let h=e,p={INFO_FORMAT:h.params.INFO_FORMAT||this.getMimeInfoFormat(e.options.queryFormat),QUERY_LAYERS:h.params.LAYERS,FEATURE_COUNT:h.params.FEATURE_COUNT||this.defaultFeatureCount};h.params.FEATURE_COUNT&&(this.featureCount=h.params.FEATURE_COUNT),o&&(p.INFO_FORMAT=this.getMimeInfoFormat(Od.GML2)),l=h.ol.getFeatureInfoUrl(n.coordinates,n.resolution,n.projection,p);break}case N2:{let h=e,p="https://"+h.options.account+".carto.com/api/v2/sql?",m="format=GeoJSON",f="&q="+h.options.config.layers[0].options.sql,g=" WHERE ST_Intersects(the_geom_webmercator,ST_BUFFER(ST_SetSRID(ST_POINT(",y=h.options.queryPrecision?h.options.queryPrecision:"1000",_=n.coordinates[0]+","+n.coordinates[1]+"),3857),"+y+"))";l=`${p}${m}${f}${g}${_}`;break}case GF:case HF:{let h=e,p=Math.abs(s[0]-s[2]),m=Math.abs(s[1]-s[3]),g=(p>m?p:m)*.005,y=h.options.queryPrecision?h.options.queryPrecision:g,_=xd(mc([n.coordinates]),y),w=h.options.url+"/"+h.options.layer+"/query/",k=["f=json",`geometry=${encodeURIComponent('{"xmin":'+_[0]+',"ymin":'+_[1]+',"xmax":'+_[2]+',"ymax":'+_[3]+',"spatialReference":{"wkid":102100}}')}`,"geometryType=esriGeometryEnvelope","inSR=102100","spatialRel=esriSpatialRelIntersects","outFields=*","returnGeometry=true","outSR=102100"];l=`${w}?${k.join("&")}`;break}default:break}return l}getMimeInfoFormat(e){let n="application/vnd.ogc.gml",o=Object.keys(Od).find(s=>Od[s]===e);return o&&(n=ry[o]),n}getAllowedFieldsAndAlias(e){let n;return e.options?.source?.options?.sourceFields&&e.options.source.options.sourceFields.length>=1&&(n={},e.options.source.options.sourceFields.forEach(o=>{let s=o.alias?o.alias:o.name;n[o.name]=s})),n}getQueryTitle(e,n){let o;if(n.options?.source?.options){let s=n.options.source.options;s.queryTitle&&(o=this.getLabelMatch(e,s.queryTitle))}return o}getLabelMatch(e,n){let o=n,s=Array.from(n.matchAll(/\$\{([^\{\}]+)\}/g));return s.forEach(l=>{o=o.replace(l[0],e.properties[l[1]])}),s.length===0&&o===n&&(o=e.properties[n]||n),o}getCustomQueryUrl(e,n,o){let s=Ug(n.coordinates,n.resolution,0,[101,101]);return e.options.queryUrls.map(l=>{let h={url:l.url.replace(/\{bbox\}/g,s.join(",")).replace(/\{x\}/g,n.coordinates[0].toString()).replace(/\{y\}/g,n.coordinates[1].toString()).replace(/\{resolution\}/g,n.resolution.toString()).replace(/\{srid\}/g,n.projection.replace("EPSG:",""))};return o&&h.url.replace(/\{xmin\}/g,o[0].toString()).replace(/\{ymin\}/g,o[1].toString()).replace(/\{xmax\}/g,o[2].toString()).replace(/\{ymax\}/g,o[3].toString()),l.maxResolution&&(h.maxResolution=l.maxResolution),l.minResolution&&(h.minResolution=l.minResolution),l.minScale&&(h.minScale=l.minScale),l.maxScale&&(h.maxScale=l.maxScale),h})}static \u0275fac=function(n){return new(n||r)(xe(dr),xe(nl))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Jp=class{sources;constructor(i){this.sources=i}getSources(){return this.sources}getEnabledSources(){return this.getSources().filter(i=>i.enabled===!0)}enableSourcesByType(i){this.getSources().forEach(e=>{e.constructor.type===i?e.enabled=!0:e.enabled=!1})}setParamFromSetting(i,e){i.setParamFromSetting(e)}setWorkspaces(i,e){i.setWorkspaces(e)}};function G2(r){return r.search!==void 0}function sU(r){return r.reverseSearch!==void 0}function are(r){return r.reverseSearch!==void 0&&r.showInPointerSummary===!0}function lre(r,i){return r.properties&&(delete r.properties.geometry,delete r.properties.GEOMETRIE,delete r.properties.boundedBy,delete r.properties.shape,delete r.properties.SHAPE,delete r.properties.SHAPE_S,delete r.properties.SHAPE_L,delete r.properties.SHAPE_P,delete r.properties.the_geom,delete r.properties.geom,delete r.properties.geom32198),r.sourceId=i.getId(),{source:i,data:r,meta:{dataType:Qo,id:r.meta.id,title:r.meta.title,icon:r.meta.icon||"location_on"}}}function uAe(r,i){let e="";return i.split("").forEach((n,o)=>{n!==r.charAt(o)&&(e+=n)}),e}function _I(r,i,e=!1){if(!r||!i)return 0;let n=e?r:r.toString().toLowerCase(),o=e?i:i.toString().toLowerCase(),s=uAe(n,o),l=uAe(o,n),h=s+l,p=0;return h.length&&(p=h.length/n.length*100),100-Math.floor(p)}var yI=(()=>{class r{searchSourceService;mapService;storageService;analyticsService;searchTerm=Vl(null);constructor(e,n,o,s,l){this.searchSourceService=e,this.mapService=n,this.storageService=o,this.analyticsService=s,l&&this.handleAnalytics()}handleAnalytics(){dk(()=>{let e=this.searchTerm();e!=null&&this.analyticsService.trackSearch(e,null)})}search(e,n={}){if(!this.termIsValid(e))return[];this.searchTerm.set(e);let o=this.mapService.getMap()?.projection||"EPSG:3857",s=FAe(e,o,{forceNA:n.forceNA});if(s.lonLat)return this.reverseSearch(s.lonLat,{distance:s.radius,conf:s.conf});s.message&&console.log(s.message),n.extent=this.mapService.getMap()?.viewController.getExtent("EPSG:4326");let l;return n.getEnabledOnly||n.getEnabledOnly===void 0?l=this.searchSourceService.getEnabledSources():l=this.searchSourceService.getSources(),n.sourceId?l=l.filter(h=>h.getId()===n.sourceId):n.searchType&&(l=l.filter(h=>h.getType()===n.searchType)),l=l.filter(G2),this.searchSources(l,e,n)}reverseSearch(e,n,o=!1){let s=o?are:sU,l=this.searchSourceService.getEnabledSources().filter(s),h=this.storageService.get("reverseSearchCoordsFormatEnabled")||!1;return this.reverseSearchSources(l,e,n||{},h)}searchSources(e,n,o){return e.map(s=>({request:s.search(n,o),reverse:!1,source:s}))}reverseSearchSources(e,n,o,s){return e.map(l=>({request:l.reverseSearch(n,o,s),reverse:!0,source:l}))}termIsValid(e){return typeof e=="string"&&e!==""}static \u0275fac=function(n){return new(n||r)(xe(Jp),xe(eL),xe(wo),xe(w$),xe("searchAnalytics",8))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),uEe=(()=>{class r{cdRef;http;languageService;directionsService;directionsSourceService;searchService;queryService;messageService;watcher;projection="EPSG:4326";hasOsrmPrivateAccess=!1;twoSourcesAvailable=!1;zoomOnActiveRoute$$;storeEmpty$$;storeChange$$;routesQueries$$=[];selectStopInteraction;translateStop;selectedRoute;focusOnStop=!1;isTranslating=!1;previousStops=[];searchs$$=[];authenticated$$;contextUri;stopsStore;stopsFeatureStore;routesFeatureStore;stepsFeatureStore;debounce=200;length=2;coordRoundedDecimals=6;zoomOnActiveRoute$=new Dt;authenticated$;get directionControlIsActive(){return!this.queryService.queryEnabled}get interactions(){return[this.selectStopInteraction,this.translateStop,this.selectedRoute]}get enabledProfileHasAuthorization(){return this.directionsSourceService.sources[0].getEnabledProfile().authorization}constructor(e,n,o,s,l,h,p,m){this.cdRef=e,this.http=n,this.languageService=o,this.directionsService=s,this.directionsSourceService=l,this.searchService=h,this.queryService=p,this.messageService=m}ngOnInit(){this.authenticated$$=this.authenticated$.subscribe(e=>{if(e){let n=this.directionsSourceService.sources[0].getProfileWithAuthorization();n&&this.http.get(n.authorization.url).subscribe(o=>{this.hasOsrmPrivateAccess=o[n.authorization.property]})}}),this.twoSourcesAvailable=this.directionsSourceService.sources[0].profiles.length===2,this.queryService.queryEnabled=!1,this.initEntityStores(),setTimeout(()=>{xpt(this.stopsFeatureStore,this.languageService),Spt(this.routesFeatureStore,this.languageService),Ipt(this.stepsFeatureStore),this.initOlInteraction()},1)}ngOnDestroy(){this.queryService.queryEnabled=!0,this.storeEmpty$$.unsubscribe(),this.storeChange$$.unsubscribe(),this.routesQueries$$.map(e=>e.unsubscribe()),this.zoomOnActiveRoute$$.unsubscribe(),this.authenticated$$.unsubscribe(),this.freezeStores(),this.stopsFeatureStore.empty&&this.stopsFeatureStore.map.layerController.remove(this.stopsFeatureStore.layer),this.routesFeatureStore.empty&&this.routesFeatureStore.map.layerController.remove(this.routesFeatureStore.layer)}freezeStores(){this.interactions.map(e=>this.routesFeatureStore.layer.map.ol.removeInteraction(e)),this.stopsFeatureStore.deactivateStrategyOfType(Uf),this.routesFeatureStore.deactivateStrategyOfType(Uf),this.stepsFeatureStore.deactivateStrategyOfType(Uf)}initEntityStores(){this.watcher=new bv(this.stopsStore,this.cdRef),this.monitorEmptyEntityStore(),this.monitorEntityStoreChange(),this.monitorActiveRouteZoom()}monitorActiveRouteZoom(){this.zoomOnActiveRoute$$=this.zoomOnActiveRoute$.subscribe(()=>{if(this.routesFeatureStore.count>=1){let e=this.routesFeatureStore.all().find(n=>n.properties.active);if(e){let n=this.stopsStore.all().map(h=>us(h.coordinates,"EPSG:4326","EPSG:3857")),o=e.geometry.coordinates,l=[...n,...o].reduce(([h,p,m,f],[g,y])=>[Math.min(h,g),Math.min(p,y),Math.max(m,g),Math.max(f,y)],[1/0,1/0,-1/0,-1/0]);this.routesFeatureStore.layer.map.viewController.zoomToExtent(l)}}})}initOlInteraction(){this.selectStopInteraction=new i2({layers:[this.stopsFeatureStore.layer.ol],hitTolerance:7,condition:e=>e.type==="pointermove"&&!e.dragging}),this.translateStop=new Nee({features:this.selectStopInteraction.getFeatures()}),this.translateStop.on("translating",e=>{this.isTranslating=!0,this.executeStopTranslation(e.features)}),this.translateStop.on("translateend",e=>{this.isTranslating=!1,this.executeStopTranslation(e.features)}),this.selectedRoute=new i2({layers:[this.routesFeatureStore.layer.ol],condition:S1e,hitTolerance:7,filter:e=>e.get("type")===nC.Route&&e.get("active")&&!this.isTranslating}),this.selectedRoute.on("select",e=>{if(this.focusOnStop===!1){let n=us(e.mapBrowserEvent.coordinate,this.routesFeatureStore.layer.map.projection,this.projection),o=WF(this.stopsStore);o.text=P2(n,this.coordRoundedDecimals).join(", "),o.coordinates=[n[0],n[1]]}}),this.interactions.map(e=>this.routesFeatureStore.layer.map.ol.addInteraction(e))}onStopInputHasFocusChange(e){e?this.routesFeatureStore.layer.map.ol.removeInteraction(this.selectedRoute):this.routesFeatureStore.layer.map.ol.addInteraction(this.selectedRoute)}executeStopTranslation(e){if(e.getLength()===0)return;let n=e.getArray()[0],o=n.getId(),s=us(n.getGeometry().getCoordinates(),this.stopsFeatureStore.layer.map.projection,this.projection),l=this.stopsStore.get(o),h=$f(s,this.coordRoundedDecimals);l.coordinates=h,l.text=P2(s,this.coordRoundedDecimals).join(", "),this.stopsStore.update(l)}monitorEmptyEntityStore(){this.storeEmpty$$=this.stopsStore.count$.pipe(cm()).subscribe(e=>{if(e<2){if(WF(this.stopsStore),this.stopsStore.count===2){this.stopsStore.storeInitialized$.next(!0);return}this.stopsStore.storeInitialized$.next(!1)}this.routesQueries$$.map(n=>n.unsubscribe())})}monitorEntityStoreChange(){this.storeChange$$=this.stopsStore.entities$.pipe(cr(this.debounce)).subscribe(e=>{this.handleStopDiff(e),ere(this.stopsStore),this.handleStopsFeature(),this.getRoutes(this.isTranslating)})}cancelSearch(){this.searchs$$.map(e=>e.unsubscribe())}handleStopDiff(e){let n=e.map(l=>Ln.removeUndefined({id:l.id,text:l.text,coordinates:l.coordinates})),o=c4.findChanges(this.previousStops,n,["coordinates"]),s=o.added.concat(o.modified);s&&s.map(l=>{let h=l.newValue;if(h){let p=this.stopsStore.get(h.id),m=p.text;if(!m||m.length===0)return;let f=FAe(m,this.stopsFeatureStore.layer.map.projection),g=!1;f.lonLat&&(g=!0);let y=this.searchService.search(m,{searchType:"Feature"});this.cancelSearch();let _=y.map(w=>w.request.pipe($t(A=>A.filter(k=>g?k.data.geometry.type==="Point"&&k.data.geometry:k.data.geometry))));this.searchs$$=_.map(w=>w.pipe($t(A=>A.filter(k=>g?k.data.geometry.type==="Point"&&k.data.geometry:k.data.geometry))).subscribe(A=>{if(A.length>0){let k=A[0].source,R=A[0].meta,$=A.map(oe=>oe.data);p.searchProposals||(p.searchProposals=[]),p.searchProposals=p.searchProposals.filter(oe=>oe.type===(g?jF.Coord:jF.Text));let H=p.searchProposals.find(oe=>oe.source===k);H?H.results=$:p.searchProposals.push({type:g?jF.Coord:jF.Text,source:k,meta:R,results:$})}this.cdRef.detectChanges()}))}}),this.previousStops=n}handleStopsFeature(){let e=this.stopsStore.all();e.filter(s=>s.coordinates).map(s=>this.addStopOverlay(s)),this.stopsFeatureStore.all().map(s=>{this.stopsStore.get(s.properties.id)||this.stopsFeatureStore.delete(s)}),e.filter(s=>!s.coordinates).map(s=>{let l=this.stopsFeatureStore.get(s.id);l&&this.stopsFeatureStore.delete(l)})}getRoutes(e=!1){let n=this.stopsStore.view.all().filter(h=>h.coordinates);if(n.length<2){this.routesFeatureStore.deleteMany(this.routesFeatureStore.all());return}let o=n.map(h=>$f(h.coordinates,this.coordRoundedDecimals)),s={overview:!0,steps:!1,alternatives:!1,continue_straight:!1};this.routesQueries$$.map(h=>h.unsubscribe());let l=this.directionsService.route(o,e?s:void 0);l&&this.routesQueries$$.push(l.subscribe(h=>{this.routesFeatureStore.deleteMany(this.routesFeatureStore.all()),h.map(p=>Apt(this.routesFeatureStore,p,this.projection,p===h[0]))}))}addStopOverlay(e){Tpt(e,this.stopsFeatureStore,this.projection,this.languageService)}onToggleDirectionsControl(e){this.queryService.queryEnabled=!e;let n=this.routesFeatureStore.layer.map.ol;this.interactions.map(o=>e?n.addInteraction(o):n.removeInteraction(o))}onTogglePrivateModeControl(e){this.directionsSourceService.sources[0].profiles.forEach(n=>n.enabled=!1),e?(this.directionsSourceService.sources[0].profiles.find(n=>n.authorization).enabled=!0,this.messageService.alert(this.languageService.translate.instant("igo.geo.directions.forestRoadsWarning.text"),this.languageService.translate.instant("igo.geo.directions.forestRoadsWarning.title"))):this.directionsSourceService.sources[0].profiles.find(n=>!n.authorization).enabled=!0,this.getRoutes()}static \u0275fac=function(n){return new(n||r)(ie(Ti),ie(dr),ie(wn),ie(z$),ie(L2),ie(yI),ie(tL),ie(nl))};static \u0275cmp=gt({type:r,selectors:[["igo-directions"]],inputs:{contextUri:"contextUri",stopsStore:"stopsStore",stopsFeatureStore:"stopsFeatureStore",routesFeatureStore:"routesFeatureStore",stepsFeatureStore:"stepsFeatureStore",debounce:"debounce",length:"length",coordRoundedDecimals:"coordRoundedDecimals",zoomOnActiveRoute$:"zoomOnActiveRoute$",authenticated$:"authenticated$"},standalone:!0,features:[yt],decls:8,vars:15,consts:[[1,"directions-options"],[3,"change","checked","labelPosition"],[3,"checked","labelPosition","change",4,"ngIf"],[3,"stopInputHasFocus","coordRoundedDecimals","projection","stopsFeatureStore","stopsStore","debounce","length"],[3,"stepsFeatureStore","contextUri","zoomOnActiveRoute$","routesFeatureStore","stopsStore",4,"ngIf"],[3,"stepsFeatureStore","routesFeatureStore"],[3,"stepsFeatureStore","contextUri","zoomOnActiveRoute$","routesFeatureStore","stopsStore"]],template:function(n,o){n&1&&(ne(0,"div",0)(1,"mat-slide-toggle",1),Oe("change",function(l){return o.onToggleDirectionsControl(l.checked)}),Ye(2),Ne(3,"translate"),ce(),We(4,act,3,5,"mat-slide-toggle",2),ce(),ne(5,"igo-directions-inputs",3),Oe("stopInputHasFocus",function(l){return o.onStopInputHasFocusChange(l)}),ce(),We(6,lct,1,5,"igo-directions-buttons",4),wt(7,"igo-directions-results",5)),n&2&&(q(),ee("checked",o.directionControlIsActive)("labelPosition","before"),q(),Qt(" ",je(3,13,"igo.geo.directions.toggle.activateControl")," "),q(2),ee("ngIf",o.hasOsrmPrivateAccess&&o.twoSourcesAvailable),q(),ee("coordRoundedDecimals",o.coordRoundedDecimals)("projection",o.projection)("stopsFeatureStore",o.stopsFeatureStore)("stopsStore",o.stopsStore)("debounce",o.debounce)("length",o.length),q(),ee("ngIf",o.routesFeatureStore.all().length>0),q(),ee("stepsFeatureStore",o.stepsFeatureStore)("routesFeatureStore",o.routesFeatureStore))},dependencies:[$a,gn,JV,QM,WAe,qAe,YAe,On,hn],styles:[".directions-options[_ngcontent-%COMP%]{display:flex;flex-flow:column;align-items:center;margin:0 12px}.directions-options[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{width:100%;padding:10px}.directions-options[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mdc-form-field{width:100%}.directions-options[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mdc-label{margin-left:0;margin-right:auto;width:auto;padding-right:0}.directions-options[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mdc-slide-toggle{margin-left:auto;margin-right:0}"]})}return r})(),cre=(()=>{class r{static forRoot(){return{ngModule:r}}static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({imports:[uEe,qAe,WAe,YAe]})}return r})();var Lne=(()=>{class r{filterByOgc(e,n){let o=new Nm().formatProcessedOgcFilter(n,e.options.params.LAYERS);e.ol.updateParams({FILTER:o})}setOgcWFSFiltersOptions(e){let n=e.options,o=new Nm;n.ogcFilters.enabled&&n.ogcFilters.filters&&(n.ogcFilters.filters=o.checkIgoFiltersProperties(n.ogcFilters.filters,n.paramsWFS.fieldNameGeometry,new Cf({code:n.paramsWFS.srsName}),!0),n.ogcFilters.interfaceOgcFilters||(n.ogcFilters.interfaceOgcFilters=o.defineInterfaceFilterSequence(n.ogcFilters.filters,n.paramsWFS.fieldNameGeometry)))}setOgcWMSFiltersOptions(e){let n=e.options,o=new Nm;n.ogcFilters.enabled&&n.ogcFilters.filters?(n.ogcFilters.filters=o.checkIgoFiltersProperties(n.ogcFilters.filters,n.fieldNameGeometry,void 0,!0),n.ogcFilters.interfaceOgcFilters||(n.ogcFilters.interfaceOgcFilters=o.defineInterfaceFilterSequence(n.ogcFilters.filters,n.fieldNameGeometry)),this.filterByOgc(e,o.buildFilter(n.ogcFilters.filters,void 0,void 0,void 0,e.options)),n.filtered=!0):(n.ogcFilters.filters=void 0,n.ogcFilters.interfaceOgcFilters=[],n.filtered=!1)}static \u0275fac=function(n){return new(n||r)};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})();var Vpt=(()=>{class r{wktToFeature(e,n,o){return new z_().readFeature(e,{dataProjection:n,featureProjection:o})}extentToWkt(e,n,o){let s=Su(n,o,e);this.roundCoordinateArray(s,e,0);let l=`POLYGON((
      ${n[0]} ${n[1]},
      ${n[0]} ${n[3]},
      ${n[2]} ${n[3]},
      ${n[2]} ${n[1]},
      ${n[0]} ${n[1]}))`,h=`LINESTRING(
      ${n[0]} ${n[1]},
      ${n[0]} ${n[3]},
      ${n[2]} ${n[3]},
      ${n[2]} ${n[1]},
      ${n[0]} ${n[1]})`,p=`MULTIPOINT(
        ${n[0]} ${n[1]},
        ${n[0]} ${n[3]},
        ${n[2]} ${n[3]},
        ${n[2]} ${n[1]})`;return{wktPoly:l,wktLine:h,wktMultiPoints:p}}roundCoordinateArray(e,n,o=0){let l=Vi(n).getUnits();return["ft","m","us-ft"].indexOf(l)!==-1&&(e=this.roundArray(e,o)),e}roundArray(e,n=0){let o=0;for(;o<e.length;)e[o]=e[o].toFixed(n),o++;return e}snrcToWkt(e,n){e=e.toLowerCase();let o,s={1:{from:-56,to:-64},2:{from:-64,to:-72},3:{from:-72,to:-80},4:{from:-80,to:-88},5:{from:-88,to:-96},6:{from:-96,to:-104},7:{from:-104,to:-112},8:{from:-112,to:-120},9:{from:-120,to:-128},10:{from:-128,to:-136}},l={1:{from:44,to:48},2:{from:48,to:52},3:{from:52,to:56},4:{from:56,to:60},5:{from:60,to:64},6:{from:64,to:68},7:{from:68,to:72},8:{from:72,to:76},9:{from:76,to:-128}},h=[["m","n","o","p"],["l","k","j","i"],["e","f","g","h"],["d","c","b","a"]],p=[["13","14","15","16"],["12","11","10","09"],["05","06","07","08"],["04","03","02","01"]],m=/\d{2,3}[a-p][0,1][0-9]/gi,f=/\d{2,3}[a-p]/gi,g=/\d{2,3}/gi,y=!1,_=!1,w=!1;if(m.test(e)?w=!0:f.test(e)?_=!0:g.test(e)&&(y=!0),y?e+="a01":_&&(e+="01"),/\d{2,3}[a-p][0,1][0-9]/gi.test(e)){let A=/(?=[a-p])/gi,k=e.split(A),R=k[0],$=k[1][0],H=k[1].split($)[1],oe=1;R.length===3&&(oe=2);let se=R.substring(0,oe),ge=R.substring(oe),ue=8,pe=4,Ce=2,_e=1,de=.5,te=.25,Se=0,Te=0,De=0,Le=0;h.forEach(Qe=>{Qe.indexOf($)!==-1&&(Te=h.indexOf(Qe),Se=Qe.indexOf($))}),p.forEach(Qe=>{Qe.indexOf(H)!==-1&&(Le=p.indexOf(Qe),De=Qe.indexOf(H))});let Me=0,ze=0,Ve=0,$e=0,nt=ue,be=pe;_?(Me=Se*Ce,ze=Te*_e,Ve=0,$e=0,nt=Ce,be=_e):w&&(Me=Se*Ce,ze=Te*_e,Ve=De*de,$e=Le*te,nt=de,be=te);let we={ul:[s[se].to+Me+Ve,l[ge].to-ze-$e]};we.lr=[we.ul[0]+nt,we.ul[1]-be],we.ur=[we.ul[0],we.ul[1]-be],we.ll=[we.ul[0]+nt,we.ul[1]],we.ul=us([we.ul[0],we.ul[1]],"EPSG:4326",n),we.lr=us([we.lr[0],we.lr[1]],"EPSG:4326",n),we.ur=us([we.ur[0],we.ur[1]],"EPSG:4326",n),we.ll=us([we.ll[0],we.ll[1]],"EPSG:4326",n),we.ul=this.roundCoordinateArray(we.ul,n,0),we.lr=this.roundCoordinateArray(we.lr,n,0),we.ur=this.roundCoordinateArray(we.ur,n,0),we.ll=this.roundCoordinateArray(we.ll,n,0),o="POLYGON(("+[we.ul.join(" "),we.ur.join(" "),we.lr.join(" "),we.ll.join(" "),we.ul.join(" ")].join(",")+"))";let ke="LINESTRING("+[we.ul.join(" "),we.ur.join(" "),we.lr.join(" "),we.ll.join(" "),we.ul.join(" ")].join(",")+")",et="MULTIPOINT("+[we.ul.join(" "),we.ur.join(" "),we.lr.join(" "),we.ll.join(" ")].join(",")+")";return{wktPoly:o,wktLine:ke,wktMultiPoints:et}}}static \u0275fac=function(n){return new(n||r)};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),X$=(()=>{class r{defaultStepMillisecond=6e4;step(e,n){return e.options.stepDate?e.options.stepDate:n.step}stepMillisecond(e,n){let o=nn.default.duration(this.step(e,n)).asMilliseconds();return o===0?this.defaultStepMillisecond:o}stepIsYearDuration(e){let n=nn.default.duration(e);return n.years()!==0&&n.months()===0&&n.weeks()===0&&n.days()===0&&n.hours()===0&&n.minutes()===0}stepIsMonthDuration(e){let n=nn.default.duration(e);return n.months()!==0&&n.weeks()===0&&n.days()===0&&n.hours()===0&&n.minutes()===0}stepIsWeekDuration(e){let n=nn.default.duration(e);return n.weeks()!==0&&n.days()===7&&n.hours()===0&&n.minutes()===0}stepIsDayDuration(e){let n=nn.default.duration(e);return n.days()!==0&&n.hours()===0&&n.minutes()===0}stepIsHourDuration(e){let n=nn.default.duration(e);return n.hours()!==0&&n.minutes()===0}stepIsMinuteDuration(e){return nn.default.duration(e).minutes()!==0}dateToNumber(e){let n=new Date;return e&&(n=new Date(e)),n.getTime()}addStep(e,n){return(0,nn.default)(e).add(n,"milliseconds").toDate()}subtractStep(e,n){return(0,nn.default)(e).subtract(n,"milliseconds").toDate()}static \u0275fac=function(n){return new(n||r)};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),$pt=(()=>{class r{ogcFilterTimeService;currentFilter;begin;max;datasource;changeProperty=new it;slider;interval;sliderValue=1;calculatedStep=0;_defaultDisplayFormat="DD/MM/YYYY HH:mm A";_defaultSliderInterval=2e3;playIcon="play_circle";resetIcon="replay";get sliderInterval(){return this.currentFilter.sliderInterval===void 0?this._defaultSliderInterval:this.currentFilter.sliderInterval}get displayFormat(){return this.currentFilter.sliderOptions?.displayFormat?this.currentFilter.sliderOptions.displayFormat:this.currentFilter.displayFormat?this.currentFilter.displayFormat:this._defaultDisplayFormat}get beginMillisecond(){return this.ogcFilterTimeService.dateToNumber(this.begin)}get maxMillisecond(){return this.ogcFilterTimeService.dateToNumber(this.max)}get stepMillisecond(){return this.ogcFilterTimeService.stepMillisecond(this.datasource,this.currentFilter)}constructor(e){this.ogcFilterTimeService=e,this.sliderDisplayWith=this.sliderDisplayWith.bind(this)}ngOnInit(){this.calculateStep(),this.handleSliderInput({value:1})}sliderDisplayWith(e){let n=new Date(this.beginMillisecond+(e-1)*this.stepMillisecond);if(this.ogcFilterTimeService.stepIsYearDuration(this.ogcFilterTimeService.step(this.datasource,this.currentFilter))){let o=nn.default.duration(this.ogcFilterTimeService.step(this.datasource,this.currentFilter)).years();n=(0,nn.default)(this.beginMillisecond).add((e-1)*o,"year").toDate()}else if(this.ogcFilterTimeService.stepIsMonthDuration(this.ogcFilterTimeService.step(this.datasource,this.currentFilter))){let o=nn.default.duration(this.ogcFilterTimeService.step(this.datasource,this.currentFilter)).months();n=(0,nn.default)(this.beginMillisecond).add((e-1)*o,"month").toDate()}return(0,nn.default)(n).format(this.displayFormat)}playFilter(){this.interval?this.stopFilter():(this.playIcon="pause_circle",this.interval=setInterval(()=>{if(this.slider.step<this.calculatedStep){let e="_increment",n="_emitInputEvent";this.slider[e](1),this.slider[n]()}else this.stopFilter()},this.sliderInterval,this))}stopFilter(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.playIcon="play_circle"}resetFilter(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.playIcon="play_circle",this.slider.step=1,this.slider["_emitInputEvent"]()}handleSliderInput(e){if(e){if(this.ogcFilterTimeService.stepIsYearDuration(this.ogcFilterTimeService.step(this.datasource,this.currentFilter))){let n=nn.default.duration(this.ogcFilterTimeService.step(this.datasource,this.currentFilter)).years(),o=(0,nn.default)(this.beginMillisecond).add((e.value-1)*n,"year").toDate(),s=(0,nn.default)(o).add(n,"year").toDate();this.changeProperty.next({value:(0,nn.default)(o).toDate().toISOString(),pos:1,refreshFilter:!1}),this.changeProperty.next({value:(0,nn.default)(s).toDate().toISOString(),pos:2,refreshFilter:!0})}else if(this.ogcFilterTimeService.stepIsMonthDuration(this.ogcFilterTimeService.step(this.datasource,this.currentFilter))){let n=nn.default.duration(this.ogcFilterTimeService.step(this.datasource,this.currentFilter)).months(),o=(0,nn.default)(this.beginMillisecond).add((e.value-1)*n,"month").toDate(),s=(0,nn.default)(o).add(n,"month").toDate();this.changeProperty.next({value:(0,nn.default)(o).startOf("month").toDate().toISOString(),pos:1,refreshFilter:!1}),this.changeProperty.next({value:(0,nn.default)(s).toDate().toISOString(),pos:2,refreshFilter:!0})}else if(this.ogcFilterTimeService.stepIsDayDuration(this.ogcFilterTimeService.step(this.datasource,this.currentFilter))||this.ogcFilterTimeService.stepIsHourDuration(this.ogcFilterTimeService.step(this.datasource,this.currentFilter))||this.ogcFilterTimeService.stepIsMinuteDuration(this.ogcFilterTimeService.step(this.datasource,this.currentFilter))){let n=new Date(this.beginMillisecond+this.stepMillisecond*(e.value-1));this.changeProperty.next({value:n.toISOString(),pos:1,refreshFilter:!1}),this.changeProperty.next({value:new Date(this.ogcFilterTimeService.addStep(n.toISOString(),this.stepMillisecond)).toISOString(),pos:2,refreshFilter:!0})}}}calculateStep(){for(let e=1;this.maxMillisecond-(this.beginMillisecond+e*this.stepMillisecond)>=-1;e++)this.calculatedStep=e}static \u0275fac=function(n){return new(n||r)(ie(X$))};static \u0275cmp=gt({type:r,selectors:[["igo-ogc-filter-time-slider"]],viewQuery:function(n,o){if(n&1&&Ni(v$,5),n&2){let s;Yt(s=Kt())&&(o.slider=s.first)}},inputs:{currentFilter:"currentFilter",begin:"begin",max:"max",datasource:"datasource"},outputs:{changeProperty:"changeProperty"},standalone:!0,features:[Bi([X$]),yt],decls:11,vars:7,consts:[["ngSlider",""],["ngSliderThumb","matSliderThumb"],[1,"slider-container"],["id","time-slider","thumbLabel","",3,"ngModelChange","step","min","max","ngModel","displayWith"],["matSliderThumb","",3,"input"],["mat-icon-button","","color","primary",3,"click"]],template:function(n,o){if(n&1){let s=dt();ne(0,"div",2)(1,"mat-slider",3,0),bs("ngModelChange",function(h){return Re(s),Os(o.sliderValue,h)||(o.sliderValue=h),Fe(h)}),ne(3,"input",4,1),Oe("input",function(){Re(s);let h=ji(2),p=ji(4);return Fe(o.handleSliderInput({source:p,parent:h,value:p.value}))}),ce()(),ne(5,"button",5),Oe("click",function(){return Re(s),Fe(o.playFilter())}),ne(6,"mat-icon"),Ye(7),ce()(),ne(8,"button",5),Oe("click",function(){return Re(s),Fe(o.resetFilter())}),ne(9,"mat-icon"),Ye(10),ce()()()}n&2&&(q(),ee("step",1)("min",1)("max",o.calculatedStep),vs("ngModel",o.sliderValue),ee("displayWith",o.sliderDisplayWith),q(6),Si(o.playIcon),q(3),Si(o.resetIcon))},dependencies:[_Te,v$,Gie,$l,sc,gm,bn,Cr,jn,er],styles:["[_nghost-%COMP%]     input{text-align:center!important;margin:auto 5px!important}[_nghost-%COMP%]   .datetime-container[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .slider-container[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .datetime-input[_ngcontent-%COMP%]{display:inline-block;margin:5px 25px}[_nghost-%COMP%]   .date-input[_ngcontent-%COMP%]{width:120px;margin-right:25px}[_nghost-%COMP%]   .time-input[_ngcontent-%COMP%]{display:inherit;margin-right:25px}[_nghost-%COMP%]   .hour-input[_ngcontent-%COMP%], [_nghost-%COMP%]   .minute-input[_ngcontent-%COMP%]{width:40px}[_nghost-%COMP%]   .minute-input[_ngcontent-%COMP%]{margin-left:10px}"]})}return r})(),hEe=(()=>{class r{ogcFilterTimeService;datasource;currentFilter;changeProperty=new it;beginHours;endHours;beginMinutes;endMinutes;beginHourFormControl=new QT;beginMinuteFormControl=new QT;endHourFormControl=new QT;endMinuteFormControl=new QT;_beginValue;_endValue;_defaultMin="1900-01-01";_defaultMax="2052-01-06";_defaultDisplayFormat="DD/MM/YYYY HH:mm A";_defaultSliderModeEnabled=!0;ogcFilterOperator=tn;sliderMode=!1;defaultStepMillisecond=6e4;options;onlyYearBegin;onlyYearEnd;calendarTypeYear=!1;resetIcon="replay";filterStateDisable;endDatepickerTime;beginDatepickerTime;beginTime;endTime;filterOriginConfig;get step(){return this.datasource.options.stepDate?this.datasource.options.stepDate:this.currentFilter.step}get stepMilliseconds(){let e=nn.default.duration(this.step).asMilliseconds();return e===0?this.defaultStepMillisecond:e}set beginValue(e){this._beginValue=e}get beginValue(){return this._beginValue}set endValue(e){this._endValue=e}get endValue(){return this._endValue}get sliderInterval(){return this.currentFilter.sliderInterval===void 0?2e3:this.currentFilter.sliderInterval}get maxDate(){return this.datasource.options.maxDate?this.datasource.options.maxDate:this._defaultMax}get displayFormat(){return this.currentFilter.displayFormat?this.currentFilter.displayFormat:this._defaultDisplayFormat}filterBeginFunction;filterEndFunction;constructor(e){this.ogcFilterTimeService=e}ngOnInit(){this.filterOriginConfig=this.datasource.options.ogcFilters.filters,this.currentFilter.sliderOptions&&(this.currentFilter.sliderOptions.enabled=this.currentFilter.sliderOptions.enabled!==void 0?this.currentFilter.sliderOptions.enabled:this._defaultSliderModeEnabled),this.beginValue=this.parseFilter(this.handleMin()),this.endValue=this.parseFilter(this.handleMax()),this.onlyYearBegin=this.beginValue.getUTCFullYear(),this.onlyYearEnd=this.endValue.getUTCFullYear(),this.calendarTypeYear=this.isCalendarYearMode(),this.setFilterStateDisable(),this.updateHoursMinutesArray(),this.updateValues(),this.dateFilter(this.filterBeginFunction,"begin"),this.dateFilter(this.filterEndFunction,"end")}parseFilter(e){if(e){if(isNaN(new Date(e).getTime())){if(e.search("now")>=0){let n=e.match(/years|months|weeks|days|hours|seconds/);if(e.match(/\+/)){let o=parseInt(e.substring(e.indexOf("+")+1,n.index),10);return(0,nn.default)().add(o,n[0]).toDate()}if(e.match(/\-/)){let o=parseInt(e.substring(e.indexOf("-")+1,n.index),10);return(0,nn.default)().subtract(o,n[0]).toDate()}return new Date}if(e.search("today")>=0){let n=(0,nn.default)().endOf("day").toDate(),o=e.match(/years|months|weeks|days|hours|seconds/);if(e.match(/\+/)){let s=parseInt(e.substring(e.indexOf("+")+1,o.index),10);return(0,nn.default)(n).add(s,o[0]).toDate()}if(e.match(/\-/)){let s=parseInt(e.substring(e.indexOf("-")+1,o.index),10);return(0,nn.default)(n).subtract(s,o[0]).toDate()}return n}return new Date}}else return new Date;return this.currentFilter.calendarModeYear?this.getDateFromStringWithoutTime(e):e?new Date(e):new Date}changeTemporalProperty(e,n,o=!0){typeof e=="string"&&(e=new Date(e));let s=this.getDateTime(e,n);if(this.isCalendarYearMode()){let l;n===1?(this.beginValue=e,this.onlyYearBegin=this.beginValue.getFullYear(),l=`${this.onlyYearBegin}-01-01`):(this.endValue=e,this.onlyYearEnd=this.endValue.getFullYear(),l=`${this.onlyYearEnd}-12-31`),this.changeProperty.next({value:l,pos:n,refreshFilter:o});return}n===2&&this.calendarType()==="date"&&!this.sliderMode&&(s=(0,nn.default)(s).endOf("day").toDate()),n===1?(this.beginValue=s,this.restrictedToStep()&&this.changeTemporalProperty(this.ogcFilterTimeService.addStep(s,this.stepMilliseconds),2,o)):this.endValue=s,this.updateHoursMinutesArray(),this.changeProperty.next({value:s.toISOString(),pos:n,refreshFilter:o})}handleDate(e){if(!(!e||e===""))return typeof e=="string"&&this.currentFilter.calendarModeYear?this.getDateFromStringWithoutTime(e):new Date(e)}calendarType(){return this.currentFilter.calendarModeYear?"year":this.stepMilliseconds<864e5?"datetime":"date"}isCalendarYearMode(){return this.calendarType()==="year"}yearOnlyInputChange(e,n,o){let s=e.target.value,l=this.getDateFromStringWithoutTime(s);this.yearSelected(l,n,o)}yearSelected(e,n,o,s=!0){this.ogcFilterTimeService.stepIsYearDuration(this.step)&&(n&&n.close(),o==="end"?e=(0,nn.default)(e).endOf("year").toDate():o==="begin"&&this.restrictedToStep()&&!this.calendarTypeYear&&this.yearSelected(e,void 0,"end"),this.changeTemporalProperty(e,o==="begin"?1:2,s))}monthSelected(e,n,o,s=!0){this.ogcFilterTimeService.stepIsMonthDuration(this.step)&&(n&&n.close(),o==="end"?e=(0,nn.default)(e).endOf("month").toDate():o==="begin"&&this.restrictedToStep()&&this.monthSelected(e,void 0,"end"),this.changeTemporalProperty(e,o==="begin"?1:2,s))}calendarView(){let e=this.stepMilliseconds,n=Math.abs(this.parseFilter(this.currentFilter.end).getTime()-this.parseFilter(this.currentFilter.begin).getTime());return this.ogcFilterTimeService.stepIsYearDuration(this.step)?"multi-year":this.ogcFilterTimeService.stepIsMonthDuration(this.step)?"year":e<864e5&&n<864e5?"clock":"month"}dateFilter(e,n){let o=new Date(n),s=o.getTime()-new Date(this.handleMin()).getTime();if(this.ogcFilterTimeService.stepIsYearDuration(this.step)){let l=(0,nn.default)(o).diff((0,nn.default)(this.handleMin()),"years",!0);if(e==="end"){let h=(0,nn.default)(o).add(1,"d"),p=(0,nn.default)(h).diff((0,nn.default)(this.handleMin()),"years",!0);this.filterEndFunction=p%nn.default.duration(this.step).asYears()===0;return}else if(e==="begin"){this.filterBeginFunction=l%nn.default.duration(this.step).asYears()===0;return}}else if(this.ogcFilterTimeService.stepIsMonthDuration(this.step)){let l=(0,nn.default)(o).diff((0,nn.default)(this.handleMin()),"months",!0);if(e==="end"){let h=(0,nn.default)(o).add(1,"d"),p=(0,nn.default)(h).diff((0,nn.default)(this.handleMin()),"months",!0);this.filterEndFunction=p%nn.default.duration(this.step).asMonths()===0;return}else if(e==="begin"){this.filterBeginFunction=l%nn.default.duration(this.step).asMonths()===0;return}}else if(this.ogcFilterTimeService.stepIsWeekDuration(this.step)){let l=(0,nn.default)(o).diff((0,nn.default)(this.handleMin()),"weeks",!0);if(e==="end"){let h=(0,nn.default)(o).add(1,"d"),p=(0,nn.default)(h).diff((0,nn.default)(this.handleMin()),"weeks",!0);this.filterEndFunction=p%nn.default.duration(this.step).asWeeks()===0;return}else if(e==="begin"){this.filterBeginFunction=l%nn.default.duration(this.step).asWeeks()===0;return}}else if(this.ogcFilterTimeService.stepIsDayDuration(this.step)){let l=(0,nn.default)(o).diff((0,nn.default)(this.handleMin()),"days",!0);if(e==="end"){let h=(0,nn.default)(o).add(1,"d"),m=(0,nn.default)(h).diff((0,nn.default)(this.handleMin()),"days",!0)%nn.default.duration(this.step).asDays();this.filterEndFunction=m<1e-7&&m>-1e-7||m===0;return}else if(e==="begin"){let h=l%nn.default.duration(this.step).asDays()+1;this.filterBeginFunction=h<1e-7&&h>-1e-7&&h!==0||h===1;return}}else if(this.ogcFilterTimeService.stepIsHourDuration(this.step)){if(e==="end"){let l=(0,nn.default)(o).diff((0,nn.default)(this.handleMin()),"hours",!0);this.filterEndFunction=l%nn.default.duration(this.step).asHours()===0;return}else if(e==="begin"){let l=(0,nn.default)(o).diff((0,nn.default)(this.handleMin()),"hours",!0);this.filterBeginFunction=l%nn.default.duration(this.step).asHours()===0;return}}else if(this.ogcFilterTimeService.stepIsMinuteDuration(this.step)){if(e==="end"){this.filterEndFunction=!0;return}else if(e==="begin"){this.filterBeginFunction=!0;return}}this.filterEndFunction=s%this.stepMilliseconds===0,this.filterBeginFunction=s%this.stepMilliseconds===0}getDateTime(e,n){let o=new Date(e),s;if(!this.sliderMode)switch(n){case 1:if(this.currentFilter.calendarModeYear){s=o.setHours(0,0);break}else{s=o.setHours(this.beginHourFormControl.value,this.beginMinuteFormControl.value);break}case 2:if(this.currentFilter.calendarModeYear){s=o.setHours(0,0);break}else{s=o.setHours(this.endHourFormControl.value,this.endMinuteFormControl.value);break}}return new Date(s||o)}handleMinuteIncrement(){return this.ogcFilterTimeService.stepIsMinuteDuration(this.step)?this.stepMilliseconds<36e5?this.stepMilliseconds/1e3===60?1:this.stepMilliseconds/1e3:this.stepMilliseconds%36e5/60:this.ogcFilterTimeService.stepIsHourDuration(this.step)?60:1}handleHourIncrement(){return this.ogcFilterTimeService.stepIsHourDuration(this.step)?this.stepMilliseconds/1e3/60/60:1}fullBeginHoursArray(e){e?this.beginHours=Array.from({length:(this.endHourFormControl.value-0)/this.handleHourIncrement()+1},(n,o)=>0+o*this.handleHourIncrement()):this.beginHours=Array.from({length:23/this.handleHourIncrement()+1},(n,o)=>0+o*this.handleHourIncrement()),this.beginHourFormControl.setValue(this.beginValue.getHours())}fullEndHoursArray(e){e?this.endHours=Array.from({length:(23-this.beginHourFormControl.value)/this.handleHourIncrement()+1},(n,o)=>this.beginHourFormControl.value+o*this.handleHourIncrement()):this.endHours=Array.from({length:23/this.handleHourIncrement()+1},(n,o)=>0+o*this.handleHourIncrement()),this.endHourFormControl.setValue(this.endValue.getHours())}fullBeginMinutesArray(e){e?this.beginMinutes=Array.from({length:(this.endMinuteFormControl.value-0)/this.handleMinuteIncrement()+1},(n,o)=>0+o*this.handleMinuteIncrement()):this.beginMinutes=Array.from({length:59/this.handleMinuteIncrement()+1},(n,o)=>0+o*this.handleMinuteIncrement()),this.beginMinuteFormControl.setValue(this.beginValue.getMinutes())}fullEndMinutesArray(e){e?this.endMinutes=Array.from({length:(59-this.beginMinuteFormControl.value)/this.handleMinuteIncrement()+1},(n,o)=>this.beginMinuteFormControl.value+o*this.handleMinuteIncrement()):this.endMinutes=Array.from({length:59/this.handleMinuteIncrement()+1},(n,o)=>0+o*this.handleMinuteIncrement()),this.endMinuteFormControl.setValue(this.endValue.getMinutes())}updateHoursMinutesArray(){let e=new Date(this.beginValue),n=new Date(this.endValue);e.setHours(0,0)===n.setHours(0,0)?(this.fullBeginHoursArray(!0),this.fullEndHoursArray(!0),this.beginValue.getHours()===this.endValue.getHours()&&(this.fullBeginMinutesArray(!0),this.fullEndMinutesArray(!0))):(this.fullBeginHoursArray(),this.fullEndHoursArray(),this.fullBeginMinutesArray(),this.fullEndMinutesArray())}updateValues(){this.changeTemporalProperty(this.beginValue,1,!1),this.changeTemporalProperty(this.endValue,2,!0)}restrictedToStep(){return this.currentFilter.restrictToStep?this.currentFilter.restrictToStep:!1}handleMin(){return this.currentFilter.begin?this.currentFilter.begin:this.datasource.options.minDate?this.datasource.options.minDate:this._defaultMin}handleMax(){return this.currentFilter.end?this.currentFilter.end:this.datasource.options.maxDate?this.datasource.options.maxDate:this._defaultMax}changePropertyByPass(e){this.changeProperty.next(e)}modeChange(e){e.checked||this.updateValues()}setFilterStateDisable(){this.currentFilter?this.filterStateDisable=!this.currentFilter.active:this.filterStateDisable=!1,this.calendarType()==="datetime"&&(this.filterStateDisable===!0?(this.beginHourFormControl.disable(),this.beginMinuteFormControl.disable(),this.endHourFormControl.disable(),this.endMinuteFormControl.disable()):(this.beginHourFormControl.enable(),this.beginMinuteFormControl.enable(),this.endHourFormControl.enable(),this.endMinuteFormControl.enable()))}getDateFromStringWithoutTime(e){let n,o="01",s="01";if(e.length===10){let l=e.split("-");if(l.length!==3)throw new Error("Error in config date begin-end for ogcFilter: Date without time format need to be YYYY-MM-DD or YYYY");n=l[0],o=l[1],s=l[2]}else if(e.length===4)n=e;else return new Date(e);return new Date(`${n}-${o}-${s} 00:00:00`)}resetFilter(){let e,n,o,s;this.calendarTypeYear?(this.filterOriginConfig.end==="today"?s=`${new Date().toLocaleDateString("en-CA").substring(0,4)}-01-01`:s=`${this.filterOriginConfig.end.substring(0,4)}-01-01`,o=`${this.filterOriginConfig.begin.substring(0,4)}-01-01`,e=this.getDateFromStringWithoutTime(o),n=this.getDateFromStringWithoutTime(s)):(e=this.parseFilter(this.filterOriginConfig.begin),n=this.parseFilter(this.filterOriginConfig.end),o=e.toISOString(),s=n.toISOString()),(this.currentFilter.begin!==o||this.currentFilter.end!==s)&&(this.beginValue=e,this.endValue=n,this.updateValues())}toggleFilterState(){this.currentFilter.active===!0?this.currentFilter.active=!1:this.currentFilter.active=!0,this.setFilterStateDisable(),this.updateValues()}static \u0275fac=function(n){return new(n||r)(ie(X$))};static \u0275cmp=gt({type:r,selectors:[["igo-ogc-filter-time"]],viewQuery:function(n,o){if(n&1&&(Ni(cct,5),Ni(dct,5),Ni(uct,5),Ni(hct,5)),n&2){let s;Yt(s=Kt())&&(o.endDatepickerTime=s.first),Yt(s=Kt())&&(o.beginDatepickerTime=s.first),Yt(s=Kt())&&(o.beginTime=s.first),Yt(s=Kt())&&(o.endTime=s.first)}},inputs:{datasource:"datasource",currentFilter:"currentFilter"},outputs:{changeProperty:"changeProperty"},standalone:!0,features:[Bi([X$,ZB()]),yt],decls:4,vars:3,consts:[["beginDatepicker",""],["beginYear",""],["endDatepicker",""],["endYear",""],["begin",""],["end",""],[1,"datetime-container"],[3,"ngModel","ngModelChange","change",4,"ngIf"],["class","slider-container",4,"ngIf"],[4,"ngIf"],[3,"ngModelChange","change","ngModel"],[1,"slider-container"],[3,"changeProperty","begin","max","currentFilter","datasource"],["class","year-input-container",4,"ngIf"],["class","datetime-input-container",4,"ngIf"],[1,"year-input-container"],["subscriptSizing","dynamic",1,"year-input"],["matInput","",1,"year-input-only-year",3,"change","value","disabled"],["matSuffix","",3,"for","disabled"],["panelClass","datepicker-year",3,"yearSelected","startView","startAt"],["matInput","","enabled","false","readonly","true",1,"year-input-hide",3,"matDatepicker","value","min","max"],[1,"actions-container"],["mat-icon-button","","color","primary",1,"reset-button",3,"click","matTooltip","disabled"],["tooltip-position","below","matTooltipShowDelay","500",1,"toggle-filter-state",3,"change","matTooltip","checked"],[1,"datetime-input-container"],[1,"datetime-input"],["subscriptSizing","dynamic",1,"date-input"],["matInput","",3,"dateChange","matDatepicker","placeholder","matDatepickerFilter","value","min","max","disabled"],[1,"filler"],[3,"yearSelected","monthSelected","startView","startAt"],["class","time-input",4,"ngIf"],["class","datetime-input",4,"ngIf"],[1,"time-input"],["subscriptSizing","dynamic",1,"hour-input"],[3,"selectionChange","formControl"],[3,"value",4,"ngFor","ngForOf"],["subscriptSizing","dynamic",1,"minute-input"],[3,"value"]],template:function(n,o){n&1&&(ne(0,"div",6),We(1,pct,3,4,"mat-slide-toggle",7)(2,mct,2,4,"div",8)(3,Sct,3,2,"div",9),ce()),n&2&&(q(),ee("ngIf",o.currentFilter.sliderOptions==null?null:o.currentFilter.sliderOptions.enabled),q(),ee("ngIf",o.sliderMode),q(),ee("ngIf",!o.sliderMode))},dependencies:[gn,JV,QM,$l,sc,gm,$pt,Wa,dc,Mg,l_,pu,hu,ej,JB,xE,yP,bn,Cr,Er,Ar,jn,er,ah,sh,lc,uu,gw,Ps,cc,On,hn],styles:["[_nghost-%COMP%]     input{text-align:center!important;margin:auto 5px!important}[_nghost-%COMP%]   .slider-container[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .datetime-input-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}[_nghost-%COMP%]   .datetime-input-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:last-child){margin-right:8px}[_nghost-%COMP%]   .datetime-input[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .date-input[_ngcontent-%COMP%]{width:154px}[_nghost-%COMP%]   .actions-container[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .time-input[_ngcontent-%COMP%]{margin-top:16px}[_nghost-%COMP%]   .time-input[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:last-child){margin-right:8px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]   .time-input[_ngcontent-%COMP%]{margin-top:4px}}[_nghost-%COMP%]   .hour-input[_ngcontent-%COMP%], [_nghost-%COMP%]   .minute-input[_ngcontent-%COMP%]{width:100px}[_nghost-%COMP%]   .year-input-container[_ngcontent-%COMP%]{display:flex;width:100%}[_nghost-%COMP%]   .year-input-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:not(:last-child){margin-right:4px}[_nghost-%COMP%]   .year-input-hide[_ngcontent-%COMP%]{width:120px;margin-right:25px;display:none}[_nghost-%COMP%]   .year-input-only-year[_ngcontent-%COMP%]{width:120px;margin-right:25px;text-align:left!important}[_nghost-%COMP%]     .datepicker-year   .mat-calendar-arrow{display:none}[_nghost-%COMP%]     .datepicker-year   .mat-calendar-period-button{pointer-events:none}[_nghost-%COMP%]     .datepicker-year   .mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover{background-color:#0000001f;border-radius:999px}"]})}return r})(),Upt=(()=>{class r{wktService;ogcFilterOperator=tn;filteredValues$;filteredFields$;allOgcFilterOperators;ogcFilterOperators$=new mt(void 0);igoSpatialSelectors;value="";inputOperator;selectedField$=new mt(void 0);fields$=new mt([]);color="primary";disabled;currentFilterIsSpatial$=new mt(!1);defaultStepMillisecond=6e3;inputClearable;refreshFilters;datasource;map;currentFilter;set snrc(e){let n=/^\d{2}[a-l][0,1][0-9]$/gi,o=/^\d{2}[a-p]$/gi;(/^\d{2}$/gi.test(e)||o.test(e)||n.test(e))&&(this._snrc=e,this.currentFilter.igoSNRC=e)}get snrc(){return this._snrc}_snrc="";floatLabel;get activeFilters(){return this.datasource.options.ogcFilters.interfaceOgcFilters.filter(e=>e.active===!0)}get allowedOperators(){return new Nm().computeAllowedOperators(this.fields$.value,this.currentFilter.propertyName,this.datasource.options.ogcFilters.allowedOperatorsType)}constructor(e){this.wktService=e,this.allOgcFilterOperators=new Nm().operators,this.ogcFilterOperators$.next(this.allOgcFilterOperators),this.igoSpatialSelectors=[{type:"fixedExtent"},{type:"snrc"}]}ngOnInit(){if(this.datasource.options.sourceFields){let e=this.datasource.options.sourceFields.filter(n=>n.excludeFromOgcFilters===void 0||!n.excludeFromOgcFilters);e.map(n=>{n.values&&n.values.sort()}),this.fields$.next(e)}this.updateFieldsList(),this.selectedField$.next(this.fields$.value.find(e=>e.name===this.currentFilter.propertyName)),this.updateValuesList(),this.selectedField$.subscribe(()=>{this.ogcFilterOperators$.next(this.allowedOperators),Object.keys(this.allowedOperators).indexOf(this.currentFilter.operator)===-1&&(this.currentFilter.operator=Object.keys(this.allowedOperators)[0],this.currentFilter.operator=Object.keys(this.allowedOperators)[0]),this.updateValuesList()}),this.currentFilterIsSpatial()}updateFieldsList(e){this.filteredFields$=e&&e.length>0?Vt(this._filterFields(e)):this.fields$,this.fields$.value.find(n=>n.name===e)&&this.changeField(e)}updateValuesList(e,n){this.filteredValues$=e&&e.length>0?Vt(this._filterValues(e)):this.selectedField$.value?Vt(this.selectedField$.value.values):Vt([]),e&&e.length>=1&&this.changeProperty(e,n)}_filterFields(e){let n=new RegExp(e.normalize("NFD").replace(/[\u0300-\u036f]/g,""),"gi");return this.fields$.value.filter(o=>n.test(o.alias.normalize("NFD").replace(/[\u0300-\u036f]/g,"")))}_filterValues(e){let n=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"").toString().normalize("NFD").replace(/[\u0300-\u036f]/g,""),"gi");return this.selectedField$.value?.values?.filter(o=>o&&n.test(o.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"")))}clearSelectedField(){this.currentFilter.propertyName="",this.selectedField$.next(void 0),this.clearProperty()}isClearable(e){let n=this.detectProperty(e);if(n)return this.currentFilter[n]}clearProperty(e){let n=this.detectProperty(e);if(n)return this.currentFilter[n]=""}toggleFilterState(e){this.datasource.options.ogcFilters.interfaceOgcFilters.find(n=>n.filterid===this.currentFilter.filterid).active=e.checked,this.refreshFilters()}deleteFilter(){let e=this.datasource.options.ogcFilters;e.interfaceOgcFilters=e.interfaceOgcFilters.filter(n=>n.filterid!==this.currentFilter.filterid),this.refreshFilters()}changeLogical(e){this.currentFilter.parentLogical=e,this.refreshFilters()}changeOperator(e){this.currentFilter.operator=e,this.currentFilterIsSpatial(),this.currentFilterIsSpatial$.value&&this.currentFilter.wkt_geometry.length===0?this.changeSpatialSelector(this.currentFilter.igoSpatialSelector):this.refreshFilters()}changeField(e){this.currentFilter.propertyName=e,this.selectedField$.next(this.fields$.value.find(n=>n.name===this.currentFilter.propertyName)),this.refreshFilters()}changeCaseSensitive(e){this.currentFilter.matchCase=e.checked,this.refreshFilters()}changeProperty(e,n,o=!0){let s=this.detectProperty(n);s&&(this.datasource.options.ogcFilters.interfaceOgcFilters.find(l=>l.filterid===this.currentFilter.filterid)[s]=e,o&&this.refreshFilters())}changeNumericProperty(e,n){this.changeProperty(parseFloat(e),n)}changeSpatialSelector(e){this.currentFilter.igoSpatialSelector=e,e==="fixedExtent"&&this.changeMapExtentGeometry(!1),this.currentFilterIsSpatial(),this.refreshFilters()}changeSNRC(e){this.snrc=e,this.changeSNRCGeometry()}changeSNRCGeometry(){this.datasource.options.ogcFilters.interfaceOgcFilters.find(n=>n.filterid===this.currentFilter.filterid)&&(this.snrc&&this.currentFilter.igoSpatialSelector==="snrc"&&(this.currentFilter.wkt_geometry=this.wktService.snrcToWkt(this.snrc,this.map.projection).wktPoly),this.refreshFilters())}changeMapExtentGeometry(e=!0){this.datasource.options.ogcFilters.interfaceOgcFilters.find(o=>o.filterid===this.currentFilter.filterid)&&(this.currentFilter.igoSpatialSelector==="fixedExtent"&&(this.currentFilter.wkt_geometry=this.wktService.extentToWkt(this.map.projection,this.map.viewController.getExtent(),this.map.projection).wktPoly),e&&this.refreshFilters())}detectProperty(e){switch(this.currentFilter.operator){case tn.PropertyIsNotEqualTo:case tn.PropertyIsEqualTo:case tn.PropertyIsGreaterThan:case tn.PropertyIsGreaterThanOrEqualTo:case tn.PropertyIsLessThan:case tn.PropertyIsLessThanOrEqualTo:return"expression";case tn.PropertyIsLike:return"pattern";case tn.PropertyIsBetween:return e&&e===1?"lowerBoundary":e&&e===2?"upperBoundary":void 0;case tn.During:return e&&e===1?"begin":e&&e===2?"end":void 0;default:return}}currentFilterIsSpatial(){let e=!1;this.currentFilter&&(e=[tn.Contains,tn.Intersects,tn.Within].indexOf(this.currentFilter.operator)!==-1),this.currentFilterIsSpatial$.next(e)}isTemporalOperator(){return this.currentFilter.operator.toLowerCase()===this.ogcFilterOperator.During.toLowerCase()}static \u0275fac=function(n){return new(n||r)(ie(Vpt))};static \u0275cmp=gt({type:r,selectors:[["igo-ogc-filter-form"]],inputs:{refreshFilters:"refreshFilters",datasource:"datasource",map:"map",currentFilter:"currentFilter",floatLabel:"floatLabel"},standalone:!0,features:[yt],decls:44,vars:76,consts:[["autoCompleteField","matAutocomplete"],["autoCompleteValues","matAutocomplete"],["autoDualValueOperator1","matAutocomplete"],["autoDualValueOperator2","matAutocomplete"],[1,"ogc-filter-form-container"],["tooltip-position","below","matTooltipShowDelay","500",3,"click","change","matTooltip","checked"],[3,"ngClass"],["tooltip-position","above","matTooltipShowDelay","500",3,"selectionChange","disabled","value","matTooltip"],["tooltip-position","above","matTooltipShowDelay","500",3,"value","matTooltip"],["class","field",3,"floatLabel","mouseenter","mouseleave",4,"ngIf"],[3,"ngClass","floatLabel"],["tooltip-position","below","matTooltipShowDelay","500",3,"selectionChange","matTooltip","disabled","value"],["tooltip-position","above","matTooltipShowDelay","500",3,"value","matTooltip",4,"ngFor","ngForOf"],["class","spatialSelector",4,"ngIf"],["class","singleInput",3,"floatLabel","mouseenter","mouseleave",4,"ngIf"],[1,"igo-layer-button-group"],["mat-icon-button","","collapsibleButton","","tooltip-position","below","matTooltipShowDelay","500","color","warn",3,"click","matTooltip"],["class","snrc",3,"floatLabel","mouseenter","mouseleave",4,"ngIf"],[4,"ngIf"],["class","dualInput",3,"floatLabel","mouseenter","mouseleave",4,"ngIf"],[3,"datasource","currentFilter","changeProperty",4,"ngIf"],[1,"field",3,"mouseenter","mouseleave","floatLabel"],["matInput","","tooltip-position","above","matTooltipShowDelay","500",3,"input","placeholder","disabled","matAutocomplete","value","matTooltip"],[3,"optionSelected"],["matTooltipShowDelay","500",3,"value","id","matTooltip",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"disabled","click",4,"ngIf"],["matTooltipShowDelay","500",3,"value","id","matTooltip"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click","disabled"],[1,"spatialSelector"],[3,"selectionChange","disabled","value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"singleInput",3,"mouseenter","mouseleave","floatLabel"],["matTooltipShowDelay","500",3,"value","matTooltip",4,"ngFor","ngForOf"],["matTooltipShowDelay","500",3,"value","matTooltip"],[1,"snrc",3,"mouseenter","mouseleave","floatLabel"],["matInput","","tooltip-position","above","matTooltipShowDelay","500",3,"input","placeholder","value","matTooltip"],["matSuffix","","mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"disabled","matTooltip","click",4,"ngIf"],["matSuffix","","mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"click","disabled","matTooltip"],[1,"dualInput",3,"mouseenter","mouseleave","floatLabel"],["matInput","","type","number",3,"input","placeholder","disabled","matAutocomplete","value"],[3,"changeProperty","datasource","currentFilter"]],template:function(n,o){n&1&&(ne(0,"div",4)(1,"mat-checkbox",5),Ne(2,"translate"),Oe("click",function(l){return l.stopPropagation()})("change",function(l){return o.toggleFilterState(l)}),ce(),ne(3,"mat-form-field",6)(4,"mat-select",7),Ne(5,"translate"),Oe("selectionChange",function(l){return o.changeLogical(l.value)}),ne(6,"mat-option",8),Ne(7,"translate"),Ye(8),Ne(9,"translate"),ce(),ne(10,"mat-option",8),Ne(11,"translate"),Ye(12),Ne(13,"translate"),ce()()(),We(14,Oct,13,22,"mat-form-field",9),Ne(15,"async"),Ne(16,"async"),Ne(17,"async"),Ne(18,"async"),ne(19,"mat-form-field",10),Ne(20,"async"),Ne(21,"async"),ne(22,"mat-select",11),Ne(23,"translate"),Ne(24,"translate"),Oe("selectionChange",function(l){return o.changeOperator(l.value)}),We(25,Pct,4,7,"mat-option",12),Ne(26,"async"),Ne(27,"keyvalue"),ce()(),We(28,Fct,3,3,"mat-form-field",13),Ne(29,"async"),We(30,Bct,8,12,"mat-form-field",14),ne(31,"div",15)(32,"button",16),Ne(33,"translate"),Oe("click",function(){return o.deleteFilter()}),ne(34,"mat-icon"),Ye(35,"delete"),ce()()(),We(36,Vct,4,7,"mat-form-field",17),Ne(37,"async"),We(38,Uct,2,1,"ng-container",18),Ne(39,"async"),ce(),ne(40,"div",4),We(41,Hct,8,11,"mat-form-field",19)(42,Yct,8,11,"mat-form-field",19),ce(),We(43,Kct,1,2,"igo-ogc-filter-time",20)),n&2&&(q(),ee("matTooltip",je(2,27,"igo.geo.filter.toggleFilterState"))("checked",o.currentFilter.active),q(2),ee("ngClass",Oy(67,Ict,o.activeFilters.indexOf(o.currentFilter)!==0&&o.currentFilter.active===!0,o.activeFilters.indexOf(o.currentFilter)===0||o.currentFilter.active!==!0)),q(),ee("disabled",!o.currentFilter.active)("value",o.currentFilter.parentLogical)("matTooltip",o.currentFilter.parentLogical?je(5,29,"igo.geo.operators.tooltip."+o.currentFilter.parentLogical):""),q(2),ee("value",o.ogcFilterOperator.And)("matTooltip",je(7,31,"igo.geo.operators.tooltip.And")),q(2),Qt(" ",je(9,33,"igo.geo.operators.And")," "),q(2),ee("value",o.ogcFilterOperator.Or)("matTooltip",je(11,35,"igo.geo.operators.tooltip.Or")),q(2),Qt(" ",je(13,37,"igo.geo.operators.Or")," "),q(2),ee("ngIf",je(15,39,o.currentFilterIsSpatial$)===!1&&je(16,41,o.fields$)&&je(17,43,o.fields$).length>0&&je(18,45,o.fields$)[0].name!==""),q(5),ee("ngClass",Oy(70,Tct,je(20,47,o.currentFilterIsSpatial$)===!1,je(21,49,o.currentFilterIsSpatial$)))("floatLabel",o.floatLabel),q(3),ee("matTooltip",o.currentFilter.operator?je(23,51,"igo.geo.operators.tooltip."+o.currentFilter.operator):je(24,53,"igo.geo.filter.selectOperator"))("disabled",!o.currentFilter.active)("value",o.currentFilter.operator),q(3),ee("ngForOf",je(27,57,je(26,55,o.ogcFilterOperators$))),q(3),ee("ngIf",je(29,59,o.currentFilterIsSpatial$)),q(2),ee("ngIf",lw(73,Act).indexOf(o.detectProperty())!==-1),q(2),ee("matTooltip",je(33,61,"igo.geo.filter.removeFilter")),q(4),ee("ngIf",je(37,63,o.currentFilterIsSpatial$)&&o.currentFilter.igoSpatialSelector==="snrc"),q(2),ee("ngIf",je(39,65,o.currentFilterIsSpatial$)&&o.currentFilter.igoSpatialSelector==="fixedExtent"),q(3),ee("ngIf",!o.isTemporalOperator()&&lw(74,Ect).indexOf(o.detectProperty(1))!==-1),q(),ee("ngIf",!o.isTemporalOperator()&&lw(75,Mct).indexOf(o.detectProperty(2))!==-1),q(),ee("ngIf",o.isTemporalOperator()))},dependencies:[yv,jg,Er,Ar,Wa,dc,l_,qr,ah,sh,lc,cc,gn,pu,hu,s1,o1,gf,Ps,bn,Cr,jn,er,hEe,kr,eN,On,hn],styles:["[_nghost-%COMP%]{width:100%;padding:5px 10px}[_nghost-%COMP%]     .mat-mdc-form-field .mat-icon svg{width:1em;height:1em;color:#d3d3d3}[_nghost-%COMP%]   .ogc-filter-form-container[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .mat-mdc-select-arrow[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]   .mat-mdc-slide-toggle[_ngcontent-%COMP%]{margin-top:10px}[_nghost-%COMP%]   .logical[_ngcontent-%COMP%]{flex-flow:column nowrap;width:100%;max-width:60px;margin-right:5px}[_nghost-%COMP%]   .logicalHidden[_ngcontent-%COMP%]{width:0px;visibility:hidden;max-width:0px}[_nghost-%COMP%]     .logical .mat-mdc-select-arrow{visibility:hidden}[_nghost-%COMP%]     .logicalHidden .mat-mdc-select-arrow{visibility:hidden}[_nghost-%COMP%]   .field[_ngcontent-%COMP%]{width:150px;margin-right:5px}[_nghost-%COMP%]     .field .mat-mdc-select-arrow{visibility:hidden}[_nghost-%COMP%]   .operator[_ngcontent-%COMP%]{width:150px;margin-right:5px;text-align:center}[_nghost-%COMP%]     .operator .mat-mdc-select-arrow{visibility:hidden}[_nghost-%COMP%]   .spatialSelector[_ngcontent-%COMP%]{width:110px;margin-right:5px}[_nghost-%COMP%]     .spatialSelector .mat-mdc-select-arrow{visibility:hidden}[_nghost-%COMP%]   .singleInput[_ngcontent-%COMP%]{width:150px;margin-right:5px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]   .singleInput[_ngcontent-%COMP%]{width:27%}}[_nghost-%COMP%]   .snrc[_ngcontent-%COMP%]{width:110px;margin-right:5px}[_nghost-%COMP%]     .singleInput .mat-mdc-select-arrow{visibility:hidden}[_nghost-%COMP%]   .dualInput[_ngcontent-%COMP%]{width:150px;margin-right:5px}[_nghost-%COMP%]     .dualInput .mat-mdc-select-arrow{visibility:hidden}[_nghost-%COMP%]   .igo-layer-button-group[_ngcontent-%COMP%]{display:flex;padding-top:5px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:flex}"]})}return r})(),zpt=(()=>{class r{ogcFilterService;formBuilder;domService;configService;cdRef;sel;matAutocomplete;refreshFilters;datasource;map;checkboxesIndex=5;radioButtonsIndex=5;baseIndex=5;get currentFilter(){return this._currentFilter}set currentFilter(e){this._currentFilter=e,this._currentFilter?.sliderOptions&&(this._currentFilter.sliderOptions.enabled=!1)}_currentFilter;inputChangeAutocomplete=new Dt;ogcFilterOperator=tn;form;ogcFilterWriter;color="primary";selectAllSelected=!1;selectEnabled$=new mt(void 0);selectEnableds$=new mt([]);autocompleteEnableds$=new mt([]);filteredOgcAutocomplete={};applyFiltersTimeout;get ogcFiltersSelectors(){let e=[];return this.datasource?.options?.ogcFilters?.pushButtons&&e.push(this.datasource?.options?.ogcFilters?.pushButtons),this.datasource?.options?.ogcFilters?.checkboxes&&e.push(this.datasource?.options?.ogcFilters?.checkboxes),this.datasource?.options?.ogcFilters?.radioButtons&&e.push(this.datasource?.options?.ogcFilters?.radioButtons),this.datasource?.options?.ogcFilters?.select&&e.push(this.datasource?.options?.ogcFilters?.select),this.datasource?.options?.ogcFilters?.autocomplete&&e.push(this.datasource?.options?.ogcFilters?.autocomplete),e.sort((n,o)=>n.order<o.order?-1:n.order>o.order?1:0),e}get currentPushButtonsGroup(){return this.form.get("pushButtonsGroup").value}set currentPushButtonsGroup(e){this.form.patchValue({pushButtonsGroup:e})}get currentCheckboxesGroup(){return this.form.get("checkboxesGroup").value}set currentCheckboxesGroup(e){this.form.patchValue({checkboxesGroup:e})}get currentRadioButtonsGroup(){return this.form.get("radioButtonsGroup").value}set currentRadioButtonsGroup(e){this.form.patchValue({radioButtonsGroup:e})}get currentSelectGroup(){return this.form.get("selectGroup").value}set currentSelectGroup(e){this.form.patchValue({selectGroup:e}),this.cdRef.detectChanges()}get currentAutocompleteGroup(){return this.form.get("autocompleteGroup").value}set currentAutocompleteGroup(e){this.form.patchValue({autocompleteGroup:e}),this.cdRef.detectChanges()}get selectEnabled(){return this.selectEnabled$.value}set selectEnabled(e){this.selectEnabled$.next(e),clearTimeout(this.applyFiltersTimeout),this.currentSelectGroup.computedSelectors.forEach(n=>{n.selectors?.forEach(o=>{e===o?o.enabled=!0:o.enabled=!1})}),this.applyFiltersTimeout=setTimeout(()=>{this.applyFilters()},750)}get selectEnableds(){return this.selectEnableds$.value}set selectEnableds(e){this.selectEnableds$.next(e),clearTimeout(this.applyFiltersTimeout),this.currentSelectGroup.computedSelectors.forEach(n=>{n.selectors?.forEach(o=>{e.includes(o)?o.enabled=!0:o.enabled=!1})}),this.applyFiltersTimeout=setTimeout(()=>{this.applyFilters()},750)}get autocompleteEnableds(){return this.autocompleteEnableds$.value}set autocompleteEnableds(e){this.autocompleteEnableds$.next(e),clearTimeout(this.applyFiltersTimeout),this.currentAutocompleteGroup.computedSelectors.forEach(n=>{n.selectors?.forEach(o=>{o.enabled=!1;for(let s of e)s===o.title&&(o.enabled=!0)})}),this.applyFiltersTimeout=setTimeout(()=>{this.applyFilters()},750)}checkedStatus(e){return this.autocompleteEnableds.includes(e)}constructor(e,n,o,s,l){this.ogcFilterService=e,this.formBuilder=n,this.domService=o,this.configService=s,this.cdRef=l,this.ogcFilterWriter=new Nm,this.buildForm()}buildForm(){this.form=this.formBuilder.group({pushButtons:[""],radioButtons:[""],pushButtonsGroup:["",[Dl.required]],checkboxesGroup:["",[Dl.required]],radioButtonsGroup:["",[Dl.required]],selectGroup:["",[Dl.required]],select:[""],selectMulti:[""],autocompleteGroup:["",[Dl.required]],autocomplete:[""]})}getPushButtonsGroups(){if(this.datasource?.options?.ogcFilters?.pushButtons)return this.datasource.options.ogcFilters.pushButtons.groups}getCheckboxesGroups(){if(this.datasource?.options?.ogcFilters?.checkboxes)return this.datasource.options.ogcFilters.checkboxes.groups}getRadioButtonsGroups(){if(this.datasource?.options?.ogcFilters?.radioButtons)return this.datasource.options.ogcFilters.radioButtons.groups}getSelectGroups(){if(this.datasource?.options?.ogcFilters?.select)return this.datasource.options.ogcFilters.select.groups}getAutocompleteGroups(){if(this.datasource?.options?.ogcFilters?.autocomplete)return this.datasource.options.ogcFilters.autocomplete.groups}ngOnInit(){return st(this,null,function*(){this.datasource.options.ogcFilters&&(this.datasource.options.ogcFilters.pushButtons&&(this.currentPushButtonsGroup=this.datasource.options.ogcFilters.pushButtons.groups.find(e=>e.enabled)||this.datasource.options.ogcFilters.pushButtons.groups[0]),this.datasource.options.ogcFilters.checkboxes&&(this.currentCheckboxesGroup=this.datasource.options.ogcFilters.checkboxes.groups.find(e=>e.enabled)||this.datasource.options.ogcFilters.checkboxes.groups[0]),this.datasource.options.ogcFilters.radioButtons&&(this.currentRadioButtonsGroup=this.datasource.options.ogcFilters.radioButtons.groups.find(e=>e.enabled)||this.datasource.options.ogcFilters.radioButtons.groups[0]),this.datasource.options.ogcFilters.select&&(this.currentSelectGroup=this.datasource.options.ogcFilters.select.groups.find(e=>e.enabled)||this.datasource.options.ogcFilters.select.groups[0],this.initSelectEnabled(),yield this.getSelectDomValues()),this.datasource.options.ogcFilters.autocomplete&&(this.currentAutocompleteGroup=this.datasource.options.ogcFilters.autocomplete.groups.find(e=>e.enabled)||this.datasource.options.ogcFilters.autocomplete.groups[0],this.initAutocompleteEnableds(),yield this.getAutocompleteDomValues()),this.applyFilters()),this.form.get("pushButtonsGroup").valueChanges.pipe(cr(750)).subscribe(()=>{this.onPushButtonsChangeGroup(),this.applyFilters()}),this.form.get("checkboxesGroup").valueChanges.pipe(cr(750)).subscribe(()=>{this.onCheckboxesChangeGroup(),this.applyFilters()}),this.form.get("radioButtonsGroup").valueChanges.pipe(cr(750)).subscribe(()=>{this.onRadioButtonsChangeGroup(),this.applyFilters()}),this.form.get("selectGroup").valueChanges.pipe(cr(750)).subscribe(()=>{this.onSelectChangeGroup(),this.applyFilters()}),this.form.get("autocompleteGroup").valueChanges.pipe(cr(750)).subscribe(()=>{this.onAutocompleteChangeGroup(),this.applyFilters()}),this.form.get("pushButtons").valueChanges.pipe(cr(750)).subscribe(()=>{this.applyFilters()}),this.form.get("radioButtons").valueChanges.pipe(cr(750)).subscribe(()=>{this.applyFilters()}),this.inputChangeAutocomplete.pipe().subscribe(()=>{this.getAutocompleteDomValues()})})}initSelectEnabled(){let e=[],n;this.currentSelectGroup.computedSelectors.forEach(o=>{o.multiple?(o.selectors?.forEach(s=>{s.enabled&&e.push(s)}),this.selectEnableds=e,this.form.controls.selectMulti.setValue(e)):(o.selectors?.forEach(s=>{s.enabled&&(n=s)}),this.form.controls.select.reset(n),this.selectEnabled$.subscribe(s=>{this.form.controls.select.value!==s&&this.form.controls.select.setValue(s)}),this.selectEnabled=n)})}initAutocompleteEnableds(){let e=[];this.currentAutocompleteGroup.computedSelectors.forEach(n=>{n.selectors?.forEach(o=>{if(o.enabled){let s={id:o.filters.expression,value:o.title};e.push(o.title),this.form.controls.autocomplete.setValue(s)}}),this.autocompleteEnableds=e})}getToolTip(e){let n;return e.tooltip&&(Array.isArray(e.tooltip)?n=e.tooltip.join(`
`):n=e.tooltip),n||""}getSelectDomValues(){return st(this,null,function*(){for(let e of this.datasource.options.ogcFilters.select.bundles)if(e.domSelectors){let n;for(let o of e.domSelectors){let s;for(let l of this.configService.getConfig("dom"))(o.id===l.id||o.name===l.name)&&(s={id:l.id,url:l.url,name:l.name,values:l.values});if(s.url?n=yield this.domService.getDomValuesFromURL(s):n=s.values,n){let l=e;l.selectors=[];let h;for(let p of n){if(e.multiple){let m;this.selectEnableds?.find(f=>f.title===p.value)?m=!0:m=!1,h={title:p.value,enabled:m,filters:{operator:o.operator,propertyName:o.propertyName,expression:p.id}}}else h={title:p.value,enabled:this.selectEnabled?.title===p.value,filters:{operator:o.operator,propertyName:o.propertyName,expression:p.id}};l.selectors.push(h)}this.getSelectGroups().find(p=>p.ids.includes(l.id)).computedSelectors.find(p=>p.title===l.title).selectors=l.selectors}}this.initSelectEnabled()}})}onInputChange(){this.inputChangeAutocomplete.next()}getAutocompleteDomValues(){return st(this,null,function*(){for(let e of this.datasource.options.ogcFilters.autocomplete.bundles)if(e.domSelectors){let n;for(let o of e.domSelectors){let s;for(let l of this.configService.getConfig("dom"))(o.id===l.id||o.name===l.name)&&(s={id:l.id,url:l.url,name:l.name,values:l.values});if(s.url?n=yield this.domService.getDomValuesFromURL(s):n=s.values,n){let l=e;l.selectors=[];let h;for(let p of n)h={title:p.id,enabled:!!this.autocompleteEnableds?.includes(p.value),filters:{operator:o.operator,propertyName:o.propertyName,expression:p.value}},l.selectors.push(h);this.getAutocompleteGroups().find(p=>p.ids.includes(l.id)).computedSelectors.find(p=>p.title===l.title).selectors=l.selectors}}this.filteredOgcAutocomplete[e.id]=new si,this.cdRef.detectChanges(),this.filteredOgcAutocomplete[e.id]=Vt(n)}})}getButtonColor(e){let n;return e.color&&e.enabled&&(n={"background-color":`rgba(${e.color})`}),n}bundleIsVertical(e){return e.vertical?e.vertical:!1}onPushButtonsChangeGroup(){this.getPushButtonsGroups().map(e=>e.enabled=!1),this.getPushButtonsGroups().find(e=>e===this.currentPushButtonsGroup).enabled=!0}onCheckboxesChangeGroup(){this.getCheckboxesGroups().map(e=>e.enabled=!1),this.getCheckboxesGroups().find(e=>e===this.currentCheckboxesGroup).enabled=!0}onRadioButtonsChangeGroup(){this.getRadioButtonsGroups().map(e=>e.enabled=!1),this.getRadioButtonsGroups().find(e=>e===this.currentRadioButtonsGroup).enabled=!0}onSelectChangeGroup(){this.getSelectGroups().map(e=>e.enabled=!1),this.getSelectGroups().find(e=>e===this.currentSelectGroup).enabled=!0}onAutocompleteChangeGroup(){this.getAutocompleteGroups().map(e=>e.enabled=!1),this.getAutocompleteGroups().find(e=>e===this.currentAutocompleteGroup).enabled=!0}onSelectionChange(e,n){clearTimeout(this.applyFiltersTimeout),n==="radioButton"&&this.emptyRadioButtons(),e&&(e.enabled=!e.enabled),this.applyFiltersTimeout=setTimeout(()=>{this.applyFilters()},750)}emptyRadioButtons(){this.currentRadioButtonsGroup.computedSelectors.forEach(e=>{e.selectors.map(n=>n.enabled=!1),this.applyFiltersTimeout=setTimeout(()=>{this.applyFilters()},750)})}emptySelect(){this.selectEnabled=void 0}emptyAutocomplete(){this.autocompleteEnableds=[],this.form.controls.autocomplete.setValue(""),this.form.controls.autocomplete.markAsUntouched()}toggleAllSelection(){if(this.selectAllSelected){let e=[];this.currentSelectGroup.computedSelectors.forEach(n=>{n.selectors?.forEach(o=>{e.push(o)})}),this.sel.options.forEach(n=>n.select()),this.selectEnableds=e}else this.sel.options.forEach(e=>e.deselect()),this.selectEnableds=[]}selectOptionClick(e,n,o){if(n.multiple){let s=this.selectEnableds,l=!0;if(this.sel.options.forEach(h=>{h.selected||(l=!1)}),this.selectAllSelected=l,o.isUserInput)if(s.length){for(let h of s)if(h.title===e.title){if(h.enabled&&e.enabled){s.splice(s.indexOf(h),1),this.selectEnableds=s;break}}else if(s.indexOf(h)===s.length-1){s.push(e),this.selectEnableds=s;break}}else s.push(e),this.selectEnableds=s}else this.selectEnabled=e}toggleAutocompleteOption(e,n){e.stopPropagation(),this.toggleSelection(n)}toggleSelection(e){this.autocompleteEnableds.includes(e)?this.autocompleteEnableds=this.autocompleteEnableds.filter(n=>n!==e):this.autocompleteEnableds=[...this.autocompleteEnableds,e]}displayFn(){return""}applyFilters(){let e="",n=[],o=[this.currentPushButtonsGroup,this.currentCheckboxesGroup,this.currentRadioButtonsGroup,this.currentSelectGroup,this.currentAutocompleteGroup];for(let s of o)s.computedSelectors&&s.computedSelectors.map(l=>{let h=[];l.selectors?.filter(p=>p.enabled===!0).forEach(p=>h.push(p.filters)),h.length>=1&&(h.length===1?n.push(h[0]):n.push({logical:l.logical,filters:h}))});this.isTemporalOperator()&&this._currentFilter.active&&n.push(this.datasource.options.ogcFilters.interfaceOgcFilters[0]),n.length>=1&&(e=this.ogcFilterWriter.buildFilter(n.length===1?n[0]:{logical:"And",filters:n})),this.datasource.options.type==="wms"&&this.ogcFilterService.filterByOgc(this.datasource,e),this.datasource.options.type==="wfs"&&this.datasource.ol.refresh(),this.datasource.setOgcFilters(this.datasource.options.ogcFilters,!0)}isMoreResults(e,n){let o=e.selectors.length,s=n==="radio"?this.radioButtonsIndex:this.checkboxesIndex;return o>s}displayMoreResults(e){e==="radio"?this.radioButtonsIndex+=5:this.checkboxesIndex+=5}isLessResults(e,n){let o=e.selectors.length,s=n==="radio"?this.radioButtonsIndex:this.checkboxesIndex;return this.baseIndex!==s&&o>this.baseIndex}displayLessResults(e){e==="radio"?this.radioButtonsIndex=this.baseIndex:this.checkboxesIndex=this.baseIndex}isTemporalOperator(){return this.currentFilter?.operator?.toLowerCase()===this.ogcFilterOperator.During.toLowerCase()}changeProperty(e,n,o=!0){let s=this.detectProperty(n);s&&(this.datasource.options.ogcFilters.interfaceOgcFilters.find(l=>l.filterid===this.currentFilter.filterid)[s]=e,o&&this.applyFilters())}detectProperty(e){switch(this.currentFilter.operator){case tn.PropertyIsNotEqualTo:case tn.PropertyIsEqualTo:case tn.PropertyIsGreaterThan:case tn.PropertyIsGreaterThanOrEqualTo:case tn.PropertyIsLessThan:case tn.PropertyIsLessThanOrEqualTo:return"expression";case tn.PropertyIsLike:return"pattern";case tn.PropertyIsBetween:return e&&e===1?"lowerBoundary":e&&e===2?"upperBoundary":void 0;case tn.During:return e&&e===1?"begin":e&&e===2?"end":void 0;default:return}}static \u0275fac=function(n){return new(n||r)(ie(Lne),ie(r_),ie(S$),ie(Ri),ie(Ti))};static \u0275cmp=gt({type:r,selectors:[["igo-ogc-filter-selection"]],viewQuery:function(n,o){if(n&1&&(Ni(Zct,5),Ni(gf,5,gf)),n&2){let s;Yt(s=Kt())&&(o.sel=s.first),Yt(s=Kt())&&(o.matAutocomplete=s.first)}},inputs:{refreshFilters:"refreshFilters",datasource:"datasource",map:"map",checkboxesIndex:"checkboxesIndex",radioButtonsIndex:"radioButtonsIndex",baseIndex:"baseIndex",currentFilter:"currentFilter"},standalone:!0,features:[Bi([S$]),yt],decls:3,vars:3,consts:[["notMulti",""],["selection",""],["input",""],["auto","matAutocomplete"],[3,"formGroup"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","pushButtonGroups",4,"ngIf"],["class","checkboxGroups",4,"ngIf"],["class","radioButtonGroups",4,"ngIf"],["class","selectGroups",4,"ngIf"],["class","autocompleteGroups",4,"ngIf"],[1,"pushButtonGroups"],["class","groupsSelector",4,"ngIf"],[1,"groupsSelector"],["formControlName","pushButtonsGroup","tooltip-position","below","matTooltipShowDelay","500",3,"valueChange","matTooltip","value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","pushButtons","appearance","legacy","multiple","true",1,"mat-typography",3,"vertical"],["tooltip-position","below","matTooltipShowDelay","500","matTooltipClass","material-tooltip",3,"matTooltip","ngStyle","checked","value","change",4,"ngFor","ngForOf"],["tooltip-position","below","matTooltipShowDelay","500","matTooltipClass","material-tooltip",3,"change","matTooltip","ngStyle","checked","value"],[1,"checkboxGroups"],["formControlName","checkboxesGroup","tooltip-position","below","matTooltipShowDelay","500",3,"valueChange","matTooltip","value"],[1,"checkboxes","mat-typography"],["tooltip-position","below","matTooltipShowDelay","500","matTooltipClass","material-tooltip",3,"matTooltip","checked","value","change",4,"ngFor","ngForOf"],["tooltip-position","below","matTooltipShowDelay","500","matTooltipClass","material-tooltip",3,"change","matTooltip","checked","value"],["class","lessResults mat-typography",3,"click",4,"ngIf"],["class","moreResults mat-typography",3,"click",4,"ngIf"],[1,"lessResults","mat-typography",3,"click"],[1,"moreResults","mat-typography",3,"click"],[1,"radioButtonGroups"],["formControlName","radioButtonsGroup","tooltip-position","below","matTooltipShowDelay","500",3,"valueChange","matTooltip","value"],["formControlName","radioButtons",1,"mat-typography"],["tooltip-position","below","matTooltipShowDelay","500","matTooltipClass","material-tooltip",3,"matTooltip","change",4,"ngIf"],["tooltip-position","below","matTooltipShowDelay","500","matTooltipClass","material-tooltip",3,"change","matTooltip"],[1,"selectGroups"],["formControlName","selectGroup","tooltip-position","below","matTooltipShowDelay","500",3,"valueChange","matTooltip","value"],["mat-icon-button","","color","warn","tooltip-position","below","matTooltipShowDelay","500","matTooltipClass","material-tooltip",3,"matTooltip","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["mat-icon-button","","color","warn","tooltip-position","below","matTooltipShowDelay","500","matTooltipClass","material-tooltip",3,"click","matTooltip"],["formControlName","selectMulti",3,"multiple","placeholder"],[3,"ngModel","ngModelOptions","ngModelChange","change",4,"ngIf"],["tooltip-position","below","matTooltipDelay","500","matTooltipClass","material-tooltip",3,"matTooltip","value","onSelectionChange",4,"ngFor","ngForOf"],[3,"ngModelChange","change","ngModel","ngModelOptions"],["tooltip-position","below","matTooltipDelay","500","matTooltipClass","material-tooltip",3,"onSelectionChange","matTooltip","value"],["formControlName","select",3,"placeholder"],[1,"autocompleteGroups"],["formControlName","autocompleteGroup","tooltip-position","below","matTooltipShowDelay","500",3,"valueChange","matTooltip","value"],["floatLabel","always",3,"width",4,"ngIf"],["floatLabel","always"],["matInput","","type","text","formControlName","autocomplete",3,"input","matAutocomplete"],[3,"displayWith"],["id","mat-option",3,"matTooltip",4,"ngFor","ngForOf"],[3,"removed",4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove","",3,"matTooltip"],["id","mat-option",3,"matTooltip"],[3,"click"],["id","mat-checkbox","color","primary",3,"click","checked"],[3,"changeProperty","datasource","currentFilter"]],template:function(n,o){n&1&&(ne(0,"form",4),We(1,jdt,6,5,"div",5),ce(),We(2,Udt,5,4,"div",6)),n&2&&(ee("formGroup",o.form),q(),ee("ngForOf",o.ogcFiltersSelectors),q(),ee("ngIf",o.isTemporalOperator()))},dependencies:[$l,Vy,eh,sc,Ig,gm,uu,th,Tg,Ps,gn,I_,wS,Wa,dc,Mg,ah,sh,lc,Er,Ar,cc,m0e,oK,Sj,e_,yv,jg,x$,NF,A2,jn,er,pu,hu,s1,o1,gf,hEe,kr,On,hn,kTe,Zie,MTe,DTe],styles:["[_nghost-%COMP%]   .mat-button-toggle-group[_ngcontent-%COMP%]{margin:5px;flex-wrap:wrap;box-shadow:none!important;width:95%}[_nghost-%COMP%]   .checkboxes[_ngcontent-%COMP%]{flex-wrap:wrap;box-shadow:none}[_nghost-%COMP%]   .groupsSelector[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{display:inline-flex;border:1.5px solid black;border-radius:5px;margin:5px;white-space:normal;min-height:40px;height:auto;width:142px}[_nghost-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]     .mat-button-toggle-label-content{line-height:unset;font-size:small;display:block}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{width:45%}}[_nghost-%COMP%]     .material-tooltip{white-space:pre-wrap}[_nghost-%COMP%]   mat-checkbox[_ngcontent-%COMP%], [_nghost-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin:7px;width:95%;display:inline-flex;font-size:larger}[_nghost-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label, [_nghost-%COMP%]   mat-radio-button[_ngcontent-%COMP%]     label{white-space:normal}[_nghost-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{vertical-align:middle}[_nghost-%COMP%]   mat-button[_ngcontent-%COMP%]{padding-right:10px;cursor:pointer}[_nghost-%COMP%]   h3[_ngcontent-%COMP%]{margin:7px;text-align:left}[_nghost-%COMP%]   u[_ngcontent-%COMP%]{cursor:pointer;color:#00f;margin:5px}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{margin:unset}"]})}return r})(),Gpt=(()=>{class r{datasource;map;refreshFilters;get refreshFunc(){return this.refreshFilters}get advancedOgcFilters(){if(this.datasource.options.ogcFilters)return this.datasource.options.ogcFilters.advancedOgcFilters}get currentFilter(){return this.datasource.options.ogcFilters.interfaceOgcFilters?this.datasource.options.ogcFilters.interfaceOgcFilters[0]:void 0}color="primary";static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-ogc-filterable-form"]],inputs:{datasource:"datasource",map:"map",refreshFilters:"refreshFilters"},standalone:!0,features:[Bi([{provide:vY,useValue:{overlayPanelClass:"igo-overlay-panel-width"}},{provide:QB,useValue:{overlayPanelClass:"igo-overlay-panel-width"}}]),yt],decls:2,vars:2,consts:[["igoListItem","",3,"refreshFilters","datasource","map","currentFilter",4,"ngIf"],[4,"ngIf"],["igoListItem","",3,"refreshFilters","datasource","map","currentFilter"],["ngFor","",3,"ngForOf"],[3,"currentFilter","refreshFilters","datasource","map"]],template:function(n,o){n&1&&We(0,zdt,1,4,"igo-ogc-filter-selection",0)(1,Hdt,1,1,null,1),n&2&&(ee("ngIf",!o.advancedOgcFilters),q(),ee("ngIf",o.advancedOgcFilters&&o.datasource.options.ogcFilters.editable))},dependencies:[gn,zpt,q1,Ps,Upt],styles:[".igo-overlay-panel-width{min-width:fit-content}"]})}return r})(),pEe=(()=>{class r{ogcFilterService;color="primary";lastRunOgcFilter;defaultLogicalParent=tn.And;hasActiveSpatialFilter=!1;filtersAreEditable=!0;filtersCollapsed=!0;hasSelector=!1;showLegend$=new mt(!1);inResolutionRange$=new mt(!0);resolution$$;ogcFilterWriter;layer;map;header=!0;get refreshFunc(){return this.refreshFilters.bind(this)}get datasource(){return this.layer.dataSource}constructor(e){this.ogcFilterService=e,this.ogcFilterWriter=new Nm}ngOnInit(){this.layer.visible&&(this.filtersCollapsed=!1);let e=this.datasource.options.ogcFilters;switch((e.pushButtons&&e.pushButtons.bundles.length>0||e.checkboxes&&e.checkboxes.bundles.length>0||e.radioButtons&&e.radioButtons.bundles.length>0||e.select&&e.select.bundles.length>0||e.autocomplete&&e.autocomplete.bundles.length>0)&&(e.advancedOgcFilters===void 0&&(e.advancedOgcFilters=!1),this.hasSelector=!0),this.datasource.options.type){case"wms":this.ogcFilterService.setOgcWMSFiltersOptions(this.datasource);break;case"wfs":this.ogcFilterService.setOgcWFSFiltersOptions(this.datasource);break;default:break}e&&(e.interfaceOgcFilters&&(this.lastRunOgcFilter=JSON.parse(JSON.stringify(e.interfaceOgcFilters)),e.interfaceOgcFilters.filter(o=>o.wkt_geometry).length>=1&&(this.hasActiveSpatialFilter=!0)),this.filtersAreEditable=e.editable?e.editable:!1);let n=this.layer.map.viewController.resolution$;this.resolution$$=n.subscribe(()=>{this.inResolutionRange$.next(this.layer.isInResolutionsRange)})}ngOnDestroy(){this.resolution$$.unsubscribe()}addFilterToSequence(){this.filtersCollapsed=!1;let n=this.datasource.options.ogcFilters.interfaceOgcFilters||[],o=n.length===0?0:n[n.length-1].level,s="",l=this.datasource.options.sourceFields.filter(g=>!g.excludeFromOgcFilters);l.length>0&&(s=l[0].name===void 0?"":l[0].name);let h,p=this.datasource.options;p.fieldNameGeometry?h=p.fieldNameGeometry:this.datasource.options.paramsWFS&&this.datasource.options.paramsWFS.fieldNameGeometry&&(h=this.datasource.options.paramsWFS.fieldNameGeometry);let m=this.ogcFilterWriter.computeAllowedOperators(this.datasource.options.sourceFields,s,this.datasource.options.ogcFilters.allowedOperatorsType),f=Object.keys(m)[0];n.push(this.ogcFilterWriter.addInterfaceFilter({propertyName:s,operator:f,active:!0,igoSpatialSelector:"fixedExtent",srsName:this.map.projection},h,o,this.defaultLogicalParent)),this.datasource.options.ogcFilters.interfaceOgcFilters=n}refreshFilters(e){e===!0&&(this.lastRunOgcFilter=void 0);let n=this.datasource.options.ogcFilters,o=n.interfaceOgcFilters?n.interfaceOgcFilters.filter(s=>s.active===!0):[];if(o.length===0&&(n.filters=void 0,n.filtered=!1),o.length>1&&(o[0].parentLogical=o[1].parentLogical),o.filter(s=>["Contains","Intersects","Within"].indexOf(s.operator)!==-1).length===0?this.hasActiveSpatialFilter=!1:this.hasActiveSpatialFilter=!0,JSON.stringify(this.lastRunOgcFilter)!==JSON.stringify(o)){if(this.layer.dataSource.options.type==="wfs"){let l=this.layer.dataSource.options.ogcFilters;l.filters=this.ogcFilterWriter.rebuiltIgoOgcFilterObjectFromSequence(o),this.layer.dataSource.ol.refresh()}else if(this.layer.dataSource.options.type==="wms"&&n.enabled){let s="";if(o.length>=1){let l=this.layer.dataSource,h=l.options.ogcFilters;h.filters=this.ogcFilterWriter.rebuiltIgoOgcFilterObjectFromSequence(o),s=this.ogcFilterWriter.buildFilter(h.filters,void 0,void 0,this.layer.dataSource.options.fieldNameGeometry,l.options)}this.ogcFilterService.filterByOgc(this.datasource,s),this.datasource.options.ogcFilters.filtered=o.length!==0}this.lastRunOgcFilter=JSON.parse(JSON.stringify(o))}this.layer.dataSource.setOgcFilters(n,!0)}setVisible(){this.layer.visible=!0}isAdvancedOgcFilters(){return this.datasource.options.ogcFilters.advancedOgcFilters}addFilterDisabled(){return!this.datasource.options.sourceFields||this.datasource.options.sourceFields.length===0}changeOgcFiltersAdvancedOgcFilters(e){this.datasource.options.ogcFilters.advancedOgcFilters=e}changeOgcFilterType(e){this.changeOgcFiltersAdvancedOgcFilters(e.checked),e.checked&&this.refreshFilters(!0)}toggleLegend(e){this.layer.legendCollapsed=e,this.showLegend$.next(!e)}toggleLegendOnClick(){this.filtersCollapsed||this.toggleLegend(this.showLegend$.value)}toggleFiltersCollapsed(){this.filtersCollapsed=!this.filtersCollapsed}static \u0275fac=function(n){return new(n||r)(ie(Lne))};static \u0275cmp=gt({type:r,selectors:[["igo-ogc-filterable-item"]],inputs:{layer:"layer",map:"map",header:"header"},standalone:!0,features:[Bi([Lne]),yt],decls:12,vars:12,consts:[["ogcFilters",""],["legend",""],[3,"ngClass"],["class","igo-chevron","matListItemIcon","","igoCollapse","",3,"target","collapsed","click",4,"ngIf"],["matListItemTitle","","matTooltipShowDelay","500",3,"ngStyle","matTooltip","click",4,"ngIf"],["matListItemMeta",""],["mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"disabled","matTooltip","color","click",4,"ngIf"],["mat-icon-button","","collapsibleButton","","tooltip-position","below","matTooltipShowDelay","500",3,"color","matTooltip","click",4,"ngIf"],["class","igo-layer-legend-container",4,"ngIf"],[3,"datasource","map","refreshFilters"],["class","mat-typography advancedOgcFilters",4,"ngIf"],["matListItemIcon","","igoCollapse","",1,"igo-chevron",3,"click","target","collapsed"],["matListItemTitle","","matTooltipShowDelay","500",3,"click","ngStyle","matTooltip"],["mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"click","disabled","matTooltip","color"],["mat-icon-button","","collapsibleButton","","tooltip-position","below","matTooltipShowDelay","500",3,"click","color","matTooltip"],[1,"igo-layer-legend-container"],[3,"layer",4,"ngIf"],[3,"layer"],[1,"mat-typography","advancedOgcFilters"],[3,"change","ngModelChange","ngModel"]],template:function(n,o){n&1&&(ne(0,"div",2)(1,"mat-list-item"),We(2,Kdt,2,2,"mat-icon",3)(3,Zdt,2,5,"span",4),ne(4,"div",5),We(5,Qdt,4,5,"button",6)(6,Xdt,6,12,"button",7),ce()(),ne(7,"div",null,0),We(9,eut,4,3,"div",8),wt(10,"igo-ogc-filterable-form",9),We(11,tut,5,4,"section",10),ce()()),n&2&&(ee("ngClass",fo(10,Wdt,o.header===!0)),q(2),ee("ngIf",o.header),q(),ee("ngIf",o.header),q(2),ee("ngIf",o.isAdvancedOgcFilters()&&o.filtersAreEditable),q(),ee("ngIf",o.header),q(3),ee("ngIf",o.header),q(),ee("datasource",o.datasource)("map",o.map)("refreshFilters",o.refreshFunc),q(),ee("ngIf",o.hasSelector&&o.filtersAreEditable))},dependencies:[qr,wu,wf,Am,wS,Tm,CS,gn,jn,er,uF,e_,Er,Ar,bn,Cr,KAe,Gpt,I_,yv,jg,$l,sc,gm,kr,On,hn],styles:["[_nghost-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .advancedOgcFilters[_ngcontent-%COMP%]{text-align:center;width:100%;display:inline-block}[_nghost-%COMP%]   .mat-mdc-list-item[_ngcontent-%COMP%]{height:auto}[_nghost-%COMP%]   .igo-layer-legend-container[_ngcontent-%COMP%]{padding-left:1.125em;width:calc(100% - 18px)}[_nghost-%COMP%]   mat-icon.disabled[_ngcontent-%COMP%]{color:#00000061}[_nghost-%COMP%]   .separate-item[_ngcontent-%COMP%]{border-bottom:4px solid darkgrey}[_nghost-%COMP%]     .mdc-list-item__start, [_nghost-%COMP%]     .mdc-list-item__end, [_nghost-%COMP%]     .mdc-list-item__content{pointer-events:auto}"]})}return r})();var Hpt=(()=>{class r extends KF{http;urlApi;provideContextUri;constructor(e,n={}){super(),this.http=e,this.urlApi=n.url||this.urlApi,this.provideContextUri=n.provideContextUri||this.provideContextUri}getWMSOptions(e,n){if(!this.urlApi)return Vt({});let o=new zs({fromObject:{type:e.type,url:e.url,layers:e.params.LAYERS}});return n&&this.provideContextUri&&(o=o.append("context",n)),this.http.get(this.urlApi,{params:o}).pipe($t(l=>!l||!l.sourceOptions?{}:(l.layerOptions&&(l.sourceOptions._layerOptionsFromSource=l.layerOptions),l.sourceOptions)))}getArcgisRestOptions(e,n){if(!this.urlApi)return Vt({});let o=new zs({fromObject:{type:e.type,url:e.url,layers:e.layer}});return n&&this.provideContextUri&&(o=o.append("context",n)),this.http.get(this.urlApi,{params:o}).pipe($t(l=>!l||!l.sourceOptions?{}:(l.layerOptions&&(l.sourceOptions._layerOptionsFromSource=l.layerOptions),l.sourceOptions)))}static \u0275fac=function(n){return new(n||r)(xe(dr),xe("options"))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Wpt(r,i){return new Hpt(r,i.getConfig("optionsApi"))}function mEe(){return{provide:KF,useFactory:Wpt,deps:[dr,Ri]}}var fEe=function(r){return r.Point="Point",r.LineString="LineString",r.Polygon="Polygon",r.Circle="Circle",r}(fEe||{});var O2=function(r){return r.Meters="meters",r.Kilometers="kilometers",r.Miles="miles",r.Feet="feet",r}(O2||{}),pki={[O2.Meters]:"m",[O2.Kilometers]:"km",[O2.Miles]:"mi",[O2.Feet]:"ft"},pI=function(r){return r.SquareMeters="squareMeters",r.SquareKilometers="squareKilometers",r.SquareMiles="squareMiles",r.SquareFeet="squareFeet",r.Hectares="hectares",r.Acres="acres",r}(pI||{}),mki={[pI.SquareMeters]:"m\xB2",[pI.SquareKilometers]:"km\xB2",[pI.SquareMiles]:"mi\xB2",[pI.SquareFeet]:"ft\xB2",[pI.Hectares]:"ha",[pI.Acres]:"ac"};function qpt(r){let i;r instanceof LS?i=0:i=Math.max(r.getFlatCoordinates().length/2-1,0);let e=r.get("_midpoints");if(e===void 0)return r instanceof Kn?e=new Array(1):e=new Array(i),r.set("_midpoints",e,!0),e;if(i===0||i===e.length)return e;if(i>e.length)return e.push(...new Array(i-e.length)),e;for(let n=i;n<e.length;n++){let o=e[i];o!==void 0&&Ypt(o)}return e.splice(i),e}function Ypt(r){let i=r.get("_tooltip");if(i!==void 0){let e=i.getMap();e!==void 0&&e.removeOverlay(i)}}function Kpt(r){return qpt(r).map(e=>e?e.get("_tooltip"):void 0)}function Zpt(r){let i=r.get("_center");return i?i.get("_tooltip"):void 0}function Qpt(r){let i=[].concat(Kpt(r)||[]),e=Zpt(r);return e!==void 0&&i.push(e),i}function Xpt(r,i,e){return new Mn({stroke:new ir({color:i||"rgba(143,7,7,1)",width:e||1}),fill:new sr({color:r||"rgba(255,255,255,0.4)"}),image:new yl({radius:5,stroke:new ir({color:i||"rgba(143,7,7,1)",width:e||1}),fill:new sr({color:r||"rgba(255,255,255,0.4)"})})})}var oC=class extends vf{options;stores$$=new Map;states$$=[];empty$$;constructor(i){super(i),this.options=i}bindStore(i){super.bindStore(i),this.active===!0&&this.watchStore(i),this.empty$$=i.empty$.pipe(Uc(e=>!e)).subscribe(()=>this.updateEntitiesInExtent(i))}unbindStore(i){super.unbindStore(i),this.active===!0&&this.unwatchStore(i)}doActivate(){this.stores.forEach(i=>this.watchStore(i))}doDeactivate(){this.unwatchAll()}watchStore(i){if(this.stores$$.has(i))return;this.updateEntitiesInExtent(i);let e=i.map??i.layer.map;e&&this.states$$.push(e.viewController.state$.pipe(cr(250)).subscribe(()=>this.updateEntitiesInExtent(i)))}updateEntitiesInExtent(i){if(i?.layer?.map?.viewController){i.state.updateAll({inMapExtent:!1});let e=i.layer.map.viewController.getExtent(),n=i.entities$.value,o=this.getFeaturesInExtent(n,e);i.state.updateMany(o,{inMapExtent:!0},!1)}}getFeaturesInExtent(i,e){return i.reduce((n,o)=>{let s=o.ol?.getGeometry();if(s){let l=s.getExtent();Wo(l,e)&&n.push(o)}else n.push(o);return n},[])}unwatchStore(i){this.stores$$.get(i)!==void 0&&this.stores$$.delete(i)}unwatchAll(){this.stores$$.clear(),this.states$$.map(i=>i.unsubscribe()),this.empty$$&&this.empty$$.unsubscribe()}},V2=class extends vf{options;stores$$=new Map;resolution$$=[];empty$$;constructor(i){super(i),this.options=i}bindStore(i){super.bindStore(i),this.active===!0&&this.watchStore(i),this.empty$$=i.empty$.subscribe(()=>this.updateEntitiesInResolution(i,i.layer.map.viewController.getResolution()))}unbindStore(i){super.unbindStore(i),this.active===!0&&this.unwatchStore(i)}doActivate(){this.stores.forEach(i=>this.watchStore(i))}doDeactivate(){this.unwatchAll()}watchStore(i){this.stores$$.has(i)||(this.updateEntitiesInResolution(i,i.layer.map.viewController.getResolution()),this.resolution$$.push(i.layer.map.viewController.resolution$.pipe(cr(250)).subscribe(e=>{this.updateEntitiesInResolution(i,e)})))}updateEntitiesInResolution(i,e){e>i.layer.minResolution&&e<i.layer.maxResolution?i.state.updateAll({inMapResolution:!0}):i.state.updateAll({inMapResolution:!1})}unwatchStore(i){this.stores$$.get(i)!==void 0&&this.stores$$.delete(i)}unwatchAll(){this.stores$$.clear(),this.resolution$$.map(i=>i.unsubscribe()),this.empty$$&&this.empty$$.unsubscribe()}},vI=class extends vf{options;propertyTypeDetectorService;capabilitiesService;stores$$=new Map;states$$=[];empty$$;map;constructor(i,e,n){super(i),this.options=i,this.propertyTypeDetectorService=e,this.capabilitiesService=n,this.map=i.map}bindStore(i){super.bindStore(i),this.active===!0&&this.watchStore(i)}unbindStore(i){super.unbindStore(i),this.active===!0&&this.unwatchStore(i)}doActivate(){this.stores.forEach(i=>this.watchStore(i))}doDeactivate(){this.unwatchAll()}watchStore(i){this.stores$$.has(i)||(this.updateEntitiesPropertiesState(i),this.states$$.push(this.map.layerController.all$.pipe(cr(250),zC()).subscribe(([e,n])=>{let o;e&&(o=e.map(l=>l.id));let s=n.filter(l=>!o.includes(l.id));this.updateEntitiesPropertiesState(i,s)})),this.states$$.push(i.entities$.pipe(cr(250)).subscribe(()=>{this.updateEntitiesPropertiesState(i)})))}updateEntitiesPropertiesState(i,e){let n=this.map.layerController.all.map(y=>y.id),o=[];e?o=i.entities$.value:o=i.stateView.all().length?i.stateView.all().filter(_=>!_.state.geoService).map(_=>_.entity):i.entities$.value;let s=o.length>=250?250:o.length,l=o.slice(0,s),h=[];l.map(y=>{h=h.concat(Object.keys(y.properties||{}))}),h=[...new Set(h)];let p={};h.map(y=>{p[y]=[...new Set(o.map(_=>_.properties[y]))]});let m={};Object.entries(p).forEach(y=>{let[_,w]=y,A=w.filter(k=>this.propertyTypeDetectorService.isGeoService(k));A?.length&&(m[_]=A)});let f=[];Object.entries(m).forEach(y=>{let[_,w]=y;w.map(A=>{let k=this.propertyTypeDetectorService.getGeoService(A,h);if(k){let R=h.filter(H=>k.propertiesForLayerName.includes(H)),$=R.length?R[0]:void 0;$&&f.push({url:A,urlProperty:_,layerNameProperty:$,geoService:k})}})});let g=[];f.map(y=>{let _=y.url,w=y.geoService.type||"wms";p[y.layerNameProperty].map(A=>{let k=A,R;["arcgisrest","imagearcgisrest","tilearcgisrest"].includes(w)&&(k=void 0,R=A);let $=Ln.removeUndefined({sourceOptions:{type:w||"wms",url:_,optionsFromCapabilities:!0,optionsFromApi:!0,params:{LAYERS:k,LAYER:R}}}),H=wI($.sourceOptions);g.push({geoServiceAssociation:y,state:{added:n.find(oe=>oe===H)!==void 0,haveGeoServiceProperties:!0,type:w,url:_,layerName:A}})})}),g.map(y=>{let _=y.geoServiceAssociation.urlProperty,w=y.geoServiceAssociation.layerNameProperty,A=y.state.url,k=y.state.layerName,R=o.filter(H=>H.properties[_]===A&&H.properties[w]===k),$={geoService:y.state};i.state.updateMany(R,$,!0)})}unwatchStore(i){this.stores$$.get(i)!==void 0&&this.stores$$.delete(i)}unwatchAll(){this.stores$$.clear(),this.states$$.map(i=>i.unsubscribe()),this.empty$$&&this.empty$$.unsubscribe()}},$2=class extends vf{options;stores$$=new Map;constructor(i){super(i),this.options=i}bindStore(i){super.bindStore(i),this.active===!0&&this.watchStore(i)}unbindStore(i){super.unbindStore(i),this.active===!0&&this.unwatchStore(i)}doActivate(){this.stores.forEach(i=>this.watchStore(i))}doDeactivate(){this.unwatchAll()}watchStore(i){if(this.stores$$.has(i))return;this.onSourceChanges(i),i.layer.ol.getSource().on("change",()=>{this.onSourceChanges(i)})}unwatchStore(i){this.stores$$.get(i)!==void 0&&this.stores$$.delete(i)}unwatchAll(){this.stores$$.clear()}onSourceChanges(i){let e=i.layer.ol.getSource().getFeatures();i.layer.dataSource instanceof jm&&(e=e.flatMap(n=>n.get("features"))),e.length===0?i.clear():i.setStoreOlFeatures(e)}},Nne=class extends vf{options;stores$$=new Map;constructor(i){super(i),this.options=i}bindStore(i){super.bindStore(i),this.active===!0&&this.watchStore(i)}unbindStore(i){super.unbindStore(i),this.active===!0&&this.unwatchStore(i)}doActivate(){this.stores.forEach(i=>this.watchStore(i))}doDeactivate(){this.unwatchAll()}initStoreSearchIndex(i){i.searchDocument=new _ne.Document({tokenize:"full"})}watchStore(i){this.stores$$.has(i)||(this.initStoreSearchIndex(i),i.entities$.pipe(Uc(e=>!e.length)).subscribe(()=>this.onEntitiesChanges(i)))}unwatchStore(i){this.stores$$.get(i)!==void 0&&(i.searchDocument=void 0,this.stores$$.delete(i))}unwatchAll(){this.stores$$.clear()}onEntitiesChanges(i){let e=this.options.percentDistinctValueRatio||2,n=[];i.index.forEach((h,p)=>{let m=h.properties;m.igoSearchID=p,n.push(m)});let o=[],s=[],l=[];if(this.options.sourceFields)s=this.options.sourceFields.filter(h=>!h.searchIndex?.enabled),l=this.options.sourceFields.filter(h=>h.searchIndex?.enabled).map(h=>Object.assign({},{field:h.name,tokenize:"full"},h.searchIndex));else if(n.length){let h=Object.keys(n[0]),p=[];s=h.map(f=>{let g=[...new Set(n.map(y=>y[f]))];g.length/n.length*100<=e||g.every(y=>Number(y)===y&&y%1!==0)?s.push(f):p.push(f)}).filter(f=>f),l=p.filter(f=>f!=="igoSearchID").map(f=>({field:f,tokenize:"full"}))}i.index.forEach(h=>{let p=JSON.parse(JSON.stringify(h.properties));s.map(m=>delete p[m]),Object.keys(p).length&&o.push(p)}),o.length===0?this.initStoreSearchIndex(i):(i.searchDocument=new _ne.Document({document:{id:"igoSearchID",index:l}}),o.map(h=>{i.searchDocument.add(h.igoSearchID,h)}))}},Pd=(()=>{class r{storageService;static id="";static type="";options;getId(){throw new Error('You have to implement the method "getId".')}getType(){throw new Error('You have to implement the method "getType".')}getDefaultOptions(){throw new Error('You have to implement the method "getDefaultOptions".')}get title(){return this.options.title}get available(){return this.options.available!==!1}set enabled(e){this.options.enabled=e}get enabled(){return this.available&&this.options.enabled!==!1}get showInPointerSummary(){let e=this.options.showInPointerSummary;return e||!1}get showInSettings(){let e=this.options.showInSettings;return e===void 0?!0:e}get searchUrl(){return this.options.searchUrl}get params(){return this.options.params}get settings(){return this.options.settings===void 0?[]:this.options.settings}set featureStoresWithIndex(e){this._featureStoresWithIndex=e}get featureStoresWithIndex(){return this._featureStoresWithIndex}_featureStoresWithIndex;setWorkspaces(e){e.filter(s=>s.entityStore.searchDocument).length>=1?this.options.available=!0:this.options.available=!1;let n=[];this.featureStoresWithIndex=e.filter(s=>s.entityStore.searchDocument).map(s=>(n.push({title:s.title,value:s.title,enabled:!0}),s.entityStore));let o=this.options.settings.find(s=>s.title==="datasets");o&&(o.values=n),this.setParamFromSetting(o)}setParamFromSetting(e,n=!0){switch(e.type){case"radiobutton":e.values.forEach(o=>{o.enabled&&(this.options.params=Object.assign(this.options.params||{},{[e.name]:o.value}))});break;case"checkbox":{let o="";e.values.filter(s=>s.available!==!1).forEach(s=>{s.enabled&&(o+=s.value+",")}),o=o.slice(0,-1),this.options.params=Object.assign(this.options.params||{},{[e.name]:o});break}}n&&this.storageService&&this.storageService.set(this.getId()+".options",{params:this.options.params})}get displayOrder(){return this.options.order===void 0?99:this.options.order}constructor(e,n){if(this.storageService=n,this.options=e,this.storageService){let o=this.storageService.get(this.getId()+".options");o&&(this.options=Ln.mergeDeep(this.options,o))}this.options=Ln.mergeDeep(this.getDefaultOptions(),this.options),this.settings.forEach(o=>{this.setParamFromSetting(o,!1)})}getHashtagsValid(e,n){let o=e.match(/(#[A-Za-z--+]+)/g);if(!o)return;let s=this.getSettingsValues(n),l=[];return o.forEach(h=>{s.values.forEach(p=>{let m=h.substring(1);if(typeof p.value=="string"){let f=p.value.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").split(","),g=f.indexOf(m.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""));g!==-1&&l.push(f[g])}p.hashtags&&p.hashtags.indexOf(m.toLowerCase())!==-1&&l.push(p.value)})}),l.filter((h,p)=>l.indexOf(h)===p)}getSettingsValues(e){return this.getDefaultOptions().settings.find(n=>n.name===e)}}return r})(),H2=(()=>{class r{http;cdRef;sanitizer;networkService;messageService;configService;state;unsubscribe$=new Dt;ready=!1;get source(){return this._source}set source(e){this._source=e,this.cdRef.detectChanges()}map;toolbox;get feature(){return this._feature}set feature(e){this._feature=e,this.cdRef.detectChanges(),this.selectFeature.emit()}_feature;_source;routeEvent=new it;selectFeature=new it;htmlDisplayEvent=new it;get title(){return Im(this.feature)}get icon(){return SP(this.feature)||"link"}constructor(e,n,o,s,l,h){this.http=e,this.cdRef=n,this.sanitizer=o,this.networkService=s,this.messageService=l,this.configService=h,this.networkService.currentState().pipe(rn(this.unsubscribe$)).subscribe(p=>{this.state=p})}ngOnInit(){this.ready=!0}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}urlSanitizer(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}isHtmlDisplay(){return this.feature&&this.isObject(this.feature.properties)&&this.feature.properties.target==="iframe"?(this.htmlDisplayEvent.emit(!0),!0):(this.htmlDisplayEvent.emit(!1),!1)}htmlSanitizer(e){if(!e.body)return;if(!/<base href="[\w:\/\.]+">/.test(e.body)){let o=new URL(e.url,window.location.origin);e.body=e.body.replace("<head>",`<head><base href="${o.origin}">`)}return this.sanitizer.bypassSecurityTrustHtml(e.body)}isObject(e){return typeof e=="object"}openSecureUrl(e){let n,o=new RegExp(this.configService?.getConfig("depot.url")+'.*?(?="|$)');if(o.test(e))n=e.match(o)[0],this.http.get(n,{responseType:"blob"}).subscribe(s=>{let l=URL.createObjectURL(s);window.open(l,"_blank"),this.cdRef.detectChanges()},()=>{this.messageService.error("igo.geo.targetHtmlUrlUnauthorized","igo.geo.targetHtmlUrlUnauthorizedTitle")});else{let s=e;if(this.isEmbeddedLink(e)){let l=document.createElement("div");l.innerHTML=e,s=l.children[0].getAttribute("href")}window.open(s,"_blank")}}isUrl(e){if(typeof e=="string")return/^https?:\/\//.test(e)}isDoc(e){if(typeof e=="string")return this.isUrl(e)?/(pdf|docx?|xlsx?)$/.test(e.toLowerCase()):!1}isImg(e){if(typeof e=="string")return this.isUrl(e)?/(jpe?g|png|gif)$/.test(e.toLowerCase()):!1}isEmbeddedLink(e){if(typeof e=="string"){let n=/<a/g;return(e.match(n)||[]).length===1}return!1}getEmbeddedLinkText(e){let n=/(?:>).*?(?=<|$)/,o=e.match(n)[0];return o=o.replace(/>/g,""),o}filterFeatureProperties(e){let n=e.meta?e.meta.alias:void 0,o={},s;return this.map&&this.map.forcedOffline$.pipe(rn(this.unsubscribe$)).subscribe(l=>{s=l}),e.properties&&e.properties.Route&&this.toolbox&&!this.toolbox.getTool("directions")&&delete e.properties.Route,n?(Object.keys(n).forEach(l=>{o[n[l]]=e.properties[l]}),o):(s!==void 0?s?e.meta&&e.meta.excludeAttributeOffline&&e.meta.excludeAttributeOffline.forEach(h=>{delete e.properties[h]}):this.state.connection&&e.meta&&e.meta.excludeAttribute?e.meta.excludeAttribute.forEach(h=>{delete e.properties[h]}):!this.state.connection&&e.meta&&e.meta.excludeAttributeOffline&&e.meta.excludeAttributeOffline.forEach(h=>{delete e.properties[h]}):this.state.connection&&e.meta&&e.meta.excludeAttribute?e.meta.excludeAttribute.forEach(h=>{delete e.properties[h]}):!this.state.connection&&e.meta&&e.meta.excludeAttributeOffline&&e.meta.excludeAttributeOffline.forEach(h=>{delete e.properties[h]}),e.properties)}copyTextToClipboard(e){wx.copy(e)&&this.messageService.success("igo.geo.query.link.message")}static \u0275fac=function(n){return new(n||r)(ie(dr),ie(Ti),ie(xg),ie(T8),ie(nl),ie(Ri))};static \u0275cmp=gt({type:r,selectors:[["igo-feature-details"]],inputs:{source:"source",map:"map",toolbox:"toolbox",feature:"feature"},outputs:{routeEvent:"routeEvent",selectFeature:"selectFeature",htmlDisplayEvent:"htmlDisplayEvent"},standalone:!0,features:[yt],decls:2,vars:2,consts:[["class","igo-striped mat-typography",4,"ngIf"],[3,"srcdoc","src",4,"ngIf"],[1,"igo-striped","mat-typography"],[4,"ngFor","ngForOf"],[4,"ngIf"],["id","keyValue",4,"ngIf"],[3,"innerHTML",4,"ngIf"],["matListItemIcon",""],["target","_blank","rel","noopener noreferrer",3,"href"],["mat-icon-button","",1,"copyClipboard",3,"click"],["id","keyValue"],[3,"innerHTML"],[3,"click","ngStyle"],["target","_blank","rel","noopener noreferrer",3,"click","href"],["igoImageError","","width","225","height","auto",3,"src"],[3,"srcdoc","src"]],template:function(n,o){n&1&&We(0,uut,4,3,"table",0)(1,hut,1,2,"iframe",1),n&2&&(ee("ngIf",o.ready&&o.feature&&o.isObject(o.feature.properties)&&o.feature.properties.target!=="iframe"),q(),ee("ngIf",o.isHtmlDisplay()))},dependencies:[gn,Ps,jn,er,e_,CP,kr,Rde,eN,On,hn,TE],styles:["table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px}#keyValue[_ngcontent-%COMP%]{width:30%}table[_ngcontent-%COMP%]     .routing{cursor:pointer}iframe[_ngcontent-%COMP%]{height:calc(100% - 4px);width:100%;border:0}.copyClipboard[_ngcontent-%COMP%]{border:none;background:transparent;cursor:pointer}"],changeDetection:0})}return r})(),Jpt=(()=>{class r{el;component;get feature(){return this.component.feature}feature$=new mt(void 0);routingEvent=new it;setFeature(){this.feature$.next(this.feature)}constructor(e,n){this.el=n,this.component=e}ngOnInit(){this.feature$.subscribe(()=>{this.feature.geometry&&this.bindClicking()})}bindClicking(){setTimeout(()=>{let e=this.el.nativeElement.querySelector("span.routing");e&&e.addEventListener("click",()=>{this.routingEvent.emit()})},1)}static \u0275fac=function(n){return new(n||r)(ie(H2,2),ie(Ht))};static \u0275dir=Pt({type:r,selectors:[["","igoFeatureDetailsDirective",""]],hostBindings:function(n,o){n&1&&Oe("selectFeature",function(){return o.setFeature()})},outputs:{routingEvent:"routingEvent"},standalone:!0})}return r})(),emt=[H2,Jpt];var tmt=(()=>{class r{form;set feature(e){this.feature$.next(e)}get feature(){return this.feature$.value}feature$=new mt(void 0);submitForm=new it;igoForm;onSubmit(e){let n=this.formDataToFeature(e);this.submitForm.emit(n)}getData(){return this.formDataToFeature(this.igoForm.getData())}formDataToFeature(e){let n={},o={};this.feature===void 0?o.id=Gs():(Object.assign(n,this.feature.properties),Object.assign(o,this.feature.meta,{revision:ZY(this.feature)+1}));let s="properties.";Object.entries(e).forEach(h=>{let[p,m]=h;if(p.startsWith(s)){let f=p.substr(s.length);n[f]=m}});let l=e.geometry;return l===void 0&&this.feature!==void 0&&(l=this.feature.geometry),{meta:o,type:Qo,geometry:l,projection:"EPSG:4326",properties:n}}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-feature-form"]],viewQuery:function(n,o){if(n&1&&Ni(put,7),n&2){let s;Yt(s=Kt())&&(o.igoForm=s.first)}},inputs:{form:"form",feature:"feature"},outputs:{submitForm:"submitForm"},standalone:!0,features:[yt],ngContentSelectors:fut,decls:5,vars:4,consts:[["igoForm",""],[3,"submitForm","form","formData"]],template:function(n,o){if(n&1){let s=dt();Qi(mut),ne(0,"igo-form",1,0),Ne(2,"async"),Oe("submitForm",function(h){return Re(s),Fe(o.onSubmit(h))}),pi(3),pi(4,1,["formButtons",""]),ce()}n&2&&ee("form",o.form)("formData",je(2,2,o.feature$))},dependencies:[Bte,kr],styles:["[_nghost-%COMP%]{display:block}igo-form[_ngcontent-%COMP%]{height:100%}"],changeDetection:0})}return r})(),fki=[...emt,tmt];function imt(r){let i=r.target;return i instanceof Zo?i.getFlatCoordinates().slice(-4,-2):i.getFlatCoordinates().slice(-2)}var Bne=class{options;start$=new Dt;end$=new Dt;changes$=new Dt;modify$=new Dt;select$=new Dt;abort$=new Dt;freehand$=new mt(!1);ispredefinedRadius$=new mt(!1);predefinedRadius$=new mt(void 0);radiusDrawEnd$=new mt(void 0);keyDown$$;olGeometryType;olInteractionStyle;olMap;olDrawingLayer;olDrawInteraction;olSelectInteraction;olModifyInteraction;onDrawStartKey;onDrawEndKey;onDrawAbortKey;onDrawKey;radius;mousePosition;get radiusVal(){return this.predefinedRadius$.getValue()}set radiusValData(i){this.predefinedRadius$.next(i)}get active(){return this.olMap!==void 0}get olDrawingLayerSource(){return this.olDrawingLayer.getSource()}constructor(i){this.options=i,this.olDrawingLayer=i.drawingLayer?i.drawingLayer:this.createOlInnerOverlayLayer(),this.olGeometryType=this.options.geometryType,this.olInteractionStyle=this.options.interactionStyle}setOlMap(i,e){if(!i){this.clearOlInnerOverlaySource(),this.removeOlInnerOverlayLayer(),this.removeOlInteractions(),this.olMap=i;return}this.olMap=i,this.addOlInnerOverlayLayer(),this.addOlInteractions(e)}getSource(){return this.olDrawingLayerSource}setOlInteractionStyle(i){this.olInteractionStyle=i}setGeometryType(i){this.olGeometryType=i}getGeometryType(){return this.olGeometryType}createOlInnerOverlayLayer(){return new i0({source:this.options.drawingLayerSource?this.options.drawingLayerSource:new tp,style:this.options.drawingLayerStyle,zIndex:500})}removeOlInnerOverlayLayer(){!this.options.drawingLayer&&this.olMap&&this.olMap.removeLayer(this.olDrawingLayer)}addOlInnerOverlayLayer(){this.options.drawingLayer||this.olMap.addLayer(this.olDrawingLayer)}clearOlInnerOverlaySource(){!this.options.drawingLayer&&!this.options.drawingLayerSource&&this.olDrawingLayerSource.clear(!0)}addOlInteractions(i){let e;if(this.freehand$.getValue()?this.olGeometryType==="Point"?e=new VR({type:"Circle",source:this.getSource(),style:typeof this.olInteractionStyle=="function"?void 0:this.olInteractionStyle,maxPoints:this.options.maxPoints,freehand:!0}):e=new VR({type:this.olGeometryType,source:this.getSource(),style:this.olInteractionStyle,maxPoints:this.options.maxPoints,freehand:!0}):this.ispredefinedRadius$.getValue()?e=new VR({type:"Point",source:this.getSource(),stopClick:!0,style:this.olInteractionStyle,maxPoints:this.options.maxPoints,freehand:!1,freehandCondition:()=>!1}):e=new VR({type:this.olGeometryType,source:this.getSource(),stopClick:!0,style:this.olInteractionStyle,maxPoints:this.options.maxPoints,freehand:!1,freehandCondition:()=>!1}),this.olMap.addInteraction(e),this.olDrawInteraction=e,this.onDrawStartKey=e.on("drawstart",n=>this.onDrawStart(n)),this.onDrawEndKey=e.on("drawend",n=>this.onDrawEnd(n)),this.onDrawAbortKey=e.on("drawabort",n=>this.abort$.next(n.feature.getGeometry())),i){let n=new Mee({source:this.getSource()});if(this.olMap.addInteraction(n),this.olModifyInteraction=n,!this.olSelectInteraction){let o=new i2({condition:I1e,style:void 0});this.olMap.addInteraction(o),this.olSelectInteraction=o,this.olSelectInteraction.on("select",s=>this.onSelect(s))}}}removeOlInteractions(){this.unsubscribeKeyDown(),_h([this.onDrawStartKey,this.onDrawEndKey,this.onDrawKey,this.onDrawAbortKey]),this.olMap&&(this.olMap.removeInteraction(this.olDrawInteraction),this.olMap.removeInteraction(this.olModifyInteraction)),this.olDrawInteraction=void 0,this.olModifyInteraction=void 0}onDrawStart(i){let e=i.feature.getGeometry();this.start$.next(e),this.clearOlInnerOverlaySource(),this.onDrawKey=e.on("change",n=>{this.mousePosition=imt(n),this.changes$.next(n.target)}),this.subscribeKeyDown()}onDrawEnd(i){i.feature.getGeometry().getType()==="Point"&&this.radiusDrawEnd$.next(this.predefinedRadius$.getValue()),this.unsubscribeKeyDown(),_h(this.onDrawKey);let e=i.feature.getGeometry();e.on("change",()=>{this.modify$.next(e)}),this.end$.next(e)}onSelect(i){i.selected.length===1&&this.select$.next(i.selected[0])}subscribeKeyDown(){this.unsubscribeKeyDown(),this.keyDown$$=Ds(document,"keydown").subscribe(i=>{if(i.key==="Escape"){this.olDrawInteraction.abortDrawing();return}if(i.key==="Backspace"&&this.olDrawInteraction.removeLastPoint(),i.key==="Enter"&&this.olDrawInteraction.finishDrawing(),i.key===" "){this.olMap.getView().animate({center:this.mousePosition,duration:100});return}})}unsubscribeKeyDown(){this.keyDown$$&&(this.keyDown$$.unsubscribe(),this.keyDown$$=void 0)}};var dre=(()=>{class r{styleList={};httpClient;constructor(e){this.httpClient=new dr(e)}getStyleList(e){return Ln.resolve(this.styleList,e)}load(e){let n=e.default||{};return e.path?new Promise(o=>{this.httpClient.get(e.path).pipe(Fn(s=>(console.log(`StyleList file ${e.path} could not be read`),o(!0),dd(s.error||"Server error")))).subscribe(s=>{this.styleList=Ln.mergeDeep(n,s),o(!0)})}):(this.styleList=n,!0)}static \u0275fac=function(n){return new(n||r)(xe(Cg))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),J$=class extends Error{},jne=class r extends J${constructor(){super("Invalid file"),Object.setPrototypeOf(this,r.prototype)}},Vne=class r extends J${constructor(){super("Nothing to export"),Object.setPrototypeOf(this,r.prototype)}};function nmt(r){return r==="CSV"||["CSVsemicolon","CSVcomma"].includes(r)}var rmt=255,gEe=(()=>{class r{config;httpClient;static ogreFormats={GML:"gml",GPX:"gpx",KML:"kml",Shapefile:"ESRI Shapefile",CSV:"CSV",CSVcomma:"CSVcomma",CSVsemicolon:"CSVsemicolon"};static noOgreFallbacks=["GML","GPX","KML"];ogreUrl;aggregateInComment=!0;constructor(e,n){this.config=e,this.httpClient=n,this.ogreUrl=this.config.getConfig("importExport.url");let o=this.config.getConfig("importExport.gpxAggregateInComment");o!==void 0&&(this.aggregateInComment=o)}export(e,n,o,s="EPSG:4326",l="EPSG:4326"){let h=this.cleanFeatures(e,n.format,"_featureStore");return this.exportAsync(h,n,o,s,l)}cleanFeatures(e,n,o="_"){return n==="GPX"&&this.aggregateInComment?this.generateAggregatedFeature(e):e.map(s=>{let l=s.getKeys().filter(p=>!p.startsWith(o));n==="Shapefile"&&s.get("_style")&&JSON.stringify(s.get("_style")).length>rmt&&(l=l.filter(m=>m!=="_style"));let h=l.reduce((p,m)=>(p[m]=s.get(m),p),{geometry:s.getGeometry()});return new An(h)})}generateAggregatedFeature(e){return e.map(n=>{let o=n.getKeys().filter(p=>!p.startsWith("_")),s="",l=o.reduce((p,m)=>(m&&m!=="geometry"&&(m==="id"&&n.get("draw")?s+=m+":"+n.get("draw")+`   \r
`:s+=m+":"+n.get(m)+`   \r
`),p[m]=n.get(m),p),{geometry:n.getGeometry()}),h=new An(l);return h.set("name",n.getId()),h.set("cmt",s),h})}exportAsync(e,n,o,s,l){let{format:h}=n;return new si(p=>{if(this.nothingToExport(e,h)){p.error(new Vne);return}if(Object.keys(r.ogreFormats).indexOf(h)>=0){if(!this.ogreUrl){r.noOgreFallbacks.indexOf(h)>=0?(this.exportToFile(e,h,o,s,l),p.complete()):p.error(new jne);return}this.exportWithOgre(e,n,o,s,l).subscribe({complete:()=>p.complete(),error:g=>p.error(g)})}else this.exportToFile(e,h,o,s,l),p.complete()})}exportToFile(e,n,o,s,l){return st(this,null,function*(){let h=this.formatFeatures(e,n,s,l),p=`${o}.${n.toLowerCase()}`;fW(h,"attachment/plain;charset=utf-8",p)})}formatFeatures(e,n,o="EPSG:4326",s="EPSG:4326"){let l=this.getFormatter(n),h=this.cleanFeatures(e,n,"_featureStore");return l.writeFeatures(h,{dataProjection:s,featureProjection:o})}getFormatter(e){switch(e){case"GPX":return new GS;case"GML":return new gM;case"KML":return new qS;default:return new hs}}exportExcel(e,n,o){return st(this,null,function*(){let s=yield xpe();for(let h of o.layers){let p=e.layerController.getById(h);if(Ah(p))continue;let m=yield Uz(this.getFeatures(e,p,o,n)),f=m?.length?this.formatFeatures(m,"GeoJSON"):null,y=(m?JSON.parse(f):{features:[]}).features.map(_=>this.formatRecord(_.properties));yield Spe(p.title,y,s)}let l=this.getTitleFromLayers(o.layers,e);Ipe(s,l,{compression:!0})})}getTitleFromLayers(e,n){return e.length===1?this.getLayerTitleFromId(e[0],n):"igo"}getLayerTitleFromId(e,n){return n.layerController.getById(e).title}formatRecord(e){return Object.entries(e).reduce((n,[o,s])=>(n[o]=this.formatDataType(s),n),{})}formatDataType(e){switch(!0){case typeof e=="string":return Cpe(e)?new Date(e).toLocaleString():e;case typeof e=="object":case e instanceof Array:return JSON.stringify(e);default:return e}}exportWithOgre(e,{format:n,csvSeparator:o=null},s,l,h){let p=new hs().writeFeatures(e,{dataProjection:h,featureProjection:l}),m=`${this.ogreUrl}/convertJson`,f=new FormData;f.append("json",p);let g=n==="Shapefile"?`${s}.zip`:`${s}.${n.toLowerCase()}`,y=r.ogreFormats[n];return nmt(n)&&(g=`${s}.csv`,(n==="CSVcomma"||n==="CSVsemicolon")&&(y="CSV"),f.append("lco",`SEPARATOR=${o}`),n==="CSVsemicolon"&&f.append("lco",`SEPARATOR=${o}`)),f.append("outputName",this.formatFilename(g)),f.append("format",y),this.httpClient.post(m,f,{responseType:"blob"}).pipe(br(_=>{Tpe(_,g)}))}formatFilename(e){return e.replaceAll(" ","_").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"'")}nothingToExport(e,n){return e.length===0?!0:n==="GPX"?e.find(s=>["Point","LineString","MultiLineString"].indexOf(s.getGeometry().getType())>=0)===void 0:!1}getFeaturesFromMap(e,n){let o=e.dataSource.ol,s=e.map.viewController.getExtent(),l=n.featureInMapExtent?o.getFeaturesInExtent(s):o.getFeatures();return e.dataSource instanceof jm&&(l=l.flatMap(h=>h.get("features"))),l}getFeaturesFromWorkspace(e,n,o){let s=o.layersWithSelection.indexOf(n)!==-1,l=o.featureInMapExtent;return s&&l?e.entityStore.stateView.all().filter(h=>h.state.inMapExtent&&h.state.selected).map(h=>h.entity.ol):s&&!l?e.entityStore.stateView.all().filter(h=>h.state.selected).map(h=>h.entity.ol):l?e.entityStore.stateView.all().filter(h=>h.state.inMapExtent).map(h=>h.entity.ol):e.entityStore.stateView.all().map(h=>h.entity.ol)}getFeatures(e,n,o,s){let l=e.viewController.getOlProjection(),h=o.featureInMapExtent?e.viewController.getExtent():void 0;if(n.dataSource instanceof pb)return n.dataSource.fetchFeatures({extent:h,projection:l,httpClient:this.httpClient}).pipe(Fn(p=>{throw p}));if(n.options.workspace?.enabled){let p=this.getWorkspaceByLayerId(n.id,s);if(p?.entityStore?.stateView.all().length){let m=this.getFeaturesFromWorkspace(p,n.id,o);return Vt(m).pipe(Fn(f=>{throw f}))}}else if(n instanceof ll)return Vt(this.getFeaturesFromMap(n,o));return Vt([])}getWorkspaceByLayerId(e,n){let o=n.all().find(s=>s.layer.id===e);if(o)return o}getGeomTypes(e,n){let o=[];return n==="Shapefile"||n==="GPX"?e.forEach(s=>{let l=s.getGeometry().getType(),h=o.find(p=>p.type===l);h?h.features.push(s):o.push({type:l,features:[s]})}):o=[{type:null,features:e}],o.forEach(s=>{s.features.forEach(l=>{let h=l.get("rad");if(h){let p=[l.get("longitude"),l.get("latitude")],m=y6(p,h,500);m.transform("EPSG:4326",l.get("_projection")),l.setGeometry(m)}})}),o}static \u0275fac=function(n){return new(n||r)(xe(Ri),xe(dr))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var sC=class extends Error{},eU=class r extends sC{constructor(){super("Invalid file"),Object.setPrototypeOf(this,r.prototype)}},mI=class r extends sC{constructor(){super("Failed to read file"),Object.setPrototypeOf(this,r.prototype)}},tU=class r extends sC{constructor(){super("Nothing to import"),Object.setPrototypeOf(this,r.prototype)}},$ne=class extends sC{constructor(){super("File is too large"),Object.setPrototypeOf(this,tU.prototype)}},Une=class extends sC{constructor(){super("Invalid SRS definition"),Object.setPrototypeOf(this,tU.prototype)}},zne=class r extends sC{constructor(){super("Error 500 with OGRE"),Object.setPrototypeOf(this,r.prototype)}};function omt(r,i,e,n,o,s=!1){let l=r.map(_=>oy(_,i.projection)),h=Gs(),p={id:h,type:"vector",queryable:!0},m=new As(p);m.ol.addFeatures(l);let f,g=!1;l[0].getKeys().includes("_style")||l[0].getKeys().includes("_mapTitle")?f=rre():(f=ore(),g=!0);let y=o.createLayer({id:h,title:n,workspace:{enabled:!0,searchIndexEnabled:!0},isIgoInternalLayer:!0,source:m,igoStyle:{editable:g},idbInfo:{firstLoad:!0,storeToIdb:s,contextUri:e||"*"},style:f});return y.setExtent(mb(l,i.viewProjection)),i.layerController.add(y),Fu(i.viewController,l),y}function smt(r,i,e,n,o,s,l,h,p=!0){let m=r.map(w=>oy(w,i.projection)),f,g;if(n.getStyleList(e.toString()+".styleByAttribute")){let w=n.getStyleList(e.toString()+".styleByAttribute");f=(A,k)=>o.createStyleByAttribute(A,w,k)}else if(n.getStyleList(e.toString()+".clusterStyle")){let w=n.getStyleList(e.toString()+".clusterParam");g=n.getStyleList(e.toString()+".distance"),f=(A,k)=>{let R=o.createStyle(n.getStyleList(e.toString()+".clusterStyle"),A,k);return o.createClusterStyle(A,k,w,R)}}else if(n.getStyleList(e.toString()+".style"))f=(w,A)=>o.createStyle(n.getStyleList(e.toString()+".style"),w,A);else if(n.getStyleList("default.clusterStyle")&&r[0].geometry.type==="Point"){let w=n.getStyleList("default.clusterParam");g=n.getStyleList("default.distance"),f=(A,k)=>{let R=o.createStyle(n.getStyleList("default.clusterStyle"),A,k);return o.createClusterStyle(A,k,w,R)}}else f=(w,A)=>o.createStyle(n.getStyleList("default.style"),w,A);let y;if(n.getStyleList(e.toString()+".clusterStyle")){let w={distance:g,type:"cluster",queryable:!0};y=new jm(Object.assign(w,l)),y.ol.source.addFeatures(m)}else if(n.getStyleList(e.toString())){let w={type:"vector",queryable:!0};y=new As(Object.assign(w,l)),y.ol.addFeatures(m)}else if(n.getStyleList("default.clusterStyle")&&r[0].geometry.type==="Point"){let w={distance:g,type:"cluster",queryable:!0};y=new jm(Object.assign(w,l)),y.ol.source.addFeatures(m)}else{let w={type:"vector",queryable:!0};y=new As(Object.assign(w,l)),y.ol.addFeatures(m)}let _=new ll(Object.assign({title:e,id:s||Gs(),isIgoInternalLayer:!0,source:y,style:f},h));return i.layerController.add(_),p&&Fu(i.viewController,m),_}function E$(r){return r.toString().padStart(2,"0")}function iU(r,i,e,n,o,s,l,h,p){if(i.length===0){dmt(r,o);return}let m=Gne(r);(l?l.open("igo.geo.import.promptStoreToIdb"):Vt(!1)).pipe(So()).subscribe(g=>{let y=new Date,_=[y.getFullYear(),E$(y.getMonth()+1),E$(y.getDate())].join("/")+" "+[E$(y.getHours()),E$(y.getMinutes())].join(":");m=g?`${m} (${_})`:m,h?smt(i,e,m,h,p):omt(i,e,n,m,s,g),o.success("igo.geo.dropGeoFile.success.text","igo.geo.dropGeoFile.success.title",void 0,{value:m})})}function ure(r,i,e,n){n=n||30,{"Invalid file":amt,"File is too large":cmt,"Failed to read file":lmt,"Invalid SRS definition":umt,"Error 500 with OGRE":hmt}[i.message](r,i,e,n)}function amt(r,i,e){e.error("igo.geo.dropGeoFile.invalid.text","igo.geo.dropGeoFile.invalid.title",void 0,{value:r.name,mimeType:r.type})}function lmt(r,i,e){e.error("igo.geo.dropGeoFile.unreadable.text","igo.geo.dropGeoFile.unreadable.title",void 0,{value:r.name})}function cmt(r,i,e,n){e.error("igo.geo.dropGeoFile.tooLarge.text","igo.geo.dropGeoFile.tooLarge.title",void 0,{value:r.name,size:n})}function dmt(r,i){i.error("igo.geo.dropGeoFile.empty.text","igo.geo.dropGeoFile.empty.title",void 0,{value:r.name,mimeType:r.type})}function umt(r,i){i.error("igo.geo.dropGeoFile.invalidSRS.text","igo.geo.dropGeoFile.invalidSRS.title",void 0,{value:r.name,mimeType:r.type})}function hmt(r,i,e){e.error("igo.geo.dropGeoFile.ogreServer.text","igo.geo.dropGeoFile.ogreServer.title")}function hAe(r){return r.name.split(".").pop().toLowerCase()}function Gne(r){return r.name.substr(0,r.name.lastIndexOf("."))}var hre=(()=>{class r{http;config;static formatExtensionAssociation={GeoJSON:"geojson",GML:"gml",GPX:"gpx",KML:"kml",Shapefile:"zip"};static allowedMimeTypes=["application/gml+xml","application/vnd.google-earth.kml+xml","application/gpx+xml","application/json"];static allowedZipMimeTypes=["application/zip","application/x-zip-compressed","application/x-zip"];static allowedExtensions=["geojson","kml","gpx","json","gml","zip"];ogreUrl;clientSideFileSizeMax;constructor(e,n){this.http=e,this.config=n;let o=this.config.getConfig("importExport");this.ogreUrl=o.url;let s=o.clientSideFileSizeMaxMb;this.clientSideFileSizeMax=(s||30)*Math.pow(1024,2),o.formats&&(r.allowedExtensions=o.formats.map(l=>r.formatExtensionAssociation[l]).filter(l=>l),r.allowedExtensions.includes("geojson")&&r.allowedExtensions.push("json"))}import(e,n="EPSG:4326",o="EPSG:4326"){return this.importAsync(e,n,o)}getFileImporter(e){let n=hAe(e),o=r.allowedExtensions,s=[];o.includes("zip")&&(s=r.allowedZipMimeTypes);let l=e.type;if(!([...r.allowedMimeTypes,...s].indexOf(l)<0&&o.indexOf(n)<0)){if(l==="application/json"||["json","geojson","kml","gpx"].indexOf(n)>=0)return this.importFile;if(this.ogreUrl!==void 0)return this.importFileWithOgre}}importAsync(e,n,o){let s=l=>{if(e.size>=this.clientSideFileSizeMax){l.error(new $ne);return}let h=this.getFileImporter(e);if(h===void 0){l.error(new eU);return}h.call(this,e,l,n,o)};return new si(s)}importFile(e,n,o,s){let l=new FileReader;l.onload=h=>{try{let p=this.parseFeaturesFromFile(e,h.target.result,o,s);n.next(p)}catch{n.error(new mI)}n.complete()},l.onerror=()=>{n.error(new mI)},l.readAsText(e,"UTF-8")}importFileWithOgre(e,n,o,s){let l=`${this.ogreUrl}/convert`,h=new FormData;h.append("upload",e),h.append("sourceSrs",o),h.append("targetSrs",s),h.append("formatOutput","GEOJSON"),h.append("skipFailures",""),this.http.post(l,h,{headers:new Wd}).subscribe(p=>{if(p===null){n.error(new mI);return}if((p.errors||[]).length>0)n.error(new mI);else{let f=this.parseFeaturesFromGeoJSON(e,p,s);n.next(f),n.complete()}},p=>{p.error.caught=!0;let m=p.error.msg||"";m==="No valid files found"?n.error(new eU):m&&m.startWith("ERROR 1: Failed to process SRS definition")?n.error(new Une):p.status===500?n.error(new zne):n.error(new mI)})}parseFeaturesFromFile(e,n,o,s){let l=hAe(e),h=e.type,p=new hs,m;if(h==="application/vnd.google-earth.kml+xml")m=new qS;else if(h==="application/gml+xml")m=new gM;else if(h==="application/gpx+xml")m=new GS;else switch(l){case"kml":m=new qS;break;case"gpx":m=new GS;break;case"gml":m=new gM;break;default:m=p;break}return m.readFeatures(n,{dataProjection:o,featureProjection:s}).map(y=>Object.assign(p.writeFeatureObject(y),{projection:s,meta:{id:Gs(),title:Gne(e)}}))}parseFeaturesFromGeoJSON(e,n,o){let s=new hs;return s.readFeatures(n).map(p=>Object.assign(s.writeFeatureObject(p),{projection:o,meta:{id:Gs(),title:Gne(e)}}))}static \u0275fac=function(n){return new(n||r)(xe(dr),xe(Ri))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var _Ee=(()=>{class r extends yTe{component;importService;styleListService;styleService;config;messageService;layerService;confirmDialogService;filesDropped=new it;filesInvalid=new it;epsgCode$$=[];filesDropped$$;get map(){return this.component.map}contextUri;constructor(e,n,o,s,l,h,p,m){super(),this.component=e,this.importService=n,this.styleListService=o,this.styleService=s,this.config=l,this.messageService=h,this.layerService=p,this.confirmDialogService=m}ngOnInit(){this.filesDropped$$=this.filesDropped.subscribe(e=>{this.onFilesDropped(e)})}ngOnDestroy(){this.filesDropped$$.unsubscribe(),this.epsgCode$$.map(e=>e.unsubscribe())}onDragOver(e){super.onDragOver(e)}onDragLeave(e){super.onDragLeave(e)}onDrop(e){super.onDrop(e)}onFilesDropped(e){for(let n of e)this.epsgCode$$.push(Npt({file:n}).pipe(Uc(o=>!o),So(),ul(o=>this.importService.import(n,o==="epsgNotDefined"?void 0:o))).subscribe(o=>this.onFileImportSuccess(n,o),o=>this.onFileImportError(n,o)))}onFileImportSuccess(e,n){let o=this.config.getConfig("importExport"),s=o?.allowToStoreLayer?this.confirmDialogService:void 0;o?.importWithStyle?iU(e,n,this.map,this.contextUri,this.messageService,this.layerService,s,this.styleListService,this.styleService):iU(e,n,this.map,this.contextUri,this.messageService,this.layerService,s)}onFileImportError(e,n){ure(e,n,this.messageService,this.config.getConfig("importExport.clientSideFileSizeMaxMb"))}static \u0275fac=function(n){return new(n||r)(ie(m0),ie(hre),ie(dre),ie(fb),ie(Ri),ie(nl),ie(Lu),ie(M2))};static \u0275dir=Pt({type:r,selectors:[["","igoDropGeoFile",""]],hostBindings:function(n,o){n&1&&Oe("dragover",function(l){return o.onDragOver(l)})("dragleave",function(l){return o.onDragLeave(l)})("drop",function(l){return o.onDrop(l)})},inputs:{contextUri:"contextUri"},standalone:!0,features:[fn]})}return r})();var pmt=(()=>{class r{open(e){e.extern&&window.open(e.url,"_blank")}static \u0275fac=function(n){return new(n||r)};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),yEe=(()=>{class r{metadataService;dialog;layer;color="primary";constructor(e,n){this.metadataService=e,this.dialog=n}openMetadata(e){e.extern?!e.url&&e.abstract?this.dialog.open(pAe,{data:{layerTitle:this.layer.title,abstract:e.abstract,type:e.type}}):e.url&&this.metadataService.open(e):!e.extern&&e.abstract&&this.dialog.open(pAe,{data:{layerTitle:this.layer.title,abstract:e.abstract,type:e.type}})}get options(){if(this.layer)return this.layer.options}static \u0275fac=function(n){return new(n||r)(ie(pmt),ie(vu))};static \u0275cmp=gt({type:r,selectors:[["igo-metadata-button"]],inputs:{layer:"layer",color:"color"},standalone:!0,features:[yt],decls:1,vars:1,consts:[["mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"matTooltip","color","click",4,"ngIf"],["mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"click","matTooltip","color"]],template:function(n,o){n&1&&We(0,gut,4,4,"button",0),n&2&&ee("ngIf",o.options&&o.options.metadata&&o.options.metadata.url||o.options&&o.options.metadata&&o.options.metadata.abstract)},dependencies:[gn,bn,Cr,Er,Ar,jn,er,On,hn,hP],changeDetection:0})}return r})(),pAe=(()=>{class r{data;constructor(e){this.data=e}static \u0275fac=function(n){return new(n||r)(ie(_E))};static \u0275cmp=gt({type:r,selectors:[["igo-metadata-abstract"]],standalone:!0,features:[yt],decls:6,vars:3,consts:[["mat-dialog-title",""],["mat-button","","mat-dialog-close","",1,"close-button"],["class","mat-typography",4,"ngIf"],[1,"mat-typography"],[3,"innerHTML"]],template:function(n,o){n&1&&(ne(0,"h2",0),Ye(1),ce(),ne(2,"button",1),Ye(3,"X"),ce(),We(4,_ut,3,1,"mat-dialog-content",2)(5,yut,2,1,"mat-dialog-content",2)),n&2&&(q(),Si(o.data.layerTitle),q(3),ee("ngIf",o.data.type!=="arcgisrest"),q(),ee("ngIf",o.data.type==="arcgisrest"))},dependencies:[fv,bn,Ua,VB,gn,ff],styles:[`:host{position:relative;display:block}.close-button{top:5px;right:5px;padding:7px;line-height:10px;position:absolute!important;min-width:auto}
`],encapsulation:2})}return r})();var U2=(()=>{class r extends Pd{static id="map";static type=Qo;constructor(e){super(e)}getId(){return r.id}getType(){return r.type}getDefaultOptions(){return{title:"Carte"}}static \u0275fac=function(n){return new(n||r)(xe("options"))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})();function mmt(r){return new U2(r.getConfig(`searchSources.${U2.id}`)||{})}function fmt(){return{provide:Pd,useFactory:mmt,multi:!0,deps:[Ri]}}var vEe=(()=>{class r{component;queryService;queries$$=[];mapClickListener;olDragSelectInteraction;olDragSelectInteractionEndKey;queryFeatures=!1;queryFeaturesHitTolerance=0;queryFeaturesCondition;waitForAllQueries=!0;query=new it;get map(){return this.component.map}constructor(e,n){this.component=e,this.queryService=n}ngAfterViewInit(){this.listenToMapClick(),this.addDragBoxInteraction()}ngOnDestroy(){this.cancelOngoingQueries(),this.unlistenToMapClick(),this.removeDragBoxInteraction()}listenToMapClick(){this.mapClickListener=this.map.ol.on("singleclick",e=>this.onMapEvent(e))}unlistenToMapClick(){_h(this.mapClickListener),this.mapClickListener=void 0}onMapEvent(e){if(this.cancelOngoingQueries(),!this.queryService.queryEnabled)return;let n=[];this.queryFeatures&&n.push(this.doQueryFeatures(e));let o=this.map.ol.getView().getResolution(),s=this.map.layerController.all.filter(Sne);n.push(...this.queryService.query(s,{coordinates:e.coordinate,projection:this.map.projection,resolution:o})),n.length!==0&&(this.waitForAllQueries?this.queries$$.push(UC(...n).subscribe(l=>{let h=[].concat(...l);this.query.emit({features:h,event:e})})):this.queries$$=n.map(l=>l.subscribe(h=>{this.query.emit({features:h,event:e})})))}doQueryFeatures(e){let n=[];if(e.type==="singleclick")this.map.ol.forEachFeatureAtPixel(e.pixel,(o,s)=>{let l=this.map.layerController.getById(s.values_._layer.id);if(!(Ah(l)||!l.displayed)&&!l.dataSource.options.queryFormatAsWms&&o)if(o.get("features"))for(let h of o.get("features")){let p=hb(h,this.map.projection);p.meta={title:h.values_.nom,id:s.values_._layer.id+"."+h.id_,icon:h.values_._icon,sourceTitle:s.values_.title,alias:this.queryService.getAllowedFieldsAndAlias(l)},n.push(p)}else if(o instanceof Zc){let h=_pt(o,this.map.projection,s);h.meta={id:s.values_._layer.id+"."+h.meta.id,sourceTitle:s.values_.title,alias:this.queryService.getAllowedFieldsAndAlias(l),title:this.queryService.getQueryTitle(h,l)||h.meta.title},n.push(h)}else{let h=hb(o,this.map.projection,s);h.meta={id:s.values_._layer.id+"."+h.meta.id,sourceTitle:s.values_.title,alias:this.queryService.getAllowedFieldsAndAlias(l),title:this.queryService.getQueryTitle(h,l)||h.meta.title},n.push(h)}},{hitTolerance:this.queryFeaturesHitTolerance||0,layerFilter:this.queryFeaturesCondition?this.queryFeaturesCondition:kpt});else if(e.type==="boxend"){let s=e.target.getGeometry().getExtent();this.map.layerController.all.filter(Sne).filter(l=>Ru(l)&&l instanceof ll&&l.visible).map(l=>{l.dataSource.ol.forEachFeatureIntersectingExtent(s,p=>{let m=hb(p,this.map.projection,l.ol);m.meta={id:l.id+"."+p.getId(),icon:p.values_._icon,sourceTitle:l.title,alias:this.queryService.getAllowedFieldsAndAlias(l),title:this.queryService.getQueryTitle(m,l)||m.meta.title},n.push(m)})})}return Vt(n)}cancelOngoingQueries(){this.queries$$.forEach(e=>e.unsubscribe()),this.queries$$=[]}addDragBoxInteraction(){let e,n=this.map.ol.getInteractions().getArray();for(let o of n)if(o instanceof j2){e=o;break}e===void 0&&(e=new j2({condition:k$}),this.map.ol.addInteraction(e),this.olDragSelectInteraction=e),this.olDragSelectInteractionEndKey=e.on("boxend",o=>this.onMapEvent(o))}removeDragBoxInteraction(){this.olDragSelectInteractionEndKey!==void 0&&_h(this.olDragSelectInteractionEndKey),this.olDragSelectInteraction!==void 0&&this.map.ol.removeInteraction(this.olDragSelectInteraction),this.olDragSelectInteraction=void 0}static \u0275fac=function(n){return new(n||r)(ie(m0,2),ie(tL))};static \u0275dir=Pt({type:r,selectors:[["","igoQuery",""]],inputs:{queryFeatures:"queryFeatures",queryFeaturesHitTolerance:"queryFeaturesHitTolerance",queryFeaturesCondition:"queryFeaturesCondition",waitForAllQueries:"waitForAllQueries"},outputs:{query:"query"},standalone:!0})}return r})(),bEe=(()=>{class r{static forRoot(){return{ngModule:r,providers:[fmt()]}}static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({providers:[tL],imports:[$a,_4]})}return r})(),wEe=[Qo,ZF],pre=(()=>{class r{searchSourceService;searchType$=new mt(void 0);searchType$$;searchTypes=wEe;set searchType(e){this.setSearchType(e)}get searchType(){return this.searchType$.value}searchTypeChange=new it;constructor(e){this.searchSourceService=e}ngOnInit(){this.searchType$$=this.searchType$.pipe(cm()).subscribe(e=>this.onSetSearchType(e))}ngOnDestroy(){this.searchType$$.unsubscribe()}onSearchTypeChange(e){this.setSearchType(e)}getSearchTypeTitle(e){return`igo.geo.search.${e.toLowerCase()}.title`}setSearchType(e){this.searchType$.next(e)}onSetSearchType(e){e!=null&&(this.searchSourceService.enableSourcesByType(e),this.searchTypeChange.emit(e))}static \u0275fac=function(n){return new(n||r)(ie(Jp))};static \u0275cmp=gt({type:r,selectors:[["igo-search-selector"]],inputs:{searchTypes:"searchTypes",searchType:"searchType"},outputs:{searchTypeChange:"searchTypeChange"},standalone:!0,features:[yt],decls:10,vars:8,consts:[["searchSelectorMenu","matMenu"],[1,"igo-search-selector"],["mat-icon-button","","color","primary","tooltip-position","below","matTooltipShowDelay","500",1,"igo-search-selector-button",3,"matTooltip","matMenuTriggerFor"],["xPosition","before","yPosition","above",1,"no-border-radius"],[1,"igo-search-selector-radio-group",3,"change","value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,o){if(n&1){let s=dt();ne(0,"div",1)(1,"button",2),Ne(2,"translate"),ne(3,"mat-icon"),Ye(4,"arrow_drop_down"),ce()(),ne(5,"mat-menu",3,0)(7,"mat-radio-group",4),Ne(8,"async"),Oe("change",function(h){return Re(s),Fe(o.onSearchTypeChange(h.value))}),We(9,vut,3,4,"mat-radio-button",5),ce()()()}if(n&2){let s=ji(6);q(),ee("matTooltip",je(2,4,"igo.geo.search.menu.tooltip"))("matMenuTriggerFor",s),q(6),ee("value",je(8,6,o.searchType$)),q(2),ee("ngForOf",o.searchTypes)}},dependencies:[bn,Cr,Er,Ar,AP,wv,TP,jn,er,x$,NF,A2,Ps,kr,On,hn],styles:["[_nghost-%COMP%]   .igo-search-selector-button[_ngcontent-%COMP%]{border-radius:0}[_nghost-%COMP%]   .igo-search-selector-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   .igo-search-selector-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-ripple[_ngcontent-%COMP%], [_nghost-%COMP%]   .igo-search-selector-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mdc-icon-button__ripple[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   .igo-search-selector-radio-group[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column}[_nghost-%COMP%]   .igo-search-selector-radio-group[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin:5px}"],changeDetection:0})}return r})(),mre=(()=>{class r{searchSourceService;mediaService;storageService;hasPointerReverseSearchSource=!1;searchSourcesAllEnabled=!1;buffer=[];lastKeyTime=Date.now();displayBlock="block";get isTouchScreen(){return this.mediaService.isTouchScreen()}pointerSummaryEnabled=!1;searchResultsGeometryEnabled=!1;reverseSearchCoordsFormatEnabled=!1;searchSourceChange=new it;pointerSummaryStatus=new it;searchResultsGeometryStatus=new it;reverseSearchCoordsFormatStatus=new it;handleKeyboardEvent(e){e.key==="F2"&&(this.pointerSummaryEnabled=!this.pointerSummaryEnabled,this.pointerSummaryStatus.emit(this.pointerSummaryEnabled))}constructor(e,n,o){this.searchSourceService=e,this.mediaService=n,this.storageService=o}ngOnInit(){this.hasPointerReverseSearchSource=this.hasReverseSearchSourcesForPointerSummary()}getSearchSources(){let e=this.searchSourceService.getSources().filter(G2).filter(s=>s.available&&s.getId()!=="map"&&s.showInSettings),n=this.searchSourceService.getSources().filter(sU).filter(s=>s.available&&s.getId()!=="map"&&s.showInSettings),o=e.concat(n);return this.computeSourcesCheckAllBehavior(o),o}hasReverseSearchSourcesForPointerSummary(){return!!this.searchSourceService.getEnabledSources().filter(are).length}settingsValueCheckedCheckbox(e,n,o,s){s.enabled=e.checked,n.setParamFromSetting(o),this.searchSourceChange.emit(n)}computeSettingCheckAllBehavior(e){e.allEnabled===void 0?e.values.find(n=>n.enabled)?e.allEnabled=!1:e.allEnabled=!0:e.allEnabled=!e.allEnabled}computeSourcesCheckAllBehavior(e){let n=e.filter(s=>s.enabled).length,o=e.filter(s=>!s.enabled).length;this.searchSourcesAllEnabled=!(n>=o)}checkUncheckAll(e,n,o){e.stopPropagation(),this.computeSettingCheckAllBehavior(o),o.values.forEach(s=>{s.enabled=o.allEnabled}),n.setParamFromSetting(o),this.searchSourceChange.emit(n)}checkUncheckAllSources(e){e.stopPropagation(),this.getSearchSources().map(n=>{n.enabled=this.searchSourcesAllEnabled,this.searchSourceChange.emit(n)})}settingsValueCheckedRadioButton(e,n,o,s){o.values.forEach(l=>{l.value!==s.value?l.enabled=!e.source.checked:l.enabled=e.source.checked}),n.setParamFromSetting(o),this.searchSourceChange.emit(n)}onCheckSearchSource(e,n){n.enabled=e.checked;let o=this.storageService.get(n.getId()+".options")||{};o.enabled=n.enabled,this.storageService.set(n.getId()+".options",o),this.searchSourceChange.emit(n)}getAvailableValues(e){return e.values.filter(n=>n.available!==!1)}getAvailableHashtagsValues(e){if(e.hashtags)return e.hashtags.map(n=>"#"+n).join(", ")}stopPropagation(e){e.stopPropagation()}changePointerReverseSearch(e){this.pointerSummaryEnabled=e.checked,this.pointerSummaryStatus.emit(this.pointerSummaryEnabled)}changeSearchResultsGeometry(e){this.searchResultsGeometryEnabled=e.checked,this.searchResultsGeometryStatus.emit(this.searchResultsGeometryEnabled)}reverseSearchCoordsFormat(e){this.reverseSearchCoordsFormatEnabled=e.checked,this.reverseSearchCoordsFormatStatus.emit(this.reverseSearchCoordsFormatEnabled)}static \u0275fac=function(n){return new(n||r)(ie(Jp),ie(Ol),ie(wo))};static \u0275cmp=gt({type:r,selectors:[["igo-search-settings"]],hostBindings:function(n,o){n&1&&Oe("keydown",function(l){return o.handleKeyboardEvent(l)},!1,_g)},inputs:{pointerSummaryEnabled:"pointerSummaryEnabled",searchResultsGeometryEnabled:"searchResultsGeometryEnabled",reverseSearchCoordsFormatEnabled:"reverseSearchCoordsFormatEnabled"},outputs:{searchSourceChange:"searchSourceChange",pointerSummaryStatus:"pointerSummaryStatus",searchResultsGeometryStatus:"searchResultsGeometryStatus",reverseSearchCoordsFormatStatus:"reverseSearchCoordsFormatStatus"},standalone:!0,features:[yt],decls:24,vars:23,consts:[["searchSettingsMenu","matMenu"],["sub_menu","matMenu"],["test_sub_menu","matMenu"],[1,"igo-search-settings"],["mat-icon-button","","color","primary","tooltip-position","below","matTooltipShowDelay","500",1,"igo-search-settings-button",3,"matTooltip","matMenuTriggerFor"],[1,"no-border-radius"],["class","checkAllButton",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"pointer-summary-slide-toggle-container"],["mat-menu-item",""],["class","search-option","tooltip-position","below","matTooltipShowDelay","500",3,"matTooltip","checked","change","click",4,"ngIf"],["tooltip-position","below","matTooltipShowDelay","500",1,"search-option",3,"change","click","matTooltip","checked"],[1,"checkAllButton"],["mat-raised-button","",3,"click"],[1,"igo-search-settings-search-source"],[1,"igo-search-settings-checkbox",3,"click","change","checked","value"],["mat-menu-item","",3,"matMenuTriggerFor",4,"ngIf"],["mat-menu-item","",4,"ngIf"],["mat-menu-item","",3,"matMenuTriggerFor"],["yPosition","above",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"igo-search-settings-radio-group",3,"value"],["class","mat-typography",3,"value","matTooltip","checked","click","change",4,"ngFor","ngForOf"],[1,"mat-typography",3,"click","change","value","matTooltip","checked"],["class","igo-search-settings-sub-menu","mat-menu-item","",4,"ngFor","ngForOf"],["mat-menu-item","",1,"igo-search-settings-sub-menu"],[3,"click","change","checked","value","matTooltip"]],template:function(n,o){if(n&1){let s=dt();ne(0,"div",3)(1,"button",4),Ne(2,"translate"),ne(3,"mat-icon"),Ye(4,"expand_more"),ce()(),ne(5,"mat-menu",5,0),We(7,but,5,5,"div",6)(8,Mut,8,5,"ng-container",7),wt(9,"mat-divider"),ne(10,"span",8)(11,"div",9),We(12,Dut,4,7,"mat-slide-toggle",10),ce(),ne(13,"div",9)(14,"mat-slide-toggle",11),Ne(15,"translate"),Oe("change",function(h){return Re(s),Fe(o.changeSearchResultsGeometry(h))})("click",function(h){return Re(s),Fe(h.stopPropagation())}),Ye(16),Ne(17,"translate"),ce()(),ne(18,"div",9)(19,"mat-slide-toggle",11),Ne(20,"translate"),Ne(21,"translate"),Oe("change",function(h){return Re(s),Fe(o.reverseSearchCoordsFormat(h))})("click",function(h){return Re(s),Fe(h.stopPropagation())}),Ye(22),Ne(23,"translate"),ce()()()()()}if(n&2){let s=ji(6);q(),ee("matTooltip",je(2,11,"igo.geo.search.menu.tooltip"))("matMenuTriggerFor",s),q(6),ee("ngIf",o.getSearchSources().length>4),q(),ee("ngForOf",o.getSearchSources()),q(4),ee("ngIf",o.hasPointerReverseSearchSource&&!o.isTouchScreen),q(2),ee("matTooltip",je(15,13,"igo.geo.search.searchResultsGeometry.tooltip"))("checked",o.searchResultsGeometryEnabled),q(2),Qt(" ",je(17,15,"igo.geo.search.searchResultsGeometry.title")," "),q(3),ee("matTooltip",o.reverseSearchCoordsFormatEnabled?je(20,17,"igo.geo.search.reverseCoordFormat.tooltipLatLon"):je(21,19,"igo.geo.search.reverseCoordFormat.tooltipLonLat"))("checked",o.reverseSearchCoordsFormatEnabled),q(3),Qt(" ",je(23,21,"igo.geo.search.reverseCoordFormat.title")," ")}},dependencies:[bn,Ua,Cr,Er,Ar,AP,wv,IP,TP,jn,er,gn,Ps,yv,jg,IH,Pde,x$,NF,A2,I_,wS,JV,QM,On,hn],styles:["[_nghost-%COMP%]{display:flex;align-items:center}.checkAllButton[_ngcontent-%COMP%]{text-align:center;padding:0 5px}.igo-search-settings-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-right:16px}.igo-search-settings-checkbox[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{display:flex}.igo-search-settings-search-source[_ngcontent-%COMP%]{display:flex;width:100%}.igo-search-settings-search-source[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{display:flex;margin-left:5px;margin-right:5px}.search-option[_ngcontent-%COMP%]{display:block;margin-right:10px;margin-bottom:15px}.pointer-summary-slide-toggle-container[_ngcontent-%COMP%]{overflow-x:hidden}.pointer-summary-slide-toggle-container[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin:10px 0}.igo-search-settings-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .igo-search-settings-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-ripple[_ngcontent-%COMP%], .igo-search-settings-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mdc-icon-button__ripple[_ngcontent-%COMP%]{border-radius:0!important}.igo-search-settings-sub-menu[_ngcontent-%COMP%]{min-height:34px}"],changeDetection:0})}return r})(),iL=(()=>{class r{configService;searchService;searchSourceService;static invalidKeys=["Control","Shift","Alt","ArrowDown","ArrowUp","ArrowRight","ArrowLeft"];placeholder$=new mt("igo.geo.search.placeholder");empty$=new mt(!0);term$$;stream$=new mt("");stream$$;searchType$$;researches$$;showSearchButton=!1;searchTypes=wEe;withDivider;set searchType(e){this.setSearchType(e)}get searchType(){return this.searchType$.value}searchType$=new mt(void 0);pointerSummaryStatus=new it;searchResultsGeometryStatus=new it;reverseSearchCoordsFormatStatus=new it;set term(e){this.setTerm(e)}get term(){return this.term$.value}term$=new mt("");set disabled(e){this.disabled$.next(e)}get disabled(){return this.disabled$.value}disabled$=new mt(!1);pointerSummaryEnabled=!1;searchResultsGeometryEnabled=!1;get reverseSearchCoordsFormatEnabled(){return this._reverseSearchCoordsFormatEnabled}set reverseSearchCoordsFormatEnabled(e){this._reverseSearchCoordsFormatEnabled=e,this.setTerm(this.term,!0)}_reverseSearchCoordsFormatEnabled=!1;floatLabel="auto";appearance="fill";placeholder;label;color="primary";termSplitter="|";debounce=200;minLength=2;searchSelector=!1;searchSettings=!1;forceNA=!1;store;searchTermChange=new it;search=new it;searchTypeChange=new it;clearFeature=new it;searchSettingsChange=new it;input;get empty(){return this.term.length===0}constructor(e,n,o){this.configService=e,this.searchService=n,this.searchSourceService=o}ngOnInit(){this.term$$=this.term$.subscribe(n=>{this.empty$.next(n===void 0||n.length===0)}),this.stream$$=this.stream$.pipe(ND(()=>lm(this.debounce))).subscribe(n=>this.onSetTerm(n)),this.handlePlaceholder(),this.searchType$$=this.searchType$.pipe(cm()).subscribe(n=>this.onSetSearchType(n));let e=this.configService.getConfig("searchBar.showSearchButton");this.showSearchButton=e!==void 0?e:!1}ngOnDestroy(){this.term$$.unsubscribe(),this.stream$$.unsubscribe(),this.searchType$$.unsubscribe()}onKeyup(e){let n=e.key;if(!this.keyIsValid(n))return;let o=e.target.value;this.setTerm(o)}onClearButtonClick(){this.clear(),this.clearFeature.emit()}onSearchTypeChange(e){this.setSearchType(e)}setSearchType(e){this.searchType$.next(e)}onSearchSettingsChange(){this.doSearch(this.term),this.searchSettingsChange.emit(),this.handlePlaceholder()}setTerm(e,n){if(this.disabled)return;e=e||"",e!==this.term&&!n&&this.term$.next(e);let o=e.replace(/(#[^\s]*)/g,"").trim();(o.length>=this.minLength||o.length===0)&&this.stream$.next(e)}handleSearch(){this.doSearch(this.term)}clear(){this.term$.next(""),this.stream$.next(""),this.input.nativeElement.focus()}keyIsValid(e){return r.invalidKeys.indexOf(e)===-1}onSetTerm(e){this.searchTermChange.emit(e),this.doSearch(e)}handlePlaceholder(){let e=[...new Set(this.searchSourceService.getEnabledSources().filter(o=>!["map","coordinatesreverse"].includes(o.getId())).map(o=>o.getType()))],n="igo.geo.search.placeholder";e.length===1?n=`igo.geo.search.${e[0].toLowerCase()}.placeholder`:e.length===0&&(n="igo.geo.search.emptyType.placeholder"),this.placeholder$.next(n)}onSetSearchType(e){if(e==null)return;this.searchTypeChange.emit(e);let n=`igo.geo.search.${e.toLowerCase()}.placeholder`;this.placeholder$.next(n),this.setTerm(this.term)}doSearch(e){this.researches$$&&(this.researches$$.map(s=>s.unsubscribe()),this.researches$$=void 0);let n;this.termSplitter&&e.match(new RegExp(this.termSplitter,"g"))?(n=e.split(this.termSplitter).filter(s=>s.length>=this.minLength),this.store&&this.store.clear()):n=[e];let o=[];n.map(s=>{if((s?s.replace(/(#[^\s]*)/g,"").trim():"")===""){this.store!==void 0&&this.store.clear();return}o=o.concat(this.searchService.search(s,{forceNA:this.forceNA}))}),this.researches$$=o.map(s=>s.request.subscribe(l=>{this.onResearchCompleted(s,l)}))}onResearchCompleted(e,n){if(this.search.emit({research:e,results:n}),this.store!==void 0){let o=this.store.all().filter(s=>s.source!==e.source).concat(n);this.store.updateMany(o)}}static \u0275fac=function(n){return new(n||r)(ie(Ri),ie(yI),ie(Jp))};static \u0275cmp=gt({type:r,selectors:[["igo-search-bar"]],viewQuery:function(n,o){if(n&1&&Ni(kut,7),n&2){let s;Yt(s=Kt())&&(o.input=s.first)}},inputs:{searchTypes:"searchTypes",withDivider:"withDivider",searchType:"searchType",term:"term",disabled:"disabled",pointerSummaryEnabled:"pointerSummaryEnabled",searchResultsGeometryEnabled:"searchResultsGeometryEnabled",reverseSearchCoordsFormatEnabled:"reverseSearchCoordsFormatEnabled",floatLabel:"floatLabel",appearance:"appearance",placeholder:"placeholder",label:"label",color:"color",termSplitter:"termSplitter",debounce:"debounce",minLength:"minLength",searchSelector:"searchSelector",searchSettings:"searchSettings",forceNA:"forceNA",store:"store"},outputs:{pointerSummaryStatus:"pointerSummaryStatus",searchResultsGeometryStatus:"searchResultsGeometryStatus",reverseSearchCoordsFormatStatus:"reverseSearchCoordsFormatStatus",searchTermChange:"searchTermChange",search:"search",searchTypeChange:"searchTypeChange",clearFeature:"clearFeature",searchSettingsChange:"searchSettingsChange"},standalone:!0,features:[yt],decls:17,vars:29,consts:[["input",""],[1,"igo-search-bar-container",3,"ngClass"],[3,"floatLabel","appearance"],[4,"ngIf"],["matInput","","autocomplete","off",3,"keyup","ngClass","disabled","placeholder","value"],["mat-icon-button","","matSuffix","",3,"color","matTooltip","click",4,"ngIf"],[3,"vertical",4,"ngIf"],[1,"search-bar-buttons"],["mat-icon-button","",3,"color","click",4,"ngIf"],[3,"searchTypes","searchType","searchTypeChange",4,"ngIf"],[3,"pointerSummaryEnabled","searchResultsGeometryEnabled","reverseSearchCoordsFormatEnabled","pointerSummaryStatus","searchResultsGeometryStatus","reverseSearchCoordsFormatStatus","searchSourceChange",4,"ngIf"],["mat-icon-button","","matSuffix","",3,"click","color","matTooltip"],[3,"vertical"],["mat-icon-button","",3,"click","color"],[3,"searchTypeChange","searchTypes","searchType"],[3,"pointerSummaryStatus","searchResultsGeometryStatus","reverseSearchCoordsFormatStatus","searchSourceChange","pointerSummaryEnabled","searchResultsGeometryEnabled","reverseSearchCoordsFormatEnabled"]],template:function(n,o){if(n&1){let s=dt();ne(0,"div",1),Ne(1,"async"),ne(2,"mat-form-field",2),We(3,Rut,2,1,"mat-label",3),ne(4,"input",4,0),Ne(6,"async"),Ne(7,"async"),Ne(8,"translate"),Ne(9,"async"),Oe("keyup",function(h){return Re(s),Fe(o.onKeyup(h))}),ce(),We(10,Fut,4,4,"button",5),Ne(11,"async"),ce(),We(12,Lut,1,1,"mat-divider",6),ne(13,"div",7),We(14,Nut,3,1,"button",8)(15,But,2,4,"igo-search-selector",9)(16,jut,1,3,"igo-search-settings",10),ce()()}n&2&&(ee("ngClass",fo(25,Out,je(1,13,o.empty$))),q(2),ee("floatLabel",o.floatLabel)("appearance",o.appearance),q(),ee("ngIf",o.label),q(),ee("ngClass",fo(27,Put,o.showSearchButton))("disabled",je(6,15,o.disabled$))("placeholder",o.placeholder?o.placeholder:je(7,17,o.placeholder$)?je(8,19,o.placeholder$.value):void 0)("value",je(9,21,o.term$)),q(6),ee("ngIf",je(11,23,o.empty$)===!1),q(2),ee("ngIf",o.withDivider),q(2),ee("ngIf",o.showSearchButton),q(),ee("ngIf",o.searchSelector),q(),ee("ngIf",o.searchSettings))},dependencies:[qr,Wa,dc,Mg,l_,gn,pu,hu,bn,Cr,Er,Ar,jn,er,I_,wS,pre,mre,kr,On,hn],styles:['[_nghost-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}[_nghost-%COMP%]     .mat-mdc-text-field-wrapper{align-items:center;padding-right:0}[_nghost-%COMP%]     .mat-mdc-form-field-infix{align-self:center}@media (max-width: 599px){[_nghost-%COMP%]     .mat-mdc-form-field-infix{width:158px}}[_nghost-%COMP%]     mat-form-field .mdc-line-ripple{display:none}[_nghost-%COMP%]     mat-form-field input{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.igo-search-bar-container[_ngcontent-%COMP%]{position:relative;width:100%;display:flex}mat-form-field[_ngcontent-%COMP%]{flex:1}mat-divider[_ngcontent-%COMP%]{margin:8px 0}.search-bar-buttons[_ngcontent-%COMP%]{position:relative;display:inline-flex}.search-bar-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:nth-child(2):before{content:"";border-right:1px solid #ddd;height:28px}igo-search-selector[_ngcontent-%COMP%]{background-color:#fff;top:0;border-radius:0}igo-search-settings[_ngcontent-%COMP%]{background-color:#fff;top:0;border-radius:0}'],changeDetection:0})}return r})(),mAe=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({imports:[iL]})}return r})(),CEe=(()=>{class r{result;map;showIcons;withZoomButton=!1;zoomEvent=new it;format=new hs;get title(){return Im(this.result)}get titleHtml(){return Qge(this.result)}get tooltipHtml(){return this.titleHtml.replace(/<small?[^>]+(>|$)/g,`
`).replace(/<\/?[^>]+(>|$)/g,"")}get icon(){return SP(this.result)}onZoomHandler(){let e=this.format.readFeature(this.result.data,{dataProjection:this.result.data.projection,featureProjection:this.map.projection});Fu(this.map.viewController,[e],$n.Default)}onMouseEvent(e){let n=e.target;switch(e.type){case"mouseenter":{n.querySelector("#hide-save-search-result-btn")?.setAttribute("id","show-save-search-result-btn");break}case"mouseleave":{n.querySelector("#show-save-search-result-btn")?.setAttribute("id","hide-save-search-result-btn");break}default:break}}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-search-results-item"]],inputs:{result:"result",map:"map",showIcons:"showIcons",withZoomButton:"withZoomButton"},outputs:{zoomEvent:"zoomEvent"},standalone:!0,features:[yt],ngContentSelectors:$ut,decls:8,vars:4,consts:[["normalTitle",""],[3,"mouseenter","mouseleave"],["matListItemIcon","",4,"ngIf"],["matListItemTitle","","matTooltipShowDelay","500","matTooltipClass","search-result-tooltip",3,"innerHtml","matTooltip",4,"ngIf","ngIfElse"],["matListItemMeta",""],["igoStopPropagation","","mat-icon-button","",3,"click",4,"ngIf"],["matListItemIcon",""],["matListItemTitle","","matTooltipShowDelay","500","matTooltipClass","search-result-tooltip",3,"innerHtml","matTooltip"],["matListItemTitle","","matTooltipShowDelay","500",3,"matTooltip",4,"ngIf"],["matListItemTitle","","matTooltipShowDelay","500",3,"matTooltip"],["igoStopPropagation","","mat-icon-button","",3,"click"]],template:function(n,o){if(n&1){let s=dt();Qi(Vut),ne(0,"mat-list-item",1),Oe("mouseenter",function(h){return Re(s),Fe(o.onMouseEvent(h))})("mouseleave",function(h){return Re(s),Fe(o.onMouseEvent(h))}),We(1,Uut,2,1,"mat-icon",2)(2,zut,1,2,"div",3)(3,Hut,1,1,"ng-template",null,0,Vo),ne(5,"div",4),We(6,Wut,3,0,"button",5),pi(7),ce()()}if(n&2){let s=ji(4);q(),ee("ngIf",o.icon),q(),ee("ngIf",o.titleHtml)("ngIfElse",s),q(4),ee("ngIf",o.withZoomButton)}},dependencies:[wu,wf,Am,Tm,CS,gn,jn,er,Er,Ar,bn,Cr,uv],styles:["[_nghost-%COMP%]     small{color:#8c8c8c}[_nghost-%COMP%]   div[matlistitemmeta][_ngcontent-%COMP%]:empty{display:none}[_nghost-%COMP%]     .search-result-tooltip{white-space:pre-line}"],changeDetection:0})}return r})(),gmt=(()=>{class r{formBuilder;languageService;dialogRef;data;form;feature;layers=[];filteredLayers$;constructor(e,n,o,s){this.formBuilder=e,this.languageService=n,this.dialogRef=o,this.data=s,this.form=this.formBuilder.group({layerName:["",[Dl.required]]})}ngOnInit(){this.feature=this.data.feature,this.layers=this.data.layers,this.filteredLayers$=this.form.controls.layerName.valueChanges.pipe(yo(""),$t(e=>this.filter(e)))}filter(e){if(typeof e=="string")return this.layers.map(n=>n).filter(n=>n?.title?.toLowerCase().includes(e.toLowerCase()))}displayFn(e){return e&&e.title?e.title:""}save(){let e={layer:this.form.value.layerName,feature:this.feature};this.dialogRef.close(e)}cancel(){this.dialogRef.close()}static \u0275fac=function(n){return new(n||r)(ie(r_),ie(wn),ie(Mp),ie(_E,8))};static \u0275cmp=gt({type:r,selectors:[["igo-save-feature-dialog"]],standalone:!0,features:[yt],decls:23,vars:22,consts:[["auto","matAutocomplete"],["mat-dialog-title","",1,"mat-typography"],["mat-dialog-content","",1,"mat-typography"],[1,"igo-form",3,"formGroup"],[3,"navigation","selection"],["igoListItem","","color","accent",3,"result","showIcons"],[1,"igo-input-container"],["type","text","matInput","","formControlName","layerName",3,"placeholder","matAutocomplete"],[3,"displayWith"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","",2,"justify-content","center"],[1,"igo-form-button-group","create-layer-button-top-padding"],["mat-raised-button","","type","button",3,"click"],["id","createLayerBtnDialog","mat-raised-button","","type","button","color","primary",3,"click"],[3,"value"],["matListItemTitle",""]],template:function(n,o){if(n&1){let s=dt();ne(0,"h1",1),Ye(1),Ne(2,"translate"),ce(),ne(3,"div",2)(4,"form",3)(5,"igo-list",4),wt(6,"igo-search-results-item",5),ce(),ne(7,"div",6)(8,"mat-form-field"),wt(9,"input",7),Ne(10,"translate"),ne(11,"mat-autocomplete",8,0),We(13,qut,3,2,"mat-option",9),Ne(14,"async"),ce()()()()(),ne(15,"div",10)(16,"div",11)(17,"button",12),Oe("click",function(){return Re(s),Fe(o.cancel())}),Ye(18),Ne(19,"translate"),ce(),ne(20,"button",13),Oe("click",function(){return Re(s),Fe(o.save())}),Ye(21),Ne(22,"translate"),ce()()()}if(n&2){let s=ji(12);q(),Qt(" ",je(2,12,"igo.geo.layer.saveFeatureInLayer"),`
`),q(3),ee("formGroup",o.form),q(),ee("navigation",!1)("selection",!1),q(),ee("result",o.feature)("showIcons",!0),q(3),Wr("placeholder",je(10,14,"igo.geo.layer.chooseOrSet")),ee("matAutocomplete",s),q(2),ee("displayWith",o.displayFn),q(2),ee("ngForOf",je(14,16,o.filteredLayers$)),q(5),Qt(" ",je(19,18,"igo.geo.layer.cancelBtn")," "),q(3),Qt(" ",je(22,20,"igo.geo.layer.saveBtn")," ")}},dependencies:[fv,ff,$l,Vy,eh,sc,Ig,uu,th,Tg,pF,CEe,q1,Wa,dc,pu,hu,s1,o1,lc,gf,Ps,cc,wu,Tm,gv,bn,Ua,kr,On,hn],styles:["[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .create-layer-button-top-padding[_ngcontent-%COMP%]{padding-top:25px}[_nghost-%COMP%]   .igo-form[_ngcontent-%COMP%]{padding:10px 5px 5px}[_nghost-%COMP%]   .igo-form-button-group[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   button#createLayerBtnDialog[disabled=true][_ngcontent-%COMP%]{cursor:default;background-color:#0000001f;color:#00000042}[_nghost-%COMP%]   .error[_ngcontent-%COMP%]{color:red}"]})}return r})(),fre=(()=>{class r{layerService;dialog;dataSourceService;mediaService;tooltip$=new mt("igo.geo.catalog.layer.addToMap");addFeatureToLayerTooltip$=new mt("igo.geo.search.addToLayer");resolution$$;layers$$;inRange$=new mt(!0);isVisible$=new mt(!1);isPreview$=new mt(!1);layersSubcriptions=[];lastTimeoutRequest;mouseInsideAdd=!1;layer;store;added;map;saveSearchResultInLayer=!1;get color(){return this._color}set color(e){this._color=e}_color="primary";stores=[];get allLayers(){return this.map.layerController.all.filter(e=>String(e.id).includes("igo-search-layer"))}mediaService$$;isMobile=!1;constructor(e,n,o,s){this.layerService=e,this.dialog=n,this.dataSourceService=o,this.mediaService=s}ngOnInit(){this.mediaService$$=this.mediaService.media$.subscribe(e=>{e===bu.Mobile&&(this.isMobile=!0)}),this.layer.meta.dataType==="Layer"&&(this.added=!!this.map.layerController.getBySourceId(this.layer.data.sourceOptions.id)),this.layers$$=this.map.layerController.all$.subscribe(()=>{this.isVisible()}),this.resolution$$=this.map.viewController.resolution$.subscribe(e=>{this.isInResolutionsRange(e),this.isVisible()})}ngOnDestroy(){this.resolution$$.unsubscribe(),this.layers$$.unsubscribe(),this.mediaService$$&&this.mediaService$$.unsubscribe()}onMouseEvent(e){this.onToggleClick(e)}onToggleClick(e){typeof this.lastTimeoutRequest<"u"&&clearTimeout(this.lastTimeoutRequest);let n=e||{};if(!(n.type==="mouseenter"&&this.mouseInsideAdd))switch(n.type){case"click":this.isPreview$.value||(this.added?this.remove():this.add(n)),this.isPreview$.next(!1);break;case"mouseenter":!this.isPreview$.value&&!this.added&&(this.lastTimeoutRequest=setTimeout(()=>{this.add(n),this.isPreview$.next(!0)},500)),this.mouseInsideAdd=!0;break;case"mouseleave":clearTimeout(this.lastTimeoutRequest),this.isPreview$.value&&(this.remove(),this.isPreview$.next(!1)),this.mouseInsideAdd=!1;break;default:break}}add(e){this.added||(this.added=!0,this.addLayerToMap(e))}remove(){this.added&&(this.added=!1,this.removeLayerFromMap(),this.layersSubcriptions.map(e=>e.unsubscribe()),this.layersSubcriptions=[])}addLayerToMap(e){if(this.map===void 0||this.layer.meta.dataType!==ZF)return;let n=this.layer.data;n.sourceOptions.optionsFromApi===void 0&&(n.sourceOptions.optionsFromApi=!0),this.layersSubcriptions.push(this.layerService.createAsyncLayer(n).subscribe(o=>{o&&(e.type==="click"&&this.map.layersAddedByClick$.next([o]),this.map.layerController.add(o))}))}removeLayerFromMap(){if(this.map===void 0||this.layer.meta.dataType!==ZF)return;let e=this.map.layerController.getBySourceId(this.layer.data.sourceOptions.id);e&&this.map.layerController.remove(e)}isInResolutionsRange(e){let n=this.layer.data.minResolution||0,o=this.layer.data.maxResolution||1/0;this.inRange$.next(e>=n&&e<=o)}isVisible(){if(this.layer?.data?.sourceOptions?.id){let e=this.map.layerController.getBySourceId(this.layer.data.sourceOptions.id);this.isVisible$.next(e?.visible??!1)}}getBadgeIcon(){return this.inRange$.value&&this.isVisible$.value?"":"visibility_off"}computeTooltip(){return this.added?this.isPreview$.value?"igo.geo.catalog.layer.addToMap":this.inRange$.value?this.isVisible$.value?"igo.geo.catalog.layer.removeFromMap":"igo.geo.catalog.layer.removeFromMapNotVisible":"igo.geo.catalog.layer.removeFromMapOutRange":this.inRange$.value?"igo.geo.catalog.layer.addToMap":"igo.geo.catalog.layer.addToMapOutRange"}addFeatureToLayer(){if(this.layer.meta.dataType!=="Feature")return;let e=this.layer;this.dialog.open(gmt,{width:"700px",data:{feature:e,layers:this.allLayers}}).afterClosed().subscribe(o=>{if(o)if(this.stores.length>0&&this.stores.map(s=>(s.state.updateAll({selected:!1}),s?.layer&&(s.layer.visible=!1),s)),typeof o.layer=="string")this.createLayer(o.layer,o.feature);else{let s=this.stores.find(l=>l.layer.id===o.layer.id);s.layer.visible=!0,s.layer.opacity=1,this.addFeature(o.feature,s)}})}createLayer(e,n){let o=new Xp([],{map:this.map}),s=[new Mn({image:new yl({radius:5,stroke:new ir({width:1,color:"rgba(143,7,7,1)"}),fill:new sr({color:"rgba(143,7,7,1)"})})}),new Mn({stroke:new ir({width:1,color:"rgba(143,7,7,1)"}),fill:new sr({color:"rgba(0, 0, 255, 0.1)"})})],l=0;for(let h of this.allLayers){let p=Number(h.id.replace("igo-search-layer",""));l=Math.max(p,l)}this.dataSourceService.createAsyncDataSource({type:"vector",queryable:!0}).pipe(Tn(1)).subscribe(h=>{let p=new ll({isIgoInternalLayer:!0,id:"igo-search-layer"+ ++l,title:e,source:h,igoStyle:{editable:!1,igoStyleObject:{fill:{color:"rgba(255,255,255,0.4)"},stroke:{color:"rgba(143,7,7,1)",width:1},circle:{fill:{color:"rgba(255,255,255,0.4)"},stroke:{color:"rgba(143,7,7,1)",width:1},radius:5}}},style:s,showInLayerList:!0,exportable:!0,workspace:{enabled:!0}});z2(o,p),rU(o,new Uf({motion:$n.None})),bpt(o,new zf({map:this.map,motion:$n.None,many:!0})),o.layer.visible=!0,o.source.ol.on("removefeature",m=>{let f=m.feature.getGeometry();this.clearLabelsOfOlGeometry(f)}),this.addFeature(n,o),this.stores.push(o)})}addFeature(e,n){let o={type:e.data.type,geometry:{coordinates:e.data.geometry.coordinates,type:e.data.geometry.type},projection:e.data.projection,properties:e.data.properties,meta:{id:e.meta.id}};delete o.properties.Route,n.update(o),n.setLayerExtent(),n.layer.ol.getSource().refresh()}clearLabelsOfOlGeometry(e){Qpt(e).forEach(n=>{n&&n.getMap()&&this.map.ol.removeOverlay(n)})}static \u0275fac=function(n){return new(n||r)(ie(Lu),ie(vu),ie(oU),ie(Ol))};static \u0275cmp=gt({type:r,selectors:[["igo-search-add-button"]],inputs:{layer:"layer",store:"store",added:"added",map:"map",saveSearchResultInLayer:"saveSearchResultInLayer",color:"color",stores:"stores"},standalone:!0,features:[yt],decls:2,vars:2,consts:[["igoStopPropagation","","mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"matTooltip","color","mouseenter","mouseleave","click",4,"ngIf"],["igoStopPropagation","","mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"id","matTooltip","click",4,"ngIf"],["igoStopPropagation","","mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"mouseenter","mouseleave","click","matTooltip","color"],["aria-hidden","false","matBadge","icon","igoMatBadgeColor","rgba(0,0,0,0.87)","igoMatBadgeBackgroundColor","none","matBadgeSize","small","matBadgePosition","after",3,"igoMatBadgeIcon","igoMatBadgeInverseColor","matBadgeHidden","matBadgeDisabled"],["igoStopPropagation","","mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"click","id","matTooltip"],["aria-hidden","false","matBadge","icon","igoMatBadgeIcon","visibility_off","matBadgeSize","small","matBadgePosition","after",3,"igoMatBadgeInverseColor","matBadgeHidden","matBadgeDisabled"]],template:function(n,o){n&1&&We(0,Yut,12,25,"button",0)(1,Kut,6,11,"button",1),n&2&&(ee("ngIf",o.layer.meta.dataType==="Layer"),q(),ee("ngIf",o.layer.meta.dataType==="Feature"&&o.saveSearchResultInLayer))},dependencies:[gn,bn,Cr,uv,Er,Ar,jn,er,dF,cF,Pte,kr,On,hn],styles:["[_nghost-%COMP%]   #hide-save-search-result-btn[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   #show-save-search-result-btn[_ngcontent-%COMP%]{display:block}"],changeDetection:0})}return r})(),Hne=function(r){return r.Grouped="grouped",r.Flat="flat",r}(Hne||{}),nL=(()=>{class r{cdRef;searchService;configService;showResultsCount=!0;searchResultMode=Hne;watcher;settingsChange$$;pageIterator=[];collapsed=[];map;store;showIcons;mode=Hne.Grouped;withZoomButton=!1;tabsMode=!1;get term(){return this._term}set term(e){this._term=e,this.pageIterator=[]}_term;settingsChange$=new mt(void 0);termSplitter="|";resultFocus=new it;resultUnfocus=new it;resultSelect=new it;moreResults=new it;resultMouseenter=new it;resultMouseleave=new it;templateSearchToolbar;get results$(){return this._results$===void 0&&(this._results$=this.liftResults()),this._results$}_results$;constructor(e,n,o){this.cdRef=e,this.searchService=n,this.configService=o}ngOnInit(){this.watcher=new bv(this.store,this.cdRef),this.settingsChange$$=this.settingsChange$.subscribe(()=>{this.pageIterator=[]}),this.configService.getConfig("searchSources.showResultsCount")===!1&&(this.showResultsCount=!1)}ngOnDestroy(){this.watcher.destroy(),this.settingsChange$$.unsubscribe()}computeGroupTitle(e){let n=[e.source.title],o=e.results.length;return o>1&&this.showResultsCount&&n.push(`(${o})`),n.join(" ")}onResultSelect(e){this.store.state.get(e)&&this.store.state.get(e).selected===!0||(this.store.state.update(e,{focused:!0,selected:!0},!0),this.resultSelect.emit(e))}liftResults(){return this.store.stateView.all$().pipe(ND(e=>e.length===0?Na:lm(200)),$t(e=>this.groupResults(e.map(n=>n.entity).sort(this.sortByOrder))))}sortByOrder(e,n){return e.source.displayOrder-n.source.displayOrder}groupResults(e){let n=new Map;return e.forEach(o=>{let s=o.source,l=n.get(s);l===void 0&&(l=[],n.set(s,l)),l.push(o)}),Array.from(n.keys()).map(o=>(this.pageIterator[o.getId()]===void 0&&(this.pageIterator[o.getId()]=1),{source:o,results:n.get(o)}))}isMoreResults(e){return this.store.getStrategyOfType(bf)?.active||!1?e.results?.length%+e.source.params.limit===0&&+e.source.params.page<30:e.results&&e.results[e.results.length-1].meta.nextPage===!0}displayMoreResults(e){let n={sourceId:e.source.getId(),page:++this.pageIterator[e.source.getId()]},o;this.termSplitter&&this.term.match(new RegExp(this.termSplitter,"g"))?o=this.term.split(this.termSplitter):o=[this.term];let s=[];o.map(l=>{s=s.concat(this.searchService.search(l,n))}),s.map(l=>{l.request.subscribe(h=>{let p=e.results.concat(h);h.length||(p[p.length-1].meta.nextPage=!1),this.moreResults.emit({research:l,results:p})})})}static \u0275fac=function(n){return new(n||r)(ie(Ti),ie(yI),ie(Ri))};static \u0275cmp=gt({type:r,selectors:[["igo-search-results"]],contentQueries:function(n,o,s){if(n&1&&Sn(s,Zut,5),n&2){let l;Yt(l=Kt())&&(o.templateSearchToolbar=l.first)}},inputs:{map:"map",store:"store",showIcons:"showIcons",mode:"mode",withZoomButton:"withZoomButton",tabsMode:"tabsMode",term:"term",settingsChange$:"settingsChange$",termSplitter:"termSplitter"},outputs:{resultFocus:"resultFocus",resultUnfocus:"resultUnfocus",resultSelect:"resultSelect",moreResults:"moreResults",resultMouseenter:"resultMouseenter",resultMouseleave:"resultMouseleave"},standalone:!0,features:[yt],decls:2,vars:2,consts:[["groupTemplate",""],["flatTemplate",""],["storeItemTemplate",""],["tabsTemplate",""],[3,"navigation",4,"ngIf"],[3,"navigation"],["ngFor","",3,"ngForOf"],[3,"class","title","collapsed","toggle",4,"ngIf","ngIfElse"],[3,"toggle","title","collapsed"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","moreResults mat-typography",3,"click",4,"ngIf"],["igoListItem","","color","accent",3,"focus","unfocus","select","mouseenter","mouseleave","map","result","showIcons","withZoomButton","focused","selected"],["igoSearchItemToolbar","",3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"moreResults","mat-typography",3,"click"],[4,"ngIf","ngIfThen","ngIfElse"],["dynamicHeight","",1,"custom-tabs-view"],[3,"label",4,"ngFor","ngForOf"],[3,"label"]],template:function(n,o){n&1&&We(0,oht,4,4,"igo-list",4)(1,ght,8,4,"igo-list",4),n&2&&(ee("ngIf",o.tabsMode===!1),q(),ee("ngIf",o.tabsMode))},dependencies:[gn,pF,Ps,LSe,Ry,CEe,q1,nAe,une,iAe,kr,On,hn],styles:["[_nghost-%COMP%]   .moreResults[_ngcontent-%COMP%]{cursor:pointer;color:#00f;float:right;margin-right:10px;margin-top:5px}[_nghost-%COMP%]   igo-list[_ngcontent-%COMP%]     mat-list{height:100%}[_nghost-%COMP%]   igo-list[_ngcontent-%COMP%]     mat-list .custom-tabs-view .mat-mdc-tab-header-pagination{min-width:20px}"],changeDetection:0})}return r})(),fAe=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({imports:[nL,fre]})}return r})(),_mt=[nL,fre],gAe=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({imports:[pre]})}return r})(),_Ae=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({imports:[mre]})}return r})(),gre=(()=>{class r{component;searchService;searchSourceService;mediaService;store;lonLat;pointerSearchStore=new wd([]);lastTimeoutRequest;store$$;reverseSearch$$=[];hasPointerReverseSearchSource=!1;pointerMoveListener;searchPointerSummaryFeatureId="searchPointerSummaryFeatureId";igoSearchPointerSummaryDelay=1e3;igoSearchPointerSummaryEnabled=!1;mouseleave(){clearTimeout(this.lastTimeoutRequest),this.clearLayer()}get map(){return this.component.map}get mapProjection(){return this.component.map.projection}constructor(e,n,o,s){this.component=e,this.searchService=n,this.searchSourceService=o,this.mediaService=s}ngOnInit(){this.listenToMapPointerMove(),this.map.status$.pipe(So(e=>e===Ho.Done)).subscribe(()=>{this.store=new Xp([],{map:this.map}),this.initStore(),this.subscribeToPointerStore()})}initStore(){let e=this.store,n=new ll({isIgoInternalLayer:!0,id:"searchPointerSummaryId",title:"searchPointerSummary",zIndex:900,source:new As,showInLayerList:!1,exportable:!1,browsable:!1,style:Lpt});z2(e,n)}ngAfterContentChecked(){this.searchSourceService.getEnabledSources().filter(are).length?this.hasPointerReverseSearchSource=!0:this.hasPointerReverseSearchSource=!1}ngOnDestroy(){this.unlistenToMapPointerMove(),this.unsubscribeToPointerStore(),this.unsubscribeReverseSearch()}subscribeToPointerStore(){this.store$$=this.pointerSearchStore.entities$.subscribe(e=>{this.entitiesToPointerOverlay(e)})}computeSummaryClosestFeature(e){let n={};return e.map(o=>{if(o.data.properties.type&&o.data.properties.distance>=0)if(n.hasOwnProperty(o.data.properties.type)){let s=n[o.data.properties.type].distance;if(o.data.properties.distance<s){let l=o.meta.pointerSummaryTitle||o.meta.title;n[o.data.properties.type]={distance:o.data.properties.distance,title:l}}}else{let s=o.meta.pointerSummaryTitle||o.meta.title;n[o.data.properties.type]={distance:o.data.properties.distance,title:s}}}),n}entitiesToPointerOverlay(e){let n=this.computeSummaryClosestFeature(e),o=Object.keys(n),s=[],l=[];e.map(h=>{let p=o.indexOf(h.data.properties.type);p!==-1?(l.push(n[h.data.properties.type].title),o.splice(p,1),s.push(h.data.properties.type)):s.indexOf(h.data.properties.type)===-1&&l.push(h.meta.pointerSummaryTitle||h.meta.title)}),l.length&&this.addPointerOverlay(l.join(`
`))}listenToMapPointerMove(){this.pointerMoveListener=this.map.ol.on("pointermove",e=>this.onMapEvent(e))}unsubscribeToPointerStore(){this.store$$?.unsubscribe()}unsubscribeReverseSearch(){this.reverseSearch$$.map(e=>e.unsubscribe()),this.reverseSearch$$=[]}unlistenToMapPointerMove(){_h(this.pointerMoveListener),this.pointerMoveListener=void 0}onMapEvent(e){if(e.dragging||!this.igoSearchPointerSummaryEnabled||!this.hasPointerReverseSearchSource||this.mediaService.isTouchScreen()){this.clearLayer();return}typeof this.lastTimeoutRequest<"u"&&(clearTimeout(this.lastTimeoutRequest),this.clearLayer(),this.unsubscribeReverseSearch()),this.lonLat=us(e.coordinate,this.mapProjection,"EPSG:4326"),this.lastTimeoutRequest=setTimeout(()=>{this.onSearchCoordinate()},this.igoSearchPointerSummaryDelay)}sortByOrder(e,n){return e.source.displayOrder-n.source.displayOrder}onSearchCoordinate(){this.pointerSearchStore.clear();let e=this.searchService.reverseSearch(this.lonLat,{params:{geometry:"false",icon:"false"}},!0);for(let n in e)e.length>0&&this.reverseSearch$$.push(e[n].request.subscribe(o=>{this.onSearch({research:e[n],results:o})}))}onSearch(e){let n=e.results,o=this.pointerSearchStore.all().filter(s=>s.source!==e.research.source).concat(n);this.pointerSearchStore.load(o.sort(this.sortByOrder))}addPointerOverlay(e){this.clearLayer();let n=new Kn(us(this.lonLat,"EPSG:4326",this.mapProjection)),o=new An({geometry:n}),s=new hs().writeGeometryObject(n,{featureProjection:this.mapProjection,dataProjection:this.mapProjection}),l={type:Qo,geometry:s,projection:this.mapProjection,properties:{id:this.searchPointerSummaryFeatureId,pointerSummary:e},meta:{id:this.searchPointerSummaryFeatureId},ol:o};this.store.setLayerFeatures([l],$n.None)}clearLayer(){this.store&&this.store.clearLayer()}static \u0275fac=function(n){return new(n||r)(ie(m0,2),ie(yI),ie(Jp),ie(Ol))};static \u0275dir=Pt({type:r,selectors:[["","igoSearchPointerSummary",""]],hostBindings:function(n,o){n&1&&Oe("mouseleave",function(){return o.mouseleave()})},inputs:{igoSearchPointerSummaryDelay:"igoSearchPointerSummaryDelay",igoSearchPointerSummaryEnabled:"igoSearchPointerSummaryEnabled"},standalone:!0})}return r})();function ymt(r){return new Jp(r)}function xEe(){return{provide:Jp,useFactory:ymt,deps:[Pd]}}var Xd=class{static getGoogleMapsCoordLink(i,e){return`https://www.google.com/maps/search/?api=1&query=${e}%2C${i}`}static getGoogleStreetViewLink(i,e){return`https://www.google.com/maps/@?api=1&map_action=pano&viewpoint=${e}%2C${i}`}static getGoogleMapsNameLink(i){return`https://www.google.com/maps/search/?api=1&query=${encodeURI(i)}`}},Wne=class{static getOpenStreetMapLink(i,e,n=17){return`https://www.openstreetmap.org/?mlat=${e}&mlon=${i}#map=${n}/${e}/${i}`}static getOpenStreetCamLink(i,e,n=17){return`https://openstreetcam.org/map/@${e},${i},${n}z`}},SEe=(()=>{class r{languageService;constructor(e){this.languageService=e}formatResult(e){return e}static \u0275fac=function(n){return new(n||r)(xe(wn))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),yAe=(()=>{class r extends Pd{languageService;static id="coordinatesreverse";static type=Qo;projections;title$=new mt("");get title(){return this.title$.getValue()}constructor(e,n,o,s){super(e,o),this.languageService=n,this.projections=s,this.languageService.language$.subscribe(()=>{this.title$.next(this.languageService.translate.instant(this.options.title))})}getId(){return r.id}getType(){return r.type}getDefaultOptions(){return{title:"igo.geo.search.coordinates.name",order:1,showInSettings:!1}}reverseSearch(e,n,o){return Vt([this.dataToResult(e,n,o)])}dataToResult(e,n,o){let s=Uht(e),h=Hht(e,this.projections).reduce((A,k)=>(A[k.alias]=k.igo2CoordFormat,A),{}),p=o?$f(e,6).reverse().join(", "):$f(e,6).join(", "),m=o?s.reverse().join(", "):s.join(", "),f={type:"Point",coordinates:[e[0],e[1]]},g={},y="";if(n.distance){let A=this.languageService.translate.instant("igo.geo.search.coordinates.radius");g[A]=n.distance,y="<br><small>Rayon: "+n.distance+" m</small>";let k=us([e[0],e[1]],"EPSG:4326","EPSG:3857"),R=new LS(k,n.distance),$=jS(R),H=new hs;f=JSON.parse(H.writeGeometry($.transform("EPSG:3857","EPSG:4326")))}if(n.conf){let A=this.languageService.translate.instant("igo.geo.search.coordinates.conf");g[A]=n.conf,y+=y===""?"<br>":"<small> - </small>",y+="<small>Confiance: "+n.conf+"%</small>"}let _=o?this.languageService.translate.instant("igo.geo.search.coordinates.reversedCoord"):this.languageService.translate.instant("igo.geo.search.coordinates.coord");g[_]=p;let w=o?this.languageService.translate.instant("igo.geo.search.coordinates.reversedCoordDMS"):this.languageService.translate.instant("igo.geo.search.coordinates.coordDMS");return g[w]=m,{source:this,data:{type:Qo,projection:"EPSG:4326",geometry:f,extent:void 0,properties:Object.assign(g,h,{GoogleMaps:Xd.getGoogleMapsCoordLink(e[0],e[1]),GoogleStreetView:Xd.getGoogleStreetViewLink(e[0],e[1]),OpenStreetMap:Wne.getOpenStreetMapLink(e[0],e[1],14),Route:'<span class="routing"> <u>'+this.languageService.translate.instant("igo.geo.seeRouting")+"</u> </span>"}),meta:{id:e[0].toString()+","+e[1].toString(),title:p}},meta:{dataType:Qo,id:e[0].toString()+","+e[1].toString(),title:p,titleHtml:p+y,icon:"location_on",score:100}}}static \u0275fac=function(n){return new(n||r)(xe("options"),xe(wn),xe(wo),xe("projections"))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return po([Cp({maxCacheCount:20}),xo("design:type",Function),xo("design:paramtypes",[Array,Object,Boolean]),xo("design:returntype",si)],r.prototype,"reverseSearch",null),r})(),gb=function(r){return r[r.ICherche=0]="ICherche",r[r.IChercheReverse=1]="IChercheReverse",r[r.Cadastre=2]="Cadastre",r[r.CoordinatesReverse=3]="CoordinatesReverse",r[r.ILayer=4]="ILayer",r[r.Nominatim=5]="Nominatim",r[r.StoredQueries=6]="StoredQueries",r[r.StoredQueriesReverse=7]="StoredQueriesReverse",r[r.Workspace=8]="Workspace",r}(gb||{});function vmt(r){return new SEe(r)}function IEe(){return{provide:SEe,useFactory:vmt,deps:[wn]}}function bmt(r,i,e){return new yAe(r.getConfig(`searchSources.${yAe.id}`),i,e,r.getConfig("projections")||[])}function wmt(){return{provide:Pd,useFactory:bmt,multi:!0,deps:[Ri,wn,wo,sre]}}function TEe(){return{kind:gb.CoordinatesReverse,providers:[wmt(),IEe()]}}var vAe={"map-marker":"location_on",city:"location_city","flag-triangle":"flag","map-marker-alert":"fmd_bad","map-marker-radius":"pin_drop","map-marker-multiple":"local_post_office","map-legend":"map",bank:"account_balance","map-search":"search_insights","book-open-variant":"menu_book","office-building":"apartment","table-picnic":"table_restaurant",flash:"flash_on",engine:hfe,"road-variant":"add_road","baby-face-outline":"child_care","home-account":"location_home",hospital:"local_hospital",pharmacy:"local_pharmacy","police-badge-outline":"local_police",parking:"local_parking",tree:"nature","home-city":"home_work",terrain:"landscape","panorama-horizontal":"panorama_horizontal"},aU=(()=>{class r{languageService;constructor(e){this.languageService=e}formatResult(e){return e}static \u0275fac=function(n){return new(n||r)(xe(wn))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),qne=class{encodeKey(i){return encodeURIComponent(i)}encodeValue(i){return encodeURIComponent(i)}decodeKey(i){return decodeURIComponent(i)}decodeValue(i){return decodeURIComponent(i)}},bAe=(()=>{class r extends Pd{http;languageService;formatter;static id="icherche";static type=Qo;static propertiesBlacklist=[];title$=new mt("");hashtagsLieuxToKeep=[];get title(){return this.title$.getValue()}constructor(e,n,o,s,l,h){super(s,o),this.http=e,this.languageService=n,this.formatter=l;let p=h.get(ml);this.settings.length&&(p?p.authenticate$.subscribe(()=>{this.getAllowedTypes()}):this.getAllowedTypes()),this.languageService.language$.subscribe(()=>{this.title$.next(this.languageService.translate.instant(this.options.title))})}getId(){return r.id}getType(){return r.type}getDefaultOptions(){let e=this.options.params&&this.options.params.limit?Number(this.options.params.limit):void 0,n=this.options.params&&this.options.params.ecmax?Number(this.options.params.ecmax):void 0,o=this.options.params?.type?this.options.params.type.replace(/\s/g,"").toLowerCase().split(","):["adresses","codes-postaux","routes","intersections","municipalites","mrc","regadmin","lieux"],s=this.options.showAdvancedSettings;return{title:"igo.geo.search.icherche.name",searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/icherche",settings:[{type:"checkbox",title:"results type",name:"type",values:[{title:"igo.geo.search.icherche.type.address",value:"adresses",enabled:o.indexOf("adresses")!==-1,hashtags:["adresse"]},{title:"igo.geo.search.icherche.type.oldAddress",value:"anciennes-adresses",enabled:o.indexOf("anciennes-adresses")!==-1,hashtags:["anciennes-adresses"]},{title:"igo.geo.search.icherche.type.oldCity",value:"anciennes-municipalites",enabled:o.indexOf("anciennes-municipalites")!==-1,hashtags:["anciennes-municipalites"]},{title:"igo.geo.search.icherche.type.cn",value:"bornes-cn",enabled:o.indexOf("bornes-cn")!==-1,hashtags:["borne","bornes","cn"]},{title:"igo.geo.search.icherche.type.sumi",value:"bornes-sumi",enabled:o.indexOf("bornes-sumi")!==-1,hashtags:["borne","bornes","sumi"]},{title:"igo.geo.search.icherche.type.cadastre",value:"cadastre",enabled:o.indexOf("cadastre")!==-1,hashtags:["cadastre"]},{title:"igo.geo.search.icherche.type.postalCode",value:"codes-postaux",enabled:o.indexOf("codes-postaux")!==-1,hashtags:["code-postal"]},{title:"igo.geo.search.icherche.type.entreprise",value:"entreprises",enabled:o.indexOf("entreprises")!==-1,available:!1,hashtags:["entreprise"]},{title:"igo.geo.search.icherche.type.cycleStop",value:"haltes_cyclables",enabled:o.indexOf("haltes_cyclables")!==-1,hashtags:["haltevelo","haltes_cyclables"]},{title:"igo.geo.search.icherche.type.restArea",value:"haltes_routieres",enabled:o.indexOf("haltes_routieres")!==-1,hashtags:["halteroute","haltes_routieres"]},{title:"igo.geo.search.icherche.type.hq",value:"hq",enabled:o.indexOf("hq")!==-1,hashtags:["hq"]},{title:"igo.geo.search.icherche.type.intersection",value:"intersections",enabled:o.indexOf("intersections")!==-1,hashtags:["intersection","+"]},{title:"igo.geo.search.icherche.type.place",value:"lieux",enabled:o.indexOf("lieux")!==-1,hashtags:["lieu"]},{title:"igo.geo.search.icherche.type.mrc",value:"mrc",enabled:o.indexOf("mrc")!==-1,hashtags:["mrc"]},{title:"igo.geo.search.icherche.type.city",value:"municipalites",enabled:o.indexOf("municipalites")!==-1,hashtags:["municipalit\xE9","mun"]},{title:"igo.geo.search.icherche.type.regadmin",value:"regadmin",enabled:o.indexOf("regadmin")!==-1,hashtags:["r\xE9gion-administrative","regadmin"]},{title:"igo.geo.search.icherche.type.gcc",value:"bornes-gcc",enabled:o.indexOf("bornes-gcc")!==-1,hashtags:["borne","bornes","rep\xE8re","gcc","ccg"]},{title:"igo.geo.search.icherche.type.km",value:"bornes-km",enabled:o.indexOf("bornes-km")!==-1,hashtags:["borne","bornes","rep\xE8re","km"]},{title:"igo.geo.search.icherche.type.road",value:"routes",enabled:o.indexOf("routes")!==-1,hashtags:["route"]},{title:"igo.geo.search.icherche.type.exit",value:"sorties-autoroute",enabled:o.indexOf("sorties-autoroute")!==-1,hashtags:["sortie","sorties","exit"]},{title:"igo.geo.search.icherche.type.cultpatri",value:"culture",enabled:o.indexOf("culture")!==-1,hashtags:["grille","culture"]},{title:"igo.geo.search.icherche.type.unites",value:"unites",enabled:o.indexOf("unites")!==-1,hashtags:["unites","adresse"]}]},{type:"radiobutton",title:"results limit",name:"limit",values:[{title:"1",value:1,enabled:e===1},{title:"5",value:5,enabled:e===5||!e},{title:"10",value:10,enabled:e===10},{title:"25",value:25,enabled:e===25},{title:"50",value:50,enabled:e===50}]},s&&{type:"radiobutton",title:"ecmax",name:"ecmax",values:[{title:"10 %",value:10,enabled:n===10},{title:"30 %",value:30,enabled:n===30||!n},{title:"50 %",value:50,enabled:n===50},{title:"75 %",value:75,enabled:n===75},{title:"100 %",value:100,enabled:n===100}]},{type:"radiobutton",title:"restrictExtent",name:"loc",values:[{title:"igo.geo.search.icherche.restrictExtent.map",value:"true",enabled:!1},{title:"igo.geo.search.icherche.restrictExtent.quebec",value:"false",enabled:!0}]}].filter(Boolean)}}search(e,n){let o=this.computeRequestParams(e,n||{});return o.get("type").length?(this.options.params.page=o.get("page")||"1",this.getSearch(e,o)):Vt([])}getSearch(e,n){return this.http.get(`${this.searchUrl}/geocode`,{params:n}).pipe($t(o=>this.extractResults(o,e)),Fn(o=>{throw o.error.toDisplay=!0,o.error.title=this.languageService.translate.instant(this.getDefaultOptions().title),o}))}getAllowedTypes(){return this.http.get(`${this.searchUrl}/types`).subscribe(e=>{let n=this.settings.find(o=>o.name==="type");n.values.forEach(o=>{let s=new RegExp(`^${o.value}(\\.|$)`),l=e.filter(h=>s.test(h));o.available=l.length>0,o.value==="lieux"&&(this.hashtagsLieuxToKeep=[...new Set(l.map(h=>h.split(".")).reduce((h,p)=>h.concat(p)).filter(h=>h!=="lieux"))])}),this.setParamFromSetting(n,!1)})}computeRequestParams(e,n){let o=Object.assign({geometry:!0,bbox:!0,icon:!0,type:"adresses,codes-postaux,municipalites,mrc,regadmin,lieux,entreprises,bornes-sumi"},this.params,this.computeOptionsParam(e,n||{}).params,{q:this.computeTerm(e),page:n.page});if(o.loc==="true"){let[s,l,h,p]=n.extent;o.loc=`${s},${l};${h},${l};${h},${p};${s},${p};${s},${l}`}else o.loc==="false"&&delete o.loc;return/#[A-Za-z]+/.test(o.q)&&(o.type="lieux"),new zs({fromObject:Ln.removeUndefined(o),encoder:new qne})}extractResults(e,n){return e.features.map(o=>this.formatter.formatResult(this.dataToResult(o,n,e)))}dataToResult(e,n,o){let s=this.computeProperties(e),l=[this.getId(),s.type,s.code].join("."),h=e.highlight.title||e.properties.nom,p=e.highlight.title2?" <small> "+e.highlight.title2+"</small>":"",m=e.highlight.title3?"<br><small> "+e.highlight.title3+"</small>":"",f=e.icon;return typeof f=="string"&&Object.keys(vAe).includes(f)&&(f=vAe[f]),{source:this,data:{type:Qo,projection:"EPSG:4326",geometry:e.geometry,extent:e.bbox,properties:s,meta:{id:l,title:e.properties.nom}},meta:{dataType:Qo,id:l,title:e.properties.nom,titleHtml:h+p+m,icon:f||"location_on",score:e.score||_I(n.trim(),e.properties.nom),nextPage:o.features.length%+this.options.params.limit===0&&+this.options.params.page<10}}}computeProperties(e){let n=Ln.removeKeys(e.properties,r.propertiesBlacklist);if(!e.geometry)return Object.assign({type:e.index},n);let o={GoogleMaps:""},s;if(e.geometry.type==="Point")s=Xd.getGoogleMapsCoordLink(e.geometry.coordinates[0],e.geometry.coordinates[1]);else{let p=jR(e.geometry);s=Xd.getGoogleMapsCoordLink(p.geometry.coordinates[0],p.geometry.coordinates[1])}let l;e.index==="routes"?l=Xd.getGoogleMapsNameLink(e.properties.nom+", "+e.properties.municipalite):e.index==="municipalites"?l=Xd.getGoogleMapsNameLink(e.properties.nom+", ville"):e.index==="mrc"?l=Xd.getGoogleMapsNameLink("mrc+"+e.properties.nom):e.index==="regadmin"?l=Xd.getGoogleMapsNameLink(e.properties.nom+",+QC"):l=Xd.getGoogleMapsNameLink(e.properties.nom||e.highlight.title),o.GoogleMaps="<a href="+s+' target="_blank">'+this.languageService.translate.instant("igo.geo.searchByCoord")+"</a> <br /> <a href="+l+' target="_blank">'+this.languageService.translate.instant("igo.geo.searchByName")+"</a>",e.geometry.type==="Point"&&(o.GoogleStreetView=Xd.getGoogleStreetViewLink(e.geometry.coordinates[0],e.geometry.coordinates[1]));let h={Route:'<span class="routing"> <u>'+this.languageService.translate.instant("igo.geo.seeRouting")+"</u> </span>"};return Object.assign({type:e.index},n,o,h)}computeTerm(e){let n=e.match(/(#[A-Za-z]+)/g)||[],o=!1;return o=n.some(s=>{let l=String(s).substring(1);return this.hashtagsLieuxToKeep.some(h=>h.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")===l.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""))}),o||(e=e.replace(/(#[A-Za-z]+)/g,"")),e.replace(/[^\w- !\-\+\(\)\.\/,'#]+/g,"")}computeOptionsParam(e,n){let o=super.getHashtagsValid(e,"type");return o&&(n.params=Object.assign(n.params||{},{type:o.join(",")})),n}static \u0275fac=function(n){return new(n||r)(xe(dr),xe(wn),xe(wo),xe("options"),xe(aU),xe(yn))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return po([Cp({maxCacheCount:20,cacheHasher:xx}),xo("design:type",Function),xo("design:paramtypes",[String,zs]),xo("design:returntype",si)],r.prototype,"getSearch",null),r})(),wAe=(()=>{class r extends Pd{http;languageService;static id="icherchereverse";static type=Qo;static propertiesBlacklist=[];title$=new mt("");get title(){return this.title$.getValue()}constructor(e,n,o,s,l){super(s,o),this.http=e,this.languageService=n,this.languageService.language$.subscribe(()=>{this.title$.next(this.languageService.translate.instant(this.options.title))});let h=l.get(ml);this.settings.length&&(h?h.authenticate$.subscribe(()=>{this.getAllowedTypes()}):this.getAllowedTypes())}getId(){return r.id}getType(){return r.type}getDefaultOptions(){let e=this.options.params&&this.options.params.type?this.options.params.type.replace(/\s/g,"").toLowerCase().split(","):["adresses","municipalites","mrc","regadmin"];return{title:"igo.geo.search.ichercheReverse.name",searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/terrapi",settings:[{type:"checkbox",title:"results type",name:"type",values:[{title:"igo.geo.search.icherche.type.address",value:"adresses",enabled:e.indexOf("adresses")!==-1},{title:"igo.geo.search.icherche.type.road",value:"routes",enabled:e.indexOf("routes")!==-1,available:!1},{title:"igo.geo.search.icherche.type.district",value:"arrondissements",enabled:e.indexOf("arrondissements")!==-1},{title:"igo.geo.search.icherche.type.city",value:"municipalites",enabled:e.indexOf("municipalites")!==-1},{title:"igo.geo.search.icherche.type.mrc",value:"mrc",enabled:e.indexOf("mrc")!==-1},{title:"igo.geo.search.icherche.type.regadmin",value:"regadmin",enabled:e.indexOf("regadmin")!==-1},{title:"igo.geo.search.icherche.type.unites",value:"unites",enabled:e.indexOf("unites")!==-1}]},{type:"radiobutton",title:"radius",name:"bufferInput",values:[{title:"100 m",value:100,enabled:!this.options.distance||this.options.distance===100},{title:"500 m",value:500,enabled:this.options.distance===500},{title:"1 km",value:1e3,enabled:this.options.distance===1e3},{title:"2 km",value:2e3,enabled:this.options.distance===2e3},{title:"5 km",value:5e3,enabled:this.options.distance===5e3}]}]}}reverseSearch(e,n){let o=this.computeRequestParams(e,n||{});return o.get("type").length?this.getReverseSearch(o):Vt([])}getReverseSearch(e){return this.http.get(`${this.searchUrl}/locate`,{params:e}).pipe($t(n=>this.extractResults(n)))}getAllowedTypes(){return this.http.get(`${this.searchUrl}/types`).subscribe(e=>{let n=this.settings.find(o=>o.name==="type");n.values.forEach(o=>{o.available=e.indexOf(o.value)>-1}),this.setParamFromSetting(n,!1)})}computeRequestParams(e,n){return(n.distance||this.options.distance)&&(n.params=Object.assign(n.params||{},{bufferInput:n.distance||this.options.distance})),new zs({fromObject:Object.assign({loc:e.join(","),sort:"distance",geometry:!0,icon:!0},n.params||{},this.params)})}extractResults(e){return e.features.map(n=>this.dataToResult(n))}getSubtitle(e){if(!this.settings.length)return"";let n="";switch(e.properties.type){case"arrondissements":n=e.properties.municipalite+" (Arrondissement)";break;default:{let s=this.settings.find(l=>l.name==="type").values.find(l=>l.value===e.properties.type);s&&(n=this.languageService.translate.instant(s.title))}}return n}dataToResult(e){let n=this.computeProperties(e),o=this.computeExtent(e),s=[this.getId(),n.type,n.code].join("."),l=e.properties.nom,h=" <small> "+this.getSubtitle(e)+"</small>";return{source:this,data:{type:Qo,projection:"EPSG:4326",geometry:e.geometry,extent:o,properties:n,meta:{id:s,title:e.properties.nom}},meta:{dataType:Qo,id:s,title:e.properties.nom,titleHtml:l+h,icon:e.icon||"location_on",pointerSummaryTitle:this.getSubtitle(e)+": "+e.properties.nom}}}computeProperties(e){let n=Ln.removeKeys(e.properties,r.propertiesBlacklist),o={Route:'<span class="routing"> <u>'+this.languageService.translate.instant("igo.geo.seeRouting")+"</u> </span>"};return Object.assign(n,o)}computeExtent(e){return e.bbox?[e.bbox[0],e.bbox[2],e.bbox[1],e.bbox[3]]:void 0}static \u0275fac=function(n){return new(n||r)(xe(dr),xe(wn),xe(wo),xe("options"),xe(yn))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return po([Cp({maxCacheCount:20,cacheHasher:xx}),xo("design:type",Function),xo("design:paramtypes",[zs]),xo("design:returntype",si)],r.prototype,"getReverseSearch",null),r})();function Cmt(r){return new aU(r)}function _re(){return{provide:aU,useFactory:Cmt,deps:[wn]}}function xmt(r,i,e,n,o,s){return new bAe(r,i,e,n.getConfig(`searchSources.${bAe.id}`),o,s)}function Smt(){return{provide:Pd,useFactory:xmt,multi:!0,deps:[dr,wn,wo,Ri,aU,yn]}}function AEe(){return{kind:gb.ICherche,providers:[Smt(),_re()]}}function Imt(r,i,e,n,o){return new wAe(r,i,e,n.getConfig(`searchSources.${wAe.id}`),o)}function Tmt(){return{provide:Pd,useFactory:Imt,multi:!0,deps:[dr,wn,wo,Ri,yn]}}function EEe(){return{kind:gb.IChercheReverse,providers:[Tmt(),_re()]}}var lU=(()=>{class r{languageService;constructor(e){this.languageService=e}formatResult(e){let n=["title","abstract","groupTitle","metadataUrl","downloadUrl","urlInfo","name"],o=Object.entries(e.properties).filter(([l])=>n.indexOf(l)!==-1).reduce((l,h)=>{let[p,m]=h,f;try{f=this.languageService.translate.instant("igo.geo.search.ilayer.properties."+p)}catch{f=p}return l[f]=m||"",l},{}),s=Object.assign({},e);return s.properties=o,s}static \u0275fac=function(n){return new(n||r)(xe(wn))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),CAe=(()=>{class r extends Pd{http;languageService;formatter;static id="ilayer";static type=ZF;title$=new mt("");get title(){return this.title$.getValue()}constructor(e,n,o,s,l){super(s,o),this.http=e,this.languageService=n,this.formatter=l,this.languageService.language$.subscribe(()=>{this.title$.next(this.languageService.translate.instant(this.options.title))})}getId(){return r.id}getType(){return r.type}getDefaultOptions(){let e=this.options.params&&this.options.params.limit?Number(this.options.params.limit):void 0,n=this.options.params&&this.options.params.ecmax?Number(this.options.params.ecmax):void 0,o=this.options.showAdvancedSettings;return{title:"igo.geo.search.ilayer.name",searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/layers/search",settings:[{type:"checkbox",title:"results type",name:"type",values:[{title:"igo.geo.search.ilayer.type.layer",value:"layer",enabled:!0,hashtags:["layer","layers","couche","couches"]},{title:"igo.geo.search.ilayer.type.groupLayer",value:"group",enabled:!1,hashtags:["gr-layer","gr-layers","gr-couche","gr-couches"]}]},{type:"radiobutton",title:"results limit",name:"limit",values:[{title:"1",value:1,enabled:e===1},{title:"5",value:5,enabled:e===5||!e},{title:"10",value:10,enabled:e===10},{title:"25",value:25,enabled:e===25},{title:"50",value:50,enabled:e===50}]},o&&{type:"radiobutton",title:"ecmax",name:"ecmax",values:[{title:"10 %",value:10,enabled:n===10},{title:"30 %",value:30,enabled:n===30},{title:"50 %",value:50,enabled:n===50||!n},{title:"75 %",value:75,enabled:n===75},{title:"100 %",value:100,enabled:n===100}]}].filter(Boolean)}}search(e,n){let o=this.computeSearchRequestParams(e,n||{});return!o.get("q")||!o.get("type")?Vt([]):(this.options.params.page=o.get("page")||"1",this.getSearch(e,o))}getSearch(e,n){return this.http.get(this.searchUrl,{params:n}).pipe($t(o=>this.extractResults(o,e)))}computeSearchRequestParams(e,n){return new zs({fromObject:Ln.removeUndefined(Object.assign({q:this.computeTerm(e)},this.params,this.computeOptionsParam(e,n||{}).params,{page:n.page}))})}computeTerm(e){return e.replace(/(#[^\s]*)/g,"").replace(/[^\w- !\-\(\),'#]+/g,"")}computeOptionsParam(e,n){let o=super.getHashtagsValid(e,"type");return o&&(n.params=Object.assign(n.params||{},{type:o.join(",")})),n}extractResults(e,n){return e.items.map(o=>this.dataToResult(o,n,e))}dataToResult(e,n,o){let s=this.computeLayerOptions(e),l=e.highlight.title||e.properties.title,h=e.highlight.groupTitle||e.properties.groupTitle,p=h?' <small style="color: #6f6969"> '+h+"</small>":"";return{source:this,meta:{dataType:ZF,id:[this.getId(),e.properties.id].join("."),title:e.properties.title,titleHtml:l+p,icon:e.properties.type==="Layer"?"layers":"map",score:e.score||_I(n.trim(),e.properties.name),nextPage:o.items.length%+this.options.params.limit===0&&+this.options.params.page<10},data:s}}computeLayerOptions(e){let n=e.properties.url,o=this.extractQueryParamsFromSourceUrl(n);return Ln.removeUndefined({sourceOptions:{id:e.properties.id,type:e.properties.format,url:n,queryFormat:o.queryFormat,queryHtmlTarget:o.queryHtmlTarget,params:e.properties.format==="wms"?{LAYERS:e.properties.name}:void 0,layer:e.properties.format==="wms"?void 0:e.properties.name,optionsFromCapabilities:!0,crossOrigin:"anonymous"},title:e.properties.title,maxResolution:Th(Number(e.properties.maxScaleDenom)),minResolution:Th(Number(e.properties.minScaleDenom)),metadata:{url:e.properties.metadataUrl,extern:e.properties.metadataUrl?!0:void 0,abstract:e.properties.abstract||void 0},properties:this.formatter.formatResult(e).properties})}extractQueryParamsFromSourceUrl(e){let n,o,s=this.options.queryFormat;if(s){for(let l of Object.keys(s)){let h=s[l];if(h==="*"){n=Od[l.toUpperCase()];break}let p=h.urls;if(Array.isArray(p)){p.forEach(m=>{e.indexOf(m)!==-1&&(n=Od[l.toUpperCase()])});break}}(n===Od.HTML||n===Od.HTMLGML2)&&(o="iframe")}return{queryFormat:n,queryHtmlTarget:o}}static \u0275fac=function(n){return new(n||r)(xe(dr),xe(wn),xe(wo),xe("options"),xe(lU))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return po([Cp({maxCacheCount:20,cacheHasher:xx}),xo("design:type",Function),xo("design:paramtypes",[String,zs]),xo("design:returntype",si)],r.prototype,"getSearch",null),r})();function Amt(r){return new lU(r)}function MEe(){return{provide:lU,useFactory:Amt,deps:[wn]}}function Emt(r,i,e,n,o){return new CAe(r,i,e,n.getConfig(`searchSources.${CAe.id}`),o)}function Mmt(){return{provide:Pd,useFactory:Emt,multi:!0,deps:[dr,wn,wo,Ri,lU]}}function DEe(){return{kind:gb.ILayer,providers:[Mmt(),MEe()]}}var gki=[iL,pre,..._mt,mre,gre],kEe=(()=>{class r{static forRoot(){return{ngModule:r,providers:[yI,xEe(),_re(),IEe(),MEe()]}}static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({imports:[mAe,gAe,fAe,_Ae,mAe,gAe,fAe,_Ae]})}return r})(),Dmt=new At("styleListOptions");function OEe(r){return{provide:Dmt,useValue:r}}var PEe=(()=>{class r{cdRef;layer;map;complete=new it;cancel=new it;constructor(e){this.cdRef=e}onUpdateInputs(){this.cdRef.detectChanges()}onClose(){this.cancel.emit()}static \u0275fac=function(n){return new(n||r)(ie(Ti))};static \u0275cmp=gt({type:r,selectors:[["igo-ogc-filter"]],inputs:{layer:"layer",map:"map"},outputs:{complete:"complete",cancel:"cancel"},standalone:!0,features:[yt],decls:1,vars:3,consts:[["igoListItem","",3,"layer","header","map"]],template:function(n,o){n&1&&wt(0,"igo-ogc-filterable-item",0),n&2&&ee("layer",o.layer)("header",!1)("map",o.map)},dependencies:[pEe],changeDetection:0})}return r})(),xAe=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({imports:[PEe]})}return r})(),cU=new At("OgcFilterWidget");function kmt(r){return r.create(PEe)}function Omt(){return{provide:cU,useFactory:kmt,deps:[iK]}}var Pmt=(()=>{class r{dialogRef;languageService;data;constructor(e,n,o){this.dialogRef=e,this.languageService=n,this.data=o}cancelAction(){this.data.cancel=!0,this.dialogRef.close(this.data.cancel)}confirmedAction(){this.data.cancel=!1,this.dialogRef.close(this.data.cancel)}static \u0275fac=function(n){return new(n||r)(ie(Mp),ie(wn),ie(_E))};static \u0275cmp=gt({type:r,selectors:[["igo-confirmation-popup-component"]],standalone:!0,features:[yt],decls:8,vars:2,consts:[["mat-dialog-content",""],[1,"mat-typography"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"click"]],template:function(n,o){n&1&&(ne(0,"div",0)(1,"p",1),Ye(2),ce()(),ne(3,"div",2)(4,"button",3),Oe("click",function(){return o.confirmedAction()}),Ye(5," Ok "),ce(),ne(6,"button",4),Oe("click",function(){return o.cancelAction()}),Ye(7),ce()()),n&2&&(q(2),Qt(" ",o.data.type==="add"?o.languageService.translate.instant("igo.geo.workspace.addConfirmation"):o.languageService.translate.instant("igo.geo.workspace.deleteConfirmation")," "),q(5),Qt(" ",o.languageService.translate.instant("igo.geo.workspace.cancel")," "))},dependencies:[ff,gv,bn,Ua],styles:["div.mat-mdc-dialog-actions[_ngcontent-%COMP%]{justify-content:center}"]})}return r})(),bI=class extends DE{dialog;configService;adding$;getDomainValues;options;inResolutionRange$=new mt(!0);get layer(){return this.options.layer}get map(){return this.options.map}drawControl;drawEnd$$;olDrawingLayerSource=new tp;olDrawingLayer;geometryType=fEe;modify;modifyStyle=new Mn({stroke:new ir({color:"rgba(255,255,255,1)",width:1}),fill:new sr({color:"rgba(0,161,222,1)"}),image:new yl({radius:7,stroke:new ir({color:"rgba(255,255,255,1)",width:1}),fill:new sr({color:"rgba(0,161,222,1)"})})});newFeaturefilterClauseFunc=i=>i.state.newFeature===!0;editFeaturefilterClauseFunc=i=>i.state.edit===!0;fillColor;strokeColor;strokeWidth;constructor(i,e,n,o,s){super(s),this.dialog=i,this.configService=e,this.adding$=n,this.getDomainValues=o,this.options=s,this.map.viewController.resolution$.subscribe(l=>{l>this.layer.minResolution&&l<this.layer.maxResolution?this.inResolutionRange$.next(!0):this.inResolutionRange$.next(!1)}),this.drawControl=this.createDrawControl(),this.drawControl.setGeometryType(this.geometryType.Point),this.olDrawingLayer&&this.map.layerController.remove(this.olDrawingLayer),this.olDrawingLayer=new ll({id:"igo-draw-layer",title:"edition",zIndex:300,source:new As,showInLayerList:!1,exportable:!1,browsable:!1,workspace:{enabled:!1}})}deleteFeature(i,e){setTimeout(()=>{this.dialog.open(Pmt,{disableClose:!1,data:{type:"delete"}}).afterClosed().subscribe(o=>{if(o===!1){let s,l,h=e.layer.dataSource.options.edition.baseUrl,p=e.layer.dataSource.options.edition.deleteUrl;h.length?l=this.configService.getConfig("edition.url")?this.configService.getConfig("edition.url")+h+"?"+p:h+"?"+p:l=this.configService.getConfig("edition.url")?this.configService.getConfig("edition.url")+p:p;for(let m of e.meta.tableTemplate.columns)for(let f in i.properties){let g=m.name;g.includes("properties.")&&(g=g.split(".")[1]),g===f&&m.primary===!0&&(s=i.properties[f])}l&&(l+=s,this.deleteFeature(e,l))}})},250)}editFeature(i,e){i.edition=!0;let n,o=!1,s=e.layer.dataSource.options.edition;for(let l of e.meta.tableTemplate.columns)if((l.type==="list"||l.type==="autocomplete")&&this.getDomainValues(l.relation).subscribe(h=>{l.domainValues=h}),o===!1)for(let h in i.properties){let p=l.name;if(p.includes("properties.")&&(p=p.split(".")[1]),p===h&&l.primary===!0){n=i.properties[h],o=!0;break}}if(n)i.original_properties=JSON.parse(JSON.stringify(i.properties)),i.original_geometry=i.geometry,i.idkey=n,e.entityStore.state.updateAll({edit:!1}),e.entityStore.stateView.filter(this.editFeaturefilterClauseFunc),this.addFeatureToStore(i,e);else if(!i.newFeature&&s.geomType)if(i.newFeature=!0,this.adding$.next(!0),e.entityStore.state.updateAll({newFeature:!1}),e.entityStore.stateView.filter(this.newFeaturefilterClauseFunc),s.addWithDraw){let l=s.geomType;this.onGeometryTypeChange(l,i,e)}else e.entityStore.insert(i),e.entityStore.state.update(i,{newFeature:!0},!0)}createDrawControl(i,e,n){return new Bne({geometryType:void 0,drawingLayerSource:this.olDrawingLayerSource,drawingLayerStyle:new Mn({}),interactionStyle:Xpt(i,e,n)})}onGeometryTypeChange(i,e,n){this.drawControl.setGeometryType(i),this.toggleDrawControl(e,n)}toggleDrawControl(i,e){this.deactivateDrawControl(),this.activateDrawControl(i,e)}deactivateDrawControl(){this.drawControl&&(this.drawEnd$$&&this.drawEnd$$.unsubscribe(),this.drawControl.setOlMap(void 0))}activateDrawControl(i,e){this.drawEnd$$=this.drawControl.end$.subscribe(n=>{this.addFeatureToStore(i,e,n)}),this.drawControl.setOlMap(this.map.ol,!0)}addFeatureToStore(i,e,n){let o=this.map.ol.getView().getProjection(),s=i.geometry;n?(e.entityStore.insert(i),e.entityStore.state.update(i,{newFeature:!0},!0),s=new hs().writeGeometryObject(n,{featureProjection:o,dataProjection:"EPSG:4326"}),i.geometry=s):e.entityStore.state.update(i,{edit:!0},!0),i.projection="EPSG:4326";let l=oy(i,o.getCode());this.olDrawingLayer.dataSource.ol.clear(),this.olDrawingLayer.dataSource.ol.addFeature(l),this.map.layerController.add(this.olDrawingLayer),this.deactivateDrawControl(),this.createModifyInteraction(l,i,e)}deleteDrawings(){this.map.layerController.remove(this.olDrawingLayer),this.olDrawingLayerSource.clear(),this.map.ol.removeInteraction(this.modify)}createModifyInteraction(i,e,n){this.map.ol.removeInteraction(this.modify);let o=new al([i],{unique:!0});this.modify=new Mee({features:o}),this.map.ol.addInteraction(this.modify),o.forEach(s=>{s.setStyle(this.modifyStyle)}),this.modify.on("modifyend",s=>{let l=s.features.getArray()[0]?.getGeometry();l&&this.addFeatureToStore(e,n,l)})}};function REe(r){return r.entityStore.getStrategyOfType(bf).active$.pipe($t(i=>i?"igo.geo.workspace.inMapExtent.active.tooltip":"igo.geo.workspace.inMapExtent.inactive.tooltip"))}function FEe(r){return r.entityStore.stateView.manyBy$(i=>i.state.selected===!0).pipe($t(i=>i.length>=1))}function SAe(r,i,e,n,o,s){let l=Ln.removeUndefined({sourceOptions:{type:n,url:e,optionsFromCapabilities:!0,optionsFromApi:!0,params:{LAYERS:n==="wms"?o:void 0,LAYER:n==="wms"?void 0:o}}});if(r==="add")s.createAsyncLayer(l).subscribe(h=>{h&&(i.layersAddedByClick$.next([h]),i.layerController.add(h))});else if(r==="remove"){let h=wI(l.sourceOptions);i.layerController.remove(i.layerController.all.find(p=>p.id===h))}}function Rmt(r,i){return[{name:"geoServiceAction",title:void 0,tooltip:"",renderer:$g.ButtonGroup,valueAccessor:(n,o)=>{let s=o.state.geoService;return s&&s.haveGeoServiceProperties&&s.url&&s.layerName?s.added?[{icon:"delete",color:"warn",click:(l,h)=>{SAe("remove",r.map,h.state.geoService.url,h.state.geoService.type,h.state.geoService.layerName,i),s.added=!1}}]:[{icon:"add",color:"primary",click:(l,h)=>{SAe("add",r.map,h.state.geoService.url,h.state.geoService.type,h.state.geoService.layerName,i),s.added=!0}}]:[]}}]}function yre(r,i,e,n){let o=Rmt(r,e),s=i.dataSource.options.sourceFields||[],l=i.dataSource.options.relations||[];if(s.length===0){r.entityStore.entities$.pipe(Uc(m=>m.length===0),Tn(1)).subscribe(m=>{let f=m[0].ol,g=f.getKeys().filter(y=>!y.startsWith("_")&&y!=="geometry"&&y!==f.getGeometryName()&&!y.match(/boundedby/gi)).map(y=>({name:`properties.${y}`,title:y,renderer:$g.UnsanitizedHTML}));g.unshift(...o),r.meta.tableTemplate={selection:!0,sort:!0,columns:g,tableHeight:"100%"}});return}let h=s.map(m=>({name:`properties.${m.name}`,title:m.alias?m.alias:m.name,renderer:$g.UnsanitizedHTML,tooltip:m.tooltip,cellClassFunc:()=>{let f={};if(m.type)return f[`class_${m.type}`]=!0,f}})),p=l.map(m=>({name:`properties.${m.name}`,title:m.alias?m.alias:m.name,renderer:$g.Icon,icon:m.icon,parent:m.parent,type:"relation",tooltip:m.tooltip,onClick:()=>{n.next(m.title)},cellClassFunc:()=>({class_icon:!0})}));h.push(...p),h.unshift(...o),r.meta.tableTemplate={selection:!0,sort:!0,columns:h,tableHeight:"100%"}}function dU(){let r=i=>i.state.inMapExtent===!0&&i.state.inMapResolution===!0;return new bf({filterClauseFunc:r})}var uU=(()=>{class r{layerService;storageService;configService;messageService;http;dialog;styleService;authInterceptor;ws$=new mt(void 0);adding$=new mt(!1);relationLayers$=new mt(void 0);rowsInMapExtentCheckCondition$=new mt(!0);loading=!1;wktFormat=new z_;geoJsonFormat=new hs;get zoomAuto(){return this.storageService.get("zoomAuto")}constructor(e,n,o,s,l,h,p,m){this.layerService=e,this.storageService=n,this.configService=o,this.messageService=s,this.http=l,this.dialog=h,this.styleService=p,this.authInterceptor=m}createWorkspace(e,n){if(e.options.workspace?.enabled!==!0||e.dataSource.options.edition.enabled!==!0)return;let o;e.options.workspace?o=e.options.workspace:o={},o.srcId=e.id,o.workspaceId=e.id,o.enabled=!0,o.pageSize=e.options.workspace?.pageSize,o.pageSizeOptions=e.options.workspace?.pageSizeOptions;let s=e.dataSource,l=e.id+".WmsWorkspaceTableSrc",h=e.id+".WfsWorkspaceTableDest";e.options.linkedLayers||(e.options.linkedLayers={linkId:l,links:[]});let p={syncedDelete:!0,linkedIds:[h],properties:[ls.ZINDEX,ls.VISIBLE]};e.options.workspace?.minResolution||p.properties.push(ls.MINRESOLUTION);let m=!1;s.options.ogcFilters?.enabled&&(p.properties.push(ls.OGCFILTERS),m=!0),e.options.workspace?.maxResolution||p.properties.push(ls.MAXRESOLUTION);let f=[];e.options.linkedLayers.links&&(f=JSON.parse(JSON.stringify(e.options.linkedLayers.links))),f.push(p),e.options.linkedLayers.linkId=e.options.linkedLayers.linkId?e.options.linkedLayers.linkId:l,e.options.linkedLayers.links=f,e.createLink();let g;return this.layerService.createAsyncLayer({title:e.title,parentId:e.options.parentId,visible:e.visible,id:h,linkedLayers:{linkId:h},workspace:{srcId:e.id,workspaceId:void 0,enabled:!1,queryOptions:{mapQueryOnOpenTab:e.options.workspace?.queryOptions?.mapQueryOnOpenTab,tabQuery:!1},pageSize:e.options.workspace?.pageSize,pageSizeOptions:e.options.workspace?.pageSizeOptions},showInLayerList:!1,isIgoInternalLayer:!0,opacity:0,minResolution:e.options.workspace?.minResolution||e.minResolution||0,maxResolution:e.options.workspace?.maxResolution||e.maxResolution||1/0,style:this.styleService.createStyle({fill:{color:"rgba(255, 255, 255, 0.01)"},stroke:{color:"rgba(255, 255, 255, 0.01)"},circle:{fill:{color:"rgba(255, 255, 255, 0.01)"},stroke:{color:"rgba(255, 255, 255, 0.01)"},radius:5}}),sourceOptions:{download:s.options.download,type:"wfs",url:s.options.urlWfs||s.options.url,queryable:!0,relations:s.options.relations,queryTitle:s.options.queryTitle,params:s.options.paramsWFS,ogcFilters:Object.assign({},s.ogcFilters,{enabled:m}),sourceFields:s.options.sourceFields||void 0,edition:s.options.edition}}).subscribe(y=>(n.layerController.add(y),e.ol.setProperties({linkedLayers:{linkId:e.options.linkedLayers.linkId,links:f}},!1),y.dataSource.ol.refresh(),g=new bI(this.dialog,this.configService,this.adding$,_=>this.getDomainValues(_),{id:e.id,title:e.title,layer:y,map:n,entityStore:this.createFeatureStore(y,n),actionStore:new Em([]),meta:{tableTemplate:void 0}}),this.createTableTemplate(g,y),y.options.workspace.workspaceId=y.id,e.options.workspace=Object.assign({},e.options.workspace,{wksConfig:o}),delete s.options.download,g)),g}createFeatureStore(e,n){let o=new Xp([],{map:n});o.bindLayer(e);let s=new $2({}),l=new oC({}),h=new V2({}),p=new S_({}),m=new zf({layer:new ll({zIndex:300,source:new As,style:void 0,showInLayerList:!1,exportable:!1,browsable:!1}),map:n,hitTolerance:15,motion:this.zoomAuto?$n.Default:$n.None,many:!0,dragBox:!0});return o.addStrategy(s,!0),o.addStrategy(l,!0),o.addStrategy(h,!0),o.addStrategy(m,!0),o.addStrategy(p,!1),o.addStrategy(dU(),!0),o}createTableTemplate(e,n){let o=n.dataSource.options.sourceFields||[],s=n.dataSource.options.relations||[],l=$g.UnsanitizedHTML,h=[],p=[],m=[];if(h=[{name:"edition",title:void 0,renderer:$g.ButtonGroup,primary:!1,valueAccessor:()=>[{editMode:!1,icon:"edit",color:"primary",disabled:n.dataSource.options.edition.modifyButton===!1,click:f=>{e.editFeature(f,e)}},{editMode:!1,icon:"delete",color:"warn",disabled:n.dataSource.options.edition.deleteButton===!1,click:f=>{e.deleteFeature(f,e)}},{editMode:!0,icon:"check",color:"primary",disabled:this.loading,click:f=>{this.saveFeature(f,e)}},{editMode:!0,icon:"close",color:"primary",disabled:this.loading,click:f=>{this.cancelEdit(e,f)}}]}],o.length===0){e.entityStore.entities$.pipe(Uc(f=>f.length===0),Tn(1)).subscribe(f=>{let g=f[0].ol,y=g.getKeys().filter(_=>!_.startsWith("_")&&_!=="geometry"&&_!==g.getGeometryName()&&!_.match(/boundedby/gi)).map(_=>({name:`properties.${_}`,title:_,renderer:l}));e.meta.tableTemplate={selection:!1,sort:!0,columns:y}});return}p=o.map(f=>{let g={name:`properties.${f.name}`,title:f.alias?f.alias:f.name,renderer:l,valueAccessor:void 0,cellClassFunc:()=>{let y={};if(f.type)return y[`class_${f.type}`]=!0,y},primary:f.primary===!0,visible:f.visible,validation:f.validation,linkColumnForce:f.linkColumnForce,type:f.type,domainValues:void 0,relation:void 0,multiple:f.multiple,step:f.step,tooltip:f.tooltip};return(f.type==="list"||f.type==="autocomplete")&&this.getDomainValues(f.relation).subscribe(y=>{g.domainValues=y,g.relation=f.relation}),g}),m=s.map(f=>({name:`properties.${f.name}`,title:f.alias?f.alias:f.name,renderer:$g.Icon,icon:f.icon,parent:f.parent,type:"relation",tooltip:f.tooltip,onClick:()=>{this.adding$.getValue()===!1&&this.ws$.next(f.title)},cellClassFunc:()=>({class_icon:!0})})),p.push(...m),p.push(...h),e.meta.tableTemplate={selection:!1,sort:!0,columns:p}}saveFeature(e,n){if(!this.validateFeature(e,n))return!1;this.sanitizeParameter(e,n);let o=n.layer.dataSource.options.edition.baseUrl,s=this.configService.getConfig("edition.url");if(s?s+=o||"":s=o,e.newFeature){s+=n.layer.dataSource.options.edition.addUrl;let l=n.layer.dataSource.options.edition.addHeaders,h=new Wd(l);this.addFeature(e,n,s,h)}else{n.layer.dataSource.options.edition.modifyProtocol!=="post"?s+="?"+n.layer.dataSource.options.edition.modifyUrl+e.idkey:s+=n.layer.dataSource.options.edition.modifyUrl;let l=n.layer.dataSource.options.edition.modifyProtocol,h=n.layer.dataSource.options.edition.modifyHeaders,p=new Wd(h);this.modifyFeature(e,n,s,p,l)}}addFeature(e,n,o,s){if(n.layer.dataSource.options.edition.hasGeometry){let l=n.layer.options.sourceOptions.edition.geomDatabaseProj;e.properties[n.layer.dataSource.options.params.fieldNameGeometry]="SRID="+l.replace("EPSG:","")+";"+this.wktFormat.writeGeometry(this.geoJsonFormat.readFeature(e.geometry).getGeometry().transform("EPSG:4326",l),{dataProjection:l})}for(let l in e.properties)for(let h of n.layer.dataSource.options.sourceFields)(h.name===l&&h.validation?.readonly||h.name===l&&h.validation?.send===!1)&&delete e.properties[l];this.loading=!0,this.http.post(`${o}`,e.properties,{headers:s}).subscribe(()=>{this.loading=!1,n.entityStore.stateView.clear(),n.deleteDrawings(),n.entityStore.delete(e),this.messageService.success("igo.geo.workspace.addSuccess"),this.refreshMap(n.layer,n.layer.map),this.adding$.next(!1),this.rowsInMapExtentCheckCondition$.next(!0)},l=>{this.loading=!1,l.error.caught=!0;let h=n.layer.dataSource.options.edition.messages;if(h){let p;h.forEach(m=>{let f=Object.keys(m)[0];l.error.message.includes(f)&&(p=m[f],this.messageService.error(p))}),p||this.messageService.error("igo.geo.workspace.addError")}else this.messageService.error("igo.geo.workspace.addError")})}deleteFeature(e,n){this.loading=!0,this.http.delete(`${n}`,{}).subscribe(()=>{this.loading=!1,this.messageService.success("igo.geo.workspace.deleteSuccess"),this.refreshMap(e.layer,e.layer.map);let o=e.layer.options.sourceOptions?.relations??[];for(let s of o)e.map.layerController.all.find(h=>Ru(h)&&h.title===s.title)?.dataSource.ol.refresh()},o=>{this.loading=!1,o.error.caught=!0;let s=e.layer.dataSource.options.edition.messages;if(s){let l;s.forEach(h=>{let p=Object.keys(h)[0];o.error.message.includes(p)&&(l=h[p],this.messageService.error(l))}),l||this.messageService.error("igo.geo.workspace.addError")}else this.messageService.error("igo.geo.workspace.addError")})}modifyFeature(e,n,o,s,l="patch"){if(n.layer.dataSource.options.edition.hasGeometry){let h=n.layer.options.sourceOptions.edition.geomDatabaseProj;e.geometry.coordinates=LEe(e.geometry.coordinates),e.properties[n.layer.dataSource.options.params.fieldNameGeometry]="SRID="+h.replace("EPSG:","")+";"+this.wktFormat.writeGeometry(this.geoJsonFormat.readFeature(e.geometry).getGeometry().transform("EPSG:4326",h),{dataProjection:h})}for(let h in e.properties)for(let p of n.layer.dataSource.options.sourceFields)(p.name===h&&p.validation?.readonly||p.name===h&&p.validation?.send===!1||h==="boundedBy")&&delete e.properties[h];this.loading=!0,this.http[l](`${o}`,e.properties,{headers:s}).subscribe(()=>{this.loading=!1,this.cancelEdit(n,e,!0),this.messageService.success("igo.geo.workspace.modifySuccess"),this.refreshMap(n.layer,n.layer.map);let h=[];n.layer.options.sourceOptions.relations?.forEach(p=>{n.map.layerController.all.forEach(m=>{Ru(m)&&m.title===p.title&&(h.push(m),m.dataSource.ol.refresh())})}),this.relationLayers$.next(h)},h=>{this.loading=!1,h.error.caught=!0;let p=n.layer.dataSource.options.edition.messages;if(p){let m;p.forEach(f=>{let g=Object.keys(f)[0];h.error.message.includes(g)&&(m=f[g],this.messageService.error(m))}),m||this.messageService.error("igo.geo.workspace.addError")}else this.messageService.error("igo.geo.workspace.addError")})}cancelEdit(e,n,o=!1){n.edition=!1,this.adding$.next(!1),e.deleteDrawings(),e.entityStore.stateView.clear(),n.newFeature?(e.entityStore.delete(n),e.deactivateDrawControl(),this.rowsInMapExtentCheckCondition$.next(!0)):(o||(n.properties=n.original_properties,n.geometry=n.original_geometry),delete n.original_properties,delete n.original_geometry)}getDomainValues(e){let n=e.url;return n||(n=this.configService.getConfig("edition.url")?this.configService.getConfig("edition.url")+e.table:e.table),this.http.get(n).pipe($t(o=>o),Fn(o=>(o.error.caught=!0,dd(o))))}refreshMap(e,n){let o=e.dataSource.ol,s=(l,h,p,m,f)=>{e.customWFSLoader(e.ol.getSource(),e.options.sourceOptions,this.authInterceptor,l,h,p,m,f,!0)};o.setLoader(s),o.refresh();for(let l of n.layerController.all)if(Ru(l)&&l.id!==e.id&&l.options.linkedLayers?.linkId.includes(e.id.substr(0,e.id.indexOf(".")-1))&&l.options.linkedLayers?.linkId.includes("WmsWorkspaceTableSrc")){let h=l.dataSource.ol,p=h.getParams();p._t=new Date().getTime(),h.updateParams(p)}}validateFeature(e,n){let o,s=!0;return n.meta.tableTemplate.columns.forEach(l=>{l.hasOwnProperty("validation")&&l.validation&&(o=M$(l.name),Object.keys(l.validation).forEach(h=>{switch(h){case"mandatory":{l.validation[h]&&(!e.properties.hasOwnProperty(o)||!e.properties[o])&&(s=!1,this.messageService.error("igo.geo.formValidation.mandatory",void 0,void 0,{column:l.title}));break}case"minValue":{e.properties.hasOwnProperty(o)&&e.properties[o]&&e.properties[o]<l.validation[h]&&(s=!1,this.messageService.error("igo.geo.formValidation.minValue",void 0,void 0,{column:l.title,value:l.validation[h]}));break}case"maxValue":{e.properties.hasOwnProperty(o)&&e.properties[o]&&e.properties[o]>l.validation[h]&&(s=!1,this.messageService.error("igo.geo.formValidation.maxValue",void 0,void 0,{column:l.title,value:l.validation[h]}));break}case"minLength":{e.properties.hasOwnProperty(o)&&e.properties[o]&&e.properties[o].length<l.validation[h]&&(s=!1,this.messageService.error("igo.geo.formValidation.minLength",void 0,void 0,{column:l.title,value:l.validation[h]}));break}case"maxLength":{e.properties.hasOwnProperty(o)&&e.properties[o]&&e.properties[o].length>l.validation[h]&&(s=!1,this.messageService.error("igo.geo.formValidation.maxLength",void 0,void 0,{column:l.title,value:l.validation[h]}));break}}}))}),s}sanitizeParameter(e,n){n.meta.tableTemplate.columns.forEach(o=>{o.type==="list"&&e.properties[M$(o.name)]&&(e.properties[M$(o.name)]=e.properties[M$(o.name)].toString())})}static \u0275fac=function(n){return new(n||r)(xe(Lu),xe(wo),xe(Ri),xe(nl),xe(dr),xe(vu),xe(fb),xe(sO))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function M$(r){return r.includes("properties.")?r.split(".")[1]:r}function LEe(r){return r.length===0?r:typeof r[0]=="number"?r.slice(0,2):r.map(LEe)}function cC({feature:r,markerColor:i=[0,161,222],markerOpacity:e=1,markerOutlineColor:n=[0,255,255],fillColor:o,fillOpacity:s=.15,strokeColor:l=[0,255,255],strokeOpacity:h=.5,strokeWidth:p=4}){return W2({feature:r,markerColor:i,markerOpacity:e,markerOutlineColor:n,fillColor:o,fillOpacity:s,strokeColor:l,strokeOpacity:h,strokeWidth:p})}function W2({feature:r,markerColor:i=[0,161,222],markerOpacity:e=.5,markerOutlineColor:n,fillColor:o=[0,161,222],fillOpacity:s=.15,strokeColor:l=[0,161,222],strokeOpacity:h=.5,strokeWidth:p=2}){let m=r instanceof An,f,g;m?(r=r,f=r.getGeometry()):(r=r,f=r.geometry,g=r.meta.mapTitle);let y=m?f.getType():f.type;if(!f||y==="Point"){let _=Qc(i).slice(0),w=_.slice(0,3);return _.length===4&&(typeof i!="string"||/^#[0-9A-F]{8}$/i.test(i))&&(e=_[3]),JF({text:g,opacity:e,markerOutlineColor:n,markerColor:w})}else{let _=Qc(o).slice(0),w=Qc(l).slice(0);return _.length===4&&(typeof o!="string"||/^#[0-9A-F]{8}$/i.test(o))||(_[3]=s),w.length===4&&(typeof l!="string"||/^#[0-9A-F]{8}$/i.test(l))||(w[3]=h),XAe({text:g,strokeWidth:p,strokeColor:w,fillColor:_})}}var CI=(()=>{class r{regexService;geoServiceRegexes=[];constructor(e){this.regexService=e,this.geoServiceRegexes=this.getGeoServiceRegexes()}getPropertyType(e){return typeof e}isUrl(e){return/^https?:\/\//.test(e.toString())}isGeoService(e){let n=!1;if(this.isUrl){for(let o of this.geoServiceRegexes)if(new RegExp(o.url).test(e)){n=!0;break}return n}}getGeoService(e,n){if(!this.isGeoService(e))return;let o;for(let s of this.geoServiceRegexes)if(new RegExp(s.url).test(e)&&(o=n.filter(p=>s.propertiesForLayerName.includes(p))?s:void 0,o))break;return o}getGeoServiceRegexes(){return this.regexService.get("geoservice")||[]}static \u0275fac=function(n){return new(n||r)(xe(rAe))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),aC=class extends DE{options;inResolutionRange$=new mt(!0);get layer(){return this.options.layer}get map(){return this.options.map}constructor(i){super(i),this.options=i,this.map.viewController.resolution$.subscribe(e=>{e>this.layer.minResolution&&e<this.layer.maxResolution?this.inResolutionRange$.next(!0):this.inResolutionRange$.next(!1)})}getLayerWksOptionTabQuery(){return this.layer.options.workspace.queryOptions?.tabQuery!==void 0?this.layer.options.workspace.queryOptions.tabQuery:!0}getLayerWksOptionMapQuery(){return this.layer.options.workspace.queryOptions?.mapQueryOnOpenTab!==void 0?this.layer.options.workspace.queryOptions.mapQueryOnOpenTab:!0}getInResolutionRange(){return this.inResolutionRange$.value}},NEe=(()=>{class r{storageService;configService;layerService;propertyTypeDetectorService;capabilitiesService;get zoomAuto(){return this.storageService.get("zoomAuto")}ws$=new mt(void 0);constructor(e,n,o,s,l){this.storageService=e,this.configService=n,this.layerService=o,this.propertyTypeDetectorService=s,this.capabilitiesService=l}createWorkspace(e,n){if(e.options.workspace?.enabled===!1||e.dataSource.options.edition)return;e.options.workspace=Object.assign({},e.options.workspace,{srcId:e.id,workspaceId:e.id,enabled:!0});let o=new aC({id:e.id,title:e.title,layer:e,map:n,entityStore:this.createFeatureStore(e,n),actionStore:new Em([]),meta:{tableTemplate:void 0}});return yre(o,e,this.layerService,this.ws$),o}createFeatureStore(e,n){let o=new Xp([],{map:n});o.bindLayer(e);let s=new $2({}),l=new Nne({percentDistinctValueRatio:2,sourceFields:e.dataSource.options.sourceFields}),h=new oC({}),p=new vI({map:n},this.propertyTypeDetectorService,this.capabilitiesService),m=new V2({}),f=new S_({}),g=this.configService.getConfig("queryOverlayStyle"),y=new zf({layer:new ll({zIndex:300,source:new As,style:_=>cC(Object.assign({},{feature:_},g?.selection||{})),showInLayerList:!1,exportable:!1,browsable:!1}),map:n,hitTolerance:15,motion:this.zoomAuto?$n.Default:$n.None,many:!0,dragBox:!0});return e.options.workspace?.searchIndexEnabled&&o.addStrategy(l,!0),o.addStrategy(s,!0),o.addStrategy(h,!0),o.addStrategy(p,!0),o.addStrategy(m,!0),o.addStrategy(y,!0),o.addStrategy(f,!1),o.addStrategy(dU(),!0),o}static \u0275fac=function(n){return new(n||r)(xe(wo),xe(Ri),xe(Lu),xe(CI),xe(sy))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),lC=class extends DE{options;inResolutionRange$=new mt(!0);get layer(){return this.options.layer}get map(){return this.options.map}constructor(i){super(i),this.options=i,this.map.viewController.resolution$.subscribe(e=>{e>this.layer.minResolution&&e<this.layer.maxResolution?this.inResolutionRange$.next(!0):this.inResolutionRange$.next(!1)})}getLayerWksOptionTabQuery(){return this.layer.options.workspace.queryOptions?.tabQuery!==void 0?this.layer.options.workspace.queryOptions.tabQuery:!0}getLayerWksOptionMapQuery(){return this.layer.options.workspace.queryOptions?.mapQueryOnOpenTab!==void 0?this.layer.options.workspace.queryOptions.mapQueryOnOpenTab:!0}getInResolutionRange(){return this.inResolutionRange$.value}},BEe=(()=>{class r{storageService;configService;layerService;propertyTypeDetectorService;capabilitiesService;get zoomAuto(){return this.storageService.get("zoomAuto")}ws$=new mt(void 0);constructor(e,n,o,s,l){this.storageService=e,this.configService=n,this.layerService=o,this.propertyTypeDetectorService=s,this.capabilitiesService=l}createWorkspace(e,n){if(e.options.workspace?.enabled===!1||e.dataSource.options.edition)return;e.options.workspace=Object.assign({},e.options.workspace,{srcId:e.id,workspaceId:e.id,enabled:!0});let o=new lC({id:e.id,title:e.title,layer:e,map:n,entityStore:this.createFeatureStore(e,n),actionStore:new Em([]),meta:{tableTemplate:void 0}});return yre(o,e,this.layerService,this.ws$),o}createFeatureStore(e,n){let o=new Xp([],{map:n});o.bindLayer(e);let s=new $2({}),l=new oC({}),h=new vI({map:n},this.propertyTypeDetectorService,this.capabilitiesService),p=new V2({}),m=new S_({}),f=this.configService.getConfig("queryOverlayStyle"),g=e.id+".FeatureStore";e.link||(e.options.linkedLayers.links=[{syncedDelete:!0,linkedIds:[g],properties:[ls.VISIBLE]}],e.createLink());let y=new zf({layer:new ll({id:g,linkedLayers:{linkId:g},zIndex:300,source:new As,style:_=>cC(Object.assign({},{feature:_},f?.selection||{})),showInLayerList:!1,exportable:!1,browsable:!1}),map:n,hitTolerance:15,motion:this.zoomAuto?$n.Default:$n.None,many:!0,dragBox:!0});return o.addStrategy(s,!0),o.addStrategy(l,!0),o.addStrategy(h,!0),o.addStrategy(p,!0),o.addStrategy(y,!0),o.addStrategy(m,!1),o.addStrategy(dU(),!0),o}static \u0275fac=function(n){return new(n||r)(xe(wo),xe(Ri),xe(Lu),xe(CI),xe(sy))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),jEe=(()=>{class r{layerService;storageService;capabilitiesService;styleService;configService;propertyTypeDetectorService;get zoomAuto(){return this.storageService.get("zoomAuto")}ws$=new mt(void 0);constructor(e,n,o,s,l,h){this.layerService=e,this.storageService=n,this.capabilitiesService=o,this.styleService=s,this.configService=l,this.propertyTypeDetectorService=h}createWorkspace(e,n){if(!e.options.workspace||n.layerController.all.find(y=>y.id===e.id+".WfsWorkspaceTableDest")||e.dataSource.options.edition)return;let o=e.dataSource,s=e.id+".WmsWorkspaceTableSrc",l=e.id+".WfsWorkspaceTableDest";e.options.linkedLayers||(e.options.linkedLayers={linkId:s,links:[]});let h={syncedDelete:!0,linkedIds:[l],properties:[ls.ZINDEX,ls.VISIBLE]};e.options.workspace?.minResolution||h.properties.push(ls.MINRESOLUTION);let p=!1;o.options.ogcFilters?.enabled&&(h.properties.push(ls.OGCFILTERS),p=!0),e.options.workspace?.maxResolution||h.properties.push(ls.MAXRESOLUTION);let m=[];e.options.linkedLayers.links&&(m=JSON.parse(JSON.stringify(e.options.linkedLayers.links))),m.push(h),e.options.linkedLayers.linkId=e.options.linkedLayers.linkId?e.options.linkedLayers.linkId:s,e.options.linkedLayers.links=m,e.createLink();let f,g={printable:e.options.workspace?.printable,srcId:e.id,workspaceId:void 0,enabled:!1,queryOptions:{mapQueryOnOpenTab:e.options.workspace?.queryOptions?.mapQueryOnOpenTab,tabQuery:e.options.workspace?.queryOptions?.tabQuery},pageSize:e.options.workspace?.pageSize,pageSizeOptions:e.options.workspace?.pageSizeOptions};return this.layerService.createAsyncLayer({title:e.title,parentId:e.options.parentId,isIgoInternalLayer:!0,visible:e.visible,id:l,linkedLayers:{linkId:l},workspace:g,showInLayerList:!1,opacity:0,minResolution:e.options.workspace?.minResolution||e.minResolution||0,maxResolution:e.options.workspace?.maxResolution||e.maxResolution||1/0,style:this.styleService.createStyle({fill:{color:"rgba(255, 255, 255, 0.01)"},stroke:{color:"rgba(255, 255, 255, 0.01)"},circle:{fill:{color:"rgba(255, 255, 255, 0.01)"},stroke:{color:"rgba(255, 255, 255, 0.01)"},radius:5}}),sourceOptions:{download:o.options.download,type:"wfs",url:o.options.urlWfs||o.options.url,queryable:!0,relations:o.options.relations,queryTitle:o.options.queryTitle,queryFormatAsWms:e.options.workspace?.enabled?o.options.queryFormatAsWms:!0,params:o.options.paramsWFS,ogcFilters:Object.assign({},o.ogcFilters,{enabled:p}),sourceFields:o.options.sourceFields||void 0}}).subscribe(y=>{if(n.layerController.add(y),e.ol.setProperties({linkedLayers:{linkId:e.options.linkedLayers.linkId,links:m}},!1),y.dataSource.ol.refresh(),!!e.options.workspace?.enabled)return f=new lC({id:e.id,title:e.title,layer:y,map:n,entityStore:this.createFeatureStore(y,n),actionStore:new Em([]),meta:{tableTemplate:void 0}}),yre(f,y,this.layerService,this.ws$),y.options.workspace.workspaceId=y.id,e.options.workspace=Object.assign({},e.options.workspace,{enabled:!0,srcId:e.id,workspaceId:y.id,queryOptions:{mapQueryOnOpenTab:e.options.workspace?.queryOptions?.mapQueryOnOpenTab,tabQuery:e.options.workspace?.queryOptions?.tabQuery},pageSize:e.options.workspace?.pageSize,pageSizeOptions:e.options.workspace?.pageSizeOptions}),delete o.options.download,f}),f}createFeatureStore(e,n){let o=new Xp([],{map:n});o.bindLayer(e);let s=new $2({}),l=new oC({}),h=new vI({map:n},this.propertyTypeDetectorService,this.capabilitiesService),p=new V2({}),m=new S_({}),f=this.configService.getConfig("queryOverlayStyle"),g=e.id+".FeatureStore";e.link||(e.options.linkedLayers.links=[{syncedDelete:!0,linkedIds:[g],properties:[ls.VISIBLE]}],e.createLink());let y=new zf({layer:new ll({id:g,linkedLayers:{linkId:g},zIndex:300,source:new As,style:_=>cC(Object.assign({},{feature:_},f?.selection||{})),showInLayerList:!1,exportable:!1,browsable:!1}),map:n,hitTolerance:15,motion:this.zoomAuto?$n.Default:$n.None,many:!0,dragBox:!0});return o.addStrategy(s,!0),o.addStrategy(l,!0),o.addStrategy(h,!0),o.addStrategy(p,!0),o.addStrategy(y,!0),o.addStrategy(m,!1),o.addStrategy(dU(),!0),o}static \u0275fac=function(n){return new(n||r)(xe(Lu),xe(wo),xe(sy),xe(fb),xe(Ri),xe(CI))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),VEe=(()=>{class r{component;wfsWorkspaceService;wmsWorkspaceService;editionWorkspaceService;featureWorkspaceService;layers$$;entities$$=[];map;changeWorkspace=new it;disableSwitch=new it;relationLayers=new it;rowsInMapExtentCheckCondition=new it;get workspaceStore(){return this.component.store}constructor(e,n,o,s,l){this.component=e,this.wfsWorkspaceService=n,this.wmsWorkspaceService=o,this.editionWorkspaceService=s,this.featureWorkspaceService=l}ngOnInit(){this.layers$$=this.map.layerController.all$.pipe(cr(50)).subscribe(e=>this.onLayersChange(e)),this.featureWorkspaceService.ws$.subscribe(e=>{this.changeWorkspace.emit(e)}),this.wmsWorkspaceService.ws$.subscribe(e=>{this.changeWorkspace.emit(e)}),this.wfsWorkspaceService.ws$.subscribe(e=>{this.changeWorkspace.emit(e)}),this.editionWorkspaceService.ws$.subscribe(e=>{this.changeWorkspace.emit(e)}),this.editionWorkspaceService.adding$.subscribe(e=>{this.disableSwitch.emit(e)}),this.editionWorkspaceService.relationLayers$.subscribe(e=>{this.relationLayers.emit(e)}),this.editionWorkspaceService.rowsInMapExtentCheckCondition$.subscribe(e=>{this.rowsInMapExtentCheckCondition.emit(e)})}ngOnDestroy(){this.layers$$.unsubscribe(),this.entities$$.map(e=>e.unsubscribe())}onLayersChange(e){let n=e.filter(h=>this.layerIsEditable(h)),o=n.map(h=>h.id),s=n.map(h=>this.getOrCreateWorkspace(h)).filter(h=>h!==void 0),l=this.workspaceStore.all().filter(h=>o.indexOf(h.id)<0);l.length>0&&(l.forEach(h=>{h.entityStore.deactivateStrategyOfType(oC),h.deactivate()}),this.workspaceStore.state.updateMany(l,{active:!1,selected:!1}),this.workspaceStore.deleteMany(l)),s.length>0&&this.workspaceStore.insertMany(s)}getOrCreateWorkspace(e){if(this.workspaceStore.get(e.id)===void 0){if(e.dataSource instanceof pb&&e.dataSource.options.edition?.enabled!==!0)return this.wfsWorkspaceService.createWorkspace(e,this.map);if(e.dataSource instanceof Bm&&e.dataSource.options.edition?.enabled!==!0){if(!e.dataSource.options.paramsWFS)return;let o=this.wmsWorkspaceService.createWorkspace(e,this.map);return o?.inResolutionRange$.subscribe(s=>{e.dataSource.options.queryable=!s,o.layer.dataSource.options.queryable=s}),o}else{if(e.dataSource instanceof As&&e.exportable===!0&&e.dataSource.options.edition?.enabled!==!0)return this.featureWorkspaceService.createWorkspace(e,this.map);if(e.dataSource instanceof Bm&&e.dataSource.options.edition?.enabled===!0)return this.editionWorkspaceService.createWorkspace(e,this.map)}}}layerIsEditable(e){if(Ah(e))return!1;let n=e.dataSource;return n instanceof pb||n instanceof As?!0:n instanceof Bm?(n.options||{}).ogcFilters?.enabled||n.options.paramsWFS?.featureTypes!==void 0:!1}static \u0275fac=function(n){return new(n||r)(ie(Cj),ie(BEe),ie(jEe),ie(uU),ie(NEe))};static \u0275dir=Pt({type:r,selectors:[["","igoWorkspaceSelector",""]],inputs:{map:"map"},outputs:{changeWorkspace:"changeWorkspace",disableSwitch:"disableSwitch",relationLayers:"relationLayers",rowsInMapExtentCheckCondition:"rowsInMapExtentCheckCondition"},standalone:!0})}return r})(),Fmt=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({})}return r})(),$Ee=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({providers:[Omt()],imports:[c0e,xAe,Fmt,hP,xAe]})}return r})();var F2=function(r){return r.Layer="layer",r.Group="group",r}(F2||{});var UEe=(()=>{class r{layerService;inRange$=new mt(!0);isPreview$=new mt(!1);isVisible$=new mt(!1);isPreview$$;resolution$$;layers$$;lastTimeoutRequest;layerLegendShown$=new mt(!1);igoLayer$=new mt(void 0);mouseInsideAdd=!1;resolution;catalogAllowLegend=!1;layer;map;added=!1;addedChange=new it;addedLayerIsPreview=new it;get title(){return Im(this.layer)}get icon(){return SP(this.layer)||"layers"}constructor(e){this.layerService=e}ngOnInit(){this.isPreview$$=this.isPreview$.subscribe(e=>this.addedLayerIsPreview.emit(e)),this.layers$$=this.map.layerController.all$.subscribe(()=>{this.isVisible()}),this.resolution$$=this.map.viewController.resolution$.subscribe(e=>{this.isInResolutionsRange(e),this.isVisible()})}ngOnDestroy(){this.isPreview$$.unsubscribe(),this.resolution$$.unsubscribe(),this.layers$$.unsubscribe()}computeTitleTooltip(){let e=this.layer.options;if(!e.tooltip)return Im(this.layer);let n=e.tooltip,o=e.metadata;switch(e.tooltip.type){case P$.TITLE:return this.layer.title;case P$.ABSTRACT:return o&&o.abstract?o.abstract:this.layer.title;case P$.CUSTOM:return n&&n.text?n.text:this.layer.title;default:return this.layer.title}}onMouseEvent(e){this.onToggleClick(e)}askForLegend(){this.layerLegendShown$.next(!this.layerLegendShown$.value),this.layerService.createAsyncLayer(this.layer.options).pipe(So()).subscribe(e=>this.igoLayer$.next(e))}onToggleClick(e){if(typeof this.lastTimeoutRequest<"u"&&clearTimeout(this.lastTimeoutRequest),!(e.type==="mouseenter"&&this.mouseInsideAdd))switch(e.type){case"click":this.isPreview$.value||(this.added?this.remove(e):this.add(e)),this.isPreview$.next(!1);break;case"mouseenter":!this.isPreview$.value&&!this.added&&(this.lastTimeoutRequest=setTimeout(()=>{this.add(e),this.isPreview$.next(!0)},500)),this.mouseInsideAdd=!0;break;case"mouseleave":this.isPreview$.value&&(this.remove(e),this.isPreview$.next(!1)),this.mouseInsideAdd=!1;break;default:break}}add(e){this.added||(this.added=!0,this.addedChange.emit({added:!0,layer:this.layer,event:e}))}remove(e){this.added&&(this.added=!1,this.addedChange.emit({added:!1,layer:this.layer,event:e}))}haveGroup(){return!(!this.layer.address||this.layer.address.split(".").length===1)}isInResolutionsRange(e){let n=!this.layer.options.minResolution||Number.isNaN(this.layer.options.minResolution)?0:this.layer.options.minResolution,o=!this.layer.options.maxResolution||Number.isNaN(this.layer.options.maxResolution)?1/0:this.layer.options.maxResolution;this.inRange$.next(e>=n&&e<=o)}isVisible(){if(this.layer?.id){let e=this.map.layerController.getById(this.layer?.id);this.isVisible$.next(e?.displayed)}}getBadgeIcon(){return this.inRange$.getValue()&&this.isVisible$.getValue()?"":"visibility_off"}computeTooltip(){return this.added?this.isPreview$.value?"igo.geo.catalog.layer.addToMap":this.inRange$.value?this.isVisible$.value?"igo.geo.catalog.layer.removeFromMap":"igo.geo.catalog.layer.removeFromMapNotVisible":"igo.geo.catalog.layer.removeFromMapOutRange":this.inRange$.value?"igo.geo.catalog.layer.addToMap":"igo.geo.catalog.layer.addToMapOutRange"}static \u0275fac=function(n){return new(n||r)(ie(Lu))};static \u0275cmp=gt({type:r,selectors:[["igo-catalog-browser-layer"]],inputs:{resolution:"resolution",catalogAllowLegend:"catalogAllowLegend",layer:"layer",map:"map",added:"added"},outputs:{addedChange:"addedChange",addedLayerIsPreview:"addedLayerIsPreview"},standalone:!0,features:[yt],decls:24,vars:36,consts:[["legend",""],["class","catalog-browser-layer-carret","matListItemIcon","",4,"ngIf"],["matListItemTitle","","matTooltipShowDelay","500",3,"click","ngClass","matTooltip"],["matListItemMeta",""],["disabled","true","mat-icon-button","",4,"ngIf"],[3,"layer"],["mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"mouseenter","mouseleave","click","matTooltip","color"],["aria-hidden","false","matBadge","icon","igoMatBadgeColor","rgba(0,0,0,0.87)","igoMatBadgeBackgroundColor","none","matBadgeSize","small","matBadgePosition","after",3,"igoMatBadgeIcon","igoMatBadgeInverseColor","matBadgeHidden","matBadgeDisabled"],[1,"igo-cataloglayer-legend-container"],[3,"layer",4,"ngIf"],["matListItemIcon","",1,"catalog-browser-layer-carret"],["disabled","true","mat-icon-button",""],["tooltip-position","below","matTooltipShowDelay","500","color","primary",1,"igo-cataloglayer-external-icon",3,"click","matTooltip"]],template:function(n,o){if(n&1){let s=dt();ne(0,"mat-list-item"),We(1,_ht,1,0,"mat-icon",1),ne(2,"span",2),Oe("click",function(){return Re(s),Fe(o.askForLegend())}),Ye(3),ce(),ne(4,"div",3),We(5,yht,4,3,"button",4),wt(6,"igo-metadata-button",5),ne(7,"button",6),Ne(8,"translate"),Ne(9,"async"),Oe("mouseenter",function(h){return Re(s),Fe(o.onMouseEvent(h))})("mouseleave",function(h){return Re(s),Fe(o.onMouseEvent(h))})("click",function(h){return Re(s),Fe(o.onToggleClick(h))}),ne(10,"mat-icon",7),Ne(11,"async"),Ne(12,"async"),Ne(13,"async"),Ne(14,"async"),Ne(15,"async"),Ne(16,"async"),Ye(17),Ne(18,"async"),ce()()()(),ne(19,"div",8,0),We(21,vht,2,3,"igo-layer-legend",9),Ne(22,"async"),Ne(23,"async"),ce()}n&2&&(q(),ee("ngIf",o.haveGroup()),q(),ee("ngClass",o.catalogAllowLegend?"igo-cataloglayer-title":"")("matTooltip",o.computeTitleTooltip()),q(),Qt(" ",o.title," "),q(2),ee("ngIf",o.layer.externalProvider),q(),ee("layer",o.layer),q(),ee("matTooltip",je(8,14,o.computeTooltip()))("color",je(9,16,o.isPreview$)?"":o.added?"warn":""),q(3),ee("igoMatBadgeIcon",o.getBadgeIcon())("igoMatBadgeInverseColor",!0)("matBadgeHidden",je(11,18,o.inRange$)&&je(12,20,o.isVisible$)===!0||je(13,22,o.inRange$)&&!o.added||je(14,24,o.inRange$)&&je(15,26,o.isPreview$))("matBadgeDisabled",je(16,28,o.inRange$)===!1),q(7),Qt(" ",je(18,30,o.isPreview$)?"plus":o.added?"delete":"add"," "),q(4),ee("ngIf",je(22,32,o.layerLegendShown$)&&je(23,34,o.igoLayer$)&&o.catalogAllowLegend))},dependencies:[wu,wf,Am,Tm,CS,gn,jn,er,qr,Er,Ar,bn,Cr,yEe,dF,cF,Pte,KAe,kr,On,hn],styles:[".igo-cataloglayer-title[_ngcontent-%COMP%]{cursor:pointer}.catalog-browser-layer-carret[_ngcontent-%COMP%]{margin-right:16px}.igo-cataloglayer-legend-container[_ngcontent-%COMP%]{padding-left:18px;width:calc(100% - 18px);margin-left:40px}.igo-cataloglayer-external-icon[_ngcontent-%COMP%]{cursor:help}[_nghost-%COMP%]   .mdc-list-item__end[_ngcontent-%COMP%], [_nghost-%COMP%]   .mdc-list-item__start[_ngcontent-%COMP%]{color:#000}"],changeDetection:0})}return r})(),Lmt=(()=>{class r{store=new wd([]);added$=new mt(!1);preview$=new mt(!1);disabled$=new mt(!1);catalog;group;map;collapsed=!0;resolution;catalogAllowLegend=!1;toggleCollapsed=!0;state;addedChange=new it;layerAddedChange=new it;get title(){return this.group.title}ngOnInit(){this.store.load(this.group.items),this.evaluateAdded(),this.evaluateDisabled(this.collapsed),this.group.sortDirection!==void 0&&this.store.view.sort({direction:this.group.sortDirection,valueAccessor:e=>e.title})}ngOnDestroy(){this.store.destroy()}isGroup(e){return e.type===F2.Group}isLayer(e){return e.type===F2.Layer}onToggleClick(e){this.added$.value?this.remove(e):this.add(e)}onToggleCollapsed(e){this.evaluateDisabled(e)}onLayerAddedChange(e){this.layerAddedChange.emit(e),this.tryToggleGroup(e)}add(e){this.added$.next(!0),this.addedChange.emit({added:!0,group:this.group,event:e})}remove(e){this.added$.next(!1),this.addedChange.emit({added:!1,group:this.group,event:e})}onLayerPreview(e){this.preview$.next(e)}tryToggleGroup(e){let n=e.added,o=e.layer;this.store.view.all().filter(l=>l.id!==o.id).map(l=>this.state.get(l).added||!1).every(l=>l===n)?n?this.add(e.event):this.remove(e.event):this.added$.value===!0&&this.added$.next(!1)}evaluateAdded(){let e=this.store.all().every(n=>(this.state.get(n).added||!1)===!0);this.added$.next(e)}evaluateDisabled(e){let n=!1;this.toggleCollapsed===!1&&(n=e),this.disabled$.next(n)}onTitleClick(){this.collapsed=!this.collapsed}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-catalog-browser-group"]],inputs:{catalog:"catalog",group:"group",map:"map",collapsed:"collapsed",resolution:"resolution",catalogAllowLegend:"catalogAllowLegend",toggleCollapsed:"toggleCollapsed",state:"state"},outputs:{addedChange:"addedChange",layerAddedChange:"layerAddedChange"},standalone:!0,features:[yt],decls:16,vars:14,consts:[["notadded",""],["items",""],["matListItemIcon","","igoCollapse","",1,"igo-chevron","catalog-browser-group-carret",3,"toggle","target","collapsed"],["matListItemTitle","","matTooltipShowDelay","500",1,"igo-catalog-group-title",3,"click","matTooltip"],["matListItemMeta",""],["disabled","true","mat-icon-button","",4,"ngIf"],[4,"ngIf","ngIfElse"],["ngFor","",3,"ngForOf"],["disabled","true","mat-icon-button",""],["class","igo-cataloggroup-external-icon","tooltip-position","below","matTooltipShowDelay","500","color","primary",3,"matTooltip","click",4,"ngIf"],["tooltip-position","below","matTooltipShowDelay","500","color","primary",1,"igo-cataloggroup-external-icon",3,"click","matTooltip"],["mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500","color","warn",3,"click","matTooltip","disabled"],["mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"click","matTooltip","disabled"],[4,"ngIf"],["igoListItem","",3,"addedLayerIsPreview","addedChange","layer","resolution","map","catalogAllowLegend","added"]],template:function(n,o){if(n&1){let s=dt();ne(0,"mat-list-item")(1,"mat-icon",2),Oe("toggle",function(h){return Re(s),Fe(o.onToggleCollapsed(h))}),Ye(2," expand_less "),ce(),ne(3,"span",3),Oe("click",function(){return Re(s),Fe(o.onTitleClick())}),Ye(4),ce(),ne(5,"div",4),We(6,wht,2,1,"button",5)(7,Cht,6,6,"ng-container",6),Ne(8,"async"),Ne(9,"async"),We(10,xht,5,6,"ng-template",null,0,Vo),ce()(),ne(12,"div",null,1),We(14,Tht,2,2,"ng-template",7),Ne(15,"async"),ce()}if(n&2){let s=ji(11),l=ji(13);q(),ee("target",l)("collapsed",o.collapsed),q(2),ee("matTooltip",o.title),q(),Si(o.title),q(2),ee("ngIf",o.group.externalProvider),q(),ee("ngIf",je(8,8,o.added$)&&je(9,10,o.preview$)===!1)("ngIfElse",s),q(7),ee("ngForOf",je(15,12,o.store.view.all$()))}},dependencies:[wu,wf,Am,Tm,CS,jn,er,uF,Er,Ar,gn,bn,Cr,Ps,UEe,q1,kr,On,hn],styles:[".igo-catalog-group-title[_ngcontent-%COMP%]{cursor:pointer}.igo-cataloggroup-external-icon[_ngcontent-%COMP%]{cursor:help}.catalog-browser-group-carret[_ngcontent-%COMP%]{margin-right:16px}.igo-catalog-group-title[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]   .mdc-list-item__end[_ngcontent-%COMP%], [_nghost-%COMP%]   .mdc-list-item__start[_ngcontent-%COMP%]{color:#000}"],changeDetection:0})}return r})(),zEe=(()=>{class r{layerService;cdRef;watcher;get resolution$(){return this.map.viewController.resolution$}catalogAllowLegend=!1;catalog;store;map;toggleCollapsedGroup=!0;constructor(e,n){this.layerService=e,this.cdRef=n}ngOnInit(){let e=this.map.layerController.all.filter(o=>Ru(o)).map(o=>({id:o.options.source.id,title:o.title,type:F2.Layer}));this.store.state.updateMany(e,{added:!0},!0),this.catalog&&this.catalog.sortDirection!==void 0&&this.store.view.sort({direction:this.catalog.sortDirection,valueAccessor:o=>o.title});let n=this.catalog?this.catalog.showLegend:!1;this.catalogAllowLegend=n||this.catalogAllowLegend,this.watcher=new bv(this.store,this.cdRef)}ngOnDestroy(){this.watcher.destroy()}isGroup(e){return e.type===F2.Group}isLayer(e){return e.type===F2.Layer}onLayerAddedChange(e){let n=e.layer;this.store.state.update(n,{added:e.added},!1),e.added?this.addLayerToMap(n,e):this.removeLayerFromMap(n)}onGroupAddedChange(e){let n=e.group;this.store.state.update(n,{added:e.added},!1),e.added?this.addGroupToMap(n,e):this.removeGroupFromMap(n)}addLayerToMap(e,n){this.addLayersToMap([e],n)}removeLayerFromMap(e){this.removeLayersFromMap([e])}addLayersToMap(e,n){let o=e.map(s=>(s.options.sourceOptions.optionsFromApi||(s.options.sourceOptions.optionsFromApi=!0),this.catalog.profils?.length&&(s.options.security={profils:this.catalog.profils}),this.layerService.createAsyncLayer(s.options)));UC(...o).subscribe(s=>{n.event.type==="click"&&n.added&&this.map.layersAddedByClick$.next(s),this.store.state.updateMany(e,{added:!0}),this.map.layerController.add(...s.filter(Boolean))})}removeLayersFromMap(e){e.forEach(n=>{if(this.store.state.update(n,{added:!1}),n.options.baseLayer===!0){let o=this.map.layerController.getById(String(n.options.id));o!==void 0&&this.map.layerController.remove(o)}else{let o=this.map.layerController.getById(n.id);o!==void 0&&this.map.layerController.remove(o)}})}sortCatalogItemsByTitle(e,n){let o=e.sort((s,l)=>{let h=s.title.normalize("NFD").replace(/[\u0300-\u036f]/g,""),p=l.title.normalize("NFD").replace(/[\u0300-\u036f]/g,"");return h<p?-1:h>p?1:0});switch(n){case"asc":return o;case"desc":return o.reverse();default:return e}}addGroupToMap(e,n){let o=e.items.filter(s=>{let l=this.store.state.get(s).added||!1;return this.isLayer(s)&&l===!1});e.sortDirection!==void 0&&(o=this.sortCatalogItemsByTitle(o,e.sortDirection)),this.addLayersToMap(o.reverse(),n)}removeGroupFromMap(e){let n=e.items.filter(o=>{let s=this.store.state.get(o).added||!1;return this.isLayer(o)&&s===!0});this.removeLayersFromMap(n)}static \u0275fac=function(n){return new(n||r)(ie(Lu),ie(Ti))};static \u0275cmp=gt({type:r,selectors:[["igo-catalog-browser"]],inputs:{catalogAllowLegend:"catalogAllowLegend",catalog:"catalog",store:"store",map:"map",toggleCollapsedGroup:"toggleCollapsedGroup"},standalone:!0,features:[yt],decls:3,vars:5,consts:[[3,"navigation","selection"],["ngFor","",3,"ngForOf"],[4,"ngIf"],[3,"addedChange","layerAddedChange","catalog","group","map","state","resolution","catalogAllowLegend","collapsed","toggleCollapsed"],["igoListItem","",3,"addedChange","layer","map","resolution","catalogAllowLegend","added"]],template:function(n,o){n&1&&(ne(0,"igo-list",0),We(1,Mht,2,2,"ng-template",1),Ne(2,"async"),ce()),n&2&&(ee("navigation",!1)("selection",!1),q(),ee("ngForOf",je(2,3,o.store.view.all$())))},dependencies:[pF,Ps,gn,Lmt,UEe,q1,kr],encapsulation:2,changeDetection:0})}return r})();var GEe=(()=>{class r{formBuilder;languageService;configService;dialogRef;data;form;defaultAddedCatalogType="wms";addedCatalogType$$;predefinedCatalogsList$=new mt([]);typeCapabilities;predefinedCatalogs=[];store;error=!1;addedCatalog;emailAddress;storeViewAll$$;constructor(e,n,o,s,l){this.formBuilder=e,this.languageService=n,this.configService=o,this.dialogRef=s,this.data=l,this.store=l.store,this.predefinedCatalogs=l.predefinedCatalogs,this.error=l.error,this.addedCatalog=l.addedCatalog,this.form=this.formBuilder.group({id:["",[]],title:["",[]],url:["",[Dl.required]],type:[this.defaultAddedCatalogType,[Dl.required]]})}ngOnInit(){this.store.state.clear(),this.typeCapabilities=Object.keys(Y$),this.addedCatalogType$$=this.form.get("type").valueChanges.subscribe(e=>{e==="wmts"?this.form.get("title").setValidators(Dl.required):this.form.get("title").setValidators([]),this.form.get("title").updateValueAndValidity()}),this.computePredefinedCatalogList(),this.storeViewAll$$=this.store.view.all$().subscribe(()=>this.computePredefinedCatalogList()),this.emailAddress=this.configService.getConfig("emailAddress")}ngOnDestroy(){this.addedCatalogType$$.unsubscribe(),this.storeViewAll$$.unsubscribe()}changeUrlOrTitle(e){this.form.patchValue(e),this.error=!1,this.computePredefinedCatalogList()}computePredefinedCatalogList(){this.predefinedCatalogsList$.next(this.predefinedCatalogs.filter(e=>!this.store.get(e.id)))}addCatalog(e){this.error=!1,this.dialogRef.close(e)}cancel(){this.error=!1,this.dialogRef.close()}static \u0275fac=function(n){return new(n||r)(ie(r_),ie(wn),ie(Ri),ie(Mp),ie(_E,8))};static \u0275cmp=gt({type:r,selectors:[["igo-add-catalog-dialog"]],standalone:!0,features:[yt],decls:34,vars:25,consts:[["auto2","matAutocomplete"],["auto","matAutocomplete"],["mat-dialog-title","",1,"mat-typography"],["mat-dialog-content","",1,"mat-typography"],[1,"igo-form",3,"formGroup"],[1,"igo-input-container"],["type","text","formControlName","title","matInput","",3,"placeholder","matAutocomplete"],[3,"optionSelected"],["matTooltipShowDelay","500",3,"matTooltip","value",4,"ngFor","ngForOf"],["type","text","formControlName","url","placeholder","URL","matInput","",3,"matAutocomplete"],["formControlName","type","placeholder","Type"],[3,"value","click",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-dialog-actions","",2,"justify-content","center"],[1,"igo-form-button-group","add-catalog-button-top-padding"],["mat-raised-button","","type","button",3,"click"],["id","addCatalogBtnDialog","mat-raised-button","","type","button","color","primary",3,"click","disabled"],["matTooltipShowDelay","500",3,"matTooltip","value"],[3,"click","value"],["matListItemTitle",""],[1,"error"]],template:function(n,o){if(n&1){let s=dt();ne(0,"h1",2),Ye(1),Ne(2,"translate"),ce(),ne(3,"div",3)(4,"form",4)(5,"div",5)(6,"mat-form-field"),wt(7,"input",6),Ne(8,"translate"),ne(9,"mat-autocomplete",7,0),Oe("optionSelected",function(h){return Re(s),Fe(o.changeUrlOrTitle(h.option.value))}),We(11,Oht,2,3,"mat-option",8),Ne(12,"async"),ce()()(),ne(13,"div",5)(14,"mat-form-field"),wt(15,"input",9),ne(16,"mat-autocomplete",7,1),Oe("optionSelected",function(h){return Re(s),Fe(o.changeUrlOrTitle(h.option.value))}),We(18,Pht,2,3,"mat-option",8),Ne(19,"async"),ce()()(),ne(20,"div",5)(21,"mat-form-field")(22,"mat-select",10),We(23,Rht,3,2,"mat-option",11),ce()()()(),We(24,Fht,3,4,"span",12)(25,Lht,3,3,"span",12),ce(),ne(26,"div",13)(27,"div",14)(28,"button",15),Oe("click",function(){return Re(s),Fe(o.cancel())}),Ye(29),Ne(30,"translate"),ce(),ne(31,"button",16),Oe("click",function(){return Re(s),Fe(o.addCatalog(o.form.value))}),Ye(32),Ne(33,"translate"),ce()()()}if(n&2){let s=ji(10),l=ji(17);q(),Qt(" ",je(2,13,"igo.geo.catalog.library.addTitle"),`
`),q(3),ee("formGroup",o.form),q(3),Wr("placeholder",je(8,15,"igo.geo.printForm.title")),ee("matAutocomplete",s),q(4),ee("ngForOf",je(12,17,o.predefinedCatalogsList$)),q(4),ee("matAutocomplete",l),q(3),ee("ngForOf",je(19,19,o.predefinedCatalogsList$)),q(5),ee("ngForOf",o.typeCapabilities),q(),ee("ngIf",o.error&&o.addedCatalog&&o.emailAddress),q(),ee("ngIf",o.error&&o.addedCatalog&&!o.emailAddress),q(4),Qt(" ",je(30,21,"igo.geo.catalog.library.cancel")," "),q(2),ee("disabled",!o.form.valid),q(),Qt(" ",je(33,23,"igo.geo.catalog.library.add")," ")}},dependencies:[fv,ff,$l,Vy,eh,sc,Ig,uu,th,Tg,Wa,dc,pu,hu,s1,o1,lc,gf,Ps,cc,Er,Ar,ah,sh,wu,Tm,gn,gv,bn,Ua,kr,On,hn],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.add-catalog-button-top-padding[_ngcontent-%COMP%]{padding-top:25px}.igo-form[_ngcontent-%COMP%]{padding:10px 5px 5px}.igo-form-button-group[_ngcontent-%COMP%]{text-align:center}button[_ngcontent-%COMP%]{cursor:pointer}button#addCatalogBtnDialog[disabled=true][_ngcontent-%COMP%]{cursor:default;background-color:#0000001f;color:#00000042}.error[_ngcontent-%COMP%]{color:red}"]})}return r})(),Nmt=(()=>{class r{catalog;map;catalogRemove=new it;get title(){return Im(this.catalog)}removeCatalogFromLibrary(e){e.stopPropagation(),this.catalogRemove.emit()}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-catalog-library-item"]],inputs:{catalog:"catalog",map:"map"},outputs:{catalogRemove:"catalogRemove"},standalone:!0,features:[yt],decls:7,vars:4,consts:[["matListItemTitle",""],["matListItemMeta",""],["matListItemIcon","","class","igo-external-provider","tooltip-position","below","matTooltipShowDelay","500","color","primary",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500","color","warn",3,"matTooltip","click",4,"ngIf"],["class","igo-blank","disabled","true","mat-icon-button","",4,"ngIf"],["matListItemIcon","","tooltip-position","below","matTooltipShowDelay","500","color","primary",1,"igo-external-provider",3,"click","matTooltip"],["mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500","color","warn",3,"click","matTooltip"],["disabled","true","mat-icon-button","",1,"igo-blank"]],template:function(n,o){n&1&&(ne(0,"mat-list-item")(1,"span",0),Ye(2),ce(),ne(3,"div",1),We(4,Nht,3,3,"mat-icon",2)(5,Bht,4,3,"button",3)(6,jht,2,0,"button",4),ce()()),n&2&&(q(2),Qt(" ",o.title," "),q(2),ee("ngIf",o.catalog.externalProvider),q(),ee("ngIf",o.catalog.removable),q(),ee("ngIf",!o.catalog.removable))},dependencies:[wu,wf,Am,Tm,CS,gn,jn,er,Er,Ar,bn,Cr,On,hn],styles:[".igo-blank[_ngcontent-%COMP%]{cursor:pointer}.igo-external-provider[_ngcontent-%COMP%]{cursor:help}"],changeDetection:0})}return r})(),HEe=(()=>{class r{capabilitiesService;messageService;storageService;dialog;store;map;addCatalogAllowed=!1;predefinedCatalogs=[];catalogSelectChange=new it;submitDisabled=!0;addingCatalog$$;get addedCatalogs(){return this.storageService.get("addedCatalogs")||[]}set addedCatalogs(e){this.storageService.set("addedCatalogs",e)}get selectedCatalogId(){return this.storageService.get("selectedCatalogId",kl.SESSION)}set selectedCatalogId(e){this.storageService.set("selectedCatalogId",e,kl.SESSION)}constructor(e,n,o,s){this.capabilitiesService=e,this.messageService=n,this.storageService=o,this.dialog=s}ngOnInit(){if(this.store.state.clear(),this.selectedCatalogId){let e=this.store.all().find(n=>n.id===this.selectedCatalogId);e&&this.onCatalogSelect(e)}this.predefinedCatalogs=this.predefinedCatalogs.map(e=>(e.id=Hl.hashStr((e.type||"wms")+rC(e.url)),e.title=e.title===""||!e.title?e.url:e.title,e))}getCatalogs(){return this.store.view.all$()}onCatalogSelect(e){this.store.state.update(e,{selected:!0,focused:!0},!0),this.selectedCatalogId=e.id,this.catalogSelectChange.emit({selected:!0,catalog:e})}unsubscribeAddingCatalog(){this.addingCatalog$$&&this.addingCatalog$$.unsubscribe()}addCatalog(e){if(!e)return;let n=Hl.hashStr(e.type+rC(e.url)),o=this.predefinedCatalogs.find(s=>s.id===e.id);if(o&&(e.version=o.version,e.externalProvider=o.externalProvider,n=o.id),this.store.get(n)){this.messageService.alert("igo.geo.catalog.library.inlist.message","igo.geo.catalog.library.inlist.title");return}this.unsubscribeAddingCatalog(),this.addingCatalog$$=this.capabilitiesService.getCapabilities(e.type,e.url,e.version).pipe(Fn(s=>{if(s.error)return this.addCatalogDialog(!0,e),s.error.caught=!0,s;throw this.messageService.error("igo.geo.catalog.unavailable","igo.geo.catalog.unavailableTitle",void 0,{value:e.url}),s})).subscribe(s=>{let l,h;switch(e.type){case"wms":l=e.title||s.Service.Title,h=e.version||s.version;break;case"arcgisrest":case"imagearcgisrest":case"tilearcgisrest":l=e.title||s.mapName;break;case"wmts":l=e.title||s.ServiceIdentification.ServiceType;break;default:l=e.title}let p=Ln.removeUndefined(Object.assign({},o,Ln.removeUndefined({id:n,title:l,url:e.url,type:e.type||"wms",externalProvider:e.externalProvider||!1,removable:!0,version:h})));this.store.insert(p);let m=this.addedCatalogs.slice(0);m.push(p),this.addedCatalogs=m,this.unsubscribeAddingCatalog()})}ngOnDestroy(){this.unsubscribeAddingCatalog()}onCatalogRemove(e){this.store.delete(e),this.addedCatalogs=this.addedCatalogs.slice(0).filter(n=>n.id!==e.id)}addCatalogDialog(e,n){this.dialog.open(GEe,{width:"700px",data:{predefinedCatalogs:this.predefinedCatalogs,store:this.store,error:e,addedCatalog:n}}).afterClosed().subscribe(s=>{this.addCatalog(s)})}static \u0275fac=function(n){return new(n||r)(ie(sy),ie(nl),ie(wo),ie(vu))};static \u0275cmp=gt({type:r,selectors:[["igo-catalog-library"]],inputs:{store:"store",map:"map",addCatalogAllowed:"addCatalogAllowed",predefinedCatalogs:"predefinedCatalogs"},outputs:{catalogSelectChange:"catalogSelectChange"},standalone:!0,features:[yt],decls:4,vars:5,consts:[[3,"navigation"],["ngFor","",3,"ngForOf"],["class","btnAddCatalog",4,"ngIf"],["igoListItem","","color","accent",3,"catalogRemove","select","map","catalog"],[1,"btnAddCatalog"],["mat-raised-button","","matTooltipPosition","above","color","primary",3,"click","matTooltip"]],template:function(n,o){n&1&&(ne(0,"igo-list",0),We(1,Vht,1,2,"ng-template",1),Ne(2,"async"),ce(),We(3,$ht,7,6,"div",2)),n&2&&(ee("navigation",!1),q(),ee("ngForOf",je(2,3,o.getCatalogs())),q(2),ee("ngIf",o.addCatalogAllowed))},dependencies:[pF,Ps,Nmt,q1,gn,bn,Ua,Er,Ar,jn,er,kr,On,hn],styles:["[_nghost-%COMP%]   igo-list[_ngcontent-%COMP%]{height:auto}[_nghost-%COMP%]   .btnAddCatalog[_ngcontent-%COMP%]{justify-content:center;display:flex;margin:30px 0}"],changeDetection:0})}return r})(),Bmt=[HEe,GEe];var _ki=[zEe,...Bmt];function WEe(...r){let i=[{provide:z$,useClass:z$},ipt()];for(let e of r)i.push(...e.providers);return i}var qEe=function(r){return r[r.OSRM=0]="OSRM",r}(qEe||{}),jmt=(()=>{class r extends $F{_http;_config;get options(){return this._options}set options(e){this._options=e}get sourceName(){return this._options.name}set sourceName(e){this._options.name=e}get baseUrl(){return this._options.baseUrl}set baseUrl(e){this._options.baseUrl=e}get url(){return`${this.baseUrl}${this.getEnabledProfile().name}/`}get profiles(){return this._options.profiles}set profiles(e){this._options.profiles=e}_options;constructor(e,n){if(super(),this._http=e,this._config=n,this._options=this._config.getConfig("directionsSources.osrm"),this.baseUrl||(this.baseUrl="/apis/itineraire/route/v1/"),this.sourceName||(this.sourceName="OSRM Qu\xE9bec"),this.profiles)this.profiles.find(o=>o.enabled)||(this.profiles[0].enabled=!0);else{let o={enabled:!0,name:"driving"};this.profiles=[o]}}getSourceName(){return this.sourceName}getEnabledProfile(){return this.profiles.find(e=>e.enabled)}getProfileWithAuthorization(){return this.profiles.find(e=>e.authorization)}route(e,n={}){let o=this.getRouteParams(n);return this.getRoute(e,o)}getRoute(e,n){let o=this.url;return this._http.get(o+e.join(";"),{params:n}).pipe($t(s=>this.extractRoutesData(s)))}extractRoutesData(e){let n=[];return e.routes.forEach(o=>{n.push(this.formatRoute(o,e.waypoints))}),n}getRouteParams(e={}){return e.alternatives=e.alternatives!==void 0?e.alternatives:!0,e.steps=e.steps!==void 0?e.steps:!0,e.geometries=e.geometries!==void 0?e.geometries:"geojson",e.overview=e.overview!==void 0?e.overview:!1,e.continue_straight=e.continue_straight!==void 0?e.continue_straight:!1,new zs({fromObject:{alternatives:e.alternatives?"true":"false",overview:e.overview?"simplified":"full",steps:e.steps?"true":"false",geometries:e.geometries?e.geometries:"geojson",continue_straight:e.continue_straight?"true":"false"}})}formatRoute(e,n){let o=[];return e.legs.forEach(s=>{s.steps.forEach(l=>{o.push(l)})}),{id:Gs(),title:e.legs[0].summary,source:this.url,sourceType:HAe.Route,order:1,format:GAe.GeoJSON,icon:"directions",projection:"EPSG:4326",waypoints:n,distance:e.distance,duration:e.duration,geometry:e.geometry,legs:e.legs,steps:o,weight:e.weight,weight_name:e.weight_name}}static \u0275fac=function(n){return new(n||r)(xe(dr),xe(Ri))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})();function Vmt(r,i){return new jmt(r,i)}function $mt(){return{provide:$F,useFactory:Vmt,multi:!0,deps:[dr,Ri]}}function YEe(){return{kind:qEe.OSRM,providers:[$mt()]}}var vre=(()=>{class r{http;geoDBService;messageService;constructor(e,n,o){this.http=e,this.geoDBService=n,this.messageService=o}load(e){let n;this.http.get(e).pipe(Fn(o=>{throw this.messageService.error(`GeoData file ${e} could not be read`),o.error.caught=!0,o}),ul(o=>{let s=[],l=!0;if(o?.geoDatas){let h=new Date;o?.geoDatas.map(p=>{if(typeof p.triggerDate=="string"&&(p.triggerDate=new Date(Date.parse(p.triggerDate))),h>=p.triggerDate)if(p.action==="update"){let m=`${p.source||k2.System} (${p.triggerDate})`;p.urls.map(f=>{s.push(this.geoDBService.getByID(f).pipe(ul(g=>{if(g?.insertEvent!==m){l&&(n=this.messageService.info("igo.geo.indexedDb.data-download-start",void 0,{disableTimeOut:!0,progressBar:!1,closeButton:!0,tapToDismiss:!1}),l=!1);let y="json",_=this.isZip(f);return _&&(y="arraybuffer"),this.http.get(f,{responseType:y}).pipe(Fn(w=>{throw this.messageService.remove(n.toastId),this.messageService.error("igo.geo.indexedDb.data-download-failed",void 0,{timeOut:4e4}),w.error.caught=!0,w}),ul(w=>{if(_){let A=[this.geoDBService.update(f,f,{},k2.System,m)];return Yne.default.loadAsync(w).then(k=>{k.forEach(R=>{R.toLocaleLowerCase().endsWith(".geojson")&&k.file(R).async("text").then($=>{let H=JSON.parse($),oe=p.zippedBaseUrl||"",se=oe+(oe.endsWith("/")?"":"/")+R;A.push(this.geoDBService.update(se,f,H,k2.System,m))})})}),UC(A)}return this.geoDBService.update(f,f,w,k2.System,m)}))}else return Vt(!1)})))})}else p.action==="delete"&&p.urls.map(m=>{s.push(this.geoDBService.deleteByKey(m))})})}return UC(...s)})).subscribe(()=>{n&&setTimeout(()=>{this.messageService.remove(n.toastId),this.messageService.success("igo.geo.indexedDb.data-download-completed",void 0,{timeOut:4e4})},2500)})}isZip(e){return typeof e=="string"&&/(zip)$/.test(e.toLowerCase())}static \u0275fac=function(n){return new(n||r)(xe(dr),xe(nre),xe(nl))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),gne={name:"igo2DB",version:2,objectStoresMeta:[{store:"geoData",storeConfig:{keyPath:"url",autoIncrement:!1},storeSchema:[{name:"regionID",keypath:"regionID",options:{unique:!1}}]},{store:"layerData",storeConfig:{keyPath:"layerId",autoIncrement:!1},storeSchema:[{name:"layerOptions",keypath:"layerOptions",options:{unique:!1}},{name:"sourceOptions",keypath:"sourceOptions",options:{unique:!1}}]}]};function KEe(r){let i={};for(let e of[gne])Object.assign(i,{[e.name]:gne});return Bl(r?.enable?[mTe(gne),ZAe,nre,QAe,vre]:[])}function ZEe(r,i){let e=[i?.analytics&&{provide:"searchAnalytics",useValue:i.analytics},{provide:yI,useClass:yI},xEe()].filter(Boolean);for(let n of r)e.push(...n.providers);return e}var IAe=(()=>{class r extends Pd{http;languageService;static id="cadastre";static type=Qo;constructor(e,n,o,s){super(s,o),this.http=e,this.languageService=n}getId(){return r.id}getType(){return r.type}getDefaultOptions(){return{title:"Cadastre (Qu\xE9bec)",searchUrl:"https://carto.cptaq.gouv.qc.ca/php/find_lot_v1.php?"}}search(e,n){e=e.replace(/ /g,""),e=e.replace(/,+/g,","),e=e.endsWith(",")?e.slice(0,-1):e,e=e.startsWith(",")?e.substr(1):e;let o=this.computeSearchRequestParams(e,n||{});return!o.get("numero")||!o.get("numero").match(/^[0-9,]+$/g)?Vt([]):this.getCadastre(e,o)}getCadastre(e,n){return this.http.get(this.searchUrl,{params:n,responseType:"text"}).pipe($t(o=>this.extractResults(o,e)))}computeSearchRequestParams(e,n){return new zs({fromObject:Object.assign({numero:e,epsg:"4326"},this.params,n.params||{})})}extractResults(e,n){return e.split("<br />").filter(o=>o.length>0).map(o=>this.dataToResult(o,n))}dataToResult(e,n){let o=e.split(";"),s=o[0],l=o[7],h=this.computeGeometry(l),p={NoLot:s,Route:'<span class="routing"> <u>'+this.languageService.translate.instant("igo.geo.seeRouting")+"</u> </span>"},m=[this.getId(),"cadastre",s].join(".");return{source:this,meta:{dataType:Qo,id:m,title:s,score:_I(n.trim(),s),icon:"location_on"},data:{type:Qo,projection:"EPSG:4326",geometry:h,properties:p,meta:{id:m,title:s}}}}computeGeometry(e){let n=new z_().readFeature(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});return{type:n.getGeometry().getType(),coordinates:n.getGeometry().getCoordinates()}}static \u0275fac=function(n){return new(n||r)(xe(dr),xe(wn),xe(wo),xe("options"))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return po([Cp({maxCacheCount:20,cacheHasher:xx}),xo("design:type",Function),xo("design:paramtypes",[String,zs]),xo("design:returntype",si)],r.prototype,"getCadastre",null),r})();function Umt(r,i,e,n){return new IAe(r,i,e,n.getConfig(`searchSources.${IAe.id}`))}function zmt(){return{provide:Pd,useFactory:Umt,multi:!0,deps:[dr,wn,wo,Ri]}}function QEe(){return{kind:gb.Cadastre,providers:[zmt()]}}var TAe=(()=>{class r extends Pd{http;static id="nominatim";static type=Qo;constructor(e,n,o){super(n,o),this.http=e}getId(){return r.id}getType(){return r.type}getDefaultOptions(){return{title:"Nominatim (OSM)",searchUrl:"https://nominatim.openstreetmap.org/search",settings:[{type:"checkbox",title:"results type",name:"amenity",values:[{title:"igo.geo.search.nominatim.type.food",value:"bar,bbq,biergaten,cafe,drinking_water,fast_food,food_court,ice_cream,pub,restaurant",enabled:!1},{title:"igo.geo.search.nominatim.type.health",value:"baby_hatch,clinic,dentist,doctors,hospital,nursing_home,pharmacy,social_facility,veterinary",enabled:!1},{title:"igo.geo.search.nominatim.type.entertainment",value:"arts_centre,brothel,casino,cinema,community_center_fountain,gambling,nightclub,planetarium                           ,public_bookcase,social_centre,stripclub,studio,swingerclub,theatre,internet_cafe",enabled:!1},{title:"igo.geo.search.nominatim.type.finance",value:"atm,bank,bureau_de_change",enabled:!1}]},{type:"radiobutton",title:"results limit",name:"limit",values:[{title:"10",value:10,enabled:!0},{title:"20",value:20,enabled:!1},{title:"50",value:50,enabled:!1}]},{type:"radiobutton",title:"restrictExtent",name:"countrycodes",values:[{title:"igo.geo.search.nominatim.country.canada",value:"CA",enabled:!0},{title:"igo.geo.search.nominatim.country.all",value:null,enabled:!1}]},{type:"radiobutton",title:"multiple object",name:"dedupe",values:[{title:"igo.geo.search.searchSources.settings.true",value:0,enabled:!1},{title:"igo.geo.search.searchSources.settings.false",value:1,enabled:!0}]}]}}search(e,n){let o=this.computeSearchRequestParams(e,n||{});return o.get("q")?this.getSearch(e,o):Vt([])}getSearch(e,n){return this.http.get(this.searchUrl,{params:n}).pipe($t(o=>this.extractResults(o,e)))}computeSearchRequestParams(e,n){return new zs({fromObject:Object.assign({q:this.computeTerm(e),format:"json"},this.params,n.params||{})})}extractResults(e,n){return e.map(o=>this.dataToResult(o,n))}dataToResult(e,n){let o=this.computeProperties(e),s=this.computeGeometry(e),l=this.computeExtent(e),h=[this.getId(),"place",e.place_id].join(".");return{source:this,meta:{dataType:Qo,id:h,title:e.display_name,icon:"location_on",score:_I(n.trim(),e.display_name)},data:{type:Qo,projection:"EPSG:4326",geometry:s,extent:l,properties:o,meta:{id:h,title:e.display_name}}}}computeProperties(e){return{display_name:e.display_name,place_id:e.place_id,osm_type:e.osm_type,class:e.class,type:e.type}}computeGeometry(e){return{type:"Point",coordinates:[parseFloat(e.lon),parseFloat(e.lat)]}}computeExtent(e){return[parseFloat(e.boundingbox[2]),parseFloat(e.boundingbox[0]),parseFloat(e.boundingbox[3]),parseFloat(e.boundingbox[1])]}computeTerm(e){return this.computeTermTags(e)}computeTermTags(e){let n=super.getHashtagsValid(e,"amenity");return n?n.length?(e=e.replace(/(#[^\s]*)/g,""),n.forEach(o=>{e+="+["+o+"]"}),e):null:this.computeTermSettings(e)}computeTermSettings(e){return this.options.settings.forEach(n=>{n.name==="amenity"&&n.values.forEach(o=>{o.enabled&&typeof o.value=="string"&&o.value.split(",").forEach(l=>{e+="+["+l+"]"})})}),e}static \u0275fac=function(n){return new(n||r)(xe(dr),xe("options"),xe(wo))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return po([Cp({maxCacheCount:20,cacheHasher:xx}),xo("design:type",Function),xo("design:paramtypes",[String,zs]),xo("design:returntype",si)],r.prototype,"getSearch",null),r})();function Gmt(r,i,e){return new TAe(r,i.getConfig(`searchSources.${TAe.id}`),e)}function Hmt(){return{provide:Pd,useFactory:Gmt,multi:!0,deps:[dr,Ri,wo]}}function XEe(){return{kind:gb.Nominatim,providers:[Hmt()]}}var AAe=(()=>{class r extends Pd{http;languageService;static id="storedqueries";static type=Qo;static propertiesBlacklist=["boundedBy","id","coord_x","coord_y"];resultTitle;storedQueriesOptions;multipleFieldsQuery;constructor(e,n,o,s){if(super(s,o),this.http=e,this.languageService=n,this.storedQueriesOptions=s,this.storedQueriesOptions&&!this.storedQueriesOptions.available)return;let l="rtss",h=[{name:"rtss",defaultValue:"-99"},{name:"chainage",defaultValue:"0",splitPrefix:"\\+"}],p="text/xml; subtype=gml/3.1.1",m="EPSG:4326",f="title";if(this.storedQueriesOptions||(console.log(" No configuration for this search source (storedqueries). You will use the default values"),this.storedQueriesOptions={storedquery_id:l,fields:h,outputformat:p,srsname:m,resultTitle:f},this.resultTitle=f,console.log("Default values",this.storedQueriesOptions)),!this.storedQueriesOptions.storedquery_id){let y='Stored Queries :You have to set "storedquery_id" into StoredQueries options. ex: storedquery_id: "nameofstoredquerie"';throw new Error(y)}if(!this.storedQueriesOptions.fields)throw new Error('Stored Queries :You have to set "fields" into options. ex: fields: {"name": "rtss", "defaultValue": "-99"}');if(this.storedQueriesOptions.outputformat=this.storedQueriesOptions.outputformat||"text/xml; subtype=gml/3.1.1",this.storedQueriesOptions.srsname=this.storedQueriesOptions.srsname||"EPSG:4326",this.storedQueriesOptions.storedquery_id.toLowerCase().includes("getfeaturebyid")&&this.storedQueriesOptions.outputformat.toLowerCase().includes("getfeaturebyid")){let y="You must set a geojson format for your stored query. This is due to an openlayers issue)";throw y+=" (wfs 1.1.0 & gml 3.1.1 limitation)",new Error(y)}this.storedQueriesOptions.fields instanceof Array||(this.storedQueriesOptions.fields=[this.storedQueriesOptions.fields]),this.multipleFieldsQuery=this.storedQueriesOptions.fields.length>1,this.storedQueriesOptions.fields.forEach((y,_)=>{if(this.multipleFieldsQuery&&!y.splitPrefix&&_!==0)throw new Error("Stored Queries :You must set a field spliter into your field definition (optional for the first one!)");if(!y.defaultValue)throw new Error("Stored Queries :You must set a field default value into your field definition")}),this.storedQueriesOptions.resultTitle=this.storedQueriesOptions.resultTitle||this.resultTitle}getId(){return r.id}getType(){return r.type}getDefaultOptions(){return{title:"Stored Queries",searchUrl:"https://ws.mapserver.transports.gouv.qc.ca/swtq"}}search(e,n){let o=this.termSplitter(e,this.storedQueriesOptions.fields),s=this.computeRequestParams(n||{},o);return this.options.params=this.options.params?this.options.params:{},this.options.params.page=n.page?String(n.page):"1",this.getSearch(e,s)}getSearch(e,n){return new RegExp(".*?gml.*?","i").test(this.storedQueriesOptions.outputformat)?this.http.get(this.searchUrl,{params:n,responseType:"text"}).pipe($t(o=>{let s=this.extractResults(this.extractWFSData(o),e);if(s.sort((l,h)=>l.meta.score>h.meta.score||l.meta.score===h.meta.score&&l.meta.titleHtml<h.meta.titleHtml?1:-1),s.reverse(),s.length>Number(this.options.params.limit)){let l=Number(this.options.params.limit)*Number(this.options.params.page),h=s.length;s=s.slice(0,l),l<h?s[s.length-1].meta.nextPage=!0:s[s.length-1].meta.nextPage=!1}return s})):this.http.get(this.searchUrl,{params:n}).pipe($t(o=>this.extractResults(this.extractWFSData(o),e)))}getFormatFromOptions(){let e,n=this.storedQueriesOptions.outputformat,o=new RegExp(".*?gml.*?","i");return new RegExp(".*?json.*?","i").test(n)&&(e=hs),o.test(n)&&(e=U_),new e}extractWFSData(e){let n=this.getFormatFromOptions(),o=hs,s=n.readFeatures(e);return JSON.parse(new o().writeFeatures(s))}termSplitter(e,n){let o={},s=e,l=0;return n.forEach(p=>{o[p.name]=p.defaultValue;let m=new RegExp(p.splitPrefix+"(.+)","i");m.test(s)&&(l=p.splitPrefix?l+=1:l,s=s.split(m)[1])}),l===0?(o[n[0].name]=e,o):(s=e,[...n].reverse().forEach(p=>{let m=new RegExp(p.splitPrefix||"(.+)","i");if(s||s!==""){let f=s.split(m);s=f[0],f[1]&&(o[p.name]=f[1].trim())}}),o)}computeRequestParams(e,n){let o=this.storedQueriesOptions.storedquery_id.toLowerCase().includes("getfeaturebyid")?"2.0.0":"1.1.0";return new zs({fromObject:Object.assign({service:"wfs",version:o,request:"GetFeature",storedquery_id:this.storedQueriesOptions.storedquery_id,srsname:this.storedQueriesOptions.srsname,outputformat:this.storedQueriesOptions.outputformat},n,this.params,e.params||{})})}extractResults(e,n){return e.features.map(o=>this.dataToResult(o,n))}dataToResult(e,n){let o=this.computeProperties(e),s=[this.getId(),o.type,e.id].join("."),l=e.properties[this.storedQueriesOptions.resultTitle]?this.storedQueriesOptions.resultTitle:this.resultTitle;return{source:this,data:{type:Qo,projection:"EPSG:4326",geometry:e.geometry,properties:o,meta:{id:s,title:e.properties[l]}},meta:{dataType:Qo,id:s,title:e.properties.title,titleHtml:e.properties[l],icon:"location_on",score:e.properties.title?_I(n.trim(),e.properties.title):_I(n.trim(),e.properties[l])}}}computeProperties(e){return Object.assign({},Ln.removeKeys(e.properties,r.propertiesBlacklist),{Route:'<span class="routing"> <u>'+this.languageService.translate.instant("igo.geo.seeRouting")+"</u> </span>"})}static \u0275fac=function(n){return new(n||r)(xe(dr),xe(wn),xe(wo),xe("options"))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return po([Cp({maxCacheCount:20,cacheHasher:xx}),xo("design:type",Function),xo("design:paramtypes",[String,zs]),xo("design:returntype",si)],r.prototype,"getSearch",null),r})();function Wmt(r,i,e,n){return new AAe(r,i,e,n.getConfig(`searchSources.${AAe.id}`))}function qmt(){return{provide:Pd,useFactory:Wmt,multi:!0,deps:[dr,wn,wo,Ri]}}function JEe(){return{kind:gb.StoredQueries,providers:[qmt()]}}var EAe=(()=>{class r extends Pd{languageService;static id="workspace";static type=Qo;title$=new mt("");get title(){return this.title$.getValue()}constructor(e,n,o){super(o,n),this.languageService=e,this.languageService.translate.get(this.options.title).subscribe(s=>this.title$.next(s))}getId(){return r.id}getType(){return r.type}getDefaultOptions(){return{title:"igo.geo.search.workspace.name",searchUrl:void 0,settings:[{type:"checkbox",title:"datasets",name:"datasets",values:[]},{type:"radiobutton",title:"results limit",name:"limit",values:[{title:"1",value:1,enabled:!1},{title:"5",value:5,enabled:!0},{title:"10",value:10,enabled:!1},{title:"25",value:25,enabled:!1},{title:"50",value:50,enabled:!1}]}]}}search(e,n){let s=this.settings.find(g=>g.name==="limit").values.find(g=>g.enabled).value||5;this.options.params.limit=s.toLocaleString();let l=[];this.options.params.page=(n.page||1).toLocaleString();let h=n.page||1,p=this.options.params.datasets.split(",");this.featureStoresWithIndex.filter(g=>g.searchDocument&&p.includes(g.layer.title)).map(g=>{let y=e;g.searchDocument.search(y,{limit:h*s}).map(_=>{let w=_.field;_.result.map(A=>{let k=g.index.get(A),R=_I(y.trim(),k.properties[w]);l.push({index:A,feature:k,layer:g.layer,field:w,score:R})})})}),l.sort((g,y)=>g.score>y.score?-1:1);let m=[],f=[];return l.map(g=>{m.includes(g.index)||(m.push(g.index),f.push(g))}),Vt(this.extractResults(f.sort((g,y)=>g.score>y.score?-1:1).slice(0,h*s)))}extractResults(e){return e.map(n=>this.dataToResult(n,e.length))}dataToResult(e,n){let o=this.computeProperties(e),s=[this.getId(),o.type,e.index].join("."),l=e.feature.properties[e.field],h="<br><small> "+e.layer.title+"</small>";return{source:this,data:{type:Qo,projection:"EPSG:4326",geometry:e.feature.geometry,extent:e.feature.extent,properties:o,meta:{id:s,title:e.feature.properties[e.field],alias:this.getAllowedFieldsAndAlias(e.layer)}},meta:{dataType:Qo,id:s,title:e.feature.meta.title,titleHtml:l+h,icon:"location_on",score:e.score,nextPage:n%+this.options.params.limit===0&&+this.options.params.page<10}}}getAllowedFieldsAndAlias(e){let n;return e.options?.source?.options?.sourceFields&&e.options.source.options.sourceFields.length>=1&&(n={},e.options.source.options.sourceFields.forEach(o=>{let s=o.alias?o.alias:o.name;n[o.name]=s})),n}computeProperties(e){if(!e.feature.geometry)return Object.assign({type:e.layer.title+"."+e.field},e.feature.properties);let n={GoogleMaps:""},o;if(e.feature.geometry.type==="Point")o=Xd.getGoogleMapsCoordLink(e.feature.geometry.coordinates[0],e.feature.geometry.coordinates[1]);else{let l=jR(e.feature.geometry);o=Xd.getGoogleMapsCoordLink(l.geometry.coordinates[0],l.geometry.coordinates[1])}n.GoogleMaps="<a href="+o+' target="_blank">'+this.languageService.translate.instant("igo.geo.searchByCoord")+"</a>",e.feature.geometry.type==="Point"&&(n.GoogleStreetView=Xd.getGoogleStreetViewLink(e.feature.geometry.coordinates[0],e.feature.geometry.coordinates[1]));let s={Route:'<span class="routing"> <u>'+this.languageService.translate.instant("igo.geo.seeRouting")+"</u> </span>"};return Object.assign({type:e.feature.sourceId},e.feature.properties,n,s)}static \u0275fac=function(n){return new(n||r)(xe(wn),xe(wo),xe("options"))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})();function Ymt(r,i,e){return new EAe(r,i,e.getConfig(`searchSources.${EAe.id}`))}function Kmt(){return{provide:Pd,useFactory:Ymt,multi:!0,deps:[wn,wo,Ri]}}function eMe(){return{kind:gb.Workspace,providers:[Kmt()]}}var tMe=(()=>{class r{wfsWorkspaceService;wmsWorkspaceService;editionWorkspaceService;featureWorkspaceService;layers$$;entities$$=[];map;workspaceStore;constructor(e,n,o,s){this.wfsWorkspaceService=e,this.wmsWorkspaceService=n,this.editionWorkspaceService=o,this.featureWorkspaceService=s}ngOnInit(){this.layers$$=this.map.layerController.all$.pipe(cr(50)).subscribe(e=>this.onLayersChange(e))}ngOnDestroy(){this.layers$$.unsubscribe(),this.entities$$.map(e=>e.unsubscribe())}onLayersChange(e){let n=e.filter(h=>Ru(h)&&this.layerIsEditable(h)),o=n.map(h=>h.id),s=n.map(h=>this.getOrCreateWorkspace(h)).filter(h=>h!==void 0),l=this.workspaceStore.all().filter(h=>o.indexOf(h.id)<0);l.length>0&&(l.forEach(h=>{h.entityStore.deactivateStrategyOfType(oC),h.deactivate()}),this.workspaceStore.state.updateMany(l,{active:!1,selected:!1}),this.workspaceStore.deleteMany(l)),s.length>0&&this.workspaceStore.insertMany(s)}getOrCreateWorkspace(e){if(this.workspaceStore.get(e.id)===void 0){if(e.dataSource instanceof pb&&e.dataSource.options.edition?.enabled!==!0)return this.wfsWorkspaceService.createWorkspace(e,this.map);if(e.dataSource instanceof Bm&&e.dataSource.options.edition?.enabled!==!0){if(!e.dataSource.options.paramsWFS)return;let o=this.wmsWorkspaceService.createWorkspace(e,this.map);return o?.inResolutionRange$.subscribe(s=>{if(e.dataSource.options?.queryFormatAsWms)return o.layer.dataSource.options.queryable=!0,o;e.dataSource.options.queryable=!s,o.layer.dataSource.options.queryable=s}),o}else{if(e.dataSource instanceof As&&e.exportable===!0&&e.dataSource.options.edition?.enabled!==!0)return this.featureWorkspaceService.createWorkspace(e,this.map);if(e.dataSource instanceof Bm&&e.dataSource.options.edition?.enabled===!0)return this.editionWorkspaceService.createWorkspace(e,this.map)}}}layerIsEditable(e){let n=e.dataSource;return n instanceof pb||n instanceof As?!0:n instanceof Bm?(n.options||{}).ogcFilters?.enabled||n.options.paramsWFS?.featureTypes!==void 0:!1}static \u0275fac=function(n){return new(n||r)(ie(BEe),ie(jEe),ie(uU),ie(NEe))};static \u0275dir=Pt({type:r,selectors:[["","igoWorkspaceUpdator",""]],inputs:{map:"map",workspaceStore:"workspaceStore"},standalone:!0})}return r})();function Zmt(r,i){if(r&1){let e=dt();ne(0,"mat-option",5),Oe("click",function(){let o=Re(e).$implicit,s=ae();return Fe(s.zoomOnPoi(o.id))}),ne(1,"div",2),Ye(2),ce(),ne(3,"button",6),Oe("click",function(){let o=Re(e).$implicit,s=ae();return Fe(s.deletePoi(o))}),ne(4,"mat-icon"),Ye(5,"delete"),ce()()()}if(r&2){let e=i.$implicit;ee("value",e.id),q(2),Si(e.title)}}function Qmt(r,i){if(r&1&&wt(0,"igo-poi-button",6),r&2){let e=ae(2);ee("color",e.color)("map",e.map)}}function Xmt(r,i){if(r&1){let e=dt();ne(0,"div",1)(1,"div",2),We(2,Qmt,1,2,"igo-poi-button",3),ne(3,"button",4),Ne(4,"translate"),Oe("click",function(){Re(e);let o=ae();return Fe(o.infoUser())}),ne(5,"mat-icon"),Ye(6,"info"),ce()(),ne(7,"button",4),Ne(8,"translate"),Oe("click",function(){Re(e);let o=ae();return Fe(o.logout())}),ne(9,"mat-icon"),Ye(10,"power_settings_new"),ce()()(),ne(11,"button",5),Oe("click",function(){Re(e);let o=ae();return Fe(o.accountClick())}),ne(12,"mat-icon"),Ye(13,"account_box"),ce()()()}if(r&2){let e=ae();q(),ee("@userButtonState",e.expand?"expand":"collapse"),q(),ee("ngIf",e.hasApi),q(),ee("matTooltip",je(4,7,"igo.context.userButton.infoTitle"))("color",e.color),q(4),ee("matTooltip",je(8,9,"igo.context.userButton.logout"))("color",e.color),q(4),ee("color",e.auth.authenticated?e.color:"warn")}}var _b=function(r){return r[r.null=0]="null",r[r.read=1]="read",r[r.write=2]="write",r}(_b||{});var q2=(()=>{class r{http;authService;languageService;config;messageService;storageService;exportService;route;context$=new mt(void 0);contexts$=new mt({ours:[]});defaultContextId$=new mt(void 0);editedContext$=new mt(void 0);importedContext=[];toolsChanged$=new Dt;mapViewFromRoute={};options;baseUrl;tools;toolbar;get defaultContextUri(){return this.storageService.get("favorite.context.uri")||this._defaultContextUri||this.options.defaultContextUri}set defaultContextUri(e){this._defaultContextUri=e}_defaultContextUri;constructor(e,n,o,s,l,h,p,m){this.http=e,this.authService=n,this.languageService=o,this.config=s,this.messageService=l,this.storageService=h,this.exportService=p,this.route=m,this.options=Object.assign({basePath:"contexts",contextListFile:"_contexts.json",defaultContextUri:"_default"},this.config.getConfig("context")),this.baseUrl=this.options.url??"",this.readParamsFromRoute(),this.authService.hasAuthService?this.authService.logged$.subscribe(f=>{f&&(this.contexts$.pipe(zd(1),So()).subscribe(()=>{this.handleContextsChange()}),this.loadContexts())}):(this.loadContexts(),this.handleContextsChange(!1))}get(e,n){let o=this.baseUrl+"/contexts";return e&&this.authService.authenticated&&(o+="?permission="+e.join(),n&&(o+="&hidden=true")),this.http.get(o)}getById(e){let n=this.baseUrl+"/contexts/"+e;return this.http.get(n)}getDetails(e){let n=`${this.baseUrl}/contexts/${e}/details`;return this.http.get(n).pipe(Fn(o=>{throw this.handleError(o,e),o}))}getDefault(){if(this.authService.authenticated){let e=this.baseUrl+"/contexts/default";return this.http.get(e).pipe(br(n=>{this.defaultContextId$.next(n.id)}))}else{let e=this.storageService.get("favorite.context.uri");return this.defaultContextId$.next(e),this.getContextByUri(e)}}getProfilByUser(){if(this.baseUrl){let e=this.baseUrl+"/profils?";return this.http.get(e)}return Vt([])}setDefault(e){if(this.authService.authenticated){let n=this.baseUrl+"/contexts/default";return this.http.post(n,{defaultContextId:e})}else return this.storageService.set("favorite.context.uri",e),Vt(void 0)}hideContext(e){let n=this.baseUrl+"/contexts/"+e+"/hide";return this.http.post(n,{})}showContext(e){let n=this.baseUrl+"/contexts/"+e+"/show";return this.http.post(n,{})}delete(e,n=!1){let o={ours:[]};if(Object.keys(this.contexts$.value).forEach(l=>o[l]=this.contexts$.value[l].filter(h=>h.id!==e)),n)return this.importedContext=this.importedContext.filter(l=>l.id!==e),Vt(this.contexts$.next(o));let s=this.baseUrl+"/contexts/"+e;return this.http.delete(s).pipe(br(()=>{this.contexts$.next(o)}))}create(e){let n=this.baseUrl+"/contexts";return this.http.post(n,e).pipe($t(o=>(this.authService.authenticated?o.permission=_b[_b.write]:o.permission=_b[_b.read],this.contexts$.value.ours.unshift(o),this.contexts$.next(this.contexts$.value),o)))}clone(e,n={}){let o=this.baseUrl+"/contexts/"+e+"/clone";return this.http.post(o,n).pipe($t(s=>(s.permission=_b[_b.write],this.contexts$.value.ours.unshift(s),this.contexts$.next(this.contexts$.value),s)))}update(e,n){let o=this.baseUrl+"/contexts/"+e;return this.http.patch(o,n)}addToolAssociation(e,n){let o=`${this.baseUrl}/contexts/${e}/tools`,s={toolId:n};return this.http.post(o,s)}deleteToolAssociation(e,n){let o=`${this.baseUrl}/contexts/${e}/tools/${n}`;return this.http.delete(o)}getPermissions(e){let n=this.baseUrl+"/contexts/"+e+"/permissions";return this.http.get(n)}addPermissionAssociation(e,n,o){let s=`${this.baseUrl}/contexts/${e}/permissions`,l={profil:n,typePermission:o};return this.http.post(s,l).pipe(Fn(h=>{throw this.handleError(h,void 0,!0),[h]}))}deletePermissionAssociation(e,n){let o=`${this.baseUrl}/contexts/${e}/permissions/${n}`;return this.http.delete(o)}getLocalContexts(){let e=this.getPath(this.options.contextListFile);return this.http.get(e).pipe($t(n=>({ours:n})))}getLocalContext(e){let n=this.getPath(`${e}.json`);return this.http.get(n).pipe(ga(o=>{if(!o.base)return Vt(o);let s=this.getPath(`${o.base}.json`);return this.http.get(s).pipe($t(l=>{let h=o;return h.map=Ln.mergeDeep(l.map,o.map),h.layers=(l.layers||[]).concat(o.layers||[]).reverse().filter((p,m,f)=>!p.id||f.findIndex(g=>g.id===p.id)===m).reverse(),h.toolbar=o.toolbar||l.toolbar,h.message=o.message||l.message,h.messages=o.messages||l.messages,h.tools=(o.tools||[]).concat(l.tools||[]).filter((p,m,f)=>f.findIndex(g=>g.name===p.name)===m),h}),Fn(l=>{throw this.handleError(l,e),l}))}),Fn(o=>{throw this.handleError(o,e),o}))}loadContexts(e,n){let o;this.baseUrl?o=this.get(e,n):o=this.getLocalContexts(),o.subscribe(s=>{s.ours=this.importedContext.concat(s.ours),this.contexts$.next(s)})}loadDefaultContext(){let e=(n=!1)=>{!n&&this.baseUrl&&this.authService.authenticated?this.getDefault().subscribe(o=>{this.defaultContextUri=o.uri,this.addContextToList(o),this.setContext(o)},()=>{this.defaultContextId$.next(void 0),this.loadContext(this.defaultContextUri)}):this.loadContext(this.defaultContextUri)};this.route&&this.route.options.contextKey?this.route.queryParams.pipe(cr(100)).subscribe(n=>{let o=n[this.route.options.contextKey],s=!1;o&&(this.defaultContextUri=o,s=!0),e(s)}):e()}loadContext(e){let n=this.context$.value;n&&n.uri===e||this.getContextByUri(e).pipe(So()).subscribe(o=>{this.addContextToList(o),this.setContext(o)},()=>{e!==this.options.defaultContextUri&&this.loadContext(this.options.defaultContextUri)})}setContext(e){this.handleContextMessage(e);let n=this.context$.value;if(n&&e&&e.id===n.id){e.map.view.keepCurrentView===void 0&&(e.map.view.keepCurrentView=!0),this.context$.next(e);return}e.map||(e.map={view:{}}),Object.assign(e.map.view,this.mapViewFromRoute),this.context$.next(e)}loadEditedContext(e){this.getContextByUri(e).subscribe(n=>{this.setEditedContext(n)})}setEditedContext(e){this.editedContext$.next(e)}getContextFromMap(e,n){let o=e.ol.getView(),s=o.getProjection().getCode(),l=new Kn(o.getCenter()).transform(s,"EPSG:4326"),h={uri:Gs(),title:"",scope:"private",map:{view:{center:l.getCoordinates(),zoom:o.getZoom(),projection:s,maxZoomOnExtent:e.viewController.maxZoomOnExtent}},layers:[],tools:[]},p=n?[]:[...e.layerController.treeLayers],m=e.layerController.baseLayer;return m&&p.unshift(m),h.layers=p.map(f=>f.saveableOptions).filter(Boolean),h.tools=this.tools.map(f=>({id:String(f.id),global:f.global})),h}getContextFromLayers(e,n,o,s){let l=e.ol.getView(),h=l.getProjection().getCode(),p=new Kn(l.getCenter()).transform(h,"EPSG:4326"),m={uri:o,title:o,map:{view:{center:p.getCoordinates(),zoom:l.getZoom(),projection:h,keepCurrentView:s}},layers:[],toolbar:[],tools:[],extraFeatures:[]};return m.layers=e.layerController.baseLayers.map(f=>({baseLayer:!0,sourceOptions:f.options.sourceOptions,title:f.options.title,visible:f.visible})),n.forEach(f=>{if(Ah(f))return m.layers.push(f.options);if(f.ol.getSource()instanceof tp)if(f.ol.getSource()instanceof tp){let g=this.getExtraFeatures(f);g.name=f.options.title,g.opacity=f.opacity,g.visible=f.visible,m.extraFeatures.push(g)}else{let g=f.options;g.zIndex=f.zIndex,g.visible=f.visible,g.opacity=f.opacity,delete g.source,m.layers.push(g)}else{let g=f.options;g.zIndex=f.zIndex,g.visible=f.visible,g.opacity=f.opacity,delete g.source,m.layers.push(g)}}),m.toolbar=this.toolbar,m.tools=this.tools,m}getExtraFeatures(e){let n=new hs,o;e.ol.getSource()instanceof wV?(o=e.ol.getSource().getFeatures(),o=o.flatMap(p=>p.get("features"))):o=e.ol.getSource().getFeatures();let s=this.exportService.cleanFeatures(o,"GeoJSON","_featureStore"),l=n.writeFeatures(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});return JSON.parse(l)}setTools(e){this.tools=e}setToolbar(e){this.toolbar=e}handleContextMessage(e){this.context$.value&&e.uri&&this.context$.value.uri!==e.uri&&this.messageService.removeAllAreNotError(),e.messages=e.messages?e.messages:[],e.messages.push(e.message),e.messages.map(n=>{n&&this.messageService.message(n)})}getContextByUri(e){if(this.baseUrl){let o;for(let l of Object.keys(this.contexts$.value))if(o=this.contexts$.value[l].find(h=>h.uri===e),o)break;if(o&&o.imported)return Vt(o);let s=o?o.id:e;return this.getDetails(s)}let n=this.contexts$.value.ours.find(o=>o.uri===e&&o.imported===!0);return n?Vt(n):this.getLocalContext(e)}getContextLayers(e){return e.layerController.treeLayers}readParamsFromRoute(){this.route&&this.route.queryParams.subscribe(e=>{let n=this.route.options.centerKey;if(n&&e[n]){let l=e[n];this.mapViewFromRoute.center=l.split(",").map(Number)}let o=this.route.options.projectionKey;if(o&&e[o]){let l=e[o];this.mapViewFromRoute.projection=l}let s=this.route.options.zoomKey;if(s&&e[s]){let l=e[s];this.mapViewFromRoute.zoom=Number(l)}})}getPath(e){return`${this.options.basePath.replace(/\/$/,"")}/${e}`}handleError(e,n,o){let s=this.contexts$.value.ours.find(h=>h.uri===n),l=s?s.title:n;e.error.title=this.languageService.translate.instant("igo.context.contextManager.invalid.title"),e.error.message=this.languageService.translate.instant("igo.context.contextManager.invalid.text",{value:l}),e.error.toDisplay=!0,o&&(e.error.title=this.languageService.translate.instant("igo.context.contextManager.errors.addPermissionTitle"),e.error.message=this.languageService.translate.instant("igo.context.contextManager.errors.addPermission")),this.messageService.error("igo.context.contextManager.errors.addPermission","igo.context.contextManager.errors.addPermissionTitle")}handleContextsChange(e=!0){let n=this.context$.value,o=this.editedContext$.value;(!n||n.uri===this.options.defaultContextUri)&&(e=!1),!e||!this.findContext(n)?(this.defaultContextUri=void 0,this.loadDefaultContext()):(this.getContextByUri(n.uri).pipe(So()).subscribe(l=>{this.toolsChanged$.next(l)}),this.baseUrl&&this.authService.authenticated&&this.getDefault().subscribe());let s=this.findContext(o);(!s||s.permission!=="write")&&this.setEditedContext(void 0)}addContextToList(e){if(!this.findContext(e)){let o={id:e.id,uri:e.uri,title:e.title,scope:e.scope,permission:_b[_b.read]};this.contexts$.value&&this.contexts$.value.public&&(this.contexts$.value.public.push(o),this.contexts$.next(this.contexts$.value))}}findContext(e){if(!e)return!1;let n=this.contexts$.value,o;for(let s of Object.keys(n))if(o=n[s].find(h=>e.id&&h.id===e.id||e.uri&&h.uri===e.uri),o)break;return o}static \u0275fac=function(n){return new(n||r)(xe(dr),xe(ml),xe(wn),xe(Ri),xe(nl),xe(wo),xe(gEe),xe(xS,8))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Jmt(r,i){let e={type:"vector",queryable:!0},n=nMe(r),o=new As(e);o.ol.addFeatures(n);let s,l=!1,h=n[0]?.getKeys()??[];h.includes("_style")||h.includes("_mapTitle")?s=rre():(s=ore(),l=!0);let p=new ll({title:r.name,isIgoInternalLayer:!0,source:o,igoStyle:{editable:l},style:s,visible:r.visible,opacity:r.opacity});return i.layerController.add(p),p}function eft(r,i,e,n){let o,s;if(e.getStyleList(r.name+".styleByAttribute")){let m=e.getStyleList(r.name+".styleByAttribute");o=(f,g)=>n.createStyleByAttribute(f,m,g)}else if(e.getStyleList(r.name+".clusterStyle")){let m=e.getStyleList(r.name+".clusterParam");s=e.getStyleList(r.name+".distance"),o=(f,g)=>{let y=n.createStyle(e.getStyleList(r.name+".clusterStyle"),f,g);return n.createClusterStyle(f,g,m,y)}}else e.getStyleList(r.name+".style")?o=(m,f)=>n.createStyle(e.getStyleList(r.name+".style"),m,f):o=(m,f)=>n.createStyle(e.getStyleList("default.style"),m,f);let l,h=nMe(r);if(e.getStyleList(r.name+".clusterStyle")){let m={distance:s,type:"cluster",queryable:!0};l=new jm(m),l.ol.source.addFeatures(h)}else{let m={type:"vector",queryable:!0};l=new As(m),l.ol.addFeatures(h)}let p=new ll({title:r.name,isIgoInternalLayer:!0,source:l,style:o,opacity:r.opacity,visible:r.visible});return i.layerController.add(p),p}function nMe(r){return new hs().readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}var rMe=(()=>{class r{component;contextService;layerService;configService;styleListService;styleService;route;context$$;queryParams;contextLayers=[];removeLayersOnContextChange=!0;get map(){return this.component.map}constructor(e,n,o,s,l,h,p){this.component=e,this.contextService=n,this.layerService=o,this.configService=s,this.styleListService=l,this.styleService=h,this.route=p}ngOnInit(){this.context$$=this.contextService.context$.pipe(mn(e=>e!==void 0)).subscribe(e=>this.handleContextChange(e)),this.route&&this.route.options.visibleOnLayersKey&&this.route.options.visibleOffLayersKey&&this.route.options.contextKey&&this.route.queryParams.pipe(So(e=>!Ln.isEmpty(e))).subscribe(e=>{this.queryParams=e})}ngOnDestroy(){this.context$$.unsubscribe()}handleContextChange(e){if(e.layers===void 0)return;this.removeLayersOnContextChange===!0?this.map.layerController.reset():this.map.layerController.remove(...this.contextLayers),this.contextLayers=[],this.layerService.unavailableLayers=[];let n=this.configService.getConfig("importExport");this.layerService.createLayers(e.layers,e.uri).subscribe(o=>{this.handleAddLayers(o),e.extraFeatures&&e.extraFeatures.forEach(s=>{n?.importWithStyle?eft(s,this.map,this.styleListService,this.styleService):Jmt(s,this.map)})}),this.configService.getConfig("offline")?.enable&&this.layerService.createAsyncIdbLayers(e.uri).pipe(cr(500)).subscribe(o=>this.handleAddLayers(o))}getFlattenOptions(e){return e.reduce((n,o)=>{if(Kne(o)){let s=o.children?this.getFlattenOptions(o.children):[];n.push(o,...s)}else n.push(o);return n},[])}handleAddLayers(e){let n=e.filter(s=>s).map(s=>(s.visible=this.computeLayerVisibilityFromUrl(s),s)),o=VF(n,"asc");this.contextLayers.concat(o),this.map.layerController.add(...o)}computeLayerVisibilityFromUrl(e){let n=this.queryParams,o=this.contextService.context$.value.uri,s=e.id,l=e.visible;if(!n||!s)return l;let h=n[this.route.options.contextKey];if(h===o||!h){let p="",m="",f=[],g=[];this.route.options.visibleOnLayersKey&&n[this.route.options.visibleOnLayersKey]&&(p=n[this.route.options.visibleOnLayersKey]),this.route.options.visibleOffLayersKey&&n[this.route.options.visibleOffLayersKey]&&(m=n[this.route.options.visibleOffLayersKey]),p==="*"&&(l=!0),m==="*"&&(l=!1),f=p.split(","),g=m.split(","),(f.indexOf(s)>-1||f.indexOf(s.toString())>-1)&&(l=!0),(g.indexOf(s)>-1||g.indexOf(s.toString())>-1)&&(l=!1)}return l}static \u0275fac=function(n){return new(n||r)(ie(m0),ie(q2),ie(Lu),ie(Ri),ie(dre),ie(fb),ie(xS,8))};static \u0275dir=Pt({type:r,selectors:[["","igoLayerContext",""]],inputs:{removeLayersOnContextChange:"removeLayersOnContextChange"},standalone:!0})}return r})(),oMe=(()=>{class r{contextService;mediaService;component;context$$;get map(){return this.component.map}constructor(e,n,o){this.contextService=n,this.mediaService=o,this.component=e}ngOnInit(){this.context$$=this.contextService.context$.pipe(mn(e=>e!==void 0)).subscribe(e=>this.handleContextChange(e))}ngOnDestroy(){this.context$$.unsubscribe()}handleContextChange(e){if(e.map===void 0)return;let n=e.map.view;(!this.component.view||n.keepCurrentView!==!0||e.map.view.projection!==this.map.projection)&&(this.component.view=n),this.component.map.geolocationController&&this.component.map.geolocationController.updateGeolocationOptions(n);let o=e.map.controls;if(!this.component.controls&&o){if(this.mediaService.isMobile()&&typeof o.scaleLine!="boolean"){let s=o.scaleLine;s.minWidth||(s.minWidth=Math.min(64,s.minWidth),o.scaleLine=s)}this.component.controls=o}}static \u0275fac=function(n){return new(n||r)(ie(m0),ie(q2),ie(Ol))};static \u0275dir=Pt({type:r,selectors:[["","igoMapContext",""]],standalone:!0})}return r})();var tft=(()=>{class r{dialogRef;title;constructor(e){this.dialogRef=e}static \u0275fac=function(n){return new(n||r)(ie(Mp))};static \u0275cmp=gt({type:r,selectors:[["igo-poi-dialog"]],standalone:!0,features:[yt],decls:14,vars:14,consts:[["mat-dialog-title","",1,"mat-typography"],["mat-dialog-content",""],["matInput","","required","","autocomplete","off",3,"ngModelChange","placeholder","ngModel"],["mat-dialog-actions",""],["mat-button","","color","primary",3,"click","disabled"],["mat-button","",3,"click"]],template:function(n,o){n&1&&(ne(0,"h1",0),Ye(1),Ne(2,"translate"),ce(),ne(3,"div",1)(4,"mat-form-field")(5,"input",2),Ne(6,"translate"),bs("ngModelChange",function(l){return Os(o.title,l)||(o.title=l),l}),ce()()(),ne(7,"div",3)(8,"button",4),Oe("click",function(){return o.dialogRef.close(o.title)}),Ye(9),Ne(10,"translate"),ce(),ne(11,"button",5),Oe("click",function(){return o.dialogRef.close(!1)}),Ye(12),Ne(13,"translate"),ce()()),n&2&&(q(),Qt(" ",je(2,6,"igo.context.poiButton.dialog.title"),`
`),q(4),ee("placeholder",je(6,8,"igo.context.poiButton.dialog.placeholder")),vs("ngModel",o.title),q(3),ee("disabled",!o.title),q(),Qt(" ",je(10,10,"igo.common.confirmDialog.confirmBtn")," "),q(3),Qt(" ",je(13,12,"igo.common.confirmDialog.cancelBtn")," "))},dependencies:[fv,ff,Wa,dc,pu,hu,$l,eh,sc,Ag,gm,gv,bn,Ua,On,hn],encapsulation:2})}return r})(),iMe=(()=>{class r{http;config;baseUrl;constructor(e,n){this.http=e,this.config=n,this.baseUrl=this.config.getConfig("context.url")}get(){if(!this.baseUrl)return Na;let e=this.baseUrl+"/pois";return this.http.get(e)}delete(e){let n=this.baseUrl+"/pois/"+e;return this.http.delete(n)}create(e){let n=this.baseUrl+"/pois";return this.http.post(n,e)}static \u0275fac=function(n){return new(n||r)(xe(dr),xe(Ri))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),ift=(()=>{class r{dialog;authService;poiService;messageService;languageService;confirmDialogService;get map(){return this._map}set map(e){this._map=e}_map;get color(){return this._color}set color(e){this._color=e}_color;pois;authenticate$$;constructor(e,n,o,s,l,h){this.dialog=e,this.authService=n,this.poiService=o,this.messageService=s,this.languageService=l,this.confirmDialogService=h}ngOnInit(){this.authenticate$$=this.authService.authenticate$.subscribe(e=>{e&&this.getPois()})}ngOnDestroy(){this.authenticate$$.unsubscribe()}deletePoi(e){e&&e.id&&this.confirmDialogService.open(this.languageService.translate.instant("igo.context.poiButton.dialog.confirmDelete")).subscribe(n=>{n&&this.poiService.delete(e.id).subscribe(()=>{this.messageService.info("igo.context.poiButton.dialog.deleteMsg","igo.context.poiButton.dialog.deleteTitle",void 0,{value:e.title}),this.pois=this.pois.filter(o=>o.id!==e.id)},o=>{o.error.title="DELETE Pois",this.messageService.showError(o)})})}getPois(){this.poiService.get().pipe(Tn(1)).subscribe(e=>{this.pois=e},e=>{e.error.title="GET Pois",this.messageService.showError(e)})}createPoi(){let e=this.map.ol.getView(),n=e.getProjection().getCode(),o=new Kn(e.getCenter()).transform(n,"EPSG:4326"),s={title:"",x:o.getCoordinates()[0],y:o.getCoordinates()[1],zoom:e.getZoom()};this.dialog.open(tft,{disableClose:!1}).afterClosed().subscribe(l=>{l&&(s.title=l,this.poiService.create(s).subscribe(h=>{this.messageService.success("igo.context.poiButton.dialog.createMsg","igo.context.poiButton.dialog.createTitle",void 0,{value:s.title}),s.id=h.id,this.pois.push(s)},h=>{h.error.title="POST Pois",this.messageService.showError(h)}))})}zoomOnPoi(e){let n=this.pois.find(s=>s.id===e),o=jE([Number(n.x),Number(n.y)],this.map.projection);this.map.ol.getView().animate({center:o,zoom:n.zoom,duration:500,easing:Nc})}static \u0275fac=function(n){return new(n||r)(ie(vu),ie(ml),ie(iMe),ie(nl),ie(wn),ie(M2))};static \u0275cmp=gt({type:r,selectors:[["igo-poi-button"]],inputs:{map:"map",color:"color"},standalone:!0,features:[Bi([iMe]),yt],decls:11,vars:7,consts:[["floatPlaceholder","never",3,"placeholder"],[1,"poi-option",3,"click"],[1,"titlePoi"],["igoStopPropagation","","mat-icon-button","","color","primary",3,"click"],["class","poi-option",3,"value","click",4,"ngFor","ngForOf"],[1,"poi-option",3,"click","value"],["mat-icon-button","","igoStopPropagation","","color","warn",3,"click"]],template:function(n,o){n&1&&(ne(0,"mat-select",0),Ne(1,"translate"),ne(2,"mat-option",1),Oe("click",function(){return o.createPoi()}),ne(3,"div",2),Ye(4),Ne(5,"translate"),ce(),ne(6,"button",3),Oe("click",function(){return o.createPoi()}),ne(7,"mat-icon"),Ye(8,"add-circle"),ce()()(),wt(9,"mat-divider"),We(10,Zmt,6,2,"mat-option",4),ce()),n&2&&(ee("placeholder",je(1,3,"igo.context.poiButton.placeholder")),q(4),Qt(" ",je(5,5,"igo.context.poiButton.create")," "),q(6),ee("ngForOf",o.pois))},dependencies:[ah,sh,lc,cc,bn,Cr,uv,jn,er,I_,wS,Ps,On,hn],styles:["[_nghost-%COMP%]{background-color:#fff;padding:0 8px;height:100%}mat-select[_ngcontent-%COMP%]{width:150px;height:100%}mat-select[_ngcontent-%COMP%]     .mat-mdc-select-trigger{height:100%}  .poi-option .mdc-list-item__primary-text{display:flex;justify-content:space-between;align-items:center;flex:1;overflow:visible}  .poi-option button{margin-right:-16px}"]})}return r})();function nft(){return Or("userButtonState",[zi("collapse",mi({width:"0",overflow:"hidden",display:"none"})),zi("expand",mi({overflow:"hidden",display:"display"})),ln("collapse => expand",un("200ms")),ln("expand => collapse",un("200ms"))])}var rft=(()=>{class r{dialogRef;auth;storageService;user;exp;constructor(e,n,o){this.dialogRef=e,this.auth=n,this.storageService=o;let s=this.auth.decodeToken();this.user=s?.user,this.exp=new Date(s.exp*1e3).toLocaleString()}clearPreferences(){this.storageService.clear()}static \u0275fac=function(n){return new(n||r)(ie(Mp),ie(ml),ie(wo))};static \u0275cmp=gt({type:r,selectors:[["igo-user-dialog"]],standalone:!0,features:[yt],decls:20,vars:18,consts:[["mat-dialog-title","",1,"mat-typography"],["mat-dialog-content","",1,"mat-typography"],["mat-stroked-button","","color","primary",3,"click"],["mat-dialog-actions","",2,"justify-content","center"],["mat-raised-button","","color","primary",3,"click"]],template:function(n,o){n&1&&(ne(0,"h1",0),Ye(1),Ne(2,"translate"),ce(),ne(3,"div",1)(4,"p"),Ye(5),Ne(6,"translate"),ce(),ne(7,"p"),Ye(8),Ne(9,"translate"),ce(),ne(10,"p"),Ye(11),Ne(12,"translate"),ce(),ne(13,"button",2),Oe("click",function(){return o.clearPreferences()}),Ye(14),Ne(15,"translate"),ce(),wt(16,"br"),ce(),ne(17,"div",3)(18,"button",4),Oe("click",function(){return o.dialogRef.close(!1)}),Ye(19," OK "),ce()()),n&2&&(q(),Qt(" ",je(2,8,"igo.context.userButton.infoTitle"),`
`),q(4),rf(" ",je(6,10,"igo.context.userButton.dialog.user"),": ",o.user.sourceId," "),q(3),rf(" ",je(9,12,"igo.context.userButton.dialog.email"),": ",o.user.email," "),q(3),rf("",je(12,14,"igo.context.userButton.dialog.expiration"),": ",o.exp,""),q(3),Qt(" ",je(15,16,"igo.context.userButton.dialog.clearPreferences")," "))},dependencies:[fv,ff,bn,Ua,gv,On,hn],encapsulation:2})}return r})(),sMe=(()=>{class r{dialog;config;auth;get map(){return this._map}set map(e){this._map=e}_map;get color(){return this._color}set color(e){this._color=e}_color;expand=!1;visible=!1;hasApi=!1;constructor(e,n,o){this.dialog=e,this.config=n,this.auth=o,this.visible=!!this.config.getConfig("auth"),this.hasApi=this.config.getConfig("context.url")!==void 0}accountClick(){this.auth.authenticated?this.expand=!this.expand:this.auth.logout()}logout(){this.expand=!1,this.auth.logout()}infoUser(){this.dialog.open(rft,{disableClose:!1})}static \u0275fac=function(n){return new(n||r)(ie(vu),ie(Ri),ie(ml))};static \u0275cmp=gt({type:r,selectors:[["igo-user-button"]],inputs:{map:"map",color:"color"},standalone:!0,features:[yt],decls:1,vars:1,consts:[["class","igo-user-button-container",4,"ngIf"],[1,"igo-user-button-container"],[1,"igo-user-button-more-container"],[3,"color","map",4,"ngIf"],["mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip","color"],["mat-icon-button","",3,"click","color"],[3,"color","map"]],template:function(n,o){n&1&&We(0,Xmt,14,11,"div",0),n&2&&ee("ngIf",o.visible)},dependencies:[gn,ift,bn,Cr,Er,Ar,jn,er,On,hn],styles:["[_nghost-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mat-ripple[_ngcontent-%COMP%], [_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mdc-icon-button__ripple[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   .igo-user-button-container[_ngcontent-%COMP%]{display:flex;gap:4px}[_nghost-%COMP%]   .igo-user-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff}[_nghost-%COMP%]   .igo-user-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#efefef}[_nghost-%COMP%]   .igo-user-button-more-container[_ngcontent-%COMP%]{display:flex;gap:4px}"],data:{animation:[nft()]}})}return r})();var oft=(r,i)=>({"igo-tool-container-with-toolbar":r,"igo-tool-container-with-animation":i});function sft(r,i){if(r&1&&(wt(0,"igo-actionbar",2),Ne(1,"async"),Ne(2,"async"),Ne(3,"async")),r&2){let e=ae();ee("store",e.actionStore)("withIcon",!0)("withTitle",je(1,6,e.toolbarWithTitle$))("withTooltip",je(2,8,e.toolbarWithTitle$)===!1)("scrollActive",je(3,10,e.toolbarWithTitle$))("horizontal",!1)}}function aft(r,i){if(r&1){let e=dt();ne(0,"div",3),Ne(1,"async"),Oe("@toolSlideInOut.start",function(){Re(e);let o=ae();return Fe(o.onAnimationStart())})("@toolSlideInOut.done",function(){Re(e);let o=ae();return Fe(o.onAnimationComplete())}),wt(2,"igo-dynamic-outlet",4),ce()}if(r&2){let e=i.ngIf,n=ae();ee("ngClass",Oy(6,oft,!n.actionStore.empty,n.animate))("@toolSlideInOut",je(1,4,n.animation$)),q(2),ee("component",e.component)("inputs",n.getToolInputs(e))}}var bre=class{options;activeTool$=new mt(void 0);toolbar$=new mt([]);activeTool$$;activeToolHistory=[];previousToolName;currentToolName;store=new wd([],{getKey:i=>i.name});get tools$(){return this.store.entities$}constructor(i={}){this.options=i,this.setToolbar(i.toolbar),this.initStore()}destroy(){this.activeTool$$.unsubscribe(),this.store.destroy()}getTool(i){return this.store.get(i)}getTools(){return this.store.all()}setTools(i){this.store.load(i)}getToolbar(){return this.toolbar$.getValue()}setToolbar(i){this.toolbar$.next(i||[])}activateTool(i,e={}){let n=this.getTool(i);n!==void 0&&this.store.state.update(n,{active:!0,options:e},!0)}activatePreviousTool(){if(this.activeToolHistory.length<=1){this.deactivateTool();return}let[i]=this.activeToolHistory.splice(-2,2);this.activateTool(i)}getCurrentPreviousToolName(){return[this.previousToolName,this.currentToolName]}deactivateTool(){this.clearActiveToolHistory(),this.store.state.updateAll({active:!1})}initStore(){this.store=new wd([],{getKey:i=>i.name}),this.activeTool$$=this.store.stateView.firstBy$(i=>i.state.active===!0).subscribe(i=>{if(i===void 0){this.setActiveTool(void 0);return}let e=i.entity,n=Object.assign({},e.options||{},i.state.options||{});this.setActiveTool(Object.assign({},e,{options:n}))})}setActiveTool(i){this.activeTool$.next(i),i===void 0?this.clearActiveToolHistory():(this.activeToolHistory=this.activeToolHistory.filter(e=>e!==i.name).concat([i.name]),this.previousToolName=this.currentToolName,this.currentToolName=this.activeToolHistory[this.activeToolHistory.length-1])}clearActiveToolHistory(){this.activeToolHistory=[]}},rL=(()=>{class r{static tools={};toolbox=new bre;static register(e){r.tools[e.name]=e}constructor(){this.toolbox.setTools(this.getTools())}getTool(e){return r.tools[e]}getTools(){return Object.values(r.tools)}static \u0275fac=function(n){return new(n||r)};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function lft(r="300ms",i="ease-in-out"){return Or("toolSlideInOut",[zi("enter",mi({transform:"translate3d(0, 0, 0)"})),ln("void => enter",un(r+" "+i))])}var lMe=(()=>{class r{activeTool$=new mt(void 0);get isActive(){return!!this.activeTool$.value}actionStore=new Em([]);animation$=new mt("none");toolbar$=new mt([]);toolbarWithTitle$=this.activeTool$.pipe($t(e=>e===void 0));activeTool$$;toolbar$$;animating$=new mt(!1);animating$$;toolbox;animate=!1;color="white";get classColorGrey(){return this.color==="grey"}get classColorPrimary(){return this.color==="primary"}ngOnInit(){this.toolbar$$=this.toolbox.toolbar$.subscribe(e=>this.onToolbarChange(e)),this.activeTool$$=this.toolbox.activeTool$.subscribe(e=>this.onActiveToolChange(e))}ngOnDestroy(){this.toolbar$$.unsubscribe(),this.activeTool$$.unsubscribe(),this.actionStore.destroy()}onAnimationStart(){this.animating$.next(!0)}onAnimationComplete(){this.animating$.next(!1)}getToolInputs(e){return e.options||{}}onToolbarChange(e){this.setToolbar(e)}onActiveToolChange(e){if(!this.animate){this.setActiveTool(e);return}this.onAnimate(()=>this.setActiveTool(e))}setActiveTool(e){if(e===void 0)this.actionStore.state.updateAll({active:!1});else{let n=this.actionStore.get(e.name);n!==void 0&&this.actionStore.state.update(n,{active:!0},!0)}this.activeTool$.next(e),this.animate&&this.animation$.next("enter")}setToolbar(e){let n=e.reduce((o,s)=>{let l=this.toolbox.getTool(s);return l===void 0||o.push({id:l.name,title:l.title,icon:l.icon,tooltip:l.tooltip,args:[l,this.toolbox],handler:(h,p)=>{p.activateTool(h.name)},ngClass:h=>this.toolbox.activeTool$.pipe($t(p=>{let m=!1;p!==void 0&&h.name===p.name&&(m=!0);let f=!1;return p!==void 0&&h.name===p.parent&&(f=!0),{"tool-activated":m,"children-tool-activated":f}}))}),o},[]);this.actionStore.load(n),this.toolbar$.next(e)}onAnimate(e){this.unAnimate(),this.animating$$=this.animating$.subscribe(n=>{n||(e.call(this),this.unAnimate())})}unAnimate(){this.animating$$&&this.animating$$.unsubscribe()}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-toolbox"]],hostVars:4,hostBindings:function(n,o){n&2&&oi("color-grey",o.classColorGrey)("color-primary",o.classColorPrimary)},inputs:{toolbox:"toolbox",animate:"animate",color:"color"},standalone:!0,features:[yt],decls:4,vars:6,consts:[[3,"store","withIcon","withTitle","withTooltip","scrollActive","horizontal",4,"ngIf"],["class","igo-tool-container mat-body-1",3,"ngClass",4,"ngIf"],[3,"store","withIcon","withTitle","withTooltip","scrollActive","horizontal"],[1,"igo-tool-container","mat-body-1",3,"ngClass"],[3,"component","inputs"]],template:function(n,o){n&1&&(We(0,sft,4,12,"igo-actionbar",0),Ne(1,"async"),We(2,aft,3,9,"div",1),Ne(3,"async")),n&2&&(ee("ngIf",je(1,2,o.toolbar$).length>0),q(2),ee("ngIf",je(3,4,o.activeTool$)))},dependencies:[gn,EE,qr,ME,kr],styles:["[_nghost-%COMP%]{display:block;position:relative;overflow:hidden;width:100%;height:100%}[_nghost-%COMP%]     .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin:0}[_nghost-%COMP%]   .igo-tool-container[_ngcontent-%COMP%]{position:absolute;inset:0;margin-bottom:0}[_nghost-%COMP%]   .igo-tool-container-with-animation[_ngcontent-%COMP%]{transform:translate3d(100%,0,0)}[_nghost-%COMP%]   .igo-tool-container-with-toolbar[_ngcontent-%COMP%]{left:50px}[_nghost-%COMP%]   igo-actionbar[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   igo-actionbar.with-title[_ngcontent-%COMP%]{width:100%;overflow:auto}[_nghost-%COMP%]   igo-actionbar[_ngcontent-%COMP%]:not(.with-title){width:48px;overflow:hidden;-moz-box-shadow:2px 0px 2px 0px #dddddd;-webkit-box-shadow:2px 0px 2px 0px #dddddd;-o-box-shadow:2px 0px 2px 0px #dddddd;box-shadow:2px 0 2px #ddd}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]   igo-actionbar[_ngcontent-%COMP%]:not(.with-title){overflow:auto}}[_nghost-%COMP%]   igo-dynamic-outlet[_ngcontent-%COMP%]{overflow:auto}"],data:{animation:[lft()]},changeDetection:0})}return r})();var uMe=["top","right","bottom","left"],dMe=["start","end"],Cre=uMe.reduce((r,i)=>r.concat(i,i+"-"+dMe[0],i+"-"+dMe[1]),[]);var cft={left:"right",right:"left",bottom:"top",top:"bottom"},dft={start:"end",end:"start"};function pU(r,i){return typeof r=="function"?r(i):r}function oL(r){return r.split("-")[0]}function dC(r){return r.split("-")[1]}function hMe(r){return r==="x"?"y":"x"}function pMe(r){return r==="y"?"height":"width"}var uft=new Set(["top","bottom"]);function xre(r){return uft.has(oL(r))?"y":"x"}function mMe(r){return hMe(xre(r))}function fMe(r,i,e){e===void 0&&(e=!1);let n=dC(r),o=mMe(r),s=pMe(o),l=o==="x"?n===(e?"end":"start")?"right":"left":n==="start"?"bottom":"top";return i.reference[s]>i.floating[s]&&(l=wre(l)),[l,wre(l)]}function gMe(r){return r.replace(/start|end/g,i=>dft[i])}function wre(r){return r.replace(/left|right|bottom|top/g,i=>cft[i])}function hft(r){return Xe({top:0,right:0,bottom:0,left:0},r)}function _Me(r){return typeof r!="number"?hft(r):{top:r,right:r,bottom:r,left:r}}function mU(r){let{x:i,y:e,width:n,height:o}=r;return{width:n,height:o,top:e,left:i,right:i+n,bottom:e+o,x:i,y:e}}function yMe(r,i){return st(this,null,function*(){var e;i===void 0&&(i={});let{x:n,y:o,platform:s,rects:l,elements:h,strategy:p}=r,{boundary:m="clippingAncestors",rootBoundary:f="viewport",elementContext:g="floating",altBoundary:y=!1,padding:_=0}=pU(i,r),w=_Me(_),k=h[y?g==="floating"?"reference":"floating":g],R=mU(yield s.getClippingRect({element:(e=yield s.isElement==null?void 0:s.isElement(k))==null||e?k:k.contextElement||(yield s.getDocumentElement==null?void 0:s.getDocumentElement(h.floating)),boundary:m,rootBoundary:f,strategy:p})),$=g==="floating"?{x:n,y:o,width:l.floating.width,height:l.floating.height}:l.reference,H=yield s.getOffsetParent==null?void 0:s.getOffsetParent(h.floating),oe=(yield s.isElement==null?void 0:s.isElement(H))?(yield s.getScale==null?void 0:s.getScale(H))||{x:1,y:1}:{x:1,y:1},se=mU(s.convertOffsetParentRelativeRectToViewportRelativeRect?yield s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:$,offsetParent:H,strategy:p}):$);return{top:(R.top-se.top+w.top)/oe.y,bottom:(se.bottom-R.bottom+w.bottom)/oe.y,left:(R.left-se.left+w.left)/oe.x,right:(se.right-R.right+w.right)/oe.x}})}function pft(r,i,e){return(r?[...e.filter(o=>dC(o)===r),...e.filter(o=>dC(o)!==r)]:e.filter(o=>oL(o)===o)).filter(o=>r?dC(o)===r||(i?gMe(o)!==o:!1):!0)}var vMe=function(r){return r===void 0&&(r={}),{name:"autoPlacement",options:r,fn(e){return st(this,null,function*(){var n,o,s;let{rects:l,middlewareData:h,placement:p,platform:m,elements:f}=e,de=pU(r,e),{crossAxis:g=!1,alignment:y,allowedPlacements:_=Cre,autoAlignment:w=!0}=de,A=sm(de,["crossAxis","alignment","allowedPlacements","autoAlignment"]),k=y!==void 0||_===Cre?pft(y||null,w,_):_,R=yield yMe(e,A),$=((n=h.autoPlacement)==null?void 0:n.index)||0,H=k[$];if(H==null)return{};let oe=fMe(H,l,yield m.isRTL==null?void 0:m.isRTL(f.floating));if(p!==H)return{reset:{placement:k[0]}};let se=[R[oL(H)],R[oe[0]],R[oe[1]]],ge=[...((o=h.autoPlacement)==null?void 0:o.overflows)||[],{placement:H,overflows:se}],ue=k[$+1];if(ue)return{data:{index:$+1,overflows:ge},reset:{placement:ue}};let pe=ge.map(te=>{let Se=dC(te.placement);return[te.placement,Se&&g?te.overflows.slice(0,2).reduce((Te,De)=>Te+De,0):te.overflows[0],te.overflows]}).sort((te,Se)=>te[1]-Se[1]),_e=((s=pe.filter(te=>te[2].slice(0,dC(te[0])?2:3).every(Se=>Se<=0))[0])==null?void 0:s[0])||pe[0][0];return _e!==p?{data:{index:$+1,overflows:ge},reset:{placement:_e}}:{}})}}};var mft=new Set(["left","top"]);function fft(r,i){return st(this,null,function*(){let{placement:e,platform:n,elements:o}=r,s=yield n.isRTL==null?void 0:n.isRTL(o.floating),l=oL(e),h=dC(e),p=xre(e)==="y",m=mft.has(l)?-1:1,f=s&&p?-1:1,g=pU(i,r),{mainAxis:y,crossAxis:_,alignmentAxis:w}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return h&&typeof w=="number"&&(_=h==="end"?w*-1:w),p?{x:_*f,y:y*m}:{x:y*m,y:_*f}})}var bMe=function(r){return r===void 0&&(r=0),{name:"offset",options:r,fn(e){return st(this,null,function*(){var n,o;let{x:s,y:l,placement:h,middlewareData:p}=e,m=yield fft(e,r);return h===((n=p.offset)==null?void 0:n.placement)&&(o=p.arrow)!=null&&o.alignmentOffset?{}:{x:s+m.x,y:l+m.y,data:li(Xe({},m),{placement:h})}})}}};var wMe=bMe,CMe=vMe;var gft=function(i){return _ft(i)&&!yft(i)};function _ft(r){return!!r&&typeof r=="object"}function yft(r){var i=Object.prototype.toString.call(r);return i==="[object RegExp]"||i==="[object Date]"||wft(r)}var vft=typeof Symbol=="function"&&Symbol.for,bft=vft?Symbol.for("react.element"):60103;function wft(r){return r.$$typeof===bft}function Cft(r){return Array.isArray(r)?[]:{}}function aL(r,i){return i.clone!==!1&&i.isMergeableObject(r)?J2(Cft(r),r,i):r}function xft(r,i,e){return r.concat(i).map(function(n){return aL(n,e)})}function Sft(r,i){if(!i.customMerge)return J2;var e=i.customMerge(r);return typeof e=="function"?e:J2}function Ift(r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r).filter(function(i){return Object.propertyIsEnumerable.call(r,i)}):[]}function xMe(r){return Object.keys(r).concat(Ift(r))}function UMe(r,i){try{return i in r}catch{return!1}}function Tft(r,i){return UMe(r,i)&&!(Object.hasOwnProperty.call(r,i)&&Object.propertyIsEnumerable.call(r,i))}function Aft(r,i,e){var n={};return e.isMergeableObject(r)&&xMe(r).forEach(function(o){n[o]=aL(r[o],e)}),xMe(i).forEach(function(o){Tft(r,o)||(UMe(r,o)&&e.isMergeableObject(i[o])?n[o]=Sft(o,e)(r[o],i[o],e):n[o]=aL(i[o],e))}),n}function J2(r,i,e){e=e||{},e.arrayMerge=e.arrayMerge||xft,e.isMergeableObject=e.isMergeableObject||gft,e.cloneUnlessOtherwiseSpecified=aL;var n=Array.isArray(i),o=Array.isArray(r),s=n===o;return s?n?e.arrayMerge(r,i,e):Aft(r,i,e):aL(i,e)}J2.all=function(i,e){if(!Array.isArray(i))throw new Error("first argument should be an array");return i.reduce(function(n,o){return J2(n,o,e)},{})};var Eft=J2,jre=Eft;function Mft(r){return r instanceof Element}function Vre(r){return r instanceof HTMLElement}function AI(r){return typeof r=="function"}function lL(r){return typeof r=="string"}function Eh(r){return r===void 0}var cL=class{on(i,e,n,o=!1){return Eh(this.bindings)&&(this.bindings={}),Eh(this.bindings[i])&&(this.bindings[i]=[]),this.bindings[i].push({handler:e,ctx:n,once:o}),this}once(i,e,n){return this.on(i,e,n,!0)}off(i,e){return Eh(this.bindings)||Eh(this.bindings[i])?this:(Eh(e)?delete this.bindings[i]:this.bindings[i].forEach((n,o)=>{n.handler===e&&this.bindings[i].splice(o,1)}),this)}trigger(i,...e){return!Eh(this.bindings)&&this.bindings[i]&&this.bindings[i].forEach((n,o)=>{let{ctx:s,handler:l,once:h}=n,p=s||this;l.apply(p,e),h&&this.bindings[i].splice(o,1)}),this}};function zMe(r){let i=Object.getOwnPropertyNames(r.constructor.prototype);for(let e=0;e<i.length;e++){let n=i[e],o=r[n];n!=="constructor"&&typeof o=="function"&&(r[n]=o.bind(r))}return r}function Dft(r,i){return e=>{if(i.isOpen()){let n=i.el&&e.currentTarget===i.el;(!Eh(r)&&e.currentTarget.matches(r)||n)&&i.tour.next()}}}function kft(r){let{event:i,selector:e}=r.options.advanceOn||{};if(i){let n=Dft(e,r),o;try{o=document.querySelector(e)}catch{}if(!Eh(e)&&!o)return console.error(`No element was found for the selector supplied to advanceOn: ${e}`);o?(o.addEventListener(i,n),r.on("destroy",()=>o.removeEventListener(i,n))):(document.body.addEventListener(i,n,!0),r.on("destroy",()=>document.body.removeEventListener(i,n,!0)))}else return console.error("advanceOn was defined, but no event name was passed.")}function GMe(r){return!lL(r)||r===""?"":r.charAt(r.length-1)!=="-"?`${r}-`:r}function Oft(r){let i=r.options.attachTo||{},e=Object.assign({},i);if(AI(e.element)&&(e.element=e.element.call(r)),lL(e.element)){try{e.element=document.querySelector(e.element)}catch{}e.element||console.error(`The element for this Shepherd step was not found ${i.element}`)}return e}function HMe(r){return r==null?!0:!r.element||!r.on}function $re(){let r=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{let e=(r+Math.random()*16)%16|0;return r=Math.floor(r/16),(i=="x"?e:e&3|8).toString(16)})}function Mh(){return Mh=Object.assign?Object.assign.bind():function(r){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Mh.apply(this,arguments)}function WMe(r,i){if(r==null)return{};var e={},n=Object.keys(r),o,s;for(s=0;s<n.length;s++)o=n[s],!(i.indexOf(o)>=0)&&(e[o]=r[o]);return e}var eD=Math.min,SI=Math.max,_U=Math.round,fU=Math.floor,hC=r=>({x:r,y:r}),Pft={left:"right",right:"left",bottom:"top",top:"bottom"},Rft={start:"end",end:"start"};function Ire(r,i,e){return SI(r,eD(i,e))}function tD(r,i){return typeof r=="function"?r(i):r}function EI(r){return r.split("-")[0]}function xU(r){return r.split("-")[1]}function Ure(r){return r==="x"?"y":"x"}function zre(r){return r==="y"?"height":"width"}function SU(r){return["top","bottom"].includes(EI(r))?"y":"x"}function Gre(r){return Ure(SU(r))}function Fft(r,i,e){e===void 0&&(e=!1);let n=xU(r),o=Gre(r),s=zre(o),l=o==="x"?n===(e?"end":"start")?"right":"left":n==="start"?"bottom":"top";return i.reference[s]>i.floating[s]&&(l=yU(l)),[l,yU(l)]}function Lft(r){let i=yU(r);return[Tre(r),i,Tre(i)]}function Tre(r){return r.replace(/start|end/g,i=>Rft[i])}function Nft(r,i,e){let n=["left","right"],o=["right","left"],s=["top","bottom"],l=["bottom","top"];switch(r){case"top":case"bottom":return e?i?o:n:i?n:o;case"left":case"right":return i?s:l;default:return[]}}function Bft(r,i,e,n){let o=xU(r),s=Nft(EI(r),e==="start",n);return o&&(s=s.map(l=>l+"-"+o),i&&(s=s.concat(s.map(Tre)))),s}function yU(r){return r.replace(/left|right|bottom|top/g,i=>Pft[i])}function jft(r){return Mh({top:0,right:0,bottom:0,left:0},r)}function qMe(r){return typeof r!="number"?jft(r):{top:r,right:r,bottom:r,left:r}}function vU(r){return Mh({},r,{top:r.y,left:r.x,right:r.x+r.width,bottom:r.y+r.height})}var Vft=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],$ft=["mainAxis","crossAxis","limiter"];function SMe(r,i,e){let{reference:n,floating:o}=r,s=SU(i),l=Gre(i),h=zre(l),p=EI(i),m=s==="y",f=n.x+n.width/2-o.width/2,g=n.y+n.height/2-o.height/2,y=n[h]/2-o[h]/2,_;switch(p){case"top":_={x:f,y:n.y-o.height};break;case"bottom":_={x:f,y:n.y+n.height};break;case"right":_={x:n.x+n.width,y:g};break;case"left":_={x:n.x-o.width,y:g};break;default:_={x:n.x,y:n.y}}switch(xU(i)){case"start":_[l]-=y*(e&&m?-1:1);break;case"end":_[l]+=y*(e&&m?-1:1);break}return _}var Uft=(r,i,e)=>st(void 0,null,function*(){let{placement:n="bottom",strategy:o="absolute",middleware:s=[],platform:l}=e,h=s.filter(Boolean),p=yield l.isRTL==null?void 0:l.isRTL(i),m=yield l.getElementRects({reference:r,floating:i,strategy:o}),{x:f,y:g}=SMe(m,n,p),y=n,_={},w=0;for(let A=0;A<h.length;A++){let{name:k,fn:R}=h[A],{x:$,y:H,data:oe,reset:se}=yield R({x:f,y:g,initialPlacement:n,placement:y,strategy:o,middlewareData:_,rects:m,platform:l,elements:{reference:r,floating:i}});if(f=$??f,g=H??g,_=Mh({},_,{[k]:Mh({},_[k],oe)}),se&&w<=50){w++,typeof se=="object"&&(se.placement&&(y=se.placement),se.rects&&(m=se.rects===!0?yield l.getElementRects({reference:r,floating:i,strategy:o}):se.rects),{x:f,y:g}=SMe(m,y,p)),A=-1;continue}}return{x:f,y:g,placement:y,strategy:o,middlewareData:_}});function YMe(r,i){return st(this,null,function*(){var e;i===void 0&&(i={});let{x:n,y:o,platform:s,rects:l,elements:h,strategy:p}=r,{boundary:m="clippingAncestors",rootBoundary:f="viewport",elementContext:g="floating",altBoundary:y=!1,padding:_=0}=tD(i,r),w=qMe(_),k=h[y?g==="floating"?"reference":"floating":g],R=vU(yield s.getClippingRect({element:(e=yield s.isElement==null?void 0:s.isElement(k))==null||e?k:k.contextElement||(yield s.getDocumentElement==null?void 0:s.getDocumentElement(h.floating)),boundary:m,rootBoundary:f,strategy:p})),$=g==="floating"?Mh({},l.floating,{x:n,y:o}):l.reference,H=yield s.getOffsetParent==null?void 0:s.getOffsetParent(h.floating),oe=(yield s.isElement==null?void 0:s.isElement(H))?(yield s.getScale==null?void 0:s.getScale(H))||{x:1,y:1}:{x:1,y:1},se=vU(s.convertOffsetParentRelativeRectToViewportRelativeRect?yield s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:$,offsetParent:H,strategy:p}):$);return{top:(R.top-se.top+w.top)/oe.y,bottom:(se.bottom-R.bottom+w.bottom)/oe.y,left:(R.left-se.left+w.left)/oe.x,right:(se.right-R.right+w.right)/oe.x}})}var zft=r=>({name:"arrow",options:r,fn(e){return st(this,null,function*(){let{x:n,y:o,placement:s,rects:l,platform:h,elements:p}=e,{element:m,padding:f=0}=tD(r,e)||{};if(m==null)return{};let g=qMe(f),y={x:n,y:o},_=Gre(s),w=zre(_),A=yield h.getDimensions(m),k=_==="y",R=k?"top":"left",$=k?"bottom":"right",H=k?"clientHeight":"clientWidth",oe=l.reference[w]+l.reference[_]-y[_]-l.floating[w],se=y[_]-l.reference[_],ge=yield h.getOffsetParent==null?void 0:h.getOffsetParent(m),ue=ge?ge[H]:0;(!ue||!(yield h.isElement==null?void 0:h.isElement(ge)))&&(ue=p.floating[H]||l.floating[w]);let pe=oe/2-se/2,Ce=ue/2-A[w]/2-1,_e=eD(g[R],Ce),de=eD(g[$],Ce),te=_e,Se=ue-A[w]-de,Te=ue/2-A[w]/2+pe,De=Ire(te,Te,Se),Me=xU(s)!=null&&Te!=De&&l.reference[w]/2-(Te<te?_e:de)-A[w]/2<0?Te<te?te-Te:Se-Te:0;return{[_]:y[_]-Me,data:{[_]:De,centerOffset:Te-De+Me}}})}}),Gft=function(i){return i===void 0&&(i={}),{name:"flip",options:i,fn(n){return st(this,null,function*(){var o;let{placement:s,middlewareData:l,rects:h,initialPlacement:p,platform:m,elements:f}=n,g=tD(i,n),{mainAxis:y=!0,crossAxis:_=!0,fallbackPlacements:w,fallbackStrategy:A="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:R=!0}=g,$=WMe(g,Vft),H=EI(s),oe=EI(p)===p,se=yield m.isRTL==null?void 0:m.isRTL(f.floating),ge=w||(oe||!R?[yU(p)]:Lft(p));!w&&k!=="none"&&ge.push(...Bft(p,R,k,se));let ue=[p,...ge],pe=yield YMe(n,$),Ce=[],_e=((o=l.flip)==null?void 0:o.overflows)||[];if(y&&Ce.push(pe[H]),_){let Te=Fft(s,h,se);Ce.push(pe[Te[0]],pe[Te[1]])}if(_e=[..._e,{placement:s,overflows:Ce}],!Ce.every(Te=>Te<=0)){var de,te;let Te=(((de=l.flip)==null?void 0:de.index)||0)+1,De=ue[Te];if(De)return{data:{index:Te,overflows:_e},reset:{placement:De}};let Le=(te=_e.filter(Me=>Me.overflows[0]<=0).sort((Me,ze)=>Me.overflows[1]-ze.overflows[1])[0])==null?void 0:te.placement;if(!Le)switch(A){case"bestFit":{var Se;let Me=(Se=_e.map(ze=>[ze.placement,ze.overflows.filter(Ve=>Ve>0).reduce((Ve,$e)=>Ve+$e,0)]).sort((ze,Ve)=>ze[1]-Ve[1])[0])==null?void 0:Se[0];Me&&(Le=Me);break}case"initialPlacement":Le=p;break}if(s!==Le)return{reset:{placement:Le}}}return{}})}}},Hft=function(i){return i===void 0&&(i={}),{name:"shift",options:i,fn(n){return st(this,null,function*(){let{x:o,y:s,placement:l}=n,h=tD(i,n),{mainAxis:p=!0,crossAxis:m=!1,limiter:f={fn:H=>{let{x:oe,y:se}=H;return{x:oe,y:se}}}}=h,g=WMe(h,$ft),y={x:o,y:s},_=yield YMe(n,g),w=SU(EI(l)),A=Ure(w),k=y[A],R=y[w];if(p){let H=A==="y"?"top":"left",oe=A==="y"?"bottom":"right",se=k+_[H],ge=k-_[oe];k=Ire(se,k,ge)}if(m){let H=w==="y"?"top":"left",oe=w==="y"?"bottom":"right",se=R+_[H],ge=R-_[oe];R=Ire(se,R,ge)}let $=f.fn(Mh({},n,{[A]:k,[w]:R}));return Mh({},$,{data:{x:$.x-o,y:$.y-s}})})}}},Wft=function(i){return i===void 0&&(i={}),{options:i,fn(e){let{x:n,y:o,placement:s,rects:l,middlewareData:h}=e,{offset:p=0,mainAxis:m=!0,crossAxis:f=!0}=tD(i,e),g={x:n,y:o},y=SU(s),_=Ure(y),w=g[_],A=g[y],k=tD(p,e),R=typeof k=="number"?{mainAxis:k,crossAxis:0}:Mh({mainAxis:0,crossAxis:0},k);if(m){let oe=_==="y"?"height":"width",se=l.reference[_]-l.floating[oe]+R.mainAxis,ge=l.reference[_]+l.reference[oe]-R.mainAxis;w<se?w=se:w>ge&&(w=ge)}if(f){var $,H;let oe=_==="y"?"width":"height",se=["top","left"].includes(EI(s)),ge=l.reference[y]-l.floating[oe]+(se&&(($=h.offset)==null?void 0:$[y])||0)+(se?0:R.crossAxis),ue=l.reference[y]+l.reference[oe]+(se?0:((H=h.offset)==null?void 0:H[y])||0)-(se?R.crossAxis:0);A<ge?A=ge:A>ue&&(A=ue)}return{[_]:w,[y]:A}}}};function pC(r){return KMe(r)?(r.nodeName||"").toLowerCase():"#document"}function Vm(r){var i;return(r==null||(i=r.ownerDocument)==null?void 0:i.defaultView)||window}function vb(r){var i;return(i=(KMe(r)?r.ownerDocument:r.document)||window.document)==null?void 0:i.documentElement}function KMe(r){return r instanceof Node||r instanceof Vm(r).Node}function yb(r){return r instanceof Element||r instanceof Vm(r).Element}function ay(r){return r instanceof HTMLElement||r instanceof Vm(r).HTMLElement}function IMe(r){return typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof Vm(r).ShadowRoot}function hL(r){let{overflow:i,overflowX:e,overflowY:n,display:o}=Gf(r);return/auto|scroll|overlay|hidden|clip/.test(i+n+e)&&!["inline","contents"].includes(o)}function qft(r){return["table","td","th"].includes(pC(r))}function Hre(r){let i=Wre(),e=Gf(r);return e.transform!=="none"||e.perspective!=="none"||(e.containerType?e.containerType!=="normal":!1)||!i&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!i&&(e.filter?e.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(e.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(e.contain||"").includes(n))}function Yft(r){let i=iD(r);for(;ay(i)&&!IU(i);){if(Hre(i))return i;i=iD(i)}return null}function Wre(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function IU(r){return["html","body","#document"].includes(pC(r))}function Gf(r){return Vm(r).getComputedStyle(r)}function TU(r){return yb(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.pageXOffset,scrollTop:r.pageYOffset}}function iD(r){if(pC(r)==="html")return r;let i=r.assignedSlot||r.parentNode||IMe(r)&&r.host||vb(r);return IMe(i)?i.host:i}function ZMe(r){let i=iD(r);return IU(i)?r.ownerDocument?r.ownerDocument.body:r.body:ay(i)&&hL(i)?i:ZMe(i)}function bU(r,i){var e;i===void 0&&(i=[]);let n=ZMe(r),o=n===((e=r.ownerDocument)==null?void 0:e.body),s=Vm(n);return o?i.concat(s,s.visualViewport||[],hL(n)?n:[]):i.concat(n,bU(n))}function QMe(r){let i=Gf(r),e=parseFloat(i.width)||0,n=parseFloat(i.height)||0,o=ay(r),s=o?r.offsetWidth:e,l=o?r.offsetHeight:n,h=_U(e)!==s||_U(n)!==l;return h&&(e=s,n=l),{width:e,height:n,$:h}}function qre(r){return yb(r)?r:r.contextElement}function Q2(r){let i=qre(r);if(!ay(i))return hC(1);let e=i.getBoundingClientRect(),{width:n,height:o,$:s}=QMe(i),l=(s?_U(e.width):e.width)/n,h=(s?_U(e.height):e.height)/o;return(!l||!Number.isFinite(l))&&(l=1),(!h||!Number.isFinite(h))&&(h=1),{x:l,y:h}}var Kft=hC(0);function XMe(r){let i=Vm(r);return!Wre()||!i.visualViewport?Kft:{x:i.visualViewport.offsetLeft,y:i.visualViewport.offsetTop}}function Zft(r,i,e){return i===void 0&&(i=!1),!e||i&&e!==Vm(r)?!1:i}function MI(r,i,e,n){i===void 0&&(i=!1),e===void 0&&(e=!1);let o=r.getBoundingClientRect(),s=qre(r),l=hC(1);i&&(n?yb(n)&&(l=Q2(n)):l=Q2(r));let h=Zft(s,e,n)?XMe(s):hC(0),p=(o.left+h.x)/l.x,m=(o.top+h.y)/l.y,f=o.width/l.x,g=o.height/l.y;if(s){let y=Vm(s),_=n&&yb(n)?Vm(n):n,w=y.frameElement;for(;w&&n&&_!==y;){let A=Q2(w),k=w.getBoundingClientRect(),R=Gf(w),$=k.left+(w.clientLeft+parseFloat(R.paddingLeft))*A.x,H=k.top+(w.clientTop+parseFloat(R.paddingTop))*A.y;p*=A.x,m*=A.y,f*=A.x,g*=A.y,p+=$,m+=H,w=Vm(w).frameElement}}return vU({width:f,height:g,x:p,y:m})}function Qft(r){let{rect:i,offsetParent:e,strategy:n}=r,o=ay(e),s=vb(e);if(e===s)return i;let l={scrollLeft:0,scrollTop:0},h=hC(1),p=hC(0);if((o||!o&&n!=="fixed")&&((pC(e)!=="body"||hL(s))&&(l=TU(e)),ay(e))){let m=MI(e);h=Q2(e),p.x=m.x+e.clientLeft,p.y=m.y+e.clientTop}return{width:i.width*h.x,height:i.height*h.y,x:i.x*h.x-l.scrollLeft*h.x+p.x,y:i.y*h.y-l.scrollTop*h.y+p.y}}function Xft(r){return Array.from(r.getClientRects())}function JMe(r){return MI(vb(r)).left+TU(r).scrollLeft}function Jft(r){let i=vb(r),e=TU(r),n=r.ownerDocument.body,o=SI(i.scrollWidth,i.clientWidth,n.scrollWidth,n.clientWidth),s=SI(i.scrollHeight,i.clientHeight,n.scrollHeight,n.clientHeight),l=-e.scrollLeft+JMe(r),h=-e.scrollTop;return Gf(n).direction==="rtl"&&(l+=SI(i.clientWidth,n.clientWidth)-o),{width:o,height:s,x:l,y:h}}function egt(r,i){let e=Vm(r),n=vb(r),o=e.visualViewport,s=n.clientWidth,l=n.clientHeight,h=0,p=0;if(o){s=o.width,l=o.height;let m=Wre();(!m||m&&i==="fixed")&&(h=o.offsetLeft,p=o.offsetTop)}return{width:s,height:l,x:h,y:p}}function tgt(r,i){let e=MI(r,!0,i==="fixed"),n=e.top+r.clientTop,o=e.left+r.clientLeft,s=ay(r)?Q2(r):hC(1),l=r.clientWidth*s.x,h=r.clientHeight*s.y,p=o*s.x,m=n*s.y;return{width:l,height:h,x:p,y:m}}function TMe(r,i,e){let n;if(i==="viewport")n=egt(r,e);else if(i==="document")n=Jft(vb(r));else if(yb(i))n=tgt(i,e);else{let o=XMe(r);n=Mh({},i,{x:i.x-o.x,y:i.y-o.y})}return vU(n)}function e2e(r,i){let e=iD(r);return e===i||!yb(e)||IU(e)?!1:Gf(e).position==="fixed"||e2e(e,i)}function igt(r,i){let e=i.get(r);if(e)return e;let n=bU(r).filter(h=>yb(h)&&pC(h)!=="body"),o=null,s=Gf(r).position==="fixed",l=s?iD(r):r;for(;yb(l)&&!IU(l);){let h=Gf(l),p=Hre(l);!p&&h.position==="fixed"&&(o=null),(s?!p&&!o:!p&&h.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||hL(l)&&!p&&e2e(r,l))?n=n.filter(f=>f!==l):o=h,l=iD(l)}return i.set(r,n),n}function ngt(r){let{element:i,boundary:e,rootBoundary:n,strategy:o}=r,l=[...e==="clippingAncestors"?igt(i,this._c):[].concat(e),n],h=l[0],p=l.reduce((m,f)=>{let g=TMe(i,f,o);return m.top=SI(g.top,m.top),m.right=eD(g.right,m.right),m.bottom=eD(g.bottom,m.bottom),m.left=SI(g.left,m.left),m},TMe(i,h,o));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function rgt(r){return QMe(r)}function ogt(r,i,e){let n=ay(i),o=vb(i),s=e==="fixed",l=MI(r,!0,s,i),h={scrollLeft:0,scrollTop:0},p=hC(0);if(n||!n&&!s)if((pC(i)!=="body"||hL(o))&&(h=TU(i)),n){let m=MI(i,!0,s,i);p.x=m.x+i.clientLeft,p.y=m.y+i.clientTop}else o&&(p.x=JMe(o));return{x:l.left+h.scrollLeft-p.x,y:l.top+h.scrollTop-p.y,width:l.width,height:l.height}}function AMe(r,i){return!ay(r)||Gf(r).position==="fixed"?null:i?i(r):r.offsetParent}function t2e(r,i){let e=Vm(r);if(!ay(r))return e;let n=AMe(r,i);for(;n&&qft(n)&&Gf(n).position==="static";)n=AMe(n,i);return n&&(pC(n)==="html"||pC(n)==="body"&&Gf(n).position==="static"&&!Hre(n))?e:n||Yft(r)||e}var sgt=function(i){return st(this,null,function*(){let{reference:e,floating:n,strategy:o}=i,s=this.getOffsetParent||t2e,l=this.getDimensions;return{reference:ogt(e,yield s(n),o),floating:Mh({x:0,y:0},yield l(n))}})};function agt(r){return Gf(r).direction==="rtl"}var lgt={convertOffsetParentRelativeRectToViewportRelativeRect:Qft,getDocumentElement:vb,getClippingRect:ngt,getOffsetParent:t2e,getElementRects:sgt,getClientRects:Xft,getDimensions:rgt,getScale:Q2,isElement:yb,isRTL:agt};function cgt(r,i){let e=null,n,o=vb(r);function s(){clearTimeout(n),e&&e.disconnect(),e=null}function l(h,p){h===void 0&&(h=!1),p===void 0&&(p=1),s();let{left:m,top:f,width:g,height:y}=r.getBoundingClientRect();if(h||i(),!g||!y)return;let _=fU(f),w=fU(o.clientWidth-(m+g)),A=fU(o.clientHeight-(f+y)),k=fU(m),$={rootMargin:-_+"px "+-w+"px "+-A+"px "+-k+"px",threshold:SI(0,eD(1,p))||1},H=!0;function oe(se){let ge=se[0].intersectionRatio;if(ge!==p){if(!H)return l();ge?l(!1,ge):n=setTimeout(()=>{l(!1,1e-7)},100)}H=!1}try{e=new IntersectionObserver(oe,Mh({},$,{root:o.ownerDocument}))}catch{e=new IntersectionObserver(oe,$)}e.observe(r)}return l(!0),s}function dgt(r,i,e,n){n===void 0&&(n={});let{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:p=!1}=n,m=qre(r),f=o||s?[...m?bU(m):[],...bU(i)]:[];f.forEach(R=>{o&&R.addEventListener("scroll",e,{passive:!0}),s&&R.addEventListener("resize",e)});let g=m&&h?cgt(m,e):null,y=-1,_=null;l&&(_=new ResizeObserver(R=>{let[$]=R;$&&$.target===m&&_&&(_.unobserve(i),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{_&&_.observe(i)})),e()}),m&&!p&&_.observe(m),_.observe(i));let w,A=p?MI(r):null;p&&k();function k(){let R=MI(r);A&&(R.x!==A.x||R.y!==A.y||R.width!==A.width||R.height!==A.height)&&e(),A=R,w=requestAnimationFrame(k)}return e(),()=>{f.forEach(R=>{o&&R.removeEventListener("scroll",e),s&&R.removeEventListener("resize",e)}),g&&g(),_&&_.disconnect(),_=null,p&&cancelAnimationFrame(w)}}var ugt=(r,i,e)=>{let n=new Map,o=Mh({platform:lgt},e),s=Mh({},o.platform,{_c:n});return Uft(r,i,Mh({},o,{platform:s}))};function hgt(r){r.cleanup&&r.cleanup();let i=r._getResolvedAttachToOptions(),e=i.element,n=ygt(i,r),o=HMe(i);return o&&(e=document.body,r.shepherdElementComponent.getElement().classList.add("shepherd-centered")),r.cleanup=dgt(e,r.el,()=>{if(!r.el){r.cleanup();return}fgt(e,r,n,o)}),r.target=i.element,n}function pgt(r,i){return{floatingUIOptions:jre(r.floatingUIOptions||{},i.floatingUIOptions||{})}}function mgt(r){r.cleanup&&r.cleanup(),r.cleanup=null}function fgt(r,i,e,n){return ugt(r,i.el,e).then(ggt(i,n)).then(o=>new Promise(s=>{setTimeout(()=>s(o),300)})).then(o=>{o&&o.el&&o.el.focus({preventScroll:!0})})}function ggt(r,i){return({x:e,y:n,placement:o,middlewareData:s})=>(r.el&&(i?Object.assign(r.el.style,{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}):Object.assign(r.el.style,{position:"absolute",left:`${e}px`,top:`${n}px`}),r.el.dataset.popperPlacement=o,_gt(r.el,s)),r)}function _gt(r,i){let e=r.querySelector(".shepherd-arrow");if(e&&i.arrow){let{x:n,y:o}=i.arrow;Object.assign(e.style,{left:n!=null?`${n}px`:"",top:o!=null?`${o}px`:""})}}function ygt(r,i){let e={strategy:"absolute",middleware:[]},n=vgt(i);return HMe(r)||(e.middleware.push(Gft(),Hft({limiter:Wft(),crossAxis:!0})),n&&e.middleware.push(zft({element:n})),e.placement=r.on),jre(i.options.floatingUIOptions||{},e)}function vgt(r){return r.options.arrow&&r.el?r.el.querySelector(".shepherd-arrow"):!1}function $m(){}function bgt(r,i){for(let e in i)r[e]=i[e];return r}function i2e(r){return r()}function EMe(){return Object.create(null)}function pL(r){r.forEach(i2e)}function Yre(r){return typeof r=="function"}function bb(r,i){return r!=r?i==i:r!==i||r&&typeof r=="object"||typeof r=="function"}function wgt(r){return Object.keys(r).length===0}function nD(r,i){r.appendChild(i)}function g0(r,i,e){r.insertBefore(i,e||null)}function Hf(r){r.parentNode&&r.parentNode.removeChild(r)}function Cgt(r,i){for(let e=0;e<r.length;e+=1)r[e]&&r[e].d(i)}function ly(r){return document.createElement(r)}function MMe(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function n2e(r){return document.createTextNode(r)}function wU(){return n2e(" ")}function xgt(){return n2e("")}function AU(r,i,e,n){return r.addEventListener(i,e,n),()=>r.removeEventListener(i,e,n)}function cl(r,i,e){e==null?r.removeAttribute(i):r.getAttribute(i)!==e&&r.setAttribute(i,e)}var Sgt=["width","height"];function DMe(r,i){let e=Object.getOwnPropertyDescriptors(r.__proto__);for(let n in i)i[n]==null?r.removeAttribute(n):n==="style"?r.style.cssText=i[n]:n==="__value"?r.value=r[n]=i[n]:e[n]&&e[n].set&&Sgt.indexOf(n)===-1?r[n]=i[n]:cl(r,n,i[n])}function Igt(r){return Array.from(r.childNodes)}function Y2(r,i,e){r.classList[e?"add":"remove"](i)}var dL;function sL(r){dL=r}function r2e(){if(!dL)throw new Error("Function called outside component initialization");return dL}function Tgt(r){r2e().$$.on_mount.push(r)}function Kre(r){r2e().$$.after_update.push(r)}var Z2=[],rD=[],X2=[],kMe=[],Agt=Promise.resolve(),Are=!1;function Egt(){Are||(Are=!0,Agt.then(o2e))}function Ere(r){X2.push(r)}var Sre=new Set,K2=0;function o2e(){if(K2!==0)return;let r=dL;do{try{for(;K2<Z2.length;){let i=Z2[K2];K2++,sL(i),Mgt(i.$$)}}catch(i){throw Z2.length=0,K2=0,i}for(sL(null),Z2.length=0,K2=0;rD.length;)rD.pop()();for(let i=0;i<X2.length;i+=1){let e=X2[i];Sre.has(e)||(Sre.add(e),e())}X2.length=0}while(Z2.length);for(;kMe.length;)kMe.pop()();Are=!1,Sre.clear(),sL(r)}function Mgt(r){if(r.fragment!==null){r.update(),pL(r.before_update);let i=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,i),r.after_update.forEach(Ere)}}function Dgt(r){let i=[],e=[];X2.forEach(n=>r.indexOf(n)===-1?i.push(n):e.push(n)),e.forEach(n=>n()),X2=i}var gU=new Set,xI;function II(){xI={r:0,c:[],p:xI}}function TI(){xI.r||pL(xI.c),xI=xI.p}function Ys(r,i){r&&r.i&&(gU.delete(r),r.i(i))}function Bc(r,i,e,n){if(r&&r.o){if(gU.has(r))return;gU.add(r),xI.c.push(()=>{gU.delete(r),n&&(e&&r.d(1),n())}),r.o(i)}else n&&n()}function kgt(r,i){let e={},n={},o={$$scope:1},s=r.length;for(;s--;){let l=r[s],h=i[s];if(h){for(let p in l)p in h||(n[p]=1);for(let p in h)o[p]||(e[p]=h[p],o[p]=1);r[s]=h}else for(let p in l)o[p]=1}for(let l in n)l in e||(e[l]=void 0);return e}function DI(r){r&&r.c()}function mC(r,i,e,n){let{fragment:o,after_update:s}=r.$$;o&&o.m(i,e),n||Ere(()=>{let l=r.$$.on_mount.map(i2e).filter(Yre);r.$$.on_destroy?r.$$.on_destroy.push(...l):pL(l),r.$$.on_mount=[]}),s.forEach(Ere)}function fC(r,i){let e=r.$$;e.fragment!==null&&(Dgt(e.after_update),pL(e.on_destroy),e.fragment&&e.fragment.d(i),e.on_destroy=e.fragment=null,e.ctx=[])}function Ogt(r,i){r.$$.dirty[0]===-1&&(Z2.push(r),Egt(),r.$$.dirty.fill(0)),r.$$.dirty[i/31|0]|=1<<i%31}function wb(r,i,e,n,o,s,l,h=[-1]){let p=dL;sL(r);let m=r.$$={fragment:null,ctx:[],props:s,update:$m,not_equal:o,bound:EMe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(p?p.$$.context:[])),callbacks:EMe(),dirty:h,skip_bound:!1,root:i.target||p.$$.root};l&&l(m.root);let f=!1;if(m.ctx=e?e(r,i.props||{},(g,y,..._)=>{let w=_.length?_[0]:y;return m.ctx&&o(m.ctx[g],m.ctx[g]=w)&&(!m.skip_bound&&m.bound[g]&&m.bound[g](w),f&&Ogt(r,g)),y}):[],m.update(),f=!0,pL(m.before_update),m.fragment=n?n(m.ctx):!1,i.target){if(i.hydrate){let g=Igt(i.target);m.fragment&&m.fragment.l(g),g.forEach(Hf)}else m.fragment&&m.fragment.c();i.intro&&Ys(r.$$.fragment),mC(r,i.target,i.anchor,i.customElement),o2e()}sL(p)}var f0=class{$destroy(){fC(this,1),this.$destroy=$m}$on(i,e){if(!Yre(e))return $m;let n=this.$$.callbacks[i]||(this.$$.callbacks[i]=[]);return n.push(e),()=>{let o=n.indexOf(e);o!==-1&&n.splice(o,1)}}$set(i){this.$$set&&!wgt(i)&&(this.$$.skip_bound=!0,this.$$set(i),this.$$.skip_bound=!1)}};function Pgt(r){let i,e,n,o,s;return{c(){i=ly("button"),cl(i,"aria-label",e=r[3]?r[3]:null),cl(i,"class",n=`${r[1]||""} shepherd-button ${r[4]?"shepherd-button-secondary":""}`),i.disabled=r[2],cl(i,"tabindex","0")},m(l,h){g0(l,i,h),i.innerHTML=r[5],o||(s=AU(i,"click",function(){Yre(r[0])&&r[0].apply(this,arguments)}),o=!0)},p(l,[h]){r=l,h&32&&(i.innerHTML=r[5]),h&8&&e!==(e=r[3]?r[3]:null)&&cl(i,"aria-label",e),h&18&&n!==(n=`${r[1]||""} shepherd-button ${r[4]?"shepherd-button-secondary":""}`)&&cl(i,"class",n),h&4&&(i.disabled=r[2])},i:$m,o:$m,d(l){l&&Hf(i),o=!1,s()}}}function Rgt(r,i,e){let{config:n,step:o}=i,s,l,h,p,m,f;function g(y){return AI(y)?y=y.call(o):y}return r.$$set=y=>{"config"in y&&e(6,n=y.config),"step"in y&&e(7,o=y.step)},r.$$.update=()=>{r.$$.dirty&192&&(e(0,s=n.action?n.action.bind(o.tour):null),e(1,l=n.classes),e(2,h=n.disabled?g(n.disabled):!1),e(3,p=n.label?g(n.label):null),e(4,m=n.secondary),e(5,f=n.text?g(n.text):null))},[s,l,h,p,m,f,n,o]}var Mre=class extends f0{constructor(i){super(),wb(this,i,Rgt,Pgt,bb,{config:6,step:7})}};function OMe(r,i,e){let n=r.slice();return n[2]=i[e],n}function PMe(r){let i,e,n=r[1],o=[];for(let l=0;l<n.length;l+=1)o[l]=RMe(OMe(r,n,l));let s=l=>Bc(o[l],1,1,()=>{o[l]=null});return{c(){for(let l=0;l<o.length;l+=1)o[l].c();i=xgt()},m(l,h){for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(l,h);g0(l,i,h),e=!0},p(l,h){if(h&3){n=l[1];let p;for(p=0;p<n.length;p+=1){let m=OMe(l,n,p);o[p]?(o[p].p(m,h),Ys(o[p],1)):(o[p]=RMe(m),o[p].c(),Ys(o[p],1),o[p].m(i.parentNode,i))}for(II(),p=n.length;p<o.length;p+=1)s(p);TI()}},i(l){if(!e){for(let h=0;h<n.length;h+=1)Ys(o[h]);e=!0}},o(l){o=o.filter(Boolean);for(let h=0;h<o.length;h+=1)Bc(o[h]);e=!1},d(l){Cgt(o,l),l&&Hf(i)}}}function RMe(r){let i,e;return i=new Mre({props:{config:r[2],step:r[0]}}),{c(){DI(i.$$.fragment)},m(n,o){mC(i,n,o),e=!0},p(n,o){let s={};o&2&&(s.config=n[2]),o&1&&(s.step=n[0]),i.$set(s)},i(n){e||(Ys(i.$$.fragment,n),e=!0)},o(n){Bc(i.$$.fragment,n),e=!1},d(n){fC(i,n)}}}function Fgt(r){let i,e,n=r[1]&&PMe(r);return{c(){i=ly("footer"),n&&n.c(),cl(i,"class","shepherd-footer")},m(o,s){g0(o,i,s),n&&n.m(i,null),e=!0},p(o,[s]){o[1]?n?(n.p(o,s),s&2&&Ys(n,1)):(n=PMe(o),n.c(),Ys(n,1),n.m(i,null)):n&&(II(),Bc(n,1,1,()=>{n=null}),TI())},i(o){e||(Ys(n),e=!0)},o(o){Bc(n),e=!1},d(o){o&&Hf(i),n&&n.d()}}}function Lgt(r,i,e){let n,{step:o}=i;return r.$$set=s=>{"step"in s&&e(0,o=s.step)},r.$$.update=()=>{r.$$.dirty&1&&e(1,n=o.options.buttons)},[o,n]}var Dre=class extends f0{constructor(i){super(),wb(this,i,Lgt,Fgt,bb,{step:0})}};function Ngt(r){let i,e,n,o,s;return{c(){i=ly("button"),e=ly("span"),e.textContent="\xD7",cl(e,"aria-hidden","true"),cl(i,"aria-label",n=r[0].label?r[0].label:"Close Tour"),cl(i,"class","shepherd-cancel-icon"),cl(i,"type","button")},m(l,h){g0(l,i,h),nD(i,e),o||(s=AU(i,"click",r[1]),o=!0)},p(l,[h]){h&1&&n!==(n=l[0].label?l[0].label:"Close Tour")&&cl(i,"aria-label",n)},i:$m,o:$m,d(l){l&&Hf(i),o=!1,s()}}}function Bgt(r,i,e){let{cancelIcon:n,step:o}=i,s=l=>{l.preventDefault(),o.cancel()};return r.$$set=l=>{"cancelIcon"in l&&e(0,n=l.cancelIcon),"step"in l&&e(2,o=l.step)},[n,s,o]}var kre=class extends f0{constructor(i){super(),wb(this,i,Bgt,Ngt,bb,{cancelIcon:0,step:2})}};function jgt(r){let i;return{c(){i=ly("h3"),cl(i,"id",r[1]),cl(i,"class","shepherd-title")},m(e,n){g0(e,i,n),r[3](i)},p(e,[n]){n&2&&cl(i,"id",e[1])},i:$m,o:$m,d(e){e&&Hf(i),r[3](null)}}}function Vgt(r,i,e){let{labelId:n,element:o,title:s}=i;Kre(()=>{AI(s)&&e(2,s=s()),e(0,o.innerHTML=s,o)});function l(h){rD[h?"unshift":"push"](()=>{o=h,e(0,o)})}return r.$$set=h=>{"labelId"in h&&e(1,n=h.labelId),"element"in h&&e(0,o=h.element),"title"in h&&e(2,s=h.title)},[o,n,s,l]}var Ore=class extends f0{constructor(i){super(),wb(this,i,Vgt,jgt,bb,{labelId:1,element:0,title:2})}};function FMe(r){let i,e;return i=new Ore({props:{labelId:r[0],title:r[2]}}),{c(){DI(i.$$.fragment)},m(n,o){mC(i,n,o),e=!0},p(n,o){let s={};o&1&&(s.labelId=n[0]),o&4&&(s.title=n[2]),i.$set(s)},i(n){e||(Ys(i.$$.fragment,n),e=!0)},o(n){Bc(i.$$.fragment,n),e=!1},d(n){fC(i,n)}}}function LMe(r){let i,e;return i=new kre({props:{cancelIcon:r[3],step:r[1]}}),{c(){DI(i.$$.fragment)},m(n,o){mC(i,n,o),e=!0},p(n,o){let s={};o&8&&(s.cancelIcon=n[3]),o&2&&(s.step=n[1]),i.$set(s)},i(n){e||(Ys(i.$$.fragment,n),e=!0)},o(n){Bc(i.$$.fragment,n),e=!1},d(n){fC(i,n)}}}function $gt(r){let i,e,n,o=r[2]&&FMe(r),s=r[3]&&r[3].enabled&&LMe(r);return{c(){i=ly("header"),o&&o.c(),e=wU(),s&&s.c(),cl(i,"class","shepherd-header")},m(l,h){g0(l,i,h),o&&o.m(i,null),nD(i,e),s&&s.m(i,null),n=!0},p(l,[h]){l[2]?o?(o.p(l,h),h&4&&Ys(o,1)):(o=FMe(l),o.c(),Ys(o,1),o.m(i,e)):o&&(II(),Bc(o,1,1,()=>{o=null}),TI()),l[3]&&l[3].enabled?s?(s.p(l,h),h&8&&Ys(s,1)):(s=LMe(l),s.c(),Ys(s,1),s.m(i,null)):s&&(II(),Bc(s,1,1,()=>{s=null}),TI())},i(l){n||(Ys(o),Ys(s),n=!0)},o(l){Bc(o),Bc(s),n=!1},d(l){l&&Hf(i),o&&o.d(),s&&s.d()}}}function Ugt(r,i,e){let{labelId:n,step:o}=i,s,l;return r.$$set=h=>{"labelId"in h&&e(0,n=h.labelId),"step"in h&&e(1,o=h.step)},r.$$.update=()=>{r.$$.dirty&2&&(e(2,s=o.options.title),e(3,l=o.options.cancelIcon))},[n,o,s,l]}var Pre=class extends f0{constructor(i){super(),wb(this,i,Ugt,$gt,bb,{labelId:0,step:1})}};function zgt(r){let i;return{c(){i=ly("div"),cl(i,"class","shepherd-text"),cl(i,"id",r[1])},m(e,n){g0(e,i,n),r[3](i)},p(e,[n]){n&2&&cl(i,"id",e[1])},i:$m,o:$m,d(e){e&&Hf(i),r[3](null)}}}function Ggt(r,i,e){let{descriptionId:n,element:o,step:s}=i;Kre(()=>{let{text:h}=s.options;AI(h)&&(h=h.call(s)),Vre(h)?o.appendChild(h):e(0,o.innerHTML=h,o)});function l(h){rD[h?"unshift":"push"](()=>{o=h,e(0,o)})}return r.$$set=h=>{"descriptionId"in h&&e(1,n=h.descriptionId),"element"in h&&e(0,o=h.element),"step"in h&&e(2,s=h.step)},[o,n,s,l]}var Rre=class extends f0{constructor(i){super(),wb(this,i,Ggt,zgt,bb,{descriptionId:1,element:0,step:2})}};function NMe(r){let i,e;return i=new Pre({props:{labelId:r[1],step:r[2]}}),{c(){DI(i.$$.fragment)},m(n,o){mC(i,n,o),e=!0},p(n,o){let s={};o&2&&(s.labelId=n[1]),o&4&&(s.step=n[2]),i.$set(s)},i(n){e||(Ys(i.$$.fragment,n),e=!0)},o(n){Bc(i.$$.fragment,n),e=!1},d(n){fC(i,n)}}}function BMe(r){let i,e;return i=new Rre({props:{descriptionId:r[0],step:r[2]}}),{c(){DI(i.$$.fragment)},m(n,o){mC(i,n,o),e=!0},p(n,o){let s={};o&1&&(s.descriptionId=n[0]),o&4&&(s.step=n[2]),i.$set(s)},i(n){e||(Ys(i.$$.fragment,n),e=!0)},o(n){Bc(i.$$.fragment,n),e=!1},d(n){fC(i,n)}}}function jMe(r){let i,e;return i=new Dre({props:{step:r[2]}}),{c(){DI(i.$$.fragment)},m(n,o){mC(i,n,o),e=!0},p(n,o){let s={};o&4&&(s.step=n[2]),i.$set(s)},i(n){e||(Ys(i.$$.fragment,n),e=!0)},o(n){Bc(i.$$.fragment,n),e=!1},d(n){fC(i,n)}}}function Hgt(r){let i,e=!Eh(r[2].options.title)||r[2].options.cancelIcon&&r[2].options.cancelIcon.enabled,n,o=!Eh(r[2].options.text),s,l=Array.isArray(r[2].options.buttons)&&r[2].options.buttons.length,h,p=e&&NMe(r),m=o&&BMe(r),f=l&&jMe(r);return{c(){i=ly("div"),p&&p.c(),n=wU(),m&&m.c(),s=wU(),f&&f.c(),cl(i,"class","shepherd-content")},m(g,y){g0(g,i,y),p&&p.m(i,null),nD(i,n),m&&m.m(i,null),nD(i,s),f&&f.m(i,null),h=!0},p(g,[y]){y&4&&(e=!Eh(g[2].options.title)||g[2].options.cancelIcon&&g[2].options.cancelIcon.enabled),e?p?(p.p(g,y),y&4&&Ys(p,1)):(p=NMe(g),p.c(),Ys(p,1),p.m(i,n)):p&&(II(),Bc(p,1,1,()=>{p=null}),TI()),y&4&&(o=!Eh(g[2].options.text)),o?m?(m.p(g,y),y&4&&Ys(m,1)):(m=BMe(g),m.c(),Ys(m,1),m.m(i,s)):m&&(II(),Bc(m,1,1,()=>{m=null}),TI()),y&4&&(l=Array.isArray(g[2].options.buttons)&&g[2].options.buttons.length),l?f?(f.p(g,y),y&4&&Ys(f,1)):(f=jMe(g),f.c(),Ys(f,1),f.m(i,null)):f&&(II(),Bc(f,1,1,()=>{f=null}),TI())},i(g){h||(Ys(p),Ys(m),Ys(f),h=!0)},o(g){Bc(p),Bc(m),Bc(f),h=!1},d(g){g&&Hf(i),p&&p.d(),m&&m.d(),f&&f.d()}}}function Wgt(r,i,e){let{descriptionId:n,labelId:o,step:s}=i;return r.$$set=l=>{"descriptionId"in l&&e(0,n=l.descriptionId),"labelId"in l&&e(1,o=l.labelId),"step"in l&&e(2,s=l.step)},[n,o,s]}var Fre=class extends f0{constructor(i){super(),wb(this,i,Wgt,Hgt,bb,{descriptionId:0,labelId:1,step:2})}};function VMe(r){let i;return{c(){i=ly("div"),cl(i,"class","shepherd-arrow"),cl(i,"data-popper-arrow","")},m(e,n){g0(e,i,n)},d(e){e&&Hf(i)}}}function qgt(r){let i,e,n,o,s,l,h,p,m=r[4].options.arrow&&r[4].options.attachTo&&r[4].options.attachTo.element&&r[4].options.attachTo.on&&VMe();n=new Fre({props:{descriptionId:r[2],labelId:r[3],step:r[4]}});let f=[{"aria-describedby":o=Eh(r[4].options.text)?null:r[2]},{"aria-labelledby":s=r[4].options.title?r[3]:null},r[1],{role:"dialog"},{tabindex:"0"}],g={};for(let y=0;y<f.length;y+=1)g=bgt(g,f[y]);return{c(){i=ly("div"),m&&m.c(),e=wU(),DI(n.$$.fragment),DMe(i,g),Y2(i,"shepherd-has-cancel-icon",r[5]),Y2(i,"shepherd-has-title",r[6]),Y2(i,"shepherd-element",!0)},m(y,_){g0(y,i,_),m&&m.m(i,null),nD(i,e),mC(n,i,null),r[13](i),l=!0,h||(p=AU(i,"keydown",r[7]),h=!0)},p(y,[_]){y[4].options.arrow&&y[4].options.attachTo&&y[4].options.attachTo.element&&y[4].options.attachTo.on?m||(m=VMe(),m.c(),m.m(i,e)):m&&(m.d(1),m=null);let w={};_&4&&(w.descriptionId=y[2]),_&8&&(w.labelId=y[3]),_&16&&(w.step=y[4]),n.$set(w),DMe(i,g=kgt(f,[(!l||_&20&&o!==(o=Eh(y[4].options.text)?null:y[2]))&&{"aria-describedby":o},(!l||_&24&&s!==(s=y[4].options.title?y[3]:null))&&{"aria-labelledby":s},_&2&&y[1],{role:"dialog"},{tabindex:"0"}])),Y2(i,"shepherd-has-cancel-icon",y[5]),Y2(i,"shepherd-has-title",y[6]),Y2(i,"shepherd-element",!0)},i(y){l||(Ys(n.$$.fragment,y),l=!0)},o(y){Bc(n.$$.fragment,y),l=!1},d(y){y&&Hf(i),m&&m.d(),fC(n),r[13](null),h=!1,p()}}}var Ygt=9,Kgt=27,Zgt=37,Qgt=39;function $Me(r){return r.split(" ").filter(i=>!!i.length)}function Xgt(r,i,e){let{classPrefix:n,element:o,descriptionId:s,firstFocusableElement:l,focusableElements:h,labelId:p,lastFocusableElement:m,step:f,dataStepId:g}=i,y,_,w,A=()=>o;Tgt(()=>{e(1,g={[`data-${n}shepherd-step-id`]:f.id}),e(9,h=o.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')),e(8,l=h[0]),e(10,m=h[h.length-1])}),Kre(()=>{w!==f.options.classes&&k()});function k(){R(w),w=f.options.classes,$(w)}function R(se){if(lL(se)){let ge=$Me(se);ge.length&&o.classList.remove(...ge)}}function $(se){if(lL(se)){let ge=$Me(se);ge.length&&o.classList.add(...ge)}}let H=se=>{let{tour:ge}=f;switch(se.keyCode){case Ygt:if(h.length===0){se.preventDefault();break}se.shiftKey?(document.activeElement===l||document.activeElement.classList.contains("shepherd-element"))&&(se.preventDefault(),m.focus()):document.activeElement===m&&(se.preventDefault(),l.focus());break;case Kgt:ge.options.exitOnEsc&&(se.stopPropagation(),f.cancel());break;case Zgt:ge.options.keyboardNavigation&&(se.stopPropagation(),ge.back());break;case Qgt:ge.options.keyboardNavigation&&(se.stopPropagation(),ge.next());break}};function oe(se){rD[se?"unshift":"push"](()=>{o=se,e(0,o)})}return r.$$set=se=>{"classPrefix"in se&&e(11,n=se.classPrefix),"element"in se&&e(0,o=se.element),"descriptionId"in se&&e(2,s=se.descriptionId),"firstFocusableElement"in se&&e(8,l=se.firstFocusableElement),"focusableElements"in se&&e(9,h=se.focusableElements),"labelId"in se&&e(3,p=se.labelId),"lastFocusableElement"in se&&e(10,m=se.lastFocusableElement),"step"in se&&e(4,f=se.step),"dataStepId"in se&&e(1,g=se.dataStepId)},r.$$.update=()=>{r.$$.dirty&16&&(e(5,y=f.options&&f.options.cancelIcon&&f.options.cancelIcon.enabled),e(6,_=f.options&&f.options.title))},[o,g,s,p,f,y,_,H,l,h,m,n,A,oe]}var Lre=class extends f0{constructor(i){super(),wb(this,i,Xgt,qgt,bb,{classPrefix:11,element:0,descriptionId:2,firstFocusableElement:8,focusableElements:9,labelId:3,lastFocusableElement:10,step:4,dataStepId:1,getElement:12})}get getElement(){return this.$$.ctx[12]}},uL=class extends cL{constructor(i,e={}){return super(i,e),this.tour=i,this.classPrefix=this.tour.options?GMe(this.tour.options.classPrefix):"",this.styles=i.styles,this._resolvedAttachTo=null,zMe(this),this._setOptions(e),this}cancel(){this.tour.cancel(),this.trigger("cancel")}complete(){this.tour.complete(),this.trigger("complete")}destroy(){mgt(this),Vre(this.el)&&(this.el.remove(),this.el=null),this._updateStepTargetOnHide(),this.trigger("destroy")}getTour(){return this.tour}hide(){this.tour.modal.hide(),this.trigger("before-hide"),this.el&&(this.el.hidden=!0),this._updateStepTargetOnHide(),this.trigger("hide")}_resolveAttachToOptions(){return this._resolvedAttachTo=Oft(this),this._resolvedAttachTo}_getResolvedAttachToOptions(){return this._resolvedAttachTo===null?this._resolveAttachToOptions():this._resolvedAttachTo}isOpen(){return!!(this.el&&!this.el.hidden)}show(){return AI(this.options.beforeShowPromise)?Promise.resolve(this.options.beforeShowPromise()).then(()=>this._show()):Promise.resolve(this._show())}updateStepOptions(i){Object.assign(this.options,i),this.shepherdElementComponent&&this.shepherdElementComponent.$set({step:this})}getElement(){return this.el}getTarget(){return this.target}_createTooltipContent(){let i=`${this.id}-description`,e=`${this.id}-label`;return this.shepherdElementComponent=new Lre({target:this.tour.options.stepsContainer||document.body,props:{classPrefix:this.classPrefix,descriptionId:i,labelId:e,step:this,styles:this.styles}}),this.shepherdElementComponent.getElement()}_scrollTo(i){let{element:e}=this._getResolvedAttachToOptions();AI(this.options.scrollToHandler)?this.options.scrollToHandler(e):Mft(e)&&typeof e.scrollIntoView=="function"&&e.scrollIntoView(i)}_getClassOptions(i){let e=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions,n=i.classes?i.classes:"",o=e&&e.classes?e.classes:"",s=[...n.split(" "),...o.split(" ")],l=new Set(s);return Array.from(l).join(" ").trim()}_setOptions(i={}){let e=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions;e=jre({},e||{}),this.options=Object.assign({arrow:!0},e,i,pgt(e,i));let{when:n}=this.options;this.options.classes=this._getClassOptions(i),this.destroy(),this.id=this.options.id||`step-${$re()}`,n&&Object.keys(n).forEach(o=>{this.on(o,n[o],this)})}_setupElements(){Eh(this.el)||this.destroy(),this.el=this._createTooltipContent(),this.options.advanceOn&&kft(this),hgt(this)}_show(){this.trigger("before-show"),this._resolveAttachToOptions(),this._setupElements(),this.tour.modal||this.tour._setupModal(),this.tour.modal.setupForStep(this),this._styleTargetElementForStep(this),this.el.hidden=!1,this.options.scrollTo&&setTimeout(()=>{this._scrollTo(this.options.scrollTo)}),this.el.hidden=!1;let i=this.shepherdElementComponent.getElement(),e=this.target||document.body;e.classList.add(`${this.classPrefix}shepherd-enabled`),e.classList.add(`${this.classPrefix}shepherd-target`),i.classList.add("shepherd-enabled"),this.trigger("show")}_styleTargetElementForStep(i){let e=i.target;e&&(i.options.highlightClass&&e.classList.add(i.options.highlightClass),e.classList.remove("shepherd-target-click-disabled"),i.options.canClickTarget===!1&&e.classList.add("shepherd-target-click-disabled"))}_updateStepTargetOnHide(){let i=this.target||document.body;this.options.highlightClass&&i.classList.remove(this.options.highlightClass),i.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`)}};function Jgt(r){if(r){let{steps:i}=r;i.forEach(e=>{e.options&&e.options.canClickTarget===!1&&e.options.attachTo&&e.target instanceof HTMLElement&&e.target.classList.remove("shepherd-target-click-disabled")})}}function e0t({width:r,height:i,x:e=0,y:n=0,r:o=0}){let{innerWidth:s,innerHeight:l}=window,{topLeft:h=0,topRight:p=0,bottomRight:m=0,bottomLeft:f=0}=typeof o=="number"?{topLeft:o,topRight:o,bottomRight:o,bottomLeft:o}:o;return`M${s},${l}H0V0H${s}V${l}ZM${e+h},${n}a${h},${h},0,0,0-${h},${h}V${i+n-f}a${f},${f},0,0,0,${f},${f}H${r+e-m}a${m},${m},0,0,0,${m}-${m}V${n+p}a${p},${p},0,0,0-${p}-${p}Z`}function t0t(r){let i,e,n,o,s;return{c(){i=MMe("svg"),e=MMe("path"),cl(e,"d",r[2]),cl(i,"class",n=`${r[1]?"shepherd-modal-is-visible":""} shepherd-modal-overlay-container`)},m(l,h){g0(l,i,h),nD(i,e),r[11](i),o||(s=AU(i,"touchmove",r[3]),o=!0)},p(l,[h]){h&4&&cl(e,"d",l[2]),h&2&&n!==(n=`${l[1]?"shepherd-modal-is-visible":""} shepherd-modal-overlay-container`)&&cl(i,"class",n)},i:$m,o:$m,d(l){l&&Hf(i),r[11](null),o=!1,s()}}}function s2e(r){if(!r)return null;let e=r instanceof HTMLElement&&window.getComputedStyle(r).overflowY;return e!=="hidden"&&e!=="visible"&&r.scrollHeight>=r.clientHeight?r:s2e(r.parentElement)}function i0t(r,i){let e=r.getBoundingClientRect(),n=e.y||e.top,o=e.bottom||n+e.height;if(i){let l=i.getBoundingClientRect(),h=l.y||l.top,p=l.bottom||h+l.height;n=Math.max(n,h),o=Math.min(o,p)}let s=Math.max(o-n,0);return{y:n,height:s}}function n0t(r,i,e){let{element:n,openingProperties:o}=i;$re();let s=!1,l,h;m();let p=()=>n;function m(){e(4,o={width:0,height:0,x:0,y:0,r:0})}function f(){e(1,s=!1),R()}function g(oe=0,se=0,ge,ue){if(ue){let{y:pe,height:Ce}=i0t(ue,ge),{x:_e,width:de,left:te}=ue.getBoundingClientRect();e(4,o={width:de+oe*2,height:Ce+oe*2,x:(_e||te)-oe,y:pe-oe,r:se})}else m()}function y(oe){R(),oe.tour.options.useModalOverlay?($(oe),_()):f()}function _(){e(1,s=!0)}let w=oe=>{oe.preventDefault()},A=oe=>{oe.stopPropagation()};function k(){window.addEventListener("touchmove",w,{passive:!1})}function R(){l&&(cancelAnimationFrame(l),l=void 0),window.removeEventListener("touchmove",w,{passive:!1})}function $(oe){let{modalOverlayOpeningPadding:se,modalOverlayOpeningRadius:ge}=oe.options,ue=s2e(oe.target),pe=()=>{l=void 0,g(se,ge,ue,oe.target),l=requestAnimationFrame(pe)};pe(),k()}function H(oe){rD[oe?"unshift":"push"](()=>{n=oe,e(0,n)})}return r.$$set=oe=>{"element"in oe&&e(0,n=oe.element),"openingProperties"in oe&&e(4,o=oe.openingProperties)},r.$$.update=()=>{r.$$.dirty&16&&e(2,h=e0t(o))},[n,s,h,A,o,p,m,f,g,y,_,H]}var Nre=class extends f0{constructor(i){super(),wb(this,i,n0t,t0t,bb,{element:0,openingProperties:4,getElement:5,closeModalOpening:6,hide:7,positionModal:8,setupForStep:9,show:10})}get getElement(){return this.$$.ctx[5]}get closeModalOpening(){return this.$$.ctx[6]}get hide(){return this.$$.ctx[7]}get positionModal(){return this.$$.ctx[8]}get setupForStep(){return this.$$.ctx[9]}get show(){return this.$$.ctx[10]}},uC=new cL,Bre=class extends cL{constructor(i={}){super(i),zMe(this);let e={exitOnEsc:!0,keyboardNavigation:!0};return this.options=Object.assign({},e,i),this.classPrefix=GMe(this.options.classPrefix),this.steps=[],this.addSteps(this.options.steps),["active","cancel","complete","inactive","show","start"].map(o=>{(s=>{this.on(s,l=>{l=l||{},l.tour=this,uC.trigger(s,l)})})(o)}),this._setTourID(),this}addStep(i,e){let n=i;return n instanceof uL?n.tour=this:n=new uL(this,n),Eh(e)?this.steps.push(n):this.steps.splice(e,0,n),n}addSteps(i){return Array.isArray(i)&&i.forEach(e=>{this.addStep(e)}),this}back(){let i=this.steps.indexOf(this.currentStep);this.show(i-1,!1)}cancel(){return st(this,null,function*(){if(this.options.confirmCancel){let i=typeof this.options.confirmCancel=="function",e=this.options.confirmCancelMessage||"Are you sure you want to stop the tour?";(i?yield this.options.confirmCancel():window.confirm(e))&&this._done("cancel")}else this._done("cancel")})}complete(){this._done("complete")}getById(i){return this.steps.find(e=>e.id===i)}getCurrentStep(){return this.currentStep}hide(){let i=this.getCurrentStep();if(i)return i.hide()}isActive(){return uC.activeTour===this}next(){let i=this.steps.indexOf(this.currentStep);i===this.steps.length-1?this.complete():this.show(i+1,!0)}removeStep(i){let e=this.getCurrentStep();this.steps.some((n,o)=>{if(n.id===i)return n.isOpen()&&n.hide(),n.destroy(),this.steps.splice(o,1),!0}),e&&e.id===i&&(this.currentStep=void 0,this.steps.length?this.show(0):this.cancel())}show(i=0,e=!0){let n=lL(i)?this.getById(i):this.steps[i];n&&(this._updateStateBeforeShow(),AI(n.options.showOn)&&!n.options.showOn()?this._skipStep(n,e):(this.trigger("show",{step:n,previous:this.currentStep}),this.currentStep=n,n.show()))}start(){this.trigger("start"),this.focusedElBeforeOpen=document.activeElement,this.currentStep=null,this._setupModal(),this._setupActiveTour(),this.next()}_done(i){let e=this.steps.indexOf(this.currentStep);if(Array.isArray(this.steps)&&this.steps.forEach(n=>n.destroy()),Jgt(this),this.trigger(i,{index:e}),uC.activeTour=null,this.trigger("inactive",{tour:this}),this.modal&&this.modal.hide(),(i==="cancel"||i==="complete")&&this.modal){let n=document.querySelector(".shepherd-modal-overlay-container");n&&n.remove()}Vre(this.focusedElBeforeOpen)&&this.focusedElBeforeOpen.focus()}_setupActiveTour(){this.trigger("active",{tour:this}),uC.activeTour=this}_setupModal(){this.modal=new Nre({target:this.options.modalContainer||document.body,props:{classPrefix:this.classPrefix,styles:this.styles}})}_skipStep(i,e){let n=this.steps.indexOf(i);if(n===this.steps.length-1)this.complete();else{let o=e?n+1:n-1;this.show(o,e)}}_updateStateBeforeShow(){this.currentStep&&this.currentStep.hide(),this.isActive()||this._setupActiveTour()}_setTourID(){let i=this.options.tourName||"tour";this.id=`${i}--${$re()}`}},r0t=typeof window>"u",CU=class{constructor(){}};r0t?Object.assign(uC,{Tour:CU,Step:CU}):Object.assign(uC,{Tour:Bre,Step:uL});function o0t(r){return r.offsetWidth===0&&r.offsetHeight===0}function s0t(r){let{classes:i,disabled:e,label:n,secondary:o,type:s,text:l}=r,h=["back","cancel","next"];if(!s)return r;if(h.indexOf(s)===-1)throw new Error("'type' property must be one of 'back', 'cancel', or 'next'");return{action:this[s].bind(this),classes:i,disabled:e,label:n,secondary:o,text:l}}var a2e=(()=>{class r{constructor(){this.confirmCancel=!1,this.confirmCancelMessage=null,this.defaultStepOptions={},this.errorTitle=null,this.isActive=!1,this.keyboardNavigation=!0,this.messageForUser=null,this.modal=!1,this.requiredElements=[],this.tourName=void 0,this.tourObject=null,this.exitOnEsc=!0}back(){this.tourObject.back()}cancel(){this.tourObject.cancel()}complete(){this.tourObject.complete()}hide(){this.tourObject.hide()}next(){this.tourObject.next()}show(e){this.tourObject.show(e)}start(){this.isActive=!0,this.tourObject.start()}onTourFinish(e){this.isActive=!1}addSteps(e){this._initialize();let n=this.tourObject;if(!(!e||!Array.isArray(e)||e.length===0)){if(!this.requiredElementsPresent()){n.addStep({buttons:[{text:"Exit",action:n.cancel}],id:"error",title:this.errorTitle,text:[this.messageForUser]});return}e.forEach(o=>{o.buttons&&(o.buttons=o.buttons.map(s0t.bind(this),this)),n.addStep(o)})}}requiredElementsPresent(){let e=!0;return this.requiredElements.forEach(n=>{let o=document.querySelector(n.selector);e&&(!o||o0t(o))&&(e=!1,this.errorTitle=n.title,this.messageForUser=n.message)}),e}_initialize(){let e=new uC.Tour({confirmCancel:this.confirmCancel,confirmCancelMessage:this.confirmCancelMessage,defaultStepOptions:this.defaultStepOptions,keyboardNavigation:this.keyboardNavigation,tourName:this.tourName,useModalOverlay:this.modal,exitOnEsc:this.exitOnEsc});e.on("complete",this.onTourFinish.bind(this,"complete")),e.on("cancel",this.onTourFinish.bind(this,"cancel")),this.tourObject=e}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function l0t(r,i){if(r&1){let e=dt();ne(0,"button",3),Ne(1,"translate"),Ne(2,"translate"),Oe("click",function(){Re(e);let o=ae(2);return Fe(o.startInteractiveTour())}),wt(3,"igo-icon",4),ce()}if(r&2){let e=ae(2);ee("ngClass",e.getClass())("matTooltip",e.disabledTourButton?je(1,4,"igo.common.interactiveTour.disaledTooltipTourToolButton"):je(2,6,"igo.common.interactiveTour.tooltipTourToolButton"))("disabled",e.disabledTourButton),q(3),ee("icon",e.presentationIcon)}}function c0t(r,i){if(r&1){let e=dt();ne(0,"button",5),Oe("click",function(){Re(e);let o=ae(2);return Fe(o.startInteractiveTour())}),Ye(1),Ne(2,"translate"),Ne(3,"async"),Ne(4,"translate"),wt(5,"mat-icon",6),Ne(6,"translate"),Ne(7,"translate"),ce()}if(r&2){let e=ae(2);ee("ngClass",e.getClass())("disabled",e.disabledTourButton),q(),rf(" ",je(2,6,"igo.common.interactiveTour.buttonTitle")," ",je(4,10,je(3,8,e.discoverTitleInLocale$))," "),q(4),ee("svgIcon",e.presentationIcon.name)("matTooltip",e.disabledTourButton?je(6,12,"igo.common.interactiveTour.disaledTooltipTourToolButton"):je(7,14,"igo.common.interactiveTour.tooltipTourToolButton"))}}function d0t(r,i){if(r&1&&(zn(0),We(1,l0t,4,8,"button",2)(2,c0t,8,16,"ng-template",null,0,Vo),Gn()),r&2){let e=ji(3),n=ae();q(),ee("ngIf",n.styleButton==="icon")("ngIfElse",e)}}var l2e=(()=>{class r{http;configService;jsonURL;allToursOptions;constructor(e,n){this.http=e,this.configService=n,this.jsonURL=this.getPathToConfigFile()}loadConfigTour(){this.getJSON().subscribe(e=>{this.allToursOptions=e},()=>{throw new Error("Problem with Interactive tour configuration file: interactiveTour.json not find. Check if the file and is path is set correctly.")})}getPathToConfigFile(){return this.configService.getConfig("interactiveTour.pathToConfigFile")||"./config/interactiveTour.json"}getJSON(){return this.http.get(this.jsonURL).pipe(Fn(e=>{throw e.error.caught=!0,e}))}getTourOptionData(e){if(this.allToursOptions===void 0)return;let n=e;return n=n.replace(/\s/g,""),this.allToursOptions[n]}static \u0275fac=function(n){return new(n||r)(xe(dr),xe(Ri))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),c2e=(()=>{class r{configService;mediaService;languageService;interactiveTourLoader;shepherdService;previousStep;nextIndex=1;constructor(e,n,o,s,l){this.configService=e,this.mediaService=n,this.languageService=o,this.interactiveTourLoader=s,this.shepherdService=l,this.isAppHaveTour()&&this.interactiveTourLoader.loadConfigTour()}isAppHaveTour(){let e=this.configService.getConfig("interactiveTour.activateInteractiveTour");return e===void 0?!0:e}isToolHaveTourConfig(e){return this.interactiveTourLoader.getTourOptionData(e)!==void 0}disabledTourButton(e){let n=this.interactiveTourLoader.getTourOptionData(e);if(n?.conditions){for(let o of n.conditions)if(document.querySelector(o)===null)return!0}return!1}isMobile(){return this.mediaService.isMobile()}isTourDisplayInMobile(){let e=this.configService.getConfig("interactiveTour.tourInMobile");return e===void 0?!0:e}getButtons(e){return e==="noBackButton"?[{classes:"shepherd-button-primary",text:this.languageService.translate.instant("igo.common.interactiveTour.nextButton"),type:"next"}]:e==="first"?[{classes:"shepherd-button-secondary",text:this.languageService.translate.instant("igo.common.interactiveTour.exitButton"),type:"cancel"},{classes:"shepherd-button-primary",text:this.languageService.translate.instant("igo.common.interactiveTour.nextButton"),type:"next"}]:e==="last"?[{classes:"shepherd-button-secondary",text:this.languageService.translate.instant("igo.common.interactiveTour.backButton"),type:"back"},{classes:"shepherd-button-primary",text:this.languageService.translate.instant("igo.common.interactiveTour.exitButton"),type:"cancel"}]:[{classes:"shepherd-button-secondary",text:this.languageService.translate.instant("igo.common.interactiveTour.backButton"),type:"back"},{classes:"shepherd-button-primary",text:this.languageService.translate.instant("igo.common.interactiveTour.nextButton"),type:"next"}]}getAction(e){return{click:"click"}[e.toLowerCase()]}addProgress(){let e=this,n=0,o=21,s=setInterval(()=>{if(e.getCurrentStep())if(e.getCurrentStep().options.attachTo.element&&!document.querySelector(e.getCurrentStep().options.attachTo.element)){e.cancel(),clearInterval(s);return}else{let l=e.getCurrentStep().getElement();l&&l.querySelectorAll(".shepherd-content, .shepherd-text").forEach(m=>{m.classList.add("mat-typography")});let h=l?l.querySelector(".shepherd-header"):void 0;if(n++,(h||n>o)&&clearInterval(s),h){let p=e.steps,m=document.createElement("span");m.className="shepherd-progress",m.innerText=`${p.indexOf(e.getCurrentStep())+1}/${p.length}`,h.insertBefore(m,l.querySelector(".shepherd-cancel-icon"))}}},100)}checkNext(e,n,o){if(n.getCurrentStep()){if(n.getCurrentStep().options.attachTo.element&&document.querySelector(n.getCurrentStep().options.attachTo.element)){n.complete();return}if(e.index===n.steps.length-1){n.complete();return}n.steps.splice(e.index,1);let s=n.steps[e.index];s.options.attachTo.element&&!document.querySelector(s.options.attachTo.element)?o.checkNext(e,n,o):(n._setupModal(),n.show(s.id))}}executeAction(e,n){if(!n||n.condition&&(n.condition.charAt(0)==="!"&&document.querySelector(n.condition.slice(1))||n.condition.charAt(0)!=="!"&&!document.querySelector(n.condition)))return;let o=document.querySelector(n.element||e.element),s=this.getAction(n.action);o&&s&&o[s]()}executeActionPromise(e,n){return new Promise(o=>{if(this.executeAction(e,n),!n||!n.waitFor){o();return}let s=0,l=n.maxWait?n.maxWait/100:20,h=setInterval(()=>{s++,(s>l||document.querySelector(n.waitFor))&&(clearInterval(h),o())},100)})}getShepherdSteps(e){let n=[],o=0;for(let s of e.steps){let l=s.position??e.position;n.push({attachTo:{element:s.element,on:l},floatingUIOptions:{middleware:[l==="auto"&&CMe(),wMe({mainAxis:15})].filter(Boolean)},beforeShowPromise:()=>Promise.all([this.executeActionPromise(this.previousStep,this.previousStep?this.previousStep.beforeChange:void 0),this.executeActionPromise(s,s.beforeShow)]),buttons:this.getButtons(o===0?"first":o+1===e.steps.length?"last":e.steps[o].noBackButton?"noBackButton":void 0),classes:s.class,highlightClass:s.highlightClass,scrollTo:s.scrollToElement||e.scrollToElement||!0,canClickTarget:s.disableInteraction?!s.disableInteraction:void 0,title:this.languageService.translate.instant(s.title||e.title),text:[this.languageService.translate.instant(s.text)],when:{show:()=>{this.executeAction(s,s.onShow)},hide:()=>{this.previousStep=s,this.executeAction(s,s.onHide)}}}),o++}return n}startTour(e){let n=this.interactiveTourLoader.getTourOptionData(e);this.shepherdService.defaultStepOptions={classes:n.class,highlightClass:n.highlightClass,canClickTarget:n.disableInteraction?!n.disableInteraction:!0,cancelIcon:{enabled:!0}};let o=this.getShepherdSteps(n);this.shepherdService.modal=!0,this.shepherdService.confirmCancel=!1,this.shepherdService.addSteps(o),this.shepherdService.tourObject.on("show",this.addProgress),this.shepherdService.tourObject.on("cancel",s=>{this.checkNext(s,this.shepherdService.tourObject,this)}),this.shepherdService.start()}static \u0275fac=function(n){return new(n||r)(xe(Ri),xe(Ol),xe(wn),xe(l2e),xe(a2e))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),mL=(()=>{class r{interactiveTourService;toolService;iconService;presentationIcon=pfe;tourToStart="";styleButton;discoverTitleInLocale$=Vt("IGO");getClass(){return{"tour-button-tool-icon":this.styleButton==="icon","tour-button-tool":this.styleButton==="raised"}}get toolbox(){return this.toolService.toolbox}getTourToStart(){return this.tourToStart?this.tourToStart:this.activeToolName}get activeToolName(){if(this.toolbox)return this.isActiveTool?this.toolbox.activeTool$.getValue().name:"global"}get isActiveTool(){if(this.toolbox)return this.toolbox.activeTool$.getValue()!==void 0}get isToolHaveTour(){return this.activeToolName==="about"&&!this.tourToStart?!1:this.interactiveTourService.isToolHaveTourConfig(this.getTourToStart())}get showTourButton(){if(this.isToolHaveTour===!1)return!1;let e;return!(this.interactiveTourService.isMobile()&&(e=this.isTourDisplayInMobile,e===!1))}get isTourDisplayInMobile(){return this.interactiveTourService.isTourDisplayInMobile()}get disabledTourButton(){return this.interactiveTourService.disabledTourButton(this.activeToolName)}constructor(e,n,o){this.interactiveTourService=e,this.toolService=n,this.iconService=o,this.iconService.registerSvg(this.presentationIcon)}startInteractiveTour(){let e=this.getTourToStart();if(e)this.interactiveTourService.startTour(e);else return}static \u0275fac=function(n){return new(n||r)(ie(c2e),ie(rL),ie(Kq))};static \u0275cmp=gt({type:r,selectors:[["igo-interactive-tour"]],inputs:{tourToStart:"tourToStart",styleButton:"styleButton",discoverTitleInLocale$:"discoverTitleInLocale$"},standalone:!0,features:[yt],decls:1,vars:1,consts:[["raisedButton",""],[4,"ngIf"],["color","primary","mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"ngClass","matTooltip","disabled","click",4,"ngIf","ngIfElse"],["color","primary","mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"click","ngClass","matTooltip","disabled"],["iconPositionEnd","",3,"icon"],["color","primary","mat-raised-button","","tooltip-position","below","matTooltipShowDelay","500",3,"click","ngClass","disabled"],["iconPositionEnd","",3,"svgIcon","matTooltip"]],template:function(n,o){n&1&&We(0,d0t,4,2,"ng-container",1),n&2&&ee("ngIf",o.showTourButton)},dependencies:[gn,bn,Ua,Cr,qr,Er,Ar,jn,er,kr,On,hn,i1],styles:[`igo-interactive-tour>button.mat-mdc-raised-button.tour-button-tool-icon{box-shadow:none}.shepherd-has-title .shepherd-content .shepherd-header{padding:.5em .75em}.shepherd-title{margin:0!important;font-weight:revert!important}.shepherd-progress{margin-right:15px;color:#737373}.shepherd-text{font-size:14px!important}.shepherd-element{border:1px solid;border-color:#474747;box-shadow:4px 5px #65656599}
`],encapsulation:2})}return r})(),EU=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({providers:[c2e,l2e],imports:[mL]})}return r})();var u2e=ld(bE(),1);var oD=(()=>{class r{mapService;projectionService;storageService;configService;get showAllLegendsValue(){return this._legendToolShowAll}set showAllLegendsValue(e){this._legendToolShowAll=e}_legendToolShowAll;get map(){return this._map}_map;constructor(e,n,o,s){this.mapService=e,this.projectionService=n,this.storageService=o,this.configService=s,this._map=new QF({controls:{scaleLine:!0,attribution:{collapsed:!0}}},this.storageService,this.configService),this.mapService.setMap(this.map)}static \u0275fac=function(n){return new(n||r)(xe(eL),xe(sre),xe(wo),xe(Ri))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),h2e=(()=>{class r{get catalogStore(){return this._catalogStore}_catalogStore;catalogItemsStores=new Map;constructor(e){this._catalogStore=new wd([]),e.authenticate$.subscribe(()=>{this.clearCatalogItemsStores()})}getCatalogItemsStore(e){return this.catalogItemsStores.get(e.id)}setCatalogItemsStore(e,n){this.catalogItemsStores.set(e.id,n)}clearCatalogItemsStores(){this.catalogItemsStores.clear()}static \u0275fac=function(n){return new(n||r)(xe(ml))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var p2e=function(r){return r.layer="layer",r.context="context",r}(p2e||{}),Zre=function(r){return r.import="import",r.export="export",r}(Zre||{}),p0t=(()=>{class r{importExportType$=new mt(p2e.layer);selectedMode$=new mt(Zre.import);exportOptions$=new mt(void 0);setImportExportType(e){this.importExportType$.next(e)}setMode(e){this.selectedMode$.next(e)}setsExportOptions(e){this.exportOptions$.next(e)}static \u0275fac=function(n){return new(n||r)};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Cb=(()=>{class r{toolService;importExportState;get toolbox(){return this.toolService.toolbox}openSidenav$=new mt(void 0);constructor(e,n){this.toolService=e,this.importExportState=n}toolToActivateFromOptions(e){if(e){if(e.tool==="importExport"){let n=this.importExportState.exportOptions$.value;n?(n.layers=e.options.layers,n.featureInMapExtent=e.options.featureInMapExtent):n={layers:e.options.layers,featureInMapExtent:e.options.featureInMapExtent},this.importExportState.setsExportOptions(n),this.importExportState.setMode(Zre.export)}this.toolbox.getTool(e.tool)&&(this.toolbox.activateTool(e.tool),this.openSidenav$.next(!0))}}static \u0275fac=function(n){return new(n||r)(xe(rL),xe(p0t))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Qre=(()=>{class r{contextService;toolService;toolState;languageService;context$=new mt(void 0);constructor(e,n,o,s){this.contextService=e,this.toolService=n,this.toolState=o,this.languageService=s,this.contextService.context$.subscribe(l=>{this.onContextChange(l)}),this.contextService.toolsChanged$.subscribe(l=>{this.updateTools(l)})}setContext(e){this.updateTools(e),this.context$.next(e)}updateTools(e){let n=this.toolState.toolbox,o=[];(e.tools||[]).forEach(l=>{let h=this.toolService.getTool(l.name);if(h===void 0)return;let p=Object.assign({},h.options||{},l.options||{}),m=Object.assign({},h,l,{options:p});o.push(m)}),o.forEach(l=>{if(l.parent){let h=o.findIndex(p=>p.name===l.parent);h!==-1&&(o[h].children=[],o[h].children.push(l.name))}}),n.setTools(o),n.setToolbar(e.toolbar||[]),this.contextService.setTools([].concat(o)),this.contextService.setToolbar(e.toolbar||[])}onContextChange(e){e!==void 0&&this.setContext(e)}static \u0275fac=function(n){return new(n||r)(xe(q2),xe(rL),xe(Cb),xe(wn))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),m2e=(()=>{class r{mapState;zoomToActiveRoute$=new Dt;stopsStore=new G$([]);stopsFeatureStore;routesFeatureStore;stepFeatureStore;debounceTime=200;constructor(e){this.mapState=e,this.stopsFeatureStore=new H$([],{map:this.mapState.map}),this.routesFeatureStore=new W$([],{map:this.mapState.map}),this.stepFeatureStore=new q$([],{map:this.mapState.map}),this.mapState.map.layerController.all$.subscribe(()=>{this.mapState.map.layerController.getById("igo-direction-stops-layer")||(this.stopsStore.deleteMany(this.stopsStore.all()),this.stopsFeatureStore.deleteMany(this.stopsFeatureStore.all())),this.mapState.map.layerController.getById("igo-direction-route-layer")||this.routesFeatureStore.deleteMany(this.routesFeatureStore.all())})}static \u0275fac=function(n){return new(n||r)(xe(oD))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var fL=(()=>{class r{igoStorageService;get storageService(){return this.igoStorageService}constructor(e){this.igoStorageService=e}static \u0275fac=function(n){return new(n||r)(xe(wo))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function MU(r,i){r.entityStore.getStrategyOfType(zf).setMotion(i.get("zoomAuto")?$n.Default:$n.None)}function Xre(r,i,e,n,o,s,l,h,p,m){let f=[{id:"zoomAuto",checkbox:!0,title:"igo.integration.workspace.zoomAuto.title",tooltip:"igo.integration.workspace.zoomAuto.tooltip",checkCondition:o,handler:()=>{MU(r,l),l.set("zoomAuto",!l.get("zoomAuto"))}},{id:"filterInMapExtent",checkbox:!0,title:"igo.integration.workspace.inMapExtent.title",tooltip:REe(r),checkCondition:i,handler:()=>i.next(!i.value)},{id:"selectedOnly",checkbox:!0,title:"igo.integration.workspace.selected.title",tooltip:"igo.integration.workspace.selected.tooltip",checkCondition:e,handler:()=>e.next(!e.value)},{id:"clearselection",icon:"deselect",title:"igo.integration.workspace.clearSelection.title",tooltip:"igo.integration.workspace.clearSelection.tooltip",handler:y=>{y.entityStore.state.updateMany(y.entityStore.view.all(),{selected:!1})},args:[r],availability:y=>FEe(y)},{id:"featureDownload",icon:"file_save",title:"igo.integration.workspace.download.title",tooltip:"igo.integration.workspace.download.tooltip",handler:y=>{let _=y.entityStore.getStrategyOfType(bf),A=y.entityStore.getStrategyOfType(S_).active?[y.layer.id]:[];m.toolToActivateFromOptions({tool:"importExport",options:{layers:[y.layer.id],featureInMapExtent:_.active,layersWithSelection:A}})},args:[r]},{id:"ogcFilter",icon:"filter_alt",title:"igo.integration.workspace.ogcFilter.title",tooltip:"igo.integration.workspace.ogcFilter.tooltip",handler:(y,_)=>{_.activateWidget(y,{map:_.map,layer:_.layer})},args:[n,r]},{id:"maximize",title:h.translate.instant("igo.integration.workspace.maximize"),tooltip:h.translate.instant("igo.integration.workspace.maximizeTooltip"),icon:"resize",display:()=>s.pipe($t(y=>!y&&!p.isMobile())),handler:()=>{p.isMobile()||s.next(!0)}},{id:"standardExtent",title:h.translate.instant("igo.integration.workspace.standardExtent"),tooltip:h.translate.instant("igo.integration.workspace.standardExtentTooltip"),icon:"resize",display:()=>s.pipe($t(y=>y&&!p.isMobile())),handler:()=>{s.next(!1)}},{id:"print",icon:"print",title:"igo.integration.workspace.print.title",tooltip:"igo.integration.workspace.print.tooltip",handler:y=>{let _=`${y.layer.title} (${m0t(new Date,"YYYY-MM-DD-HH_mm")})`,w=new tr({orientation:"landscape"}),A="{total_pages_count_string}";w.text(_,14,20),r6(w,{startY:25,tableWidth:"wrap",html:"#currentWorkspaceTable",horizontalPageBreak:!0,styles:{cellPadding:.5,minCellWidth:20,fontSize:6},didDrawPage:k=>{let R="Page "+w.getNumberOfPages();typeof w.putTotalPages=="function"&&(R=R+" / "+A),w.setFontSize(6);let $=w.internal.pageSize,H=$.height?$.height:$.getHeight();w.text(R,k.settings.margin.left,H-10)}}),typeof w.putTotalPages=="function"&&w.putTotalPages(A),w.save(`${_}.pdf`)},args:[r]}],g=r.layer.dataSource.options.ogcFilters?.enabled?f:f.filter(y=>y.id!=="ogcFilter");return g=r.layer.options.workspace.printable!==!1?f:f.filter(y=>y.id!=="print"),g}function m0t(r,i){return(0,u2e.default)(r).format(i)}var f0t=(()=>{class r{ogcFilterWidget;storageState;languageService;mediaService;toolState;maximize$;zoomAuto$=new mt(!1);storageChange$$;get storageService(){return this.storageState.storageService}get zoomAuto(){return this.storageService.get("zoomAuto")}constructor(e,n,o,s,l){this.ogcFilterWidget=e,this.storageState=n,this.languageService=o,this.mediaService=s,this.toolState=l,this.maximize$=new mt(this.storageService.get("workspaceMaximize"))}ngOnDestroy(){this.storageChange$$&&this.storageChange$$.unsubscribe()}loadActions(e,n,o){let s=this.buildActions(e,n,o);e.actionStore.load(s)}buildActions(e,n,o){return this.zoomAuto$.next(this.zoomAuto),this.storageChange$$=this.storageService.storageChange$.pipe(Uc(s=>s?.key!=="zoomAuto"||s?.event===Wy.CLEARED)).subscribe(()=>{this.zoomAuto$.next(this.zoomAuto),MU(e,this.storageService)}),Xre(e,n,o,this.ogcFilterWidget,this.zoomAuto$,this.maximize$,this.storageService,this.languageService,this.mediaService,this.toolState)}static \u0275fac=function(n){return new(n||r)(xe(cU,8),xe(fL),xe(wn),xe(Ol),xe(Cb))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),g0t=(()=>{class r{storageState;languageService;toolState;mediaService;maximize$;zoomAuto$=new mt(!1);storageChange$$;get storageService(){return this.storageState.storageService}get zoomAuto(){return this.storageService.get("zoomAuto")}constructor(e,n,o,s){this.storageState=e,this.languageService=n,this.toolState=o,this.mediaService=s,this.maximize$=new mt(this.storageService.get("workspaceMaximize"))}ngOnDestroy(){this.storageChange$$&&this.storageChange$$.unsubscribe()}loadActions(e,n,o){let s=this.buildActions(e,n,o);e.actionStore.load(s)}buildActions(e,n,o){return this.zoomAuto$.next(this.zoomAuto),this.storageChange$$=this.storageService.storageChange$.pipe(Uc(s=>s?.key!=="zoomAuto"||s?.event===Wy.CLEARED)).subscribe(()=>{this.zoomAuto$.next(this.zoomAuto),MU(e,this.storageService)}),Xre(e,n,o,void 0,this.zoomAuto$,this.maximize$,this.storageService,this.languageService,this.mediaService,this.toolState)}static \u0275fac=function(n){return new(n||r)(xe(fL),xe(wn),xe(Cb),xe(Ol))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),_0t=(()=>{class r{ogcFilterWidget;storageState;languageService;mediaService;toolState;maximize$;selectOnlyCheckCondition$=new mt(!1);zoomAuto$=new mt(!1);storageChange$$;get storageService(){return this.storageState.storageService}get zoomAuto(){return this.storageService.get("zoomAuto")}constructor(e,n,o,s,l){this.ogcFilterWidget=e,this.storageState=n,this.languageService=o,this.mediaService=s,this.toolState=l,this.maximize$=new mt(this.storageService.get("workspaceMaximize"))}ngOnDestroy(){this.storageChange$$&&this.storageChange$$.unsubscribe()}loadActions(e,n,o){let s=this.buildActions(e,n,o);e.actionStore.load(s)}buildActions(e,n,o){return this.zoomAuto$.next(this.zoomAuto),this.storageChange$$=this.storageService.storageChange$.pipe(Uc(s=>s?.key!=="zoomAuto"||s?.event===Wy.CLEARED)).subscribe(()=>{this.zoomAuto$.next(this.zoomAuto),MU(e,this.storageService)}),Xre(e,n,o,this.ogcFilterWidget,this.zoomAuto$,this.maximize$,this.storageService,this.languageService,this.mediaService,this.toolState)}static \u0275fac=function(n){return new(n||r)(xe(cU,8),xe(fL),xe(wn),xe(Ol),xe(Cb))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),gL=(()=>{class r{featureActionsService;wfsActionsService;editionActionsService;storageService;workspacePanelExpanded=!1;workspaceEnabled$=new mt(!1);rowsInMapExtentCheckCondition$=new mt(!0);selectOnlyCheckCondition$=new mt(!1);workspaceMaximize$;actionMaximize$$=[];rowsInMapExtentCheckCondition$$;selectOnlyCheckCondition$$;activeWorkspace$$;activeWorkspaceWidget$$;activeWorkspaceWidget$=new mt(void 0);workspace$=new mt(void 0);get store(){return this._store}_store;get workspaceSelection(){return this.workspace$.value?this.workspace$.value?.entityStore.stateView.manyBy(e=>e.state.selected===!0):[]}get workspaceSelection$(){return this.workspace$.value?this.workspace$.value?.entityStore?.stateView.manyBy$(e=>e.state.selected===!0):Vt([])}constructor(e,n,o,s){this.featureActionsService=e,this.wfsActionsService=n,this.editionActionsService=o,this.storageService=s,this.workspaceMaximize$=new mt(this.storageService.get("workspaceMaximize")),this.initWorkspaces()}initWorkspaces(){this._store=new wj([]),this._store.stateView.firstBy$(e=>e.state.active===!0).subscribe(e=>{let n=e?e.entity:void 0;this.workspace$.next(n)}),this._store.stateView.all$().subscribe(e=>{e.map(n=>{n.entity.actionStore.empty&&(n.entity instanceof lC?this.wfsActionsService.loadActions(n.entity,this.rowsInMapExtentCheckCondition$,this.selectOnlyCheckCondition$):n.entity instanceof aC?this.featureActionsService.loadActions(n.entity,this.rowsInMapExtentCheckCondition$,this.selectOnlyCheckCondition$):n.entity instanceof bI&&this.editionActionsService.loadActions(n.entity,this.rowsInMapExtentCheckCondition$,this.selectOnlyCheckCondition$))})}),this.actionMaximize$$.push(this.featureActionsService.maximize$.subscribe(e=>{this.setWorkspaceIsMaximized(e)})),this.actionMaximize$$.push(this.wfsActionsService.maximize$.subscribe(e=>{this.setWorkspaceIsMaximized(e)})),this.actionMaximize$$.push(this.editionActionsService.maximize$.subscribe(e=>{this.setWorkspaceIsMaximized(e)})),this.activeWorkspace$$=this.workspace$.subscribe(e=>{this.activeWorkspaceWidget$$!==void 0&&(this.activeWorkspaceWidget$$.unsubscribe(),this.activeWorkspaceWidget$$=void 0),e!==void 0&&(this.activeWorkspaceWidget$$=e.widget$.subscribe(n=>this.activeWorkspaceWidget$.next(n)))}),this.rowsInMapExtentCheckCondition$$=this.rowsInMapExtentCheckCondition$.subscribe(e=>{this._store.stateView.all().map(n=>{if(!n.entity.actionStore.empty){let o=n.entity.entityStore.getStrategyOfType(bf);o&&(e?o.activate():o.deactivate())}})}),this.selectOnlyCheckCondition$$=this.selectOnlyCheckCondition$.subscribe(e=>{this._store.stateView.all().map(n=>{if(!n.entity.actionStore.empty){let o=n.entity.entityStore.getStrategyOfType(S_);o&&(e?o.activate():o.deactivate())}})})}setWorkspaceIsMaximized(e){this.storageService.set("workspaceMaximize",e),this.workspaceMaximize$.next(e)}setActiveWorkspaceById(e){let n=this.store.all().find(o=>o.id===e);n&&this.store.activateWorkspace(n)}setActiveWorkspaceByTitle(e){let n=this.store.all().find(o=>o.title===e);n&&this.store.activateWorkspace(n)}ngOnDestroy(){this.teardownWorkspaces(),this.actionMaximize$$.map(e=>e.unsubscribe()),this.rowsInMapExtentCheckCondition$$&&this.selectOnlyCheckCondition$$.unsubscribe(),this.selectOnlyCheckCondition$$&&this.selectOnlyCheckCondition$$.unsubscribe()}teardownWorkspaces(){this.store.clear(),this.activeWorkspaceWidget$$!==void 0&&this.activeWorkspaceWidget$$.unsubscribe(),this.activeWorkspace$$!==void 0&&this.activeWorkspace$$.unsubscribe()}static \u0275fac=function(n){return new(n||r)(xe(g0t),xe(_0t),xe(f0t),xe(wo))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var DU=(()=>{class r{searchSourceService;storageService;workspaceState;configService;mapState;searchLayerStores=[];searchOverlayStyle={};searchOverlayStyleSelection={};searchOverlayStyleFocus={};focusedOrResolution$$;selectedOrResolution$$;featureMotion={selected:$n.Default,focus:$n.None};searchTermSplitter$=new mt("|");searchTerm$=new mt(void 0);searchType$=new mt(void 0);searchDisabled$=new mt(!1);searchResultsGeometryEnabled$=new mt(!1);searchSettingsChange$=new mt(void 0);selectedResult$=new mt(void 0);store=new wd([]);get searchTypes(){return this.searchSourceService.getEnabledSources().map(e=>e.constructor.type)}constructor(e,n,o,s,l){this.searchSourceService=e,this.storageService=n,this.workspaceState=o,this.configService=s,this.mapState=l;let h=this.configService.getConfig("searchOverlayStyle");h&&(this.searchOverlayStyle=h.base,this.searchOverlayStyleSelection=h.selection,this.searchOverlayStyleFocus=h.focus);let p=this.storageService.get("searchResultsGeometryEnabled");p&&this.searchResultsGeometryEnabled$.next(p),this.store.addStrategy(this.createCustomFilterTermStrategy(),!1);let m=this.searchSourceService.getSources().find(f=>f.getId()==="workspace");m&&this.workspaceState.store.entities$.subscribe(f=>{let g=f.filter(y=>y instanceof aC&&y.layer.options.workspace.searchIndexEnabled);this.searchSourceService.setWorkspaces(m,g)}),this.monitorLayerDeletion()}monitorLayerDeletion(){this.mapState.map.layerController.all$.subscribe(e=>{this.searchLayerStores.forEach(n=>{if(!e.find(s=>s.id===n.layer.id)){let s=this.searchLayerStores.indexOf(n);this.searchLayerStores.splice(s,1)}})})}createCustomFilterTermStrategy(){let e=n=>n.entity.meta.score===100;return new bf({filterClauseFunc:e})}activateCustomFilterTermStrategy(){let e=this.store.getStrategyOfType(bf);e!==void 0&&e.activate()}deactivateCustomFilterTermStrategy(){let e=this.store.getStrategyOfType(bf);e!==void 0&&e.deactivate()}enableSearch(){this.searchDisabled$.next(!1)}disableSearch(){this.searchDisabled$.next(!0)}setSearchTerm(e){this.searchTerm$.next(e)}setSearchType(e){this.searchSourceService.enableSourcesByType(e),this.searchType$.next(e)}setSearchSettingsChange(){this.searchSettingsChange$.next(!0)}setSelectedResult(e){this.selectedResult$.next(e)}setSearchResultsGeometryStatus(e){this.storageService.set("searchResultsGeometryEnabled",e),this.searchResultsGeometryEnabled$.next(e)}static \u0275fac=function(n){return new(n||r)(xe(Jp),xe(wo),xe(gL),xe(Ri),xe(oD))};static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})();var kU=(()=>{class r{analyticsService;authService;contextState;toolState;mapState;constructor(e,n,o,s,l){this.analyticsService=e,this.authService=n,this.contextState=o,this.toolState=s,this.mapState=l}listen(){this.listenUser(),this.listenContext(),this.listenTool(),this.listenLayer()}listenUser(){this.authService.authenticate$.subscribe(()=>{let e=this.authService.decodeToken();e?.user?this.authService.getProfils().subscribe(n=>this.analyticsService.setUser(e.user,n.profils)):this.analyticsService.setUser(null)})}listenContext(){this.contextState.context$.subscribe(e=>{e&&this.analyticsService.trackEvent("context","activateContext",e.id||e.uri)})}listenTool(){this.toolState.toolbox.activeTool$.pipe(zd(1)).subscribe(e=>{e&&this.analyticsService.trackEvent("tool","activateTool",e.name)})}listenLayer(){this.mapState.map.layersAddedByClick$.subscribe(e=>{e&&e.forEach(n=>{let o,s,l,h;if(!Ah(n)){switch(n.dataSource.options.type){case"wms":{let p=n.dataSource.options,m=p.params.LAYERS,f=p.url,g=p.type;o=JSON.stringify({layer:m,type:g,url:f});break}case"wmts":{let p=n.dataSource.options,m=p.layer,f=p.url,g=p.matrixSet,y=p.type;s=JSON.stringify({layer:m,type:y,url:f,matrixSet:g});break}case"arcgisrest":case"tilearcgisrest":case"imagearcgisrest":{let p=n.options.sourceOptions,m=p.layer,f=p.url,g=p.type;h=JSON.stringify({layer:m,type:g,url:f});break}case"xyz":break}this.analyticsService.trackLayer("layer","addLayer",o||s||l||h)}})})}static \u0275fac=function(n){return new(n||r)(xe(w$),xe(ml),xe(Qre),xe(Cb),xe(oD))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var OU=(()=>{class r{configService;propertyTypeDetectorService;capabilitiesService;mapState;store=new wd([]);queryOverlayStyle={};queryOverlayStyleSelection={};queryOverlayStyleFocus={};constructor(e,n,o,s){this.configService=e,this.propertyTypeDetectorService=n,this.capabilitiesService=o,this.mapState=s;let l=this.configService.getConfig("queryOverlayStyle");l&&(this.queryOverlayStyle=l.base,this.queryOverlayStyleSelection=l.selection,this.queryOverlayStyleFocus=l.focus);let h=new vI({map:this.mapState.map},this.propertyTypeDetectorService,this.capabilitiesService);this.store.addStrategy(h,!0)}static \u0275fac=function(n){return new(n||r)(xe(Ri),xe(CI),xe(sy),xe(oD))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function sD(r){return r.getConfig("version.app")||r.getConfig("version.lib")||gW.lib}var PU=(()=>{class r{expanded;expand=new it;onToggleClick(){this.expand.emit(!this.expanded)}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["app-expansion-panel-button"]],inputs:{expanded:"expanded"},outputs:{expand:"expand"},standalone:!0,features:[yt],decls:4,vars:5,consts:[["mat-icon-button","","color","primary",3,"click","matTooltip"]],template:function(n,o){n&1&&(ne(0,"button",0),Ne(1,"translate"),Oe("click",function(){return o.onToggleClick()}),ne(2,"mat-icon"),Ye(3," open_in_new "),ce()()),n&2&&(ee("matTooltip",je(1,3,o.expanded?"workspace.close":"workspace.open")),q(2),vo("transform",o.expanded?"rotate(180deg)":null))},dependencies:[bn,Cr,jn,er,Er,Ar,On,hn],styles:["[_nghost-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0!important}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mat-ripple[_ngcontent-%COMP%], [_nghost-%COMP%]   button[_ngcontent-%COMP%]   .mdc-icon-button__ripple[_ngcontent-%COMP%]{border-radius:0!important}"]})}return r})();var y0t=["*"],f2e=(()=>{class r{expanded;expandedChange=new it;get hasExpandedClass(){return this.expanded}handleClose(){this.expandedChange.emit(!1)}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["app-expansion-panel-header"]],hostVars:2,hostBindings:function(n,o){n&2&&oi("app-expansion-panel-header-expanded",o.hasExpandedClass)},inputs:{expanded:"expanded"},outputs:{expandedChange:"expandedChange"},standalone:!0,features:[yt],ngContentSelectors:y0t,decls:4,vars:1,consts:[[1,"app-expansion-panel-trigger-container"],[3,"expand","expanded"],[1,"app-expansion-panel-content"]],template:function(n,o){n&1&&(Qi(),ne(0,"div",0)(1,"app-expansion-panel-button",1),Oe("expand",function(){return o.handleClose()}),ce()(),ne(2,"div",2),pi(3),ce()),n&2&&(q(),ee("expanded",o.expanded))},dependencies:[PU],styles:["[_nghost-%COMP%]{height:48px;border-bottom:2px solid aliceblue;display:flex;align-items:center;background-color:#fff}[_nghost-%COMP%]     .workspace-actions{margin-left:8px}[_nghost-%COMP%]   app-expansion-panel-button[_ngcontent-%COMP%]{margin-right:4px}.app-expansion-panel-trigger-container[_ngcontent-%COMP%], .app-expansion-panel-content[_ngcontent-%COMP%]{display:flex}"],changeDetection:0})}return r})();function g2e(r="150ms",i="300ms",e="ease-in-out"){return Or("showContent",[zi("true",mi({opacity:1})),zi("false",mi({opacity:0})),ln("false => true",un(`${r} ${i} ${e}`)),ln("true => false",un("0ms"))])}var v0t=[[["","expansionPanelHeader",""]],"*"],b0t=["[expansionPanelHeader]","*"],_2e=(()=>{class r{get expanded(){return this._expanded}set expanded(e){e!==this._expanded&&(this._expanded=e,this.expandedChange.emit(this._expanded))}_expanded;maximized=!1;get backdropShown(){return this._backdropShown}set backdropShown(e){this._backdropShown=e}_backdropShown;expandedChange=new it;get hasExpandedClass(){return this.expanded}get hasExpandedFullClass(){return this.expanded&&this.maximized}onBackdropClick(){this.expanded=!1,this.backdropShown=!1}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["app-expansion-panel"]],hostVars:4,hostBindings:function(n,o){n&2&&oi("app-expansion-panel-expanded",o.hasExpandedClass)("app-expansion-panel-expanded-maximized",o.hasExpandedFullClass)},inputs:{expanded:"expanded",maximized:"maximized",backdropShown:"backdropShown"},outputs:{expandedChange:"expandedChange"},standalone:!0,features:[yt],ngContentSelectors:b0t,decls:7,vars:3,consts:[[1,"app-expansion-panel-container"],[3,"click","shown"],[3,"expandedChange","expanded"],[1,"app-expansion-panel-content","mat-elevation-z4"]],template:function(n,o){n&1&&(Qi(v0t),ne(0,"div")(1,"div",0)(2,"igo-backdrop",1),Oe("click",function(){return o.onBackdropClick()}),ce(),ne(3,"app-expansion-panel-header",2),bs("expandedChange",function(l){return Os(o.expanded,l)||(o.expanded=l),l}),pi(4),ce(),ne(5,"div",3),pi(6,1),ce()()()),n&2&&(q(2),ee("shown",o.backdropShown),q(),vs("expanded",o.expanded),q(2),ee("@showContent",o.expanded))},dependencies:[bj,f2e],styles:["[_nghost-%COMP%]{-moz-box-shadow:0px 0px 2px 0px #dddddd;-webkit-box-shadow:0px 0px 2px 0px #dddddd;-o-box-shadow:0px 0px 2px 0px #dddddd;box-shadow:0 0 2px #ddd}[_nghost-%COMP%]{display:block;background-color:#fff;height:40px;width:40px;transition:height .2s cubic-bezier(.4,0,.2,1),width .2s cubic-bezier(.4,0,.2,1)}[_nghost-%COMP%]:not(.app-expansion-panel-expanded)     .app-expansion-panel-content{display:none}.app-expansion-panel-expanded[_nghost-%COMP%]{height:281px;width:100%;z-index:6}.app-expansion-panel-expanded[_nghost-%COMP%]     .app-expansion-panel-trigger-container{box-shadow:none}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-expansion-panel-expanded.footer[_nghost-%COMP%]{margin-bottom:48px}}.app-expansion-panel-container[_ngcontent-%COMP%]{height:100%;width:100%}.app-expansion-panel-expanded-maximized[_nghost-%COMP%]{height:496px;width:100%;z-index:6}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-expansion-panel-expanded-maximized.footer[_nghost-%COMP%]{margin-bottom:48px}}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{height:100%;width:100%}.app-expansion-panel-content[_ngcontent-%COMP%]{height:calc(100% - 50px);overflow:auto;padding:5px}igo-backdrop[_ngcontent-%COMP%]    >div{z-index:120!important}.app-expansion-panel-content[_ngcontent-%COMP%]     .igo-entity-table-with-selection{width:100%}"],data:{animation:[g2e()]},changeDetection:0})}return r})();var y2e=r=>({width:r});function w0t(r,i){if(r&1&&(zn(0),wt(1,"img",6),Gn()),r&2){let e=ae(2).$implicit;q(),ee("src",e.imgSrc,pl)("alt",e.alt)("ngStyle",fo(3,y2e,e.imgSize))}}function C0t(r,i){if(r&1&&(ne(0,"a",4),Ye(1),We(2,w0t,2,5,"ng-container",5),ce()),r&2){let e=ae().$implicit;ee("href",e.link,pl),q(),Qt(" ",e.text," "),q(),ee("ngIf",e.imgSrc)}}function x0t(r,i){if(r&1&&(zn(0),wt(1,"img",6),Gn()),r&2){let e=ae(2).$implicit;q(),ee("src",e.imgSrc,pl)("alt",e.alt)("ngStyle",fo(3,y2e,e.imgSize))}}function S0t(r,i){if(r&1&&(Ye(0),We(1,x0t,2,5,"ng-container",5)),r&2){let e=ae().$implicit;Qt(" ",e.text," "),q(),ee("ngIf",e.imgSrc)}}function I0t(r,i){if(r&1&&(zn(0),ne(1,"div",2),We(2,C0t,3,3,"a",3)(3,S0t,2,2,"ng-template",null,0,Vo),ce(),Gn()),r&2){let e=i.$implicit,n=ji(4);q(),vo("position",e.fixed?"fixed":"absolute")("margin-left",e.marginLeft)("margin-right",e.marginRight)("margin-top",e.marginTop)("margin-bottom",e.marginBottom)("font-size",e.fontSize),ee("ngClass",e.cssClass),q(),ee("ngIf",e.link)("ngIfElse",n)}}var v2e=(()=>{class r{contextService;mediaService;configService;mapOverlay=[];context$$;media$$;context;constructor(e,n,o){this.contextService=e,this.mediaService=n,this.configService=o}ngAfterViewInit(){this.context$$=this.contextService.context$.subscribe(e=>{this.handleContextChange(e),this.context=e}),this.media$$=this.mediaService.media$.subscribe(()=>this.handleContextChange(this.context))}ngOnDestroy(){this.context$$.unsubscribe(),this.media$$.unsubscribe()}handleContextChange(e){let n=[];if(e!==void 0){this.mapOverlay=[],e.mapOverlay?n=e.mapOverlay:n=this.configService.getConfig("mapOverlay",[]);for(let o of n)(!o.media&&this.mediaService.getMedia()==="desktop"||o.media&&o.media.includes(this.mediaService.getMedia()))&&this.mapOverlay.push(o)}}static \u0275fac=function(n){return new(n||r)(ie(q2),ie(Ol),ie(Ri))};static \u0275cmp=gt({type:r,selectors:[["app-map-overlay"]],standalone:!0,features:[yt],decls:1,vars:1,consts:[["templateNoLink",""],[4,"ngFor","ngForOf"],[1,"mapOverlayDefault",3,"ngClass"],["target","_blank",3,"href",4,"ngIf","ngIfElse"],["target","_blank",3,"href"],[4,"ngIf"],[3,"src","alt","ngStyle"]],template:function(n,o){n&1&&We(0,I0t,5,15,"ng-container",1),n&2&&ee("ngForOf",o.mapOverlay)},dependencies:[Ps,qr,gn,e_],styles:["[_nghost-%COMP%]{height:100%;top:0;left:0;right:0;position:fixed;pointer-events:none}.mapOverlayDefault[_ngcontent-%COMP%]{position:absolute;white-space:nowrap;pointer-events:auto}.bottom-right[_ngcontent-%COMP%]{bottom:0;right:0}.top-right[_ngcontent-%COMP%]{top:0;right:0}.bottom-left[_ngcontent-%COMP%]{bottom:0;left:0}.top-left[_ngcontent-%COMP%]{top:0;left:0}.bottom-center[_ngcontent-%COMP%]{bottom:0;left:50%;transform:translate(-50%)}.top-center[_ngcontent-%COMP%]{top:0;left:50%;transform:translate(-50%)}.center-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%)}.center-right[_ngcontent-%COMP%]{top:50%;right:0}.center-left[_ngcontent-%COMP%]{top:50%;left:0}"]})}return r})();function b2e(){return[Or("expansionPanelSize",[zi("full",mi({left:"4px","max-width":"100%"})),zi("notTriggered",mi({left:"4px",bottom:"4px","max-width":"100%"})),zi("notVisible",mi({display:"none"})),zi("mobile",mi({left:"calc(100% - 40px)"})),zi("reduced",mi({left:"404px","max-width":"calc(100% - 404px)"})),zi("reducedNotTriggered",mi({left:"404px",bottom:"4px","max-width":"calc(100% - 404px)"})),ln("* => *",un("100ms"))]),Or("toastOffsetY",[zi("true",mi({bottom:"50px"})),zi("false",mi({bottom:"4px"}))])]}function w2e(){return[Or("toastPanelMobileSidenav",[zi("true",mi({display:"none"})),ln("* => void",un("0ms")),ln("* => *",un("200ms"))]),Or("toastPanelOffsetX",[zi("fullStandard",mi({left:"45%"})),zi("standard",mi({left:"50%"})),zi("htmlDisplay",mi({left:"40%"})),zi("fullOffsetX",mi({left:"calc(45% + 202px)"})),zi("standardOffsetX",mi({left:"calc(50% + 202px)"})),zi("htmlDisplayOffsetX",mi({left:"calc(40% + 160px)"})),ln("fullStandard => fullOffsetX",un("200ms")),ln("fullOffsetX => fullStandard",un("200ms")),ln("standard => standardOffsetX",un("200ms")),ln("standardOffsetX => standard",un("200ms")),ln("htmlDisplay => htmlDisplayOffsetX",un("200ms")),ln("htmlDisplayOffsetX => htmlDisplay",un("200ms"))]),Or("toastPanelOffsetY",[zi("noExpansion",mi({bottom:"0"})),zi("expansionAndToastOpened",mi({bottom:"284px",zIndex:"999"})),zi("expansionAndToastClosed",mi({bottom:"284px",zIndex:"5"})),zi("expansionMaximizedAndToastOpened",mi({bottom:"500px",zIndex:"999"})),zi("expansionMaximizedAndToastClosed",mi({bottom:"500px",zIndex:"5"})),ln("noExpansion => noExpansion",un("10ms")),ln("expansionAndToastOpened => expansionAndToastOpened",un("200ms")),ln("expansionAndToastClosed => expansionAndToastClosed",un("200ms")),ln("expansionMaximizedAndToastOpened => expansionMaximizedAndToastOpened",un("200ms")),ln("expansionMaximizedAndToastClosed => expansionMaximizedAndToastClosed",un("200ms"))])]}function C2e(){return[Or("controlsOffsetY",[zi("close",mi({})),zi("firstRowFromBottom",mi({bottom:"4px"})),zi("firstRowFromBottom-expanded",mi({bottom:"288px"})),zi("firstRowFromBottom-expanded-maximized",mi({bottom:"504px"})),zi("secondRowFromBottom",mi({bottom:"47px"})),zi("thirdRowFromBottom",mi({bottom:"104px"})),zi("",mi({bottom:"284px"})),zi("secondRowFromBottom-expanded",mi({bottom:"calc(284px + 52px)"})),zi("thirdRowFromBottom-expanded",mi({bottom:"calc(284px + 104px)"})),ln("* => *",un("200ms"))]),Or("mobileOffsetY",[zi("low",mi({bottom:"50px"})),ln("* => *",un("200ms"))])]}function x2e(){return Or("controlStateX",[zi("left",mi({left:"60px"})),zi("right",mi({left:"464px"})),ln("* => *",un("200ms"))])}function S2e(){return Or("controlStateY",[zi("close",mi({})),zi("firstRowFromBottom",mi({bottom:"2px","margin-left":"0px"})),zi("firstRowFromBottom-expanded",mi({bottom:"284px","margin-left":"-54px"})),zi("firstRowFromBottom-expanded-maximized",mi({bottom:"500px","margin-left":"-54px"})),ln("* => *",un("200ms"))])}function I2e(){return Or("mapStateX",[zi("left",mi({left:"0"})),zi("right",mi({left:"0"})),ln("* => *",un("200ms"))])}function T2e(){return Or("mapStateY",[zi("*",mi({bottom:"0"})),ln("* => *",un("200ms"))])}var A2e=(()=>{class r{unselectButton=new it;onUnselectButtonClick(){this.unselectButton.emit()}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["igo-home-button"]],outputs:{unselectButton:"unselectButton"},standalone:!0,features:[yt],decls:4,vars:3,consts:[["id","homeButton","mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"click","matTooltip"]],template:function(n,o){n&1&&(ne(0,"button",0),Ne(1,"translate"),Oe("click",function(){return o.onUnselectButtonClick()}),ne(2,"mat-icon"),Ye(3,"home"),ce()()),n&2&&ee("matTooltip",je(1,1,"igo.context.sidenav.mainMenu"))},dependencies:[bn,Cr,Er,Ar,jn,er,On,hn],styles:["#homeButton[_ngcontent-%COMP%]{border-radius:0}"]})}return r})();var T0t=r=>({toolActivated:r});function A0t(r,i){if(r&1){let e=dt();ne(0,"igo-home-button",9),Oe("unselectButton",function(){Re(e);let o=ae();return Fe(o.onUnselectButtonClick())}),ce()}}function E0t(r,i){if(r&1){let e=dt();ne(0,"button",10),Ne(1,"translate"),Oe("click",function(){Re(e);let o=ae();return Fe(o.onPreviousButtonClick())}),ne(2,"mat-icon"),Ye(3,"arrow_back"),ce()()}r&2&&ee("matTooltip",je(1,1,"igo.context.sidenav.goBack"))}var E2e=(()=>{class r{toolState;configService;catalogState;title$=new mt(void 0);activeTool$$;get map(){return this._map}set map(e){this._map=e}_map;get opened(){return this._opened}set opened(e){e!==this._opened&&(this._opened=e,this.openedChange.emit(this._opened))}_opened;openedChange=new it;toolChange=new it;get toolbox(){return this.toolState.toolbox}constructor(e,n,o){this.toolState=e,this.configService=n,this.catalogState=o}ngOnInit(){this.activeTool$$=this.toolbox.activeTool$.subscribe(e=>{let n=this.configService.getConfig("sidenavTitle","IGO");if(e)if(e.name==="catalogBrowser")for(let o of this.catalogState.catalogStore.all())this.catalogState.catalogStore.state.get(o).selected===!0&&this.title$.next(o.title);else if(e.name==="activeTimeFilter"||e.name==="activeOgcFilter")for(let o of this.map.layerController.layersFlattened)Ru(o)&&this.map.layerController.isSelected(o)&&this.title$.next(o.title);else this.title$.next(e.title);else this.title$.next(n);this.toolChange.emit(e)})}ngOnDestroy(){this.activeTool$$.unsubscribe()}onPreviousButtonClick(){this.toolbox.activatePreviousTool()}onUnselectButtonClick(){this.toolbox.deactivateTool()}static \u0275fac=function(n){return new(n||r)(ie(Cb),ie(Ri),ie(h2e))};static \u0275cmp=gt({type:r,selectors:[["app-sidenav"]],inputs:{map:"map",opened:"opened"},outputs:{openedChange:"openedChange",toolChange:"toolChange"},standalone:!0,features:[yt],decls:14,vars:20,consts:[["content",""],["mode","side",1,"mat-elevation-z3",3,"openedChange","autoFocus","opened"],[1,"app-sidenav-content"],[1,"app-content",3,"ngClass"],[3,"unselectButton",4,"ngIf"],[3,"title"],["mat-icon-button","","panelLeftButton","","tooltip-position","below","matTooltipShowDelay","500",3,"matTooltip","click",4,"ngIf"],["panelRightButton","","styleButton","icon"],["color","primary",1,"igo-toolbox",3,"animate","toolbox"],[3,"unselectButton"],["mat-icon-button","","panelLeftButton","","tooltip-position","below","matTooltipShowDelay","500",3,"click","matTooltip"]],template:function(n,o){if(n&1){let s=dt();ne(0,"mat-sidenav",1),bs("openedChange",function(h){return Re(s),Os(o.opened,h)||(o.opened=h),Fe(h)}),ne(1,"div",2)(2,"div",3,0),Ne(4,"async"),We(5,A0t,1,0,"igo-home-button",4),Ne(6,"async"),ne(7,"igo-panel",5),Ne(8,"async"),Ne(9,"translate"),We(10,E0t,4,3,"button",6),Ne(11,"async"),wt(12,"igo-interactive-tour",7)(13,"igo-toolbox",8),ce()()()()}n&2&&(ee("autoFocus",!1),vs("opened",o.opened),q(2),ee("ngClass",fo(18,T0t,je(4,8,o.toolbox.activeTool$))),q(3),ee("ngIf",je(6,10,o.toolbox.activeTool$)),q(2),ee("title",je(9,14,je(8,12,o.title$))),q(3),ee("ngIf",je(11,16,o.toolbox.activeTool$)),q(3),ee("animate",!0)("toolbox",o.toolbox))},dependencies:[kr,A2e,EU,mL,bn,Cr,jn,er,GB,hY,Er,Ar,qr,gn,T2,lMe,Wh,hn],styles:["[_nghost-%COMP%]{background-color:#fff}[_nghost-%COMP%]     .igo-panel-header{position:relative}[_nghost-%COMP%]   mat-sidenav[_ngcontent-%COMP%]{z-index:3!important;height:100%;width:400px;box-sizing:content-box}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]   mat-sidenav[_ngcontent-%COMP%]{width:calc(100% - 53px);max-width:400px}}[_nghost-%COMP%]   igo-home-button[_ngcontent-%COMP%]{position:absolute;top:53px}[_nghost-%COMP%]   .app-content[_ngcontent-%COMP%], [_nghost-%COMP%]   igo-panel[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .app-sidenav-content[_ngcontent-%COMP%]{margin-top:53px;height:calc(100% - 53px)}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]   .app-sidenav-content[_ngcontent-%COMP%]{height:calc(100% - 53px)}}[_nghost-%COMP%]   igo-panel[_ngcontent-%COMP%]     .igo-panel-content{position:relative}[_nghost-%COMP%]   div.toolActivated[_ngcontent-%COMP%] > igo-panel[_ngcontent-%COMP%]    >div.igo-panel-header{margin-left:50px;position:relative}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]   igo-toolbox[_ngcontent-%COMP%]{overflow:auto}}"],changeDetection:0})}return r})();function M2e(r="50ms",i="280ms",e="ease-in-out"){return Or("showContent",[zi("true",mi({opacity:1,display:"block"})),zi("false",mi({opacity:0,display:"none"})),ln("false => true",un(`${r} ${i} ${e}`)),ln("true => false",un("0ms"))])}var M0t=["*"],D2e=(()=>{class r{set opened(e){e!==this._opened&&(this._opened=e,this.openedChange.emit(this._opened))}get opened(){return this._opened}_opened;title;withHeader;openedChange=new it;get hasOpenedClass(){return this.opened}get displayStyle(){return this.withHeader||this.opened?"visible":"hidden"}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=gt({type:r,selectors:[["app-toast-panel-for-expansion"]],hostVars:4,hostBindings:function(n,o){n&2&&(vo("visibility",o.displayStyle),oi("toast-panel-for-expansion-opened",o.hasOpenedClass))},inputs:{opened:"opened",title:"title",withHeader:"withHeader"},outputs:{openedChange:"openedChange"},standalone:!0,features:[yt],ngContentSelectors:M0t,decls:4,vars:3,consts:[["content",""],[3,"title","withHeader"]],template:function(n,o){n&1&&(Qi(),ne(0,"igo-panel",1)(1,"div",null,0),pi(3),ce()()),n&2&&(ee("title",o.title)("withHeader",o.withHeader),q(),ee("@showContent",o.opened))},dependencies:[T2],styles:["[_nghost-%COMP%]{-moz-box-shadow:0px 0px 2px 0px #dddddd;-webkit-box-shadow:0px 0px 2px 0px #dddddd;-o-box-shadow:0px 0px 2px 0px #dddddd;box-shadow:0 0 2px #ddd}[_nghost-%COMP%]{background-color:#fff;height:48px;max-height:329px;transition:height .28s cubic-bezier(.4,0,.2,1);padding:5px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]{max-height:40%}}.toast-panel-for-expansion-opened[_nghost-%COMP%]{height:329px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.toast-panel-for-expansion-opened[_nghost-%COMP%]{height:40%}}igo-panel[_ngcontent-%COMP%]{position:relative;height:100%}igo-panel[_ngcontent-%COMP%]     .igo-panel-header:hover{cursor:pointer}div[igostoppropagation][_ngcontent-%COMP%]{height:100%;width:100%}"],data:{animation:[M2e()]},changeDetection:0})}return r})();function D0t(r,i){if(r&1){let e=dt();ne(0,"button",15),Ne(1,"async"),Ne(2,"translate"),Oe("click",function(){Re(e);let o=ae(3);return Fe(o.zoomTo())}),ne(3,"mat-icon",16),Ne(4,"async"),Ne(5,"async"),Ye(6,"zoom_in"),ce()()}if(r&2){let e=ae(3);ee("matTooltip",je(2,5,je(1,3,e.isSelectedResultOutOfView$)?"toastPanel.zoomOnFeatureTooltipOutOfView":"toastPanel.zoomOnFeatureTooltip")),q(3),ee("matBadge",je(4,7,e.isSelectedResultOutOfView$)?"!":"")("matBadgeHidden",je(5,9,e.isSelectedResultOutOfView$)!==!0)}}function k0t(r,i){if(r&1){let e=dt();ne(0,"button",17),Ne(1,"async"),Ne(2,"translate"),Ne(3,"async"),Oe("click",function(){Re(e);let o=ae(3);return Fe(o.handleLayer())}),ne(4,"mat-icon"),Ye(5),Ne(6,"async"),ce()()}if(r&2){let e=ae(3);ee("matTooltip",je(2,5,je(1,3,e.potententialLayerisAdded$)?"toastPanel.removeLayer":"toastPanel.addLayer"))("color",je(3,7,e.potententialLayerisAdded$)?"warn":""),q(5),Qt(" ",je(6,9,e.potententialLayerisAdded$)?"delete":"add"," ")}}function O0t(r,i){if(r&1){let e=dt();ne(0,"button",18),Ne(1,"translate"),Oe("click",function(){Re(e);let o=ae(3);return Fe(o.previousResult())}),ne(2,"mat-icon"),Ye(3,"chevron_left"),ce()()}if(r&2){let e=ae(3);ee("disabled",e.results[0].meta.id===e.resultSelected$.value.meta.id)("matTooltip",je(1,2,"toastPanel.previousFeatureTooltip"))}}function P0t(r,i){if(r&1){let e=dt();ne(0,"button",19),Ne(1,"translate"),Oe("click",function(){Re(e);let o=ae(3);return Fe(o.nextResult())}),ne(2,"mat-icon"),Ye(3,"chevron_right"),ce()()}if(r&2){let e=ae(3);ee("disabled",e.results[e.results.length-1].meta.id===e.resultSelected$.value.meta.id)("matTooltip",je(1,2,"toastPanel.nextFeatureTooltip"))}}function R0t(r,i){if(r&1){let e=dt();ne(0,"button",20),Ne(1,"async"),Ne(2,"translate"),Oe("click",function(){Re(e);let o=ae(3);return Fe(o.resizeWindows())}),ne(3,"mat-icon"),Ye(4),ce()()}if(r&2){let e=ae(3);ee("matTooltip",je(2,4,je(1,2,e.fullExtent$)?"toastPanel.standardExtentTooltip":"toastPanel.fullExtentTooltip")),q(4),Si(e.fullExtent?"collapse_content":"expand_content")}}function F0t(r,i){if(r&1){let e=dt();ne(0,"igo-feature-details",21),Oe("htmlDisplayEvent",function(o){Re(e);let s=ae(3);return Fe(s.setHtmlDisplay(o))}),ce()}if(r&2){let e=ae(3);ee("map",e.map)("feature",e.resultSelected$.value.data)}}function L0t(r,i){if(r&1){let e=dt();ne(0,"igo-search-results",22),Oe("resultFocus",function(o){Re(e);let s=ae(3);return Fe(s.focusResult(o))})("resultUnfocus",function(o){Re(e);let s=ae(3);return Fe(s.unfocusResult(o,!0))})("resultSelect",function(o){Re(e);let s=ae(3);return Fe(s.selectResult(o))}),ce()}if(r&2){let e=ae(3);ee("map",e.map)("store",e.store)("showIcons",!0)("withZoomButton",e.withZoomButton)("tabsMode",e.tabsMode)}}function N0t(r,i){if(r&1){let e=dt();ne(0,"igo-panel",4),Ne(1,"translate"),Oe("click",function(o){Re(e);let s=ae(2);return Fe(s.onToggleClick(o))})("keydown",function(o){Re(e);let s=ae(2);return Fe(s.handleKeyboardEvent(o))}),wt(2,"igo-actionbar",5),We(3,D0t,7,11,"button",6)(4,k0t,7,11,"button",7)(5,O0t,4,4,"button",8)(6,P0t,4,4,"button",9)(7,R0t,5,6,"button",10),ne(8,"button",11),Oe("click",function(){Re(e);let o=ae(2);return Fe(o.clear())}),ne(9,"mat-icon"),Ye(10,"close"),ce()(),ne(11,"div",12,1),We(13,F0t,1,2,"igo-feature-details",13)(14,L0t,1,5,"igo-search-results",14),ce()()}if(r&2){let e=ae(2);ee("ngClass",e.getClassPanel())("id",e.setHeighPanelTabsMode())("title",e.resultSelected$.value?e.getTitle(e.resultSelected$.value):je(1,16,"toastPanel.title")),q(2),ee("store",e.actionStore)("withIcon",!0)("icon",e.icon)("withTitle",e.actionbarMode==="overlay")("horizontal",!0)("mode",e.actionbarMode),q(),ee("ngIf",e.resultSelected$.value),q(),ee("ngIf",e.hasGeoService()),q(),ee("ngIf",e.resultSelected$.value),q(),ee("ngIf",e.resultSelected$.value),q(),ee("ngIf",e.opened&&e.isDesktop()),q(6),ee("ngIf",e.resultSelected$.value),q(),ee("ngIf",!e.resultSelected$.value)}}function B0t(r,i){if(r&1&&(We(0,N0t,15,18,"igo-panel",3),Ne(1,"async")),r&2){let e=ae();ee("ngIf",je(1,1,e.store.entities$))}}function j0t(r,i){}function V0t(r,i){if(r&1){let e=dt();ne(0,"div",23),Oe("swipeleft",function(o){Re(e);let s=ae();return Fe(s.swipe(o.type))})("swiperight",function(o){Re(e);let s=ae();return Fe(s.swipe(o.type))})("swipeup",function(o){Re(e);let s=ae();return Fe(s.swipe(o.type))})("swipedown",function(o){Re(e);let s=ae();return Fe(s.swipe(o.type))}),We(1,j0t,0,0,"ng-template",24),ce()}if(r&2){ae();let e=ji(1);q(),ee("ngTemplateOutlet",e)}}var k2e=(()=>{class r{mediaService;languageService;storageState;queryState;workspaceState;configService;propertyTypeDetectorService;layerService;static SWIPE_ACTION={RIGHT:"swiperight",LEFT:"swipeleft",UP:"swipeup",DOWN:"swipedown"};tabsMode;get storageService(){return this.storageState.storageService}get map(){return this._map}set map(e){this._map=e}_map;get store(){return this._store}set store(e){this._store=e,this.store.entities$.subscribe(()=>{this.unselectResult()})}_store;get opened(){return this._opened}set opened(e){e===!this._opened&&(this._opened=e,this.storageService.set("toastOpened",e,kl.SESSION),this.openedChange.emit(e))}_opened=!0;hasFeatureEmphasisOnSelection=!1;get zoomAuto(){return this._zoomAuto}set zoomAuto(e){e===!this._zoomAuto&&(this._zoomAuto=e,this.zoomAuto$.next(e),this.storageService.set("zoomAuto",e))}_zoomAuto=!1;get fullExtent(){return this._fullExtent}set fullExtent(e){e===!this._fullExtent&&(this._fullExtent=e,this.fullExtent$.next(e),this.fullExtentEvent.emit(e),this.storageService.set("fullExtent",e))}_fullExtent=!1;potententialLayerToAdd$=new mt(void 0);potententialLayerisAdded$=new mt(!1);fullExtent$=new mt(this.fullExtent);isHtmlDisplay=!1;iconResizeWindows="";icon="menu";actionStore=new Em([]);actionbarMode=c1.Overlay;multiple$=new mt(!1);isResultSelected$=new mt(!1);isSelectedResultOutOfView$=new mt(!1);isSelectedResultOutOfView$$;storageChange$$;initialized=!0;format=new hs;resultOrResolution$$;focusedResult$=new mt(void 0);abstractFocusedOrSelectedResult;withZoomButton=!0;zoomAuto$=new mt(!1);openedChange=new it;fullExtentEvent=new it;windowHtmlDisplayEvent=new it;resultSelected$=new mt(void 0);getClassPanel(){return{"app-toast-panel-opened":this.opened&&!this.fullExtent&&!this.isHtmlDisplay,"app-full-toast-panel-opened":this.opened&&this.fullExtent&&!this.isHtmlDisplay,"app-toast-panel-html":this.opened&&!this.fullExtent&&this.resultSelected$.value&&this.isHtmlDisplay,"app-toast-panel-html-large":this.opened&&this.fullExtent&&this.resultSelected$.value&&this.isHtmlDisplay,"app-toast-panel-collapsed":!this.opened&&!this.fullExtent&&!this.isHtmlDisplay,"app-full-toast-panel-collapsed":!this.opened&&this.fullExtent&&!this.isHtmlDisplay,"app-toast-panel-html-collapsed":!this.opened&&this.isHtmlDisplay}}setHeighPanelTabsMode(){if(this.resultSelected$.value||!this.opened)return"";if(this.tabsMode&&!this.fullExtent&&!this.isHtmlDisplay)return"app-toast-panel-opened-max-height";if(this.tabsMode&&this.opened&&this.fullExtent&&!this.isHtmlDisplay)return"app-full-toast-panel-opened-max-height"}get displayStyle(){return this.results.length?(this.results.length===1&&this.initialized&&this.selectResult(this.results[0]),"visible"):"hidden"}onEscapeHandler(){this.clear()}onBackHandler(){this.unselectResult()}onZoomHandler(){if(this.isResultSelected$.getValue()===!0){let e=this.format.readFeature(this.resultSelected$.getValue().data,{dataProjection:this.resultSelected$.getValue().data.projection,featureProjection:this.map.projection});Fu(this.map.viewController,[e],$n.Default)}}get results(){return this.store.all()}get multiple(){return this.results.length?this.multiple$.next(!0):this.multiple$.next(!1),this.multiple$}constructor(e,n,o,s,l,h,p,m){this.mediaService=e,this.languageService=n,this.storageState=o,this.queryState=s,this.workspaceState=l,this.configService=h,this.propertyTypeDetectorService=p,this.layerService=m,this.tabsMode=this.configService.getConfig("queryTabs",!1),this.opened=this.storageService.get("toastOpened"),this.zoomAuto=this.storageService.get("zoomAuto"),this.fullExtent=this.storageService.get("fullExtent")}monitorResultOutOfView(){this.isSelectedResultOutOfView$$=ts([this.map.viewController.state$,this.resultSelected$]).pipe(cr(100)).subscribe(e=>{let n=e[1];if(!n){this.isSelectedResultOutOfView$.next(!1);return}let o=oy(n.data,this.map.projection),s=mb([o],this.map.viewProjection);this.isSelectedResultOutOfView$.next(XF(this.map.getExtent(),s))})}ngOnInit(){this.store.entities$.subscribe(()=>{this.initialized=!0}),this.monitorResultOutOfView();let e,n;this.hasFeatureEmphasisOnSelection&&(this.resultOrResolution$$=ts([this.focusedResult$.pipe(br(o=>{e=o,n="focused"})),this.resultSelected$.pipe(br(o=>{e=o,n="selected"})),this.map.viewController.resolution$,this.store.entities$]).subscribe(()=>this.buildResultEmphasis(e,n))),this.storageChange$$=this.storageService.storageChange$.pipe(Uc(o=>o.key!=="zoomAuto")).subscribe(o=>{this.zoomAuto=o.currentValue}),this.actionStore.load([{id:"list",title:this.languageService.translate.instant("toastPanel.backToList"),icon:"list",tooltip:this.languageService.translate.instant("toastPanel.listButton"),display:()=>this.isResultSelected$,handler:()=>{this.unselectResult()}},{id:"zoomFeature",title:this.languageService.translate.instant("toastPanel.zoomOnFeature"),icon:"zoom_in",tooltip:this.languageService.translate.instant("toastPanel.zoomOnFeatureTooltip"),display:()=>this.isResultSelected$,handler:()=>{let o=this.format.readFeature(this.resultSelected$.getValue().data,{dataProjection:this.resultSelected$.getValue().data.projection,featureProjection:this.map.projection});Fu(this.map.viewController,[o],$n.Zoom)}},{id:"zoomResults",title:this.languageService.translate.instant("toastPanel.zoomOnFeatures"),tooltip:this.languageService.translate.instant("toastPanel.zoomOnFeaturesTooltip"),icon:"frame_inspect",availability:()=>this.multiple,handler:()=>{let o=[];for(let s of this.store.all()){let l=this.format.readFeature(s.data,{dataProjection:s.data.projection,featureProjection:this.map.projection});o.push(l)}Fu(this.map.viewController,o,$n.Zoom)}},{id:"zoomAuto",title:this.languageService.translate.instant("toastPanel.zoomAuto"),tooltip:this.languageService.translate.instant("toastPanel.zoomAutoTooltip"),checkbox:!0,checkCondition:this.zoomAuto$,handler:()=>{this.zoomAuto=!this.zoomAuto,this.zoomAuto&&this.isResultSelected$.value===!0&&this.selectResult(this.resultSelected$.getValue())}},{id:"fullExtent",title:this.languageService.translate.instant("toastPanel.fullExtent"),tooltip:this.languageService.translate.instant("toastPanel.fullExtentTooltip"),icon:"open_in_full",display:()=>this.fullExtent$.pipe($t(o=>!o&&!this.isDesktop())),handler:()=>{this.fullExtent=!0}},{id:"standardExtent",title:this.languageService.translate.instant("toastPanel.standardExtent"),tooltip:this.languageService.translate.instant("toastPanel.standardExtentTooltip"),icon:"close_fullscreen",display:()=>this.fullExtent$.pipe($t(o=>o&&!this.isDesktop())),handler:()=>{this.fullExtent=!1}}]),this.computeFeatureGeoServiceStatus(),ts([this.resultSelected$,this.map.layerController.layers$]).subscribe(()=>{this.computeFeatureGeoServiceStatus()})}ngOnDestroy(){this.resultOrResolution$$&&this.resultOrResolution$$.unsubscribe(),this.isSelectedResultOutOfView$$&&this.isSelectedResultOutOfView$$.unsubscribe(),this.storageChange$$&&this.storageChange$$.unsubscribe()}buildResultEmphasis(e,n){if(this.clearFeatureEmphasis(),!e||n==="selected"&&this.zoomAuto)return;let s=oy(e.data,this.map.projection).getGeometry();if(nU(this.map.viewController,s.getExtent(),.0025)){let l=s.getExtent(),h=l[0]+(l[2]-l[0])/2,p=l[1]+(l[3]-l[1])/2,m=new An({name:"abstractFocusedOrSelectedResult",geometry:new Kn([h,p])});this.abstractFocusedOrSelectedResult=hb(m,this.map.projection),this.abstractFocusedOrSelectedResult.meta.style=cC(Object.assign({},{feature:this.abstractFocusedOrSelectedResult},n==="selected"?this.queryState.queryOverlayStyleSelection:this.queryState.queryOverlayStyleFocus)),this.abstractFocusedOrSelectedResult.meta.style.setZIndex(2e3),this.map.queryResultsOverlay.addFeature(this.abstractFocusedOrSelectedResult,$n.None)}}clearFeatureEmphasis(){this.abstractFocusedOrSelectedResult&&(this.map.queryResultsOverlay.removeFeature(this.abstractFocusedOrSelectedResult),this.abstractFocusedOrSelectedResult=void 0)}getTitle(e){return Im(e)}focusResult(e){this.focusedResult$.next(e),this.map.queryResultsOverlay.removeFeature(e.data),e.data.meta.style=cC(Object.assign({},{feature:e.data},this.queryState.queryOverlayStyleFocus)),e.data.meta.style.setZIndex(2e3),this.map.queryResultsOverlay.addFeature(e.data,$n.None)}unfocusResult(e,n){this.focusedResult$.next(void 0),!(!n&&this.store.state.get(e).focused)&&(this.map.queryResultsOverlay.removeFeature(e.data),e.data.meta.style=W2(Object.assign({},{feature:e.data},this.queryState.queryOverlayStyle)),e.data.meta.style.setZIndex(void 0),this.map.queryResultsOverlay.addFeature(e.data,$n.None))}selectResult(e){this.store.state.update(e,{focused:!0,selected:!0},!0),this.resultSelected$.next(e),e.data.properties&&e.data.properties.target==="iframe"?this.setHtmlDisplay(!0):this.setHtmlDisplay(!1);let n=[];for(let o of this.store.all())o.meta.id===e.meta.id?(o.data.meta.style=cC(Object.assign({},{feature:o.data},this.queryState.queryOverlayStyleSelection)),o.data.meta.style.setZIndex(2e3)):o.data.meta.style=W2(Object.assign({},{feature:o.data},this.queryState.queryOverlayStyle)),n.push(o.data);if(this.map.queryResultsOverlay.removeFeatures(n),this.map.queryResultsOverlay.addFeatures(n,$n.None),this.zoomAuto){let o=this.format.readFeature(this.resultSelected$.getValue().data,{dataProjection:this.resultSelected$.getValue().data.projection,featureProjection:this.map.projection});Fu(this.map.viewController,[o],$n.Default)}this.isResultSelected$.next(!0),this.initialized=!1}unselectResult(){this.resultSelected$.next(void 0),this.isResultSelected$.next(!1),this.setHtmlDisplay(!1),this.store.state.clear();let e=[];for(let n of this.store.all())n.data.meta.style=W2(Object.assign({},{feature:n.data},this.queryState.queryOverlayStyle)),e.push(n.data);this.map.queryResultsOverlay.setFeatures(e,$n.None,"map")}handleWksSelection(){let e=this.store.entities$.getValue(),n=[...new Set(e.map(s=>s.source.title))],o=this.workspaceState.store.entities$.getValue();o.length&&o.filter(l=>n.includes(l.title)).map(l=>{l.entityStore.state.updateMany(l.entityStore.view.all(),{selected:!1})})}clear(){this.handleWksSelection(),this.clearFeatureEmphasis(),this.map.queryResultsOverlay.clear(),this.store.clear(),this.unselectResult(),this.setHtmlDisplay(!1)}isMobile(){return this.mediaService.getMedia()===bu.Mobile}isDesktop(){return this.mediaService.isDesktop()}handleKeyboardEvent(e){e.keyCode===37?this.previousResult():e.keyCode===39&&this.nextResult()}previousResult(){if(!this.resultSelected$.value)return;let e=this.results.indexOf(this.resultSelected$.value),n=this.results[--e];n&&this.selectResult(n)}nextResult(){if(!this.resultSelected$.value)return;let e=this.results.indexOf(this.resultSelected$.value),n=this.results[++e];n&&this.selectResult(n)}hasGeoService(){return this.getGeoServices().length}getGeoServices(){let e=this.resultSelected$.getValue();if(!e)return[];let n=[],o=Object.keys(e.data.properties);return Object.entries(e.data.properties).forEach(s=>{let[l,h]=s,p=this.propertyTypeDetectorService.getGeoService(h,o),m=Object.assign({},p,{propertyForUrl:void 0});p&&(m.propertyForUrl=l,n.push(m))}),n}handleLayer(){let e=this.map.layerController.all.map(o=>o.id),n=this.potententialLayerToAdd$.getValue();if(n||this.computeFeatureGeoServiceStatus(),n=this.potententialLayerToAdd$.getValue(),e.includes(n.id)){let o=this.map.layerController.getById(n.id);o&&(this.map.layerController.remove(o),this.potententialLayerisAdded$.next(!1))}else this.layerService.createAsyncLayer(n.sourceOptions).subscribe(o=>{this.map.layersAddedByClick$.next([o]),this.map.layerController.add(o),this.potententialLayerisAdded$.next(!0)})}computeFeatureGeoServiceStatus(){let e=this.resultSelected$.getValue();if(!e)return;let n=this.getGeoServices();if(n.length){let o=n[0],s=this.computeSourceOptionsFromProperties(e.data.properties,o),l=wI(s.sourceOptions);this.potententialLayerToAdd$.next({id:l,sourceOptions:s});let h=this.map.layerController.all.map(p=>p.id);this.potententialLayerisAdded$.next(!!h.includes(l))}}computeSourceOptionsFromProperties(e,n){let s=Object.keys(e).filter(g=>n.propertiesForLayerName.includes(g)),l=e[s[0]],h=e[n.propertyForUrl],p=l,m;return["arcgisrest","imagearcgisrest","tilearcgisrest"].includes(n.type)&&(m=l,p=void 0),Ln.removeUndefined({sourceOptions:{type:n.type||"wms",url:h,optionsFromCapabilities:!0,optionsFromApi:!0,params:{LAYERS:p,LAYER:m}}})}zoomTo(){let e=this.format.readFeature(this.resultSelected$.getValue().data,{dataProjection:this.resultSelected$.getValue().data.projection,featureProjection:this.map.projection});Fu(this.map.viewController,[e],$n.Zoom)}swipe(e){e===r.SWIPE_ACTION.RIGHT?this.previousResult():e===r.SWIPE_ACTION.LEFT?this.nextResult():e===r.SWIPE_ACTION.UP?this.opened=!0:e===r.SWIPE_ACTION.DOWN&&(this.opened=!1)}onToggleClick(e){e.target.className==="igo-panel-title"&&(this.opened=!this.opened)}onTriggerAction(e){let n=e.args||[];e.handler(...n)}setHtmlDisplay(e){e===!0?(this.isHtmlDisplay=!0,this.windowHtmlDisplayEvent.emit(!0)):(this.isHtmlDisplay=!1,this.windowHtmlDisplayEvent.emit(!1))}isHtmlAndDesktop(){return!!(this.isHtmlDisplay&&this.isDesktop())}resizeWindows(){this.storageService.set("fullExtent",!this.fullExtent),this.fullExtent?this.reduceWindow():this.enlargeWindows()}reduceWindow(){this.fullExtent=!1}enlargeWindows(){this.fullExtent=!0}static \u0275fac=function(n){return new(n||r)(ie(Ol),ie(wn),ie(fL),ie(OU),ie(gL),ie(Ri),ie(CI),ie(Lu))};static \u0275cmp=gt({type:r,selectors:[["app-toast-panel"]],hostVars:2,hostBindings:function(n,o){n&1&&Oe("keydown.escape",function(l){return o.onEscapeHandler(l)},!1,_g)("keydown.backspace",function(l){return o.onBackHandler(l)},!1,_g)("keydown.z",function(l){return o.onZoomHandler(l)},!1,_g),n&2&&vo("visibility",o.displayStyle)},inputs:{map:"map",store:"store",opened:"opened",hasFeatureEmphasisOnSelection:"hasFeatureEmphasisOnSelection"},outputs:{openedChange:"openedChange",fullExtentEvent:"fullExtentEvent",windowHtmlDisplayEvent:"windowHtmlDisplayEvent"},standalone:!0,features:[yt],decls:3,vars:2,consts:[["toast",""],["content",""],["class","swipe-fix",3,"swipeleft","swiperight","swipeup","swipedown",4,"ngIf","ngIfElse"],["tabindex","0",3,"ngClass","id","title","click","keydown",4,"ngIf"],["tabindex","0",3,"click","keydown","ngClass","id","title"],["id","igo-actionbar","panelLeftButton","",3,"store","withIcon","icon","withTitle","horizontal","mode"],["mat-icon-button","","igoStopPropagation","","panelLeftButton","","matTooltipShowDelay","500",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelLeftButton","","tooltip-position","below","matTooltipShowDelay","500",3,"matTooltip","color","click",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelLeftButton","","matTooltipShowDelay","500",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelRightButton","","matTooltipShowDelay","500",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelRightButton","","matTooltipShowDelay","500",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelRightButton","",3,"click"],[1,"toast-content"],[3,"map","feature","htmlDisplayEvent",4,"ngIf"],[3,"map","store","showIcons","withZoomButton","tabsMode","resultFocus","resultUnfocus","resultSelect",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelLeftButton","","matTooltipShowDelay","500",3,"click","matTooltip"],["aria-hidden","false","matBadgeColor","accent","matBadgeSize","small",3,"matBadge","matBadgeHidden"],["mat-icon-button","","igoStopPropagation","","panelLeftButton","","tooltip-position","below","matTooltipShowDelay","500",3,"click","matTooltip","color"],["mat-icon-button","","igoStopPropagation","","panelLeftButton","","matTooltipShowDelay","500",3,"click","disabled","matTooltip"],["mat-icon-button","","igoStopPropagation","","panelRightButton","","matTooltipShowDelay","500",3,"click","disabled","matTooltip"],["mat-icon-button","","igoStopPropagation","","panelRightButton","","matTooltipShowDelay","500",3,"click","matTooltip"],[3,"htmlDisplayEvent","map","feature"],[3,"resultFocus","resultUnfocus","resultSelect","map","store","showIcons","withZoomButton","tabsMode"],[1,"swipe-fix",3,"swipeleft","swiperight","swipeup","swipedown"],[3,"ngTemplateOutlet"]],template:function(n,o){if(n&1&&We(0,B0t,2,3,"ng-template",null,0,Vo)(2,V0t,2,1,"div",2),n&2){let s=ji(1);q(2),ee("ngIf",o.isMobile())("ngIfElse",s)}},dependencies:[EE,kr,H2,dF,cF,bn,Cr,jn,er,Er,Ar,qr,gn,Ry,T2,nL,uv,Wh,hn],styles:["[_nghost-%COMP%]{-moz-box-shadow:0px 0px 2px 0px #dddddd;-webkit-box-shadow:0px 0px 2px 0px #dddddd;-o-box-shadow:0px 0px 2px 0px #dddddd;box-shadow:0 0 2px #ddd}[_nghost-%COMP%]{background-color:#fff;transition:height .28s cubic-bezier(.4,0,.2,1);padding:5px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]{width:100%;min-width:100%}}[_nghost-%COMP%]   igo-panel[_ngcontent-%COMP%]     .igo-panel-header:hover{cursor:pointer}[_nghost-%COMP%]   igo-panel[_ngcontent-%COMP%]{outline:none}[_nghost-%COMP%]   igo-panel[_ngcontent-%COMP%]     .igo-panel-header   [panelleftbutton], [_nghost-%COMP%]   igo-panel[_ngcontent-%COMP%]     .igo-panel-header   [panelrightbutton]{margin:0}[_nghost-%COMP%]   igo-panel[_ngcontent-%COMP%]     .igo-panel-content{-webkit-user-select:auto!important;user-select:auto!important}[_nghost-%COMP%]   igo-feature-details[_ngcontent-%COMP%]     iframe{min-height:24vh}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]   igo-feature-details[_ngcontent-%COMP%]     iframe{min-height:30vh}}[_nghost-%COMP%]   app-full-toast-panel-opened[_ngcontent-%COMP%]   igo-feature-details[_ngcontent-fiq-c23][_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{min-height:450px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]   app-full-toast-panel-opened[_ngcontent-%COMP%]   igo-feature-details[_ngcontent-fiq-c23][_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{min-height:350px}}[_nghost-%COMP%]   .swipe-fix[_ngcontent-%COMP%]{touch-action:pinch-zoom!important}.app-toast-panel-html[_ngcontent-%COMP%]{height:30vh;max-height:fit-content;width:60vw}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-toast-panel-html[_ngcontent-%COMP%]{width:100%;min-width:100%;height:34vh}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){.app-toast-panel-html[_ngcontent-%COMP%]{width:500px}}.app-toast-panel-html-large[_ngcontent-%COMP%]{height:55vh;width:60vw}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-toast-panel-html-large[_ngcontent-%COMP%]{width:100%;min-width:100%;max-height:65vh;height:55vh}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){.app-toast-panel-html-large[_ngcontent-%COMP%]{width:500px}}.app-toast-panel-html-large[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]{height:100%;width:100%;overflow:hidden}.app-toast-panel-opened[_ngcontent-%COMP%]{height:auto;max-height:30vh;width:42vw;max-width:600px;margin-bottom:7px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-toast-panel-opened[_ngcontent-%COMP%]{max-height:34vh;width:100%;min-width:100%}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){.app-toast-panel-opened[_ngcontent-%COMP%]{width:500px}}.app-toast-panel-opened[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]{height:100%;width:100%;max-height:calc(30vh - 34px)}.app-full-toast-panel-opened[_ngcontent-%COMP%]{height:auto;max-height:65vh;width:45vw}.app-full-toast-panel-opened[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]{height:100%;width:100%;max-height:calc(65vh - 41px)}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){.app-full-toast-panel-opened[_ngcontent-%COMP%]{width:500px;max-height:500px}.app-full-toast-panel-opened[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]{max-height:44vh}}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-full-toast-panel-opened[_ngcontent-%COMP%]{width:100%;min-width:100%;max-height:65vh}}.app-toast-panel-collapsed[_ngcontent-%COMP%]{height:46px!important;width:42vw;max-width:600px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-toast-panel-collapsed[_ngcontent-%COMP%]{width:100%;min-width:100%;height:35px!important}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){.app-toast-panel-collapsed[_ngcontent-%COMP%]{width:500px}}.app-full-toast-panel-collapsed[_ngcontent-%COMP%]{height:46px!important;width:45vw}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-full-toast-panel-collapsed[_ngcontent-%COMP%]{width:100%;min-width:100%;height:35px!important}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){.app-full-toast-panel-collapsed[_ngcontent-%COMP%]{width:500px}}.app-toast-panel-html-collapsed[_ngcontent-%COMP%]{height:46px!important;width:60vw}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-toast-panel-html-collapsed[_ngcontent-%COMP%]{width:100%;min-width:100%;height:35px!important}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){.app-toast-panel-html-collapsed[_ngcontent-%COMP%]{width:500px}}#app-toast-panel-opened-max-height[_ngcontent-%COMP%]{height:30vh!important}#app-full-toast-panel-opened-max-height[_ngcontent-%COMP%]{height:65vh!important}"],changeDetection:0})}return r})();var RU=(()=>{class r{configService;storageService;nbVisit;showAgain;igoVersionDifferentFromStorage=!1;constructor(e,n){this.configService=e,this.storageService=n,this.igoVersionDifferentFromStorage=this.isVersionDifferentFromStorage(),this.setStorageConfig()}setStorageConfig(){this.nbVisit=Number(this.storageService.get("welcomeWindow_nbVisit")),this.nbVisit||(this.nbVisit=0),this.storageService.set("welcomeWindow_nbVisit",this.nbVisit+=1)}isVersionDifferentFromStorage(){return this.storageService.get("version")!==sD(this.configService)}hasWelcomeWindow(){return this.storageService.get("welcomeWindow_showAgain")===!1||this.storageService.get("welcomeWindow_showAgain")==="false"?this.nbVisit>=this.configService.getConfig("welcomeWindow.nbVisitToShowAgain")?(this.storageService.set("welcomeWindow_nbVisit",0),this.storageService.remove("welcomeWindow_showAgain"),!0):this.configService.getConfig("welcomeWindow.showAgainOnNewIGOVersion")&&this.igoVersionDifferentFromStorage?(this.storageService.set("welcomeWindow_nbVisit",0),this.storageService.remove("welcomeWindow_showAgain"),!0):!1:typeof this.configService.getConfig("welcomeWindow.nbVisitToShow")<"u"&&this.nbVisit>this.configService.getConfig("welcomeWindow.nbVisitToShow")?(this.storageService.set("welcomeWindow_showAgain",!1),!1):this.configService.getConfig("welcomeWindow")}getConfig(){let e=new _S;return e.disableClose=!0,e.autoFocus=!0,e.maxWidth="500px",e}afterClosedWelcomeWindow(){this.storageService.set("welcomeWindow_showAgain",this.showAgain)}static \u0275fac=function(n){return new(n||r)(xe(Ri),xe(wo))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function $0t(r,i){if(r&1){let e=dt();ne(0,"div",1)(1,"mat-toolbar",2)(2,"h4"),Ye(3),Ne(4,"translate"),ce(),wt(5,"span",3),ne(6,"label",4)(7,"input",5),bs("ngModelChange",function(o){Re(e);let s=ae();return Os(s.showAgain,o)||(s.showAgain=o),Fe(o)}),Oe("click",function(){Re(e);let o=ae();return Fe(o.setShowAgain())}),ce(),Ye(8),Ne(9,"translate"),ce()(),ne(10,"div",6),wt(11,"igo-custom-html",7),Ne(12,"async"),ce(),wt(13,"p"),ne(14,"div",8)(15,"igo-interactive-tour",9),Oe("click",function(){Re(e);let o=ae();return Fe(o.closeWelcomeWindow())}),ce(),ne(16,"button",10),Ye(17),Ne(18,"translate"),ce()()()}if(r&2){let e=ae();q(3),Si(je(4,6,"welcomeWindow.title")),q(4),vs("ngModel",e.showAgain),q(),Qt(" ",je(9,8,"welcomeWindow.notShowCheck")," "),q(3),ee("html",je(12,10,e.html$)),q(4),ee("discoverTitleInLocale$",e.discoverTitleInLocale$),q(2),Qt(" ",je(18,12,"welcomeWindow.closeButton")," ")}}var P2e=(()=>{class r{dialog;welcomeWindowService;configService;languageService;showAgain=!1;discoverTitleInLocale$;title$$;html$=new mt(void 0);constructor(e,n,o,s){this.dialog=e,this.welcomeWindowService=n,this.configService=o,this.languageService=s,this.discoverTitleInLocale$=Vt(this.configService.getConfig("welcomeWindow.discoverTitleInLocale",this.configService.getConfig("title")))}ngOnInit(){this.computeHtml()}closeWelcomeWindow(){this.dialog.closeAll()}computeHtml(){let e=0,n=!0,o=new Date(this.configService.getConfig("version.releaseDate")),s=this.configService.getConfig("version.releaseDateApp");if(s){let h=new Date(s);isNaN(h.getDate())?(console.log("The releaseDateApp config is not a valid date format"),n=!1):(e=1,o=h)}let l="";if(n){let h=o.getDate()+e;h<10&&(h="0"+h);let p=o.getMonth()+1;p<10&&(p="0"+p),l=`${o.getFullYear()}-${p}-${h}`}else l=s;return this.title$$=this.languageService.translate.get(this.configService.getConfig("title","")).pipe($t(h=>this.languageService.translate.instant("welcomeWindow.html",{title:h,description:this.configService.getConfig("description",""),version:sD(this.configService),releaseDate:l||""}))).subscribe(h=>this.html$.next(h)),this.html$}setShowAgain(){this.welcomeWindowService.showAgain=this.showAgain}ngOnDestroy(){this.title$$&&this.title$$.unsubscribe()}static \u0275fac=function(n){return new(n||r)(ie(vu),ie(RU),ie(Ri),ie(wn))};static \u0275cmp=gt({type:r,selectors:[["app-welcome-window"]],standalone:!0,features:[yt],decls:2,vars:3,consts:[["class","welcome-window",4,"ngIf"],[1,"welcome-window"],["color","primary"],[1,"spacer"],[1,"mat-body-2"],["id","doNotShowCheck","type","checkbox",3,"ngModelChange","click","ngModel"],["mat-dialog-content","",1,"text"],[3,"html"],[1,"button-container"],["id","tour-button","styleButton","raised",3,"click","discoverTitleInLocale$"],["mat-raised-button","","color","primary","mat-dialog-close","",1,"button-close"]],template:function(n,o){n&1&&(We(0,$0t,19,14,"div",0),Ne(1,"async")),n&2&&ee("ngIf",je(1,1,o.html$))},dependencies:[gn,FB,RB,uu,O9,sc,$l,gm,ff,HY,EU,mL,bn,Ua,VB,Wh,hn,kr],styles:["[_nghost-%COMP%]{display:block;padding:16px}[_nghost-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1 1 auto}[_nghost-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}[_nghost-%COMP%]   #doNotShowCheck[_ngcontent-%COMP%]{margin-right:5px}[_nghost-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:revert}[_nghost-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   .mat-mdc-dialog-container[_ngcontent-%COMP%]{z-index:1000;box-shadow:0 0 0 1000em #0009;transform:translate(-50%)}[_nghost-%COMP%]     .custom-html{padding:0!important}"]})}return r})();var U0t=["mapBrowser"],z0t=["searchBar"],G0t=r=>({"igo-attribution-offset":r}),H0t=r=>({disabled:r});function W0t(r,i){if(r&1){let e=dt();ne(0,"igo-menu-button",30),Oe("openSidenav",function(){Re(e);let o=ae();return Fe(o.onToggleSidenavClick())}),ce()}if(r&2){let e=ae();oi("mat-elevation-z2",!e.sidenavOpened),ee("sidenavOpened",e.sidenavOpened)}}function q0t(r,i){if(r&1){let e=dt();ne(0,"igo-search-bar",31,2),Oe("searchTermChange",function(o){Re(e);let s=ae();return Fe(s.onSearchTermChange(o))})("pointerSummaryStatus",function(o){Re(e);let s=ae();return Fe(s.onPointerSummaryStatusChange(o))})("searchResultsGeometryStatus",function(o){Re(e);let s=ae();return Fe(s.onSearchResultsGeometryStatusChange(o))})("reverseSearchCoordsFormatStatus",function(o){Re(e);let s=ae();return Fe(s.onReverseCoordsFormatStatusChange(o))})("search",function(o){Re(e);let s=ae();return Fe(s.onSearch(o))})("clearFeature",function(){Re(e);let o=ae();return Fe(o.onClearSearch())})("searchSettingsChange",function(){Re(e);let o=ae();return Fe(o.onSearchSettingsChange())}),ce()}if(r&2){let e=ae();oi("mat-elevation-z2",!e.sidenavOpened),ee("term",e.searchBarTerm)("termSplitter",e.termSplitter)("minLength",e.minSearchTermLength)("searchSettings",!0)("forceNA",e.appConfig.app==null?null:e.appConfig.app.forceCoordsNA)("store",e.searchStore)("pointerSummaryEnabled",e.igoSearchPointerSummaryEnabled)("searchResultsGeometryEnabled",e.searchResultsGeometryEnabled)("reverseSearchCoordsFormatEnabled",e.igoReverseSearchCoordsFormatEnabled)}}function Y0t(r,i){if(r&1&&wt(0,"igo-offline-button",32),r&2){let e=ae();ee("map",e.map)("@controlsOffsetY",e.getControlsOffsetY())("@mobileOffsetY",e.getToastPanelStatus())}}function K0t(r,i){if(r&1&&wt(0,"igo-home-extent-button",33),r&2){let e=ae();ee("map",e.map)("extentOverride",e.homeExtent)("centerOverride",e.homeCenter)("zoomOverride",e.homeZoom)}}function Z0t(r,i){r&1&&wt(0,"igo-wake-lock-button",34)}function Q0t(r,i){if(r&1&&wt(0,"igo-geolocate-button",32),r&2){let e=ae();ee("map",e.map)("@controlsOffsetY",e.getControlsOffsetY())("@mobileOffsetY",e.getToastPanelStatus())}}function X0t(r,i){if(r&1&&wt(0,"igo-zoom-button",35),r&2){let e=ae();ee("map",e.map)("@controlsOffsetY",e.getControlsOffsetY())}}function J0t(r,i){if(r&1&&wt(0,"igo-user-button",32),r&2){let e=ae();ee("map",e.map)("@controlsOffsetY",e.getControlsOffsetY())("@mobileOffsetY",e.getToastPanelStatus())}}function e_t(r,i){if(r&1){let e=dt();ne(0,"app-expansion-panel-button",36),Oe("expand",function(o){Re(e);let s=ae();return Fe(s.handleToggleExpansionPanel(o))}),ce()}if(r&2){let e=ae();ee("expanded",e.expansionPanelExpanded)}}function t_t(r,i){if(r&1){let e=dt();ne(0,"button",49),Ne(1,"translate"),Oe("click",function(){Re(e);let o=ae().ngIf,s=ae(2);return Fe(s.addFeature(o))}),ne(2,"mat-icon"),Ye(3,"add"),ce()()}if(r&2){let e=ae().ngIf;ee("disabled",e.layer.options.sourceOptions.edition.addButton===!1)("matTooltip",je(1,2,"workspace.addFeature"))}}function i_t(r,i){if(r&1&&wt(0,"igo-actionbar",50),r&2){let e=ae().ngIf,n=ae(2);ee("store",e.actionStore)("withIcon",!0)("withTitle",n.actionbarWithTitle)("horizontal",!0)("withToggleButton",n.actionbarMode==="overlay")("iconColor","primary")("color","primary")("mode",n.actionbarMode)("overlayClass",n.workspaceMenuClass)}}function n_t(r,i){r&1&&(ne(0,"mat-icon"),Ye(1,"frame_inspect"),ce())}function r_t(r,i){r&1&&(ne(0,"mat-icon"),Ye(1,"zoom_in "),ce())}function o_t(r,i){if(r&1){let e=dt();ne(0,"button",51),Ne(1,"async"),Ne(2,"translate"),Oe("click",function(){Re(e);let o=ae(3);return Fe(o.zoomToSelectedFeatureWks())}),We(3,n_t,2,0,"mat-icon"),Ne(4,"async"),We(5,r_t,2,0,"mat-icon"),ce()}if(r&2){let e=ae(3);ee("disabled",je(1,3,e.workspaceState.workspaceSelection$).length===0)("matTooltip",je(2,5,"toastPanel.zoomOnFeaturesTooltip")),q(3),vn(je(4,7,e.workspaceState.workspaceSelection$).length>1?3:5)}}function s_t(r,i){if(r&1){let e=dt();ne(0,"igo-entity-table-paginator",52),Oe("paginatorChange",function(o){Re(e);let s=ae(3);return Fe(s.paginatorChange(o))}),ce()}if(r&2){let e=ae().ngIf,n=ae(2);ee("store",e.entityStore)("entitySortChange$",n.workspaceEntitySortChange$)("paginatorOptions",n.paginatorOptions)}}function a_t(r,i){if(r&1){let e=dt();zn(0),ne(1,"div",41)(2,"div",42)(3,"button",43),Ne(4,"translate"),Ne(5,"translate"),Oe("click",function(){let o=Re(e).ngIf;return Fe(o.layer.visible=!o.layer.visible)}),ne(6,"mat-icon",44),Ne(7,"async"),Ye(8),ce()(),We(9,t_t,4,4,"button",45)(10,i_t,1,9,"igo-actionbar",46)(11,o_t,6,9,"button",47),ce(),We(12,s_t,1,3,"igo-entity-table-paginator",48),ce(),Gn()}if(r&2){let e=i.ngIf,n=ae(2);q(3),ee("color",e.layer.visible?"primary":"default")("matTooltip",e.layer.visible?je(4,8,"igo.geo.layer.hideLayer"):je(5,10,"igo.geo.layer.showLayer")),q(3),ee("ngClass",fo(14,H0t,je(7,12,e.inResolutionRange$)!==!0)),q(2),Qt(" ",e.layer.visible?"visibility":"visibility_off"," "),q(),ee("ngIf",n.isEditionWorkspace(e)),q(),ee("ngIf",e.actionStore),q(),ee("ngIf",n.workspaceVisibility()),q(),ee("ngIf",n.workspaceVisibility())}}function l_t(r,i){if(r&1){let e=dt();ne(0,"igo-entity-table",54),Oe("entitySortChange",function(){Re(e);let o=ae(3);return Fe(o.entitySortChange())})("entitySelectChange",function(o){Re(e);let s=ae(3);return Fe(s.entitySelectChange(o))}),ce()}if(r&2){let e=ae().ngIf,n=ae(2);Hr(n.isEditionWorkspace(e)?"edition-table":""),ee("paginator",n.workspacePaginator)("store",e.entityStore)("template",e.meta.tableTemplate)}}function c_t(r,i){if(r&1&&(zn(0),We(1,l_t,1,5,"igo-entity-table",53),ne(2,"span"),Ye(3),Ne(4,"translate"),ce(),Gn()),r&2){let e=i.ngIf,n=ae(2);q(),ee("ngIf",e.entityStore&&e.meta&&e.meta.tableTemplate&&n.workspaceVisibility()),q(2),Si(je(4,2,n.workspaceNotAvailableMessage))}}function d_t(r,i){if(r&1){let e=dt();ne(0,"app-expansion-panel",37),Ne(1,"async"),bs("expandedChange",function(o){Re(e);let s=ae();return Os(s.expansionPanelExpanded,o)||(s.expansionPanelExpanded=o),Fe(o)}),zn(2,38),ne(3,"igo-workspace-selector",39),Oe("changeWorkspace",function(o){Re(e);let s=ae();return Fe(s.workspaceState.setActiveWorkspaceByTitle(o))})("disableSwitch",function(o){Re(e);let s=ae();return Fe(s.workspaceSwitchDisabled=o)})("relationLayers",function(o){Re(e);let s=ae();return Fe(s.refreshRelationsWorkspace(o))})("rowsInMapExtentCheckCondition",function(o){Re(e);let s=ae();return Fe(s.workspaceState.rowsInMapExtentCheckCondition$.next(o))}),ce(),We(4,a_t,13,16,"ng-container",40),Ne(5,"async"),Gn(),We(6,c_t,5,4,"ng-container",40),Ne(7,"async"),ce()}if(r&2){let e=ae();ee("backdropShown",e.expansionPanelBackdropShown),vs("expanded",e.expansionPanelExpanded),ee("maximized",je(1,10,e.workspaceState.workspaceMaximize$))("@expansionPanelSize",e.getExpansionPanelStatus())("@toastOffsetY",e.isMobile()&&!e.toastPanelOpened&&e.queryState.store.entities$.value.length>0&&!e.expansionPanelExpanded?"true":"false"),q(3),ee("store",e.workspaceStore)("disabled",e.workspaceSwitchDisabled)("map",e.map),q(),ee("ngIf",je(5,12,e.selectedWorkspace$)),q(2),ee("ngIf",je(7,14,e.selectedWorkspace$))}}function u_t(r,i){if(r&1){let e=dt();ne(0,"igo-workspace-widget-outlet",55),Oe("deactivateWidget",function(){Re(e);let o=ae();return Fe(o.onDeactivateWorkspaceWidget())}),ce()}if(r&2){let e=i.ngIf;ee("workspace",e)}}function h_t(r,i){if(r&1){let e=dt();ne(0,"app-toast-panel",56),Ne(1,"async"),Oe("openedChange",function(o){Re(e);let s=ae();return Fe(s.toastOpenedChange(o))})("fullExtentEvent",function(o){Re(e);let s=ae();return Fe(s.fullExtent=o)})("windowHtmlDisplayEvent",function(o){Re(e);let s=ae();return Fe(s.setToastPanelHtmlDisplay(o))}),ce()}if(r&2){let e=ae();ee("map",e.map)("store",e.queryStore)("hasFeatureEmphasisOnSelection",e.appConfig.hasFeatureEmphasisOnSelection)("@toastPanelOffsetX",je(1,7,e.toastPanelOffsetX$))("@toastPanelOffsetY",e.getToastPanelOffsetY())("@toastPanelMobileSidenav",e.isMobile()&&e.sidenavOpened||e.isTablet()&&e.isPortrait()&&e.sidenavOpened)("opened",e.toastPanelOpened)}}function p_t(r,i){if(r&1&&wt(0,"igo-actionbar",57),r&2){let e=ae();ee("store",e.contextMenuStore)("withIcon",!1)("horizontal",!0)}}var FU=(()=>{class r{analyticsListenerService;route;workspaceState;authService;mediaService;layerService;dataSourceService;cdRef;capabilitiesService;contextState;mapState;searchState;queryState;toolState;searchSourceService;configService;importService;http;languageService;messageService;welcomeWindowService;dialogWindow;queryService;storageService;editionWorkspaceService;directionState;configFileToGeoDBService;appConfig;toastPanelOffsetX$=new mt(void 0);sidenavOpened$=new mt(!1);minSearchTermLength=2;hasGeolocateButton=!0;showMenuButton=!0;showSearchBar=!0;workspaceNotAvailableMessage="workspace.disabled.resolution";workspacePaginator;workspaceEntitySortChange$=new mt(!1);workspaceSwitchDisabled=!1;paginatorOptions={pageSize:50,pageSizeOptions:[1,5,10,20,50,100,500]};workspaceMenuClass="workspace-menu";fullExtent;workspaceMaximize$$=[];matDialogRef$=new mt(void 0);searchBarTerm="";onSettingsChange$=new mt(void 0);termDefinedInUrl=!1;termSplitter="|";termDefinedInUrlTriggered=!1;addedLayers$$=[];contextMenuStore=new Em([]);contextMenuCoord;contextLoaded=!1;context$$;openSidenav$$;sidenavMediaAndOrientation$$;igoSearchPointerSummaryEnabled;igoReverseSearchCoordsFormatEnabled;toastPanelForExpansionOpened=!0;activeWidget$$;showToastPanelForExpansionToggle=!1;selectedWorkspace$=new mt(void 0);routeParams;toastPanelHtmlDisplay=!1;homeExtent;homeCenter;homeZoom;isTouchScreen;mapBrowser;searchBar;get map(){return this.mapState.map}get sidenavOpened(){return this.sidenavOpened$.value}set sidenavOpened(e){this.sidenavOpened$.next(e)}get toastPanelOpened(){return this._toastPanelOpened}set toastPanelOpened(e){e===!this._toastPanelOpened&&(this._toastPanelOpened=e,this.cdRef.detectChanges())}_toastPanelOpened;isMobile(){return this.mediaService.getMedia()===bu.Mobile}isTablet(){return this.mediaService.getMedia()===bu.Tablet}isLandscape(){return this.mediaService.getOrientation()===x_.Landscape}isPortrait(){return this.mediaService.getOrientation()===x_.Portrait}get backdropShown(){return(this.isMobile()||this.isTablet()&&this.isPortrait())&&this.sidenavOpened}get expansionPanelExpanded(){return this.workspaceState.workspacePanelExpanded}set expansionPanelExpanded(e){this.workspaceState.workspacePanelExpanded=e,e===!0?this.map.viewController.setPadding({bottom:280}):this.map.viewController.setPadding({bottom:0})}get contextUri(){return this.contextState.context$?.getValue()?this.contextState.context$.getValue().uri:void 0}get expansionPanelBackdropShown(){return this.expansionPanelExpanded&&this.toastPanelForExpansionOpened}get actionbarMode(){return c1.Overlay}get actionbarWithTitle(){return this.actionbarMode===c1.Overlay}get searchStore(){return this.searchState.store}get searchResultsGeometryEnabled(){return this.searchState.searchResultsGeometryEnabled$.value}get queryStore(){return this.queryState.store}get toolbox(){return this.toolState.toolbox}get toastPanelContent(){let e;return this.workspace!==void 0&&this.workspace.hasWidget&&(e="workspace"),e}get workspaceStore(){return this.workspaceState.store}get workspace(){return this.workspaceState.workspace$.value}constructor(e,n,o,s,l,h,p,m,f,g,y,_,w,A,k,R,$,H,oe,se,ge,ue,pe,Ce,_e,de,te){this.analyticsListenerService=e,this.route=n,this.workspaceState=o,this.authService=s,this.mediaService=l,this.layerService=h,this.dataSourceService=p,this.cdRef=m,this.capabilitiesService=f,this.contextState=g,this.mapState=y,this.searchState=_,this.queryState=w,this.toolState=A,this.searchSourceService=k,this.configService=R,this.importService=$,this.http=H,this.languageService=oe,this.messageService=se,this.welcomeWindowService=ge,this.dialogWindow=ue,this.queryService=pe,this.storageService=Ce,this.editionWorkspaceService=_e,this.directionState=de,this.configFileToGeoDBService=te,this.analyticsListenerService.listen(),this.handleAppConfigs(),this.storageService.set("version",sD(this.configService)),this.fullExtent=this.storageService.get("fullExtent"),this._toastPanelOpened=this.storageService.get("toastOpened")!==!1,this.igoSearchPointerSummaryEnabled=this.configService.getConfig("hasSearchPointerSummary"),this.igoSearchPointerSummaryEnabled===void 0&&(this.igoSearchPointerSummaryEnabled=this.storageService.get("searchPointerSummaryEnabled")||!1),this.igoReverseSearchCoordsFormatEnabled=this.storageService.get("reverseSearchCoordsFormatEnabled")||!1,this.isTouchScreen=this.mediaService.isTouchScreen()}ngOnInit(){window.IGO=this,this.searchState.searchTermSplitter$.next(this.termSplitter),this.initWelcomeWindow(),this.route.queryParams.subscribe(n=>{this.readLanguageParam(n)}),this.authService.authenticate$.subscribe(()=>{this.contextLoaded=!1}),this.context$$=this.contextState.context$.subscribe(n=>this.onChangeContext(n));let e=[{id:"coordinates",title:"coordinates",handler:()=>this.searchCoordinate(this.contextMenuCoord)},{id:"googleMaps",title:"googleMap",handler:()=>this.openGoogleMaps(this.contextMenuCoord)},{id:"googleStreetView",title:"googleStreetView",handler:()=>this.openGoogleStreetView(this.contextMenuCoord)}];this.contextMenuStore.load(e),this.queryStore.count$.pipe(zC()).subscribe(([n,o])=>{this.map.viewController.padding[2]=o?280:0,n===0&&o!==n&&this.isMobile()&&this.appConfig.hasExpansionPanel&&this.expansionPanelExpanded&&this.toastPanelOpened&&(this.toastPanelOpened=!1)}),this.map.ol.once("rendercomplete",()=>{this.readQueryParams(),this.appConfig.geolocate?.activateDefault!==void 0&&(this.map.geolocationController.tracking=this.appConfig.geolocate?.activateDefault)}),this.onSettingsChange$.subscribe(()=>{this.searchState.setSearchSettingsChange()}),this.searchState.selectedResult$.subscribe(n=>{n&&this.isMobile()&&this.closeSidenav()}),this.workspaceState.workspaceEnabled$.next(this.appConfig.hasExpansionPanel),this.workspaceState.store.empty$.subscribe(n=>{this.appConfig.hasExpansionPanel&&(this.workspaceState.workspaceEnabled$.next(!n),n&&(this.expansionPanelExpanded=!1),this.updateMapBrowserClass())}),this.workspaceMaximize$$.push(this.workspaceState.workspaceMaximize$.subscribe(()=>{this.updateMapBrowserClass()})),this.workspaceState.workspace$.subscribe(n=>{n?(this.selectedWorkspace$.next(n),this.expansionPanelExpanded=!0,n.layer.options.workspace?.pageSize&&n.layer.options.workspace?.pageSizeOptions?this.paginatorOptions={pageSize:n.layer.options.workspace?.pageSize,pageSizeOptions:n.layer.options.workspace?.pageSizeOptions}:this.paginatorOptions={pageSize:50,pageSizeOptions:[1,5,10,20,50,100,500]}):this.expansionPanelExpanded=!1}),this.activeWidget$$=this.workspaceState.activeWorkspaceWidget$.subscribe(n=>{n!==void 0?(this.openToastPanelForExpansion(),this.showToastPanelForExpansionToggle=!0):(this.closeToastPanelForExpansion(),this.showToastPanelForExpansionToggle=!1)}),this.openSidenav$$=this.toolState.openSidenav$.subscribe(n=>{n&&(this.openSidenav(),this.toolState.openSidenav$.next(!1))}),this.sidenavMediaAndOrientation$$=ts([this.sidenavOpened$,this.mediaService.media$,this.mediaService.orientation$]).pipe(cr(50)).subscribe(()=>this.computeToastPanelOffsetX()),this.appConfig.app.offline?.enable&&this.appConfig.importExport?.configFileToGeoDBService&&this.configFileToGeoDBService?.load(this.appConfig.importExport.configFileToGeoDBService)}handleAppConfigs(){this.appConfig=this.configService.getConfigs(),this.hasGeolocateButton=this.configService.getConfig("geolocate.button.visible",!0),this.showMenuButton=this.configService.getConfig("menu.button.visible",!0),this.showSearchBar=this.configService.getConfig("searchBar.showSearchBar",!0),this.igoSearchPointerSummaryEnabled=this.appConfig.hasSearchPointerSummary}setToastPanelHtmlDisplay(e){this.toastPanelHtmlDisplay=e,this.computeToastPanelOffsetX()}computeToastPanelOffsetX(){this.isMobile()||!this.isLandscape()?Promise.resolve().then(()=>this.toastPanelOffsetX$.next(void 0)):Promise.resolve().then(()=>this.toastPanelOffsetX$.next(this.getToastPanelExtent()))}workspaceVisibility(){let e=this.selectedWorkspace$.value;return e.inResolutionRange$.value?e.entityStore.empty$.value&&!e.layer.visible?this.workspaceNotAvailableMessage="workspace.disabled.visible":this.workspaceNotAvailableMessage="":this.workspaceNotAvailableMessage="workspace.disabled.resolution",e.inResolutionRange$.value}isEditionWorkspace(e){return e instanceof bI}addFeature(e){let n={type:"Feature",properties:{}};n.properties=this.createFeatureProperties(e.layer),this.workspaceState.rowsInMapExtentCheckCondition$.next(!1),e.editFeature(n,e)}createFeatureProperties(e){let n={};return e.options.sourceOptions.sourceFields.forEach(o=>{!o.primary&&o.visible&&(n[o.name]="")}),n}paginatorChange(e){this.workspacePaginator=e}entitySortChange(){this.workspaceEntitySortChange$.next(!0)}entitySelectChange(e){let n=this.getQuerySearchSource(),o=[];if(!((this.selectedWorkspace$.value instanceof lC||this.selectedWorkspace$.value instanceof aC)&&!this.selectedWorkspace$.value.getLayerWksOptionTabQuery())&&e&&e.added){let s=e.added.map(h=>{if(h&&h.ol&&h.ol.getProperties()._featureStore.layer&&h.ol.getProperties()._featureStore.layer.visible){let p=h.ol,m=h.ol.getProperties()._featureStore.layer,f=hb(p,m.map.projection,m.ol);f.meta.alias=this.queryService.getAllowedFieldsAndAlias(m),f.meta.title=this.queryService.getQueryTitle(f,m)||f.meta.title;let g=o.find(y=>y.title===f.meta.sourceTitle);return g||(g=new U2({title:f.meta.sourceTitle}),o.push(g)),lre(f,g)}});({request:Vt(s),reverse:!1,source:n}).request.subscribe(h=>{this.queryStore.load(h)})}}ngOnDestroy(){this.context$$.unsubscribe(),this.activeWidget$$.unsubscribe(),this.openSidenav$$.unsubscribe(),this.workspaceMaximize$$.map(e=>e.unsubscribe()),this.sidenavMediaAndOrientation$$.unsubscribe()}cancelOngoingAddLayer(){this.addedLayers$$.forEach(e=>e.unsubscribe()),this.addedLayers$$=[]}onBackdropClick(){this.closeSidenav()}onToggleSidenavClick(){this.toggleSidenav()}onDeactivateWorkspaceWidget(){this.closeToastPanelForExpansion()}closeToastPanelForExpansion(){this.toastPanelForExpansionOpened=!1}openToastPanelForExpansion(){this.toastPanelForExpansionOpened=!0}onMapQuery(e){let n=this.getQuerySearchSource(),o=[],l=e.features.map(p=>{let m=o.find(f=>f.title===p.meta.sourceTitle);if(!(this.getFeatureIsSameActiveWks(p)&&this.getWksActiveOpenInResolution()&&!this.workspace.getLayerWksOptionMapQuery?.()))return m||(m=new U2({title:p.meta.sourceTitle}),o.push(m)),lre(p,m)}).filter(p=>p!==void 0);({request:Vt(l),reverse:!1,source:n}).request.subscribe(p=>{this.queryStore.load(p)})}onSearchTermChange(e){if(this.routeParams?.search&&e!==this.routeParams.search&&this.searchState.deactivateCustomFilterTermStrategy(),this.searchBarTerm=e,this.searchState.setSearchTerm(e),e.replace(/(#[^\s]*)/g,"").trim().length<2){this.onClearSearch();return}this.onBeforeSearch()}onSearch(e){let n=e.results,o=!G2(e.research.source),s;o?s=this.searchSourceService.getEnabledSources().filter(sU):s=this.searchSourceService.getEnabledSources().filter(G2);let l=this.searchStore.entities$.value.filter(h=>h.source!==e.research.source&&s.includes(h.source)).concat(n);this.searchStore.updateMany(l)}onSearchResultsGeometryStatusChange(e){this.searchState.setSearchResultsGeometryStatus(e)}onReverseCoordsFormatStatusChange(e){this.storageService.set("reverseSearchCoordsFormatEnabled",e),this.igoReverseSearchCoordsFormatEnabled=e}onSearchSettingsChange(){this.onSettingsChange$.next(!0)}closeSidenav(){this.sidenavOpened=!1,this.map.viewController.padding[3]=0}openSidenav(){this.sidenavOpened=!0,this.map.viewController.padding[3]=this.isMobile()?0:400}toggleSidenav(){this.sidenavOpened?this.closeSidenav():this.openSidenav(),this.computeToastPanelOffsetX()}toolChanged(e){e&&e.name==="searchResults"&&this.searchBar&&this.searchBar.nativeElement.getElementsByTagName("input")[0].focus()}computeHomeExtentValues(e){e?.map?.view?.homeExtent?(this.homeExtent=e.map.view.homeExtent.extent,this.homeCenter=e.map.view.homeExtent.center,this.homeZoom=e.map.view.homeExtent.zoom):(this.homeExtent=void 0,this.homeCenter=void 0,this.homeZoom=void 0)}onChangeContext(e){if(this.cancelOngoingAddLayer(),e!==void 0){if(this.workspace&&!this.workspace.entityStore.empty&&this.workspace.entityStore.clear(),this.queryState.store.empty||this.queryState.store.softClear(),this.computeHomeExtentValues(e),this.route.queryParams.pipe(cr(250)).subscribe(n=>{(!n.context||n.context===e.uri)&&this.readLayersQueryParams(n)}),this.contextLoaded){let n=this.toolbox.getTool("contextManager"),s=(n?n.options:{}).toolToOpenOnContextChange;if(!s){let l=["mapTools","map","mapDetails","mapLegend"];for(let h of l)if(this.toolbox.getTool(h)){s=h;break}}s&&this.toolbox.activateTool(s)}this.contextLoaded=!0}}onBeforeSearch(){(!this.toolbox.activeTool$.value||this.toolbox.activeTool$.value.name!=="searchResults")&&this.toolbox.activateTool("searchResults"),this.openSidenav()}toastOpenedChange(e){this.map.viewController.padding[2]=e?280:0,this.handleExpansionAndToastOnMobile(),this.toastPanelOpened=e}handleExpansionAndToastOnMobile(){this.isMobile()&&this.appConfig.hasExpansionPanel&&this.expansionPanelExpanded&&this.toastPanelOpened&&(this.expansionPanelExpanded=!1)}handleToggleExpansionPanel(e){this.expansionPanelExpanded=e}onClearSearch(){this.map.searchResultsOverlay.clear(),this.searchStore.clear(),this.searchState.setSelectedResult(void 0),this.searchState.deactivateCustomFilterTermStrategy()}getQuerySearchSource(){return this.searchSourceService.getSources().find(e=>e instanceof U2)}onContextMenuOpen(e){this.contextMenuCoord=this.getClickCoordinate(e)}getClickCoordinate(e){let n=e,o=this.mapBrowser.nativeElement.getBoundingClientRect();n.y=n.y-o.top+(window.scrollY||window.pageYOffset),n.x=n.x-o.left+(window.scrollX||window.pageXOffset);let s=[n.x,n.y],l=this.map.ol.getCoordinateFromPixel(s),h=this.map.projection;return us(l,h,"EPSG:4326")}openGoogleMaps(e){window.open(Xd.getGoogleMapsCoordLink(e[0],e[1]))}openGoogleStreetView(e){window.open(Xd.getGoogleStreetViewLink(e[0],e[1]))}searchCoordinate(e){this.searchBarTerm=this.igoReverseSearchCoordsFormatEnabled?e.reverse().map(n=>n.toFixed(6)).join(", "):e.map(n=>n.toFixed(6)).join(", ")}updateMapBrowserClass(){let e=this.queryState.store.entities$.value.length>0;this.appConfig.hasExpansionPanel&&this.workspaceState.workspaceEnabled$.value?this.mapBrowser.nativeElement.classList.add("has-expansion-panel"):this.mapBrowser.nativeElement.classList.remove("has-expansion-panel"),this.appConfig.hasExpansionPanel&&this.expansionPanelExpanded?this.workspaceState.workspaceMaximize$.value?(this.mapBrowser.nativeElement.classList.add("expansion-offset-maximized"),this.mapBrowser.nativeElement.classList.remove("expansion-offset")):(this.mapBrowser.nativeElement.classList.add("expansion-offset"),this.mapBrowser.nativeElement.classList.remove("expansion-offset-maximized")):this.workspaceState.workspaceMaximize$.value?this.mapBrowser.nativeElement.classList.remove("expansion-offset-maximized"):this.mapBrowser.nativeElement.classList.remove("expansion-offset"),this.sidenavOpened?this.mapBrowser.nativeElement.classList.add("sidenav-offset"):this.mapBrowser.nativeElement.classList.remove("sidenav-offset"),this.sidenavOpened&&!this.isMobile()?this.mapBrowser.nativeElement.classList.add("sidenav-offset-baselayers"):this.mapBrowser.nativeElement.classList.remove("sidenav-offset-baselayers"),!this.toastPanelOpened&&e&&!this.expansionPanelExpanded?this.mapBrowser.nativeElement.classList.add("toast-offset-scale-line"):this.mapBrowser.nativeElement.classList.remove("toast-offset-scale-line"),!this.toastPanelOpened&&e&&(this.isMobile()||this.isTablet()||this.sidenavOpened)&&!this.expansionPanelExpanded?this.mapBrowser.nativeElement.classList.add("toast-offset-attribution"):this.mapBrowser.nativeElement.classList.remove("toast-offset-attribution")}getToastPanelExtent(){if(this.sidenavOpened){if(this.sidenavOpened)return this.toastPanelHtmlDisplay&&this.mediaService.isDesktop()?"htmlDisplayOffsetX":this.fullExtent?"fullOffsetX":"standardOffsetX"}else return this.toastPanelHtmlDisplay&&this.mediaService.isDesktop()?"htmlDisplay":this.fullExtent?"fullStandard":"standard"}onPointerSummaryStatusChange(e){this.storageService.set("searchPointerSummaryEnabled",e),this.igoSearchPointerSummaryEnabled=e}getExpansionPanelStatus(){if(this.sidenavOpened===!1)return this.expansionPanelExpanded===!0?"full":"notTriggered";if(this.sidenavOpened===!0&&this.isMobile()===!1)return this.expansionPanelExpanded===!0?"reduced":"reducedNotTriggered";if(this.sidenavOpened===!0&&this.isMobile()===!0)return this.expansionPanelExpanded===!0?"mobile":"notVisible"}getToastPanelOffsetY(){let e="noExpansion";return this.expansionPanelExpanded?this.workspaceState.workspaceMaximize$.value?this.toastPanelOpened?e="expansionMaximizedAndToastOpened":e="expansionMaximizedAndToastClosed":this.toastPanelOpened?e="expansionAndToastOpened":e="expansionAndToastClosed":e="noExpansion",e}getToastPanelStatus(){if(this.isMobile()===!0&&this.toastPanelOpened===!1&&this.sidenavOpened===!1&&this.expansionPanelExpanded===!1&&this.queryState.store.entities$.value.length>0)return"low"}getControlsOffsetY(){return this.expansionPanelExpanded?this.workspaceState.workspaceMaximize$.value?"firstRowFromBottom-expanded-maximized":"firstRowFromBottom-expanded":"firstRowFromBottom"}getBaselayersSwitcherStatus(){let e;return this.isMobile()?this.workspaceState.workspaceEnabled$.value?this.expansionPanelExpanded===!1?this.queryState.store.entities$.value.length===0?e="secondRowFromBottom":e="thirdRowFromBottom":this.queryState.store.entities$.value.length===0?e="firstRowFromBottom-expanded":e="secondRowFromBottom-expanded":this.queryState.store.entities$.value.length===0?e="firstRowFromBottom":e="secondRowFromBottom":this.workspaceState.workspaceEnabled$.value?this.expansionPanelExpanded?this.workspaceState.workspaceMaximize$.value?e="firstRowFromBottom-expanded-maximized":e="firstRowFromBottom-expanded":e="secondRowFromBottom":e="firstRowFromBottom",e}readQueryParams(){this.route.queryParams.subscribe(e=>{this.routeParams=e,this.readToolParams(),this.readSearchParams(),this.readFocusFirst(),this.computeZoomToExtent()})}readLanguageParam(e){e.lang&&(this.authService.languageForce=!0,this.languageService.setLanguage(e.lang))}computeZoomToExtent(){if(this.routeParams.zoomExtent){let e=this.routeParams.zoomExtent.split(","),n=Su(e.map(o=>Number(o.trim())),"EPSG:4326",this.map.projection);this.map.viewController.zoomToExtent(n)}}computeFocusFirst(){setTimeout(()=>{let e=document.getElementsByTagName("igo-search-results-item").item(0);e&&e.click()},1)}readFocusFirst(){if(this.routeParams.sf==="1"&&this.termDefinedInUrl){let e=this.searchStore.stateView.all$().pipe(Uc(n=>n.length===0),cr(1e3),Tn(1)).subscribe(n=>{e.unsubscribe(),n.length&&!this.termDefinedInUrlTriggered&&(this.computeFocusFirst(),this.termDefinedInUrlTriggered=!0)})}}readSearchParams(){if(this.routeParams.search){if(this.termDefinedInUrl=!0,this.routeParams.exactMatch==="1"&&this.searchState.activateCustomFilterTermStrategy(),this.routeParams.search&&!this.routeParams.zoom&&this.routeParams.sf!=="1"){let e=this.searchStore.stateView.all$().pipe(Uc(n=>n.length===0),cr(500),Tn(1)).subscribe(n=>{e.unsubscribe();let o=n.filter(l=>l.entity.meta.dataType===Qo).map(l=>new hs().readFeature(l.entity.data,{dataProjection:l.entity.data.projection,featureProjection:this.map.projection})),s=mb(o,this.map.viewProjection);this.map.viewController.zoomToExtent(s)})}this.searchBarTerm=this.routeParams.search}this.routeParams.searchGeom==="1"&&this.searchState.searchResultsGeometryEnabled$.next(!0)}readToolParams(){if(this.routeParams.tool&&this.matDialogRef$.pipe(Uc(e=>e!==void 0),So()).subscribe(e=>{e||this.toolbox.activateTool(this.routeParams.tool)}),this.routeParams.sidenav==="1"&&setTimeout(()=>{this.openSidenav()},250),this.routeParams.routing){let e=!1,n=this.routeParams.routing.split(";"),o=this.routeParams.routingOptions,s;o&&(s=parseInt(o.split("result:")[1],10)),this.directionState.stopsStore.storeInitialized$.pipe(Uc(l=>!l),So()).subscribe(l=>{l&&!e&&(e=!0,n.map((h,p)=>{p>1&&WF(this.directionState.stopsStore)}),setTimeout(()=>{n.map((h,p)=>{let m=this.directionState.stopsStore.all().find(f=>f.position===p);m.text=h,m.coordinates=h.split(","),this.directionState.stopsStore.update(m)})},this.directionState.debounceTime*1.25))}),this.directionState.routesFeatureStore.count$.pipe(Uc(l=>l<1),So()).subscribe(l=>{l>=1&&this.directionState.zoomToActiveRoute$.next()}),this.directionState.routesFeatureStore.count$.pipe(Uc(l=>l<2),So()).subscribe(()=>{s&&(this.directionState.routesFeatureStore.entities$.value.map(l=>l.properties.active=!1),this.directionState.routesFeatureStore.entities$.value[s].properties.active=!0,this.directionState.zoomToActiveRoute$.next())})}}readLayersQueryParams(e){this.readLayersQueryParamsByType(e,"wms"),this.readLayersQueryParamsByType(e,"wmts"),this.readLayersQueryParamsByType(e,"arcgisrest"),this.readLayersQueryParamsByType(e,"imagearcgisrest"),this.readLayersQueryParamsByType(e,"tilearcgisrest"),this.readVectorQueryParams(e)}getQueryParam(e,n){let o;return n.includes("?")&&(o=new zs({fromString:n.split("?")[1]}).get(e)),o}readLayersQueryParamsByType(e,n){let o,s;switch(n){case"wms":(e.layers||e.wmsLayers)&&e.wmsUrl&&(s="wmsUrl",o=e.wmsLayers?"wmsLayers":"layers");break;case"wmts":e.wmtsLayers&&e.wmtsUrl&&(s="wmtsUrl",o="wmtsLayers");break;case"arcgisrest":e.arcgisLayers&&e.arcgisUrl&&(s="arcgisUrl",o="arcgisLayers");break;case"imagearcgisrest":e.iarcgisLayers&&e.iarcgisUrl&&(s="iarcgisUrl",o="iarcgisLayers");break;case"tilearcgisrest":e.tarcgisLayers&&e.tarcgisUrl&&(s="tarcgisUrl",o="tarcgisLayers");break}if(!o||!s)return;let l=e[o].split("),("),h=e[s].split(","),p=0;h.forEach(m=>{let f=m,g=this.getQueryParam("VERSION",f)||this.getQueryParam("version",f)||void 0;g&&(f=f.replace("VERSION="+g,"").replace("version="+g,"")),f.endsWith("?")&&(f=f.substring(0,f.length-1)),this.extractLayersByService(l[p]).forEach(_=>{let w=_.split(":igoz"),A=Ln.removeUndefined({type:n,url:f,layer:w[0],params:n==="wms"?{LAYERS:w[0]}:void 0}),k=wI(A),R=this.computeLayerVisibilityFromUrl(e,k);this.addLayerFromURL(f,w[0],n,g,R,w[1]?parseInt(w[1],10):void 0)}),p+=1})}readVectorQueryParams(e){if(e.vector){let n=e.vector,o=n.lastIndexOf("/"),s=n.slice(o+1,n.length);this.http.get(`${n}`,{responseType:"blob"}).subscribe(l=>{let h=new File([l],s,{type:l.type,lastModified:Date.now()});this.importService.import(h).subscribe(p=>this.onFileImportSuccess(h,p),p=>this.onFileImportError(h,p))})}}onFileImportSuccess(e,n){iU(e,n,this.map,this.contextState.context$.value.uri,this.messageService,this.layerService)}onFileImportError(e,n){ure(e,n,this.messageService)}extractLayersByService(e){let n=e;return n=n.startsWith("(")?n.substr(1):n,n=n.endsWith(")")?n.slice(0,-1):n,n.split(",")}addLayerFromURL(e,n,o,s,l=!0,h){if(!this.contextLoaded)return;let p={optionsFromCapabilities:!0,optionsFromApi:!0,crossOrigin:!0,type:o,url:e},m=o==="arcgisrest"||o==="imagearcgisrest"||o==="tilearcgisrest",f={version:o==="wmts"?"1.0.0":void 0,queryable:!!m,queryFormat:m?"esrijson":void 0,layer:n};o==="wms"&&(f={params:{LAYERS:n,VERSION:s}}),f=Ln.removeUndefined(Object.assign({},f,p)),this.addedLayers$$.push(this.layerService.createAsyncLayer({zIndex:h,visible:l,sourceOptions:f}).subscribe(g=>{this.map.layerController.add(g)}))}computeLayerVisibilityFromUrl(e,n){let o=e,s=!0;if(!o||!n)return s;let l="",h="",p=[],m=[];return o.visiblelayers&&(l=o.visiblelayers),o.invisiblelayers&&(h=o.invisiblelayers),l==="*"&&(s=!0),h==="*"&&(s=!1),p=l.split(","),m=h.split(","),(p.indexOf(n)>-1||p.indexOf(n.toString())>-1)&&(s=!0),(m.indexOf(n)>-1||m.indexOf(n.toString())>-1)&&(s=!1),s}initWelcomeWindow(){this.authService.hasAuthService?this.authService.logged$.subscribe(e=>{e&&this.createWelcomeWindow()}):this.createWelcomeWindow()}createWelcomeWindow(){if(this.welcomeWindowService.hasWelcomeWindow()){let e=this.welcomeWindowService.getConfig();this.matDialogRef$.next(this.dialogWindow.open(P2e,e)),this.matDialogRef$.value.afterClosed().subscribe(()=>{this.welcomeWindowService.afterClosedWelcomeWindow(),this.matDialogRef$.next(void 0)})}}getFeatureIsSameActiveWks(e){if(this.workspace){let n=e.meta.sourceTitle;return this.workspace.title===n}return!1}getWksActiveOpenInResolution(){if(this.workspace){let e=this.workspace;if(e.active&&e.inResolutionRange$.value&&this.workspaceState.workspacePanelExpanded)return!0}return!1}refreshRelationsWorkspace(e){if(e?.length)for(let n of e)this.workspaceStore.all().find(s=>n.options.workspace.workspaceId.includes(s.id))?.meta.tableTemplate.columns.forEach(s=>{(s.type==="list"||s.type==="autocomplete")&&this.editionWorkspaceService.getDomainValues(s.relation).subscribe(l=>{s.domainValues=l})})}zoomToSelectedFeatureWks(){let e=new hs,n=this.workspaceState.workspaceSelection.map(s=>s.entity);if(n.length===0)return;let o=[];for(let s of n){let l=e.readFeature(s,{dataProjection:s.projection,featureProjection:this.map.projection});o.push(l)}Fu(this.map.viewController,o,$n.Zoom)}static \u0275fac=function(n){return new(n||r)(ie(kU),ie(i_),ie(gL),ie(ml),ie(Ol),ie(Lu),ie(oU),ie(Ti),ie(sy),ie(Qre),ie(oD),ie(DU),ie(OU),ie(Cb),ie(Jp),ie(Ri),ie(hre),ie(dr),ie(wn),ie(nl),ie(RU),ie(vu),ie(tL),ie(wo),ie(uU),ie(m2e),ie(vre,8))};static \u0275cmp=gt({type:r,selectors:[["app-portal"]],viewQuery:function(n,o){if(n&1&&(Ni(U0t,7,Ht),Ni(z0t,7,Ht)),n&2){let s;Yt(s=Kt())&&(o.mapBrowser=s.first),Yt(s=Kt())&&(o.searchBar=s.first)}},standalone:!0,features:[Bi([ZEe([QEe(),TEe(),EEe(),AEe(),DEe(),XEe(),JEe(),eMe()]),WEe(YEe()),DU]),yt],decls:40,vars:58,consts:[["mapBrowser",""],["contextMenu",""],["searchBar",""],[1,"app-main-container"],[3,"click","shown"],[1,"navbar-container"],[3,"mat-elevation-z2","sidenavOpened","openSidenav",4,"ngIf"],[3,"mat-elevation-z2","term","termSplitter","minLength","searchSettings","forceNA","store","pointerSummaryEnabled","searchResultsGeometryEnabled","reverseSearchCoordsFormatEnabled","searchTermChange","pointerSummaryStatus","searchResultsGeometryStatus","reverseSearchCoordsFormatStatus","search","clearFeature","searchSettingsChange",4,"ngIf"],[3,"openedChange","toolChange","map","opened"],["igoMapOffline","","igoWorkspaceUpdator","","igoLongPress","","igoSearchPointerSummary","","igoHoverFeature","","igoQuery","","igoMapContext","","igoLayerContext","","igoDropGeoFile","",3,"query","menuPosition","workspaceStore","igoSearchPointerSummaryDelay","igoSearchPointerSummaryEnabled","igoHoverFeatureDelay","igoHoverFeatureEnabled","waitForAllQueries","queryFeatures","queryFeaturesHitTolerance","contextUri","map","igoContextMenu","ngClass"],[1,"map-actions","--vertical","--top","--right"],[1,"spinner-spacer"],["color","primary",1,"mat-elevation-z2",3,"showIfNoRotation","map"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary","class","mat-elevation-z2",3,"map",4,"ngIf"],["class","mat-elevation-z2","color","primary",3,"map","extentOverride","centerOverride","zoomOverride",4,"ngIf"],["class","mat-elevation-z2",4,"ngIf"],["class","mat-elevation-z2","color","primary",3,"map",4,"ngIf"],["color","primary",3,"map",4,"ngIf"],[1,"map-actions","--horizontal","--bottom","--right"],[1,"map-actions","--vertical","--bottom","--left"],[1,"mat-elevation-z2",3,"map","useStaticIcon"],[3,"expanded","expand",4,"ngIf"],[1,"mat-elevation-z2",3,"map"],[3,"backdropShown","expanded","maximized","expandedChange",4,"ngIf"],[3,"openedChange","withHeader","opened"],[1,"toast-panel-for-expansion-close-button-container"],["mat-icon-button","","color","warn",3,"click"],[3,"workspace","deactivateWidget",4,"ngIf"],[3,"map","store","hasFeatureEmphasisOnSelection","opened","openedChange","fullExtentEvent","windowHtmlDisplayEvent",4,"ngIf"],[3,"openSidenav","sidenavOpened"],[3,"searchTermChange","pointerSummaryStatus","searchResultsGeometryStatus","reverseSearchCoordsFormatStatus","search","clearFeature","searchSettingsChange","term","termSplitter","minLength","searchSettings","forceNA","store","pointerSummaryEnabled","searchResultsGeometryEnabled","reverseSearchCoordsFormatEnabled"],["color","primary",1,"mat-elevation-z2",3,"map"],["color","primary",1,"mat-elevation-z2",3,"map","extentOverride","centerOverride","zoomOverride"],[1,"mat-elevation-z2"],["color","primary",3,"map"],[3,"expand","expanded"],[3,"expandedChange","backdropShown","expanded","maximized"],["expansionPanelHeader",""],["igoWorkspaceSelector","",3,"changeWorkspace","disableSwitch","relationLayers","rowsInMapExtentCheckCondition","store","disabled","map"],[4,"ngIf"],[1,"workspace-container"],[1,"workspace-actions"],["mat-icon-button","","collapsibleButton","","tooltip-position","below","matTooltipShowDelay","500",1,"eye-workspace",3,"click","color","matTooltip"],[3,"ngClass"],["class","add-feature","mat-icon-button","","color","primary","collapsibleButton","","tooltip-position","below","matTooltipShowDelay","500",3,"disabled","matTooltip","click",4,"ngIf"],["class","actionbar-workspace",3,"store","withIcon","withTitle","horizontal","withToggleButton","iconColor","color","mode","overlayClass",4,"ngIf"],["class","zoom-workspace","mat-icon-button","","color","primary","collapsibleButton","","tooltip-position","below","matTooltipShowDelay","500",3,"disabled","matTooltip","click",4,"ngIf"],[3,"store","entitySortChange$","paginatorOptions","paginatorChange",4,"ngIf"],["mat-icon-button","","color","primary","collapsibleButton","","tooltip-position","below","matTooltipShowDelay","500",1,"add-feature",3,"click","disabled","matTooltip"],[1,"actionbar-workspace",3,"store","withIcon","withTitle","horizontal","withToggleButton","iconColor","color","mode","overlayClass"],["mat-icon-button","","color","primary","collapsibleButton","","tooltip-position","below","matTooltipShowDelay","500",1,"zoom-workspace",3,"click","disabled","matTooltip"],[3,"paginatorChange","store","entitySortChange$","paginatorOptions"],[3,"class","paginator","store","template","entitySortChange","entitySelectChange",4,"ngIf"],[3,"entitySortChange","entitySelectChange","paginator","store","template"],[3,"deactivateWidget","workspace"],[3,"openedChange","fullExtentEvent","windowHtmlDisplayEvent","map","store","hasFeatureEmphasisOnSelection","opened"],["mode","context",3,"store","withIcon","horizontal"]],template:function(n,o){if(n&1){let s=dt();ne(0,"mat-sidenav-container",3)(1,"mat-sidenav-content")(2,"igo-backdrop",4),Oe("click",function(){return Re(s),Fe(o.onBackdropClick())}),ce(),ne(3,"div",5),We(4,W0t,1,3,"igo-menu-button",6)(5,q0t,2,11,"igo-search-bar",7),ce(),ne(6,"app-sidenav",8),bs("openedChange",function(h){return Re(s),Os(o.sidenavOpened,h)||(o.sidenavOpened=h),Fe(h)}),Oe("toolChange",function(h){return Re(s),Fe(o.toolChanged(h))}),ce(),ne(7,"igo-map-browser",9,0),Oe("query",function(h){return Re(s),Fe(o.onMapQuery(h))})("menuPosition",function(h){return Re(s),Fe(o.onContextMenuOpen(h))})("@mapStateX.start",function(){return Re(s),Fe(o.updateMapBrowserClass())})("@mapStateY.start",function(){return Re(s),Fe(o.updateMapBrowserClass())}),ne(9,"div",10),wt(10,"div",11)(11,"igo-rotation-button",12),ce(),ne(12,"div",13),We(13,Y0t,1,3,"igo-offline-button",14)(14,K0t,1,4,"igo-home-extent-button",15)(15,Z0t,1,0,"igo-wake-lock-button",16)(16,Q0t,1,3,"igo-geolocate-button",17)(17,X0t,1,2,"igo-zoom-button",18),ce(),ne(18,"div",19),We(19,J0t,1,3,"igo-user-button",17),ce(),ne(20,"div",20),wt(21,"igo-baselayers-switcher",21),We(22,e_t,1,1,"app-expansion-panel-button",22),Ne(23,"async"),ce(),wt(24,"igo-swipe-control",23)(25,"igo-map-center",23),ce(),wt(26,"app-map-overlay"),Ne(27,"async"),ce()(),We(28,d_t,8,16,"app-expansion-panel",24),ne(29,"app-toast-panel-for-expansion",25),bs("openedChange",function(h){return Re(s),Os(o.toastPanelForExpansionOpened,h)||(o.toastPanelForExpansionOpened=h),Fe(h)}),ne(30,"div",26)(31,"button",27),Oe("click",function(){return Re(s),Fe(o.toastPanelForExpansionOpened=!1)}),ne(32,"mat-icon"),Ye(33,"close"),ce()()(),We(34,u_t,1,1,"igo-workspace-widget-outlet",28),Ne(35,"async"),ce(),We(36,h_t,2,9,"app-toast-panel",29),Ne(37,"async"),We(38,p_t,1,3,"ng-template",null,1,Vo)}if(n&2){let s=ji(39);q(2),ee("shown",o.backdropShown),q(),oi("--empty-spacer",o.sidenavOpened),q(),ee("ngIf",o.showMenuButton),q(),ee("ngIf",o.showSearchBar),q(),ee("map",o.map),vs("opened",o.sidenavOpened),q(),ee("workspaceStore",o.workspaceStore)("igoSearchPointerSummaryDelay",500)("igoSearchPointerSummaryEnabled",o.igoSearchPointerSummaryEnabled)("igoHoverFeatureDelay",250)("igoHoverFeatureEnabled",!0)("waitForAllQueries",!0)("queryFeatures",!0)("queryFeaturesHitTolerance",15)("contextUri",o.contextUri)("map",o.map)("igoContextMenu",s)("ngClass",fo(56,G0t,o.map.layerController.baseLayers.length>1))("@mapStateX",o.sidenavOpened?"right":"left")("@mapStateY",o.getControlsOffsetY()),q(4),ee("showIfNoRotation",o.appConfig.showRotationButtonIfNoRotation)("map",o.map),q(),ee("@controlsOffsetY",o.getControlsOffsetY())("@mobileOffsetY",o.getToastPanelStatus()),q(),ee("ngIf",o.appConfig.offlineButton),q(),ee("ngIf",o.appConfig.homeExtentButton),q(),ee("ngIf",o.appConfig.wakeLockApiButton),q(),ee("ngIf",o.hasGeolocateButton),q(),ee("ngIf",!o.isTouchScreen),q(),ee("@controlsOffsetY",o.getControlsOffsetY())("@mobileOffsetY",o.getToastPanelStatus()),q(),ee("ngIf",o.authService.hasAuthService),q(),ee("@controlsOffsetY",o.getControlsOffsetY())("@mobileOffsetY",o.getToastPanelStatus()),q(),ee("map",o.map)("@controlsOffsetY",o.getBaselayersSwitcherStatus())("useStaticIcon",!0),q(),ee("ngIf",o.appConfig.hasExpansionPanel&&je(23,48,o.workspaceState.workspaceEnabled$)&&!o.expansionPanelExpanded),q(2),ee("map",o.map),q(),ee("map",o.map),q(),ee("@controlStateY",o.getControlsOffsetY())("@controlStateX",je(27,50,o.mediaService.media$)!=="mobile"&&o.sidenavOpened?"right":"left"),q(2),ee("ngIf",o.expansionPanelExpanded),q(),ee("withHeader",!1),vs("opened",o.toastPanelForExpansionOpened),q(5),ee("ngIf",je(35,52,o.selectedWorkspace$)),q(2),ee("ngIf",je(37,54,o.queryStore.empty$)!==!0)}},dependencies:[EE,E2e,kr,bj,s0e,_Ee,gj,QY,PU,_2e,rMe,a0e,hP,$Ee,aEe,nEe,rEe,eEe,m0,dEe,JAe,iEe,oEe,lEe,cEe,sEe,tEe,oMe,v2e,bn,Cr,jn,er,GB,pY,UB,Er,Ar,qr,gn,vEe,iL,gre,k2e,D2e,Wh,hn,sMe,Cj,d0e,VEe,tMe],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block}.navbar-container[_ngcontent-%COMP%]{position:absolute;left:4px;top:4px;display:flex;align-items:center;width:395px;max-width:395px;z-index:4}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.navbar-container[_ngcontent-%COMP%]{width:calc(100% - 58px);max-width:395px}}.navbar-container[_ngcontent-%COMP%]   igo-search-bar[_ngcontent-%COMP%]{flex:1;background-color:#fff;font-size:16px;margin-left:5px}.navbar-container[_ngcontent-%COMP%]   igo-menu-button[_ngcontent-%COMP%]{transition:margin-left .3s}.navbar-container.--empty-spacer[_ngcontent-%COMP%]   igo-menu-button[_ngcontent-%COMP%]{margin-left:-4px}.navbar-container.--empty-spacer[_ngcontent-%COMP%]   igo-search-bar[_ngcontent-%COMP%]{margin-left:0}.workspace-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.workspace-actions[_ngcontent-%COMP%]{display:flex;align-items:center}#tour-button[_ngcontent-%COMP%]{font-weight:700;position:absolute;left:5px;top:50px;z-index:4}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.tour-button-title[_ngcontent-%COMP%]{display:none}}igo-map-browser[_ngcontent-%COMP%]{width:100%;height:100%}igo-map-browser.sidenav-offset[_ngcontent-%COMP%]   .map-actions.--left[_ngcontent-%COMP%]{left:404px}igo-map-browser.sidenav-offset[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{left:400px;width:calc(100% - 380px)}igo-map-browser.sidenav-offset[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent .ol-scale-line{left:40%}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-map-browser.sidenav-offset[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{display:none}}igo-map-browser.expansion-offset[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{bottom:281px}igo-map-browser.expansion-offset-maximized[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{bottom:496px}igo-map-browser.toast-offset-scale-line[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent   .ol-scale-line{bottom:50px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-map-browser.toast-offset-attribution[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent   .ol-attribution{bottom:50px}}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution{left:52px;bottom:8px;text-align:left;padding:0;margin-right:90px;background-color:#fff0;width:calc(100% - 500px)}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-logo-only{height:inherit}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-collapsed{background:none}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-collapsed button{transform:none}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution button{transform:rotate(180deg);background-color:#fff;cursor:pointer}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-uncollapsible{height:auto}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution ul{background-color:#fff9;padding:2px .5em}igo-map-browser[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{position:absolute;width:100%;left:0;bottom:0}igo-map-browser[_ngcontent-%COMP%]   .map-actions[_ngcontent-%COMP%]{position:absolute;display:flex;transition:bottom .25s,left .25s}igo-map-browser[_ngcontent-%COMP%]   .map-actions[_ngcontent-%COMP%]   .spinner-spacer[_ngcontent-%COMP%]{height:40px}igo-map-browser[_ngcontent-%COMP%]   .map-actions.--vertical[_ngcontent-%COMP%]{flex-direction:column}igo-map-browser[_ngcontent-%COMP%]   .map-actions.--vertical[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-top:8px}igo-map-browser[_ngcontent-%COMP%]   .map-actions.--horizontal[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-right:8px}igo-map-browser[_ngcontent-%COMP%]   .map-actions.--bottom[_ngcontent-%COMP%]{bottom:4px}igo-map-browser[_ngcontent-%COMP%]   .map-actions.--right[_ngcontent-%COMP%]{right:4px}igo-map-browser[_ngcontent-%COMP%]   .map-actions.--top[_ngcontent-%COMP%]{top:4px}igo-map-browser[_ngcontent-%COMP%]   .map-actions.--horizontal.--bottom.--right[_ngcontent-%COMP%]{right:48px}igo-map-browser[_ngcontent-%COMP%]   .map-actions.--left[_ngcontent-%COMP%]{left:4px}igo-map-browser[_ngcontent-%COMP%]   igo-zoom-button[_ngcontent-%COMP%]     button{box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}@media (max-width: 599px){igo-map-browser[_ngcontent-%COMP%]   igo-zoom-button[_ngcontent-%COMP%]{display:none}}app-expansion-panel-button[_ngcontent-%COMP%]     button[mat-icon-button]{box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}mat-sidenav-container[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#efefef;z-index:5;display:unset}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){mat-sidenav-content[_ngcontent-%COMP%]{z-index:auto}}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-workspace-selector[_ngcontent-%COMP%]{width:100px}}igo-entity-table-paginator[_ngcontent-%COMP%]{position:absolute;right:0}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-entity-table-paginator[_ngcontent-%COMP%]{margin-left:-30px}}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-entity-table-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-range-label{margin:10px 1px 0 20px}}igo-entity-table[_ngcontent-%COMP%]     td.mat-column-edition{display:flex;height:100%;align-items:center}app-expansion-panel[_ngcontent-%COMP%]{position:absolute;bottom:0;z-index:5}app-toast-panel[_ngcontent-%COMP%]{position:absolute;left:50%;margin-left:-300px;max-width:fit-content;z-index:5;outline:none}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){app-toast-panel[_ngcontent-%COMP%]{left:49px;margin-left:0;min-width:100%}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){app-toast-panel[_ngcontent-%COMP%]{max-width:inherit;left:calc(50% + 60px)}}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >div   igo-panel.app-full-toast-panel-opened, app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >div   igo-panel.app-toast-panel-html-large, app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]     igo-panel.app-full-toast-panel-opened, app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]     igo-panel.app-toast-panel-html-large{max-height:50vh}app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >div   igo-panel.app-full-toast-panel-opened .toast-content, app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >div   igo-panel.app-toast-panel-html-large .toast-content, app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]     igo-panel.app-full-toast-panel-opened .toast-content, app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]     igo-panel.app-toast-panel-html-large .toast-content{max-height:42vh}}app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel{max-height:45vh}app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel .toast-content{max-height:40vh}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel{max-height:30vh}app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel .toast-content{max-height:24vh}}app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel.app-toast-panel-html{height:30vh}app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel.app-toast-panel-opened{height:auto;max-height:30vh}app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel.app-toast-panel-opened .toast-content{max-height:25vh}app-toast-panel.expansion-panel-expanded[_ngcontent-%COMP%], app-toast-panel[_ngcontent-%COMP%]:not(.has-expansion-panel), app-toast-panel.app-toast-panel-opened[_ngcontent-%COMP%]{bottom:0}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){app-toast-panel.expansion-panel-expanded[_ngcontent-%COMP%], app-toast-panel[_ngcontent-%COMP%]:not(.has-expansion-panel), app-toast-panel.app-toast-panel-opened[_ngcontent-%COMP%]{left:0}}app-toast-panel-for-expansion[_ngcontent-%COMP%]{position:absolute;bottom:0;left:50%;margin-left:-300px;width:600px;z-index:6}@media only screen and (min-width: 960px) and (max-width: 1280px){app-toast-panel-for-expansion[_ngcontent-%COMP%]{width:480px;margin-left:-240px}}@media only screen and (min-width: 600px) and (max-width: 959px){app-toast-panel-for-expansion[_ngcontent-%COMP%]{width:480px;margin-left:-240px}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){app-toast-panel-for-expansion[_ngcontent-%COMP%]{width:calc(100% - 98px);left:49px;margin-left:0}}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){app-toast-panel-for-expansion[_ngcontent-%COMP%]{width:calc(100% - 98px);left:49px;margin-left:0}}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){toast-panel-for-expansion.toast-panel-for-expansion-opened[_ngcontent-%COMP%]{width:100%;left:0}}.mat-mdc-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   .mat-mdc-table-sticky[_ngcontent-%COMP%]{background:none}app-toast-panel-for-expansion[_ngcontent-%COMP%]   .toast-panel-for-expansion-close-button-container[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-15px;z-index:6;padding:4px}app-toast-panel-for-expansion[_ngcontent-%COMP%]   .toast-panel-for-expansion-close-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:24px;line-height:24px}.actionbar-workspace[_ngcontent-%COMP%]{padding-left:0}  div.workspace-menu{max-width:fit-content!important}  div.workspace-menu div.mat-mdc-menu-content   span.mat-checkbox-label,   div.workspace-menu div.mat-mdc-menu-content   div.mdc-list-item__primary-text{font-size:12px}"],data:{animation:[b2e(),w2e(),C2e(),x2e(),S2e(),I2e(),T2e()]}})}return r})();var yL="Service workers are disabled or not supported by this browser";function m_t(r){return $d(()=>dd(new Error(r)))}var aD=class{constructor(i){if(this.serviceWorker=i,!i)this.worker=this.events=this.registration=m_t(yL);else{let n=Ds(i,"controllerchange").pipe($t(()=>i.controller)),o=$d(()=>Vt(i.controller)),s=Bh(o,n);this.worker=s.pipe(mn(f=>!!f)),this.registration=this.worker.pipe(jr(()=>i.getRegistration()));let m=Ds(i,"message").pipe($t(f=>f.data)).pipe(mn(f=>f&&f.type)).pipe(Wz());m.connect(),this.events=m}}postMessage(i,e){return this.worker.pipe(Tn(1),br(n=>{n.postMessage(Xe({action:i},e))})).toPromise().then(()=>{})}postMessageWithOperation(i,e,n){let o=this.waitForOperationCompleted(n),s=this.postMessage(i,e);return Promise.all([s,o]).then(([,l])=>l)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(i){let e;return typeof i=="string"?e=n=>n.type===i:e=n=>i.includes(n.type),this.events.pipe(mn(e))}nextEventOfType(i){return this.eventsOfType(i).pipe(Tn(1))}waitForOperationCompleted(i){return this.eventsOfType("OPERATION_COMPLETED").pipe(mn(e=>e.nonce===i),Tn(1),$t(e=>{if(e.result!==void 0)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},L2e=(()=>{class r{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,this.pushManager=null,this.subscriptionChanges=new Dt,!e.isEnabled){this.messages=$C,this.notificationClicks=$C,this.subscription=$C;return}this.messages=this.sw.eventsOfType("PUSH").pipe($t(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe($t(o=>o.data)),this.pushManager=this.sw.registration.pipe($t(o=>o.pushManager));let n=this.pushManager.pipe(jr(o=>o.getSubscription()));this.subscription=vr(n,this.subscriptionChanges)}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(yL));let n={userVisibleOnly:!0},o=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(o.length));for(let l=0;l<o.length;l++)s[l]=o.charCodeAt(l);return n.applicationServerKey=s,this.pushManager.pipe(jr(l=>l.subscribe(n)),Tn(1)).toPromise().then(l=>(this.subscriptionChanges.next(l),l))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(yL));let e=n=>{if(n===null)throw new Error("Not subscribed to push notifications.");return n.unsubscribe().then(o=>{if(!o)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(Tn(1),jr(e)).toPromise()}decodeBase64(e){return atob(e)}static{this.\u0275fac=function(n){return new(n||r)(xe(aD))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})(),LU=(()=>{class r{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=$C,this.unrecoverable=$C;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(yL));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(yL));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static{this.\u0275fac=function(n){return new(n||r)(xe(aD))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})();var R2e=new At("");function f_t(r,i,e,n){return()=>{if(!(rx(n)&&"serviceWorker"in navigator&&e.enabled!==!1))return;let o=r.get(ci),s=r.get(fs);o.runOutsideAngular(()=>{let h=navigator.serviceWorker,p=()=>h.controller?.postMessage({action:"INITIALIZE"});h.addEventListener("controllerchange",p),s.onDestroy(()=>{h.removeEventListener("controllerchange",p)})});let l;if(typeof e.registrationStrategy=="function")l=e.registrationStrategy();else{let[h,...p]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(h){case"registerImmediately":l=Vt(null);break;case"registerWithDelay":l=F2e(+p[0]||0);break;case"registerWhenStable":let m=Xn(r.get(fs).whenStable());l=p[0]?vr(m,F2e(+p[0])):m;break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}o.runOutsideAngular(()=>l.pipe(Tn(1)).subscribe(()=>navigator.serviceWorker.register(i,{scope:e.scope}).catch(h=>console.error("Service worker registration failed with:",h))))}}function F2e(r){return Vt(null).pipe(jh(r))}function g_t(r,i){return new aD(rx(i)&&r.enabled!==!1?navigator.serviceWorker:void 0)}var _L=class{};function __t(r,i={}){return Bl([L2e,LU,{provide:R2e,useValue:r},{provide:_L,useValue:i},{provide:aD,useFactory:g_t,deps:[_L,Qu]},{provide:hm,useFactory:f_t,deps:[yn,R2e,_L,Qu],multi:!0}])}var N2e=(()=>{class r{static register(e,n={}){return{ngModule:r,providers:[__t(e,n)]}}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=zt({type:r})}static{this.\u0275inj=Ut({providers:[L2e,LU]})}}return r})();var B2e=(()=>{class r{updates;languageService;confirmDialogService;confirmOpened=!1;constructor(e,n,o){this.updates=e,this.languageService=n,this.confirmDialogService=o,e.isEnabled&&this.handleVersionUpdates()}checkForUpdates(){this.updates.isEnabled&&qb(60*1e3*2).pipe(zd(1)).subscribe(()=>st(this,null,function*(){try{let e=yield this.updates.checkForUpdate();console.log(e?"A new version is available.":"Already on the latest version.")}catch(e){console.error("Failed to check for updates:",e)}}))}modalUpdatePWA(){if(this.confirmOpened)return;let e=this.languageService.translate.instant("pwa.new-version-title"),n=this.languageService.translate.instant("pwa.new-version"),o=`${e} ${n}`;this.confirmDialogService.open(o).pipe(br(()=>this.confirmOpened=!0)).subscribe(s=>{s&&(this.confirmOpened=!1,window.navigator.onLine?document.location.reload():(alert("Hors-ligne / Offline. Vous devez \xEAtre en ligne pour mettre \xE0 jour l'application. You must be online to update the application."),setTimeout(()=>{this.modalUpdatePWA()},9e5)))})}handleVersionUpdates(){this.updates.versionUpdates.subscribe(e=>{switch(e.type){case"VERSION_DETECTED":console.log(`Downloading new app version: ${e.version.hash}`);break;case"VERSION_READY":console.log(`Current app version: ${e.currentVersion.hash}`),console.log(`New app version ready for use: ${e.latestVersion.hash}`),this.modalUpdatePWA();break;case"VERSION_INSTALLATION_FAILED":console.error(`Failed to install app version '${e.version.hash}': ${e.error}`);break}})}static \u0275fac=function(n){return new(n||r)(xe(LU),xe(wn),xe(M2))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function b_t(r,i){r&1&&wt(0,"igo-auth-form")}function w_t(r,i){r&1&&wt(0,"app-header",null,0)}function C_t(r,i){r&1&&wt(0,"app-footer")}var j2e=(()=>{class r{document;languageService;configService;titleService;metaService;messageService;pwaService;router;authConfig;hasHeader;hasFooter;promptEvent;constructor(e,n,o,s,l,h,p,m){this.document=e,this.languageService=n,this.configService=o,this.titleService=s,this.metaService=l,this.messageService=h,this.pwaService=p,this.router=m,this.authConfig=this.configService.getConfig("auth",{}),this.readTitleConfig(),this.readDescriptionConfig(),this.detectOldBrowser(),this.hasHeader=this.configService.getConfig("header.hasHeader",!1),this.hasFooter=this.configService.getConfig("hasFooter",!1),this.setManifest(),this.installPrompt(),this.pwaService.checkForUpdates()}ngOnInit(){this.handleSplashScreen()}handleSplashScreen(){this.router.events.pipe(So(e=>e instanceof By),jh(500)).subscribe(()=>{this._removeSplashScreen()})}_removeSplashScreen(){let e=this.document.getElementById("splash-screen");if(!e)return;e.classList.add("is-destroying");let n=300,o=this.document.getElementById("splash-screen-stylesheet");setTimeout(()=>{mA.remove(e),mA.remove(o)},n)}readTitleConfig(){this.languageService.translate.get(this.configService.getConfig("title","")).subscribe(e=>{e&&(this.titleService.setTitle(e),this.metaService.addTag({name:"title",content:e}))})}setManifest(){if(this.configService.getConfig("app.install.enabled")){let e=this.configService.getConfig("app.install.manifestPath","manifest.webmanifest");document.querySelector("#igoManifestByConfig").setAttribute("href",e)}}installPrompt(){let e=this.configService.getConfig("app");e?.install?.enabled&&e?.install?.promote&&c_.getOSName()!=="iOS"&&window.addEventListener("beforeinstallprompt",n=>{n.preventDefault(),this.promptEvent=n,window.addEventListener("click",()=>{setTimeout(()=>{this.promptEvent.prompt(),this.promptEvent=void 0},750)},{once:!0})},{once:!0})}readDescriptionConfig(){let e=this.configService.getConfig("description");e&&this.metaService.addTag({name:"description",content:e})}detectOldBrowser(){c_.satisfies({ie:"<=11",chrome:"<64",firefox:"<60",safari:"<=11"})&&this.messageService.alert("oldBrowser.message","oldBrowser.title",{timeOut:15e3})}static \u0275fac=function(n){return new(n||r)(ie(Ui),ie(wn),ie(Ri),ie(cN),ie(nue),ie(nl),ie(B2e),ie(n_))};static \u0275cmp=gt({type:r,selectors:[["app-root"]],standalone:!0,features:[yt],decls:5,vars:4,consts:[["header",""],["igoSpinnerActivity",""],[4,"ngIf"],["igoStopDropPropagation","",3,"ngClass"]],template:function(n,o){n&1&&(wt(0,"igo-spinner",1),We(1,b_t,1,0,"igo-auth-form",2)(2,w_t,2,0,"app-header",2),wt(3,"app-portal",3),We(4,C_t,1,0,"app-footer",2)),n&2&&(q(),ee("ngIf",o.authConfig&&o.authConfig.url),q(),ee("ngIf",o.hasHeader),q(),ee("ngClass",o.hasHeader?o.hasFooter?"portal-with-header-footer":"portal-with-header":o.hasFooter?"portal-with-footer":"portal"),q(),ee("ngIf",o.hasFooter))},dependencies:[Xq,vfe,Cfe,bfe,gn,_fe,FU,qr],styles:["[_nghost-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}igo-spinner[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;z-index:100}igo-message-center[_ngcontent-%COMP%]     simple-notifications   div.simple-notification-wrapper{right:10px}  .portal-with-header{height:calc(100% - 72px)!important}  .portal-with-header-footer{height:calc(100% - 101px)!important}  .portal-with-footer{height:calc(100% - 29px)!important}@media screen and (min-width: 824px){  .portal-with-header{height:calc(100% - 72px)!important}  .portal-with-header-footer{height:calc(100% - 101px)!important}}"]})}return r})();function V2e(r){return new ki(3e3,!1)}function x_t(){return new ki(3100,!1)}function S_t(){return new ki(3101,!1)}function I_t(r){return new ki(3001,!1)}function T_t(r){return new ki(3003,!1)}function A_t(r){return new ki(3004,!1)}function E_t(r,i){return new ki(3005,!1)}function M_t(){return new ki(3006,!1)}function D_t(){return new ki(3007,!1)}function k_t(r,i){return new ki(3008,!1)}function O_t(r){return new ki(3002,!1)}function P_t(r,i,e,n,o){return new ki(3010,!1)}function R_t(){return new ki(3011,!1)}function F_t(){return new ki(3012,!1)}function L_t(){return new ki(3200,!1)}function N_t(){return new ki(3202,!1)}function B_t(){return new ki(3013,!1)}function j_t(r){return new ki(3014,!1)}function V_t(r){return new ki(3015,!1)}function $_t(r){return new ki(3016,!1)}function U_t(r,i){return new ki(3404,!1)}function z_t(r){return new ki(3502,!1)}function G_t(r){return new ki(3503,!1)}function H_t(){return new ki(3300,!1)}function W_t(r){return new ki(3504,!1)}function q_t(r){return new ki(3301,!1)}function Y_t(r,i){return new ki(3302,!1)}function K_t(r){return new ki(3303,!1)}function Z_t(r,i){return new ki(3400,!1)}function Q_t(r){return new ki(3401,!1)}function X_t(r){return new ki(3402,!1)}function J_t(r,i){return new ki(3505,!1)}function gC(r){switch(r.length){case 0:return new Iw;case 1:return r[0];default:return new Qk(r)}}function eDe(r,i,e=new Map,n=new Map){let o=[],s=[],l=-1,h=null;if(i.forEach(p=>{let m=p.get("offset"),f=m==l,g=f&&h||new Map;p.forEach((y,_)=>{let w=_,A=y;if(_!=="offset")switch(w=r.normalizePropertyName(w,o),A){case i4:A=e.get(_);break;case a_:A=n.get(_);break;default:A=r.normalizeStyleValue(_,w,A,o);break}g.set(w,A)}),f||s.push(g),h=g,l=m}),o.length)throw z_t(o);return s}function Coe(r,i,e,n){switch(i){case"start":r.onStart(()=>n(e&&eoe(e,"start",r)));break;case"done":r.onDone(()=>n(e&&eoe(e,"done",r)));break;case"destroy":r.onDestroy(()=>n(e&&eoe(e,"destroy",r)));break}}function eoe(r,i,e){let n=e.totalTime,o=!!e.disabled,s=xoe(r.element,r.triggerName,r.fromState,r.toState,i||r.phaseName,n??r.totalTime,o),l=r._data;return l!=null&&(s._data=l),s}function xoe(r,i,e,n,o="",s=0,l){return{element:r,triggerName:i,fromState:e,toState:n,phaseName:o,totalTime:s,disabled:!!l}}function zm(r,i,e){let n=r.get(i);return n||r.set(i,n=e),n}function $2e(r){let i=r.indexOf(":"),e=r.substring(1,i),n=r.slice(i+1);return[e,n]}var eyt=typeof document>"u"?null:document.documentElement;function Soe(r){let i=r.parentNode||r.host||null;return i===eyt?null:i}function tyt(r){return r.substring(1,6)=="ebkit"}var kI=null,U2e=!1;function iyt(r){kI||(kI=nyt()||{},U2e=kI.style?"WebkitAppearance"in kI.style:!1);let i=!0;return kI.style&&!tyt(r)&&(i=r in kI.style,!i&&U2e&&(i="Webkit"+r.charAt(0).toUpperCase()+r.slice(1)in kI.style)),i}function nyt(){return typeof document<"u"?document.body:null}function tDe(r,i){for(;i;){if(i===r)return!0;i=Soe(i)}return!1}function iDe(r,i,e){if(e)return Array.from(r.querySelectorAll(i));let n=r.querySelector(i);return n?[n]:[]}var Ioe=(()=>{class r{validateStyleProperty(e){return iyt(e)}containsElement(e,n){return tDe(e,n)}getParentElement(e){return Soe(e)}query(e,n,o){return iDe(e,n,o)}computeStyle(e,n,o){return o||""}animate(e,n,o,s,l,h=[],p){return new Iw(o,s)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})(),RI=class{static{this.NOOP=new Ioe}},FI=class{};var ryt=1e3,nDe="{{",oyt="}}",rDe="ng-enter",soe="ng-leave",NU="ng-trigger",UU=".ng-trigger",z2e="ng-animating",aoe=".ng-animating";function xb(r){if(typeof r=="number")return r;let i=r.match(/^(-?[\.\d]+)(m?s)/);return!i||i.length<2?0:loe(parseFloat(i[1]),i[2])}function loe(r,i){switch(i){case"s":return r*ryt;default:return r}}function zU(r,i,e){return r.hasOwnProperty("duration")?r:syt(r,i,e)}function syt(r,i,e){let n=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,o,s=0,l="";if(typeof r=="string"){let h=r.match(n);if(h===null)return i.push(V2e(r)),{duration:0,delay:0,easing:""};o=loe(parseFloat(h[1]),h[2]);let p=h[3];p!=null&&(s=loe(parseFloat(p),h[4]));let m=h[5];m&&(l=m)}else o=r;if(!e){let h=!1,p=i.length;o<0&&(i.push(x_t()),h=!0),s<0&&(i.push(S_t()),h=!0),h&&i.splice(p,0,V2e(r))}return{duration:o,delay:s,easing:l}}function ayt(r){return r.length?r[0]instanceof Map?r:r.map(i=>new Map(Object.entries(i))):[]}function cy(r,i,e){i.forEach((n,o)=>{let s=Toe(o);e&&!e.has(o)&&e.set(o,r.style[s]),r.style[s]=n})}function PI(r,i){i.forEach((e,n)=>{let o=Toe(n);r.style[o]=""})}function vL(r){return Array.isArray(r)?r.length==1?r[0]:Qhe(r):r}function lyt(r,i,e){let n=i.params||{},o=oDe(r);o.length&&o.forEach(s=>{n.hasOwnProperty(s)||e.push(I_t(s))})}var coe=new RegExp(`${nDe}\\s*(.+?)\\s*${oyt}`,"g");function oDe(r){let i=[];if(typeof r=="string"){let e;for(;e=coe.exec(r);)i.push(e[1]);coe.lastIndex=0}return i}function wL(r,i,e){let n=`${r}`,o=n.replace(coe,(s,l)=>{let h=i[l];return h==null&&(e.push(T_t(l)),h=""),h.toString()});return o==n?r:o}var cyt=/-+([a-z0-9])/g;function Toe(r){return r.replace(cyt,(...i)=>i[1].toUpperCase())}function dyt(r,i){return r===0||i===0}function uyt(r,i,e){if(e.size&&i.length){let n=i[0],o=[];if(e.forEach((s,l)=>{n.has(l)||o.push(l),n.set(l,s)}),o.length)for(let s=1;s<i.length;s++){let l=i[s];o.forEach(h=>l.set(h,Aoe(r,h)))}}return i}function Um(r,i,e){switch(i.type){case Vr.Trigger:return r.visitTrigger(i,e);case Vr.State:return r.visitState(i,e);case Vr.Transition:return r.visitTransition(i,e);case Vr.Sequence:return r.visitSequence(i,e);case Vr.Group:return r.visitGroup(i,e);case Vr.Animate:return r.visitAnimate(i,e);case Vr.Keyframes:return r.visitKeyframes(i,e);case Vr.Style:return r.visitStyle(i,e);case Vr.Reference:return r.visitReference(i,e);case Vr.AnimateChild:return r.visitAnimateChild(i,e);case Vr.AnimateRef:return r.visitAnimateRef(i,e);case Vr.Query:return r.visitQuery(i,e);case Vr.Stagger:return r.visitStagger(i,e);default:throw A_t(i.type)}}function Aoe(r,i){return window.getComputedStyle(r)[i]}var hyt=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),GU=class extends FI{normalizePropertyName(i,e){return Toe(i)}normalizeStyleValue(i,e,n,o){let s="",l=n.toString().trim();if(hyt.has(e)&&n!==0&&n!=="0")if(typeof n=="number")s="px";else{let h=n.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&h[1].length==0&&o.push(E_t(i,n))}return l+s}};var HU="*";function pyt(r,i){let e=[];return typeof r=="string"?r.split(/\s*,\s*/).forEach(n=>myt(n,e,i)):e.push(r),e}function myt(r,i,e){if(r[0]==":"){let p=fyt(r,e);if(typeof p=="function"){i.push(p);return}r=p}let n=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(n==null||n.length<4)return e.push(V_t(r)),i;let o=n[1],s=n[2],l=n[3];i.push(G2e(o,l));let h=o==HU&&l==HU;s[0]=="<"&&!h&&i.push(G2e(l,o))}function fyt(r,i){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return i.push($_t(r)),"* => *"}}var BU=new Set(["true","1"]),jU=new Set(["false","0"]);function G2e(r,i){let e=BU.has(r)||jU.has(r),n=BU.has(i)||jU.has(i);return(o,s)=>{let l=r==HU||r==o,h=i==HU||i==s;return!l&&e&&typeof o=="boolean"&&(l=o?BU.has(r):jU.has(r)),!h&&n&&typeof s=="boolean"&&(h=s?BU.has(i):jU.has(i)),l&&h}}var sDe=":self",gyt=new RegExp(`s*${sDe}s*,?`,"g");function aDe(r,i,e,n){return new doe(r).build(i,e,n)}var H2e="",doe=class{constructor(i){this._driver=i}build(i,e,n){let o=new uoe(e);return this._resetContextStyleTimingState(o),Um(this,vL(i),o)}_resetContextStyleTimingState(i){i.currentQuerySelector=H2e,i.collectedStyles=new Map,i.collectedStyles.set(H2e,new Map),i.currentTime=0}visitTrigger(i,e){let n=e.queryCount=0,o=e.depCount=0,s=[],l=[];return i.name.charAt(0)=="@"&&e.errors.push(M_t()),i.definitions.forEach(h=>{if(this._resetContextStyleTimingState(e),h.type==Vr.State){let p=h,m=p.name;m.toString().split(/\s*,\s*/).forEach(f=>{p.name=f,s.push(this.visitState(p,e))}),p.name=m}else if(h.type==Vr.Transition){let p=this.visitTransition(h,e);n+=p.queryCount,o+=p.depCount,l.push(p)}else e.errors.push(D_t())}),{type:Vr.Trigger,name:i.name,states:s,transitions:l,queryCount:n,depCount:o,options:null}}visitState(i,e){let n=this.visitStyle(i.styles,e),o=i.options&&i.options.params||null;if(n.containsDynamicStyles){let s=new Set,l=o||{};n.styles.forEach(h=>{h instanceof Map&&h.forEach(p=>{oDe(p).forEach(m=>{l.hasOwnProperty(m)||s.add(m)})})}),s.size&&e.errors.push(k_t(i.name,[...s.values()]))}return{type:Vr.State,name:i.name,style:n,options:o?{params:o}:null}}visitTransition(i,e){e.queryCount=0,e.depCount=0;let n=Um(this,vL(i.animation),e),o=pyt(i.expr,e.errors);return{type:Vr.Transition,matchers:o,animation:n,queryCount:e.queryCount,depCount:e.depCount,options:OI(i.options)}}visitSequence(i,e){return{type:Vr.Sequence,steps:i.steps.map(n=>Um(this,n,e)),options:OI(i.options)}}visitGroup(i,e){let n=e.currentTime,o=0,s=i.steps.map(l=>{e.currentTime=n;let h=Um(this,l,e);return o=Math.max(o,e.currentTime),h});return e.currentTime=o,{type:Vr.Group,steps:s,options:OI(i.options)}}visitAnimate(i,e){let n=byt(i.timings,e.errors);e.currentAnimateTimings=n;let o,s=i.styles?i.styles:mi({});if(s.type==Vr.Keyframes)o=this.visitKeyframes(s,e);else{let l=i.styles,h=!1;if(!l){h=!0;let m={};n.easing&&(m.easing=n.easing),l=mi(m)}e.currentTime+=n.duration+n.delay;let p=this.visitStyle(l,e);p.isEmptyStep=h,o=p}return e.currentAnimateTimings=null,{type:Vr.Animate,timings:n,style:o,options:null}}visitStyle(i,e){let n=this._makeStyleAst(i,e);return this._validateStyleAst(n,e),n}_makeStyleAst(i,e){let n=[],o=Array.isArray(i.styles)?i.styles:[i.styles];for(let h of o)typeof h=="string"?h===a_?n.push(h):e.errors.push(O_t(h)):n.push(new Map(Object.entries(h)));let s=!1,l=null;return n.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(l=h.get("easing"),h.delete("easing")),!s)){for(let p of h.values())if(p.toString().indexOf(nDe)>=0){s=!0;break}}}),{type:Vr.Style,styles:n,easing:l,offset:i.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(i,e){let n=e.currentAnimateTimings,o=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),i.styles.forEach(l=>{typeof l!="string"&&l.forEach((h,p)=>{let m=e.collectedStyles.get(e.currentQuerySelector),f=m.get(p),g=!0;f&&(s!=o&&s>=f.startTime&&o<=f.endTime&&(e.errors.push(P_t(p,f.startTime,f.endTime,s,o)),g=!1),s=f.startTime),g&&m.set(p,{startTime:s,endTime:o}),e.options&&lyt(h,e.options,e.errors)})})}visitKeyframes(i,e){let n={type:Vr.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(R_t()),n;let o=1,s=0,l=[],h=!1,p=!1,m=0,f=i.steps.map(R=>{let $=this._makeStyleAst(R,e),H=$.offset!=null?$.offset:vyt($.styles),oe=0;return H!=null&&(s++,oe=$.offset=H),p=p||oe<0||oe>1,h=h||oe<m,m=oe,l.push(oe),$});p&&e.errors.push(F_t()),h&&e.errors.push(L_t());let g=i.steps.length,y=0;s>0&&s<g?e.errors.push(N_t()):s==0&&(y=o/(g-1));let _=g-1,w=e.currentTime,A=e.currentAnimateTimings,k=A.duration;return f.forEach((R,$)=>{let H=y>0?$==_?1:y*$:l[$],oe=H*k;e.currentTime=w+A.delay+oe,A.duration=oe,this._validateStyleAst(R,e),R.offset=H,n.styles.push(R)}),n}visitReference(i,e){return{type:Vr.Reference,animation:Um(this,vL(i.animation),e),options:OI(i.options)}}visitAnimateChild(i,e){return e.depCount++,{type:Vr.AnimateChild,options:OI(i.options)}}visitAnimateRef(i,e){return{type:Vr.AnimateRef,animation:this.visitReference(i.animation,e),options:OI(i.options)}}visitQuery(i,e){let n=e.currentQuerySelector,o=i.options||{};e.queryCount++,e.currentQuery=i;let[s,l]=_yt(i.selector);e.currentQuerySelector=n.length?n+" "+s:s,zm(e.collectedStyles,e.currentQuerySelector,new Map);let h=Um(this,vL(i.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:Vr.Query,selector:s,limit:o.limit||0,optional:!!o.optional,includeSelf:l,animation:h,originalSelector:i.selector,options:OI(i.options)}}visitStagger(i,e){e.currentQuery||e.errors.push(B_t());let n=i.timings==="full"?{duration:0,delay:0,easing:"full"}:zU(i.timings,e.errors,!0);return{type:Vr.Stagger,animation:Um(this,vL(i.animation),e),timings:n,options:null}}};function _yt(r){let i=!!r.split(/\s*,\s*/).find(e=>e==sDe);return i&&(r=r.replace(gyt,"")),r=r.replace(/@\*/g,UU).replace(/@\w+/g,e=>UU+"-"+e.slice(1)).replace(/:animating/g,aoe),[r,i]}function yyt(r){return r?Xe({},r):null}var uoe=class{constructor(i){this.errors=i,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function vyt(r){if(typeof r=="string")return null;let i=null;if(Array.isArray(r))r.forEach(e=>{if(e instanceof Map&&e.has("offset")){let n=e;i=parseFloat(n.get("offset")),n.delete("offset")}});else if(r instanceof Map&&r.has("offset")){let e=r;i=parseFloat(e.get("offset")),e.delete("offset")}return i}function byt(r,i){if(r.hasOwnProperty("duration"))return r;if(typeof r=="number"){let s=zU(r,i).duration;return toe(s,0,"")}let e=r;if(e.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=toe(0,0,"");return s.dynamic=!0,s.strValue=e,s}let o=zU(e,i);return toe(o.duration,o.delay,o.easing)}function OI(r){return r?(r=Xe({},r),r.params&&(r.params=yyt(r.params))):r={},r}function toe(r,i,e){return{duration:r,delay:i,easing:e}}function Eoe(r,i,e,n,o,s,l=null,h=!1){return{type:1,element:r,keyframes:i,preStyleProps:e,postStyleProps:n,duration:o,delay:s,totalTime:o+s,easing:l,subTimeline:h}}var CL=class{constructor(){this._map=new Map}get(i){return this._map.get(i)||[]}append(i,e){let n=this._map.get(i);n||this._map.set(i,n=[]),n.push(...e)}has(i){return this._map.has(i)}clear(){this._map.clear()}},wyt=1,Cyt=":enter",xyt=new RegExp(Cyt,"g"),Syt=":leave",Iyt=new RegExp(Syt,"g");function lDe(r,i,e,n,o,s=new Map,l=new Map,h,p,m=[]){return new hoe().buildKeyframes(r,i,e,n,o,s,l,h,p,m)}var hoe=class{buildKeyframes(i,e,n,o,s,l,h,p,m,f=[]){m=m||new CL;let g=new poe(i,e,m,o,s,f,[]);g.options=p;let y=p.delay?xb(p.delay):0;g.currentTimeline.delayNextStep(y),g.currentTimeline.setStyles([l],null,g.errors,p),Um(this,n,g);let _=g.timelines.filter(w=>w.containsAnimation());if(_.length&&h.size){let w;for(let A=_.length-1;A>=0;A--){let k=_[A];if(k.element===e){w=k;break}}w&&!w.allowOnlyTimelineStyles()&&w.setStyles([h],null,g.errors,p)}return _.length?_.map(w=>w.buildKeyframes()):[Eoe(e,[],[],[],0,y,"",!1)]}visitTrigger(i,e){}visitState(i,e){}visitTransition(i,e){}visitAnimateChild(i,e){let n=e.subInstructions.get(e.element);if(n){let o=e.createSubContext(i.options),s=e.currentTimeline.currentTime,l=this._visitSubInstructions(n,o,o.options);s!=l&&e.transformIntoNewTimeline(l)}e.previousNode=i}visitAnimateRef(i,e){let n=e.createSubContext(i.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([i.options,i.animation.options],e,n),this.visitReference(i.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=i}_applyAnimationRefDelays(i,e,n){for(let o of i){let s=o?.delay;if(s){let l=typeof s=="number"?s:xb(wL(s,o?.params??{},e.errors));n.delayNextStep(l)}}}_visitSubInstructions(i,e,n){let s=e.currentTimeline.currentTime,l=n.duration!=null?xb(n.duration):null,h=n.delay!=null?xb(n.delay):null;return l!==0&&i.forEach(p=>{let m=e.appendInstructionToTimeline(p,l,h);s=Math.max(s,m.duration+m.delay)}),s}visitReference(i,e){e.updateOptions(i.options,!0),Um(this,i.animation,e),e.previousNode=i}visitSequence(i,e){let n=e.subContextCount,o=e,s=i.options;if(s&&(s.params||s.delay)&&(o=e.createSubContext(s),o.transformIntoNewTimeline(),s.delay!=null)){o.previousNode.type==Vr.Style&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=WU);let l=xb(s.delay);o.delayNextStep(l)}i.steps.length&&(i.steps.forEach(l=>Um(this,l,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>n&&o.transformIntoNewTimeline()),e.previousNode=i}visitGroup(i,e){let n=[],o=e.currentTimeline.currentTime,s=i.options&&i.options.delay?xb(i.options.delay):0;i.steps.forEach(l=>{let h=e.createSubContext(i.options);s&&h.delayNextStep(s),Um(this,l,h),o=Math.max(o,h.currentTimeline.currentTime),n.push(h.currentTimeline)}),n.forEach(l=>e.currentTimeline.mergeTimelineCollectedStyles(l)),e.transformIntoNewTimeline(o),e.previousNode=i}_visitTiming(i,e){if(i.dynamic){let n=i.strValue,o=e.params?wL(n,e.params,e.errors):n;return zU(o,e.errors)}else return{duration:i.duration,delay:i.delay,easing:i.easing}}visitAnimate(i,e){let n=e.currentAnimateTimings=this._visitTiming(i.timings,e),o=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),o.snapshotCurrentStyles());let s=i.style;s.type==Vr.Keyframes?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),o.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=i}visitStyle(i,e){let n=e.currentTimeline,o=e.currentAnimateTimings;!o&&n.hasCurrentStyleProperties()&&n.forwardFrame();let s=o&&o.easing||i.easing;i.isEmptyStep?n.applyEmptyStep(s):n.setStyles(i.styles,s,e.errors,e.options),e.previousNode=i}visitKeyframes(i,e){let n=e.currentAnimateTimings,o=e.currentTimeline.duration,s=n.duration,h=e.createSubContext().currentTimeline;h.easing=n.easing,i.styles.forEach(p=>{let m=p.offset||0;h.forwardTime(m*s),h.setStyles(p.styles,p.easing,e.errors,e.options),h.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(h),e.transformIntoNewTimeline(o+s),e.previousNode=i}visitQuery(i,e){let n=e.currentTimeline.currentTime,o=i.options||{},s=o.delay?xb(o.delay):0;s&&(e.previousNode.type===Vr.Style||n==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=WU);let l=n,h=e.invokeQuery(i.selector,i.originalSelector,i.limit,i.includeSelf,!!o.optional,e.errors);e.currentQueryTotal=h.length;let p=null;h.forEach((m,f)=>{e.currentQueryIndex=f;let g=e.createSubContext(i.options,m);s&&g.delayNextStep(s),m===e.element&&(p=g.currentTimeline),Um(this,i.animation,g),g.currentTimeline.applyStylesToKeyframe();let y=g.currentTimeline.currentTime;l=Math.max(l,y)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(l),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=i}visitStagger(i,e){let n=e.parentContext,o=e.currentTimeline,s=i.timings,l=Math.abs(s.duration),h=l*(e.currentQueryTotal-1),p=l*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=h-p;break;case"full":p=n.currentStaggerTime;break}let f=e.currentTimeline;p&&f.delayNextStep(p);let g=f.currentTime;Um(this,i.animation,e),e.previousNode=i,n.currentStaggerTime=o.currentTime-g+(o.startTime-n.currentTimeline.startTime)}},WU={},poe=class r{constructor(i,e,n,o,s,l,h,p){this._driver=i,this.element=e,this.subInstructions=n,this._enterClassName=o,this._leaveClassName=s,this.errors=l,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=WU,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new qU(this._driver,e,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(i,e){if(!i)return;let n=i,o=this.options;n.duration!=null&&(o.duration=xb(n.duration)),n.delay!=null&&(o.delay=xb(n.delay));let s=n.params;if(s){let l=o.params;l||(l=this.options.params={}),Object.keys(s).forEach(h=>{(!e||!l.hasOwnProperty(h))&&(l[h]=wL(s[h],l,this.errors))})}}_copyOptions(){let i={};if(this.options){let e=this.options.params;if(e){let n=i.params={};Object.keys(e).forEach(o=>{n[o]=e[o]})}}return i}createSubContext(i=null,e,n){let o=e||this.element,s=new r(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(i),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(i){return this.previousNode=WU,this.currentTimeline=this.currentTimeline.fork(this.element,i),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(i,e,n){let o={duration:e??i.duration,delay:this.currentTimeline.currentTime+(n??0)+i.delay,easing:""},s=new moe(this._driver,i.element,i.keyframes,i.preStyleProps,i.postStyleProps,o,i.stretchStartingKeyframe);return this.timelines.push(s),o}incrementTime(i){this.currentTimeline.forwardTime(this.currentTimeline.duration+i)}delayNextStep(i){i>0&&this.currentTimeline.delayNextStep(i)}invokeQuery(i,e,n,o,s,l){let h=[];if(o&&h.push(this.element),i.length>0){i=i.replace(xyt,"."+this._enterClassName),i=i.replace(Iyt,"."+this._leaveClassName);let p=n!=1,m=this._driver.query(this.element,i,p);n!==0&&(m=n<0?m.slice(m.length+n,m.length):m.slice(0,n)),h.push(...m)}return!s&&h.length==0&&l.push(j_t(e)),h}},qU=class r{constructor(i,e,n,o){this._driver=i,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=o,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(i){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+i),e&&this.snapshotCurrentStyles()):this.startTime+=i}fork(i,e){return this.applyStylesToKeyframe(),new r(this._driver,i,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=wyt,this._loadKeyframe()}forwardTime(i){this.applyStylesToKeyframe(),this.duration=i,this._loadKeyframe()}_updateStyle(i,e){this._localTimelineStyles.set(i,e),this._globalTimelineStyles.set(i,e),this._styleSummary.set(i,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(i){i&&this._previousKeyframe.set("easing",i);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||a_),this._currentKeyframe.set(e,a_);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(i,e,n,o){e&&this._previousKeyframe.set("easing",e);let s=o&&o.params||{},l=Tyt(i,this._globalTimelineStyles);for(let[h,p]of l){let m=wL(p,s,n);this._pendingStyles.set(h,m),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??a_),this._updateStyle(h,m)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((i,e)=>{this._currentKeyframe.set(e,i)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((i,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,i)}))}snapshotCurrentStyles(){for(let[i,e]of this._localTimelineStyles)this._pendingStyles.set(i,e),this._updateStyle(i,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let i=[];for(let e in this._currentKeyframe)i.push(e);return i}mergeTimelineCollectedStyles(i){i._styleSummary.forEach((e,n)=>{let o=this._styleSummary.get(n);(!o||e.time>o.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let i=new Set,e=new Set,n=this._keyframes.size===1&&this.duration===0,o=[];this._keyframes.forEach((h,p)=>{let m=new Map([...this._backFill,...h]);m.forEach((f,g)=>{f===i4?i.add(g):f===a_&&e.add(g)}),n||m.set("offset",p/this.duration),o.push(m)});let s=[...i.values()],l=[...e.values()];if(n){let h=o[0],p=new Map(h);h.set("offset",0),p.set("offset",1),o=[h,p]}return Eoe(this.element,o,s,l,this.duration,this.startTime,this.easing,!1)}},moe=class extends qU{constructor(i,e,n,o,s,l,h=!1){super(i,e,l.delay),this.keyframes=n,this.preStyleProps=o,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let i=this.keyframes,{delay:e,duration:n,easing:o}=this.timings;if(this._stretchStartingKeyframe&&e){let s=[],l=n+e,h=e/l,p=new Map(i[0]);p.set("offset",0),s.push(p);let m=new Map(i[0]);m.set("offset",W2e(h)),s.push(m);let f=i.length-1;for(let g=1;g<=f;g++){let y=new Map(i[g]),_=y.get("offset"),w=e+_*n;y.set("offset",W2e(w/l)),s.push(y)}n=l,e=0,o="",i=s}return Eoe(this.element,i,this.preStyleProps,this.postStyleProps,n,e,o,!0)}};function W2e(r,i=3){let e=Math.pow(10,i-1);return Math.round(r*e)/e}function Tyt(r,i){let e=new Map,n;return r.forEach(o=>{if(o==="*"){n??=i.keys();for(let s of n)e.set(s,a_)}else for(let[s,l]of o)e.set(s,l)}),e}function q2e(r,i,e,n,o,s,l,h,p,m,f,g,y){return{type:0,element:r,triggerName:i,isRemovalTransition:o,fromState:e,fromStyles:s,toState:n,toStyles:l,timelines:h,queriedElements:p,preStyleProps:m,postStyleProps:f,totalTime:g,errors:y}}var ioe={},YU=class{constructor(i,e,n){this._triggerName=i,this.ast=e,this._stateStyles=n}match(i,e,n,o){return Ayt(this.ast.matchers,i,e,n,o)}buildStyles(i,e,n){let o=this._stateStyles.get("*");return i!==void 0&&(o=this._stateStyles.get(i?.toString())||o),o?o.buildStyles(e,n):new Map}build(i,e,n,o,s,l,h,p,m,f){let g=[],y=this.ast.options&&this.ast.options.params||ioe,_=h&&h.params||ioe,w=this.buildStyles(n,_,g),A=p&&p.params||ioe,k=this.buildStyles(o,A,g),R=new Set,$=new Map,H=new Map,oe=o==="void",se={params:cDe(A,y),delay:this.ast.options?.delay},ge=f?[]:lDe(i,e,this.ast.animation,s,l,w,k,se,m,g),ue=0;return ge.forEach(pe=>{ue=Math.max(pe.duration+pe.delay,ue)}),g.length?q2e(e,this._triggerName,n,o,oe,w,k,[],[],$,H,ue,g):(ge.forEach(pe=>{let Ce=pe.element,_e=zm($,Ce,new Set);pe.preStyleProps.forEach(te=>_e.add(te));let de=zm(H,Ce,new Set);pe.postStyleProps.forEach(te=>de.add(te)),Ce!==e&&R.add(Ce)}),q2e(e,this._triggerName,n,o,oe,w,k,ge,[...R.values()],$,H,ue))}};function Ayt(r,i,e,n,o){return r.some(s=>s(i,e,n,o))}function cDe(r,i){let e=Xe({},i);return Object.entries(r).forEach(([n,o])=>{o!=null&&(e[n]=o)}),e}var foe=class{constructor(i,e,n){this.styles=i,this.defaultParams=e,this.normalizer=n}buildStyles(i,e){let n=new Map,o=cDe(i,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((l,h)=>{l&&(l=wL(l,o,e));let p=this.normalizer.normalizePropertyName(h,e);l=this.normalizer.normalizeStyleValue(h,p,l,e),n.set(h,l)})}),n}};function Eyt(r,i,e){return new goe(r,i,e)}var goe=class{constructor(i,e,n){this.name=i,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states=new Map,e.states.forEach(o=>{let s=o.options&&o.options.params||{};this.states.set(o.name,new foe(o.style,s,n))}),Y2e(this.states,"true","1"),Y2e(this.states,"false","0"),e.transitions.forEach(o=>{this.transitionFactories.push(new YU(i,o,this.states))}),this.fallbackTransition=Myt(i,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(i,e,n,o){return this.transitionFactories.find(l=>l.match(i,e,n,o))||null}matchStyles(i,e,n){return this.fallbackTransition.buildStyles(i,e,n)}};function Myt(r,i,e){let n=[(l,h)=>!0],o={type:Vr.Sequence,steps:[],options:null},s={type:Vr.Transition,animation:o,matchers:n,options:null,queryCount:0,depCount:0};return new YU(r,s,i)}function Y2e(r,i,e){r.has(i)?r.has(e)||r.set(e,r.get(i)):r.has(e)&&r.set(i,r.get(e))}var Dyt=new CL,_oe=class{constructor(i,e,n){this.bodyNode=i,this._driver=e,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(i,e){let n=[],o=[],s=aDe(this._driver,e,n,o);if(n.length)throw G_t(n);o.length&&void 0,this._animations.set(i,s)}_buildPlayer(i,e,n){let o=i.element,s=eDe(this._normalizer,i.keyframes,e,n);return this._driver.animate(o,s,i.duration,i.delay,i.easing,[],!0)}create(i,e,n={}){let o=[],s=this._animations.get(i),l,h=new Map;if(s?(l=lDe(this._driver,e,s,rDe,soe,new Map,new Map,n,Dyt,o),l.forEach(f=>{let g=zm(h,f.element,new Map);f.postStyleProps.forEach(y=>g.set(y,null))})):(o.push(H_t()),l=[]),o.length)throw W_t(o);h.forEach((f,g)=>{f.forEach((y,_)=>{f.set(_,this._driver.computeStyle(g,_,a_))})});let p=l.map(f=>{let g=h.get(f.element);return this._buildPlayer(f,new Map,g)}),m=gC(p);return this._playersById.set(i,m),m.onDestroy(()=>this.destroy(i)),this.players.push(m),m}destroy(i){let e=this._getPlayer(i);e.destroy(),this._playersById.delete(i);let n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(i){let e=this._playersById.get(i);if(!e)throw q_t(i);return e}listen(i,e,n,o){let s=xoe(e,"","","");return Coe(this._getPlayer(i),n,s,o),()=>{}}command(i,e,n,o){if(n=="register"){this.register(i,o[0]);return}if(n=="create"){let l=o[0]||{};this.create(i,e,l);return}let s=this._getPlayer(i);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(i);break}}},K2e="ng-animate-queued",kyt=".ng-animate-queued",noe="ng-animate-disabled",Oyt=".ng-animate-disabled",Pyt="ng-star-inserted",Ryt=".ng-star-inserted",Fyt=[],dDe={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Lyt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},_0="__ng_removed",xL=class{get params(){return this.options.params}constructor(i,e=""){this.namespaceId=e;let n=i&&i.hasOwnProperty("value"),o=n?i.value:i;if(this.value=Byt(o),n){let s=i,{value:l}=s,h=sm(s,["value"]);this.options=h}else this.options={};this.options.params||(this.options.params={})}absorbOptions(i){let e=i.params;if(e){let n=this.options.params;Object.keys(e).forEach(o=>{n[o]==null&&(n[o]=e[o])})}}},bL="void",roe=new xL(bL),yoe=class{constructor(i,e,n){this.id=i,this.hostElement=e,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+i,Wf(e,this._hostClassName)}listen(i,e,n,o){if(!this._triggers.has(e))throw Y_t(n,e);if(n==null||n.length==0)throw K_t(e);if(!jyt(n))throw Z_t(n,e);let s=zm(this._elementListeners,i,[]),l={name:e,phase:n,callback:o};s.push(l);let h=zm(this._engine.statesByElement,i,new Map);return h.has(e)||(Wf(i,NU),Wf(i,NU+"-"+e),h.set(e,roe)),()=>{this._engine.afterFlush(()=>{let p=s.indexOf(l);p>=0&&s.splice(p,1),this._triggers.has(e)||h.delete(e)})}}register(i,e){return this._triggers.has(i)?!1:(this._triggers.set(i,e),!0)}_getTrigger(i){let e=this._triggers.get(i);if(!e)throw Q_t(i);return e}trigger(i,e,n,o=!0){let s=this._getTrigger(e),l=new SL(this.id,e,i),h=this._engine.statesByElement.get(i);h||(Wf(i,NU),Wf(i,NU+"-"+e),this._engine.statesByElement.set(i,h=new Map));let p=h.get(e),m=new xL(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&p&&m.absorbOptions(p.options),h.set(e,m),p||(p=roe),!(m.value===bL)&&p.value===m.value){if(!Uyt(p.params,m.params)){let A=[],k=s.matchStyles(p.value,p.params,A),R=s.matchStyles(m.value,m.params,A);A.length?this._engine.reportError(A):this._engine.afterFlush(()=>{PI(i,k),cy(i,R)})}return}let y=zm(this._engine.playersByElement,i,[]);y.forEach(A=>{A.namespaceId==this.id&&A.triggerName==e&&A.queued&&A.destroy()});let _=s.matchTransition(p.value,m.value,i,m.params),w=!1;if(!_){if(!o)return;_=s.fallbackTransition,w=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:e,transition:_,fromState:p,toState:m,player:l,isFallbackTransition:w}),w||(Wf(i,K2e),l.onStart(()=>{lD(i,K2e)})),l.onDone(()=>{let A=this.players.indexOf(l);A>=0&&this.players.splice(A,1);let k=this._engine.playersByElement.get(i);if(k){let R=k.indexOf(l);R>=0&&k.splice(R,1)}}),this.players.push(l),y.push(l),l}deregister(i){this._triggers.delete(i),this._engine.statesByElement.forEach(e=>e.delete(i)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(o=>o.name!=i))})}clearElementCache(i){this._engine.statesByElement.delete(i),this._elementListeners.delete(i);let e=this._engine.playersByElement.get(i);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(i))}_signalRemovalForInnerTriggers(i,e){let n=this._engine.driver.query(i,UU,!0);n.forEach(o=>{if(o[_0])return;let s=this._engine.fetchNamespacesByElement(o);s.size?s.forEach(l=>l.triggerLeaveAnimation(o,e,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(i,e,n,o){let s=this._engine.statesByElement.get(i),l=new Map;if(s){let h=[];if(s.forEach((p,m)=>{if(l.set(m,p.value),this._triggers.has(m)){let f=this.trigger(i,m,bL,o);f&&h.push(f)}}),h.length)return this._engine.markElementAsRemoved(this.id,i,!0,e,l),n&&gC(h).onDone(()=>this._engine.processLeaveNode(i)),!0}return!1}prepareLeaveAnimationListeners(i){let e=this._elementListeners.get(i),n=this._engine.statesByElement.get(i);if(e&&n){let o=new Set;e.forEach(s=>{let l=s.name;if(o.has(l))return;o.add(l);let p=this._triggers.get(l).fallbackTransition,m=n.get(l)||roe,f=new xL(bL),g=new SL(this.id,l,i);this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:l,transition:p,fromState:m,toState:f,player:g,isFallbackTransition:!0})})}}removeNode(i,e){let n=this._engine;if(i.childElementCount&&this._signalRemovalForInnerTriggers(i,e),this.triggerLeaveAnimation(i,e,!0))return;let o=!1;if(n.totalAnimations){let s=n.players.length?n.playersByQueriedElement.get(i):[];if(s&&s.length)o=!0;else{let l=i;for(;l=l.parentNode;)if(n.statesByElement.get(l)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(i),o)n.markElementAsRemoved(this.id,i,!1,e);else{let s=i[_0];(!s||s===dDe)&&(n.afterFlush(()=>this.clearElementCache(i)),n.destroyInnerAnimations(i),n._onRemovalComplete(i,e))}}insertNode(i,e){Wf(i,this._hostClassName)}drainQueuedTransitions(i){let e=[];return this._queue.forEach(n=>{let o=n.player;if(o.destroyed)return;let s=n.element,l=this._elementListeners.get(s);l&&l.forEach(h=>{if(h.name==n.triggerName){let p=xoe(s,n.triggerName,n.fromState.value,n.toState.value);p._data=i,Coe(n.player,h.phase,p,h.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):e.push(n)}),this._queue=[],e.sort((n,o)=>{let s=n.transition.ast.depCount,l=o.transition.ast.depCount;return s==0||l==0?s-l:this._engine.driver.containsElement(n.element,o.element)?1:-1})}destroy(i){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,i)}},voe=class{_onRemovalComplete(i,e){this.onRemovalComplete(i,e)}constructor(i,e,n){this.bodyNode=i,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,s)=>{}}get queuedPlayers(){let i=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&i.push(n)})}),i}createNamespace(i,e){let n=new yoe(i,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[i]=n}_balanceNamespaceList(i,e){let n=this._namespaceList,o=this.namespacesByHostElement;if(n.length-1>=0){let l=!1,h=this.driver.getParentElement(e);for(;h;){let p=o.get(h);if(p){let m=n.indexOf(p);n.splice(m+1,0,i),l=!0;break}h=this.driver.getParentElement(h)}l||n.unshift(i)}else n.push(i);return o.set(e,i),i}register(i,e){let n=this._namespaceLookup[i];return n||(n=this.createNamespace(i,e)),n}registerTrigger(i,e,n){let o=this._namespaceLookup[i];o&&o.register(e,n)&&this.totalAnimations++}destroy(i,e){i&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let n=this._fetchNamespace(i);this.namespacesByHostElement.delete(n.hostElement);let o=this._namespaceList.indexOf(n);o>=0&&this._namespaceList.splice(o,1),n.destroy(e),delete this._namespaceLookup[i]}))}_fetchNamespace(i){return this._namespaceLookup[i]}fetchNamespacesByElement(i){let e=new Set,n=this.statesByElement.get(i);if(n){for(let o of n.values())if(o.namespaceId){let s=this._fetchNamespace(o.namespaceId);s&&e.add(s)}}return e}trigger(i,e,n,o){if(VU(e)){let s=this._fetchNamespace(i);if(s)return s.trigger(e,n,o),!0}return!1}insertNode(i,e,n,o){if(!VU(e))return;let s=e[_0];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let l=this.collectedLeaveElements.indexOf(e);l>=0&&this.collectedLeaveElements.splice(l,1)}if(i){let l=this._fetchNamespace(i);l&&l.insertNode(e,n)}o&&this.collectEnterElement(e)}collectEnterElement(i){this.collectedEnterElements.push(i)}markElementAsDisabled(i,e){e?this.disabledNodes.has(i)||(this.disabledNodes.add(i),Wf(i,noe)):this.disabledNodes.has(i)&&(this.disabledNodes.delete(i),lD(i,noe))}removeNode(i,e,n){if(VU(e)){let o=i?this._fetchNamespace(i):null;o?o.removeNode(e,n):this.markElementAsRemoved(i,e,!1,n);let s=this.namespacesByHostElement.get(e);s&&s.id!==i&&s.removeNode(e,n)}else this._onRemovalComplete(e,n)}markElementAsRemoved(i,e,n,o,s){this.collectedLeaveElements.push(e),e[_0]={namespaceId:i,setForRemoval:o,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(i,e,n,o,s){return VU(e)?this._fetchNamespace(i).listen(e,n,o,s):()=>{}}_buildInstruction(i,e,n,o,s){return i.transition.build(this.driver,i.element,i.fromState.value,i.toState.value,n,o,i.fromState.options,i.toState.options,e,s)}destroyInnerAnimations(i){let e=this.driver.query(i,UU,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(i,aoe,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(i){let e=this.playersByElement.get(i);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(i){let e=this.playersByQueriedElement.get(i);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(i=>{if(this.players.length)return gC(this.players).onDone(()=>i());i()})}processLeaveNode(i){let e=i[_0];if(e&&e.setForRemoval){if(i[_0]=dDe,e.namespaceId){this.destroyInnerAnimations(i);let n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(i)}this._onRemovalComplete(i,e.setForRemoval)}i.classList?.contains(noe)&&this.markElementAsDisabled(i,!1),this.driver.query(i,Oyt,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(i=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,o)=>this._balanceNamespaceList(n,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){let o=this.collectedEnterElements[n];Wf(o,Pyt)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let n=[];try{e=this._flushAnimations(n,i)}finally{for(let o=0;o<n.length;o++)n[o]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){let o=this.collectedLeaveElements[n];this.processLeaveNode(o)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){let n=this._whenQuietFns;this._whenQuietFns=[],e.length?gC(e).onDone(()=>{n.forEach(o=>o())}):n.forEach(o=>o())}}reportError(i){throw X_t(i)}_flushAnimations(i,e){let n=new CL,o=[],s=new Map,l=[],h=new Map,p=new Map,m=new Map,f=new Set;this.disabledNodes.forEach(Le=>{f.add(Le);let Me=this.driver.query(Le,kyt,!0);for(let ze=0;ze<Me.length;ze++)f.add(Me[ze])});let g=this.bodyNode,y=Array.from(this.statesByElement.keys()),_=X2e(y,this.collectedEnterElements),w=new Map,A=0;_.forEach((Le,Me)=>{let ze=rDe+A++;w.set(Me,ze),Le.forEach(Ve=>Wf(Ve,ze))});let k=[],R=new Set,$=new Set;for(let Le=0;Le<this.collectedLeaveElements.length;Le++){let Me=this.collectedLeaveElements[Le],ze=Me[_0];ze&&ze.setForRemoval&&(k.push(Me),R.add(Me),ze.hasAnimation?this.driver.query(Me,Ryt,!0).forEach(Ve=>R.add(Ve)):$.add(Me))}let H=new Map,oe=X2e(y,Array.from(R));oe.forEach((Le,Me)=>{let ze=soe+A++;H.set(Me,ze),Le.forEach(Ve=>Wf(Ve,ze))}),i.push(()=>{_.forEach((Le,Me)=>{let ze=w.get(Me);Le.forEach(Ve=>lD(Ve,ze))}),oe.forEach((Le,Me)=>{let ze=H.get(Me);Le.forEach(Ve=>lD(Ve,ze))}),k.forEach(Le=>{this.processLeaveNode(Le)})});let se=[],ge=[];for(let Le=this._namespaceList.length-1;Le>=0;Le--)this._namespaceList[Le].drainQueuedTransitions(e).forEach(ze=>{let Ve=ze.player,$e=ze.element;if(se.push(Ve),this.collectedEnterElements.length){let at=$e[_0];if(at&&at.setForMove){if(at.previousTriggersValues&&at.previousTriggersValues.has(ze.triggerName)){let _t=at.previousTriggersValues.get(ze.triggerName),ht=this.statesByElement.get(ze.element);if(ht&&ht.has(ze.triggerName)){let Zt=ht.get(ze.triggerName);Zt.value=_t,ht.set(ze.triggerName,Zt)}}Ve.destroy();return}}let nt=!g||!this.driver.containsElement(g,$e),be=H.get($e),we=w.get($e),ke=this._buildInstruction(ze,n,we,be,nt);if(ke.errors&&ke.errors.length){ge.push(ke);return}if(nt){Ve.onStart(()=>PI($e,ke.fromStyles)),Ve.onDestroy(()=>cy($e,ke.toStyles)),o.push(Ve);return}if(ze.isFallbackTransition){Ve.onStart(()=>PI($e,ke.fromStyles)),Ve.onDestroy(()=>cy($e,ke.toStyles)),o.push(Ve);return}let et=[];ke.timelines.forEach(at=>{at.stretchStartingKeyframe=!0,this.disabledNodes.has(at.element)||et.push(at)}),ke.timelines=et,n.append($e,ke.timelines);let Qe={instruction:ke,player:Ve,element:$e};l.push(Qe),ke.queriedElements.forEach(at=>zm(h,at,[]).push(Ve)),ke.preStyleProps.forEach((at,_t)=>{if(at.size){let ht=p.get(_t);ht||p.set(_t,ht=new Set),at.forEach((Zt,Tt)=>ht.add(Tt))}}),ke.postStyleProps.forEach((at,_t)=>{let ht=m.get(_t);ht||m.set(_t,ht=new Set),at.forEach((Zt,Tt)=>ht.add(Tt))})});if(ge.length){let Le=[];ge.forEach(Me=>{Le.push(J_t(Me.triggerName,Me.errors))}),se.forEach(Me=>Me.destroy()),this.reportError(Le)}let ue=new Map,pe=new Map;l.forEach(Le=>{let Me=Le.element;n.has(Me)&&(pe.set(Me,Me),this._beforeAnimationBuild(Le.player.namespaceId,Le.instruction,ue))}),o.forEach(Le=>{let Me=Le.element;this._getPreviousPlayers(Me,!1,Le.namespaceId,Le.triggerName,null).forEach(Ve=>{zm(ue,Me,[]).push(Ve),Ve.destroy()})});let Ce=k.filter(Le=>J2e(Le,p,m)),_e=new Map;Q2e(_e,this.driver,$,m,a_).forEach(Le=>{J2e(Le,p,m)&&Ce.push(Le)});let te=new Map;_.forEach((Le,Me)=>{Q2e(te,this.driver,new Set(Le),p,i4)}),Ce.forEach(Le=>{let Me=_e.get(Le),ze=te.get(Le);_e.set(Le,new Map([...Me?.entries()??[],...ze?.entries()??[]]))});let Se=[],Te=[],De={};l.forEach(Le=>{let{element:Me,player:ze,instruction:Ve}=Le;if(n.has(Me)){if(f.has(Me)){ze.onDestroy(()=>cy(Me,Ve.toStyles)),ze.disabled=!0,ze.overrideTotalTime(Ve.totalTime),o.push(ze);return}let $e=De;if(pe.size>1){let be=Me,we=[];for(;be=be.parentNode;){let ke=pe.get(be);if(ke){$e=ke;break}we.push(be)}we.forEach(ke=>pe.set(ke,$e))}let nt=this._buildAnimation(ze.namespaceId,Ve,ue,s,te,_e);if(ze.setRealPlayer(nt),$e===De)Se.push(ze);else{let be=this.playersByElement.get($e);be&&be.length&&(ze.parentPlayer=gC(be)),o.push(ze)}}else PI(Me,Ve.fromStyles),ze.onDestroy(()=>cy(Me,Ve.toStyles)),Te.push(ze),f.has(Me)&&o.push(ze)}),Te.forEach(Le=>{let Me=s.get(Le.element);if(Me&&Me.length){let ze=gC(Me);Le.setRealPlayer(ze)}}),o.forEach(Le=>{Le.parentPlayer?Le.syncPlayerEvents(Le.parentPlayer):Le.destroy()});for(let Le=0;Le<k.length;Le++){let Me=k[Le],ze=Me[_0];if(lD(Me,soe),ze&&ze.hasAnimation)continue;let Ve=[];if(h.size){let nt=h.get(Me);nt&&nt.length&&Ve.push(...nt);let be=this.driver.query(Me,aoe,!0);for(let we=0;we<be.length;we++){let ke=h.get(be[we]);ke&&ke.length&&Ve.push(...ke)}}let $e=Ve.filter(nt=>!nt.destroyed);$e.length?Vyt(this,Me,$e):this.processLeaveNode(Me)}return k.length=0,Se.forEach(Le=>{this.players.push(Le),Le.onDone(()=>{Le.destroy();let Me=this.players.indexOf(Le);this.players.splice(Me,1)}),Le.play()}),Se}afterFlush(i){this._flushFns.push(i)}afterFlushAnimationsDone(i){this._whenQuietFns.push(i)}_getPreviousPlayers(i,e,n,o,s){let l=[];if(e){let h=this.playersByQueriedElement.get(i);h&&(l=h)}else{let h=this.playersByElement.get(i);if(h){let p=!s||s==bL;h.forEach(m=>{m.queued||!p&&m.triggerName!=o||l.push(m)})}}return(n||o)&&(l=l.filter(h=>!(n&&n!=h.namespaceId||o&&o!=h.triggerName))),l}_beforeAnimationBuild(i,e,n){let o=e.triggerName,s=e.element,l=e.isRemovalTransition?void 0:i,h=e.isRemovalTransition?void 0:o;for(let p of e.timelines){let m=p.element,f=m!==s,g=zm(n,m,[]);this._getPreviousPlayers(m,f,l,h,e.toState).forEach(_=>{let w=_.getRealPlayer();w.beforeDestroy&&w.beforeDestroy(),_.destroy(),g.push(_)})}PI(s,e.fromStyles)}_buildAnimation(i,e,n,o,s,l){let h=e.triggerName,p=e.element,m=[],f=new Set,g=new Set,y=e.timelines.map(w=>{let A=w.element;f.add(A);let k=A[_0];if(k&&k.removedBeforeQueried)return new Iw(w.duration,w.delay);let R=A!==p,$=$yt((n.get(A)||Fyt).map(ue=>ue.getRealPlayer())).filter(ue=>{let pe=ue;return pe.element?pe.element===A:!1}),H=s.get(A),oe=l.get(A),se=eDe(this._normalizer,w.keyframes,H,oe),ge=this._buildPlayer(w,se,$);if(w.subTimeline&&o&&g.add(A),R){let ue=new SL(i,h,A);ue.setRealPlayer(ge),m.push(ue)}return ge});m.forEach(w=>{zm(this.playersByQueriedElement,w.element,[]).push(w),w.onDone(()=>Nyt(this.playersByQueriedElement,w.element,w))}),f.forEach(w=>Wf(w,z2e));let _=gC(y);return _.onDestroy(()=>{f.forEach(w=>lD(w,z2e)),cy(p,e.toStyles)}),g.forEach(w=>{zm(o,w,[]).push(_)}),_}_buildPlayer(i,e,n){return e.length>0?this.driver.animate(i.element,e,i.duration,i.delay,i.easing,n):new Iw(i.duration,i.delay)}},SL=class{constructor(i,e,n){this.namespaceId=i,this.triggerName=e,this.element=n,this._player=new Iw,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(i){this._containsRealPlayer||(this._player=i,this._queuedCallbacks.forEach((e,n)=>{e.forEach(o=>Coe(i,n,void 0,o))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(i.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(i){this.totalTime=i}syncPlayerEvents(i){let e=this._player;e.triggerCallback&&i.onStart(()=>e.triggerCallback("start")),i.onDone(()=>this.finish()),i.onDestroy(()=>this.destroy())}_queueEvent(i,e){zm(this._queuedCallbacks,i,[]).push(e)}onDone(i){this.queued&&this._queueEvent("done",i),this._player.onDone(i)}onStart(i){this.queued&&this._queueEvent("start",i),this._player.onStart(i)}onDestroy(i){this.queued&&this._queueEvent("destroy",i),this._player.onDestroy(i)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(i){this.queued||this._player.setPosition(i)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(i){let e=this._player;e.triggerCallback&&e.triggerCallback(i)}};function Nyt(r,i,e){let n=r.get(i);if(n){if(n.length){let o=n.indexOf(e);n.splice(o,1)}n.length==0&&r.delete(i)}return n}function Byt(r){return r??null}function VU(r){return r&&r.nodeType===1}function jyt(r){return r=="start"||r=="done"}function Z2e(r,i){let e=r.style.display;return r.style.display=i??"none",e}function Q2e(r,i,e,n,o){let s=[];e.forEach(p=>s.push(Z2e(p)));let l=[];n.forEach((p,m)=>{let f=new Map;p.forEach(g=>{let y=i.computeStyle(m,g,o);f.set(g,y),(!y||y.length==0)&&(m[_0]=Lyt,l.push(m))}),r.set(m,f)});let h=0;return e.forEach(p=>Z2e(p,s[h++])),l}function X2e(r,i){let e=new Map;if(r.forEach(h=>e.set(h,[])),i.length==0)return e;let n=1,o=new Set(i),s=new Map;function l(h){if(!h)return n;let p=s.get(h);if(p)return p;let m=h.parentNode;return e.has(m)?p=m:o.has(m)?p=n:p=l(m),s.set(h,p),p}return i.forEach(h=>{let p=l(h);p!==n&&e.get(p).push(h)}),e}function Wf(r,i){r.classList?.add(i)}function lD(r,i){r.classList?.remove(i)}function Vyt(r,i,e){gC(e).onDone(()=>r.processLeaveNode(i))}function $yt(r){let i=[];return uDe(r,i),i}function uDe(r,i){for(let e=0;e<r.length;e++){let n=r[e];n instanceof Qk?uDe(n.players,i):i.push(n)}}function Uyt(r,i){let e=Object.keys(r),n=Object.keys(i);if(e.length!=n.length)return!1;for(let o=0;o<e.length;o++){let s=e[o];if(!i.hasOwnProperty(s)||r[s]!==i[s])return!1}return!0}function J2e(r,i,e){let n=e.get(r);if(!n)return!1;let o=i.get(r);return o?n.forEach(s=>o.add(s)):i.set(r,n),e.delete(r),!0}var cD=class{constructor(i,e,n){this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(o,s)=>{},this._transitionEngine=new voe(i.body,e,n),this._timelineEngine=new _oe(i.body,e,n),this._transitionEngine.onRemovalComplete=(o,s)=>this.onRemovalComplete(o,s)}registerTrigger(i,e,n,o,s){let l=i+"-"+o,h=this._triggerCache[l];if(!h){let p=[],m=[],f=aDe(this._driver,s,p,m);if(p.length)throw U_t(o,p);m.length&&void 0,h=Eyt(o,f,this._normalizer),this._triggerCache[l]=h}this._transitionEngine.registerTrigger(e,o,h)}register(i,e){this._transitionEngine.register(i,e)}destroy(i,e){this._transitionEngine.destroy(i,e)}onInsert(i,e,n,o){this._transitionEngine.insertNode(i,e,n,o)}onRemove(i,e,n){this._transitionEngine.removeNode(i,e,n)}disableAnimations(i,e){this._transitionEngine.markElementAsDisabled(i,e)}process(i,e,n,o){if(n.charAt(0)=="@"){let[s,l]=$2e(n),h=o;this._timelineEngine.command(s,e,l,h)}else this._transitionEngine.trigger(i,e,n,o)}listen(i,e,n,o,s){if(n.charAt(0)=="@"){let[l,h]=$2e(n);return this._timelineEngine.listen(l,e,h,s)}return this._transitionEngine.listen(i,e,n,o,s)}flush(i=-1){this._transitionEngine.flush(i)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(i){this._transitionEngine.afterFlushAnimationsDone(i)}};function zyt(r,i){let e=null,n=null;return Array.isArray(i)&&i.length?(e=ooe(i[0]),i.length>1&&(n=ooe(i[i.length-1]))):i instanceof Map&&(e=ooe(i)),e||n?new boe(r,e,n):null}var boe=class r{static{this.initialStylesByElement=new WeakMap}constructor(i,e,n){this._element=i,this._startStyles=e,this._endStyles=n,this._state=0;let o=r.initialStylesByElement.get(i);o||r.initialStylesByElement.set(i,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&cy(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(cy(this._element,this._initialStyles),this._endStyles&&(cy(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(PI(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(PI(this._element,this._endStyles),this._endStyles=null),cy(this._element,this._initialStyles),this._state=3)}};function ooe(r){let i=null;return r.forEach((e,n)=>{Gyt(n)&&(i=i||new Map,i.set(n,e))}),i}function Gyt(r){return r==="display"||r==="position"}var KU=class{constructor(i,e,n,o){this.element=i,this.keyframes=e,this.options=n,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let i=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,i,this.options),this._finalKeyframe=i.length?i[i.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(i){let e=[];return i.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(i,e,n){return i.animate(this._convertKeyframesToObject(e),n)}onStart(i){this._originalOnStartFns.push(i),this._onStartFns.push(i)}onDone(i){this._originalOnDoneFns.push(i),this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(i=>i()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}setPosition(i){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=i*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let i=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,o)=>{o!=="offset"&&i.set(o,this._finished?n:Aoe(this.element,o))}),this.currentSnapshot=i}triggerCallback(i){let e=i==="start"?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}},ZU=class{validateStyleProperty(i){return!0}validateAnimatableStyleProperty(i){return!0}containsElement(i,e){return tDe(i,e)}getParentElement(i){return Soe(i)}query(i,e,n){return iDe(i,e,n)}computeStyle(i,e,n){return Aoe(i,e)}animate(i,e,n,o,s,l=[]){let h=o==0?"both":"forwards",p={duration:n,delay:o,fill:h};s&&(p.easing=s);let m=new Map,f=l.filter(_=>_ instanceof KU);dyt(n,o)&&f.forEach(_=>{_.currentSnapshot.forEach((w,A)=>m.set(A,w))});let g=ayt(e).map(_=>new Map(_));g=uyt(i,g,m);let y=zyt(i,g);return new KU(i,g,p,y)}};var $U="@",hDe="@.disabled",QU=class{constructor(i,e,n,o){this.namespaceId=i,this.delegate=e,this.engine=n,this._onDestroy=o,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(i){this.delegate.destroyNode?.(i)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(i,e){return this.delegate.createElement(i,e)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}appendChild(i,e){this.delegate.appendChild(i,e),this.engine.onInsert(this.namespaceId,e,i,!1)}insertBefore(i,e,n,o=!0){this.delegate.insertBefore(i,e,n),this.engine.onInsert(this.namespaceId,e,i,o)}removeChild(i,e,n){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(i,e){return this.delegate.selectRootElement(i,e)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,e,n,o){this.delegate.setAttribute(i,e,n,o)}removeAttribute(i,e,n){this.delegate.removeAttribute(i,e,n)}addClass(i,e){this.delegate.addClass(i,e)}removeClass(i,e){this.delegate.removeClass(i,e)}setStyle(i,e,n,o){this.delegate.setStyle(i,e,n,o)}removeStyle(i,e,n){this.delegate.removeStyle(i,e,n)}setProperty(i,e,n){e.charAt(0)==$U&&e==hDe?this.disableAnimations(i,!!n):this.delegate.setProperty(i,e,n)}setValue(i,e){this.delegate.setValue(i,e)}listen(i,e,n){return this.delegate.listen(i,e,n)}disableAnimations(i,e){this.engine.disableAnimations(i,e)}},woe=class extends QU{constructor(i,e,n,o,s){super(e,n,o,s),this.factory=i,this.namespaceId=e}setProperty(i,e,n){e.charAt(0)==$U?e.charAt(1)=="."&&e==hDe?(n=n===void 0?!0:!!n,this.disableAnimations(i,n)):this.engine.process(this.namespaceId,i,e.slice(1),n):this.delegate.setProperty(i,e,n)}listen(i,e,n){if(e.charAt(0)==$U){let o=Hyt(i),s=e.slice(1),l="";return s.charAt(0)!=$U&&([s,l]=Wyt(s)),this.engine.listen(this.namespaceId,o,s,l,h=>{let p=h._data||-1;this.factory.scheduleListenerCallback(p,n,h)})}return this.delegate.listen(i,e,n)}};function Hyt(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}function Wyt(r){let i=r.indexOf("."),e=r.substring(0,i),n=r.slice(i+1);return[e,n]}var XU=class{constructor(i,e,n){this.delegate=i,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=(o,s)=>{s?.removeChild(null,o)}}createRenderer(i,e){let n="",o=this.delegate.createRenderer(i,e);if(!i||!e?.data?.animation){let m=this._rendererCache,f=m.get(o);if(!f){let g=()=>m.delete(o);f=new QU(n,o,this.engine,g),m.set(o,f)}return f}let s=e.id,l=e.id+"-"+this._currentId;this._currentId++,this.engine.register(l,i);let h=m=>{Array.isArray(m)?m.forEach(h):this.engine.registerTrigger(s,l,i,m.name,m)};return e.data.animation.forEach(h),new woe(this,l,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(i,e,n){if(i>=0&&i<this._microtaskId){this._zone.run(()=>e(n));return}let o=this._animationCallbacksBuffer;o.length==0&&queueMicrotask(()=>{this._zone.run(()=>{o.forEach(s=>{let[l,h]=s;l(h)}),this._animationCallbacksBuffer=[]})}),o.push([e,n])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var Yyt=(()=>{class r extends cD{constructor(e,n,o){super(e,n,o)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(n){return new(n||r)(xe(Ui),xe(RI),xe(FI))}}static{this.\u0275prov=rt({token:r,factory:r.\u0275fac})}}return r})();function Kyt(){return new GU}function Zyt(r,i,e){return new XU(r,i,e)}var pDe=[{provide:FI,useFactory:Kyt},{provide:cD,useClass:Yyt},{provide:rw,useFactory:Zyt,deps:[aN,cD,ci]}],Qyt=[{provide:RI,useFactory:()=>new ZU},{provide:so,useValue:"BrowserAnimations"},...pDe],s5i=[{provide:RI,useClass:Ioe},{provide:so,useValue:"NoopAnimations"},...pDe];function mDe(){return nf("NgEagerAnimations"),[...Qyt]}var Xyt=(()=>{class r{messageService;constructor(e){this.messageService=e}intercept(e,n){let o=e.headers.get("interceptError"),s=e.clone({headers:e.headers.delete("interceptError")});if(o==="false")return n.handle(s);let l={httpError:void 0};return n.handle(s).pipe(Fn(h=>this.handleError(h,l)),Ud(()=>{let h=l.httpError;h&&(h.error.toDisplay?this.handleCaughtError(h):h.error.caught||this.handleUncaughtError(h))}))}handleError(e,n){if(e instanceof wg){let o=e.error==="object"?e.error:{};o.message=e.error?.message||e.statusText,o.caught=!1,e=new wg({error:o,headers:e.headers,status:e.status,statusText:e.statusText,url:e.url})}return n.httpError=e,dd(e)}handleCaughtError(e){e.error.caught=!0,this.messageService.error(e.error.message,e.error.title,{progressBar:!1})}handleUncaughtError(e){e.error.caught=!0,this.messageService.error("igo.core.errors.uncaught.message","igo.core.errors.uncaught.title",{progressBar:!1})}static \u0275fac=function(n){return new(n||r)(xe(nl))};static \u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Moe=(()=>{class r{static forRoot(){return{ngModule:r,providers:[{provide:ox,useClass:Xyt,multi:!0}]}}constructor(e){if(e)throw new Error("IgoErrorModule is already loaded. Import it in the AppModule only")}static \u0275fac=function(n){return new(n||r)(xe(r,12))};static \u0275mod=zt({type:r});static \u0275inj=Ut({})}return r})();var fDe=(()=>{class r{static forRoot(e={}){return{ngModule:r,providers:[u4(e),m4(f4())]}}static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({providers:[kW(),oN(Yde())],imports:[$a,Qq.forRoot(),Moe.forRoot(),Qq,Moe,On]})}return r})();var dD={production:!1,igo:{app:{forceCoordsNA:!0,install:{enabled:!1,promote:!1},pwa:{enabled:!1},offline:{enable:!0}},auth:{url:"/apis/users",tokenKey:"id_token_igo",allowAnonymous:!0,trustHosts:["geoegl.msp.gouv.qc.ca","testgeoegl.msp.gouv.qc.ca"],hostsByKey:[{domainRegFilters:"(https://|http://)?(.*domain.com)(.*)",keyProperty:"key",keyValue:"123456"}]},storage:{url:"/apis/igo2/user/igo",key:"igo"},layer:{group:{enable:!0,canCreate:!0,canRename:!0,maxHierarchyLevel:4}},catalog:{sources:[{id:"Image Arcgis Rest",title:"Image Arcgis Rest",externalProvider:!0,url:"https://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Specialty/ESRI_StateCityHighway_USA/MapServer",type:"imagearcgisrest",sourceOptions:{queryable:!0}},{id:"Gououvert",title:"Gouvouvert",url:"/apis/ws/igo_gouvouvert.fcgi"},{id:"glace",title:"Carte de glace",url:"/apis/ws/radarsat.fcgi",showLegend:!0},{id:"baselayerWMTS",title:"Fonds / Baselayers",url:"/carto/wmts",type:"wmts",matrixSet:"EPSG_3857",version:"1.3.0"},{id:"fusion_catalog",title:"(composite catalog) fusion catalog",url:"",composite:[{id:"tq_swtq",url:"https://ws.mapserver.transports.gouv.qc.ca/swtq"},{id:"rn_wmts",url:"https://servicesmatriciels.mern.gouv.qc.ca/erdas-iws/ogc/wmts/Cartes_Images",type:"wmts",setCrossOriginAnonymous:!0,matrixSet:"EPSG_3857",version:"1.0.0"}]},{id:"forced_properties",title:"Forced properties catalog (layer name and abstract)",url:"",composite:[{id:"forcedProperties_wmts",url:"https://servicesmatriciels.mern.gouv.qc.ca/erdas-iws/ogc/wmts/Cartes_Images",type:"wmts",setCrossOriginAnonymous:!0,matrixSet:"EPSG_3857",version:"1.0.0",forcedProperties:[{metadataAbstract:"Nouvel abstract",layerName:"BDTQ-20K_Allegee",title:"Nouveau nom et abstract pour cette couche WMTS"}]},{id:"forcedProperties_wms",url:"https://ws.mapserver.transports.gouv.qc.ca/swtq",type:"wms",forcedProperties:[{layerName:"*",metadataAbstractAll:"New WMS abstract to all layers"},{layerName:"etablissement_mtq",title:"Nouveau nom pour cette couche WMS et nouvel url pour toutes les couches",metadataUrl:"https://www.donneesquebec.ca/"}]},{id:"forcedProperties_arcgisrest",url:"https://gisp.dfo-mpo.gc.ca/arcgis/rest/services/FGP/Seafloor_SubstratBenthique/MapServer",externalProvider:!0,type:"arcgisrest",forcedProperties:[{layerName:"Sediment substrate / Substrat s\xE9dimentaire",title:"Nouveau nom et nouvel url pour cette couche ArcGIS REST",metadataUrl:"https://www.donneesquebec.ca/"},{layerName:"*",metadataAbstractAll:"New arcgisrest abstract to all layers"}]}]},{id:"group_impose",title:"(composite catalog) group imposed and unique layer title for same source",url:"",composite:[{id:"tq_swtq",url:"https://ws.mapserver.transports.gouv.qc.ca/swtq",regFilters:["zpegt"],groupImpose:{id:"zpegt",title:"zpegt"}},{id:"Gououvert",url:"https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi",regFilters:["zpegt"],groupImpose:{id:"zpegt",title:"zpegt"}},{id:"Gououvert",url:"https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi",regFilters:["zpegt"],groupImpose:{id:"zpegt",title:"zpegt"}},{id:"rn_wmts",url:"https://servicesmatriciels.mern.gouv.qc.ca/erdas-iws/ogc/wmts/Cartes_Images",type:"wmts",setCrossOriginAnonymous:!0,matrixSet:"EPSG_3857",version:"1.0.0",groupImpose:{id:"cartetopo",title:"Carte topo \xE9chelle 1/20 000"}}]},{id:"tag_layernametitle",title:"(composite catalog) tag source on same layer title",url:"",composite:[{id:"tq_swtq",url:"https://ws.mapserver.transports.gouv.qc.ca/swtq",regFilters:["limtn_charg"],groupImpose:{id:"mix_swtq_gouv",title:"mix same name layer"}},{id:"Gououvert",url:"https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi",regFilters:["limtn_charg"],groupImpose:{id:"mix_swtq_gouv",title:"mix same name layer"}}]}]},depot:{url:"/apis/depot"},dom:[{id:1,name:"test-dom",values:[{id:"Radar photo fixe",value:"Radar photo fixe"},{id:"Radar photo mobile",value:"Radar photo mobile"}]},{id:1,name:"dom_test",url:"https://ws.mapserver.transports.gouv.qc.ca/applicatif?service=WFS&request=GetFeature&version=2.0.0&outputformat=dom&typenames=dom&dom=dom_test"}],language:{prefix:"./locale/"},interactiveTour:{tourInMobile:!0,pathToConfigFile:"./config/interactiveTour.json"},importExport:{importWithStyle:!1,url:"/apis/ogre",configFileToGeoDBService:"./data/geoDataToIDB.json",clientSideFileSizeMaxMb:32,allowToStoreLayer:!0},searchSources:{workspace:{available:!0,enabled:!0},nominatim:{available:!1},storedqueries:{available:!1},icherche:{searchUrl:"/apis/icherche",order:2,params:{limit:"5"}},coordinatesreverse:{showInPointerSummary:!0},icherchereverse:{showInPointerSummary:!0,searchUrl:"/apis/terrapi",order:3,enabled:!0},ilayer:{searchUrl:"/apis/icherche/layers",order:4,params:{limit:"5"}},cadastre:{enabled:!1}},projections:[{code:"EPSG:32198",alias:"Quebec Lambert",def:"+proj=lcc +lat_1=60 +lat_2=46 +lat_0=44 +lon_0=-68.5 +x_0=0 +y_0=0 +ellps=GRS80           +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-799574,45802,891595.4,18495675e-1]},{code:"EPSG:3798",alias:"MTQ Lambert",def:"+proj=lcc +lat_1=50 +lat_2=46 +lat_0=44 +lon_0=-70 +x_0=800000 +y_0=0           +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[31796.5834,158846.2231,18133234284e-4,21412410978e-4]}],searchOverlayStyle:{base:{markerColor:"#5ed0fb",markerOpacity:.8,markerOutlineColor:"#a7e7ff",fillColor:"#5ed0fb",fillOpacity:.2,strokeColor:"#5ed0fb",strokeOpacity:.7,strokeWidth:2},focus:{markerColor:"#5ed0fb",markerOpacity:1,markerOutlineColor:"#DFF7FF",fillColor:"#5ed0fb",fillOpacity:.3,strokeColor:"#5ed0fb",strokeOpacity:1,strokeWidth:2},selection:{markerColor:"#00a1de",markerOpacity:1,markerOutlineColor:"#ffffff",fillColor:"#00a1de",fillOpacity:.3,strokeColor:"#5ed0fb",strokeOpacity:1,strokeWidth:2}},queryOverlayStyle:{base:{markerColor:"#5ed0fb",markerOpacity:.8,markerOutlineColor:"#a7e7ff",fillColor:"#5ed0fb",fillOpacity:.2,strokeColor:"#5ed0fb",strokeOpacity:.7,strokeWidth:2},focus:{markerColor:"#5ed0fb",markerOpacity:1,markerOutlineColor:"#DFF7FF",fillColor:"#5ed0fb",fillOpacity:.3,strokeColor:"#5ed0fb",strokeOpacity:1,strokeWidth:2},selection:{markerColor:"#00a1de",markerOpacity:1,markerOutlineColor:"#ffffff",fillColor:"#00a1de",fillOpacity:.3,strokeColor:"#5ed0fb",strokeOpacity:1,strokeWidth:2}}}};var Jyt=(()=>{class r extends $H{buildHammer(e){let n=super.buildHammer(e);return n.set({touchAction:"pan-y"}),n}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Gr(r)))(o||r)}})();static \u0275prov=rt({token:r,factory:r.\u0275fac})}return r})(),gDe=(()=>{class r{static forRoot(){return{ngModule:r,providers:[{provide:yk,useClass:Jyt}]}}static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({imports:[oue]})}return r})();var _De=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=zt({type:r});static \u0275inj=Ut({providers:[kU,mEe(),OEe({path:"./assets/list-style.json"})],imports:[gDe.forRoot(),bEe.forRoot(),kEe,cre,FU]})}return r})();var evt="blue-theme",tvt={showDelay:500,hideDelay:0,touchendHideDelay:0,disableTooltipInteractivity:!0},yDe={providers:[ZD(VH,fDe,_4,_De,N2e.register("ngsw-worker.js",{enabled:dD.igo.app.pwa.enabled,registrationStrategy:"registerWithDelay:5000"})),oN(),mDe(),Uue([]),u4({default:dD.igo,path:"./config/config.json"}),m4(f4()),Ype(Zq("add"),Zq("b2c")),KEe(dD.igo.app.offline),mfe(),ivt(),xS,{provide:mY,useValue:tvt},{provide:uW,useValue:{appearance:"fill"}}]};function ivt(){return{provide:hm,useFactory:(r,i)=>()=>r.isLoaded$.pipe(So(e=>e)).subscribe(()=>{let e=r.getConfig("theme",evt);Dpe(i,e)}),deps:[Ri,Ui],multi:!0}}dD.production&&void 0;tue(j2e,yDe).catch(r=>console.log(r));
